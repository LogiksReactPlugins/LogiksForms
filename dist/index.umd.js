(function(G,O){typeof exports=="object"&&typeof module<"u"?O(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],O):(G=typeof globalThis<"u"?globalThis:G||self,O(G.LogiksForm={},G.React,G.axios,G.Yup,G.formik))})(this,function(G,O,z,fe,te){"use strict";function ye(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:()=>e[n]})}}return r.default=e,Object.freeze(r)}const M=ye(fe);var re={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function ve(){if(he)return Q;he=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(i,o,x){var N=null;if(x!==void 0&&(N=""+x),o.key!==void 0&&(N=""+o.key),"key"in o){x={};for(var l in o)l!=="key"&&(x[l]=o[l])}else x=o;return o=x.ref,{$$typeof:e,type:i,key:N,ref:o!==void 0?o:null,props:x}}return Q.Fragment=r,Q.jsx=n,Q.jsxs=n,Q}var X={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function je(){return me||(me=1,process.env.NODE_ENV!=="production"&&function(){function e(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===B?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case T:return"Profiler";case f:return"StrictMode";case s:return"Suspense";case k:return"SuspenseList";case R:return"Activity"}if(typeof a=="object")switch(typeof a.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),a.$$typeof){case F:return"Portal";case C:return(a.displayName||"Context")+".Provider";case g:return(a._context.displayName||"Context")+".Consumer";case $:var m=a.render;return a=a.displayName,a||(a=m.displayName||m.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case q:return m=a.displayName||null,m!==null?m:e(a.type)||"Memo";case y:m=a._payload,a=a._init;try{return e(a(m))}catch{}}return null}function r(a){return""+a}function n(a){try{r(a);var m=!1}catch{m=!0}if(m){m=console;var p=m.error,A=typeof Symbol=="function"&&Symbol.toStringTag&&a[Symbol.toStringTag]||a.constructor.name||"Object";return p.call(m,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",A),r(a)}}function i(a){if(a===b)return"<>";if(typeof a=="object"&&a!==null&&a.$$typeof===y)return"<...>";try{var m=e(a);return m?"<"+m+">":"<...>"}catch{return"<...>"}}function o(){var a=Y.A;return a===null?null:a.getOwner()}function x(){return Error("react-stack-top-frame")}function N(a){if(I.call(a,"key")){var m=Object.getOwnPropertyDescriptor(a,"key").get;if(m&&m.isReactWarning)return!1}return a.key!==void 0}function l(a,m){function p(){E||(E=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",m))}p.isReactWarning=!0,Object.defineProperty(a,"key",{get:p,configurable:!0})}function h(){var a=e(this.type);return u[a]||(u[a]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),a=this.props.ref,a!==void 0?a:null}function v(a,m,p,A,V,L,U,ue){return p=L.ref,a={$$typeof:P,type:a,key:m,props:L,_owner:V},(p!==void 0?p:null)!==null?Object.defineProperty(a,"ref",{enumerable:!1,get:h}):Object.defineProperty(a,"ref",{enumerable:!1,value:null}),a._store={},Object.defineProperty(a._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(a,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(a,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:U}),Object.defineProperty(a,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a}function d(a,m,p,A,V,L,U,ue){var D=m.children;if(D!==void 0)if(A)if(K(D)){for(A=0;A<D.length;A++)j(D[A]);Object.freeze&&Object.freeze(D)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else j(D);if(I.call(m,"key")){D=e(a);var H=Object.keys(m).filter(function(Le){return Le!=="key"});A=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",_[D+A]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,A,D,H,D),_[D+A]=!0)}if(D=null,p!==void 0&&(n(p),D=""+p),N(m)&&(n(m.key),D=""+m.key),"key"in m){p={};for(var de in m)de!=="key"&&(p[de]=m[de])}else p=m;return D&&l(p,typeof a=="function"?a.displayName||a.name||"Unknown":a),v(a,D,L,V,o(),p,U,ue)}function j(a){typeof a=="object"&&a!==null&&a.$$typeof===P&&a._store&&(a._store.validated=1)}var w=O,P=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),C=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),B=Symbol.for("react.client.reference"),Y=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.prototype.hasOwnProperty,K=Array.isArray,ee=console.createTask?console.createTask:function(){return null};w={"react-stack-bottom-frame":function(a){return a()}};var E,u={},c=w["react-stack-bottom-frame"].bind(w,x)(),S=ee(i(x)),_={};X.Fragment=b,X.jsx=function(a,m,p,A,V){var L=1e4>Y.recentlyCreatedOwnerStacks++;return d(a,m,p,!1,A,V,L?Error("react-stack-top-frame"):c,L?ee(i(a)):S)},X.jsxs=function(a,m,p,A,V){var L=1e4>Y.recentlyCreatedOwnerStacks++;return d(a,m,p,!0,A,V,L?Error("react-stack-top-frame"):c,L?ee(i(a)):S)}}()),X}var pe;function Ne(){return pe||(pe=1,process.env.NODE_ENV==="production"?re.exports=ve():re.exports=je()),re.exports}var t=Ne();function we(e){return e.template==="accordion"?"accordion":e.template==="simple"?"simple":e.template==="cards"?"cards":Object.values(e.fields||{}).some(i=>i.group)?"tab":"simple"}function Se(e,r="Info"){const n={};let i=!1;if(Object.values(e).forEach(x=>{x.group&&(i=!0)}),!i)return{};const o=[];return Object.entries(e).forEach(([x,N])=>{const l={...N,name:x};if(N.group){const h=N.group;n[h]||(n[h]=[]),n[h].push(l)}else o.push(l)}),o.length>0?{[r]:o,...n}:n}function Ee(e){const r={};return Object.keys(e).forEach(n=>{r[n]={label:n,required:e[n].required??!1}}),r}const Z=(e,r,n,i)=>{e.forEach(o=>{const x=o?.name;if(!x)return;let N=i?.[x];N==null&&(N=o.default),o.multiple===!0||o.type==="checkbox"||o.type==="tags"?r[x]=Array.isArray(N)?N:typeof N=="string"?N.split(",").map(h=>h.trim()).filter(Boolean):[]:o.type==="json"?r[x]=typeof N=="object"&&N!==null?JSON.stringify(N,null,2):N??"":o.type==="date"?r[x]=typeof N=="string"?N.slice(0,10):"":x==="blocked"||x==="blacklist"?r[x]=String(N??"false"):r[x]=N??"";let l;o.type==="file"?l=o.multiple?M.array().of(M.mixed()):M.mixed():o.multiple===!0||o.type==="checkbox"||o.type==="tags"?l=M.array().of(M.string()):o.type==="email"?l=M.string().email("Invalid email"):o.type==="number"?l=M.number().typeError("Must be a number"):o.type==="date"?l=M.string().matches(/^\d{4}-\d{2}-\d{2}$/,"Invalid date"):o.type==="json"?l=M.string().test("json","Invalid JSON",h=>{if(!h)return!0;try{return JSON.parse(h),!0}catch{return!1}}):l=M.string(),o.required&&(l=l.required(o.error_message||`${o.label||x} is required`)),o?.validate?.regex&&typeof o.validate.regex=="string"&&(l=l.matches(new RegExp(o?.validate?.regex),o?.error_message||"Invalid input format")),o?.validate&&Object.entries(o.validate).forEach(([h,v])=>{switch(h){case"email":v&&(l=l.email("Invalid email format"));break;case"mobile":l=l.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":l=l.matches(new RegExp(v),`Must match pattern: ${v}`);break;case"date":l=M.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((d,j)=>{if(typeof j=="string"){const w=j.replace(/-/g,"/"),[P,F,b]=w.split("/");if(P&&F&&b)return new Date(`${b}-${F}-${P}`)}return d});break;case"time":l=l.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":l=l.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":l=M.number().typeError("Must be numeric");break;case"float":case"decimal":l=M.number().typeError("Must be a decimal").transform((d,j)=>{if(j==null||j==="")return;const w=Number(j);if(isNaN(w))return d;if(typeof d=="number"&&!isNaN(d)){const P=Number(d);return Number.isInteger(P)?Number(w.toFixed(P)):w}return w});break;case"alphanumeric":l=l.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":l=l.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":l=l.transform(d=>d&&d.toUpperCase());break;case"lower":l=l.transform(d=>d&&d.toLowerCase());break;case"length-min":{const d=Number(v);isNaN(d)||(l=l.min(d,`Minimum length is ${d}`));break}case"length-max":{const d=Number(v);isNaN(d)||(l=l.max(d,`Maximum length is ${d}`));break}}}),n[x]=l})},ae={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function se(e){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(e)?e:6}const ne=e=>e===!0||e==="true",W=(e,r)=>typeof e=="string"?e.replace(/#(\w+)#/g,(n,i)=>r[i]!==void 0?String(r[i]):n):Array.isArray(e)?e.map(n=>W(n,r)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([n,i])=>[W(n,r),W(i,r)])):e,le=(e,r,n,i)=>{const o=Array.isArray(n?.data?.data)?n.data.data:Array.isArray(n?.data)?n.data:n;if(!Array.isArray(o)||o.length===0)return{};const x=i??(o[0]&&typeof o[0]=="object"&&"category"in o[0]?"category":void 0);if(!x){const l={};return o.forEach(h=>{h[e]!=null&&h[r]!=null&&(l[h[e]]=h[r])}),l}const N={};return o.forEach(l=>{const h=l[x]??"Others",v=l[e],d=l[r];v==null||d==null||(N[h]||(N[h]={}),N[h][v]=d)}),N},be=(e,r)=>{if(!e||r==null)return;if(typeof Object.values(e)[0]=="string")return e[r];for(const i of Object.values(e))if(r in i)return i[r]},Oe=e=>e?typeof Object.values(e)[0]=="string"?Object.entries(e):Object.values(e).flatMap(n=>Object.entries(n)):[],xe=e=>{if(!e||typeof e!="object")return!1;const r=Object.values(e)[0];return typeof r=="object"&&r!==null};async function Te(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const e=await new Promise((i,o)=>{navigator.geolocation.getCurrentPosition(i,o,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:r,longitude:n}=e.coords;return`${r},${n}`}catch(e){if(!(e instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(e.code){case e.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case e.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case e.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const $e=e=>Object.entries(e??{}).filter(([,r])=>r.type==="geolocation").map(([r])=>r);function Ae(e){return Object.entries(e).map(([r,n])=>({...n,name:r}))}async function ge(e,r){try{const n=await z({method:"POST",url:e.baseURL+e.registerQuery,data:{query:r},headers:{Authorization:`Bearer ${e?.accessToken}`}});return await z({method:"POST",url:e.baseURL+e.runQuery,data:{queryid:n.data.queryid,filter:{}},headers:{Authorization:`Bearer ${e?.accessToken}`}})}catch(n){throw n}}function oe({field:e,formik:r,methods:n={},sqlOpsUrls:i,refid:o,optionsOverride:x,setFieldOptions:N}){const[l,h]=O.useState(!1),[v,d]=O.useState(x??e.options??{}),[j,w]=O.useState(""),[P,F]=O.useState(0),b=O.useRef(null),f=O.useRef(null),[T,g]=O.useState(!1),C=O.useRef(j);O.useEffect(()=>{C.current=j},[j]);const $=E=>{E.currentTarget.open||w("")};O.useEffect(()=>{x&&d(x)},[x]),O.useEffect(()=>{const E=u=>{f.current&&!f.current.contains(u.target)&&(f.current.open=!1,w(""))};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]);const s=e.name;O.useEffect(()=>{let E=!0;return(async()=>{if(e?.options){d(e.options);return}const c=e?.source??{};if(c.type==="method"){const S=c.method,_=S?n[S]:void 0;if(_)try{const a=await Promise.resolve(_());E&&d(a??{})}catch(a){console.error("Method execution failed:",a),E&&d({})}else E&&d({})}if(c.type==="api"&&c.url)try{const S=await z({method:c.method||"GET",url:c.url,data:c.body??{},params:c.params??{},headers:c.headers??{}}),_=e.valueKey||"value",a=e.labelKey||"title",m=le(_,a,S,e.groupKey);E&&d(m)}catch(S){console.error("API execution failed:",S),E&&d({})}if(e.table||e.type==="dataSelector"){if(!i){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let S;if(e.type==="dataSelector")S={table:"do_lists",cols:"title,value",where:{groupid:e.groupid??""}};else{if(!e.table||!e.columns){console.error("Invalid SQL field config",e);return}S={...e,table:e.table,cols:e.columns}}e.where&&e.type!=="dataSelector"&&(S.where=o?W(e.where,{refid:o}):e.where);const _=await ge(i,S),a=e.valueKey||"value",m=e.labelKey||"title",p=le(a,m,_,e.groupKey);E&&d(p)}catch(S){console.error("API fetch failed:",S)}}})(),()=>{E=!1}},[e.options,e.source,e.table,e.columns,e.where,o]);const k=`
    w-full px-4 py-2 rounded-lg border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0
  `,q=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,y=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,R=E=>E.icon?t.jsx("i",{className:E.icon}):null,B=O.useMemo(()=>Oe(v),[v]),Y=B.length,I=O.useMemo(()=>j?B.filter(([,E])=>E.toLowerCase().includes(j.toLowerCase())):B,[j,B]),K=(E,u)=>{if(f.current?.open===!0||T===!0)if(E.key==="ArrowDown")E.preventDefault(),F(c=>c+1<I.length?c+1:0);else if(E.key==="ArrowUp")E.preventDefault(),F(c=>c-1>=0?c-1:I.length-1);else if(E.key==="Enter"){E.preventDefault();const[c]=I[P]||[];c&&r.setFieldValue(e.name,u?c:[...r.values[e.name],c]),f.current&&(f.current.open=!1)}else E.key==="Escape"&&(f.current.open=!1,w(""),g(!1))};O.useEffect(()=>{b.current?.querySelector(`[data-index="${P}"]`)?.scrollIntoView({block:"nearest"})},[P]),O.useEffect(()=>{P>=I.length&&F(0)},[I,P]),O.useEffect(()=>{const E=e.autocomplete,u=e.ajaxchain,c=E||u;if(!c||c==="off")return;const S=r.values[e.name];if(!S)return;(async()=>{try{const a=c.src,m=W(a.where??{},{refid:S});if(a.table&&i){let p={...a,table:a.table,cols:a.columns,where:m};const{data:A}=await ge(i,p);if(E){const V=c.target.split(",").map(U=>U.trim()),L=Array.isArray(A?.data)?A?.data[0]:A?.data;if(!L)return;V.forEach(U=>{L[U]!==void 0&&r.setFieldValue(U,L[U])})}if(u){const V=e.valueKey||"value",L=e.labelKey||"title",U=le(V,L,A,e.groupKey);N?.(u.target,U)}}}catch(a){console.error("Autocomplete fetch failed",a)}})()},[r.values[e.name]]);const ee=async E=>{if(E.length===0){console.error("No file");return}const u=i?.baseURL+i?.uploadURL;if(!u){console.error("No Upload URL please ");return}const c=e.multiple===!0;try{const S=await Promise.all(Array.from(E).map(async _=>{const a=new FormData;return a.append("file",_),(await z({method:"POST",url:u,data:a,headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${i?.accessToken}`}})).data}));r.setFieldValue(s,c?S.map(_=>_.path):S[0]?.path)}catch(S){console.error("File upload failed",S),r.setFieldError(s,"File upload failed")}};switch(e.type){case"autocomplete":{const u=r.values[s]??"",c=T?j:be(v,u)??"",S=a=>{w(a.target.value),g(!0),F(0)},_=a=>{r.setFieldValue(s,a),w(""),g(!1)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{className:`${k} ${q}`,value:c,placeholder:e.placeholder||"Type to search...",onChange:S,onFocus:()=>g(!0),onBlur:()=>setTimeout(()=>g(!1),150),onKeyDown:a=>K(a,!0),disabled:e.disabled}),T&&t.jsx("div",{ref:b,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:I.length>0?I.map(([a,m],p)=>t.jsx("div",{"data-index":p,className:`px-3 py-2 cursor-pointer text-sm
                  ${P===p?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>_(a),children:m},a)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:"No matches"})}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}case"textarea":return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{className:`${k} ${q} min-h-[120px] resize-none`,onFocus:()=>h(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})});case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(e.multiple===!0){const u=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:f,onKeyDown:c=>K(c,!1),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:u?.length>0?u.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:b,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:j,onChange:c=>{w(c.target.value),F(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),I.length>0?I.map(([c,S],_)=>t.jsxs("label",{htmlFor:`${s}-${c}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${u?.includes(c)?"bg-indigo-50 text-indigo-600 font-medium":P===_?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${s}-${c}`,type:"checkbox",checked:u?.includes(c),onChange:a=>{const m=a.target.checked?[...u,c]:u?.filter(p=>p!==c);r.setFieldValue(s,m)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},c)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}return s==="category"&&console.log("formik.values[key]",r.values[s]),t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:f,onKeyDown:u=>K(u,!0),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[s]?be(v,r.values[s])??"Select option":`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:b,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:j,onChange:u=>{w(u.target.value),F(0)},onKeyDown:u=>K(u,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),I.length>0?I.map(([u,c],S)=>t.jsx("div",{"data-index":S,onClick:_=>{_.preventDefault(),_.stopPropagation(),r.setFieldValue(s,u),f.current?.removeAttribute("open"),w(""),F(0)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[s]===u?"bg-indigo-50 text-indigo-600 font-medium":P===S?"bg-gray-100":"hover:bg-gray-50"}`,children:c},u)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}case"select":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:`${k} ${q} appearance-none cursor-pointer pr-12`,onFocus:()=>h(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:r.handleChange,disabled:e.disabled,children:[t.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Please select an option"}),!xe(v)&&Object.entries(v).map(([u,c])=>t.jsx("option",{value:u,className:"py-2",children:c},u)),xe(v)&&Object.entries(v).map(([u,c])=>t.jsx("optgroup",{label:u,children:Object.entries(c).map(([S,_])=>t.jsx("option",{value:S,children:_},S))},u))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"radioList":case"radio":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`flex ${Y>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(v||{}).map(([u,c])=>t.jsxs("label",{htmlFor:`${s}-${u}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${s}-${u}`,type:"radio",name:s,checked:r.values[s]===u,value:u,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),c]},u))}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]});case"checkbox":{const u=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(v||{}).map(([c,S])=>t.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:u.includes(c),onChange:_=>{const a=_.target.checked?[...u,c]:u.filter(m=>m!==c);r.setFieldValue(s,a)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},c))}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}case"tags":{const u=r.values[s],c=j.trim(),S=Array.isArray(v)?v:Object.entries(v||{}).map(([p,A])=>({value:p,label:A})),_=p=>{p&&!u.includes(p)&&(r.setFieldValue(s,[...u,p]),w(""))},a=p=>{r.setFieldValue(s,u.filter(A=>A!==p))},m=p=>S.find(A=>A.value===p)?.label??p;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:`${k} flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center`,onClick:()=>!e.disabled&&document.getElementById(`${s}-input`)?.focus(),children:[u.map(p=>t.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[t.jsx("span",{className:"text-indigo-700",children:m(p)}),t.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),e.disabled||a(p)},onMouseDown:A=>A.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"Ã—"})]},p)),t.jsx("input",{id:`${s}-input`,type:"text",value:j,onChange:p=>w(p.target.value),onKeyDown:p=>{(p.key==="Enter"||p.key===",")&&(p.preventDefault(),_(c))},placeholder:u.length===0?e.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:e.disabled})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}case"attachment":case"photo":case"avatar":case"file":const E=e.multiple===!0;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:e.type,className:`${k} ${q} ${e.icon?"pl-9":""} `,onFocus:()=>h(!0),name:s,multiple:E,onChange:u=>{const c=u.currentTarget.files;c&&ee(c)},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"json":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:`${s}-json`,name:s,value:r.values[s],onChange:u=>r.setFieldValue(s,u.target.value),onBlur:r.handleBlur,placeholder:e.placeholder||"Enter valid JSON",disabled:e.disabled,className:`${k} ${q} min-h-[200px] font-mono text-sm resize-y`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"date":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:"date",name:s,value:r.values[s],onChange:r.handleChange,onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled,className:`${k} ${q} ${e.icon?"pl-9":""}`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});default:return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:y,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:e.type||"text",className:`${k} ${q} ${e.icon?"pl-9":""} `,onFocus:()=>h(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}}function Pe({title:e,children:r,isFirst:n}){const[i,o]=O.useState(n);return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[t.jsxs("button",{onClick:()=>o(!i),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${i?"bg-action":"bg-gray-300"}`}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]}),t.jsxs("div",{className:`relative transition-all duration-300 ${i?"rotate-180":""}`,children:[t.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${i?"bg-action opacity-30":"bg-transparent opacity-0"}`}),t.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${i?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Fe({title:e,groupedFields:r,data:n,onSubmit:i=v=>{},onCancel:o=()=>{},methods:x={},components:N={},sqlOpsUrls:l={},refid:h}){const[v,d]=O.useState({}),j=(b,f)=>{d(T=>({...T,[b]:f}))},{initialValues:w,validationSchema:P}=O.useMemo(()=>{const b={},f={};return Object.values(r).flat().forEach(T=>{Z([T],b,f,n)}),{initialValues:b,validationSchema:f}},[r,n]),F=te.useFormik({initialValues:w,enableReinitialize:!0,validationSchema:M.object().shape(P),onSubmit:b=>{i(b)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:F.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([b,f],T)=>t.jsx(Pe,{title:b,isFirst:T===0,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:f.map((g,C)=>ne(g.hidden)||g.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${ae[se(Number(g.width))]||"lg:col-span-4"}`,children:t.jsx(oe,{refid:h,sqlOpsUrls:l,components:N,field:g,formik:F,methods:x,setFieldOptions:j,...v[g.name]?{optionsOverride:v[g.name]}:{}},g.name)},g?.name??`field-${C}`))})},b))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function Ce({title:e,groupedFields:r,data:n,onSubmit:i=d=>{},onCancel:o=()=>{},methods:x={},components:N={},sqlOpsUrls:l={},widget:h,refid:v}){const d=Object.keys(r),[j,w]=O.useState(0),[P,F]=O.useState({});console.log("groupNames",d);const b=(y,R)=>{F(B=>({...B,[y]:R}))},{initialValues:f,validationSchema:T,stepperSchemas:g}=O.useMemo(()=>{const y={},R={},B={};return h?Object.entries(r).forEach(([Y,I])=>{const K={};Z(I,y,K,n),B[Y]=K}):Object.entries(r).forEach(([Y,I])=>{Z(I,y,R,n)}),{initialValues:y,validationSchema:R,stepperSchemas:B}},[r,n,h]),C=d[j]??null,$=h&&C?g[C]??{}:T,s=te.useFormik({initialValues:f,enableReinitialize:!0,validationSchema:M.object().shape($),onSubmit:y=>{h?(j<d.length-1&&w(R=>R+1),j===d.length-1&&i(y)):i(y)}}),k=async y=>{if(y.preventDefault(),!h){const R=await s.validateForm();if(Object.keys(R).length>0){alert("Please fill all required fields before submitting."),s.setTouched(Object.keys(R).reduce((B,Y)=>({...B,[Y]:!0}),{}));return}}s.handleSubmit(y)},q=()=>{w(y=>y>0?y-1:y)};return t.jsxs("div",{className:" max-w-full  m-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:t.jsx("nav",{className:"relative flex",children:d.map((y,R)=>t.jsx("button",{type:"button",onClick:()=>w(R),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${j===R?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:y})},y))})})}),t.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[t.jsxs("form",{onSubmit:k,className:"w-full mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:C&&r[C]?.map((y,R)=>ne(y.hidden)||y.type==="geolocation"?null:t.jsx("div",{className:`col-span-12  ${ae[se(Number(y.width))]||"lg:col-span-4"}`,children:t.jsx(oe,{refid:v,sqlOpsUrls:l,field:y,formik:s,methods:x,components:N,setFieldOptions:b,...P[y.name]?{optionsOverride:P[y.name]}:{}},y.name)},y?.name??`field-${R}`))}),t.jsxs("div",{className:`mt-8 flex ${j>0?"justify-between":"justify-end"} space-x-3`,children:[j>0&&t.jsx("button",{onClick:q,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:o,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:h?"Next":"Save"})]})]})]}),t.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{children:["Tab ",j+1," of ",d.length]}),t.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),t.jsx("div",{className:"flex gap-1",children:d.map((y,R)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${R===j?"bg-action w-6":"bg-gray-300"}`},R))})]})})]},d[j])]})}function _e({title:e,fields:r,data:n,onSubmit:i=h=>{},onCancel:o=()=>{},methods:x={},sqlOpsUrls:N={},refid:l}){const h=Ae(r),[v,d]=O.useState({}),j=(b,f)=>{d(T=>({...T,[b]:f}))},{initialValues:w,validationSchema:P}=O.useMemo(()=>{const b={},f={};return h.forEach(T=>{Z([T],b,f,n)}),{initialValues:b,validationSchema:f}},[h,n]),F=te.useFormik({initialValues:w,enableReinitialize:!0,validationSchema:M.object().shape(P),onSubmit:b=>{i(b)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:F.handleSubmit,className:"p-4  mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:h.map((b,f)=>ne(b.hidden)||b.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${ae[se(Number(b.width))]||"lg:col-span-4"}`,children:t.jsx(oe,{refid:l,sqlOpsUrls:N,field:b,formik:F,methods:x,setFieldOptions:j,...v[b.name]?{optionsOverride:v[b.name]}:{}})},b?.name??`field-${f}`))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function Re({title:e,children:r}){return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[t.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]})}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function ke({title:e,groupedFields:r,data:n,onSubmit:i=v=>{},onCancel:o=()=>{},methods:x={},components:N={},sqlOpsUrls:l={},refid:h}){const[v,d]=O.useState({}),j=(b,f)=>{d(T=>({...T,[b]:f}))},{initialValues:w,validationSchema:P}=O.useMemo(()=>{const b={},f={};return Object.values(r).flat().forEach(T=>{Z([T],b,f,n)}),{initialValues:b,validationSchema:f}},[r,n]),F=te.useFormik({initialValues:w,enableReinitialize:!0,validationSchema:M.object().shape(P),onSubmit:b=>{i(b)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:F.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([b,f],T)=>t.jsx(Re,{title:b,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:f.map((g,C)=>ne(g.hidden)||g.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${ae[se(Number(g.width))]||"lg:col-span-4"}`,children:t.jsx(oe,{refid:h,sqlOpsUrls:l,components:N,field:g,formik:F,methods:x,setFieldOptions:j,...v[g.name]?{optionsOverride:v[g.name]}:{}},g.name)},g?.name??`field-${C}`))})},b))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const J=e=>({Authorization:`Bearer ${e.accessToken}`}),ie=async e=>(await z.get(e.baseURL+e.dbopsGetHash,{headers:J(e)})).data.refhash,ce=async(e,r)=>(await z.post(e.baseURL+e.dbopsGetRefId,r,{headers:J(e)})).data.refid,Ie={async fetch(e,r){const n=await ie(e),i=await ce(e,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:n}),o=await z.post(e.baseURL+e.dbopsFetch,{refid:i,datahash:n},{headers:J(e)});return o.data?.data??o.data},async create(e,r){const n=await ie(e),i=await ce(e,{operation:"create",source:r.source,fields:r.values,datahash:n});return(await z.post(e.baseURL+e.dbopsCreate,{refid:i,fields:r.values,datahash:n},{headers:J(e)})).data},async update(e,r){const n=await ie(e),i=await ce(e,{operation:"update",source:r.source,fields:r.values,datahash:n});return(await z.post(e.baseURL+e.dbopsUpdate,{refid:i,fields:r.values,datahash:n},{headers:J(e)})).data}};function Me({formJson:e={title:"",fields:{},source:{}},methods:r={},userid:n=null,onCancel:i=()=>{},components:o={},callback:x=()=>{},initialvalues:N={}}){let l=we(e);const h=e.endPoints,v=e?.source?.refid,d=Se(e?.fields??{}),[j,w]=O.useState(N),P=O.useMemo(()=>$e(e.fields),[e.fields]);O.useEffect(()=>{let f=!0;return(async()=>{const g=e?.source??{};if(!g?.type){f&&w({});return}if(g.type==="method"){const C=g.method,$=C?r[C]:void 0;if($)try{const s=await Promise.resolve($());f&&w(s??{})}catch(s){console.error("Method execution failed:",s),f&&w({})}else f&&w({})}if(g.type==="api"&&h?.operation!=="create")try{const C=await z({method:g.method||"GET",url:g.url??"",data:g.body??{},params:g.params??{},headers:g.headers??{}});f&&w(C.data??{})}catch(C){console.error("API fetch failed:",C),f&&w({})}if(g.type==="sql"&&g.refid&&g.refid!="0"&&h?.operation!=="create"){if(!h){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const C=await Ie.fetch(h,{source:{...g,table:g.table,columns:g.columns,where:W(g.where,{refid:v})},fields:Ee(e.fields)});f&&w(C)}catch(C){console.error("API fetch failed:",C)}}})(),()=>{f=!1}},[n,e?.source?.type||"",e?.source?.method||"",e?.source?.url||"",JSON.stringify(e?.source?.params??{}),JSON.stringify(e?.source?.body??{}),JSON.stringify(e?.source?.headers??{})]);const F=async f=>{const T=e?.source??{};let g=null;if(P.length>0)try{g=await Te()}catch($){console.log("catch fetchGeolocation",$),g=null}const C={...f,...Object.fromEntries(P.map($=>[$,g]))};if(T.type==="method"){const $=T.method,s=$?r[$]:void 0;if(s)try{const k=await Promise.resolve(s(C));x?.(k)}catch(k){x?.(k),console.error("Method execution failed:",k)}}if(T.type==="api"){if(!h){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const $=await z({method:T.method||"POST",url:h.baseURL+T.endpoint,data:C??{},headers:{Authorization:`Bearer ${h?.accessToken}`}});x?.($)}catch($){x?.($),console.error("API fetch failed:",$)}}if(T.type==="sql"){const $=e.endPoints;if(!$){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const s=await z({method:"GET",url:$.baseURL+$.dbopsGetHash,headers:{Authorization:`Bearer ${$?.accessToken}`}});let k={...T};T.where&&(k={...T,where:W(T.where,{refid:v})});const q=await z({method:"POST",url:$.baseURL+$.dbopsGetRefId,data:{operation:$.operation,source:k,fields:e.fields,forcefill:e.forcefill,datahash:s.data.refhash},headers:{Authorization:`Bearer ${$?.accessToken}`}}),y=await z({method:"POST",url:$.baseURL+$[$.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:q.data.refid,fields:C,datahash:s.data.refhash},headers:{Authorization:`Bearer ${$?.accessToken}`}});x?.(y)}catch(s){x?.(s),console.error("API fetch failed:",s)}}},b={accordion:t.jsx(Fe,{title:e?.title??"",groupedFields:d,data:j,onSubmit:F,onCancel:i,methods:r,components:o,sqlOpsUrls:h,refid:v}),cards:t.jsx(ke,{title:e?.title??"",groupedFields:d,data:j,onSubmit:F,onCancel:i,methods:r,components:o,sqlOpsUrls:h,refid:v}),tab:t.jsx(Ce,{title:e?.title??"",groupedFields:d,data:j,onSubmit:F,onCancel:i,methods:r,components:o,widget:e?.widget,sqlOpsUrls:h,refid:v}),simple:t.jsx(_e,{title:e?.title??"",fields:e.fields,data:j,onSubmit:F,onCancel:i,methods:r,components:o,sqlOpsUrls:h,refid:v})};return t.jsx("div",{className:"relative",children:b[l]??b.simple})}G.LogiksForm=Me,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
