(function(mh,_o){typeof exports=="object"&&typeof module<"u"?_o(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],_o):(mh=typeof globalThis<"u"?globalThis:mh||self,_o(mh.LogiksForm={},mh.React,mh.axios,mh.Yup,mh.formik))})(this,function(mh,_o,Ri,NQ,QN){"use strict";function MQ(V){const ue=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(V){for(const ut in V)if(ut!=="default"){const ot=Object.getOwnPropertyDescriptor(V,ut);Object.defineProperty(ue,ut,ot.get?ot:{enumerable:!0,get:()=>V[ut]})}}return ue.default=V,Object.freeze(ue)}const Ni=MQ(NQ);var JN={exports:{}},Rk={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NY;function PQ(){if(NY)return Rk;NY=1;var V=Symbol.for("react.transitional.element"),ue=Symbol.for("react.fragment");function ut(ot,Nt,ft){var nn=null;if(ft!==void 0&&(nn=""+ft),Nt.key!==void 0&&(nn=""+Nt.key),"key"in Nt){ft={};for(var De in Nt)De!=="key"&&(ft[De]=Nt[De])}else ft=Nt;return Nt=ft.ref,{$$typeof:V,type:ot,key:nn,ref:Nt!==void 0?Nt:null,props:ft}}return Rk.Fragment=ue,Rk.jsx=ut,Rk.jsxs=ut,Rk}var Nk={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MY;function BQ(){return MY||(MY=1,process.env.NODE_ENV!=="production"&&function(){function V(he){if(he==null)return null;if(typeof he=="function")return he.$$typeof===jt?null:he.displayName||he.name||null;if(typeof he=="string")return he;switch(he){case un:return"Fragment";case In:return"Profiler";case Xe:return"StrictMode";case On:return"Suspense";case Ot:return"SuspenseList";case Gn:return"Activity"}if(typeof he=="object")switch(typeof he.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),he.$$typeof){case pn:return"Portal";case U:return(he.displayName||"Context")+".Provider";case lt:return(he._context.displayName||"Context")+".Consumer";case Ye:var de=he.render;return he=he.displayName,he||(he=de.displayName||de.name||"",he=he!==""?"ForwardRef("+he+")":"ForwardRef"),he;case oe:return de=he.displayName||null,de!==null?de:V(he.type)||"Memo";case Yt:de=he._payload,he=he._init;try{return V(he(de))}catch{}}return null}function ue(he){return""+he}function ut(he){try{ue(he);var de=!1}catch{de=!0}if(de){de=console;var bt=de.error,cn=typeof Symbol=="function"&&Symbol.toStringTag&&he[Symbol.toStringTag]||he.constructor.name||"Object";return bt.call(de,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",cn),ue(he)}}function ot(he){if(he===un)return"<>";if(typeof he=="object"&&he!==null&&he.$$typeof===Yt)return"<...>";try{var de=V(he);return de?"<"+de+">":"<...>"}catch{return"<...>"}}function Nt(){var he=X.A;return he===null?null:he.getOwner()}function ft(){return Error("react-stack-top-frame")}function nn(he){if(se.call(he,"key")){var de=Object.getOwnPropertyDescriptor(he,"key").get;if(de&&de.isReactWarning)return!1}return he.key!==void 0}function De(he,de){function bt(){St||(St=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",de))}bt.isReactWarning=!0,Object.defineProperty(he,"key",{get:bt,configurable:!0})}function et(){var he=V(this.type);return A[he]||(A[he]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),he=this.props.ref,he!==void 0?he:null}function Tt(he,de,bt,cn,fn,Fn,ye,He){return bt=Fn.ref,he={$$typeof:Cn,type:he,key:de,props:Fn,_owner:fn},(bt!==void 0?bt:null)!==null?Object.defineProperty(he,"ref",{enumerable:!1,get:et}):Object.defineProperty(he,"ref",{enumerable:!1,value:null}),he._store={},Object.defineProperty(he._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(he,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(he,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ye}),Object.defineProperty(he,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:He}),Object.freeze&&(Object.freeze(he.props),Object.freeze(he)),he}function $n(he,de,bt,cn,fn,Fn,ye,He){var P=de.children;if(P!==void 0)if(cn)if(os(P)){for(cn=0;cn<P.length;cn++)Mt(P[cn]);Object.freeze&&Object.freeze(P)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Mt(P);if(se.call(de,"key")){P=V(he);var ro=Object.keys(de).filter(function(oo){return oo!=="key"});cn=0<ro.length?"{key: someKey, "+ro.join(": ..., ")+": ...}":"{key: someKey}",Wo[P+cn]||(ro=0<ro.length?"{"+ro.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,cn,P,ro,P),Wo[P+cn]=!0)}if(P=null,bt!==void 0&&(ut(bt),P=""+bt),nn(de)&&(ut(de.key),P=""+de.key),"key"in de){bt={};for(var Ln in de)Ln!=="key"&&(bt[Ln]=de[Ln])}else bt=de;return P&&De(bt,typeof he=="function"?he.displayName||he.name||"Unknown":he),Tt(he,P,Fn,fn,Nt(),bt,ye,He)}function Mt(he){typeof he=="object"&&he!==null&&he.$$typeof===Cn&&he._store&&(he._store.validated=1)}var vn=_o,Cn=Symbol.for("react.transitional.element"),pn=Symbol.for("react.portal"),un=Symbol.for("react.fragment"),Xe=Symbol.for("react.strict_mode"),In=Symbol.for("react.profiler"),lt=Symbol.for("react.consumer"),U=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),On=Symbol.for("react.suspense"),Ot=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),Yt=Symbol.for("react.lazy"),Gn=Symbol.for("react.activity"),jt=Symbol.for("react.client.reference"),X=vn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=Object.prototype.hasOwnProperty,os=Array.isArray,an=console.createTask?console.createTask:function(){return null};vn={"react-stack-bottom-frame":function(he){return he()}};var St,A={},Mo=vn["react-stack-bottom-frame"].bind(vn,ft)(),st=an(ot(ft)),Wo={};Nk.Fragment=un,Nk.jsx=function(he,de,bt,cn,fn){var Fn=1e4>X.recentlyCreatedOwnerStacks++;return $n(he,de,bt,!1,cn,fn,Fn?Error("react-stack-top-frame"):Mo,Fn?an(ot(he)):st)},Nk.jsxs=function(he,de,bt,cn,fn){var Fn=1e4>X.recentlyCreatedOwnerStacks++;return $n(he,de,bt,!0,cn,fn,Fn?Error("react-stack-top-frame"):Mo,Fn?an(ot(he)):st)}}()),Nk}var PY;function $Q(){return PY||(PY=1,process.env.NODE_ENV==="production"?JN.exports=PQ():JN.exports=BQ()),JN.exports}var ie=$Q();const IQ=["jpg","jpeg","png","gif","svg","webp"],FQ=["mp4","webm","ogg"],LQ=["txt","json","csv"],HQ=["pdf"];function zQ(V){return V.template==="accordion"?"accordion":V.template==="simple"?"simple":V.template==="cards"?"cards":Object.values(V.fields||{}).some(ot=>ot.group)?"tab":"simple"}function VQ(V,ue="create",ut="Info"){const ot={};let Nt=!1;if(Object.values(V).forEach(nn=>{nn.group&&(Nt=!0)}),!Nt)return{};const ft=[];return Object.entries(V).forEach(([nn,De])=>{if(De.vmode==="edit"&&ue==="create")return;const et={...De,name:nn};if(De.group){const Tt=De.group;ot[Tt]||(ot[Tt]=[]),ot[Tt].push(et)}else ft.push(et)}),ft.length>0?{[ut]:ft,...ot}:ot}function BY(V,ue="create"){const ut={};return Object.keys(V).forEach(ot=>{V[ot].vmode==="edit"&&ue==="create"||(ut[ot]={label:ot,required:V[ot].required??!1})}),ut}const Mk=(V,ue,ut,ot,Nt,ft)=>{const nn=ft==="create"&&Nt?LY(Nt):{};V.forEach(De=>{const et=De?.name;if(!et)return;let Tt=ot?.[et];const $n=ft==="create"&&Nt?FY(De):null;ft==="create"&&$n&&nn[$n]!==void 0&&Tt==null&&(Tt=nn[$n]),Tt==null&&(Tt=De.default),De.multiple===!0||De.type==="checkbox"||De.type==="tags"?ue[et]=Array.isArray(Tt)?Tt:typeof Tt=="string"?Tt.split(",").map(vn=>vn.trim()).filter(Boolean):[]:De.type==="json"?ue[et]=typeof Tt=="object"&&Tt!==null?JSON.stringify(Tt,null,2):Tt??"":De.type==="date"?ue[et]=typeof Tt=="string"?Tt.slice(0,10):"":De.type==="time"?typeof Tt=="string"?Tt.includes("T")?ue[et]=Tt.slice(11,16):ue[et]=Tt.slice(0,5):ue[et]="":et==="blocked"||et==="blacklist"?ue[et]=String(Tt??"false"):ue[et]=Tt??"";let Mt;De.type==="file"?Mt=De.multiple?Ni.array().of(Ni.mixed()):Ni.mixed():De.multiple===!0||De.type==="checkbox"||De.type==="tags"?Mt=Ni.array().of(Ni.string()):De.type==="email"?Mt=Ni.string().email("Invalid email"):De.type==="number"?Mt=Ni.number().typeError("Must be a number"):De.type==="json"?Mt=Ni.string().test("json","Invalid JSON",vn=>{if(!vn)return!0;try{return JSON.parse(vn),!0}catch{return!1}}):Mt=Ni.string(),De.required&&(Mt=Mt.required(De.error_message||`${De.label||et} is required`)),De?.validate?.regex&&typeof De.validate.regex=="string"&&(Mt=Mt.matches(new RegExp(De?.validate?.regex),De?.error_message||"Invalid input format")),De?.validate&&Object.entries(De.validate).forEach(([vn,Cn])=>{switch(vn){case"email":Cn&&(Mt=Mt.email("Invalid email format"));break;case"mobile":Mt=Mt.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":Mt=Mt.matches(new RegExp(Cn),`Must match pattern: ${Cn}`);break;case"date":Mt=Ni.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((pn,un)=>{if(typeof un=="string"){const Xe=un.replace(/-/g,"/"),[In,lt,U]=Xe.split("/");if(In&&lt&&U)return new Date(`${U}-${lt}-${In}`)}return pn});break;case"time":Mt=Mt.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":Mt=Mt.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":Mt=Ni.number().typeError("Must be numeric");break;case"float":case"decimal":Mt=Ni.number().typeError("Must be a decimal").transform((pn,un)=>{if(un==null||un==="")return;const Xe=Number(un);if(isNaN(Xe))return pn;if(typeof pn=="number"&&!isNaN(pn)){const In=Number(pn);return Number.isInteger(In)?Number(Xe.toFixed(In)):Xe}return Xe});break;case"alphanumeric":Mt=Mt.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":Mt=Mt.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":Mt=Mt.transform(pn=>pn&&pn.toUpperCase());break;case"lower":Mt=Mt.transform(pn=>pn&&pn.toLowerCase());break;case"length-min":{const pn=Number(Cn);isNaN(pn)||(Mt=Mt.min(pn,`Minimum length is ${pn}`));break}case"length-max":{const pn=Number(Cn);isNaN(pn)||(Mt=Mt.max(pn,`Maximum length is ${pn}`));break}}}),ut[et]=Mt})},Pk={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function Bk(V){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(V)?V:6}const e5=V=>V===!0||V==="true",Fp=(V,ue)=>typeof V=="string"?V.replace(/#(\w+)#/g,(ut,ot)=>ue[ot]!==void 0?String(ue[ot]):ut):Array.isArray(V)?V.map(ut=>Fp(ut,ue)):V&&typeof V=="object"?Object.fromEntries(Object.entries(V).map(([ut,ot])=>[Fp(ut,ue),Fp(ot,ue)])):V,RS=(V,ue,ut,ot)=>{if(!Array.isArray(ut)||ut.length===0)return{};const Nt=ot??(ut[0]&&typeof ut[0]=="object"&&"category"in ut[0]?"category":void 0);if(!Nt){const nn={};return ut.forEach(De=>{const et=De[V],Tt=De[ue];et!=null&&Tt!=null&&(nn[String(et)]=String(Tt))}),nn}const ft={};return ut.forEach(nn=>{const De=nn[Nt]??"Others",et=nn[V],Tt=nn[ue];et==null||Tt==null||(ft[De]||(ft[De]={}),ft[De][String(et)]=String(Tt))}),ft},g7=(V,ue)=>{if(!V||ue==null)return;const ut=String(ue);if(typeof Object.values(V)[0]=="string")return V[ut];for(const Nt of Object.values(V))if(ut in Nt)return Nt[ut]},UQ=V=>{if(!V)return[];if(Array.isArray(V))return V.map(ot=>[String(ot.value),String(ot.title??ot.label??ot.value)]);const ue=Object.values(V);return ue.length?typeof ue[0]=="string"?Object.entries(V).map(([ot,Nt])=>[String(ot),Nt]):Object.values(V).flatMap(ot=>Object.entries(ot).map(([Nt,ft])=>[String(Nt),ft])):[]},$Y=V=>{if(!V||typeof V!="object")return!1;const ue=Object.values(V)[0];return typeof ue=="object"&&ue!==null&&!Array.isArray(ue)};async function jQ(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const V=await new Promise((ot,Nt)=>{navigator.geolocation.getCurrentPosition(ot,Nt,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:ue,longitude:ut}=V.coords;return`${ue},${ut}`}catch(V){if(!(V instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(V.code){case V.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case V.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case V.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const WQ=V=>Object.entries(V??{}).filter(([,ue])=>ue.type==="geolocation").map(([ue])=>ue);function ZQ(V,ue="create"){return Object.entries(V).filter(([,ut])=>!(ut.vmode==="edit"&&ue==="create")).map(([ut,ot])=>({...ot,name:ut}))}function $k(V,ue,ut){const ot=FY(ue);ot&&ut&&YQ(ut,ot,V)}function GQ(V){return typeof V=="object"&&V!==null&&typeof V.target=="string"&&typeof V.src=="object"&&V.src!==null&&typeof V.src.table=="string"}function qQ(V){return V.split(",").map(ue=>ue.trim()).map(ue=>{const ut=ue.match(/^(.+?)\s+as\s+.+$/i);return ut?ut[1]?.trim():ue}).filter(ue=>!!ue)}const NS=V=>{if(V==null||typeof V!="object")return{value:V,title:V};const ue={};for(const[ut,ot]of Object.entries(V)){const Nt=ut.includes(".")?ut.split(".").pop():ut;if(Nt in ue){console.warn(`Duplicate key after normalization: ${Nt}`);continue}ue[Nt]=ot}return ue},KQ="__form_persist__",IY=V=>`${KQ}:${V}`;function FY(V){return V.persistent?V.persistent===!0?V.name:typeof V.persistent=="string"?V.persistent:null:null}function LY(V){try{return JSON.parse(localStorage.getItem(IY(V))||"{}")}catch{return{}}}function YQ(V,ue,ut){const ot=LY(V);localStorage.setItem(IY(V),JSON.stringify({...ot,[ue]:ut}))}function XQ(V=""){return V.split(".").pop()?.toLowerCase()??""}function QQ(V){return IQ.includes(V)?"image":FQ.includes(V)?"video":HQ.includes(V)?"pdf":LQ.includes(V)?"text":"other"}const HY={image:"fa fa-file-image",pdf:"fa fa-file-pdf",video:"fa fa-file-video",text:"fa fa-file-lines",other:"fa fa-file"},Ik=V=>({Authorization:`Bearer ${V.accessToken}`}),h7=async V=>(await Ri.get(V.baseURL+V.dbopsGetHash,{headers:Ik(V)})).data.refhash,p7=async(V,ue)=>(await Ri.post(V.baseURL+V.dbopsGetRefId,ue,{headers:Ik(V)})).data.refid,JQ={async fetch(V,ue,ut,ot){const Nt=await h7(V);let ft=!1,nn;ut&&(ft=!0,nn=ut),ft||(nn=await p7(V,{operation:"fetch",source:ue.source,fields:ue.fields??{},datahash:Nt,srcid:ot}));const De=await Ri.post(V.baseURL+V.dbopsFetch,{refid:nn,datahash:Nt},{headers:Ik(V)});return De.data?.data??De.data},async create(V,ue,ut){const ot=await h7(V),Nt=await p7(V,{operation:"create",source:ue.source,fields:ue.values,datahash:ot,srcid:ut});return(await Ri.post(V.baseURL+V.dbopsCreate,{refid:Nt,fields:ue.values,datahash:ot},{headers:Ik(V)})).data},async update(V,ue,ut){const ot=await h7(V),Nt=await p7(V,{operation:"update",source:ue.source,fields:ue.values,datahash:ot,srcid:ut});return(await Ri.post(V.baseURL+V.dbopsUpdate,{refid:Nt,fields:ue.values,datahash:ot},{headers:Ik(V)})).data}};async function t5(V,ue,ut,ot=void 0,Nt=void 0,ft={}){try{let nn=ut;return nn||(nn=(await Ri({method:"POST",url:V.baseURL+V.registerQuery,data:{query:ue??{},srcid:Nt},headers:{Authorization:`Bearer ${V?.accessToken}`}})).data.queryid),await Ri({method:"POST",url:V.baseURL+V.runQuery,data:{queryid:nn,filter:ft,refid:ot,page:0,limit:1e4},headers:{Authorization:`Bearer ${V?.accessToken}`}})}catch(nn){throw nn}}async function zY(V,ue){let ut=ue.previewPath??"/api/files/preview";const ot=await Ri.get(`${ue.baseURL}${ut}?uri=${encodeURIComponent(V)}`,{responseType:"blob",headers:{Authorization:`Bearer ${ue?.accessToken}`}});return URL.createObjectURL(ot.data)}async function VY(V,ue){if(!V?.uploadURL)throw new Error("Upload URL missing");const ut=V.baseURL+V.uploadURL;return Promise.all(Array.from(ue).map(async ot=>{const Nt=new FormData;return Nt.append("file",ot),(await Ri.post(ut,Nt,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${V.accessToken}`}})).data}))}function eJ({field:V,formik:ue,methods:ut={},sqlOpsUrls:ot,refid:Nt,module_refid:ft="menuManager.main",optionsOverride:nn,setFieldOptions:De}){const[et,Tt]=_o.useState(!1),[$n,Mt]=_o.useState(nn??V.options??{});_o.useRef(null);const vn=_o.useRef(null),[Cn,pn]=_o.useState(""),[un,Xe]=_o.useState(0),In=_o.useRef(null),lt=_o.useRef(null),[U,Ye]=_o.useState(!1),On=_o.useRef(Cn),Ot=V.disabled===!0;_o.useEffect(()=>{On.current=Cn},[Cn]);const oe=de=>{if(Ot){de.preventDefault(),lt.current?.removeAttribute("open");return}de.currentTarget.open||pn("")};_o.useEffect(()=>{nn&&Object.keys(nn).length!==0&&Mt(nn)},[nn]),_o.useEffect(()=>{const de=bt=>{lt.current&&!lt.current.contains(bt.target)&&(lt.current.open=!1,pn(""))};return document.addEventListener("mousedown",de),()=>{document.removeEventListener("mousedown",de)}},[]);const Yt=V.name;_o.useEffect(()=>{let de=!0;return(async()=>{let cn=V.valueKey??"value",fn=V.labelKey??"title";if(V?.options){if(typeof V.options=="object"&&!Array.isArray(V.options)){const ro=Object.values(V.options);if(ro.length&&typeof ro[0]=="string"){Mt(V.options);return}}const He=(Array.isArray(V.options)?V.options:[V.options]).map(NS),P=RS(cn,fn,He,V.groupKey);Mt(P);return}const Fn=V?.source??{};if(V.type==="dataMethod"){const ye=V.method,He=ye?ut[ye]:void 0;if(He)try{const P=await He(),ro=Array.isArray(P?.data?.data)?P.data.data:Array.isArray(P?.data)?P.data:P;if(typeof ro=="object"&&!Array.isArray(ro)){const ao=Object.values(ro);if(ao.length&&typeof ao[0]=="string"){Mt(ro);return}}const Ln=Array.isArray(ro)?ro.map(NS):[],oo=RS(cn,fn,Ln,V.groupKey);de&&Mt(oo)}catch(P){console.error("Method execution failed:",P),de&&Mt({})}else de&&Mt({})}if(Fn.type==="api"&&Fn.url)try{const ye=await Ri({method:Fn.method||"GET",url:Fn.url,data:Fn.body??{},params:Fn.params??{},headers:Fn.headers??{}}),He=Array.isArray(ye?.data?.data)?ye.data.data:Array.isArray(ye?.data)?ye.data:ye;if(typeof He=="object"&&!Array.isArray(He)){const Ln=Object.values(He);if(Ln.length&&typeof Ln[0]=="string"){Mt(He);return}}const P=Array.isArray(He)?He.map(NS):[],ro=RS(cn,fn,P,V.groupKey);de&&Mt(ro)}catch(ye){console.error("API execution failed:",ye),de&&Mt({})}if(V.table||V.type==="dataSelector"||V.queryid){if(!ot){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let ye;if(V.type==="dataSelector")ye={table:"do_lists",cols:"title,value",where:{groupid:V.groupid??""}};else if(!V.queryid){if(!V.table||!V.columns){console.error("Invalid SQL field config",V);return}ye={table:V.table,cols:V.columns,where:V.where?Nt?Fp(V.where,{refid:Nt}):V.where:void 0}}const He=await t5(ot,ye,V?.queryid,void 0,ft),P=Array.isArray(He?.data?.data)?He.data.data:Array.isArray(He?.data)?He.data:He;if(typeof P=="object"&&!Array.isArray(P)){const oo=Object.values(P);if(oo.length&&typeof oo[0]=="string"){Mt(P);return}}const ro=Array.isArray(P)?P.map(NS):[],Ln=RS(cn,fn,ro,V.groupKey);de&&Mt(Ln)}catch(ye){console.error("API fetch failed:",ye)}}})(),()=>{de=!1}},[V.options,V.source,V.table,V.columns,V.where,Nt,V.queryid,V.groupKey,V.valueKey,V.labelKey]);const Gn=`
  w-full px-4 py-2 rounded-lg border transition-all duration-300
  backdrop-blur-sm text-gray-800 placeholder-gray-400
  focus:outline-none focus:ring-0

  ${Ot?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 hover:border-gray-400 focus:border-indigo-500 focus:shadow-md"}
`,jt=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,X=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,se=_o.useMemo(()=>UQ($n),[$n]),os=se.length,an=_o.useMemo(()=>V.search||!Cn?se:se.filter(([,de])=>de.toLowerCase().includes(Cn.toLowerCase())),[V.search,Cn,se]),St=(de,bt)=>{if(lt.current?.open===!0||U===!0)if(de.key==="ArrowDown")de.preventDefault(),Xe(cn=>cn+1<an.length?cn+1:0);else if(de.key==="ArrowUp")de.preventDefault(),Xe(cn=>cn-1>=0?cn-1:an.length-1);else if(de.key==="Enter"){de.preventDefault();const[cn]=an[un]||[];if(cn){let fn=bt?cn:[...ue.values[V.name],cn];ue.setFieldValue(V.name,fn),$k(fn,V,ft)}lt.current&&(lt.current.open=!1)}else de.key==="Escape"&&(lt.current.open=!1,pn(""),Ye(!1))};_o.useEffect(()=>{In.current?.querySelector(`[data-index="${un}"]`)?.scrollIntoView({block:"nearest"})},[un]),_o.useEffect(()=>{un>=an.length&&Xe(0)},[an,un]),_o.useEffect(()=>{const de=V.autocomplete,bt=V.ajaxchain;if(!de&&!bt)return;const cn=ue.values[V.name];if(!cn)return;const fn=Array.isArray(bt)?bt:bt?[bt]:[];(async()=>{try{if(GQ(de)){const ye=de.src;if(!ye||!ot)return;const He=Fp(ye.where??{},{refid:cn}),P={...ye,table:ye.table,cols:ye.columns,where:He},{data:ro}=await t5(ot,P,V?.queryid,void 0,ft),Ln=Array.isArray(ro?.data)?ro.data[0]:ro?.data;Ln&&de.target.split(",").map(oo=>oo.trim()).forEach(oo=>{Ln[oo]!==void 0&&ue.setFieldValue(oo,Ln[oo])})}for(const ye of fn){const He=ye.src;if(!ye||typeof ye!="object"||!He||typeof He!="object"||!ot)continue;let P;if(!He.queryid){if(!He.table||!He.columns)throw new Error("SQL query requires field.table");const po=Fp(He?.where??{},{refid:cn});P={...He,table:He.table,cols:He.columns,where:po}}const{data:ro}=await t5(ot,P,He?.queryid,cn,ft);let Ln=V.valueKey??"value",oo=V.labelKey??"title";const ao=Array.isArray(ro?.data?.data)?ro.data.data:Array.isArray(ro?.data)?ro.data:ro,dr=Array.isArray(ao)?ao.map(NS):[],Lt=RS(Ln,oo,dr,V.groupKey);De?.(ye.target,Lt)}}catch(ye){console.error("Autocomplete / AjaxChain fetch failed",ye)}})()},[ue.values[V.name]]),_o.useEffect(()=>{if(!V.search||!Cn.trim()||!V.table||!ot)return;const de=qQ(V.columns??""),bt=new AbortController,cn=setTimeout(async()=>{try{let fn;if(!V.queryid){if(!V.table||!V.cols)throw new Error("SQL query requires field.table");const ao=Nt?Fp(V.where??{},{refid:Nt}):V.where;fn={...V,table:V.table,cols:V.columns||V.cols,where:ao}}let Fn={};Array.isArray(de)&&de.forEach(ao=>{Fn[ao]=[Cn,"LIKE"]});let ye=V.valueKey??"value",He=V.labelKey??"title";const{data:P}=await t5(ot,fn,V?.queryid,void 0,ft,Fn),ro=Array.isArray(P?.data?.data)?P.data.data:Array.isArray(P?.data)?P.data:P,Ln=Array.isArray(ro)?ro.map(NS):[],oo=RS(ye,He,Ln,V.groupKey);Mt(oo)}catch(fn){if(Ri.isCancel(fn))return;console.error("Search fetch failed",fn)}},500);return()=>{clearTimeout(cn),bt.abort()}},[Cn,Nt]);const A=async de=>{if(de.length===0){console.error("No file");return}try{const bt=await VY(ot,de),cn=V.multiple?bt.map(fn=>fn.path):bt[0]?.path;ue.setFieldValue(Yt,cn),$k(cn,V,ft)}catch(bt){console.error("File upload failed",bt),ue.setFieldError(Yt,"File upload failed")}},Mo=async(de,bt,cn)=>{const fn=bt[de];if(!fn)return;const Fn=ut?.[fn];if(typeof Fn!="function"){console.error(`Method "${String(fn)}" not found`);return}try{await Promise.resolve(Fn(cn))}catch(ye){console.error(`Method "${String(fn)}" failed`,ye)}},st=de=>{if(Ot)return;const bt=de.target.value;pn(bt),Xe(0),bt.trim()?Ye(!0):(Ye(!1),ue.setFieldValue(Yt,""))},Wo=de=>{ue.setFieldValue(Yt,de),$k(de,V,ft),pn(""),Ye(!1),Mo("onChange",V,`${Yt}-${de}`)};function he(de){const bt=de.currentTarget.files;bt&&A(bt)}return{setHighlightedIndex:Xe,executeFieldMethod:Mo,handleFileUpload:A,handleKeyDown:St,handleToggle:oe,setSearch:pn,setOpen:Ye,setIsFocused:Tt,handleInputChange:st,handleSelect:Wo,handlePersist:$k,handleFileChange:he,optionCount:os,baseInputClasses:Gn,focusClasses:jt,labelClasses:X,search:Cn,highlightedIndex:un,options:$n,isDisabled:Ot,key:Yt,filteredOptions:an,open:U,listRef:In,inputRef:vn,detailsRef:lt,isFocused:et}}const tJ=({fileUrl:V,category:ue})=>V?ue==="image"?ie.jsx("img",{src:V,className:"max-h-[80vh] mx-auto"}):ue==="pdf"||ue==="text"?ie.jsx("iframe",{src:V,className:"w-full h-[80vh]"}):ue==="video"?ie.jsx("video",{controls:!0,className:"w-full max-h-[80vh]",children:ie.jsx("source",{src:V})}):ie.jsxs("div",{className:"text-center p-4",children:[ie.jsx("p",{children:"Preview not available"}),ie.jsx("a",{href:V,download:!0,className:"text-blue-600 underline",children:"Download file"})]}):null;function nJ(V){const ue=HY[V]??HY.other;return ie.jsx("i",{className:`${ue} text-2xl text-gray-600`})}const oJ=({filePath:V,sqlOpsUrls:ue})=>{const[ut,ot]=_o.useState(null),[Nt,ft]=_o.useState(!1),nn=XQ(V),De=QQ(nn);_o.useEffect(()=>{if(!ue||De!=="image"&&!Nt)return;let Tt=!0,$n=null;return zY(V,ue).then(Mt=>{Tt&&($n=Mt,ot(Mt))}),()=>{Tt=!1,$n&&URL.revokeObjectURL($n)}},[De,Nt,V,ue]);let et=V.split("/").pop();return ie.jsxs(ie.Fragment,{children:[De==="image"&&ut?ie.jsx("img",{src:ut,alt:et,title:"Click to preview",onClick:()=>ft(!0),className:"h-16 w-16 object-cover rounded  cursor-pointer hover:opacity-90"}):ie.jsxs("div",{role:"button",tabIndex:0,onClick:()=>ft(!0),onKeyDown:Tt=>Tt.key==="Enter"&&ft(!0),className:"inline-flex cursor-pointer items-center gap-1",title:"Click to preview",children:[nJ(De),ie.jsx("span",{className:"text-sm",children:et})]}),Nt&&ie.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",children:ie.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-5xl w-full",children:[ie.jsx("button",{className:"float-right text-sm",onClick:()=>ft(!1),children:"✕"}),ut?ie.jsx(tJ,{fileUrl:ut,category:De}):ie.jsx("div",{className:"text-center p-8",children:"Loading preview…"})]})})]})};function UY({field:V,isDisabled:ue,handleToggle:ut,detailsRef:ot,handleKeyDown:Nt,valueArray:ft,labelClasses:nn,listRef:De,search:et,filteredOptions:Tt,highlightedIndex:$n,setSearch:Mt,formik:vn,setHighlightedIndex:Cn,executeFieldMethod:pn,handlePersist:un,module_refid:Xe,options:In}){const lt=V.name;return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:nn,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("details",{className:`relative w-full ${ue?" opacity-70":""}`,onToggle:ut,ref:ot,onKeyDown:U=>{ue||Nt(U,!1)},children:[ie.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${ue?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}
  `,children:[ie.jsx("span",{className:"text-sm text-gray-700",children:ft?.length>0?ft.map(U=>g7(In,U)??U).join(", "):`Select ${V.label}`}),ie.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!ue&&ie.jsxs("div",{ref:De,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[V.search&&ie.jsx("div",{className:"sticky top-0 bg-white p-1",children:ie.jsx("input",{type:"text",value:et,onChange:U=>{ue||(Mt(U.target.value),Cn(0))},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),Tt.length>0?Tt.map(([U,Ye],On)=>ie.jsxs("label",{htmlFor:`${lt}-${U}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${ft?.includes(U)?"bg-indigo-50 text-indigo-600 font-medium":$n===On?"bg-gray-100":"hover:bg-gray-50"}`,children:[ie.jsx("input",{id:`${lt}-${U}`,type:"checkbox",checked:ft?.includes(U),onChange:Ot=>{const oe=Ot.target.checked?[...ft,U]:ft?.filter(Yt=>Yt!==U);vn.setFieldValue(lt,oe),un(oe,V,Xe),pn("onChange",V,`${lt}-${U}`)},onBlur:vn.handleBlur,disabled:ue,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),Ye]},U)):ie.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),vn.touched[lt]&&vn.errors[lt]&&ie.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(vn.errors[lt])})]})}function sJ({filePath:V,field_name:ue,sqlOpsUrls:ut}){const[ot,Nt]=_o.useState(null);return _o.useEffect(()=>{if(!open||!ut)return;let ft=!0,nn=null;return zY(V,ut).then(De=>{ft&&(nn=De,Nt(De))}),()=>{ft=!1,nn&&URL.revokeObjectURL(nn)}},[open,V,ut]),ot?ie.jsx("img",{alt:ue,title:ue,src:ot,className:"h-24 w-24 object-cover rounded border border-dashed  cursor-pointer hover:opacity-90"}):null}function jY({formik:V,field:ue,sqlOpsUrls:ut,module_refid:ot}){let Nt=ue?.name;const ft=_o.useRef(null),nn=async De=>{const et=De.currentTarget.files;if(!(!et||et.length===0))try{const Tt=await VY(ut,et),$n=ue.multiple?Tt.map(Mt=>Mt.path):Tt[0]?.path;V.setFieldValue(Nt,$n),$k($n,ue,ot)}catch(Tt){console.error("File upload failed",Tt),V.setFieldError(Nt,"File upload failed")}};return ie.jsxs("div",{children:[ie.jsx("label",{className:"block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700",children:ue.label}),ie.jsx("input",{ref:ft,type:"file",accept:"image/*",className:"hidden",onChange:nn}),ie.jsx("div",{onClick:()=>ft.current?.click(),children:V.values[Nt]?ie.jsx(sJ,{field_name:Nt,filePath:V.values[Nt],sqlOpsUrls:ut}):ie.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:ie.jsx("i",{className:"fa-solid fa-user"})})})]})}var b7={exports:{}},WY;function rJ(){return WY||(WY=1,function(V){(function(){var ue=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},ut=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},ot=function(e,t){var o=Array.prototype.slice.call(e);return o.sort(t)},Nt=function(e,t){return ft(function(o,r){return e.eq(t(o),t(r))})},ft=function(e){return{eq:e}},nn=ft(function(e,t){return e===t}),De=nn,et=function(e){return ft(function(t,o){if(t.length!==o.length)return!1;for(var r=t.length,c=0;c<r;c++)if(!e.eq(t[c],o[c]))return!1;return!0})},Tt=function(e,t){return Nt(et(e),function(o){return ot(o,t)})},$n=function(e){return ft(function(t,o){var r=Object.keys(t),c=Object.keys(o);if(!Tt(De).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(t[b],o[b]))return!1}return!0})},Mt=ft(function(e,t){if(e===t)return!0;var o=ue(e),r=ue(t);return o!==r?!1:ut(o)?e===t:o==="array"?et(Mt).eq(e,t):o==="object"?$n(Mt).eq(e,t):!1});const vn=Object.getPrototypeOf,Cn=(e,t,o)=>o(e,t.prototype)?!0:e.constructor?.name===t.name,pn=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Cn(e,String,(o,r)=>r.isPrototypeOf(o))?"string":t},un=e=>t=>pn(t)===e,Xe=e=>t=>typeof t===e,In=e=>t=>e===t,lt=(e,t)=>Ye(e)&&Cn(e,t,(o,r)=>vn(o)===r),U=un("string"),Ye=un("object"),On=e=>lt(e,Object),Ot=un("array"),oe=In(null),Yt=Xe("boolean"),Gn=In(void 0),jt=e=>e==null,X=e=>!jt(e),se=Xe("function"),os=Xe("number"),an=(e,t)=>{if(Ot(e)){for(let o=0,r=e.length;o<r;++o)if(!t(e[o]))return!1;return!0}return!1},St=()=>{},A=(e,t)=>(...o)=>e(t.apply(null,o)),Mo=(e,t)=>o=>e(t(o)),st=e=>()=>e,Wo=e=>e,he=(e,t)=>e===t;function de(e,...t){return(...o)=>{const r=t.concat(o);return e.apply(null,r)}}const bt=e=>t=>!e(t),cn=e=>()=>{throw new Error(e)},fn=e=>e(),Fn=e=>{e()},ye=st(!1),He=st(!0);class P{tag;value;static singletonNone=new P(!1);constructor(t,o){this.tag=t,this.value=o}static some(t){return new P(!0,t)}static none(){return P.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?P.some(t(this.value)):P.none()}bind(t){return this.tag?t(this.value):P.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:P.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return X(t)?P.some(t):P.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const ro=Array.prototype.slice,Ln=Array.prototype.indexOf,oo=Array.prototype.push,ao=(e,t)=>Ln.call(e,t),dr=(e,t)=>{const o=ao(e,t);return o===-1?P.none():P.some(o)},Lt=(e,t)=>ao(e,t)>-1,po=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return!0}return!1},en=(e,t)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=t(u,c)}return r},xe=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];t(c,o)}},We=(e,t)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];t(r,o)}},rt=(e,t)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(t(f,c)?o:r).push(f)}return{pass:o,fail:r}},ze=(e,t)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];t(u,r)&&o.push(u)}return o},no=(e,t)=>{if(e.length===0)return[];{let o=t(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=t(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},qn=(e,t,o)=>(We(e,(r,c)=>{o=t(o,r,c)}),o),Fo=(e,t,o)=>(xe(e,(r,c)=>{o=t(o,r,c)}),o),el=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(t(u,r))return P.some(u);if(o(u,r))break}return P.none()},Oo=(e,t)=>el(e,t,ye),Jl=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return P.some(o)}return P.none()},jm=(e,t)=>{for(let o=e.length-1;o>=0;o--)if(t(e[o],o))return P.some(o);return P.none()},ha=e=>{const t=[];for(let o=0,r=e.length;o<r;++o){if(!Ot(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);oo.apply(t,e[o])}return t},xo=(e,t)=>ha(en(e,t)),Ka=(e,t)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(t(c,o)!==!0)return!1}return!0},ms=e=>{const t=ro.call(e,0);return t.reverse(),t},$s=(e,t)=>ze(e,o=>!Lt(t,o)),yu=(e,t)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=t(u,r)}return o},kl=(e,t)=>{const o=ro.call(e,0);return o.sort(t),o},qr=(e,t)=>t>=0&&t<e.length?P.some(e[t]):P.none(),Ws=e=>qr(e,0),mr=e=>qr(e,e.length-1),as=se(Array.from)?Array.from:e=>ro.call(e),lc=(e,t)=>{for(let o=0;o<e.length;o++){const r=t(e[o],o);if(r.isSome())return r}return P.none()},Ya=(e,t)=>{const o=[],r=se(t)?c=>po(o,u=>t(u,c)):c=>Lt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},Vt=Object.keys,mo=Object.hasOwnProperty,Un=(e,t)=>{const o=Vt(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];t(f,u)}},ic=(e,t)=>Pa(e,(o,r)=>({k:r,v:t(o,r)})),Pa=(e,t)=>{const o={};return Un(e,(r,c)=>{const u=t(r,c);o[u.k]=u.v}),o},Pt=e=>(t,o)=>{e[o]=t},Mi=(e,t,o,r)=>{Un(e,(c,u)=>{(t(c,u)?o:r)(c,u)})},cs=(e,t)=>{const o={},r={};return Mi(e,t,Pt(o),Pt(r)),{t:o,f:r}},Pi=(e,t)=>{const o={};return Mi(e,t,Pt(o),St),o},uc=(e,t)=>{const o=[];return Un(e,(r,c)=>{o.push(t(r,c))}),o},Ba=e=>uc(e,Wo),Zo=(e,t)=>kn(e,t)?P.from(e[t]):P.none(),kn=(e,t)=>mo.call(e,t),Go=(e,t)=>kn(e,t)&&e[t]!==void 0&&e[t]!==null,ad=(e,t,o=Mt)=>$n(o).eq(e,t),tl={generate:e=>{if(!Ot(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return xe(e,(r,c)=>{const u=Vt(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ot(b))throw new Error("case arguments must be an array");t.push(f),o[f]=(...v)=>{const S=v.length;if(S!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+S);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,v)},match:R=>{const M=Vt(R);if(t.length!==M.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+M.join(","));if(!Ka(t,J=>Lt(M,J)))throw new Error("Not all branches were specified when using match. Specified: "+M.join(", ")+`
Required: `+t.join(", "));return R[f].apply(null,v)},log:R=>{console.log(R,{constructors:t,constructor:f,params:v})}}}}),o}},Wt=e=>{let t=e;return{get:()=>t,set:c=>{t=c}}},$a=e=>{const t=u=>u(e),o=st(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:He,isError:ye,map:u=>Sr.value(u(e)),mapError:r,bind:t,exists:t,forall:t,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>P.some(e)};return c},Dr=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:ye,isError:He,map:t,mapError:r=>Sr.error(r(e)),bind:t,exists:ye,forall:He,getOr:Wo,or:Wo,getOrThunk:fn,orThunk:fn,getOrDie:cn(String(e)),each:St,toOptional:P.none};return o},Sr={value:$a,error:Dr,fromOption:(e,t)=>e.fold(()=>Dr(t),$a)},Qd=typeof window<"u"?window:Function("return this;")(),ss=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},Bi=()=>{const e=ss(),t=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`},cd=(e,t,o)=>Math.min(Math.max(e,t),o),ei=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Mc=0;const or=e=>{const o=new Date().getTime(),r=Math.floor(ei()*1e9);return Mc++,e+"_"+r+Mc+String(o)},$i=()=>window.isSecureContext?window.crypto.randomUUID():Bi(),xu=(e,t)=>t,Ct=(e,t)=>On(e)&&On(t)?Su(e,t):t,Xa=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<t.length;r++){const c=t[r];for(const u in c)kn(c,u)&&(o[u]=e(o[u],c[u]))}return o},Su=Xa(Ct),Al=Xa(xu),zo=(e,t,o=he)=>e.exists(r=>o(r,t)),ld=(e,t,o=he)=>Qs(e,t,o).getOr(e.isNone()&&t.isNone()),dc=e=>{const t=[],o=r=>{t.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return t},Qs=(e,t,o)=>e.isSome()&&t.isSome()?P.some(o(e.getOrDie(),t.getOrDie())):P.none(),_l=(e,t,o,r)=>e.isSome()&&t.isSome()&&o.isSome()?P.some(r(e.getOrDie(),t.getOrDie(),o.getOrDie())):P.none(),id=e=>e.bind(Wo),Ia=(e,t)=>e?P.some(t):P.none(),Br=(e,t)=>{let o=t??Qd;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},nl=(e,t)=>{const o=e.split(".");return Br(o,t)};tl.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const $r=e=>{const t=[],o=[];return xe(e,r=>{r.fold(c=>{t.push(c)},c=>{o.push(c)})}),{errors:t,values:o}},fh=e=>{const t=Wt(P.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(P.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(P.some(b))}}},Jd=e=>{const t=Wt(P.none()),o=()=>t.get().each(b=>clearInterval(b));return{clear:()=>{o(),t.set(P.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(P.some(setInterval(b,e)))}}},Pc=()=>{const e=fh(St);return{...e,on:o=>e.get().each(o)}},Ol=(e,t)=>e.substring(t),ti=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,Zm=(e,t)=>hn(e,t)?Ol(e,t.length):e,_s=(e,t,o=0,r)=>{const c=e.indexOf(t,o);return c!==-1?Gn(r)?!0:c+t.length<=r:!1},hn=(e,t)=>ti(e,t,0),Kr=(e,t)=>ti(e,t,e.length-t.length),Yr=e=>t=>t.replace(e,""),Os=Yr(/^\s+|\s+$/g),em=Yr(/^\s+/g),Ii=Yr(/\s+$/g),fs=e=>e.length>0,ni=e=>!fs(e),ol=(e,t)=>t<=0?"":new Array(t+1).join(e),Jf=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?P.none():P.some(o)},vt=(e,t)=>{let o=null;return{cancel:()=>{oe(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{oe(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},t))}}},oi=(e,t)=>{let o=null;const r=()=>{oe(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},t)}}},pa=e=>{let t=!1,o;return(...r)=>(t||(t=!0,o=e.apply(null,r)),o)},Bc="\uFEFF",Is=" ",eg="…",Qa=e=>e===Bc,$c=e=>e.replace(/\uFEFF/g,""),Gm=e=>{const t={};return xe(e,o=>{t[o]={}}),Vt(t)},tg=e=>e.length!==void 0,si=Array.isArray,ng=e=>{if(si(e))return e;{const t=[];for(let o=0,r=e.length;o<r;o++)t[o]=e[o];return t}},wu=(e,t,o)=>{if(!e)return!1;if(o=o||e,tg(e)){for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(kn(e,r)&&t.call(o,e[r],r,e)===!1)return!1;return!0},ri=(e,t)=>{const o=[];return wu(e,(r,c)=>{o.push(t(r,c,e))}),o},Eu=(e,t)=>{const o=[];return wu(e,(r,c)=>{(!t||t(r,c,e))&&o.push(r)}),o},at=(e,t)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===t)return o}return-1},Fi=(e,t,o,r)=>{let c=Gn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=t.call(r,c,e[u],u);return c},tm=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e))return r;return-1},sl=e=>e[e.length-1],mc=(e,t,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),S=u||f&&!v,O=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!S&&!v&&!O;return{isiPad:st(c),isiPhone:st(u),isTablet:st(v),isPhone:st(S),isTouch:st(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:st(O),isDesktop:st(R)}},ud=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(t))return r}},ba=(e,t)=>{const o=ud(e,t);if(!o)return{major:0,minor:0};const r=c=>Number(t.replace(o,"$"+c));return ai(r(1),r(2))},Dl=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?Li():ba(e,o)},Li=()=>ai(0,0),ai=(e,t)=>({major:e,minor:t}),Vo={nu:ai,detect:Dl,unknown:Li},dd=(e,t)=>lc(t.brands,o=>{const r=o.brand.toLowerCase();return Oo(e,c=>r===c.brand?.toLowerCase()).map(c=>({current:c.name,version:Vo.nu(parseInt(o.version,10),0)}))}),B=(e,t)=>{const o=String(t).toLowerCase();return Oo(e,r=>r.search(o))},G=(e,t)=>B(e,t).map(o=>{const r=Vo.detect(o.versionRegexes,t);return{current:o.name,version:r}}),re=(e,t)=>B(e,t).map(o=>{const r=Vo.detect(o.versionRegexes,t);return{current:o.name,version:r}}),Pe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ht=e=>t=>_s(t,e),Jn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>_s(e,"edge/")&&_s(e,"chrome")&&_s(e,"safari")&&_s(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Pe],search:e=>_s(e,"chrome")&&!_s(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>_s(e,"msie")||_s(e,"trident")},{name:"Opera",versionRegexes:[Pe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ht("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ht("firefox")},{name:"Safari",versionRegexes:[Pe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(_s(e,"safari")||_s(e,"mobile/"))&&_s(e,"applewebkit")}],Uo=[{name:"Windows",search:Ht("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>_s(e,"iphone")||_s(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ht("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ht("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ht("linux"),versionRegexes:[]},{name:"Solaris",search:Ht("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ht("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ht("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],wr={browsers:st(Jn),oses:st(Uo)},Xr="Edge",Ja="Chromium",I="IE",ee="Opera",fe="Firefox",_e="Safari",it=()=>It({current:void 0,version:Vo.unknown()}),It=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isEdge:r(Xr),isChromium:r(Ja),isIE:r(I),isOpera:r(ee),isFirefox:r(fe),isSafari:r(_e)}},Mn={unknown:it,nu:It},wo="Windows",co="iOS",va="Android",Zs="Linux",Tu="macOS",qm="Solaris",nm="FreeBSD",Rl="ChromeOS",Kb=()=>Yb({current:void 0,version:Vo.unknown()}),Yb=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isWindows:r(wo),isiOS:r(co),isAndroid:r(va),isMacOS:r(Tu),isLinux:r(Zs),isSolaris:r(qm),isFreeBSD:r(nm),isChromeOS:r(Rl)}},Lp={unknown:Kb,nu:Yb},Xb={detect:(e,t,o)=>{const r=wr.browsers(),c=wr.oses(),u=t.bind(v=>dd(r,v)).orThunk(()=>G(r,e)).fold(Mn.unknown,Mn.nu),f=re(c,e).fold(Lp.unknown,Lp.nu),b=mc(f,u,e,o);return{browser:u,os:f,deviceType:b}}},Qb=e=>window.matchMedia(e).matches;let Uy=pa(()=>Xb.detect(window.navigator.userAgent,P.from(window.navigator.userAgentData),Qb));const Hi=()=>Uy(),jy=(e,t)=>nl(e,t),Wy=(e,t)=>{const o=jy(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Hp=Object.getPrototypeOf,zp=e=>Wy("HTMLElement",e),MS=e=>{const t=nl("ownerDocument.defaultView",e);return Ye(e)&&(zp(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Hp(e).constructor.name))},Zy=window.navigator.userAgent,Vp=Hi(),zi=Vp.browser,rl=Vp.os,om=Vp.deviceType,Gy=Zy.indexOf("Windows Phone")!==-1,fo={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zi.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zi.isIE(),windowsPhone:Gy,browser:{current:zi.current,version:zi.version,isChromium:zi.isChromium,isEdge:zi.isEdge,isFirefox:zi.isFirefox,isIE:zi.isIE,isOpera:zi.isOpera,isSafari:zi.isSafari},os:{current:rl.current,version:rl.version,isAndroid:rl.isAndroid,isChromeOS:rl.isChromeOS,isFreeBSD:rl.isFreeBSD,isiOS:rl.isiOS,isLinux:rl.isLinux,isMacOS:rl.isMacOS,isSolaris:rl.isSolaris,isWindows:rl.isWindows},deviceType:{isDesktop:om.isDesktop,isiPad:om.isiPad,isiPhone:om.isiPhone,isPhone:om.isPhone,isTablet:om.isTablet,isTouch:om.isTouch,isWebView:om.isWebView}},qy=/^\s*|\s*$/g,gh=e=>jt(e)?"":(""+e).replace(qy,""),Js=(e,t)=>t?t==="array"&&si(e)?!0:typeof e===t:e!==void 0,PS=(e,t,o={})=>{const r=U(e)?e.split(t||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Up=kn,BS=(e,...t)=>{for(let o=0;o<t.length;o++){const r=t[o];for(const c in r)if(kn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Jb=function(e,t,o,r){r=r||this,e&&(o&&(e=e[o]),wu(e,(c,u)=>t.call(r,c,u,o)===!1?!1:(Jb(c,t,o,r),!0)))},Je={trim:gh,isArray:si,is:Js,toArray:ng,makeMap:PS,each:wu,map:ri,grep:Eu,inArray:at,hasOwn:Up,extend:BS,walk:Jb,resolve:(e,t=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(t=t[o[r]],!!t);r++);return t},explode:(e,t)=>Ot(e)?e:e===""?[]:ri(e.split(t||","),gh),_addCacheSuffix:e=>{const t=fo.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Ic=(e,t)=>{const r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Km(r.childNodes[0])},og=(e,t)=>{const r=(t||document).createElement(e);return Km(r)},Ml=(e,t)=>{const r=(t||document).createTextNode(e);return Km(r)},Km=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},te={fromHtml:Ic,fromTag:og,fromText:Ml,fromDom:Km,fromPoint:(e,t,o)=>P.from(e.dom.elementFromPoint(t,o)).map(Km)},fc=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},md=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Wp=(e,t,o)=>{const r=e.document.createRange();return fc(r,t),md(r,o),r},Ym=(e,t,o,r,c)=>{const u=e.document.createRange();return u.setStart(t.dom,o),u.setEnd(r.dom,c),u},ya=tl.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),gc=(e,t,o)=>t(te.fromDom(o.startContainer),o.startOffset,te.fromDom(o.endContainer),o.endOffset),Zp=(e,t)=>t.match({domRange:o=>({ltr:st(o),rtl:P.none}),relative:(o,r)=>({ltr:pa(()=>Wp(e,o,r)),rtl:pa(()=>P.some(Wp(e,r,o)))}),exact:(o,r,c,u)=>({ltr:pa(()=>Ym(e,o,r,c,u)),rtl:pa(()=>P.some(Ym(e,c,u,o,r)))})}),Gp=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(c=>c.collapsed===!1).map(c=>ya.rtl(te.fromDom(c.endContainer),c.endOffset,te.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>gc(e,ya.ltr,o)):gc(e,ya.ltr,o)},sg=(e,t)=>{const o=Zp(e,t);return Gp(e,o)};ya.ltr,ya.rtl;const hc=8,qp=9,Vi=11,rg=1,Kp=3,Fc=(e,t)=>{const o=e.dom;if(o.nodeType!==rg)return!1;{const r=o;if(r.matches!==void 0)return r.matches(t);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Yp=e=>e.nodeType!==rg&&e.nodeType!==qp&&e.nodeType!==Vi||e.childElementCount===0,ci=(e,t)=>{const o=t===void 0?document:t.dom;return Yp(o)?[]:en(o.querySelectorAll(e),te.fromDom)},fd=(e,t)=>{const o=t===void 0?document:t.dom;return Yp(o)?P.none():P.from(o.querySelector(e)).map(te.fromDom)},Qn=(e,t)=>e.dom===t.dom,ec=(e,t)=>{const o=e.dom,r=t.dom;return o===r?!1:o.contains(r)},Xm=Fc,e0=(e,t)=>{const o=[],r=u=>(o.push(u),t(u));let c=t(e);do c=c.bind(r);while(c.isSome());return o},Hn=e=>e.dom.nodeName.toLowerCase(),ku=e=>e.dom.nodeType,fr=e=>t=>ku(t)===e,li=e=>ku(e)===hc||Hn(e)==="#comment",ii=e=>Fs(e)&&MS(e.dom),Fs=fr(rg),Eo=fr(Kp),Yy=fr(qp),Xy=fr(Vi),gr=e=>t=>Fs(t)&&Hn(t)===e,Pl=e=>te.fromDom(e.dom.ownerDocument),Bl=e=>Yy(e)?e:Pl(e),hr=e=>te.fromDom(Bl(e).dom.documentElement),ui=e=>te.fromDom(Bl(e).dom.defaultView),tc=e=>P.from(e.dom.parentNode).map(te.fromDom),Lc=e=>P.from(e.dom.parentElement).map(te.fromDom),Ca=(e,t)=>{const o=se(t)?t:ye;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=te.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Do=e=>{const t=o=>ze(o,r=>!Qn(e,r));return tc(e).map(Ds).map(t).getOr([])},al=e=>P.from(e.dom.previousSibling).map(te.fromDom),nc=e=>P.from(e.dom.nextSibling).map(te.fromDom),Qr=e=>ms(e0(e,al)),Ir=e=>e0(e,nc),Ds=e=>en(e.dom.childNodes,te.fromDom),$l=(e,t)=>{const o=e.dom.childNodes;return P.from(o[t]).map(te.fromDom)},Fr=e=>$l(e,0),sr=e=>$l(e,e.dom.childNodes.length-1),gd=e=>e.dom.childNodes.length,Xp=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return te.fromDom(t)},hh=e=>Xy(e)&&X(e.dom.host),Lr=e=>te.fromDom(e.dom.getRootNode()),Qp=e=>hh(e)?e:Xp(Bl(e)),t0=e=>hh(e)?e:te.fromDom(Bl(e).dom.body),rm=e=>{const t=Lr(e);return hh(t)?P.some(t):P.none()},ln=e=>te.fromDom(e.dom.host),Jp=e=>{if(X(e.target)){const t=te.fromDom(e.target);if(Fs(t)&&Rr(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Ws(o)}}return P.from(e.target)},Rr=e=>X(e.dom.shadowRoot),Jr=(e,t,o,r,c,u,f)=>({target:e,x:t,y:o,stop:r,prevent:c,kill:u,raw:f}),ea=e=>{const t=te.fromDom(Jp(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=A(r,o);return Jr(t,e.clientX,e.clientY,o,r,c,e)},gs=(e,t)=>o=>{e(o)&&t(ea(o))},hd=(e,t,o,r,c)=>{const u=gs(o,r);return e.dom.addEventListener(t,u,c),{unbind:de(cl,e,t,u,c)}},ph=(e,t,o,r)=>hd(e,t,o,r,!1),cl=(e,t,o,r)=>{e.dom.removeEventListener(t,o,r)},di=He,ag=(e,t,o)=>ph(e,t,di,o),bh=()=>te.fromDom(document),cg=(e,t=!1)=>e.dom.focus({preventScroll:t}),Ui=e=>{const t=Lr(e).dom;return e.dom===t.activeElement},Il=(e=bh())=>P.from(e.dom.activeElement).map(te.fromDom),e1=e=>Il(Lr(e)).filter(t=>e.dom.contains(t.dom)),la=(e,t)=>{tc(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},ll=(e,t)=>{nc(e).fold(()=>{tc(e).each(c=>{bo(c,t)})},r=>{la(r,t)})},ji=(e,t)=>{Fr(e).fold(()=>{bo(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},bo=(e,t)=>{e.dom.appendChild(t.dom)},Hc=(e,t)=>{la(e,t),bo(t,e)},n0=(e,t)=>{xe(t,o=>{la(e,o)})},lg=(e,t)=>{xe(t,(o,r)=>{const c=r===0?e:t[r-1];ll(c,o)})},il=(e,t)=>{xe(t,o=>{bo(e,o)})},gn=(e,t,o)=>{if(U(o)||Yt(o)||os(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},ws=(e,t,o)=>{gn(e.dom,t,o)},ta=(e,t)=>{const o=e.dom;Un(t,(r,c)=>{gn(o,c,r)})},hs=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},ul=(e,t)=>P.from(hs(e,t)),xs=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},rr=(e,t)=>{e.dom.removeAttribute(t)},Qm=e=>{const t=e.dom.attributes;return t==null||t.length===0},Kn=e=>Fo(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),Fl=e=>{e.dom.textContent="",xe(Ds(e),t=>{Ko(t)})},Ko=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},pc=e=>{const t=Ds(e);t.length>0&&lg(e,t),Ko(e)},pr=(e,t)=>te.fromDom(e.dom.cloneNode(t)),br=e=>pr(e,!1),Wi=e=>pr(e,!0),Jm=(e,t)=>{const o=te.fromTag(t),r=Kn(e);return ta(o,r),o},Au=(e,t)=>{const o=Jm(e,t);ll(e,o);const r=Ds(e);return il(o,r),Ko(e),o},pd=(e,t)=>{const r=(t||document).createElement("div");return r.innerHTML=e,Ds(te.fromDom(r))},bd=e=>en(e,te.fromDom),ia=e=>e.dom.innerHTML,_u=(e,t)=>{const r=Pl(e).dom,c=te.fromDom(r.createDocumentFragment()),u=pd(t,r);il(c,u),Fl(e),bo(e,c)},Qy=e=>{const t=te.fromTag("div"),o=te.fromDom(e.dom.cloneNode(!0));return bo(t,o),ia(t)},vd=e=>e.style!==void 0&&se(e.style.getPropertyValue),Po=e=>{const t=Eo(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return rm(te.fromDom(t)).fold(()=>o.body.contains(t),Mo(Po,ln))},t1=(e,t,o)=>{if(!U(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);vd(e)&&e.style.setProperty(t,o)},ef=(e,t)=>{vd(e)&&e.style.removeProperty(t)},xa=(e,t,o)=>{const r=e.dom;t1(r,t,o)},bc=(e,t)=>{const o=e.dom;Un(t,(r,c)=>{t1(o,c,r)})},Hs=(e,t)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(t);return c===""&&!Po(e)?Ou(o,t):c},Ou=(e,t)=>vd(e)?e.style.getPropertyValue(t):"",ar=(e,t)=>{const o=e.dom,r=Ou(o,t);return P.from(r).filter(c=>c.length>0)},tf=e=>{const t={},o=e.dom;if(vd(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);t[c]=o.style[c]}return t},vh=(e,t)=>{const o=e.dom;ef(o,t),zo(ul(e,"style").map(Os),"")&&rr(e,"style")},n1=e=>e.dom.offsetWidth,mi=((e,t)=>{const o=(b,v)=>{if(!os(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const S=b.dom;vd(S)&&(S.style[e]=v+"px")},r=b=>{const v=t(b);if(v<=0||v===null){const S=Hs(b,e);return parseFloat(S)||0}return v},c=r,u=(b,v)=>Fo(v,(S,O)=>{const R=Hs(b,O),M=R===void 0?0:parseInt(R,10);return isNaN(M)?S:S+M},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,S)=>{const O=u(b,S);return v>O?v-O:0}}})("height",e=>{const t=e.dom;return Po(e)?t.getBoundingClientRect().height:t.offsetHeight}),Jy=e=>mi.get(e),o1=(e,t)=>({left:e,top:t,translate:(r,c)=>o1(e+r,t+c)}),fi=o1,o0=e=>{const t=e.getBoundingClientRect();return fi(t.left,t.top)},nf=(e,t)=>e!==void 0?e:t!==void 0?t:0,ig=e=>{const t=e.dom.ownerDocument,o=t.body,r=t.defaultView,c=t.documentElement;if(o===e.dom)return fi(o.offsetLeft,o.offsetTop);const u=nf(r?.pageYOffset,c.scrollTop),f=nf(r?.pageXOffset,c.scrollLeft),b=nf(c.clientTop,o.clientTop),v=nf(c.clientLeft,o.clientLeft);return ug(e).translate(f-v,u-b)},ug=e=>{const t=e.dom,r=t.ownerDocument.body;return r===t?fi(r.offsetLeft,r.offsetTop):Po(e)?o0(t):fi(0,0)},s1=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return fi(o,r)},s0=(e,t,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,t)},Ll=(e,t)=>{Hi().browser.isSafari()&&se(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},e2=(e,t)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+t+" value of a "+t+" node");return r(u).getOr("")},r=u=>e(u)?P.from(u.dom.nodeValue):P.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+t+" value of a "+t+" node");u.dom.nodeValue=f}}},yd=(e,t)=>{const r=document.createDocumentFragment();return xe(e,c=>{r.appendChild(c.dom)}),te.fromDom(r)},Bo=e2(Eo,"text"),Sa=e=>Bo.get(e),Zi=e=>Bo.getOption(e),r1=(e,t)=>Bo.set(e,t),Cd=(e,t)=>{const o=hs(e,t);return o===void 0||o===""?[]:o.split(" ")},a1=(e,t,o)=>{const c=Cd(e,t).concat([o]);return ws(e,t,c.join(" ")),!0},r0=(e,t,o)=>{const r=ze(Cd(e,t),c=>c!==o);return r.length>0?ws(e,t,r.join(" ")):rr(e,t),!1};var Gi=(e,t,o,r,c)=>e(o,r)?P.some(o):se(c)&&c(o)?P.none():t(o,r,c);const qi=(e,t,o)=>{let r=e.dom;const c=se(o)?o:ye;for(;r.parentNode;){r=r.parentNode;const u=te.fromDom(r);if(t(u))return P.some(u);if(c(u))break}return P.none()},jo=(e,t,o)=>Gi((c,u)=>u(c),qi,e,t,o),a0=(e,t)=>{const o=e.dom;return o.parentNode?Rs(te.fromDom(o.parentNode),r=>!Qn(e,r)&&t(r)):P.none()},Rs=(e,t)=>{const o=c=>t(te.fromDom(c));return Oo(e.dom.childNodes,o).map(te.fromDom)},of=(e,t)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=te.fromDom(r.childNodes[c]);if(t(u))return P.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return P.none()};return o(e.dom)},cr=(e,t,o)=>qi(e,r=>Fc(r,t),o),Ki=(e,t)=>fd(t,e),ua=(e,t,o)=>Gi((c,u)=>Fc(c,u),cr,e,t,o),Du=e=>e.dom.classList!==void 0,yh=e=>Cd(e,"class"),c1=(e,t)=>a1(e,"class",t),l1=(e,t)=>r0(e,"class",t),t2=(e,t)=>Lt(yh(e),t)?l1(e,t):c1(e,t),vc=(e,t)=>{Du(e)?e.dom.classList.add(t):c1(e,t)},gi=e=>{(Du(e)?e.dom.classList:yh(e)).length===0&&rr(e,"class")},lr=(e,t)=>{Du(e)?e.dom.classList.remove(t):l1(e,t),gi(e)},Hr=(e,t)=>{const o=Du(e)?e.dom.classList.toggle(t):t2(e,t);return gi(e),o},Ch=(e,t)=>Du(e)&&e.dom.classList.contains(t),dg=(e,t)=>{xe(t,o=>{vc(e,o)})},xh=(e,t)=>{xe(t,o=>{lr(e,o)})},c0=e=>ua(e,"[contenteditable]"),Hl=(e,t=!1)=>Po(e)?e.dom.isContentEditable:c0(e).fold(st(t),o=>IS(o)==="true"),IS=e=>e.dom.contentEditable,w=(e,t)=>{e.dom.contentEditable=t?"true":"false"},k=(e,t,o)=>ze(Ca(e,o),t),F=(e,t)=>ze(Ds(e),t),q=(e,t)=>{let o=[];return xe(Ds(e),r=>{t(r)&&(o=o.concat([r])),o=o.concat(q(r,t))}),o},me=(e,t,o)=>k(e,r=>Fc(r,t),o),Ne=(e,t)=>ci(t,e),gt=(e,t,o)=>qi(e,t,o).isSome(),Zt=(e,t)=>a0(e,t).isSome(),Dn=(e,t)=>of(e,t).isSome(),Vn=(e,t)=>gt(e,de(Qn,t)),rs=(e,t,o)=>cr(e,t,o).isSome(),Es=(e,t,o)=>ua(e,t,o).isSome(),ir=e=>se(e)?e:ye,zc=(e,t,o)=>{let r=e.dom;const c=ir(o);for(;r.parentNode;){r=r.parentNode;const u=te.fromDom(r),f=t(u);if(f.isSome())return f;if(c(u))break}return P.none()},hi=(e,t,o)=>{const r=t(e),c=ir(o);return r.orThunk(()=>c(e)?P.none():zc(e,t,c))},Ru=e=>Zi(e).filter(t=>t.trim().length!==0||t.indexOf(Is)>-1).isSome(),zl=e=>ii(e)&&hs(e,"contenteditable")==="false",i1=["img","br"],sf=e=>Ru(e)||Lt(i1,Hn(e))||zl(e),mg=e=>of(e,sf),gg={create:(e,t,o,r)=>({start:e,soffset:t,finish:o,foffset:r})},rf=tl.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Sh=(e,t,o,r)=>e.fold(t,o,r),n2=e=>e.fold(Wo,Wo,Wo),o2=rf.before,vo=rf.on,zs=rf.after,qs={before:o2,on:vo,after:zs,cata:Sh,getStart:n2},wa=tl.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wh=e=>wa.exact(e.start,e.soffset,e.finish,e.foffset),hg=e=>e.match({domRange:t=>te.fromDom(t.startContainer),relative:(t,o)=>qs.getStart(t),exact:(t,o,r,c)=>t}),Eh=wa.domRange,Th=wa.relative,FS=wa.exact,am=e=>{const t=hg(e);return ui(t)},u1=gg.create,af={domRange:Eh,relative:Th,exact:FS,exactFromRange:wh,getWin:am,range:u1},Lk=(e,t,o)=>P.from(e.caretPositionFromPoint?.(t,o)).bind(r=>{if(r.offsetNode===null)return P.none();const c=e.createRange();return c.setStart(r.offsetNode,r.offset),c.collapse(),P.some(c)}),Nr=(e,t,o)=>P.from(e.caretRangeFromPoint?.(t,o)),Er=(e,t,o)=>e.caretPositionFromPoint?Lk(e,t,o):e.caretRangeFromPoint?Nr(e,t,o):P.none(),cf=(e,t,o)=>{const r=e.document;return Er(r,t,o).map(c=>gg.create(te.fromDom(c.startContainer),c.startOffset,te.fromDom(c.endContainer),c.endOffset))},cm=(e,t)=>{const o=Hn(e);return o==="input"?qs.after(e):Lt(["br","img"],o)?t===0?qs.before(e):qs.after(e):qs.on(e,t)},s2=(e,t)=>{const o=e.fold(qs.before,cm,qs.after),r=t.fold(qs.before,cm,qs.after);return af.relative(o,r)},Fa=(e,t,o,r)=>{const c=cm(e,t),u=cm(o,r);return af.relative(c,u)},r2=e=>e.match({domRange:t=>{const o=te.fromDom(t.startContainer),r=te.fromDom(t.endContainer);return Fa(o,t.startOffset,r,t.endOffset)},relative:s2,exact:Fa}),lf=e=>{const t=af.getWin(e).dom,o=(c,u,f,b)=>Ym(t,c,u,f,b),r=r2(e);return sg(t,r).match({ltr:o,rtl:o})},l0=(e,t,o)=>cf(e,t,o),Vl=e=>{const t=e===void 0?window:e;return Hi().browser.isFirefox()?P.none():P.from(t.visualViewport)},a2=(e,t,o,r)=>({x:e,y:t,width:o,height:r,right:e+o,bottom:t+r}),dl=e=>{const t=e===void 0?window:e,o=t.document,r=s1(te.fromDom(o));return Vl(t).fold(()=>{const c=t.document.documentElement,u=c.clientWidth,f=c.clientHeight;return a2(r.left,r.top,u,f)},c=>a2(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class er{rootNode;node;constructor(t,o){this.node=t,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,o,r,c){if(t){if(!c&&t[o])return t[o];if(t!==this.rootNode){let u=t[r];if(u)return u;for(let f=t.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(t,o){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=t.parentNode;if(c&&c!==this.rootNode)return c}}}const i0=/^[ \t\r\n]*$/,kh=e=>i0.test(e),LS=e=>{for(const t of e)if(!Qa(t))return!1;return!0},c2=e=>" \f	\v".indexOf(e)!==-1,HS=e=>e===`
`||e==="\r",zS=(e,t)=>t<e.length&&t>=0?HS(e[t]):!1,u0=(e,t=4,o=!0,r=!0)=>{const c=ol(" ",t),u=e.replace(/\t/g,c);return Fo(u,(b,v)=>c2(v)||v===Is?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||zS(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Is}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:HS(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},Ah=e=>t=>!!t&&t.nodeType===e,d0=e=>!!e&&!Object.getPrototypeOf(e),pt=Ah(1),Vc=e=>pt(e)&&ii(te.fromDom(e)),Hk=e=>pt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",yc=e=>{const t=e.toLowerCase();return o=>X(o)&&o.nodeName.toLowerCase()===t},pi=e=>{const t=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Lt(t,r)}return!1}},m0=(e,t)=>{const o=t.toLowerCase().split(" ");return r=>{if(pt(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},zk=e=>t=>pt(t)&&t.hasAttribute(e),uf=e=>pt(e)&&e.hasAttribute("data-mce-bogus"),Vk=e=>pt(e)&&e.getAttribute("data-mce-bogus")==="all",Uc=e=>pt(e)&&e.tagName==="TABLE",VS=e=>t=>!!(Vc(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),bi=pi(["textarea","input"]),tt=Ah(3),l2=Ah(4),zr=Ah(7),zn=Ah(8),lm=Ah(9),_h=Ah(11),Vs=yc("br"),vi=yc("img"),d1=yc("a"),ml=VS("true"),Ts=VS("false"),im=e=>Vc(e)&&e.isContentEditable&&X(e.parentElement)&&!e.parentElement.isContentEditable,Oh=pi(["td","th"]),i2=pi(["td","th","caption"]),u2=yc("template"),yi=pi(["video","audio","object","embed"]),m1=yc("li"),f1=yc("details"),Uk=yc("summary"),d2="uc-video",g1=e=>e.nodeName.toLowerCase()===d2,m2={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},f0=(e,t,o)=>{const r=te.fromDom(t),c=te.fromDom(e),u=o.getWhitespaceElements();return gt(c,b=>kn(u,Hn(b)),de(Qn,r))},jk=e=>pt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Wk=(e,t)=>pt(e)&&kn(t.getNonEmptyElements(),e.nodeName),f2=zk("data-mce-bookmark"),Zk=e=>Lc(te.fromDom(e)).exists(t=>!Hl(t)),h1=(e,t,o)=>kh(e.data)&&!f0(e,t,o),o5=(e,t,o,r)=>tt(e)&&!h1(e,t,o)&&(!r.includeZwsp||!LS(e.data)),fl=(e,t,o,r)=>se(r.isContent)&&r.isContent(t)||Wk(t,e)||f2(t)||jk(t)||o5(t,o,e,r)||Ts(t)||ml(t)&&Zk(t),on=(e,t,o)=>{const r={...m2,...o};if(r.checkRootAsContent&&fl(e,t,t,r))return!1;let c=t.firstChild,u=0;if(!c)return!0;const f=new er(c,t);do{if(r.skipBogus&&pt(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(zn(c)){c=f.next(!0);continue}if(Vs(c)){u++,c=f.next();continue}if(fl(e,c,t,r))return!1;c=f.next()}while(c);return u<=1},tr=(e,t,o)=>on(e,t.dom,{checkRootAsContent:!0,...o}),Dh=(e,t,o)=>fl(e,t,t,{includeZwsp:m2.includeZwsp,...o}),US=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},pg=e=>US(e)!=="html",Rh=e=>pg(e.nodeName),g2=e=>US(e.nodeName),bg=["svg","math"],jS=()=>{const e=Pc(),t=()=>e.get().map(g2).getOr("html");return{track:c=>(Rh(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},xd="data-mce-block",WS=e=>ze(Vt(e),t=>!/[A-Z]/.test(t)),h2=e=>en(WS(e),t=>{const o=CSS.escape(t);return`${o}:`+en(bg,r=>`not(${r} ${o})`).join(":")}).join(","),Ls=(e,t)=>X(t.querySelector(e))?(t.setAttribute(xd,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(xd),!1),Ci=(e,t)=>{const o=h2(e.getTransparentElements()),r=h2(e.getBlockElements());return ze(t.querySelectorAll(o),c=>Ls(r,c))},Cc=(e,t,o)=>{const r=o?"lastChild":"firstChild";for(let c=t[r];c;c=c[r])if(on(e,c,{checkRootAsContent:!0})){c.parentNode?.removeChild(c);return}},Nh=(e,t,o)=>{const r=document.createRange(),c=t.parentNode;if(c){r.setStartBefore(t),r.setEndBefore(o);const u=r.extractContents();Cc(e,u,!0),r.setStartAfter(o),r.setEndAfter(t);const f=r.extractContents();Cc(e,f,!1),on(e,u,{checkRootAsContent:!0})||c.insertBefore(u,t),on(e,o,{checkRootAsContent:!0})||c.insertBefore(o,t),on(e,f,{checkRootAsContent:!0})||c.insertBefore(f,t),c.removeChild(t)}},xc=(e,t,o)=>{const r=e.getBlockElements(),c=te.fromDom(t),u=b=>Hn(b)in r,f=b=>Qn(b,c);xe(bd(o),b=>{qi(b,u,f).each(v=>{const S=F(b,O=>u(O)&&!e.isValidChild(Hn(v),Hn(O)));if(S.length>0){const O=Lc(v);xe(S,R=>{qi(R,u,f).each(M=>{Nh(e,M.dom,R.dom)})}),O.each(R=>Ci(e,R.dom))}})})},vg=(e,t,o)=>{xe([...o,...Ks(e,t)?[t]:[]],r=>xe(Ne(te.fromDom(r),r.nodeName.toLowerCase()),c=>{Yi(e,c.dom)&&pc(c)}))},na=(e,t)=>{const o=Ci(e,t);xc(e,t,o),vg(e,t,o)},Sc=(e,t)=>{if(p1(e,t)){const o=h2(e.getBlockElements());Ls(o,t)}},g0=(e,t,o)=>{const r=u=>Qn(u,te.fromDom(t)),c=Ca(te.fromDom(o),r);qr(c,c.length-2).filter(Fs).fold(()=>na(e,t),u=>na(e,u.dom))},Ze=e=>e.hasAttribute(xd),jc=(e,t)=>kn(e.getTransparentElements(),t),p1=(e,t)=>pt(t)&&jc(e,t.nodeName),Ks=(e,t)=>p1(e,t)&&Ze(t),Yi=(e,t)=>p1(e,t)&&!Ze(t),gl=(e,t)=>t.type===1&&jc(e,t.name)&&U(t.attr(xd)),Gk=Hi().browser,Sd=e=>Oo(e,Fs),ZS=e=>Gk.isFirefox()&&Hn(e)==="table"?Sd(Ds(e)).filter(t=>Hn(t)==="caption").bind(t=>Sd(Ir(t)).map(o=>{const r=o.dom.offsetTop,c=t.dom.offsetTop,u=t.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,Wc=(e,t)=>e.children&&Lt(e.children,t),Lo=(e,t,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,t){if(o===e&&t.getBoundingClientRect&&Hs(te.fromDom(e),"position")==="static"){const b=t.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=t;for(;f&&f!==o&&f.nodeType&&!Wc(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=t.parentNode;f&&f!==o&&f.nodeType&&!Wc(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=ZS(te.fromDom(t))}return{x:r,y:c}},Nu=(e,t)=>{const o=t.crossOrigin;return t.contentCssCors?"anonymous":se(o)?o(e):void 0},Mh=(e,t={})=>{let o=0;const r={},c=te.fromDom(e),u=Bl(c),f=be=>{t.referrerPolicy=be},b=be=>{t.contentCssCors=be},v=be=>{t.crossOrigin=be},S=be=>{bo(Qp(c),be)},O=be=>{const ve=Qp(c);Ki(ve,"#"+be).each(Ko)},R=be=>Zo(r,be).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),M=be=>new Promise((ve,Be)=>{let je;const xt=Je._addCacheSuffix(be),Kt=R(xt);r[xt]=Kt,Kt.count++;const Me=(wn,uo)=>{xe(wn,Fn),Kt.status=uo,Kt.passed=[],Kt.failed=[],je&&(je.onload=null,je.onerror=null,je=null)},Te=()=>Me(Kt.passed,2),$e=()=>Me(Kt.failed,3);if(ve&&Kt.passed.push(ve),Be&&Kt.failed.push(Be),Kt.status===1)return;if(Kt.status===2){Te();return}if(Kt.status===3){$e();return}Kt.status=1;const yt=te.fromTag("link",u.dom);ta(yt,{rel:"stylesheet",type:"text/css",id:Kt.id});const Sn=Nu(be,t);Sn!==void 0&&ws(yt,"crossOrigin",Sn),t.referrerPolicy&&ws(yt,"referrerpolicy",t.referrerPolicy),je=yt.dom,je.onload=Te,je.onerror=$e,S(yt),ws(yt,"href",xt)}),H=(be,ve)=>{const Be=R(be);r[be]=Be,Be.count++;const je=te.fromTag("style",u.dom);ta(je,{rel:"stylesheet",type:"text/css",id:Be.id,"data-mce-key":be}),je.dom.innerHTML=ve,S(je)},J=be=>Promise.allSettled(en(be,Be=>M(Be).then(st(Be)))).then(Be=>{const je=rt(Be,xt=>xt.status==="fulfilled");return je.fail.length>0?Promise.reject(en(je.fail,xt=>xt.reason)):en(je.pass,xt=>xt.value)}),W=be=>{const ve=Je._addCacheSuffix(be);Zo(r,ve).each(Be=>{--Be.count===0&&(delete r[ve],O(Be.id))})};return{load:M,loadRawCss:H,loadAll:J,unload:W,unloadRawCss:be=>{Zo(r,be).each(ve=>{--ve.count===0&&(delete r[be],O(ve.id))})},unloadAll:be=>{xe(be,ve=>{W(ve)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},p2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Lr(o).dom;return P.from(e.get(u)).getOrThunk(()=>{const f=Mh(u,r);return e.set(u,f),f})}}})(),b2=e=>e.nodeName.toLowerCase()==="span",Xi=(e,t)=>X(e)&&(Dh(t,e)||t.isInline(e.nodeName.toLowerCase())),h0=(e,t,o)=>{const r=new er(e,t).prev(!1),c=new er(e,t).next(!1),u=Gn(r)||Xi(r,o),f=Gn(c)||Xi(c,o);return u&&f},Zc=e=>b2(e)&&e.getAttribute("data-mce-type")==="bookmark",qk=(e,t,o)=>tt(e)&&e.data.length>0&&h0(e,t,o),we=e=>pt(e)?e.childNodes.length>0:!1,Ul=e=>_h(e)||lm(e),b1=(e,t,o,r)=>{const c=r||t;if(pt(t)&&Zc(t))return t;const u=t.childNodes;for(let f=u.length-1;f>=0;f--)b1(e,u[f],o,c);if(pt(t)){const f=t.childNodes;f.length===1&&Zc(f[0])&&t.parentNode?.insertBefore(f[0],t)}return!Ul(t)&&!Dh(o,t)&&!we(t)&&!qk(t,c,o)&&e.remove(t),t},Us=Je.makeMap,wc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ls=/[<>&\"\']/g,GS=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,df={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},mf={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ph={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},v1=e=>{const t=te.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},v2=(e,t)=>{const o={};if(e){const r=e.split(",");t=t||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],t));if(!mf[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},y2=v2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),ff=(e,t)=>e.replace(t?wc:Vr,o=>mf[o]||o),Bh=e=>(""+e).replace(ls,t=>mf[t]||t),qS=(e,t)=>e.replace(t?wc:Vr,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":mf[o]||"&#"+o.charCodeAt(0)+";"),C2=(e,t,o)=>{const r=o||y2;return e.replace(t?wc:Vr,c=>mf[c]||r[c]||c)},hl={encodeRaw:ff,encodeAllRaw:Bh,encodeNumeric:qS,encodeNamed:C2,getEncodeFunc:(e,t)=>{const o=v2(t)||y2,r=(f,b)=>f.replace(b?wc:Vr,v=>mf[v]!==void 0?mf[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>C2(f,b,o),u=Us(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?t?c:C2:u.numeric?qS:ff},decode:e=>e.replace(GS,(t,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):df[o]||String.fromCharCode(o)):Ph[t]||y2[t]||v1(t))},ur=(e,t)=>(e=Je.trim(e),e?e.split(t||" "):[]),gf=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),y1=e=>Ye(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Gc=e=>{const t=o=>Ot(o)?en(o,t):y1(o)?new RegExp(o.source,o.flags):Ye(o)?ic(o,t):o;return t(e)},$h=e=>{const t=/^(~)?(.+)$/;return xo(ur(e,","),o=>{const r=t.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},Mr=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),p0=e=>{let t,o;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const r=[t,o].join(" ");return{blockContent:t,phrasingContent:o,flowContent:r}},jl=e=>{const{blockContent:t,phrasingContent:o,flowContent:r}=p0(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(t),phrasingContent:c(o),flowContent:c(r)})},Qi={html4:pa(()=>jl("html4")),html5:pa(()=>jl("html5")),"html5-strict":pa(()=>jl("html5-strict"))},x2=(e,t)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=Qi[e]();return t==="blocks"?P.some(o):t==="phrasing"?P.some(r):t==="flow"?P.some(c):P.none()},oa=e=>{const t=Mr(e),{phrasingContent:o,flowContent:r}=p0(e),c={},u=(v,S,O)=>{c[v]={attributes:yu(S,st({})),attributesOrder:S,children:yu(O,st({}))}},f=(v,S="",O="")=>{const R=ur(O),M=ur(v);let H=M.length;const J=[...t,...ur(S)];for(;H--;)u(M[H],J.slice(),R)},b=(v,S)=>{const O=ur(v),R=ur(S);let M=O.length;for(;M--;){const H=c[O[M]];for(let J=0,W=R.length;J<W;J++)H.attributes[R[J]]={},H.attributesOrder.push(R[J])}};return e!=="html5-strict"&&(xe(ur("acronym applet basefont big font strike tt"),O=>{f(O,"",o)}),xe(ur("center dir isindex noframes"),O=>{f(O,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset property"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&xe([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),xe(ur("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},Ih=e=>e==="-"?"remove":"add",Mu=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return P.from(t.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},yg=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return xo(ur(e,","),o=>{const r=t.exec(o);if(r){const c=r[1],u=c?Ih(c):"replace",f=r[2],b=xo(ur(r[3],"|"),v=>Mu(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},Cg=(e,t)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=t;return xe(ur(e,"|"),f=>{const b=o.exec(f);if(b){const v={},S=b[1],O=b[2].replace(/[\\:]:/g,":"),R=b[3],M=b[4];if(S==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(O),v.required=!0),S==="-"){delete c[O],u.splice(Je.inArray(u,O),1);return}if(R&&(R==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:O,value:M}),v.defaultValue=M):R==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:O,value:M}),v.forcedValue=M):R==="<"&&(v.validValues=Je.makeMap(M,"?"))),r.test(O)){const H=v;t.attributePatterns=t.attributePatterns||[],H.pattern=gf(O),t.attributePatterns.push(H)}else c[O]||u.push(O),c[O]=v}})},Yk=(e,t)=>{Un(e.attributes,(o,r)=>{t.attributes[r]=o}),t.attributesOrder.push(...e.attributesOrder)},b0=(e,t)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return xo(ur(t,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],S=c[5],O={attributes:{},attributesOrder:[]};if(e.each(R=>Yk(R,O)),u==="#"?O.paddEmpty=!0:u==="-"&&(O.removeEmpty=!0),v==="!"&&(O.removeEmptyAttrs=!0),S&&Cg(S,O),b&&(O.outputName=f),f==="@")if(e.isNone())e=P.some(O);else return[];return[b?{name:f,element:O,aliasName:b}:{name:f,element:O}]}else return[]})},um={},C1=Je.makeMap,is=Je.each,KS=Je.extend,dm=Je.explode,Fh=(e,t={})=>{const o=C1(e," ",C1(e.toUpperCase()," "));return KS(o,t)},v0=e=>Fh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),mm=(e,t)=>{if(e){const o={};return U(e)&&(e={"*":e}),is(e,(r,c)=>{o[c]=o[c.toUpperCase()]=t==="map"?C1(r,/[, ]/):dm(r,/[, ]/)}),o}else return},Ea=(e={})=>{const t={},o={};let r=[];const c={},u={},f={},b=(bn,ho,Or)=>{const As=e[bn];if(As)return C1(As,/[, ]/,C1(As.toUpperCase(),/[, ]/));{let ns=um[bn];return ns||(ns=Fh(ho,Or),um[bn]=ns),ns}},v=e.schema??"html5",S=oa(v);e.verify_html===!1&&(e.valid_elements="*[*]");const O=mm(e.valid_styles),R=mm(e.invalid_styles,"map"),M=mm(e.valid_classes,"map"),H=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),J=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),W=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),Q=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),ge="td th iframe video audio object script code",be=b("non_empty_elements",ge+" pre svg textarea summary",W),ve=b("move_caret_before_on_enter_elements",ge+" table",W),Be="h1 h2 h3 h4 h5 h6",je=b("text_block_elements",Be+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),xt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",je),Kt=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),Me=b("transparent_elements","a ins del canvas map"),Te=b("wrap_block_elements","pre "+Be);is("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),bn=>{u[bn]=new RegExp("</"+bn+"[^>]*>","gi")});const $e=bn=>{const ho=P.from(t["@"]),Or=/[*?+]/;xe(b0(ho,bn??""),({name:As,element:ns,aliasName:xr})=>{if(xr&&(t[xr]=ns),Or.test(As)){const Di=ns;Di.pattern=gf(As),r.push(Di)}else t[As]=ns})},yt=bn=>{r=[],xe(Vt(t),ho=>{delete t[ho]}),$e(bn)},Sn=(bn,ho)=>{delete um.text_block_elements,delete um.block_elements;const Or=ho.extends?!Jc(ho.extends):!1,As=ho.extends;if(o[bn]=As?o[As]:{},c[bn]=As??bn,be[bn.toUpperCase()]={},be[bn]={},Or||(xt[bn.toUpperCase()]={},xt[bn]={}),As&&!t[bn]&&t[As]){const ns=Gc(t[As]);delete ns.removeEmptyAttrs,delete ns.removeEmpty,t[bn]=ns}else t[bn]={attributesOrder:[],attributes:{}};if(Ot(ho.attributes)){const ns=Di=>{xr.attributesOrder.push(Di),xr.attributes[Di]={}},xr=t[bn]??{};delete xr.attributesDefault,delete xr.attributesForced,delete xr.attributePatterns,delete xr.attributesRequired,xr.attributesOrder=[],xr.attributes={},xe(ho.attributes,Di=>{const El=Mr(v);Mu(Di).each(({preset:rd,name:uh})=>{rd?uh==="global"&&xe(El,ns):ns(uh)})}),t[bn]=xr}if(Yt(ho.padEmpty)){const ns=t[bn]??{};ns.paddEmpty=ho.padEmpty,t[bn]=ns}if(Ot(ho.children)){const ns={},xr=El=>{ns[El]={}},Di=El=>{x2(v,El).each(rd=>{xe(rd,xr)})};xe(ho.children,El=>{Mu(El).each(({preset:rd,name:uh})=>{rd?Di(uh):xr(uh)})}),o[bn]=ns}As&&Un(o,(ns,xr)=>{ns[As]&&(o[xr]=ns=KS({},o[xr]),ns[bn]=ns[As])})},wn=bn=>{xe($h(bn??""),({name:ho,cloneName:Or})=>{Sn(ho,{extends:Or})})},uo=(bn,ho)=>{f[bn]=ho},qo=bn=>{Ye(bn)?Un(bn,(ho,Or)=>{const As=ho.componentUrl;U(As)&&uo(Or,As),Sn(Or,ho)}):U(bn)&&wn(bn)},Cs=bn=>{xe(yg(bn??""),({operation:ho,name:Or,validChildren:As})=>{const ns=ho==="replace"?{"#comment":{}}:o[Or],xr=El=>{ho==="remove"?delete ns[El]:ns[El]={}},Di=El=>{x2(v,El).each(rd=>{xe(rd,xr)})};xe(As,({preset:El,name:rd})=>{El?Di(rd):xr(rd)}),o[Or]=ns})},Bs=bn=>{const ho=t[bn];if(ho)return ho;let Or=r.length;for(;Or--;){const As=r[Or];if(As.pattern.test(bn))return As}},Na=()=>{e.valid_elements?(yt(e.valid_elements),is(S,(bn,ho)=>{o[ho]=bn.children})):(is(S,(bn,ho)=>{t[ho]={attributes:bn.attributes,attributesOrder:bn.attributesOrder},o[ho]=bn.children}),is(ur("strong/b em/i"),bn=>{const ho=ur(bn,"/");t[ho[1]].outputName=ho[0]}),is(Kt,(bn,ho)=>{t[ho]&&(e.padd_empty_block_inline_children&&(t[ho].paddInEmptyBlock=!0),t[ho].removeEmpty=!0)}),is(ur("ol ul blockquote a table tbody"),bn=>{t[bn]&&(t[bn].removeEmpty=!0)}),is(ur("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),bn=>{t[bn]&&(t[bn].paddEmpty=!0)}),is(ur("span"),bn=>{t[bn].removeEmptyAttrs=!0})),delete t.svg,qo(e.custom_elements),Cs(e.valid_children),$e(e.extended_valid_elements),Cs("+ol[ul|ol],+ul[ul|ol]"),is({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(bn,ho)=>{t[ho]&&(t[ho].parentsRequired=ur(bn))}),e.invalid_elements&&is(dm(e.invalid_elements),bn=>{t[bn]&&delete t[bn]}),Bs("span")||$e("span[!data-mce-type|*]")},_i=st(O),At=st(R),sn=st(M),Ho=st(Q),Ao=st(xt),qa=st(je),Le=st(Kt),dt=st(Object.seal(W)),$t=st(J),to=st(be),Zn=st(ve),Jo=st(H),Oi=st(Me),Yd=st(Te),sd=st(Object.seal(u)),pu=(bn,ho)=>{const Or=o[bn.toLowerCase()];return!!(Or&&Or[ho.toLowerCase()])},Ip=(bn,ho)=>{const Or=Bs(bn);if(Or)if(ho){if(Or.attributes[ho])return!0;const As=Or.attributePatterns;if(As){let ns=As.length;for(;ns--;)if(As[ns].pattern.test(ho))return!0}}else return!0;return!1},Jc=bn=>kn(Ao(),bn),Ql=bn=>!hn(bn,"#")&&Ip(bn)&&!Jc(bn),ih=bn=>kn(Yd(),bn)||Ql(bn),Hy=st(c),Tk=st(f);return Na(),{type:v,children:o,elements:t,getValidStyles:_i,getValidClasses:sn,getBlockElements:Ao,getInvalidStyles:At,getVoidElements:dt,getTextBlockElements:qa,getTextInlineElements:Le,getBoolAttrs:Ho,getElementRule:Bs,getSelfClosingElements:$t,getNonEmptyElements:to,getMoveCaretBeforeOnEnterElements:Zn,getWhitespaceElements:Jo,getTransparentElements:Oi,getSpecialElements:sd,getComponentUrls:Tk,isValidChild:pu,isValid:Ip,isBlock:Jc,isInline:Ql,isWrapper:ih,getCustomElements:Hy,addValidElements:$e,setValidElements:yt,addCustomElements:qo,addValidChildren:Cs}},xg=e=>({value:Lh(e)}),Lh=e=>Zm(e,"#").toUpperCase(),y0=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},C0=e=>{const t=y0(e.red)+y0(e.green)+y0(e.blue);return xg(t)},x0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,x1=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,YS=(e,t,o,r)=>({red:e,green:t,blue:o,alpha:r}),S2=(e,t,o,r)=>{const c=parseInt(e,10),u=parseInt(t,10),f=parseInt(o,10),b=parseFloat(r);return YS(c,u,f,b)},w2=e=>x0.test(e)?"rgb":x1.test(e)?"rgba":"other",Hh=e=>{const t=x0.exec(e);if(t!==null)return P.some(S2(t[1],t[2],t[3],"1"));const o=x1.exec(e);return o!==null?P.some(S2(o[1],o[2],o[3],o[4])):P.none()},Pu=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,xi=e=>Hh(e).map(C0).map(t=>"#"+t.value).getOr(e),fm=(e={},t)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=Bc;t&&(f=t.getValidStyles(),b=t.getInvalidStyles());const S=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let R=0;R<S.length;R++)u[S[R]]=v+R,u[v+R]=S[R];const O={parse:R=>{const M={};let H=!1;const J=e.url_converter,W=e.url_converter_scope||O,Q=(Me,Te,$e)=>{const yt=M[Me+"-top"+Te];if(!yt)return;const Sn=M[Me+"-right"+Te];if(!Sn)return;const wn=M[Me+"-bottom"+Te];if(!wn)return;const uo=M[Me+"-left"+Te];if(!uo)return;const qo=[yt,Sn,wn,uo];let Cs=qo.length-1;for(;Cs--&&qo[Cs]===qo[Cs+1];);Cs>-1&&$e||(M[Me+Te]=Cs===-1?qo[0]:qo.join(" "),delete M[Me+"-top"+Te],delete M[Me+"-right"+Te],delete M[Me+"-bottom"+Te],delete M[Me+"-left"+Te])},ge=Me=>{const Te=M[Me];if(!Te)return;const $e=Te.indexOf(",")>-1?[Te]:Te.split(" ");let yt=$e.length;for(;yt--;)if($e[yt]!==$e[0])return!1;return M[Me]=$e[0],!0},be=(Me,Te,$e,yt)=>{ge(Te)&&ge($e)&&ge(yt)&&(M[Me]=M[Te]+" "+M[$e]+" "+M[yt],delete M[Te],delete M[$e],delete M[yt])},ve=Me=>(H=!0,u[Me]),Be=(Me,Te)=>(H&&(Me=Me.replace(/\uFEFF[0-9]/g,$e=>u[$e])),Te||(Me=Me.replace(/\\([\'\";:])/g,"$1")),Me),je=Me=>String.fromCharCode(parseInt(Me.slice(1),16)),xt=Me=>Me.replace(/\\[0-9a-f]+/gi,je),Kt=(Me,Te,$e,yt,Sn,wn)=>{if(Sn=Sn||wn,Sn)return Sn=Be(Sn),"'"+Sn.replace(/\'/g,"\\'")+"'";if(Te=Be(Te||$e||yt||""),!e.allow_script_urls){const uo=Te.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(uo)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(uo))return""}return J&&(Te=J.call(W,Te,"style")),"url('"+Te.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,ve).replace(/\"[^\"]+\"|\'[^\']+\'/g,Te=>Te.replace(/[;:]/g,ve));let Me;for(;Me=r.exec(R);){r.lastIndex=Me.index+Me[0].length;let Te=Me[1].replace(c,"").toLowerCase(),$e=Me[2].replace(c,"");if(Te&&$e){if(Te=xt(Te),$e=xt($e),Te.indexOf(v)!==-1||Te.indexOf('"')!==-1||!e.allow_script_urls&&(Te==="behavior"||/expression\s*\(|\/\*|\*\//.test($e)))continue;Te==="font-weight"&&$e==="700"?$e="bold":(Te==="color"||Te==="background-color")&&($e=$e.toLowerCase()),w2($e)==="rgb"&&Hh($e).each(yt=>{$e=xi(Pu(yt)).toLowerCase()}),$e=$e.replace(o,Kt),M[Te]=H?Be($e,!0):$e}}Q("border","",!0),Q("border","-width"),Q("border","-color"),Q("border","-style"),Q("padding",""),Q("margin",""),be("border","border-width","border-style","border-color"),M.border==="medium none"&&delete M.border,M["border-image"]==="none"&&delete M["border-image"]}return M},serialize:(R,M)=>{let H="";const J=(Q,ge)=>{const be=ge[Q];if(be)for(let ve=0,Be=be.length;ve<Be;ve++){const je=be[ve],xt=R[je];xt&&(H+=(H.length>0?" ":"")+je+": "+xt+";")}},W=(Q,ge)=>{if(!b||!ge)return!0;let be=b["*"];return be&&be[Q]?!1:(be=b[ge],!(be&&be[Q]))};return M&&f?(J("*",f),J(M,f)):Un(R,(Q,ge)=>{Q&&W(ge,M)&&(H+=(H.length>0?" ":"")+ge+": "+Q+";")}),H}};return O},XS={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},S0=e=>e instanceof Event||se(e.initEvent),E2=e=>e.isDefaultPrevented===He||e.isDefaultPrevented===ye,QS=e=>jt(e.preventDefault)||S0(e),T2=(e,t)=>{const o=t??{};for(const r in e)kn(XS,r)||(o[r]=e[r]);return X(e.composedPath)&&(o.composedPath=()=>e.composedPath()),X(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),X(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},w0=(e,t,o,r)=>{const c=T2(t,r);return c.type=e,jt(c.target)&&(c.target=c.srcElement??o),QS(t)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=He,se(t.preventDefault)&&t.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=He,se(t.stopPropagation)&&t.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=He,c.stopPropagation()},E2(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?He:ye,c.isPropagationStopped=c.cancelBubble===!0?He:ye,c.isImmediatePropagationStopped=ye)),c},E0="mce-data-",T0=/^(?:mouse|contextmenu)|click/,Bu=(e,t,o,r)=>{e.addEventListener(t,o,r||!1)},S1=(e,t,o,r)=>{e.removeEventListener(t,o,r||!1)},zh=e=>X(e)&&T0.test(e.type),Sg=(e,t)=>{const o=w0(e.type,e,document,t);if(zh(e)&&Gn(e.pageX)&&!Gn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},JS=(e,t,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){t(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{S1(e,"DOMContentLoaded",f),S1(e,"load",f),o.domLoaded||(o.domLoaded=!0,t(c)),e=null};u()?f():Bu(e,"DOMContentLoaded",f),o.domLoaded||Bu(e,"load",f)};class Vh{static Event=new Vh;domLoaded=!1;events={};expando;hasFocusIn;count=1;constructor(){this.expando=E0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,o,r,c){const u=this;let f;const b=window,v=M=>{u.executeHandlers(Sg(M||b.event),S)};if(!t||tt(t)||zn(t))return r;let S;t[u.expando]?S=t[u.expando]:(S=u.count++,t[u.expando]=S,u.events[S]={}),c=c||t;const O=o.split(" ");let R=O.length;for(;R--;){let M=O[R],H=v,J=!1,W=!1;if(M==="DOMContentLoaded"&&(M="ready"),u.domLoaded&&M==="ready"&&t.readyState==="complete"){r.call(c,Sg({type:M}));continue}!u.hasFocusIn&&(M==="focusin"||M==="focusout")&&(J=!0,W=M==="focusin"?"focus":"blur",H=Q=>{const ge=Sg(Q||b.event);ge.type=ge.type==="focus"?"focusin":"focusout",u.executeHandlers(ge,S)}),f=u.events[S][M],f?M==="ready"&&u.domLoaded?r(Sg({type:M})):f.push({func:r,scope:c}):(u.events[S][M]=f=[{func:r,scope:c}],f.fakeName=W,f.capture=J,f.nativeHandler=H,M==="ready"?JS(t,H,u):Bu(t,W||M,H,J))}return t=f=null,r}unbind(t,o,r){if(!t||tt(t)||zn(t))return this;const c=t[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],S=u[v];if(S){if(r){let O=S.length;for(;O--;)if(S[O].func===r){const R=S.nativeHandler,M=S.fakeName,H=S.capture,J=S.slice(0,O).concat(S.slice(O+1));J.nativeHandler=R,J.fakeName=M,J.capture=H,u[v]=J}}(!r||S.length===0)&&(delete u[v],S1(t,S.fakeName||v,S.nativeHandler,S.capture))}}}else Un(u,(f,b)=>{S1(t,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(kn(u,f))return this;delete this.events[c];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,o,r){return this.dispatch(t,o,r)}dispatch(t,o,r){if(!t||tt(t)||zn(t))return this;const c=Sg({type:o,target:t},r);do{const u=t[this.expando];u&&this.executeHandlers(c,u),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!c.isPropagationStopped());return this}clean(t){if(!t||tt(t)||zn(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const o=t.getElementsByTagName("*");let r=o.length;for(;r--;)t=o[r],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,o){const r=this.events[o],c=r&&r[t.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}const Ec=Je.each,Xk=Je.grep,k2="data-mce-style",A2=Je.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),k0=(e,t,o)=>{jt(o)||o===""?rr(e,t):ws(e,t,o)},ew=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),wg=(e,t)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;t&&tt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},tw=(e,t)=>{const o=hs(t,"style"),r=e.serialize(e.parse(o),Hn(t));k0(t,k2,r)},w1=(e,t)=>os(e)?kn(A2,t)?e+"":e+"px":e,_2=(e,t,o)=>{const r=ew(t);jt(o)||o===""?vh(e,r):xa(e,r,w1(o,r))},nw=(e,t,o)=>{const r=t.keep_values,c={set:(f,b,v)=>{const S=te.fromDom(f);se(t.url_converter)&&X(b)&&(b=t.url_converter.call(t.url_converter_scope||o(),String(b),v,f));const O="data-mce-"+v;k0(S,O,b),k0(S,v,b)},get:(f,b)=>{const v=te.fromDom(f);return hs(v,"data-mce-"+b)||hs(v,b)}},u={style:{set:(f,b)=>{const v=te.fromDom(f);r&&k0(v,k2,b),rr(v,"style"),U(b)&&bc(v,e.parse(b))},get:f=>{const b=te.fromDom(f),v=hs(b,k2)||hs(b,"style");return e.serialize(e.parse(v),Hn(b))}}};return r&&(u.href=u.src=c),u},lo=(e,t={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=p2.forElement(te.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:Se=>{const ke=t.crossOrigin;if(se(ke))return ke(Se,"stylesheet")}}),S=[],O=t.schema?t.schema:Ea({}),R=fm({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),M=t.ownEvents?new Vh:Vh.Event,H=O.getBlockElements(),J=Se=>U(Se)?kn(H,Se):pt(Se)&&(kn(H,Se.nodeName)||Ks(O,Se)),W=Se=>Se&&e&&U(Se)?e.getElementById(Se):Se,Q=Se=>{const ke=W(Se);return X(ke)?te.fromDom(ke):null},ge=(Se,ke,Dt="")=>{let mt;const Tn=Q(Se);if(X(Tn)&&Fs(Tn)){const No=f7[ke];No&&No.get?mt=No.get(Tn.dom,ke):mt=hs(Tn,ke)}return X(mt)?mt:Dt},be=Se=>{const ke=W(Se);return jt(ke)?[]:ke.attributes},ve=(Se,ke,Dt)=>{sn(Se,mt=>{if(pt(mt)){const Tn=te.fromDom(mt),No=Dt===""?null:Dt,Gr=hs(Tn,ke),dh=f7[ke];dh&&dh.set?dh.set(Tn.dom,No,ke):k0(Tn,ke,No),Gr!==No&&t.onSetAttrib&&t.onSetAttrib({attrElm:Tn.dom,attrName:ke,attrValue:No})}})},Be=(Se,ke)=>Se.cloneNode(ke),je=()=>t.root_element||e.body,xt=Se=>{const ke=dl(Se);return{x:ke.x,y:ke.y,w:ke.width,h:ke.height}},Kt=(Se,ke)=>Lo(e.body,W(Se),ke),Me=(Se,ke,Dt)=>{sn(Se,mt=>{const Tn=te.fromDom(mt);_2(Tn,ke,Dt),t.update_styles&&tw(R,Tn)})},Te=(Se,ke)=>{sn(Se,Dt=>{const mt=te.fromDom(Dt);Un(ke,(Tn,No)=>{_2(mt,No,Tn)}),t.update_styles&&tw(R,mt)})},$e=(Se,ke,Dt)=>{const mt=W(Se);if(!(jt(mt)||!Vc(mt)&&!Hk(mt)))return Dt?Hs(te.fromDom(mt),ew(ke)):(ke=ke.replace(/-(\D)/g,(Tn,No)=>No.toUpperCase()),ke==="float"&&(ke="cssFloat"),mt.style?mt.style[ke]:void 0)},yt=Se=>{const ke=W(Se);if(!ke)return{w:0,h:0};let Dt=$e(ke,"width"),mt=$e(ke,"height");return(!Dt||Dt.indexOf("px")===-1)&&(Dt="0"),(!mt||mt.indexOf("px")===-1)&&(mt="0"),{w:parseInt(Dt,10)||ke.offsetWidth||ke.clientWidth,h:parseInt(mt,10)||ke.offsetHeight||ke.clientHeight}},Sn=Se=>{const ke=W(Se),Dt=Kt(ke),mt=yt(ke);return{x:Dt.x,y:Dt.y,w:mt.w,h:mt.h}},wn=(Se,ke)=>{if(!Se)return!1;const Dt=Ot(Se)?Se:[Se];return po(Dt,mt=>Fc(te.fromDom(mt),ke))},uo=(Se,ke,Dt,mt)=>{const Tn=[];let No=W(Se);mt=mt===void 0;const Gr=Dt||(je().nodeName!=="BODY"?je().parentNode:null);if(U(ke))if(ke==="*")ke=pt;else{const dh=ke;ke=Qf=>wn(Qf,dh)}for(;No&&!(No===Gr||jt(No.nodeType)||lm(No)||_h(No));){if(!ke||ke(No))if(mt)Tn.push(No);else return[No];No=No.parentNode}return mt?Tn:null},qo=(Se,ke,Dt)=>{const mt=uo(Se,ke,Dt,!1);return mt&&mt.length>0?mt[0]:null},Cs=(Se,ke,Dt)=>{let mt=ke;if(Se){U(ke)&&(mt=Tn=>wn(Tn,ke));for(let Tn=Se[Dt];Tn;Tn=Tn[Dt])if(se(mt)&&mt(Tn))return Tn}return null},Bs=(Se,ke)=>Cs(Se,ke,"nextSibling"),Na=(Se,ke)=>Cs(Se,ke,"previousSibling"),_i=Se=>se(Se.querySelectorAll),At=(Se,ke)=>{const Dt=W(ke)??t.root_element??e;return _i(Dt)?as(Dt.querySelectorAll(Se)):[]},sn=function(Se,ke,Dt){const mt=Dt??this;if(Ot(Se)){const Tn=[];return Ec(Se,(No,Gr)=>{const dh=W(No);dh&&Tn.push(ke.call(mt,dh,Gr))}),Tn}else{const Tn=W(Se);return Tn?ke.call(mt,Tn):!1}},Ho=(Se,ke)=>{sn(Se,Dt=>{Un(ke,(mt,Tn)=>{ve(Dt,Tn,mt)})})},Ao=(Se,ke)=>{sn(Se,Dt=>{const mt=te.fromDom(Dt);_u(mt,ke)})},qa=(Se,ke,Dt,mt,Tn)=>sn(Se,No=>{const Gr=U(ke)?e.createElement(ke):ke;return X(Dt)&&Ho(Gr,Dt),mt&&(!U(mt)&&mt.nodeType?Gr.appendChild(mt):U(mt)&&Ao(Gr,mt)),Tn?Gr:No.appendChild(Gr)}),Le=(Se,ke,Dt)=>qa(e.createElement(Se),Se,ke,Dt,!0),dt=hl.decode,$t=hl.encodeAllRaw,to=(Se,ke,Dt="")=>{let mt="<"+Se;for(const Tn in ke)Go(ke,Tn)&&(mt+=" "+Tn+'="'+$t(ke[Tn])+'"');return ni(Dt)&&kn(O.getVoidElements(),Se)?mt+" />":mt+">"+Dt+"</"+Se+">"},Zn=Se=>{const ke=e.createElement("div"),Dt=e.createDocumentFragment();Dt.appendChild(ke),Se&&(ke.innerHTML=Se);let mt;for(;mt=ke.firstChild;)Dt.appendChild(mt);return Dt.removeChild(ke),Dt},Jo=(Se,ke)=>sn(Se,Dt=>{const mt=te.fromDom(Dt);return ke&&xe(Ds(mt),Tn=>{Eo(Tn)&&Tn.dom.length===0?Ko(Tn):la(mt,Tn)}),Ko(mt),mt.dom}),Oi=Se=>sn(Se,ke=>{const Dt=ke.attributes;for(let mt=Dt.length-1;mt>=0;mt--)ke.removeAttributeNode(Dt.item(mt))}),Yd=Se=>R.parse(Se),sd=(Se,ke)=>R.serialize(Se,ke),pu=Se=>{if(Vy!==lo.DOM&&e===document){if(o[Se])return;o[Se]=!0}let ke=e.getElementById("mceDefaultStyles");if(!ke){ke=e.createElement("style"),ke.id="mceDefaultStyles",ke.type="text/css";const Dt=e.head;Dt.firstChild?Dt.insertBefore(ke,Dt.firstChild):Dt.appendChild(ke)}ke.styleSheet?ke.styleSheet.cssText+=Se:ke.appendChild(e.createTextNode(Se))},Ip=Se=>{Se||(Se=""),xe(Se.split(","),ke=>{c[ke]=!0,v.load(ke).catch(St)})},Jc=(Se,ke,Dt)=>{sn(Se,mt=>{if(pt(mt)){const Tn=te.fromDom(mt),No=ke.split(" ");xe(No,Gr=>{X(Dt)?(Dt?vc:lr)(Tn,Gr):Hr(Tn,Gr)})}})},Ql=(Se,ke)=>{Jc(Se,ke,!0)},ih=(Se,ke)=>{Jc(Se,ke,!1)},Hy=(Se,ke)=>{const Dt=Q(Se),mt=ke.split(" ");return X(Dt)&&Ka(mt,Tn=>Ch(Dt,Tn))},Tk=Se=>{sn(Se,ke=>vh(te.fromDom(ke),"display"))},bn=Se=>{sn(Se,ke=>xa(te.fromDom(ke),"display","none"))},ho=Se=>{const ke=Q(Se);return X(ke)&&zo(ar(ke,"display"),"none")},Or=Se=>(Se||"mce_")+u++,As=Se=>{const ke=Q(Se);return X(ke)?pt(ke.dom)?ke.dom.outerHTML:Qy(ke):""},ns=(Se,ke)=>{sn(Se,Dt=>{pt(Dt)&&(Dt.outerHTML=ke)})},xr=(Se,ke)=>{const Dt=W(ke);return sn(Se,mt=>{const Tn=Dt?.parentNode,No=Dt?.nextSibling;return Tn&&(No?Tn.insertBefore(mt,No):Tn.appendChild(mt)),mt})},Di=(Se,ke,Dt)=>sn(ke,mt=>{const Tn=Ot(ke)?Se.cloneNode(!0):Se;return Dt&&Ec(Xk(mt.childNodes),No=>{Tn.appendChild(No)}),mt.parentNode?.replaceChild(Tn,mt),mt}),El=(Se,ke)=>{if(Se.nodeName!==ke.toUpperCase()){const Dt=Le(ke);return Ec(be(Se),mt=>{ve(Dt,mt.nodeName,ge(Se,mt.nodeName))}),Di(Dt,Se,!0),Dt}else return Se},rd=(Se,ke)=>{let Dt=Se;for(;Dt;){let mt=ke;for(;mt&&Dt!==mt;)mt=mt.parentNode;if(Dt===mt)break;Dt=Dt.parentNode}return!Dt&&Se.ownerDocument?Se.ownerDocument.documentElement:Dt},uh=(Se,ke,Dt)=>On(ke)?on(O,Se,{...Dt,isContent:Tn=>{const No=Tn.nodeName.toLowerCase();return!!ke[No]}}):on(O,Se,Dt),kk=()=>e.createRange(),Ak=(Se,ke,Dt)=>{let mt=kk(),Tn,No;if(Se&&ke&&Se.parentNode&&ke.parentNode){const Gr=Se.parentNode;return mt.setStart(Gr,wg(Se)),mt.setEnd(ke.parentNode,wg(ke)),Tn=mt.extractContents(),mt=kk(),mt.setStart(ke.parentNode,wg(ke)+1),mt.setEnd(Gr,wg(Se)+1),No=mt.extractContents(),Gr.insertBefore(b1(Vy,Tn,O),Se),Dt?Gr.insertBefore(Dt,Se):Gr.insertBefore(ke,Se),Gr.insertBefore(b1(Vy,No,O),Se),Jo(Se),Dt||ke}else return},DS=(Se,ke,Dt,mt)=>{if(Ot(Se)){let Tn=Se.length;const No=[];for(;Tn--;)No[Tn]=DS(Se[Tn],ke,Dt,mt);return No}else return t.collect&&(Se===e||Se===r)&&S.push([Se,ke,Dt,mt]),M.bind(Se,ke,Dt,mt||Vy)},Xf=(Se,ke,Dt)=>{if(Ot(Se)){let mt=Se.length;const Tn=[];for(;mt--;)Tn[mt]=Xf(Se[mt],ke,Dt);return Tn}else{if(S.length>0&&(Se===e||Se===r)){let mt=S.length;for(;mt--;){const[Tn,No,Gr]=S[mt];Se===Tn&&(!ke||ke===No)&&(!Dt||Dt===Gr)&&M.unbind(Tn,No,Gr)}}return M.unbind(Se,ke,Dt)}},zy=(Se,ke,Dt)=>M.dispatch(Se,ke,Dt),qN=(Se,ke,Dt)=>M.dispatch(Se,ke,Dt),_k=Se=>{if(Se&&Vc(Se)){const ke=Se.getAttribute("data-mce-contenteditable");return ke&&ke!=="inherit"?ke:Se.contentEditable!=="inherit"?Se.contentEditable:null}else return null},Vy={doc:e,settings:t,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:S,styles:R,schema:O,events:M,isBlock:J,root:null,clone:Be,getRoot:je,getViewPort:xt,getRect:Sn,getSize:yt,getParent:qo,getParents:uo,get:W,getNext:Bs,getPrev:Na,select:At,is:wn,add:qa,create:Le,createHTML:to,createFragment:Zn,remove:Jo,setStyle:Me,getStyle:$e,setStyles:Te,removeAllAttribs:Oi,setAttrib:ve,setAttribs:Ho,getAttrib:ge,getPos:Kt,parseStyle:Yd,serializeStyle:sd,addStyle:pu,loadCSS:Ip,addClass:Ql,removeClass:ih,hasClass:Hy,toggleClass:Jc,show:Tk,hide:bn,isHidden:ho,uniqueId:Or,setHTML:Ao,getOuterHTML:As,setOuterHTML:ns,decode:dt,encode:$t,insertAfter:xr,replace:Di,rename:El,findCommonAncestor:rd,run:sn,getAttribs:be,isEmpty:uh,createRng:kk,nodeIndex:wg,split:Ak,bind:DS,unbind:Xf,fire:qN,dispatch:zy,getContentEditable:_k,getContentEditableParent:Se=>{const ke=je();let Dt=null;for(let mt=Se;mt&&mt!==ke&&(Dt=_k(mt),Dt===null);mt=mt.parentNode);return Dt},isEditable:Se=>{if(X(Se)){const ke=pt(Se)?Se:Se.parentElement;return X(ke)&&Vc(ke)&&Hl(te.fromDom(ke))}else return!1},destroy:()=>{if(S.length>0){let Se=S.length;for(;Se--;){const[ke,Dt,mt]=S[Se];M.unbind(ke,Dt,mt)}}Un(c,(Se,ke)=>{v.unload(ke),delete c[ke]})},isChildOf:(Se,ke)=>Se===ke||ke.contains(Se),dumpRng:Se=>"startContainer: "+Se.startContainer.nodeName+", startOffset: "+Se.startOffset+", endContainer: "+Se.endContainer.nodeName+", endOffset: "+Se.endOffset},f7=nw(R,t,st(Vy));return Vy};lo.DOM=lo(document),lo.nodeIndex=wg;const A0=lo.DOM,yo=0,pl=1,hf=2,E1=3;class Ro{static ScriptLoader=new Ro;settings;states={};queue=[];scriptLoadedCallbacks={};queueLoadedCallbacks=[];loading=!1;constructor(t={}){this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise((o,r)=>{const c=A0,u=document;let f;const b=()=>{c.remove(O),f&&(f.onerror=f.onload=f=null)},v=()=>{b(),o()},S=()=>{b(),r("Failed to load script: "+t)},O=c.uniqueId();f=u.createElement("script"),f.id=O,f.type="text/javascript",f.src=Je._addCacheSuffix(t),this.settings.referrerPolicy&&c.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy);const R=this.settings.crossOrigin;if(se(R)){const M=R(t);M!==void 0&&c.setAttrib(f,"crossorigin",M)}f.onload=v,f.onerror=S,(u.head||u.body).appendChild(f)})}isDone(t){return this.states[t]===hf}markDone(t){this.states[t]=hf}add(t){const o=this;return o.queue.push(t),o.states[t]===void 0&&(o.states[t]=yo),new Promise((c,u)=>{o.scriptLoadedCallbacks[t]||(o.scriptLoadedCallbacks[t]=[]),o.scriptLoadedCallbacks[t].push({resolve:c,reject:u})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const o=this,r=(v,S)=>{Zo(o.scriptLoadedCallbacks,S).each(O=>{xe(O,R=>R[v](S))}),delete o.scriptLoadedCallbacks[S]},c=v=>{const S=ze(v,O=>O.status==="rejected");return S.length>0?Promise.reject(xo(S,({reason:O})=>Ot(O)?O:[O])):Promise.resolve()},u=v=>Promise.allSettled(en(v,S=>o.states[S]===hf?(r("resolve",S),Promise.resolve()):o.states[S]===E1?(r("reject",S),Promise.reject(S)):(o.states[S]=pl,o.loadScript(S).then(()=>{o.states[S]=hf,r("resolve",S);const O=o.queue;return O.length>0?(o.queue=[],u(O).then(c)):Promise.resolve()},()=>(o.states[S]=E1,r("reject",S),Promise.reject(S)))))),f=v=>(o.loading=!0,u(v).then(S=>{o.loading=!1;const O=o.queueLoadedCallbacks.shift();return P.from(O).each(Fn),c(S)})),b=Gm(t);return o.loading?new Promise((v,S)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,S)})}):f(b)}getScriptAttributes(t){const o={};this.settings.referrerPolicy&&(o.referrerpolicy=this.settings.referrerPolicy);const r=this.settings.crossOrigin;if(se(r)){const c=r(t);U(c)&&(o.crossorigin=c)}return o}}const ow=(e,t)=>{const o=e.indexOf(t);return o!==-1&&e.indexOf(t,o+1)>o},sw=e=>Ye(e)&&kn(e,"raw"),Qk=e=>Ot(e)&&e.length>1,Eg={},T1=Wt("en"),rw=()=>Zo(Eg,T1.get()),bl={getData:()=>ic(Eg,e=>({...e})),setCode:e=>{e&&T1.set(e)},getCode:()=>T1.get(),add:(e,t)=>{let o=Eg[e];o||(Eg[e]=o={});const r=en(Vt(t),c=>c.toLowerCase());Un(t,(c,u)=>{const f=u.toLowerCase();f!==u&&ow(r,f)?(kn(t,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const t=rw().getOr({}),o=b=>se(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return kn(t,v)?o(t[v]):Zo(t,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",eg);if(r(e))return"";if(sw(e))return f(o(e.raw));if(Qk(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(S,O)=>kn(b,O)?o(b[O]):S);return f(u(v))}return f(u(c(e)))},isRtl:()=>rw().bind(e=>Zo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>kn(Eg,e)},Ur=()=>{const e=[],t={},o={},r=[],c=(W,Q)=>{const ge=ze(r,be=>be.name===W&&be.state===Q);xe(ge,be=>be.resolve())},u=W=>kn(t,W),f=W=>kn(o,W),b=W=>{if(o[W])return o[W].instance},v=(W,Q)=>{const ge=bl.getCode(),be=","+(Q||"")+",";!ge||Q&&be.indexOf(","+ge+",")===-1||Ro.ScriptLoader.add(t[W]+"/langs/"+ge+".js")},S=(W,Q)=>{Ur.languageLoad!==!1&&(u(W)?v(W,Q):J(W,"loaded").then(()=>v(W,Q)))},O=(W,Q)=>(e.push(Q),o[W]={instance:Q},c(W,"added"),Q),R=W=>{delete t[W],delete o[W]},M=(W,Q)=>U(Q)?U(W)?{prefix:"",resource:Q,suffix:""}:{prefix:W.prefix,resource:Q,suffix:W.suffix}:Q,H=(W,Q)=>{if(t[W])return Promise.resolve();let ge=U(Q)?Q:Q.prefix+Q.resource+Q.suffix;ge.indexOf("/")!==0&&ge.indexOf("://")===-1&&(ge=Ur.baseURL+"/"+ge),t[W]=ge.substring(0,ge.lastIndexOf("/"));const be=()=>(c(W,"loaded"),Promise.resolve());return o[W]?be():Ro.ScriptLoader.add(ge).then(be)},J=(W,Q="added")=>Q==="added"&&f(W)||Q==="loaded"&&u(W)?Promise.resolve():new Promise(ge=>{r.push({name:W,state:Q,resolve:ge})});return{items:e,urls:t,lookup:o,get:b,requireLangPack:S,add:O,remove:R,createUrl:M,load:H,waitFor:J}};Ur.languageLoad=!0,Ur.baseURL="",Ur.PluginManager=Ur(),Ur.ThemeManager=Ur(),Ur.ModelManager=Ur();const pf=st("mce-annotation"),Ji=st("data-mce-annotation"),wd=st("data-mce-annotation-uid"),Uh=st("data-mce-annotation-active"),jh=st("data-mce-annotation-classes"),_0=st("data-mce-annotation-attrs"),o3=e=>t=>Qn(t,e),O0=(e,t)=>{const o=e.selection.getRng(),r=te.fromDom(o.startContainer),c=te.fromDom(e.getBody()),u=t.fold(()=>"."+pf(),v=>`[${Ji()}="${v}"]`),f=$l(r,o.startOffset).getOr(r);return ua(f,u,o3(c)).bind(v=>ul(v,`${wd()}`).bind(S=>ul(v,`${Ji()}`).map(O=>{const R=k1(e,S);return{uid:S,name:O,elements:R}})))},O2=e=>Fs(e)&&Ch(e,pf()),D2=(e,t)=>xs(e,"data-mce-bogus")||rs(e,'[data-mce-bogus="all"]',o3(t)),k1=(e,t)=>{const o=te.fromDom(e.getBody()),r=Ne(o,`[${wd()}="${t}"]`);return ze(r,c=>!D2(c,o))},gm=(e,t)=>{const o=te.fromDom(e.getBody()),r=Ne(o,`[${Ji()}="${t}"]`),c={};return xe(r,u=>{if(!D2(u,o)){const f=hs(u,wd()),b=Zo(c,f).getOr([]);c[f]=b.concat([u])}}),c},D0=(e,t)=>{const o=Wt({}),r=()=>({listeners:[],previous:Pc()}),c=(R,M)=>{u(R,H=>(M(H),H))},u=(R,M)=>{const H=o.get(),J=Zo(H,R).getOrThunk(r),W=M(J);H[R]=W,o.set(H)},f=(R,M,H)=>{c(R,J=>{xe(J.listeners,W=>W(!0,R,{uid:M,nodes:en(H,Q=>Q.dom)}))})},b=R=>{c(R,M=>{xe(M.listeners,H=>H(!1,R))})},v=(R,M)=>{xe(k1(e,R),H=>{M?ws(H,Uh(),"true"):rr(H,Uh())})},S=oi(()=>{const R=kl(t.getNames());xe(R,M=>{u(M,H=>{const J=H.previous.get();return O0(e,P.some(M)).fold(()=>{J.each(W=>{b(M),H.previous.clear(),v(W,!1)})},({uid:W,name:Q,elements:ge})=>{zo(J,W)||(J.each(be=>v(be,!1)),f(Q,W,ge),H.previous.set(W),v(W,!0))}),{previous:H.previous,listeners:H.listeners}})})},30);return e.on("remove",()=>{S.cancel()}),e.on("NodeChange",()=>{S.throttle()}),{addListener:(R,M)=>{u(R,H=>({previous:H.previous,listeners:H.listeners.concat([M])}))}}},A1=(e,t)=>{const o=Ji(),r=u=>P.from(u.attr(o)).bind(t.lookup),c=u=>{u.attr(wd(),null),u.attr(Ji(),null),u.attr(Uh(),null);const f=P.from(u.attr(_0())).map(O=>O.split(",")).getOr([]),b=P.from(u.attr(jh())).map(O=>O.split(",")).getOr([]);xe(f,O=>u.attr(O,null));const v=u.attr("class")?.split(" ")??[],S=$s(v,[pf()].concat(b));u.attr("class",S.length>0?S.join(" "):null),u.attr(jh(),null),u.attr(_0(),null)};e.serializer.addTempAttr(Uh()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},R0=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>Zo(e,c).map(u=>u.settings),getNames:()=>Vt(e)}},lw=(e,t,o=ye)=>{const r=new er(e,t),c=u=>{let f;do f=r[u]();while(f&&!tt(f)&&!o(f));return P.from(f).filter(tt)};return{current:()=>P.from(r.current()).filter(tt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Ed=(e,t)=>{const o=t||(f=>e.isBlock(f)||Vs(f)||Ts(f)),r=(f,b,v,S)=>{if(tt(f)){const O=S(f,b,f.data);if(O!==-1)return P.some({container:f,offset:O})}return v().bind(O=>r(O.container,O.offset,v,S))};return{backwards:(f,b,v,S)=>{const O=lw(f,S??e.getRoot(),o);return r(f,b,()=>O.prev().map(R=>({container:R,offset:R.length})),v).getOrNull()},forwards:(f,b,v,S)=>{const O=lw(f,S??e.getRoot(),o);return r(f,b,()=>O.next().map(R=>({container:R,offset:0})),v).getOrNull()}}},N0=["td","th"],iw=["thead","tbody","tfoot"],s3=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],r3=["li","dd","dt"],uw=["ul","ol","dl"],R2=["pre","script","textarea","style"],Td=e=>{let t;return o=>(t=t||yu(e,He),kn(t,Hn(o)))},dw=e=>Hn(e)==="table",eu=e=>Fs(e)&&Hn(e)==="br",oc=Td(s3),Si=Td(uw),Tc=Td(r3),M0=Td(iw),kg=Td(N0),P0=Td(R2),N2=e=>{const t=[];let o=e.dom;for(;o;)t.push(te.fromDom(o)),o=o.lastChild;return t},a3=e=>{const t=Ne(e,"br"),o=ze(N2(e).slice(-1),eu);t.length===o.length&&xe(o,Ko)},bf=()=>{const e=te.fromTag("br");return ws(e,"data-mce-bogus","1"),e},vf=e=>{Fl(e),bo(e,bf())},M2=(e,t)=>{sr(e).each(o=>{al(o).each(r=>{t.isBlock(Hn(e))&&eu(o)&&t.isBlock(Hn(r))&&Ko(o)})})},jr=Bc,_1=Qa,qc=$c,B0=e=>e.insertContent(jr,{preserve_zwsp:!0}),es=pt,$u=tt,hm=e=>($u(e)&&(e=e.parentNode),es(e)&&e.hasAttribute("data-mce-caret")),Iu=e=>$u(e)&&_1(e.data),Wl=e=>hm(e)||Iu(e),$0=e=>e.firstChild!==e.lastChild||!Vs(e.firstChild),mw=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(jr),c=e.parentNode;if(t){const u=e.previousSibling;if($u(u)){if(Wl(u))return u;if(yf(u))return u.splitText(u.data.length-1)}c?.insertBefore(r,e)}else{const u=e.nextSibling;if($u(u)){if(Wl(u))return u;if(vl(u))return u.splitText(1),u}e.nextSibling?c?.insertBefore(r,e.nextSibling):c?.appendChild(r)}return r},pm=e=>{const t=e.container();return tt(t)?t.data.charAt(e.offset())===jr||e.isAtStart()&&Iu(t.previousSibling):!1},Ag=e=>{const t=e.container();return tt(t)?t.data.charAt(e.offset()-1)===jr||e.isAtEnd()&&Iu(t.nextSibling):!1},P2=(e,t,o)=>{const c=(t.ownerDocument??document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(bf().dom);const u=t.parentNode;return o?u?.insertBefore(c,t):t.nextSibling?u?.insertBefore(c,t.nextSibling):u?.appendChild(c),c},vl=e=>$u(e)&&e.data[0]===jr,yf=e=>$u(e)&&e.data[e.data.length-1]===jr,Ta=e=>{const t=e.getElementsByTagName("br"),o=t[t.length-1];uf(o)&&o.parentNode?.removeChild(o)},tu=e=>e&&e.hasAttribute("data-mce-caret")?(Ta(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,I0=e=>hm(e.startContainer),_g=Math.round,Cf=e=>e?{left:_g(e.left),top:_g(e.top),bottom:_g(e.bottom),right:_g(e.right),width:_g(e.width),height:_g(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},O1=(e,t)=>(e=Cf(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),B2=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,F0=(e,t,o)=>e>=0&&e<=Math.min(t.height,o.height)/2,Og=(e,t)=>{const o=Math.min(t.height/2,e.height/2);return e.bottom-o<t.top?!0:e.top>t.bottom?!1:F0(t.top-e.bottom,e,t)},xf=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:F0(t.bottom-e.top,e,t),$2=(e,t,o)=>t>=e.left&&t<=e.right&&o>=e.top&&o<=e.bottom,D1=e=>Fo(e,(t,o)=>t.fold(()=>P.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return P.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),P.none()),I2=(e,t,o)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(o-c)*(o-c))},fw=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Wr=e=>{const t=e.startContainer,o=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===o+1?t.childNodes[o]:null},Sf=(e,t)=>{if(pt(e)&&e.hasChildNodes()){const o=e.childNodes,r=cd(t,0,o.length-1);return o[r]}else return e},wf=(e,t)=>{if(!(t<0&&pt(e)&&e.hasChildNodes()))return Sf(e,t)},gw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),L0=e=>U(e)&&e.charCodeAt(0)>=768&&gw.test(e),F2=(...e)=>t=>{for(let o=0;o<e.length;o++)if(e[o](t))return!0;return!1},R1=(...e)=>t=>{for(let o=0;o<e.length;o++)if(!e[o](t))return!1;return!0},H0=ml,hw=Ts,c3=Vs,N1=tt,Pr=pi(["script","style","textarea"]),Tr=pi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),ka=pi(["table"]),da=Wl,Ns=e=>da(e)?!1:N1(e)?!Pr(e.parentNode):Tr(e)||c3(e)||ka(e)||Wh(e),kr=e=>pt(e)&&e.getAttribute("unselectable")==="true",Wh=e=>!kr(e)&&hw(e),L2=(e,t)=>{for(let o=e.parentNode;o&&o!==t;o=o.parentNode){if(Wh(o))return!1;if(H0(o))return!0}return!0},H2=e=>Wh(e)?!Fo(as(e.getElementsByTagName("*")),(t,o)=>t||H0(o),!1):!1,pw=e=>Tr(e)||H2(e),z0=(e,t)=>Ns(e)&&L2(e,t),z2=pt,V2=Ns,V0=m0("display","block table"),U2=m0("float","left right"),Zh=R1(z2,V2,bt(U2)),bw=bt(m0("white-space","pre pre-line pre-wrap")),M1=tt,Fu=Vs,U0=lo.nodeIndex,P1=wf,Gh=e=>e?e.createRange():lo.DOM.createRng(),Dg=e=>U(e)&&/[\r\n\t ]/.test(e),B1=e=>!!e.setStart&&!!e.setEnd,j0=e=>{const t=e.startContainer,o=e.startOffset;if(Dg(e.toString())&&bw(t.parentNode)&&tt(t)){const r=t.data;if(Dg(r[o-1])||Dg(r[o+1]))return!0}return!1},$1=e=>{const t=e.ownerDocument,o=Gh(t),r=t.createTextNode(Is),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=Cf(o.getBoundingClientRect());return c.removeChild(r),u},W0=e=>{const t=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(t===o&&tt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),kc(u)}else return null},Rg=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,kc=e=>{let t;const o=e.getClientRects();return o.length>0?t=Cf(o[0]):t=Cf(e.getBoundingClientRect()),!B1(e)&&Fu(e)&&Rg(t)?$1(e):Rg(t)&&B1(e)?W0(e)??t:t},Ha=(e,t)=>{const o=O1(e,t);return o.width=1,o.right=o.left+1,o},qh=e=>{const t=[],o=f=>{f.height!==0&&(t.length>0&&B2(f,t[t.length-1])||t.push(f))},r=(f,b)=>{const v=Gh(f.ownerDocument);if(b<f.data.length){if(L0(f.data[b]))return;if(L0(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!j0(v))){o(Ha(kc(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),j0(v)||o(Ha(kc(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),j0(v)||o(Ha(kc(v),!0)))},c=e.container(),u=e.offset();if(M1(c))return r(c,u),t;if(z2(c))if(e.isAtEnd()){const f=P1(c,u);M1(f)&&r(f,f.data.length),Zh(f)&&!Fu(f)&&o(Ha(kc(f),!1))}else{const f=P1(c,u);if(M1(f)&&r(f,0),Zh(f)&&e.isAtEnd())return o(Ha(kc(f),!1)),t;const b=P1(e.container(),e.offset()-1);Zh(b)&&!Fu(b)&&(V0(b)||V0(f)||!Zh(f))&&o(Ha(kc(b),!1)),Zh(f)&&o(Ha(kc(f),!0))}return t},Re=(e,t,o)=>{const r=()=>(M1(e),t===0),c=()=>M1(e)?t>=e.data.length:t>=e.childNodes.length,u=()=>{const O=Gh(e.ownerDocument);return O.setStart(e,t),O.setEnd(e,t),O},f=()=>(o||(o=qh(Re(e,t))),o),b=()=>f().length>0,v=O=>O&&e===O.container()&&t===O.offset(),S=O=>P1(e,O?t-1:t);return{container:st(e),offset:st(t),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:S}};Re.fromRangeStart=e=>Re(e.startContainer,e.startOffset),Re.fromRangeEnd=e=>Re(e.endContainer,e.endOffset),Re.after=e=>Re(e.parentNode,U0(e)+1),Re.before=e=>Re(e.parentNode,U0(e)),Re.isAbove=(e,t)=>Qs(Ws(t.getClientRects()),mr(e.getClientRects()),Og).getOr(!1),Re.isBelow=(e,t)=>Qs(mr(t.getClientRects()),Ws(e.getClientRects()),xf).getOr(!1),Re.isAtStart=e=>e?e.isAtStart():!1,Re.isAtEnd=e=>e?e.isAtEnd():!1,Re.isTextPosition=e=>e?tt(e.container()):!1,Re.isElementPosition=e=>!Re.isTextPosition(e);const I1=(e,t)=>{tt(t)&&t.data.length===0&&e.remove(t)},l3=(e,t,o)=>{t.insertNode(o),I1(e,o.previousSibling),I1(e,o.nextSibling)},Ac=(e,t,o)=>{const r=P.from(o.firstChild),c=P.from(o.lastChild);t.insertNode(o),r.each(u=>I1(e,u.previousSibling)),c.each(u=>I1(e,u.nextSibling))},Kh=(e,t,o)=>{_h(o)?Ac(e,t,o):l3(e,t,o)},Lu=tt,j2=uf,W2=lo.nodeIndex,Ng=e=>{const t=e.parentNode;return j2(t)?Ng(t):t},F1=e=>e?Fi(e.childNodes,(t,o)=>(j2(o)&&o.nodeName!=="BR"?t=t.concat(F1(o)):t.push(o),t),[]):[],bm=(e,t)=>{let o=e;for(;(o=o.previousSibling)&&Lu(o);)t+=o.data.length;return t},Z0=e=>t=>e===t,i3=e=>{let t,o;t=F1(Ng(e)),o=tm(t,Z0(e),e),t=t.slice(0,o+1);const r=Fi(t,(c,u,f)=>(Lu(u)&&Lu(t[f-1])&&c++,c),0);return t=Eu(t,pi([e.nodeName])),o=tm(t,Z0(e),e),o-r},za=e=>(Lu(e)?"text()":e.nodeName.toLowerCase())+"["+i3(e)+"]",Hu=(e,t,o)=>{const r=[];for(let c=t.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},yl=(e,t)=>{let o=[],r=t.container(),c=t.offset(),u;if(Lu(r))u=bm(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(za(r));let f=Hu(e,r);return f=Eu(f,bt(uf)),o=o.concat(ri(f,b=>za(b))),o.reverse().join("/")+","+u},u3=(e,t,o)=>{let r=F1(e);return r=Eu(r,(c,u)=>!Lu(c)||!Lu(r[u-1])),r=Eu(r,pi([t])),r[o]},Yh=(e,t)=>{let o=e,r=0;for(;Lu(o);){const c=o.data.length;if(t>=r&&t<=r+c){e=o,t=t-r;break}if(!Lu(o.nextSibling)){e=o,t=c;break}r+=c,o=o.nextSibling}return Lu(e)&&t>e.data.length&&(t=e.data.length),Re(e,t)},vw=(e,t)=>{if(!t)return null;const o=t.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=Fi(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),u3(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!Lu(u)&&u.parentNode){let f;return c==="after"?f=W2(u)+1:f=W2(u),Re(u.parentNode,f)}return Yh(u,parseInt(c,10))},G0=Ts,d3=(e,t,o)=>{let r=e(t.data.slice(0,o)).length;for(let c=t.previousSibling;c&&tt(c);c=c.previousSibling)r+=e(c.data).length;return r},yw=(e,t,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(tt(u))b.push(o?d3(t,u,f):f);else{let S=0;const O=u.childNodes;f>=O.length&&O.length&&(S=1,f=Math.max(0,O.length-1)),b.push(e.nodeIndex(O[f],o)+S)}for(let S=u;S&&S!==v;S=S.parentNode)b.push(e.nodeIndex(S,o));return b},Wn=(e,t,o,r)=>{const c=t.dom,u=yw(c,e,o,r,!0),f=t.isForward(),b=I0(r)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:u,forward:f,...b};{const v=yw(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},tn=(e,t,o)=>{let r=0;return Je.each(e.select(t),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},Xh=(e,t)=>{let o=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(pt(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(t?r:r-1,c.length-1)],o&&(r=t?0:o.childNodes.length,t?e.setStart(o,r):e.setEnd(o,r))}},q0=e=>(Xh(e,!0),Xh(e,!1),e),K0=(e,t)=>{if(pt(e)&&(e=Sf(e,t),G0(e)))return e;if(Wl(e)){tt(e)&&hm(e)&&(e=e.parentNode);let o=e.previousSibling;if(G0(o)||(o=e.nextSibling,G0(o)))return o}},m3=e=>K0(e.startContainer,e.startOffset)||K0(e.endContainer,e.endOffset),Z2=(e,t,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||G0(r)){const f=r.nodeName;return{name:f,index:tn(o.dom,f,r)}}const u=m3(c);if(u){const f=u.tagName;return{name:f,index:tn(o.dom,f,u)}}return Wn(e,o,t,c)},ks=e=>{const t=e.getRng();return{start:yl(e.dom.getRoot(),Re.fromRangeStart(t)),end:yl(e.dom.getRoot(),Re.fromRangeEnd(t)),forward:e.isForward()}},Y0=e=>({rng:e.getRng(),forward:e.isForward()}),X0=(e,t,o)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},G2=(e,t)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:tn(o,b,f)};const S=q0(r.cloneRange());if(!u){S.collapse(!1);const R=X0(o,c+"_end",t);Kh(o,S,R)}r=q0(r),r.collapse(!0);const O=X0(o,c+"_start",t);return Kh(o,r,O),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},Ie=(e,t,o=!1)=>t===2?Z2(qc,o,e):t===3?ks(e):t?Y0(e):G2(e,!1),Qh=de(Z2,Wo,!0),Mg=e=>e===1,kd=e=>e===-1;var nu;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(nu||(nu={}));const Ad=(e,t,o)=>e.stype===nu.Error?t(e.serror):o(e.svalue),Jh=e=>{const t=[],o=[];return xe(e,r=>{Ad(r,c=>o.push(c),c=>t.push(c))}),{values:t,errors:o}},Pg=(e,t)=>e.stype===nu.Error?{stype:nu.Error,serror:t(e.serror)}:e,f3=(e,t)=>e.stype===nu.Value?{stype:nu.Value,svalue:t(e.svalue)}:e,ep=(e,t)=>e.stype===nu.Value?t(e.svalue):e,ps=(e,t)=>e.stype===nu.Error?t(e.serror):e,ou=e=>({stype:nu.Value,svalue:e}),q2=e=>({stype:nu.Error,serror:e}),Va={fromResult:e=>e.fold(q2,ou),toResult:e=>Ad(e,Sr.error,Sr.value),svalue:ou,partition:Jh,serror:q2,bind:ep,bindError:ps,map:f3,mapError:Pg,fold:Ad},Cw=e=>Ye(e)&&Vt(e).length>100?" removed due to size":JSON.stringify(e,null,2),K2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:st("... (only showing first ten failures)")}]):e;return en(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},xw=(e,t)=>Va.serror([{path:e,getErrorInfo:t}]),g3=(e,t,o)=>xw(e,()=>'Could not find valid *required* value for "'+t+'" in '+Cw(o)),h3=(e,t)=>xw(e,st(t)),Y2=e=>{const t=(r,c)=>Va.bindError(e(c),u=>h3(r,u)),o=st("val");return{extract:t,toString:o}},Sw=Y2(Va.svalue),nt=st(Sw),X2=(e,t)=>Y2(o=>{const r=typeof o;return e(o)?Va.svalue(o):Va.serror(`Expected type: ${t} but got: ${r}`)}),ma=X2(os,"number"),Q2=X2(U,"string"),J2=X2(se,"function"),eC=()=>({tag:"required",process:{}}),p3=e=>({tag:"defaultedThunk",process:e}),xn=e=>p3(st(e)),ww=()=>({tag:"option",process:{}}),Ew=(e,t,o,r)=>({tag:"field",key:e,newKey:t,presence:o,prop:r}),b3=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},v3=(e,t)=>Va.svalue(Su(t,Al.apply(void 0,e))),Tw=e=>A(Va.serror,ha)(e),kw={consolidateObj:(e,t)=>{const o=Va.partition(e);return o.errors.length>0?Tw(o.errors):v3(o.values,t)},consolidateArr:e=>{const t=Va.partition(e);return t.errors.length>0?Tw(t.errors):Va.svalue(t.values)}},y3=(e,t,o,r)=>Zo(t,o).fold(()=>g3(e,o,t),r),En=(e,t,o,r)=>{const c=Zo(e,t).getOrThunk(()=>o(e));return r(c)},tC=(e,t,o)=>o(Zo(e,t)),vm=(e,t,o,r)=>{const c=Zo(e,t).map(u=>u===!0?o(e):u);return r(c)},wi=(e,t,o,r,c)=>{const u=b=>c.extract(t.concat([r]),b),f=b=>b.fold(()=>Va.svalue(P.none()),v=>{const S=c.extract(t.concat([r]),v);return Va.map(S,P.some)});switch(e.tag){case"required":return y3(t,o,r,u);case"defaultedThunk":return En(o,r,e.process,u);case"option":return tC(o,r,f);case"defaultedOptionThunk":return vm(o,r,e.process,f);case"mergeWithThunk":return En(o,r,st({}),b=>{const v=Su(e.process(o),b);return u(v)})}},Q0=(e,t,o)=>{const r={},c=[];for(const u of o)b3(u,(f,b,v,S)=>{const O=wi(v,e,t,f,S);Va.fold(O,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(t)});return c.length>0?Va.serror(c):Va.svalue(r)},_c=e=>({extract:(r,c)=>Q0(r,c,e),toString:()=>`obj{
`+en(e,c=>b3(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),tp=e=>({extract:(r,c)=>{const u=en(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return kw.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),L1=A(tp,_c),J0=e=>Y2(t=>e(t).fold(Va.serror,Va.svalue)),np=(e,t,o)=>{const r=t.extract([e],o);return Va.mapError(r,c=>({input:o,errors:c}))},op=(e,t,o)=>Va.toResult(np(e,t,o)),_d=e=>`Errors: 
`+K2(e.errors).join(`
`)+`

Input object: `+Cw(e.input),Ar=Ew,ym=e=>Ar(e,e,eC(),nt()),Aw=(e,t)=>Ar(e,e,eC(),t),nC=e=>Aw(e,Q2),_w=e=>Aw(e,J2),C3=(e,t)=>Ar(e,e,eC(),tp(t)),io=e=>Ar(e,e,ww(),nt()),su=(e,t)=>Ar(e,e,ww(),t),Tf=e=>su(e,Q2),r5=e=>su(e,J2),sp=(e,t)=>Ar(e,e,xn(t),nt()),go=(e,t,o)=>Ar(e,e,xn(t),o),x3=(e,t)=>go(e,t,ma),S3=(e,t,o)=>go(e,t,tp(o)),a5=e=>e.type==="inline-command"||e.type==="inline-format",c5=e=>e.type==="block-command"||e.type==="block-format",H1=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,w3=e=>{const t=r=>Sr.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(Ot(e.format)){if(!Ka(e.format,U))return t(r+" pattern has non-string items in the `format` array");f=e.format}else if(U(e.format))f=[e.format];else return t(r+" pattern has non-string `format` parameter");return Sr.value(c(f))}else return e.cmd!==void 0?U(e.cmd)?Sr.value(u(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ye(e))return t("Raw pattern is not an object");if(!U(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!U(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else{if(e.replacement!==void 0)return U(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):Sr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{const r=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):o("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:r}),(c,u)=>({type:"block-command",start:e.start,cmd:c,value:u,trigger:r}))}}},E3=e=>ze(e,c5),z1=e=>ze(e,a5),T3=(e,t)=>({inlinePatterns:z1(e),blockPatterns:E3(e),dynamicPatternsLookup:t}),V1=(e,t)=>({...e,blockPatterns:ze(e.blockPatterns,o=>H1(o,t))}),Ow=e=>{const t=$r(en(e,w3));return xe(t.errors,o=>console.error(o.message,o.pattern)),t.values},k3=e=>t=>{const o=e(t);return Ow(o)},ev=(e,t)=>e.dispatch("PreProcess",t),oC=(e,t)=>e.dispatch("PostProcess",t),sC=e=>{e.dispatch("remove")},Dw=e=>{e.dispatch("detach")},A3=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},Rw=(e,t,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:r,origin:c})},rC=(e,t,o,r,c)=>{e.dispatch("ObjectResized",{target:t,width:o,height:r,origin:c})},Nw=e=>{e.dispatch("PreInit")},So=e=>{e.dispatch("PostRender")},Mw=e=>{e.dispatch("Init")},aC=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},tv=(e,t,o)=>{e.dispatch(t,o)},Cm=(e,t,o,r)=>{e.dispatch("FormatApply",{format:t,node:o,vars:r})},cC=(e,t,o,r)=>{e.dispatch("FormatRemove",{format:t,node:o,vars:r})},_3=(e,t)=>e.dispatch("BeforeSetContent",t),Pw=(e,t)=>e.dispatch("SetContent",t),rp=(e,t)=>e.dispatch("BeforeGetContent",t),Bw=(e,t)=>e.dispatch("GetContent",t),U1=(e,t)=>{e.dispatch("AutocompleterStart",t)},j1=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},lC=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},kf=e=>{e.dispatch("AutocompleterEnd")},$w=(e,t,o)=>e.dispatch("PastePreProcess",{content:t,internal:o}),Iw=(e,t,o)=>e.dispatch("PastePostProcess",{node:t,internal:o}),Fw=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Lw=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),l5=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),Hw=e=>e.dispatch("CloseActiveTooltips"),nv=Hi().deviceType,ov=nv.isTouch(),W1=lo.DOM,sv=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Fo(t,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Os(u)]=Os(f),o},{})},rv=e=>lt(e,RegExp),Rt=e=>t=>t.options.get(e),Af=e=>U(e)||Ye(e),Od=(e,t="")=>o=>{const r=U(o);if(r)if(o.indexOf("=")!==-1){const c=sv(o);return{value:Zo(c,e.id).getOr(t),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Z1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("crossorigin",{processor:"function",default:st(void 0)}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),t("body_id",{processor:Od(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Od(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:r=>{const c=U(r)&&fs(r);return c?{value:r,valid:c}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:r=>{const c=Lt(["block","linebreak","invert","default"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:r=>Yt(r)?{valid:!0,value:r}:U(r)?{valid:!0,value:r}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:r=>{const c=r===!1||U(r)||an(r,U);return c?U(r)?{value:en(r.split(","),Os),valid:c}:Ot(r)?{value:r,valid:c}:r===!1?{value:[],valid:c}:{value:r,valid:c}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:q1(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:r=>{const c=U(r)||an(r,U);return c?{value:Ot(r)?r:en(r.split(","),Os),valid:c}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:r=>{const c=Yt(r)||U(r);return c?r===!1||nv.isiPhone()||nv.isiPad()?{value:"",valid:c}:{value:r===!0?"table,img,figure.image,div,video,iframe":r,valid:c}:{valid:!1,message:"Must be boolean or a string"}},default:!ov}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:r=>r===!1||U(r)||se(r),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:r=>{const c=r===!1||U(r);return c?{value:r===!1?"":r,valid:c}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:r=>Yt(r)?(e.initialized&&au(e)!==r&&Promise.resolve().then(()=>{l5(e,r)}),{valid:!0,value:r}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_html_in_comments",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:r=>{const c=an(r,U);return c?{value:r,valid:c}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Af}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Af}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Af}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Af}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:r=>U(r)||r===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:r=>an(r,Ye)||r===!1?{value:Ow(r===!1?[]:r),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:r=>se(r)?{value:k3(r),valid:!0}:{valid:!1,message:"Must be a single function"},default:r=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:r=>an(r,rv)?{value:r,valid:!0}:rv(r)?{value:[r],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:r=>{const c=Lt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:r=>{const c=Lt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),t("user_id",{processor:"string",default:"Anonymous"}),t("fetch_users",{processor:r=>r===void 0?{valid:!0,value:void 0}:se(r)?{valid:!0,value:r}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}});const o=L1([nC("mimeType"),C3("extensions",J0(r=>U(r)?Sr.value(r):Sr.error("Extensions must be an array of strings")))]);t("documents_file_types",{processor:r=>op("documents_file_types",o,r).fold(c=>({valid:!1,message:"Must be a non-empty array of objects matching the configuration schema: https://www.tiny.cloud/docs/tinymce/latest/uploadcare-documents/#documents-file-types"}),c=>({valid:!0,value:c}))}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:bl.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:W1.getAttrib(e.getElement(),"placeholder")})}),t("lists_indent_on_tab",{processor:"boolean",default:!0}),t("list_max_depth",{processor:r=>{const c=os(r);if(c){if(r<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:r,valid:c}}else return{valid:!1,message:"Must be a number"}}})},zw=Rt("iframe_attrs"),iC=Rt("doctype"),uC=Rt("document_base_url"),Vw=Rt("body_id"),Uw=Rt("body_class"),jw=Rt("content_security_policy"),av=Rt("br_in_pre"),_r=Rt("forced_root_block"),ru=Rt("forced_root_block_attrs"),cv=Rt("newline_behavior"),Ww=Rt("br_newline_selector"),Zw=Rt("no_newline_selector"),Gw=Rt("keep_styles"),lv=Rt("end_container_on_empty_block"),dC=Rt("automatic_uploads"),qw=Rt("images_reuse_filename"),Kw=Rt("images_replace_blob_uris"),G1=Rt("icons"),mC=Rt("icons_url"),iv=Rt("images_upload_url"),fC=Rt("images_upload_base_path"),O3=Rt("images_upload_credentials"),Yw=Rt("images_upload_handler"),Xw=Rt("content_css_cors"),uv=Rt("referrer_policy"),Bg=Rt("crossorigin"),Qw=Rt("language"),Jw=Rt("language_url"),dv=Rt("indent_use_margin"),D3=Rt("indentation"),R3=Rt("content_css"),$g=Rt("content_style"),gC=Rt("font_css"),N3=Rt("directionality"),M3=Rt("inline_boundaries_selector"),eE=Rt("object_resizing"),P3=Rt("resize_img_proportional"),hC=Rt("placeholder"),mv=Rt("event_root"),pC=Rt("service_message"),Dd=Rt("theme"),tE=Rt("theme_url"),fv=Rt("model"),B3=Rt("model_url"),_f=Rt("inline_boundaries"),$3=Rt("formats"),I3=Rt("preview_styles"),i5=Rt("format_empty_lines"),u5=Rt("format_noneditable_selector"),ap=Rt("custom_ui_selector"),q1=Rt("inline"),bC=Rt("hidden_input"),F3=Rt("submit_patch"),L3=Rt("add_form_submit_trigger"),gv=Rt("add_unload_trigger"),nE=Rt("custom_undo_redo_levels"),oE=Rt("disable_nodechange"),K1=Rt("readonly"),hv=Rt("editable_root"),vC=Rt("content_css_cors"),Y1=Rt("plugins"),yC=Rt("external_plugins"),H3=Rt("block_unsupported_drop"),X1=Rt("visual"),sE=Rt("visual_table_class"),pv=Rt("visual_anchor_class"),bv=Rt("iframe_aria_text"),Ig=Rt("setup"),z3=Rt("init_instance_callback"),Rd=Rt("urlconverter_callback"),V3=Rt("auto_focus"),rE=Rt("browser_spellcheck"),U3=Rt("protect"),d5=Rt("paste_block_drop"),vv=Rt("paste_data_images"),j3=Rt("paste_preprocess"),W3=Rt("paste_postprocess"),Z3=Rt("newdocument_content"),CC=Rt("paste_webkit_styles"),G3=Rt("paste_remove_styles_if_webkit"),aE=Rt("paste_merge_formats"),xC=Rt("smart_paste"),q3=Rt("paste_as_text"),K3=Rt("paste_tab_spaces"),SC=Rt("allow_html_data_urls"),cE=Rt("text_patterns"),Xt=Rt("text_patterns_lookup"),Q1=Rt("noneditable_class"),lE=Rt("editable_class"),Y3=Rt("noneditable_regexp"),wC=Rt("preserve_cdata"),J1=Rt("highlight_on_focus"),yv=Rt("xss_sanitization"),eb=Rt("init_content_sync"),cp=e=>e.options.isSet("text_patterns_lookup"),EC=e=>Je.explode(e.options.get("font_size_style_values")),TC=e=>Je.explode(e.options.get("font_size_classes")),iE=e=>e.options.get("encoding")==="xml",kC=e=>Je.explode(e.options.get("images_file_types")),uE=Rt("table_tab_navigation"),lp=Rt("details_initial_state"),xm=Rt("details_serialized_state"),ip=Rt("sandbox_iframes"),Sm=e=>e.options.get("sandbox_iframes_exclusions"),wm=Rt("convert_unsafe_embeds"),dE=Rt("license_key"),tb=Rt("api_key"),au=Rt("disabled"),mE=Rt("user_id"),fE=Rt("fetch_users"),AC=Rt("lists_indent_on_tab"),_C=e=>P.from(e.options.get("list_max_depth")),gE=pt,hE=tt,X3=e=>{const t=e.parentNode;t&&t.removeChild(e)},pE=e=>{const t=qc(e);return{count:e.length-t.length,text:t}},Fg=e=>{let t;for(;(t=e.data.lastIndexOf(jr))!==-1;)e.deleteData(t,1)},OC=(e,t)=>(Lg(e),t),bE=(e,t)=>{const o=pE(e.data.substr(0,t.offset())),r=pE(e.data.substr(t.offset()));return(o.text+r.text).length>0?(Fg(e),Re(e,t.offset()-o.count)):t},DC=(e,t)=>{const o=t.container(),r=dr(as(o.childNodes),e).map(c=>c<t.offset()?Re(o,t.offset()-1):t).getOr(t);return Lg(e),r},RC=(e,t)=>hE(e)&&t.container()===e?bE(e,t):OC(e,t),NC=(e,t)=>t.container()===e.parentNode?DC(e,t):OC(e,t),Q3=(e,t)=>Re.isTextPosition(t)?RC(e,t):NC(e,t),Lg=e=>{gE(e)&&Wl(e)&&($0(e)?e.removeAttribute("data-mce-caret"):X3(e)),hE(e)&&(Fg(e),e.data.length===0&&X3(e))},Hg=Ts,Cv=yi,xv=Oh,vE="*[contentEditable=false],video,audio,embed,object",J3=(e,t,o)=>{const r=O1(t.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=t.offsetWidth-t.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},yE=e=>{const t=Ne(te.fromDom(e),vE);for(let o=0;o<t.length;o++){const r=t[o].dom;let c=r.previousSibling;if(yf(c)){const u=c.data;u.length===1?c.parentNode?.removeChild(c):c.deleteData(u.length-1,1)}c=r.nextSibling,vl(c)&&(c.data.length===1?c.parentNode?.removeChild(c):c.deleteData(0,1))}},An=(e,t,o,r)=>{const c=Pc();let u,f;const b=_r(e),v=e.dom,S=(W,Q)=>{let ge;if(O(),xv(Q))return null;if(o(Q)){const be=P2(b,Q,W),ve=J3(t,Q,W);v.setStyle(be,"top",ve.top),v.setStyle(be,"caret-color","transparent"),f=be;const Be=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Be,{...ve}),v.add(t,Be),c.set({caret:Be,element:Q,before:W}),W&&v.addClass(Be,"mce-visual-caret-before"),R(),ge=Q.ownerDocument.createRange(),ge.setStart(be,0),ge.setEnd(be,0)}else return f=mw(Q,W),ge=Q.ownerDocument.createRange(),Zl(f.nextSibling)?(ge.setStart(f,0),ge.setEnd(f,0)):(ge.setStart(f,1),ge.setEnd(f,1)),ge;return ge},O=()=>{yE(t),f&&(Lg(f),f=null),c.on(W=>{v.remove(W.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=window.setInterval(()=>{c.on(W=>{r()?v.toggleClass(W.caret,"mce-visual-caret-hidden"):v.addClass(W.caret,"mce-visual-caret-hidden")})},500)},M=()=>{c.on(W=>{const Q=J3(t,W.element,W.before);v.setStyles(W.caret,{...Q})})},H=()=>clearInterval(u),J=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:S,hide:O,getCss:J,reposition:M,destroy:H}},Sv=()=>fo.browser.isFirefox(),Zl=e=>Hg(e)||Cv(e),nb=e=>(Zl(e)||Uc(e)&&Sv())&&Lc(te.fromDom(e)).exists(Hl),eA=ml,wv=Ts,tA=yi,MC=m0("display","block table table-cell table-row table-caption list-item"),PC=Wl,ob=hm,Vu=pt,up=tt,nA=Ns,zg=(e,t)=>{let o;for(;o=e(t);)if(!ob(o))return o;return null},sb=(e,t,o,r,c)=>{const u=new er(e,r),f=wv(e)||ob(e);let b;if(kd(t)){if(f&&(b=zg(u.prev.bind(u),!0),o(b)))return b;for(;b=zg(u.prev.bind(u),c);)if(o(b))return b}if(Mg(t)){if(f&&(b=zg(u.next.bind(u),!0),o(b)))return b;for(;b=zg(u.next.bind(u),c);)if(o(b))return b}return null},Ev=(e,t)=>{const o=c=>eA(c.dom),r=c=>c.dom===t;return qi(te.fromDom(e),o,r).map(c=>c.dom).getOr(t)},Zr=e=>pt(e)&&Hs(te.fromDom(e),"position")==="absolute",oA=(e,t)=>e.parentNode!==t,BC=(e,t)=>wv(e)&&Zr(e)&&oA(e,t),Of=(e,t)=>{for(;e&&e!==t;){if(MC(e)&&!BC(e,t))return e;e=e.parentNode}return null},Nd=(e,t,o)=>Of(e.container(),o)===Of(t.container(),o),$C=(e,t)=>{if(!t)return P.none();const o=t.container(),r=t.offset();return Vu(o)?P.from(o.childNodes[r+e]):P.none()},CE=(e,t)=>{const r=(t.ownerDocument??document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},sA=(e,t,o)=>Of(t,e)===Of(o,e),Tv=(e,t,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==t;){let u=c[r];if(u&&PC(u)&&(u=u[r]),wv(u)||tA(u)){if(sA(t,u,c))return u;break}if(nA(u))break;c=c.parentNode}return null},rb=de(CE,!0),Df=de(CE,!1),kv=(e,t,o)=>{let r;const c=de(Tv,!0,t),u=de(Tv,!1,t),f=o.startContainer,b=o.startOffset;if(hm(f)){const v=up(f)?f.parentNode:f,S=v.getAttribute("data-mce-caret");if(S==="before"&&(r=v.nextSibling,nb(r)))return rb(r);if(S==="after"&&(r=v.previousSibling,nb(r)))return Df(r)}if(!o.collapsed)return o;if(tt(f)){if(PC(f)){if(e===1){if(r=u(f),r)return rb(r);if(r=c(f),r)return Df(r)}if(e===-1){if(r=c(f),r)return Df(r);if(r=u(f),r)return rb(r)}return o}if(yf(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?rb(r):o;if(vl(f)&&b<=1)return e===-1&&(r=c(f),r)?Df(r):o;if(b===f.data.length)return r=u(f),r?rb(r):o;if(b===0)return r=c(f),r?Df(r):o}return o},Av=(e,t)=>$C(e?0:-1,t).filter(wv),Rf=(e,t,o)=>{const r=kv(e,t,o);return e===-1?Re.fromRangeStart(r):Re.fromRangeEnd(r)},ab=e=>P.from(e.getNode()).map(te.fromDom),IC=e=>P.from(e.getNode(!0)).map(te.fromDom),_v=(e,t)=>{let o=t;for(;o=e(o);)if(o.isVisible())return o;return o},Uu=(e,t)=>{const o=Nd(e,t);return!o&&Vs(e.getNode())?!0:o},xE=Ts,Md=tt,FC=pt,Ov=Vs,dp=Ns,cb=pw,Dv=z0,rA=(e,t)=>{const o=[];let r=e;for(;r&&r!==t;)o.push(r),r=r.parentNode;return o},SE=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Rv=(e,t)=>{if(Mg(e)){if(dp(t.previousSibling)&&!Md(t.previousSibling))return Re.before(t);if(Md(t))return Re(t,0)}if(kd(e)){if(dp(t.nextSibling)&&!Md(t.nextSibling))return Re.after(t);if(Md(t))return Re(t,t.data.length)}return kd(e)?Ov(t)?Re.before(t):Re.after(t):Re.before(t)},aA=(e,t)=>{const o=t.nextSibling;return o&&dp(o)?Md(o)?Re(o,0):Re.before(o):LC(1,Re.after(t),e)},LC=(e,t,o)=>{let r,c,u,f;if(!FC(o)||!t)return null;if(t.isEqual(Re.after(o))&&o.lastChild){if(f=Re.after(o.lastChild),kd(e)&&dp(o.lastChild)&&FC(o.lastChild))return Ov(o.lastChild)?Re.before(o.lastChild):f}else f=t;const b=f.container();let v=f.offset();if(Md(b)){if(kd(e)&&v>0)return Re(b,--v);if(Mg(e)&&v<b.length)return Re(b,++v);r=b}else{if(kd(e)&&v>0&&(c=SE(b,v-1),dp(c)))return!cb(c)&&(u=sb(c,e,Dv,c),u)?Md(u)?Re(u,u.data.length):Re.after(u):Md(c)?Re(c,c.data.length):Re.before(c);if(Mg(e)&&v<b.childNodes.length&&(c=SE(b,v),dp(c)))return Ov(c)?aA(o,c):!cb(c)&&(u=sb(c,e,Dv,c),u)?Md(u)?Re(u,0):Re.before(u):Md(c)?Re(c,0):Re.after(c);r=c||f.getNode()}if(r&&(Mg(e)&&f.isAtEnd()||kd(e)&&f.isAtStart())&&(r=sb(r,e,He,o,!0),Dv(r,o)))return Rv(e,r);c=r&&sb(r,e,Dv,o);const S=sl(ze(rA(b,o),xE));return S&&(!c||!S.contains(c))?(Mg(e)?f=Re.after(S):f=Re.before(S),f):c?Rv(e,c):null},ju=e=>({next:t=>LC(1,t,e),prev:t=>LC(-1,t,e)}),HC=(e,t,o)=>{const r=e?Re.before(o):Re.after(o);return Gl(e,t,r)},cA=e=>Vs(e)?Re.before(e):Re.after(e),wE=e=>Re.isTextPosition(e)?e.offset()===0:Ns(e.getNode()),EE=e=>{if(Re.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Ns(e.getNode(!0))},TE=(e,t)=>!Re.isTextPosition(e)&&!Re.isTextPosition(t)&&e.getNode()===t.getNode(!0),lA=e=>!Re.isTextPosition(e)&&Vs(e.getNode()),Ss=(e,t,o)=>e?!TE(t,o)&&!lA(t)&&EE(t)&&wE(o):!TE(o,t)&&wE(t)&&EE(o),Gl=(e,t,o)=>{const r=ju(t);return P.from(e?r.next(o):r.prev(o))},mp=(e,t,o)=>Gl(e,t,o).bind(r=>Nd(o,r,t)&&Ss(e,o,r)?Gl(e,t,r):P.some(r)),i=(e,t,o,r)=>mp(e,t,o).bind(c=>r(c)?i(e,t,c,r):P.some(c)),m=(e,t)=>{const o=e?t.firstChild:t.lastChild;return tt(o)?P.some(Re(o,e?0:o.data.length)):o?Ns(o)?P.some(e?Re.before(o):cA(o)):HC(e,t,o):P.none()},p=de(Gl,!0),y=de(Gl,!1),E=de(m,!0),D=de(m,!1),$="_mce_caret",z=e=>pt(e)&&e.id===$,K=(e,t)=>{let o=t;for(;o&&o!==e;){if(z(o))return o;o=o.parentNode}return null},ce=e=>U(e.start),Ce=e=>kn(e,"rng"),Ge=e=>kn(e,"id"),kt=e=>kn(e,"name"),wt=e=>Je.isArray(e.start),Gt=e=>!kt(e)&&Yt(e.forward)?e.forward:!0,Fe=(e,t)=>(pt(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),qe=(e,t)=>{const o=P.from(vw(e.getRoot(),t.start)),r=P.from(vw(e.getRoot(),t.end));return Qs(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:Gt(t)}})},dn=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(jr);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)},Bn=e=>!e.hasChildNodes(),Bt=(e,t)=>D(e).fold(ye,o=>(t.setStart(o.container(),o.offset()),t.setEnd(o.container(),o.offset()),!0)),$o=(e,t,o)=>Bn(t)&&K(e,t)?(dn(t,o),!0):!1,Io=(e,t,o,r)=>{const c=o[t?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const S=f.childNodes;if($o(u,f,r))return!0;if(c[v]>S.length-1)return $o(u,f,r)?!0:Bt(f,r);f=S[c[v]]}tt(f)&&(b=Math.min(c[0],f.data.length)),pt(f)&&(b=Math.min(c[0],f.childNodes.length)),t?r.setStart(f,b):r.setEnd(f,b)}return!0},Rn=e=>tt(e)&&e.data.length>0,vr=(e,t,o)=>{const r=e.get(o.id+"_"+t),c=r?.parentNode,u=o.keep;if(r&&c){let f,b;if(t==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Rn(r.nextSibling)?(f=r.nextSibling,b=0):Rn(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Rn(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,S=r.nextSibling;Je.each(Je.grep(r.childNodes),R=>{tt(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let O;for(;O=e.get(o.id+"_"+t);)e.remove(O,!0);if(tt(S)&&tt(v)&&!fo.browser.isOpera()){const R=v.data.length;v.appendData(S.data),e.remove(S),f=v,b=R}}return P.some(Re(f,b))}else return P.none()},Ei=(e,t)=>{const o=e.createRng();return Io(e,!0,t,o)&&Io(e,!1,t,o)?P.some({range:o,forward:Gt(t)}):P.none()},Em=(e,t)=>{const o=vr(e,"start",t),r=vr(e,"end",t);return Qs(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(Fe(e,c.container()),c.offset()),f.setEnd(Fe(e,u.container()),u.offset()),{range:f,forward:Gt(t)}})},Nf=(e,t)=>P.from(e.select(t.name)[t.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Vg=(e,t)=>{const o=e.dom;if(t){if(wt(t))return Ei(o,t);if(ce(t))return qe(o,t);if(Ge(t))return Em(o,t);if(kt(t))return Nf(o,t);if(Ce(t))return P.some({range:t.rng,forward:Gt(t)})}return P.none()},Yo=(e,t,o)=>Ie(e,t,o),Oc=(e,t)=>{Vg(e,t).each(({range:o,forward:r})=>{e.setRng(o,r)})},Xs=e=>pt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",sc=(e=>t=>e===t)(Is),ql=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Aa=e=>!ql(e)&&!sc(e)&&!Qa(e),Nv=e=>{const t=[];if(e)for(let o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));return t},lb=e=>xo(e,t=>{const o=Wr(t);return o?[te.fromDom(o)]:[]}),Tm=e=>Nv(e).length>1,rc=e=>ze(lb(e),kg),iA=e=>Ne(e,"td[data-mce-selected],th[data-mce-selected]"),kE=(e,t)=>{const o=iA(t);return o.length>0?o:rc(e)},Ft=e=>kE(Nv(e.selection.getSel()),te.fromDom(e.getBody())),Kc=(e,t)=>cr(e,"table",t),uA=e=>{const t=e.startContainer,o=e.startOffset;return tt(t)?o===0?P.some(te.fromDom(t)):P.none():P.from(t.childNodes[o]).map(te.fromDom)},Mv=e=>{const t=e.endContainer,o=e.endOffset;return tt(t)?o===t.data.length?P.some(te.fromDom(t)):P.none():P.from(t.childNodes[o-1]).map(te.fromDom)},AE=e=>Fr(e).fold(st([e]),t=>[e].concat(AE(t))),Ug=e=>sr(e).fold(st([e]),t=>Hn(t)==="br"?al(t).map(o=>[e].concat(Ug(o))).getOr([]):[e].concat(Ug(t))),dA=(e,t)=>Qs(uA(t),Mv(t),(o,r)=>{const c=Oo(AE(e),de(Qn,o)),u=Oo(Ug(e),de(Qn,r));return c.isSome()&&u.isSome()}).getOr(!1),_E=(e,t,o,r)=>{const c=o,u=new er(o,c),f=Pi(e.schema.getMoveCaretBeforeOnEnterElements(),(v,S)=>!Lt(["td","th","table"],S.toLowerCase()));let b=o;do{if(tt(b)&&Je.trim(b.data).length!==0){r?t.setStart(b,0):t.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?t.setStartBefore(b):b.nodeName==="BR"?t.setEndBefore(b):t.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?t.setStart(c,0):t.setEnd(c,c.childNodes.length))},zC=e=>{const t=e.selection.getSel();return X(t)&&t.rangeCount>0},VC=(e,t)=>{const o=Ft(e);o.length>0?xe(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),t(u,!0)}):t(e.selection.getRng(),!1)},OE=(e,t,o)=>{const r=G2(e,t);o(r),e.moveToBookmark(r)},UC=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&t(e.startContainer.childNodes[e.startOffset]),y7=e=>UC(e,Vc),C7=e=>UC(e,tt),x7=e=>UC(e,d1),jC=e=>os(e?.nodeType),WC=e=>pt(e)&&!Xs(e)&&!z(e)&&!uf(e),m5=(e,t)=>{if(WC(t)&&!/^(TD|TH)$/.test(t.nodeName)){const o=e.getAttrib(t,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},f5=(e,t,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=Ts(u);OE(r,!0,()=>{t()}),f&&Ts(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&g5(c,r)},g5=(e,t)=>{const o=t.getRng(),{startContainer:r,startOffset:c}=o,u=t.getNode();if(!m5(e,u)&&pt(r)){const f=r.childNodes,b=e.getRoot();let v;if(c<f.length){const S=f[c];v=new er(S,e.getParent(S,e.isBlock)??b)}else{const S=f[f.length-1];v=new er(S,e.getParent(S,e.isBlock)??b),v.next(!0)}for(let S=v.current();S;S=v.next()){if(e.getContentEditable(S)==="false")return;if(tt(S)&&!mA(S)){o.setStart(S,0),t.setRng(o);return}}}},h5=(e,t,o)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(pt(e)||!mA(e))return e}},ZC=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Ks(e,t),Pv=(e,t,o)=>e.schema.isValidChild(t,o),mA=(e,t=!1)=>{if(X(e)&&tt(e)){const o=t?e.data.replace(/ /g," "):e.data;return kh(o)}else return!1},S7=e=>X(e)&&tt(e)&&e.length===0,w7=(e,t)=>{const o="[data-mce-cef-wrappable]",r=u5(e),c=ni(r)?o:`${o},${r}`;return Fc(te.fromDom(t),c)},p5=(e,t)=>{const o=e.dom;return WC(t)&&o.getContentEditable(t)==="false"&&w7(e,t)&&o.select('[contenteditable="true"]',t).length===0},jg=(e,t)=>se(e)?e(t):(X(t)&&(e=e.replace(/%(\w+)/g,(o,r)=>t[r]||o)),e),GC=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),DE=(e,t)=>{if(jt(e))return null;{let o=String(e);return(t==="color"||t==="backgroundColor")&&(o=xi(o)),t==="fontWeight"&&e===700&&(o="bold"),t==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},qC=(e,t,o)=>{const r=e.getStyle(t,o);return DE(r,o)},b5=(e,t)=>{let o;return e.getParent(t,r=>pt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},RE=(e,t,o)=>e.getParents(t,o,e.getRoot()),fA=(e,t,o)=>{const r=e.formatter.get(t);return X(r)&&po(r,o)},NE=(e,t)=>fA(e,t,r=>{const c=u=>se(u)||u.length>1&&u.charAt(0)==="%";return po(["styles","attributes"],u=>Zo(r,u).exists(f=>{const b=Ot(f)?f:Ba(f);return po(b,c)}))}),v5=(e,t,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Pi(u,(f,b)=>po(r,v=>v===b));return fA(e,t,u=>{const f=c(u);return fA(e,o,b=>{const v=c(b);return ad(f,v)})})},km=e=>Go(e,"block"),E7=e=>km(e)&&e.wrapper===!0,T7=e=>km(e)&&e.wrapper!==!0,Pd=e=>Go(e,"selector"),Ua=e=>Go(e,"inline"),kX=e=>Pd(e)&&Ua(e)&&zo(Zo(e,"mixed"),!0),gA=e=>Pd(e)&&e.expand!==!1&&!Ua(e),AX=e=>{const t=[];let o=e;for(;o;){if(tt(o)&&o.data!==jr||o.childNodes.length>1)return[];pt(o)&&t.push(o),o=o.firstChild}return t},y5=e=>AX(e).length>0,hA=e=>z(e.dom)&&y5(e.dom),KC=Xs,C5=RE,Ms=mA,pA=ZC,ME=e=>Vs(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,YC=(e,t)=>{let o=t;for(;o;){if(pt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:t;o=o.parentNode}return t},Mf=(e,t,o,r)=>{const c=t.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},PE=(e,t,o)=>Mf(e,t,o,r=>sc(r)||ql(r)),Bv=(e,t,o)=>Mf(e,t,o,Aa),bA=(e,t,o,r,c,u)=>{let f;const b=e.getParent(o,R=>im(R)||e.isBlock(R)),v=X(b)?b:t,S=(R,M,H)=>{const J=Ed(e),W=c?J.backwards:J.forwards;return P.from(W(R,M,(Q,ge)=>KC(Q.parentNode)?-1:(f=Q,H(c,Q,ge)),v))};return S(o,r,PE).bind(R=>u?S(R.container,R.offset+(c?-1:0),Bv):P.some(R)).orThunk(()=>f?P.some({container:f,offset:c?0:f.length}):P.none())},x5=(e,t,o,r,c)=>{const u=r[c];tt(r)&&ni(r.data)&&u&&(r=u);const f=C5(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<t.length;v++){const S=t[v];if(!(X(S.collapsed)&&S.collapsed!==o.collapsed)&&Pd(S)&&e.is(f[b],S.selector))return f[b]}return r},S5=(e,t,o,r)=>{let c=o;const u=e.getRoot(),f=t[0];if(km(f)&&(c=f.wrapper?null:e.getParent(o,f.block,u)),!c){const b=e.getParent(o,"LI,TD,TH,SUMMARY")??u;c=e.getParent(tt(o)?o.parentNode:o,v=>v!==u&&pA(e.schema,v),b)}if(c&&km(f)&&f.wrapper&&(c=C5(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!GC(c,"br")););return c||o},vA=(e,t,o,r)=>{const c=o.parentNode;return X(o[r])?!1:c===t||jt(c)||e.isBlock(c)?!0:vA(e,t,c,r)},BE=(e,t,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(tt(o)&&!Ms(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(im(f))return o;if(!t[0].block_expand&&e.isBlock(f))return u?f:o;for(let S=f[b];S;S=S[b]){const O=tt(S)&&!vA(e,v,S,b);if(!KC(S)&&!ME(S)&&!Ms(S,O))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},$E=e=>KC(e.parentNode)||KC(e),Pf=(e,t,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(t.commonAncestorContainer,H=>im(H)),b=X(f)?f:e.getRoot();let{startContainer:v,startOffset:S,endContainer:O,endOffset:R}=t;const M=o[0];return pt(v)&&v.hasChildNodes()&&(v=Sf(v,S),tt(v)&&(S=0)),pt(O)&&O.hasChildNodes()&&(O=Sf(O,t.collapsed?R:R-1),tt(O)&&(R=O.data.length)),v=YC(e,v),O=YC(e,O),$E(v)&&(v=KC(v)?v:v.parentNode,t.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,tt(v)&&(S=t.collapsed?v.length:0)),$E(O)&&(O=KC(O)?O:O.parentNode,t.collapsed?O=O.nextSibling||O:O=O.previousSibling||O,tt(O)&&(R=t.collapsed?0:O.length)),t.collapsed&&(bA(e,b,v,S,!0,c).each(({container:W,offset:Q})=>{v=W,S=Q}),bA(e,b,O,R,!1,c).each(({container:W,offset:Q})=>{O=W,R=Q})),(Ua(M)||M.block_expand)&&((!Ua(M)||!tt(v)||S===0)&&(v=BE(e,o,v,S,!0,u)),(!Ua(M)||!tt(O)||R===O.data.length)&&(O=BE(e,o,O,R,!1,u))),gA(M)&&(v=x5(e,o,t,v,"previousSibling"),O=x5(e,o,t,O,"nextSibling")),(km(M)||Pd(M))&&(v=S5(e,o,v,"previousSibling"),O=S5(e,o,O,"nextSibling"),km(M)&&(e.isBlock(v)||(v=BE(e,o,v,S,!0,u),tt(v)&&(S=0)),e.isBlock(O)||(O=BE(e,o,O,R,!1,u),tt(O)&&(R=O.data.length)))),pt(v)&&v.parentNode&&(S=e.nodeIndex(v),v=v.parentNode),pt(O)&&O.parentNode&&(R=e.nodeIndex(O)+1,O=O.parentNode),{startContainer:v,startOffset:S,endContainer:O,endOffset:R}},Bd=(e,t,o)=>{const r=t.startOffset,c=Sf(t.startContainer,r),u=t.endOffset,f=Sf(t.endContainer,u-1),b=W=>{const Q=W[0];tt(Q)&&Q===c&&r>=Q.data.length&&W.splice(0,1);const ge=W[W.length-1];return u===0&&W.length>0&&ge===f&&tt(ge)&&W.splice(W.length-1,1),W},v=(W,Q,ge)=>{const be=[];for(;W&&W!==ge;W=W[Q])be.push(W);return be},S=(W,Q)=>e.getParent(W,ge=>ge.parentNode===Q,Q),O=(W,Q,ge)=>{const be=ge?"nextSibling":"previousSibling";for(let ve=W,Be=ve.parentNode;ve&&ve!==Q;ve=Be){Be=ve.parentNode;const je=v(ve===W?ve:ve[be],be);je.length&&(ge||je.reverse(),o(b(je)))}};if(c===f)return o(b([c]));const R=e.findCommonAncestor(c,f)??e.getRoot();if(e.isChildOf(c,f))return O(c,R,!0);if(e.isChildOf(f,c))return O(f,R);const M=S(c,R)||c,H=S(f,R)||f;O(c,M,!0);const J=v(M===c?M:M.nextSibling,"nextSibling",H===f?H.nextSibling:H);J.length&&o(b(J)),O(f,H)},ib=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],w5=e=>Eo(e)&&Sa(e)===jr,k7=(e,t,o,r)=>Lc(t).fold(()=>"skipping",c=>r==="br"||w5(t)?"valid":O2(t)?"existing":z(t.dom)?"caret":po(ib,u=>Fc(t,u))?"valid-block":!Pv(e,o,r)||!Pv(e,Hn(c),o)?"invalid-child":"valid"),A7=(e,t)=>{const o=Pf(e.dom,t,[{inline:"span"}]);t.setStart(o.startContainer,o.startOffset),t.setEnd(o.endContainer,o.endOffset),e.selection.setRng(t)},E5=(e,t,o,r,c,u)=>{const{uid:f=t,...b}=o;vc(e,pf()),ws(e,`${wd()}`,f),ws(e,`${Ji()}`,r);const{attributes:v={},classes:S=[]}=c(f,b);if(ta(e,v),dg(e,S),u){S.length>0&&ws(e,`${jh()}`,S.join(","));const O=Vt(v);O.length>0&&ws(e,`${_0()}`,O.join(","))}},_7=e=>{lr(e,pf()),rr(e,`${wd()}`),rr(e,`${Ji()}`),rr(e,`${Uh()}`);const t=ul(e,`${_0()}`).map(r=>r.split(",")).getOr([]),o=ul(e,`${jh()}`).map(r=>r.split(",")).getOr([]);xe(t,r=>rr(e,r)),xh(e,o),rr(e,`${jh()}`),rr(e,`${_0()}`)},T5=(e,t,o,r,c)=>{const u=te.fromTag("span",e);return E5(u,t,o,r,c,!1),u},O7=(e,t,o,r,c,u)=>{const f=[],b=T5(e.getDoc(),o,u,r,c),v=Pc(),S=()=>{v.clear()},O=()=>v.get().getOrThunk(()=>{const J=br(b);return f.push(J),v.set(J),J}),R=J=>{xe(J,M)},M=J=>{switch(k7(e,J,"span",Hn(J))){case"invalid-child":{S();const Q=Ds(J);R(Q),S();break}case"valid-block":{S(),E5(J,o,u,r,c,!0);break}case"valid":{const Q=O();Hc(J,Q);break}}},H=J=>{const W=en(J,te.fromDom);R(W)};return Bd(e.dom,t,J=>{S(),H(J)}),f},k5=(e,t,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Ft(e).length>0,b=or("mce-annotation");if(u.collapsed&&!f&&A7(e,u),c.getRng().collapsed&&!f){const v=T5(e.getDoc(),b,r,t,o.decorate);_u(v,Is),c.getRng().insertNode(v.dom),c.select(v.dom)}else OE(c,!1,()=>{VC(e,v=>{O7(e,v,b,t,o.decorate,r)})})})},A5=e=>{const t=R0();A1(e,t);const o=D0(e,t),r=gr("span"),c=u=>{xe(u,f=>{r(f)?pc(f):_7(f)})};return{register:(u,f)=>{t.register(u,f)},annotate:(u,f)=>{t.lookup(u).each(b=>{k5(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{O0(e,P.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();Un(gm(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=gm(e,u);return ic(f,b=>en(b,v=>v.dom))}}},$v=e=>({getBookmark:de(Yo,e),moveToBookmark:de(Oc,e)});$v.isBookmarkNode=Xs;const _5=(e,t,o)=>o.collapsed?!1:po(o.getClientRects(),r=>$2(r,e,t)),D7=(e,t)=>{const o=Eo(t)?Sa(t).length:Ds(t).length+1;return e>o?o:e<0?0:e},R7=e=>af.range(e.start,D7(e.soffset,e.start),e.finish,D7(e.foffset,e.finish)),_a=(e,t)=>!d0(t.dom)&&(ec(e,t)||Qn(e,t)),XC=e=>t=>_a(e,t.start)&&_a(e,t.finish),ac=e=>e.inline||fo.browser.isFirefox(),$d=e=>af.range(te.fromDom(e.startContainer),e.startOffset,te.fromDom(e.endContainer),e.endOffset),N7=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?P.none():P.from(t.getRangeAt(0))).map($d)},O5=e=>{const t=ui(e);return N7(t.dom).filter(XC(e))},M7=(e,t)=>P.from(t).filter(XC(e)).map(R7),yA=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),P.some(t)}catch{return P.none()}},IE=e=>{const t=ac(e)?O5(te.fromDom(e.getBody())):P.none();e.bookmark=t.isSome()?t:e.bookmark},FE=e=>(e.bookmark?e.bookmark:P.none()).bind(o=>M7(te.fromDom(e.getBody()),o)).bind(yA),P7=e=>{FE(e).each(t=>e.selection.setRng(t))},D5={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},cu=(e,t)=>(os(t)||(t=0),window.setTimeout(e,t)),Cl=(e,t)=>(os(t)||(t=0),window.setInterval(e,t)),Id={setEditorTimeout:(e,t,o)=>cu(()=>{e.removed||t()},o),setEditorInterval:(e,t,o)=>{const r=Cl(()=>{e.removed?window.clearInterval(r):t()},o);return r}},Am=e=>e.type==="nodechange"&&e.selectionChange,CA=(e,t)=>{const o=()=>{t.throttle()};lo.DOM.bind(document,"mouseup",o),e.on("remove",()=>{lo.DOM.unbind(document,"mouseup",o)})},B7=(e,t)=>{e.on("mouseup touchend",o=>{t.throttle()})},$7=(e,t)=>{B7(e,t),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Am(o)||IE(e)})},R5=e=>{const t=vt(()=>{IE(e)},0);e.on("init",()=>{e.inline&&CA(e,t),$7(e,t)}),e.on("remove",()=>{t.cancel()})};let Iv;const LE=lo.DOM,I7=e=>pt(e)&&D5.isEditorUIElement(e),QC=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},HE=(e,t)=>{const o=ap(e);return LE.getParent(t,c=>I7(c)||(o?e.dom.is(c,o):!1))!==null},xA=e=>{try{const t=Lr(te.fromDom(e.getElement()));return Il(t).fold(()=>document.body,o=>o.dom)}catch{return document.body}},F7=(e,t)=>{const o=t.editor;R5(o);const r=(c,u)=>{if(J1(c)&&c.inline!==!0){const f=te.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;QC(xA(o))&&r(o,vc),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Id.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!QC(xA(o))||c!==o)&&r(o,lr),!HE(o,xA(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Iv||(Iv=c=>{const u=e.activeEditor;u&&Jp(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!HE(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},LE.bind(document,"focusin",Iv))},L7=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Iv&&(LE.unbind(document,"focusin",Iv),Iv=null)},N5=e=>{e.on("AddEditor",de(F7,e)),e.on("RemoveEditor",de(L7,e))},SA=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="true"),M5=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="false")!==null,wA=e=>e.collapsed?P.from(Sf(e.startContainer,e.startOffset)).map(te.fromDom):P.none(),H7=(e,t)=>wA(t).bind(o=>M0(o)?P.some(o):ec(e,o)?P.none():P.some(e)),z7=(e,t)=>{H7(te.fromDom(e.getBody()),t).bind(o=>E(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},EA=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},V7=e=>Ui(e)||e1(e).isSome(),P5=e=>X(e.iframeElement)&&Ui(te.fromDom(e.iframeElement)),U7=e=>{const t=e.getBody();return t&&V7(te.fromDom(t))},j7=e=>{const t=Lr(te.fromDom(e.getElement()));return Il(t).filter(o=>!QC(o.dom)&&HE(e,o.dom)).isSome()},Fv=e=>e.inline?U7(e):P5(e),B5=e=>Fv(e)||j7(e),OX=e=>{const t=e.selection,o=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable();const c=f=>{FE(f).each(b=>{f.selection.setRng(b),r=b})};!Fv(e)&&e.hasEditableRoot()&&c(e);const u=SA(e,t.getNode());if(u&&e.dom.isChildOf(u,o)){M5(e,u)||EA(o),EA(u),e.hasEditableRoot()||c(e),z7(e,r),zE(e);return}e.inline||(fo.browser.isOpera()||EA(o),e.getWin().focus()),(fo.browser.isFirefox()||e.inline)&&(EA(o),z7(e,r)),zE(e)},zE=e=>e.editorManager.setActive(e),$5=(e,t)=>{e.removed||(t?zE(e):OX(e))},Et={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Et.metaKeyPressed(e),metaKeyPressed:e=>fo.os.isMacOS()||fo.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},ub="data-mce-selected",W7=`table,img,figure.image,hr,video,span.mce-preview-object,details,${d2}`,Z7=Math.abs,TA=Math.round,I5={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},G7=e=>e.type==="longpress"||e.type.indexOf("touch")===0,q7=(e,t)=>{const o=t.dom,r=t.getDoc(),c=document,u=t.getBody();let f,b,v,S,O,R,M,H,J,W,Q,ge,be,ve,Be;const je=Le=>X(Le)&&(vi(Le)||o.is(Le,"figure.image")),xt=Le=>yi(Le)||o.hasClass(Le,"mce-preview-object"),Kt=(Le,dt)=>{if(G7(Le)){const $t=Le.touches[0];return je(Le.target)&&!_5($t.clientX,$t.clientY,dt)}else return je(Le.target)&&!_5(Le.clientX,Le.clientY,dt)},Me=Le=>{const dt=Le.target;Kt(Le,t.selection.getRng())&&!Le.isDefaultPrevented()&&t.selection.select(dt)},Te=Le=>o.hasClass(Le,"mce-preview-object")&&X(Le.firstElementChild)?[Le,Le.firstElementChild]:o.is(Le,"figure.image")?[Le.querySelector("img")]:[Le],$e=Le=>{const dt=eE(t);return!dt||t.mode.isReadOnly()||Le.getAttribute("data-mce-resize")==="false"||Le===t.getBody()?!1:o.hasClass(Le,"mce-preview-object")&&X(Le.firstElementChild)?Fc(te.fromDom(Le.firstElementChild),dt):Fc(te.fromDom(Le),dt)},yt=(Le,dt)=>{if(xt(dt))return Le.create("img",{src:fo.transparentSrc});if(Uc(dt)){const to=hn(S.name,"n")?Ws:mr,Zn=dt.cloneNode(!0);return to(Le.select("tr",Zn)).each(Jo=>{const Oi=Le.select("td,th",Jo);Le.setStyle(Jo,"height",null),xe(Oi,Yd=>Le.setStyle(Yd,"height",null))}),Zn}else return dt.cloneNode(!0)},Sn=(Le,dt,$t)=>{Le[dt]=$t;const to=400;if(Le.width>to&&!(dt==="width"&&$t<to))Le[dt]=$t,o.setStyle(Le,dt,$t);else{const Zn=dt==="height"?to*(W??1):to;Le[dt]=Zn,o.setStyle(Le,dt,Zn)}},wn=(Le,dt,$t)=>{if(X($t)){const to=Te(Le);xe(to,Zn=>{g1(Zn)?Sn(Zn,dt,$t):Zn.style[dt]||!t.schema.isValid(Zn.nodeName.toLowerCase(),dt)?o.setStyle(Zn,dt,$t):o.setAttrib(Zn,dt,""+$t)})}},uo=(Le,dt,$t)=>{wn(Le,"width",dt),wn(Le,"height",$t)},qo=Le=>{let dt,$t,to,Zn,Jo;dt=Le.screenX-R,$t=Le.screenY-M,ge=dt*S[2]+H,be=$t*S[3]+J,ge=ge<5?5:ge,be=be<5?5:be,(je(f)||xt(f)||g1(f))&&P3(t)!==!1?to=!Et.modifierPressed(Le):to=Et.modifierPressed(Le),to&&(Z7(dt)>Z7($t)?(be=TA(ge*W),ge=TA(be/W)):(ge=TA(be/W),be=TA(ge*W))),uo(b,ge,be),Zn=S.startPos.x+dt,Jo=S.startPos.y+$t,Zn=Zn>0?Zn:0,Jo=Jo>0?Jo:0,o.setStyles(v,{left:Zn,top:Jo,display:"block"}),v.innerHTML=ge+" &times; "+be,dt=u.scrollWidth-ve,$t=u.scrollHeight-Be,dt+$t!==0&&o.setStyles(v,{left:Zn-dt,top:Jo-$t}),Q||(Rw(t,f,H,J,"corner-"+S.name),Q=!0)},Cs=()=>{const Le=Q;Q=!1,Le&&(wn(f,"width",ge),wn(f,"height",be)),o.unbind(r,"mousemove",qo),o.unbind(r,"mouseup",Cs),c!==r&&(o.unbind(c,"mousemove",qo),o.unbind(c,"mouseup",Cs)),o.remove(b),o.remove(v),o.remove(O),Bs(f),Le&&(rC(t,f,ge,be,"corner-"+S.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),t.nodeChanged()},Bs=Le=>{Ho();const dt=o.getPos(Le,u),$t=dt.x,to=dt.y,Zn=Le.getBoundingClientRect(),Jo=Zn.width||Zn.right-Zn.left,Oi=Zn.height||Zn.bottom-Zn.top;f!==Le&&(_i(),f=Le,ge=be=0);const Yd=t.dispatch("ObjectSelected",{target:Le});$e(Le)&&!Yd.isDefaultPrevented()?Un(I5,(sd,pu)=>{const Ip=Ql=>{const ih=Te(f)[0];R=Ql.screenX,M=Ql.screenY,H=ih.clientWidth,J=ih.clientHeight,W=J/H,S=sd,S.name=pu,S.startPos={x:Jo*sd[0]+$t,y:Oi*sd[1]+to},ve=u.scrollWidth,Be=u.scrollHeight,O=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=yt(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:$t,top:to,margin:0}),uo(b,Jo,Oi),b.removeAttribute(ub),u.appendChild(b),o.bind(r,"mousemove",qo),o.bind(r,"mouseup",Cs),c!==r&&(o.bind(c,"mousemove",qo),o.bind(c,"mouseup",Cs)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},H+" &times; "+J)};let Jc=o.get("mceResizeHandle"+pu);Jc&&o.remove(Jc),Jc=o.add(u,"div",{id:"mceResizeHandle"+pu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+pu+"-resize; margin:0; padding:0"}),o.bind(Jc,"mousedown",Ql=>{Ql.stopImmediatePropagation(),Ql.preventDefault(),Ip(Ql)}),sd.elm=Jc,o.setStyles(Jc,{left:Jo*sd[0]+$t-Jc.offsetWidth/2,top:Oi*sd[1]+to-Jc.offsetHeight/2})}):_i(!1)},Na=vt(Bs,0),_i=(Le=!0)=>{Na.cancel(),Ho(),f&&Le&&f.removeAttribute(ub),Un(I5,(dt,$t)=>{const to=o.get("mceResizeHandle"+$t);to&&(o.unbind(to),o.remove(to))})},At=(Le,dt)=>o.isChildOf(Le,dt),sn=Le=>{if(Q||t.removed||t.composing)return;const dt=Le.type==="mousedown"?Le.target:e.getNode(),$t=ua(te.fromDom(dt),W7).map(Zn=>Zn.dom).filter(Zn=>o.isEditable(Zn.parentElement)||Zn.nodeName==="IMG"&&o.isEditable(Zn)).getOrUndefined(),to=X($t)?o.getAttrib($t,ub,"1"):"1";if(xe(o.select(`img[${ub}],hr[${ub}]`),Zn=>{Zn.removeAttribute(ub)}),X($t)&&At($t,u)&&B5(t)){Ao();const Zn=e.getStart(!0);if(At(Zn,$t)&&At(e.getEnd(!0),$t)){o.setAttrib($t,ub,to),Na.throttle($t);return}}_i()},Ho=()=>{Un(I5,Le=>{Le.elm&&(o.unbind(Le.elm),delete Le.elm)})},Ao=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Ao(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",sn),t.on("keyup compositionend",Le=>{f&&f.nodeName==="TABLE"&&sn(Le)}),t.on("hide blur",_i),t.on("contextmenu longpress",Me,!0)}),t.on("remove",Ho),{isResizable:$e,showResizeRect:Bs,hideResizeRect:_i,updateResizeRect:sn,destroy:()=>{Na.cancel(),f=b=O=null}}},F5=(e,t,o)=>{const r=ui(te.fromDom(o));return l0(r.dom,e,t).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Wg=(e,t)=>X(e)&&X(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,K7=(e,t,o)=>{let r=e;for(;r&&r!==t;){if(o(r))return r;r=r.parentNode}return null},kA=(e,t,o)=>K7(e,t,o)!==null,L5=(e,t,o)=>kA(e,t,r=>r.nodeName===o),H5=(e,t)=>Wl(e)&&!kA(e,t,z),AA=(e,t,o)=>{const r=t.parentNode;if(r){const c=new er(t,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(Vs(u))return!0}return!1},_A=(e,t)=>e.previousSibling?.nodeName===t,DX=(e,t)=>{let o=t;for(;o&&o!==e;){if(Ts(o))return!0;o=o.parentNode}return!1},OA=(e,t,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,S;if(!b)return P.none();const O=e.getParent(b,e.isBlock)||u;if(r&&Vs(c)&&t&&e.isEmpty(O))return P.some(Re(b,e.nodeIndex(c)));const R=new er(c,O);for(;S=R[r?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||H5(S,u))return P.none();if(tt(S)&&S.data.length>0)return L5(S,u,"A")?P.none():P.some(Re(S,r?S.data.length:0));if(e.isBlock(S)||f[S.nodeName.toLowerCase()])return P.none();v=S}return zn(v)?P.none():o&&v?P.some(Re(v,0)):P.none()},Y7=(e,t,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const S=pt(b)&&v===b.childNodes.length,O=e.schema.getNonEmptyElements();let R=o;if(Wl(b))return P.none();if(pt(b)&&v>b.childNodes.length-1&&(R=!1),lm(b)&&(b=c,v=0),b===c){if(R&&(u=b.childNodes[v>0?v-1:0],u&&(Wl(u)||O[u.nodeName]||Uc(u))))return P.none();if(b.hasChildNodes()){if(v=Math.min(!R&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=tt(b)&&S?b.data.length:0,!t&&b===c.lastChild&&Uc(b)||DX(c,b)||Wl(b)||f1(b))return P.none();if(b.hasChildNodes()&&!Uc(b)){u=b;const M=new er(b,c);do{if(Ts(u)||Wl(u)){f=!1;break}if(tt(u)&&u.data.length>0){v=R?0:u.data.length,b=u,f=!0;break}if(O[u.nodeName.toLowerCase()]&&!i2(u)){v=e.nodeIndex(u),b=u.parentNode,R||v++,f=!0;break}}while(u=R?M.next():M.prev())}}}return t&&(tt(b)&&v===0&&OA(e,S,t,!0,b).each(M=>{b=M.container(),v=M.offset(),f=!0}),pt(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&Vs(u)&&!_A(u,"A")&&!AA(e,u,!1)&&!AA(e,u,!0)&&OA(e,S,t,!0,u).each(M=>{b=M.container(),v=M.offset(),f=!0}))),R&&!t&&tt(b)&&v===b.data.length&&OA(e,S,t,!1,b).each(M=>{b=M.container(),v=M.offset(),f=!0}),f&&b?P.some(Re(b,v)):P.none()},VE=(e,t)=>{const o=t.collapsed,r=t.cloneRange(),c=Re.fromRangeStart(t);return Y7(e,o,!0,r).each(u=>{(!o||!Re.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Y7(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Wg(t,r)?P.none():P.some(r)},UE=(e,t)=>e.splitText(t),Lv=e=>{let t=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(t===r&&tt(t)){if(o>0&&o<t.data.length)if(r=UE(t,o),t=r.previousSibling,c>o){c=c-o;const u=UE(r,c).previousSibling;t=r=u,c=u.data.length,o=0}else c=0}else if(tt(t)&&o>0&&o<t.data.length&&(t=UE(t,o),o=0),tt(r)&&c>0&&c<r.data.length){const u=UE(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:t,startOffset:o,endContainer:r,endOffset:c}},_m=e=>({walk:(u,f)=>Bd(e,u,f),split:Lv,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=Pf(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>VE(e,u).fold(ye,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});_m.compareRanges=Wg,_m.getCaretRangeFromPoint=F5,_m.getSelectedNode=Wr,_m.getNode=Sf;const X7=(e,t)=>e.view(t).fold(st([]),r=>{const c=e.owner(r),u=X7(e,c);return[r].concat(u)}),RX=(e,t)=>{const o=t.owner(e);return X7(t,o)};var MX=Object.freeze({__proto__:null,view:e=>(e.dom===document?P.none():P.from(e.dom.defaultView?.frameElement)).map(te.fromDom),owner:e=>Bl(e)});const Q7=e=>{const t=bh(),o=s1(t),r=RX(e,MX),c=ug(e),u=qn(r,(f,b)=>{const v=ug(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return fi(u.left+c.left+o.left,u.top+c.top+o.top)},jE=e=>Hn(e)==="textarea",J7=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),z5=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},PX=(e,t)=>{const o=Ds(e);if(o.length===0||jE(e))return{element:e,offset:t};if(t<o.length&&!jE(o[t]))return{element:o[t],offset:0};{const r=o[o.length-1];return jE(r)?{element:e,offset:t}:Hn(r)==="img"?{element:r,offset:1}:Eo(r)?{element:r,offset:Sa(r).length}:{element:r,offset:Ds(r).length}}},V5=(e,t)=>{const o=ig(e),r=Jy(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:t}},U5=(e,t)=>{const o=PX(e,t),r=te.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+jr+"</span>");return la(o.element,r),V5(r,()=>Ko(r))},eH=e=>V5(te.fromDom(e),St),j5=(e,t,o,r)=>{nH(e,(c,u)=>tH(e,t,o,r),o)},W5=(e,t,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(J7(e,u))return;const f=s1(t).top;o(e,t,f,r,c),z5(e,u)},tH=(e,t,o,r)=>{const c=te.fromDom(e.getBody()),u=te.fromDom(e.getDoc());n1(c);const f=U5(te.fromDom(o.startContainer),o.startOffset);W5(e,u,t,f,r),f.cleanup()},Z5=(e,t,o,r)=>{const c=te.fromDom(e.getDoc());W5(e,c,o,eH(t),r)},nH=(e,t,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;t(te.fromDom(r),te.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},DA=(e,t,o,r,c)=>{const u=t.pos,f=30;if(r)s0(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+t.height+f;s0(-e.getBody().getBoundingClientRect().left,b,c)}},G5=(e,t,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,S=v-b>=r;b<o?DA(e,c,r,u!==!1,t):b>f?DA(e,c,r,S?u!==!1:u===!0,t):v>f&&!S&&DA(e,c,r,u===!0,t)},q5=(e,t,o,r,c)=>{const u=ui(t).dom.innerHeight;G5(e,t,o,u,r,c)},K5=(e,t,o,r,c)=>{const u=ui(t).dom.innerHeight;G5(e,t,o,u,r,c);const f=Q7(r.element),b=dl(window);f.top<b.y?Ll(r.element,c!==!1):f.top>b.bottom&&Ll(r.element,c===!0)},oH=(e,t,o)=>j5(e,q5,t,o),sH=(e,t,o)=>Z5(e,t,q5,o),rH=(e,t,o)=>j5(e,K5,t,o),aH=(e,t,o)=>Z5(e,t,K5,o),_t=(e,t,o)=>{(e.inline?sH:aH)(e,t,o)},lu=(e,t,o)=>{(e.inline?oH:rH)(e,t,o)},cH=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),Y5=(e,t,o,r,c)=>{const u=o?t.startContainer:t.endContainer,f=o?t.startOffset:t.endOffset;return P.from(u).map(te.fromDom).map(b=>!r||!t.collapsed?$l(b,c(b,f)).getOr(b):b).bind(b=>Fs(b)?P.some(b):tc(b).filter(Fs)).map(b=>b.dom).getOr(e)},WE=(e,t,o=!1)=>Y5(e,t,!0,o,(r,c)=>Math.min(gd(r),c)),RA=(e,t,o=!1)=>Y5(e,t,!1,o,(r,c)=>c>0?c-1:c),NA=(e,t)=>{const o=e;for(;e&&tt(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||o},MA=(e,t)=>{if(!t)return e;let o=t.startContainer,r=t.endContainer;const c=t.startOffset,u=t.endOffset;let f=t.commonAncestorContainer;t.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),tt(o)&&tt(r)&&(o.length===c?o=NA(o.nextSibling,!0):o=o.parentNode,u===0?r=NA(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=tt(f)?f.parentNode:f;return Vc(b)?b:e},lH=(e,t,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||WE(u,t,t.collapsed),e.isBlock),b=e.getParent(r||RA(u,t,t.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const S=new er(f,u);for(;(v=S.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},X5=(e,t,o)=>P.from(t).bind(r=>P.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(_E(e,f,r,!0),_E(e,f,r,!1)),f})),PA=(e,t)=>en(t,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),iH={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},ZE=(e,t,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==t){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==t;f=f.parent)if(u=f[c],u)return u}},uH=e=>{const t=e.value??"";if(!kh(t))return!1;const o=e.parent;return!(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(t))},Q5=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Oa{static create(t,o){const r=new Oa(t,iH[t]||1);return o&&Un(o,(c,u)=>{r.attr(u,c)}),r}name;type;attributes;value;parent;firstChild;lastChild;next;prev;raw;constructor(t,o){this.name=t,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(t){const o=this;return t.parent&&t.remove(),o.insert(t,o),o.remove(),o}attr(t,o){const r=this;if(!U(t))return X(t)&&Un(t,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(t in c.map){delete c.map[t];let u=c.length;for(;u--;)if(c[u].name===t)return c.splice(u,1),r}return r}if(t in c.map){let u=c.length;for(;u--;)if(c[u].name===t){c[u].value=o;break}}else c.push({name:t,value:o});return c.map[t]=o,r}return c.map[t]}}clone(){const t=this,o=new Oa(t.name,t.type),r=t.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=t.value,o}wrap(t){const o=this;return o.parent&&(o.parent.insert(t,o),t.append(o)),o}unwrap(){const t=this;for(let o=t.firstChild;o;){const r=o.next;t.insert(o,t,!0),o=r}t.remove()}remove(){const t=this,o=t.parent,r=t.next,c=t.prev;return o&&(o.firstChild===t?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===t?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),t.parent=t.next=t.prev=null),t}append(t){const o=this;t.parent&&t.remove();const r=o.lastChild;return r?(r.next=t,t.prev=r,o.lastChild=t):o.lastChild=o.firstChild=t,t.parent=o,t}insert(t,o,r){t.parent&&t.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=t:o.prev&&(o.prev.next=t),t.prev=o.prev,t.next=o,o.prev=t):(o===c.lastChild?c.lastChild=t:o.next&&(o.next.prev=t),t.next=o.next,t.prev=o,o.next=t),t.parent=c,t}getAll(t){const o=this,r=[];for(let c=o.firstChild;c;c=ZE(c,o))c.name===t&&r.push(c);return r}children(){const t=this,o=[];for(let r=t.firstChild;r;r=r.next)o.push(r);return o}empty(){const t=this;if(t.firstChild){const o=[];for(let c=t.firstChild;c;c=ZE(c,t))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,o={},r){const c=this;let u=c.firstChild;if(Q5(c))return!1;if(u)do{if(u.type===1){if(u.attr("data-mce-bogus"))continue;if(t[u.name]||Q5(u))return!1}if(u.type===8||u.type===3&&!uH(u)||u.type===3&&u.parent&&o[u.parent.name]&&kh(u.value??"")||r&&r(u))return!1}while(u=ZE(u,c));return!0}walk(t){return ZE(this,null,t)}}const dH=Je.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),J5=e=>U(e.nodeValue)&&e.nodeValue.includes(jr),eM=e=>`${e.length===0?"":`${en(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,mH=(e,t)=>t.querySelectorAll(eM(e)),tM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>J5(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),BA=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(J5(t)){const o=t.parentNode;return o&&kn(dH,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),GE=e=>tM(e).nextNode()!==null,fH=e=>BA(e).nextNode()!==null,gH=(e,t)=>t.querySelector(eM(e))!==null,hH=(e,t)=>{xe(mH(e,t),o=>{const r=te.fromDom(o);hs(r,"data-mce-bogus")==="all"?Ko(r):xe(e,c=>{xs(r,c)&&rr(r,c)})})},nM=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},pH=A(nM,tM),bH=A(nM,BA),oM=(e,t)=>{const o=[{condition:de(gH,t),action:de(hH,t)},{condition:GE,action:pH},{condition:fH,action:bH}];let r=e,c=!1;return xe(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},sM=e=>{const t=Ne(e,"[data-mce-bogus]");xe(t,o=>{hs(o,"data-mce-bogus")==="all"?Ko(o):eu(o)?(la(o,te.fromText(Bc)),Ko(o)):pc(o)})},rM=e=>{const t=Ne(e,"input");xe(t,o=>{rr(o,"name")})},vH=(e,t)=>{const o=_r(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(r,"")},yH=(e,t)=>{const o=e.getDoc(),r=Lr(te.fromDom(e.getBody())),c=te.fromTag("div",o);ws(c,"data-mce-bogus","all"),bc(c,{position:"fixed",left:"-9999999px",top:"0"}),_u(c,t.innerHTML),sM(c),rM(c);const u=t0(r);bo(u,c);const f=qc(c.dom.innerText);return Ko(c),f},CH=(e,t,o)=>{let r;return t.format==="raw"?r=Je.trim(qc(oM(o,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?r=yH(e,o):t.format==="tree"?r=e.serializer.serialize(o,t):r=vH(e,e.serializer.serialize(o,t)),t.format!=="text"&&!P0(te.fromDom(o))&&U(r)?Je.trim(r):r},xH=(e,t)=>P.from(e.getBody()).fold(st(t.format==="tree"?new Oa("body",11):""),o=>CH(e,t,o)),aM=Je.makeMap,$A=e=>{const t=[];e=e||{};const o=e.indent,r=aM(e.indent_before||""),c=aM(e.indent_after||""),u=hl.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,S)=>{if(o&&r[b]&&t.length>0){const O=t[t.length-1];O.length>0&&O!==`
`&&t.push(`
`)}if(t.push("<",b),v)for(let O=0,R=v.length;O<R;O++){const M=v[O];t.push(" ",M.name,'="',u(M.value,!0),'"')}if(!S||f?t[t.length]=">":t[t.length]=" />",S&&o&&c[b]&&t.length>0){const O=t[t.length-1];O.length>0&&O!==`
`&&t.push(`
`)}},end:b=>{let v;t.push("</",b,">"),o&&c[b]&&t.length>0&&(v=t[t.length-1],v.length>0&&v!==`
`&&t.push(`
`))},text:(b,v)=>{b.length>0&&(t[t.length]=v?b:u(b))},cdata:b=>{t.push("<![CDATA[",b,"]]>")},comment:b=>{t.push("<!--",b,"-->")},pi:(b,v)=>{v?t.push("<?",b," ",u(v),"?>"):t.push("<?",b,"?>"),o&&t.push(`
`)},doctype:b=>{t.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},fp=(e={},t=Ea())=>{const o=$A(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{o.text(v.value??"",v.raw)},8:v=>{o.comment(v.value??"")},7:v=>{o.pi(v.name,v.value)},10:v=>{o.doctype(v.value??"")},4:v=>{o.cdata(v.value??"")},11:v=>{let S=v;if(S=S.firstChild)do b(S);while(S=S.next)}};o.reset();const b=v=>{const S=f[v.type];if(S)S(v);else{const O=v.name,R=O in t.getVoidElements();let M=v.attributes;if(u&&M&&M.length>1){const H=[];H.map={};const J=t.getElementRule(v.name);if(J){for(let W=0,Q=J.attributesOrder.length;W<Q;W++){const ge=J.attributesOrder[W];if(ge in M.map){const be=M.map[ge];H.map[ge]=be,H.push({name:ge,value:be})}}for(let W=0,Q=M.length;W<Q;W++){const ge=M[W].name;if(!(ge in H.map)){const be=M.map[ge];H.map[ge]=be,H.push({name:ge,value:be})}}M=H}}if(o.start(O,M,R),pg(O))U(v.value)&&o.text(v.value,!0),o.end(O);else if(!R){let H=v.firstChild;if(H){(O==="pre"||O==="textarea")&&H.type===3&&H.value?.[0]===`
`&&o.text(`
`,!0);do b(H);while(H=H.next)}o.end(O)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},cM=new Set;xe(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{cM.add(t)});const JC=new Set;xe(["background-color"],t=>{JC.add(t)});const gp=["font","text-decoration","text-emphasis"],qE=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),Hv=(e,t)=>Vt(qE(e,t)),SH=e=>cM.has(e),wH=e=>JC.has(e),lM=(e,t)=>po(Hv(e,t),o=>SH(o)),iM=(e,t)=>lM(e,t)&&po(Hv(e,t),o=>wH(o)),EH=e=>ze(e,t=>po(gp,o=>hn(t,o))),TH=(e,t,o)=>{const r=Hv(e,t),c=Hv(e,o),u=f=>{const b=e.getStyle(t,f)??"",v=e.getStyle(o,f)??"";return fs(b)&&fs(v)&&b!==v};return po(r,f=>{const b=v=>po(v,S=>S===f);if(!b(c)&&b(gp)){const v=EH(c);return po(v,u)}else return u(f)})},IA=(e,t,o)=>P.from(o.container()).filter(tt).exists(r=>{const c=e?0:-1;return t(r.data.charAt(o.offset()+c))}),FA=de(IA,!0,ql),KE=de(IA,!1,ql),kH=e=>{const t=e.container();return tt(t)&&(t.data.length===0||_1(t.data)&&$v.isBookmarkNode(t.parentNode))},hp=(e,t)=>o=>$C(e?0:-1,o).filter(t).isSome(),uM=e=>vi(e)&&Hs(te.fromDom(e),"display")==="block",LA=e=>Ts(e)&&!Vk(e),HA=hp(!0,uM),dM=hp(!1,uM),ex=hp(!0,yi),tx=hp(!1,yi),nx=hp(!0,Uc),zA=hp(!1,Uc),Zg=hp(!0,LA),Bf=hp(!1,LA),mM=e=>e.slice(0,-1),AH=(e,t,o)=>ec(t,e)?mM(Ca(e,r=>o(r)||Qn(r,t))):[],fM=(e,t)=>AH(e,t,ye),Fd=(e,t)=>[e].concat(fM(e,t)),YE=(e,t,o)=>i(e,t,o,kH),gM=e=>t=>e.isBlock(Hn(t)),VA=(e,t,o)=>Oo(Fd(te.fromDom(t.container()),e),gM(o)),UA=(e,t,o,r)=>YE(e,t.dom,o).forall(c=>VA(t,o,r).fold(()=>!Nd(c,o,t.dom),u=>!Nd(c,o,t.dom)&&ec(u,te.fromDom(c.container())))),jA=(e,t,o,r)=>VA(t,o,r).fold(()=>YE(e,t.dom,o).forall(c=>!Nd(c,o,t.dom)),c=>YE(e,c.dom,o).isNone()),XE=de(jA,!1),WA=de(jA,!0),hM=de(UA,!1),pM=de(UA,!0),bM=e=>ab(e).exists(eu),QE=(e,t,o,r)=>{const c=ze(Fd(te.fromDom(o.container()),t),f=>r.isBlock(Hn(f))),u=Ws(c).getOr(t);return Gl(e,u.dom,o).filter(bM)},ZA=(e,t,o)=>ab(t).exists(eu)||QE(!0,e,t,o).isSome(),JE=(e,t,o)=>IC(t).exists(eu)||QE(!1,e,t,o).isSome(),vM=de(QE,!1),_H=de(QE,!0),yM=e=>Re.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),CM=(e,t,o)=>{const r=ze(Fd(te.fromDom(t.container()),e),c=>o.isBlock(Hn(c)));return Ws(r).getOr(e)},xM=(e,t,o)=>yM(t)?KE(t):KE(t)||y(CM(e,t,o).dom,t).exists(KE),SM=(e,t,o)=>yM(t)?FA(t):FA(t)||p(CM(e,t,o).dom,t).exists(FA),OH=e=>Lt(["pre","pre-wrap"],e),eT=e=>ab(e).bind(t=>jo(t,Fs)).exists(t=>OH(Hs(t,"white-space"))),BX=(e,t)=>y(e.dom,t).isNone(),$X=(e,t)=>p(e.dom,t).isNone(),DH=(e,t,o)=>BX(e,t)||$X(e,t)||XE(e,t,o)||WA(e,t,o)||JE(e,t,o)||ZA(e,t,o),IX=e=>X(e)&&Ts(e)&&MC(e),wM=(e,t)=>o=>IX(new er(o,e)[t]()),Dc=(e,t)=>{const o=p(e.dom,t).getOr(t),r=wM(e.dom,"next");return t.isAtEnd()&&(r(t.container())||r(o.container()))},RH=(e,t)=>{const o=y(e.dom,t).getOr(t),r=wM(e.dom,"prev");return t.isAtStart()&&(r(t.container())||r(o.container()))},NH=(e,t,o)=>eT(t)?!1:DH(e,t,o)||xM(e,t,o)||SM(e,t,o),ox=(e,t,o)=>eT(t)?!1:XE(e,t,o)||hM(e,t,o)||JE(e,t,o)||xM(e,t,o)||RH(e,t),MH=e=>{const t=e.container(),o=e.offset();return tt(t)&&o<t.data.length?Re(t,o+1):e},Rc=(e,t,o)=>eT(t)?!1:WA(e,t,o)||pM(e,t,o)||ZA(e,t,o)||SM(e,t,o)||Dc(e,t),EM=(e,t,o)=>ox(e,t,o)||Rc(e,MH(t),o),TM=(e,t)=>sc(e.charAt(t)),PH=(e,t)=>ql(e.charAt(t)),BH=e=>{const t=e.container();return tt(t)&&_s(t.data,Is)},$H=e=>{const t=e.split("");return en(t,(o,r)=>sc(o)&&r>0&&r<t.length-1&&Aa(t[r-1])&&Aa(t[r+1])?" ":o).join("")},IH=(e,t,o,r)=>{const c=t.data,u=Re(t,0);return!o&&TM(c,0)&&!EM(e,u,r)?(t.data=" "+c.slice(1),!0):o&&PH(c,0)&&ox(e,u,r)?(t.data=Is+c.slice(1),!0):!1},FH=e=>{const t=e.data,o=$H(t);return o!==t?(e.data=o,!0):!1},Kl=(e,t,o,r)=>{const c=t.data,u=Re(t,c.length-1);return!o&&TM(c,c.length-1)&&!EM(e,u,r)?(t.data=c.slice(0,-1)+" ",!0):o&&PH(c,c.length-1)&&Rc(e,u,r)?(t.data=c.slice(0,-1)+Is,!0):!1},kM=(e,t,o)=>{const r=t.container();if(!tt(r))return P.none();if(BH(t)){const c=IH(e,r,!1,o)||FH(r)||Kl(e,r,!1,o);return Ia(c,t)}else if(EM(e,t,o)){const c=IH(e,r,!0,o)||Kl(e,r,!0,o);return Ia(c,t)}else return P.none()},AM=e=>{const t=te.fromDom(e.getBody());e.selection.isCollapsed()&&kM(t,Re.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},_M=(e,t,o,r)=>{if(o===0)return;const c=te.fromDom(e),u=qi(c,S=>r.isBlock(Hn(S))).getOr(c),f=e.data.slice(t,t+o),b=t+o>=e.data.length&&Rc(u,Re(e,e.data.length),r),v=t===0&&ox(u,Re(e,0),r);e.replaceData(t,o,u0(f,4,v,b))},tT=(e,t,o)=>{const r=e.data.slice(t),c=r.length-em(r).length;_M(e,t,c,o)},nT=(e,t,o)=>{const r=e.data.slice(0,t),c=r.length-Ii(r).length;_M(e,t-c,c,o)},oT=(e,t,o,r,c=!0)=>{const u=Ii(e.data).length,f=c?e:t,b=c?t:e;return c?f.appendData(b.data):f.insertData(0,b.data),Ko(te.fromDom(b)),r&&tT(f,u,o),f},LH=(e,t)=>{const o=e.container(),r=e.offset();return!Re.isTextPosition(e)&&o===t.parentNode&&r>Re.before(t).offset()},HH=(e,t)=>LH(t,e)?Re(t.container(),t.offset()-1):t,zH=e=>tt(e)?Re(e,0):Re.before(e),VH=e=>tt(e)?Re(e,e.data.length):Re.after(e),GA=e=>Ns(e.previousSibling)?P.some(VH(e.previousSibling)):e.previousSibling?D(e.previousSibling):P.none(),OM=e=>Ns(e.nextSibling)?P.some(zH(e.nextSibling)):e.nextSibling?E(e.nextSibling):P.none(),DM=(e,t)=>P.from(t.previousSibling?t.previousSibling:t.parentNode).bind(o=>y(e,Re.before(o))).orThunk(()=>p(e,Re.after(t))),UH=(e,t)=>p(e,Re.after(t)).orThunk(()=>y(e,Re.before(t))),FX=(e,t)=>GA(t).orThunk(()=>OM(t)).orThunk(()=>DM(e,t)),jH=(e,t)=>OM(t).orThunk(()=>GA(t)).orThunk(()=>UH(e,t)),WH=(e,t,o)=>e?jH(t,o):FX(t,o),LX=(e,t,o)=>WH(e,t,o).map(de(HH,o)),RM=(e,t,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},Co=e=>t=>t.dom===e,sx=(e,t)=>t&&kn(e.schema.getBlockElements(),Hn(t)),Gg=(e,t,o)=>{if(tr(e,t)){const r=te.fromHtml('<br data-mce-bogus="1">');return o?xe(Ds(t),c=>{hA(c)||Ko(c)}):Fl(t),bo(t,r),P.some(Re.before(r.dom))}else return P.none()},db=(e,t,o,r)=>{const c=al(e).filter(Eo),u=nc(e).filter(Eo);return Ko(e),_l(c,u,t,(f,b,v)=>{const S=f.dom,O=b.dom,R=S.data.length;return oT(S,O,o,r),v.container()===O?Re(S,R):v}).orThunk(()=>(r&&(c.each(f=>nT(f.dom,f.dom.length,o)),u.each(f=>tT(f.dom,0,o))),t))},sT=(e,t)=>kn(e.schema.getTextInlineElements(),Hn(t)),$f=(e,t,o,r=!0,c=!1)=>{const u=LX(t,e.getBody(),o.dom),f=qi(o,de(sx,e),Co(e.getBody())),b=db(o,u,e.schema,sT(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>Gg(e.schema,v,c)).fold(()=>{r&&RM(e,t,b)},v=>{r&&RM(e,t,P.some(v))})},qA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,NM=e=>qA.test(e),mb=(e,t)=>Fc(te.fromDom(t),M3(e))&&!Ks(e.schema,t)&&e.dom.isEditable(t),KA=e=>lo.DOM.getStyle(e,"direction",!0)==="rtl"||NM(e.textContent??""),MM=(e,t,o)=>ze(lo.DOM.getParents(o.container(),"*",t),e),pp=(e,t,o)=>{const r=MM(e,t,o);return P.from(r[r.length-1])},ZH=(e,t,o)=>{const r=Of(t,e),c=Of(o,e);return X(r)&&r===c},GH=e=>pm(e)||Ag(e),Zu=(e,t)=>{const o=t.container(),r=t.offset();return e?Iu(o)?tt(o.nextSibling)?Re(o.nextSibling,0):Re.after(o):pm(t)?Re(o,r+1):t:Iu(o)?tt(o.previousSibling)?Re(o.previousSibling,o.previousSibling.data.length):Re.before(o):Ag(t)?Re(o,r-1):t},PM=de(Zu,!0),BM=de(Zu,!1),YA=(e,t)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(t),e.off("beforeinput input",o)},$M=e=>{e.execCommand("delete")},XA=e=>YA(e,"Delete"),qH=e=>YA(e,"ForwardDelete"),HX=e=>t=>zo(tc(t),e,Qn),KH=e=>oc(e)||Tc(e),QA=(e,t)=>ec(e,t)?jo(t,KH,HX(e)):P.none(),IM=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},FM=(e,t,o)=>Qs(E(o),D(o),(r,c)=>{const u=Zu(!0,r),f=Zu(!1,c),b=Zu(!1,t);return e?p(o,b).exists(v=>v.isEqual(f)&&t.isEqual(u)):y(o,b).exists(v=>v.isEqual(u)&&t.isEqual(f))}).getOr(!0),LM=e=>(li(e)?al(e):sr(e)).bind(LM).orThunk(()=>P.some(e)),YH=(e,t,o,r=!0)=>{t.deleteContents();const c=LM(o).getOr(o),u=te.fromDom(e.dom.getParent(c.dom,e.dom.isBlock)??o.dom);if(u.dom===e.getBody()?IM(e,r):tr(e.schema,u,{checkRootAsContent:!1})&&(vf(u),r&&e.selection.setCursorLocation(u.dom,0)),!Qn(o,u)){const f=zo(tc(u),o)?[]:Do(u);xe(f.concat(Ds(o)),b=>{!Qn(b,u)&&!ec(b,u)&&tr(e.schema,b)&&Ko(b)})}},XH=e=>t=>Qn(e,t),Yc=e=>Ne(e,"td,th"),QH=(e,t)=>Kc(te.fromDom(e),t),JH=e=>Qs(e.startTable,e.endTable,(t,o)=>{const r=Dn(t,u=>Qn(u,o)),c=Dn(o,u=>Qn(u,t));return!r&&!c?e:{...e,startTable:r?P.none():e.startTable,endTable:c?P.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),HM=e=>JH(e),zX=(e,t)=>{const o=QH(e.startContainer,t),r=QH(e.endContainer,t),c=o.isSome(),u=r.isSome(),f=Qs(o,r,Qn).getOr(!1);return HM({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},JA=(e,t)=>({start:e,end:t}),ez=(e,t,o)=>({rng:e,table:t,cells:o}),rx=tl.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),zv=(e,t)=>ua(te.fromDom(e),"td,th",t),tz=e=>!Qn(e.start,e.end),zM=(e,t)=>Kc(e.start,t).bind(o=>Kc(e.end,t).bind(r=>Ia(Qn(o,r),o))),nz=(e,t)=>!tz(e)&&zM(e,t).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),us=(e,t)=>{const o=zv(e.startContainer,t),r=zv(e.endContainer,t);return Qs(o,r,JA)},oz=e=>t=>Kc(t,e).bind(o=>mr(Yc(o)).map(r=>JA(t,r))),sz=e=>t=>Kc(t,e).bind(o=>Ws(Yc(o)).map(r=>JA(r,t))),fb=e=>t=>zM(t,e).map(o=>ez(t,o,Yc(o))),e_=(e,t,o,r)=>{if(o.collapsed||!e.forall(tz))return P.none();if(t.isSameTable){const c=e.bind(fb(r));return P.some({start:c,end:c})}else{const c=zv(o.startContainer,r),u=zv(o.endContainer,r),f=c.bind(oz(r)).bind(fb(r)),b=u.bind(sz(r)).bind(fb(r));return P.some({start:f,end:b})}},VM=(e,t)=>Jl(e,o=>Qn(o,t)),t_=e=>Qs(VM(e.cells,e.rng.start),VM(e.cells,e.rng.end),(t,o)=>e.cells.slice(t,o+1)),rz=(e,t,o)=>e.exists(r=>nz(r,o)&&dA(r.start,t)),n_=(e,t)=>{const{startTable:o,endTable:r}=t,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},az=(e,t,o,r)=>e_(e,t,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=t,f=t_(c).getOr([]);if(u&&c.cells.length===f.length)return P.some(rx.fullTable(c.table));if(f.length>0){if(u)return P.some(rx.partialTable(f,P.none()));{const b=n_(o,t);return P.some(rx.partialTable(f,P.some({...t,rng:b})))}}else return P.none()}),VX=(e,t,o,r)=>e_(e,t,o,r).bind(({start:c,end:u})=>{const f=c.bind(t_).getOr([]),b=u.bind(t_).getOr([]);if(f.length>0&&b.length>0){const v=n_(o,t);return P.some(rx.multiTable(f,b,v))}else return P.none()}),UX=(e,t)=>{const o=XH(e),r=us(t,o),c=zX(t,o);return rz(r,t,o)?r.map(u=>rx.singleCellTable(t,u.start)):c.isMultiTable?VX(r,c,t,o):az(r,c,t,o)},UM=e=>xe(e,t=>{rr(t,"contenteditable"),vf(t)}),cz=(e,t)=>P.from(e.dom.getParent(t,e.dom.isBlock)).map(te.fromDom),lz=(e,t,o)=>{o.each(r=>{t?Ko(r):(vf(r),e.selection.setCursorLocation(r.dom,0))})},o_=(e,t,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(t.dom.lastChild)):(c.setStartBefore(t.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),rT(e,c,t,!1).each(u=>u())},s_=e=>{const t=Ft(e),o=te.fromDom(e.selection.getNode());Oh(o.dom)&&tr(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),t.length>1&&po(t,r=>Qn(r,o))&&ws(o,"data-mce-selected","1")},jM=(e,t,o)=>P.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=cz(e,f?u.endContainer:u.startContainer);u.deleteContents(),lz(e,f,b.filter(de(tr,e.schema)));const v=f?t[0]:t[t.length-1];return o_(e,v,r,f),tr(e.schema,v)?P.none():P.some(f?t.slice(1):t.slice(0,-1))}).getOr(t);UM(c),s_(e)}),eo=(e,t,o,r)=>P.some(()=>{const c=e.selection.getRng(),u=t[0],f=o[o.length-1];o_(e,u,c,!0),o_(e,f,c,!1);const b=tr(e.schema,u)?t:t.slice(1),v=tr(e.schema,f)?o:o.slice(0,-1);UM(b.concat(v)),r.deleteContents(),s_(e)}),rT=(e,t,o,r=!0)=>P.some(()=>{YH(e,t,o,r)}),ax=(e,t)=>P.some(()=>$f(e,!1,t)),cx=(e,t,o)=>UX(t,o).bind(r=>r.fold(de(rT,e),de(ax,e),de(jM,e),de(eo,e))),lx=(e,t)=>r_(e,t),ix=(e,t,o,r)=>ZM(t,r).fold(()=>cx(e,t,o),c=>lx(e,c)),WM=(e,t,o)=>{const r=te.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?jM(e,o,P.none()):ix(e,r,c,t)},iz=(e,t)=>Oo(Fd(t,e),kg),ZM=(e,t)=>Oo(Fd(t,e),gr("caption")),jX=(e,t,o,r,c)=>mp(o,e.getBody(),c).bind(u=>iz(t,te.fromDom(u.getNode())).bind(f=>Qn(f,r)?P.none():P.some(St))),r_=(e,t)=>P.some(()=>{vf(t),e.selection.setCursorLocation(t.dom,0)}),uz=(e,t,o,r)=>E(e.dom).bind(c=>D(e.dom).map(u=>t?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),WX=(e,t)=>r_(e,t),dz=(e,t,o)=>ZM(e,te.fromDom(o.getNode())).fold(()=>P.some(St),r=>Ia(!Qn(r,t),St)),mz=(e,t,o,r,c)=>mp(o,e.getBody(),c).fold(()=>P.some(St),u=>uz(r,o,c,u)?WX(e,r):dz(t,r,u)),ZX=(e,t,o,r)=>{const c=Re.fromRangeStart(e.selection.getRng());return iz(o,r).bind(u=>tr(e.schema,u,{checkRootAsContent:!1})?r_(e,u):jX(e,o,t,u,c))},fz=(e,t,o,r)=>{const c=Re.fromRangeStart(e.selection.getRng());return tr(e.schema,r)?r_(e,r):mz(e,o,t,r,c)},bs=(e,t)=>e?nx(t):zA(t),GX=(e,t)=>{const o=Re.fromRangeStart(e.selection.getRng());return bs(t,o)||Gl(t,e.getBody(),o).exists(r=>bs(t,r))},qX=(e,t,o)=>{const r=te.fromDom(e.getBody());return ZM(r,o).fold(()=>ZX(e,t,r,o).orThunk(()=>Ia(GX(e,t),St)),c=>fz(e,t,r,c))},a_=(e,t)=>{const o=te.fromDom(e.selection.getStart(!0)),r=Ft(e);return e.selection.isCollapsed()&&r.length===0?qX(e,t,o):WM(e,o,r)},Om=(e,t)=>{let o=t;for(;o&&o!==e;){if(ml(o)||Ts(o))return o;o=o.parentNode}return null},gz=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],hz=Je.each,Dm=e=>{const t=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=S=>{const O={};return hz(t.getAttribs(S),R=>{const M=R.nodeName.toLowerCase();M!=="style"&&!c(M)&&(O[M]=t.getAttrib(S,M))}),O},v=(S,O)=>{for(const R in S)if(kn(S,R)){const M=O[R];if(Gn(M)||S[R]!==M)return!1;delete O[R]}for(const R in O)if(kn(O,R))return!1;return!0};return pt(u)&&pt(f)&&(!v(b(u),b(f))||!v(t.parseStyle(t.getAttrib(u,"style")),t.parseStyle(t.getAttrib(f,"style"))))?!1:!Xs(u)&&!Xs(f)},c=u=>po(gz,f=>hn(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},To=(e,t)=>{if(tt(e))return{container:e,offset:t};const o=_m.getNode(e,t);return tt(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&tt(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&tt(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},fa=e=>{const t=e.cloneRange(),o=To(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=To(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},iu=lo.DOM,pz=()=>iu.create("span",{"data-mce-type":"bookmark"}),GM=(e,t,o)=>{if(pt(e)){const r=o();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[t]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:t}},qM=(e,t)=>{const o=r=>{let c=r.parentNode?.firstChild,u=0;for(;c;){if(c===r)return u;(!pt(c)||c.getAttribute("data-mce-type")!=="bookmark")&&u++,c=c.nextSibling}return-1};if(pt(e)&&X(e.parentNode)){const r=e;t=o(e),e=e.parentNode,iu.remove(r),!e.hasChildNodes()&&iu.isBlock(e)&&e.appendChild(iu.create("br"))}return{container:e,offset:t}},KM=(e,t,o,r)=>{const c=iu.createRng();return c.setStart(e,t),c.setEnd(o,r),fa(c)},If=(e,t=pz)=>{const{container:o,offset:r}=GM(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=GM(e.endContainer,e.endOffset,t);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},Gu=e=>{const{container:t,offset:o}=qM(e.startContainer,e.startOffset);if(!Gn(e.endContainer)&&!Gn(e.endOffset)){const{container:r,offset:c}=qM(e.endContainer,e.endOffset);return KM(t,o,r,c)}else return KM(t,o,t,o)},c_=(e,t,o,r)=>{if(Je.each(o.styles,(c,u)=>{e.setStyle(t,u,jg(c,r))}),o.styles){const c=e.getAttrib(t,"style");c&&e.setAttrib(t,"data-mce-style",c)}},gb=(e,t,o,r,c)=>{const u=e.dom;se(o.onformat)&&o.onformat(t,o,r,c),c_(u,t,o,r),Je.each(o.attributes,(f,b)=>{u.setAttrib(t,b,jg(f,r))}),Je.each(o.classes,f=>{const b=jg(f,r);u.hasClass(t,b)||u.addClass(t,b)})},bz=e=>!Ot(e.attributes)&&!Ot(e.styles),l_=GC,YM=(e,t,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Pd(u)&&u.inherit===!1&&e.dom.is(t,u.selector))return!0}return!1},aT=(e,t,o,r,c)=>{const u=e.dom.getRoot();if(t===u)return!1;const f=e.dom.getParent(t,b=>YM(e,b,o)?!0:b.parentNode===u||!!qu(e,b,o,r,!0));return!!qu(e,f,o,r,c)},cT=(e,t,o)=>Ua(o)&&l_(t,o.inline)||km(o)&&l_(t,o.block)?!0:Pd(o)?pt(t)&&e.is(t,o.selector):!1,XM=(e,t,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(se(o.onmatch))return o.onmatch(t,o,r);if(f){if(tg(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(t,f[v]):qC(e,t,f[v]))return!0}else for(const v in f)if(kn(f,v)){const S=b?e.getAttrib(t,v):qC(e,t,v),O=jg(f[v],u),R=jt(S)||ni(S);if(R&&jt(O))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!l_(S,DE(O,v)))return!1}}return!0},qu=(e,t,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&pt(t))for(let b=0;b<u.length;b++){const v=u[b];if(cT(e.dom,t,v)&&XM(f,t,v,"attributes",c,r)&&XM(f,t,v,"styles",c,r)){const S=v.classes;if(S){for(let O=0;O<S.length;O++)if(!e.dom.hasClass(t,jg(S[O],r)))return}return v}}},i_=(e,t,o,r,c)=>{if(r)return aT(e,r,t,o,c);if(r=e.selection.getNode(),aT(e,r,t,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&aT(e,u,t,o,c))},u_=(e,t,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<t.length;b++){const v=t[b];!c[v]&&qu(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},QM=(e,t)=>{const o=c=>Qn(c,te.fromDom(e.getBody())),r=(c,u)=>qu(e,c.dom,u)?P.some(u):P.none();return P.from(e.selection.getStart(!0)).bind(c=>hi(te.fromDom(c),u=>lc(t,f=>r(u,f)),o)).getOrNull()},d_=(e,t)=>{const o=e.formatter.get(t),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=RE(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Pd(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},KX=(e,t,o)=>Fo(o,(r,c)=>{const u=NE(e,c);return e.formatter.matchNode(t,c,{},u)?r.concat([c]):r},[]),sa=jr,vz=(e,t)=>e.importNode(t,!0),yz=e=>{if(e){const t=new er(e,e);for(let o=t.current();o;o=t.next())if(tt(o))return o}return null},m_=e=>{const t=te.fromTag("span");return ta(t,{id:$,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&bo(t,te.fromText(sa)),t},Cz=e=>{const t=yz(e);return t&&t.data.charAt(0)===sa&&t.deleteData(0,1),t},f_=(e,t,o)=>{const r=e.dom,c=e.selection;if(y5(t))$f(e,!1,te.fromDom(t),o,!0);else{const u=c.getRng(),f=r.getParent(t,r.isBlock),b=u.startContainer,v=u.startOffset,S=u.endContainer,O=u.endOffset,R=Cz(t);r.remove(t,!0),b===R&&v>0&&u.setStart(R,v-1),S===R&&O>0&&u.setEnd(R,O-1),f&&r.isEmpty(f)&&vf(te.fromDom(f)),c.setRng(u)}},g_=(e,t,o)=>{const r=e.dom,c=e.selection;if(t)f_(e,t,o);else if(t=K(e.getBody(),c.getStart()),!t)for(;t=r.get($);)f_(e,t,o)},JM=(e,t,o)=>{const r=e.dom,c=r.getParent(o,de(ZC,e.schema));c&&r.isEmpty(c)?o.parentNode?.replaceChild(t,o):(a3(te.fromDom(o)),r.isEmpty(o)?o.parentNode?.replaceChild(t,o):r.insertAfter(t,o))},Vv=(e,t)=>(e.appendChild(t),t),eP=(e,t)=>{const o=qn(e,(c,u)=>Vv(c,u.cloneNode(!1)),t),r=o.ownerDocument??document;return Vv(o,r.createTextNode(sa))},tP=(e,t,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=ze(Vt(f.get()),R=>R!==r&&!_s(R,"removeformat")),S=KX(e,o,v);if(ze(S,R=>!v5(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(t,R),f.remove(r,c,R,u),b.remove(R),P.some(R)}else return P.none()},nP=e=>r1(e,Sa(e).replace(new RegExp(`${Is}$`)," ")),bp=(e,t)=>{const o=()=>{t!==null&&!e.dom.isEmpty(t)&&al(te.fromDom(t)).each(r=>{Eo(r)?nP(r):of(r,c=>Eo(c)).each(c=>{Eo(c)&&nP(c)})})};e.once("input",r=>{r.data&&!ql(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},oP=(e,t,o)=>{let r;const c=e.selection,u=e.formatter.get(t);if(!u)return;const f=c.getRng();let b=f.startOffset;const S=f.startContainer.nodeValue;r=K(e.getBody(),c.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&b>0&&b<S.length&&O.test(S.charAt(b))&&O.test(S.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let M=Pf(e.dom,f,u);M=Lv(M),e.formatter.apply(t,o,M),c.moveToBookmark(R)}else{let R=r?yz(r):null;(!r||R?.data!==sa)&&(r=vz(e.getDoc(),m_(!0).dom),R=r.firstChild,f.insertNode(r),b=1,bp(e,r)),e.formatter.apply(t,o,r),c.setCursorLocation(R,b)}},sP=(e,t,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(t);if(!b)return;const v=u.getRng(),S=v.startContainer,O=v.startOffset;let R=S;tt(S)&&(O!==S.data.length&&(f=!0),R=R.parentNode);const M=[];let H;for(;R;){if(qu(e,R,t,o,r)){H=R;break}R.nextSibling&&(f=!0),M.push(R),R=R.parentNode}if(H)if(f){const J=u.getBookmark();v.collapse(!0);let W=Pf(c,v,b,{includeTrailingSpace:!0});W=Lv(W),e.formatter.remove(t,o,W,r),u.moveToBookmark(J)}else{const J=K(e.getBody(),H),W=X(J)?c.getParents(H.parentNode,He,J):[],Q=m_(!1).dom;JM(e,Q,J??H);const ge=tP(e,Q,H,t,o,r),be=eP([...M,...ge.toArray(),...W],Q);J&&f_(e,J,X(J)),u.setCursorLocation(be,1),bp(e,Q),c.isEmpty(H)&&c.remove(H)}},rP=(e,t,o)=>{const r=e.selection,c=e.getBody();g_(e,null,o),(t===8||t===46)&&r.isCollapsed()&&r.getStart().innerHTML===sa&&g_(e,K(c,r.getStart()),!0),(t===37||t===39)&&g_(e,K(c,r.getStart()),!0)},aP=e=>tt(e)&&Kr(e.data,Is),cP=e=>{e.on("mouseup keydown",t=>{rP(e,t.keyCode,aP(e.selection.getRng().endContainer))})},lP=e=>{const t=m_(!1),o=eP(e,t.dom);return{caretContainer:t,caretPosition:Re(o,0)}},h_=(e,t)=>{const{caretContainer:o,caretPosition:r}=lP(t);return la(te.fromDom(e),o),Ko(te.fromDom(e)),r},xz=(e,t)=>{const{caretContainer:o,caretPosition:r}=lP(t);return e.insertNode(o.dom),r},iP=(e,t)=>{if(z(t.dom))return!1;const o=e.schema.getTextInlineElements();return kn(o,Hn(t))&&!z(t.dom)&&!uf(t.dom)},uP=["fontWeight","fontStyle","color","fontSize","fontFamily"],Sz=e=>Ye(e.styles)&&po(Vt(e.styles),t=>Lt(uP,t)),wz=e=>Oo(e,t=>Ua(t)&&t.inline==="span"&&Sz(t)),Ez=(e,t)=>{const o=e.get(t);return Ot(o)?wz(o):P.none()},p_=(e,t)=>y(t,Re.fromRangeStart(e)).isNone(),dP=(e,t)=>p(t,Re.fromRangeEnd(e)).exists(o=>!Vs(o.getNode())||p(t,o).isSome())===!1,Tz=e=>t=>m1(t)&&e.isEditable(t),mP=(e,t)=>en(e.getSelectedBlocks(),(o,r)=>r===0&&t(o)?e.dom.getParent(o,m1)??o:o),b_=e=>{if(e.isCollapsed())return[];const t=e.getRng(),o=mP(e,r=>p_(t,r)&&!m1(r));if(o.length===1)return p_(t,o[0])&&dP(t,o[0])?o:[];{const r=Ws(o).filter(f=>p_(t,f)).toArray(),c=mr(o).filter(f=>dP(t,f)).toArray(),u=o.slice(1,-1);return r.concat(u).concat(c)}},v_=e=>ze(b_(e),Tz(e.dom)),fP=e=>ze(mP(e,t=>!m1(t)),Tz(e.dom)),gP=Je.each,y_=e=>pt(e)&&!Xs(e)&&!z(e)&&!uf(e),hP=(e,t)=>{for(let o=e;o;o=o[t]){if(tt(o)&&fs(o.data))return e;if(pt(o)&&!Xs(o))return o}return e},pP=(e,t,o)=>{const r=Dm(e),c=Vc(t)&&e.dom.isEditable(t),u=Vc(o)&&e.dom.isEditable(o);if(c&&u){const f=hP(t,"previousSibling"),b=hP(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const S=v;v=v.nextSibling,f.appendChild(S)}return e.dom.remove(b),Je.each(Je.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},bP=(e,t,o,r)=>{if(r&&t.merge_siblings!==!1){const c=pP(e,h5(r),r)??r;pP(e,c,h5(c,!0))}},kz=(e,t,o)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";gP(e.select(r,o),c=>{y_(c)&&e.isEditable(c)&&gP(t.styles,(u,f)=>{e.setStyle(c,f,"")})})}},C_=(e,t,o)=>{gP(e.childNodes,r=>{y_(r)&&(t(r)&&o(r),r.hasChildNodes()&&C_(r,t,o))})},Az=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},x_=(e,t)=>o=>!!(o&&qC(e,o,t)),vP=(e,t,o)=>r=>{e.setStyle(r,t,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Az(e,r)},hb=tl.generate([{keep:[]},{rename:["name"]},{removed:[]}]),qg=/^(src|href|style)$/,S_=Je.each,ux=GC,_z=e=>/^(TR|TH|TD)$/.test(e.nodeName),yP=(e,t,o)=>e.isChildOf(t,o)&&t!==o&&!e.isBlock(o),w_=(e,t,o)=>{let r=t[o?"startContainer":"endContainer"],c=t[o?"startOffset":"endOffset"];if(pt(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return tt(r)&&o&&c>=r.data.length&&(r=new er(r,e.getBody()).next()||r),tt(r)&&!o&&c===0&&(r=new er(r,e.getBody()).prev()||r),r},E_=(e,t)=>{const o=t?"firstChild":"lastChild",r=e[o];return _z(e)&&r?e.nodeName==="TR"&&r[o]||r:e},lT=(e,t,o,r)=>{const c=e.create(o,r);return t.parentNode?.insertBefore(c,t),c.appendChild(t),c},T_=(e,t,o,r,c)=>{const u=te.fromDom(t),f=te.fromDom(e.create(r,c)),b=o?Ir(u):Qr(u);return il(f,b),o?(la(u,f),ji(f,u)):(ll(u,f),bo(f,u)),f.dom},Oz=(e,t)=>t.links&&e.nodeName==="A",CP=(e,t,o)=>{const r=t.parentNode;let c;const u=e.dom,f=_r(e);km(o)&&r===u.getRoot()&&(!o.list_block||!ux(t,o.list_block))&&xe(as(t.childNodes),b=>{Pv(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=lT(u,b,f),u.setAttribs(c,ru(e))):c=null}),!(kX(o)&&!ux(o.inline,t))&&u.remove(t,!0)},xP=(e,t,o)=>os(e)?{name:t,value:null}:{name:e,value:jg(t,o)},SP=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},wP=(e,t,o,r,c)=>{let u=!1;S_(o.styles,(f,b)=>{const{name:v,value:S}=xP(b,f,r),O=DE(S,v);(o.remove_similar||oe(S)||!pt(c)||ux(qC(e,c,v),O))&&e.setStyle(t,v,""),u=!0}),u&&SP(e,t)},pb=(e,t,o)=>{t==="removeformat"?xe(fP(e.selection),r=>{xe(uP,c=>e.dom.setStyle(r,c,"")),SP(e.dom,r)}):Ez(e.formatter,t).each(r=>{xe(fP(e.selection),c=>wP(e.dom,c,r,o,null))})},iT=(e,t,o,r,c)=>{const u=e.dom,f=Dm(e),b=e.schema;if(Ua(t)&&jc(b,t.inline)&&Ks(b,r)&&r.parentElement===e.getBody())return CP(e,r,t),hb.removed();if(!t.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!cT(u,r,t)&&!Oz(r,t))return hb.keep();const v=r,S=t.preserve_attributes;if(Ua(t)&&t.remove==="all"&&Ot(S)){const O=ze(u.getAttribs(v),R=>Lt(S,R.name.toLowerCase()));if(u.removeAllAttribs(v),xe(O,R=>u.setAttrib(v,R.name,R.value)),O.length>0)return hb.rename("span")}if(t.remove!=="all"){wP(u,v,t,o,c),S_(t.attributes,(R,M)=>{const{name:H,value:J}=xP(M,R,o);if(t.remove_similar||oe(J)||!pt(c)||ux(u.getAttrib(c,H),J)){if(H==="class"){const W=u.getAttrib(v,H);if(W){let Q="";if(xe(W.split(/\s+/),ge=>{/mce\-\w+/.test(ge)&&(Q+=(Q?" ":"")+ge)}),Q){u.setAttrib(v,H,Q);return}}}if(qg.test(H)&&v.removeAttribute("data-mce-"+H),H==="style"&&pi(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(H),u.setStyle(v,"list-style-type","none");return}H==="class"&&v.removeAttribute("className"),v.removeAttribute(H)}}),S_(t.classes,R=>{R=jg(R,o),(!pt(c)||u.hasClass(c,R))&&u.removeClass(v,R)});const O=u.getAttribs(v);for(let R=0;R<O.length;R++){const M=O[R].nodeName;if(!f.isAttributeInternal(M))return hb.keep()}}return t.remove!=="none"?(CP(e,v,t),hb.removed()):hb.keep()},Dz=(e,t,o,r,c)=>{let u;return t.parentNode&&xe(RE(e.dom,t.parentNode).reverse(),f=>{if(!u&&pt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=qu(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},Rz=(e,t,o,r)=>iT(e,t,o,r,r).fold(st(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),st(null)),k_=(e,t,o,r,c,u,f,b)=>{let v,S;const O=e.dom;if(o){const R=o.parentNode;for(let M=r.parentNode;M&&M!==R;M=M.parentNode){let H=O.clone(M,!1);for(let J=0;J<t.length&&(H=Rz(e,t[J],b,H),H!==null);J++);H&&(v&&H.appendChild(v),S||(S=H),v=H)}(!f.mixed||!O.isBlock(o))&&(r=O.split(o,r)??r),v&&S&&(c.parentNode?.insertBefore(v,c),S.appendChild(c),Ua(f)&&bP(e,f,b,v))}return r},Nz=(e,t,o,r,c)=>{const u=e.formatter.get(t),f=u[0],b=e.dom,v=e.selection,S=W=>{const Q=Dz(e,W,t,o,c);return k_(e,u,Q,W,W,!0,f,o)},O=W=>Xs(W)&&pt(W)&&(W.id==="_start"||W.id==="_end"),R=W=>po(u,Q=>dx(e,Q,o,W,W)),M=W=>{const Q=as(W.childNodes),be=R(W)||po(u,je=>cT(b,W,je)),ve=W.parentNode;if(!be&&X(ve)&&gA(f)&&R(ve),f.deep&&Q.length)for(let je=0;je<Q.length;je++)M(Q[je]);xe(["underline","line-through","overline"],je=>{pt(W)&&e.dom.getStyle(W,"text-decoration")===je&&W.parentNode&&b5(b,W.parentNode)===je&&dx(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:je}},void 0,W)})},H=W=>{const Q=b.get(W?"_start":"_end");if(Q){let ge=Q[W?"firstChild":"lastChild"];return O(ge)&&(ge=ge[W?"firstChild":"lastChild"]),tt(ge)&&ge.data.length===0&&(ge=W?Q.previousSibling||Q.nextSibling:Q.nextSibling||Q.previousSibling),b.remove(Q,!0),ge}else return null},J=W=>{let Q,ge,be=Pf(b,W,u,{includeTrailingSpace:W.collapsed});if(f.split){if(be=Lv(be),Q=w_(e,be,!0),ge=w_(e,be),Q!==ge){if(Q=E_(Q,!0),ge=E_(ge,!1),yP(b,Q,ge)){const Be=P.from(Q.firstChild).getOr(Q);S(T_(b,Be,!0,"span",{id:"_start","data-mce-type":"bookmark"})),H(!0);return}if(yP(b,ge,Q)){const Be=P.from(ge.lastChild).getOr(ge);S(T_(b,Be,!1,"span",{id:"_end","data-mce-type":"bookmark"})),H(!1);return}Q=lT(b,Q,"span",{id:"_start","data-mce-type":"bookmark"}),ge=lT(b,ge,"span",{id:"_end","data-mce-type":"bookmark"});const ve=b.createRng();ve.setStartAfter(Q),ve.setEndBefore(ge),Bd(b,ve,Be=>{xe(Be,je=>{!Xs(je)&&!Xs(je.parentNode)&&S(je)})}),S(Q),S(ge),Q=H(!0),ge=H()}else Q=ge=S(Q);be.startContainer=Q.parentNode?Q.parentNode:Q,be.startOffset=b.nodeIndex(Q),be.endContainer=ge.parentNode?ge.parentNode:ge,be.endOffset=b.nodeIndex(ge)+1}Bd(b,be,ve=>{xe(ve,M)})};if(r){if(jC(r)){const W=b.createRng();W.setStartBefore(r),W.setEndAfter(r),J(W)}else J(r);cC(e,t,r,o);return}!v.isCollapsed()||!Ua(f)||Ft(e).length?(f5(e,()=>VC(e,J),W=>Ua(f)&&i_(e,t,o,W)),e.nodeChanged()):sP(e,t,o,c),pb(e,t,o),cC(e,t,r,o)},uT=(e,t,o,r,c)=>{(r||e.selection.isEditable())&&Nz(e,t,o,r,c)},EP=(e,t,o,r)=>iT(e,t,o,r).fold(()=>P.some(r),c=>P.some(e.dom.rename(r,c)),P.none),dx=(e,t,o,r,c)=>iT(e,t,o,r,c).fold(ye,u=>(e.dom.rename(r,u),!0),He),TP=["fontsize","subscript","superscript"],dT=["strikethrough",...TP],Mz=(e,t,o)=>X(e.matchNode(t.dom,o,{},o==="fontsize")),mT=(e,t)=>po(TP,o=>Mz(e,t,o)),Pz=e=>Lt(dT,e),kP=(e,t,o,r,c)=>{const u=Ca(t,e).filter(Fs);return jm(u,o).map(f=>{const b=u[f],v=r(b),S=[...c(br(b)).toArray(),...xo(u.slice(0,f),O=>o(O)?c(O).toArray():[br(O)])];return{container:b,innerWrapper:v,outerWrappers:S}})},AP=(e,t,o,r)=>{xe(Ds(e),c=>{Fs(c)&&o(c)&&r(c).isNone()&&pc(c)}),xe(Ds(e),c=>bo(t,c)),ji(e,t)},_P=(e,t)=>{if(t.length>0){const o=t[t.length-1];la(e,o);const r=Fo(t.slice(0,t.length-1),(c,u)=>(bo(c,u),u),o);bo(r,e)}},Bz=(e,t,o,r,c)=>{const u=f=>Qn(te.fromDom(e.getRoot()),f)||e.isBlock(f.dom);xe(t,f=>{kP(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:S})=>{e.split(b.dom,f.dom),AP(f,v,o,c),_P(f,S)})})},A_=(e,t,o)=>{const r=b=>X(qu(e,b.dom,t)),c=b=>{const v=te.fromTag(Hn(b)),S=qu(e,b.dom,t,{});return X(S)&&bz(S)&&gb(e,v.dom,S),v},u=b=>{const v=qu(e,b.dom,t,{});return X(v)?EP(e,v,{},b.dom).map(te.fromDom):P.some(b)},f=If(e.selection.getRng());Bz(e.dom,o,r,c,u),e.selection.setRng(Gu(f))},$z=(e,t)=>xo(t,o=>{const r=q(o,c=>mT(e,c));return mT(e,o)?[o,...r]:r}),Iz=(e,t,o)=>{if(Pz(t)){const r=$z(e.formatter,o);A_(e,"strikethrough",r)}},Fz=(e,t)=>{const o=ze(t,r=>mT(e.formatter,r));A_(e,"strikethrough",o)},Yl=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),OP=e=>e.name==="summary",Lz=(e,t)=>{let o=e;for(;o=o.walk();)t(o)},__=(e,t,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=t.length;u<f;u++){const b=t[u],v=b.name;if(v in o.attributes.map){const S=r.attributes[v];S?S.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},Hz=(e,t,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&Lz(o,c=>{__(e,t,c,r)}),r},DP=(e,t)=>{const o=(r,c)=>{Un(r,u=>{const f=as(u.nodes);xe(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const S=f[v];(!(c?S.attr(u.filter.name)!==void 0:S.name===u.filter.name)||jt(S.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,t)})})};o(e.nodes,!1),o(e.attributes,!0)},RP=(e,t,o,r={})=>{const c=Hz(e,t,o);DP(c,r)},vp=(e,t,o,r)=>{if((e.pad_empty_with_br||t.insert)&&o(r)){const u=new Oa("br",1);t.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Oa("#text",3)).value=Is},Uv=e=>zz(e,"#text")&&e?.firstChild?.value===Is,zz=(e,t)=>{const o=e?.firstChild;return X(o)&&o===e.lastChild&&o.name===t},Vz=(e,t)=>e.getElementRule(t.name)?.paddEmpty===!0,mx=(e,t,o,r)=>r.isEmpty(t,o,c=>Vz(e,c)),Rm=(e,t)=>X(e)&&(t(e)||e.name==="br"),Uz=e=>{let t;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(t=o)}return P.from(t)},jz=e=>{const t=[];for(let o=e.firstChild;X(o);o=o.walk())t.push(o);return t},jv=(e,t,o=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!t.isValidChild(o.name,c.name)&&jv(c,t,o);e.unwrap()}},NP=(e,t,o,r=St)=>{const c=t.getTextBlockElements(),u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=Je.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,S=O=>O!==o&&!b[O.name];for(let O=0;O<e.length;O++){const R=e[O];let M,H,J;if(!R.parent||v.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let Q=R.next;for(;Q&&c[Q.name];){Q.name="li",v.add(Q),R.parent.insert(Q,R.parent);Q=Q.next}R.unwrap();continue}const W=[R];for(M=R.parent;M&&!t.isValidChild(M.name,R.name)&&S(M);M=M.parent)W.push(M);if(M&&W.length>1)if(fx(t,R,M))jv(R,t);else{W.reverse(),H=W[0].clone(),r(H);let Q=H;for(let ge=0;ge<W.length-1;ge++){t.isValidChild(Q.name,W[ge].name)&&ge>0?(J=W[ge].clone(),r(J),Q.append(J)):J=Q;for(let be=W[ge].firstChild;be&&be!==W[ge+1];){const ve=be.next;J.append(be),be=ve}Q=J}mx(t,u,f,H)?M.insert(R,W[0],!0):(M.insert(H,W[0],!0),M.insert(R,H)),M=W[0],(mx(t,u,f,M)||zz(M,"br"))&&M.empty().remove()}else if(R.parent){if(R.name==="li"){let Q=R.prev;if(Q&&(Q.name==="ul"||Q.name==="ol")){Q.append(R);continue}if(Q=R.next,Q&&(Q.name==="ul"||Q.name==="ol")&&Q.firstChild){Q.insert(R,Q.firstChild,!0);continue}const ge=new Oa("ul",1);r(ge),R.wrap(ge);continue}if(t.isValidChild(R.parent.name,"div")&&t.isValidChild("div",R.name)){const Q=new Oa("div",1);r(Q),R.wrap(Q)}else jv(R,t)}}},O_=(e,t)=>{let o=e;for(;o;){if(o.name===t)return!0;o=o.parent}return!1},fx=(e,t,o=t.parent)=>o?e.children[t.name]&&!e.isValidChild(o.name,t.name)||t.name==="a"&&O_(o,"a")?!0:OP(o)&&Yl(t)?!(o?.firstChild===t&&o?.lastChild===t):!1:!1,MP=(e,t,o,r)=>{const c=document.createRange();return c.setStart(e,t),c.setEnd(o,r),c},Wz=e=>{const t=Re.fromRangeStart(e),o=Re.fromRangeEnd(e),r=e.commonAncestorContainer;return Gl(!1,r,o).map(c=>!Nd(t,o,r)&&Nd(t,c,r)?MP(t.container(),t.offset(),c.container(),c.offset()):e).getOr(e)},D_=e=>e.collapsed?e:Wz(e),Kg=Je.explode,PP=()=>{const e={};return{addFilter:(c,u)=>{xe(Kg(c),f=>{kn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>Ba(e),removeFilter:(c,u)=>{xe(Kg(c),f=>{if(kn(e,f))if(X(u)){const b=e[f],v=ze(b.callbacks,S=>S!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},Zz=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Gz=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),Yn=(e,t)=>{xe(t,o=>{e.attr(o,null)})},qz=(e,t,o)=>{e.addNodeFilter("font",r=>{xe(r,c=>{const u=t.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&Jf(v).each(S=>{u["font-size"]=o[S-1]}),c.name="span",c.attr("style",t.serialize(u)),Yn(c,["color","face","size"])})})},Kz=(e,t,o)=>{e.addNodeFilter("strike",r=>{const c=t.type!=="html4";xe(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},BP=(e,t,o)=>{const r=fm();t.convert_fonts_to_spans&&qz(e,r,Je.explode(t.font_size_legacy_values??"")),Kz(e,o,r)},Yz=(e,t,o)=>{t.inline_styles&&BP(e,t,o)},Xz=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),yr=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},Qz=e=>{try{return decodeURIComponent(e)}catch{return e}},R_=e=>{const[t,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(c){const u=c[2]===";base64",f=Qz(r),b=u?yr(f):f;return P.some({type:c[1],data:b,base64Encoded:u})}else return P.none()},$P=(e,t,o=!0)=>{let r=t;if(o)try{r=atob(t)}catch{return P.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return P.some(new Blob([c],{type:e}))},Jz=e=>new Promise((t,o)=>{R_(e).bind(({type:r,data:c,base64Encoded:u})=>$P(r,c,u)).fold(()=>o("Invalid data URI"),t)}),js=e=>hn(e,"blob:")?Xz(e):hn(e,"data:")?Jz(e):Promise.reject("Unknown URI format"),N_=e=>new Promise((t,o)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{o(r.error?.message)},r.readAsDataURL(e)});let IP=0;const e9=e=>"blobid"+IP++,M_=(e,t,o)=>R_(e).bind(({data:r,type:c,base64Encoded:u})=>{if(t&&!u)return P.none();{const f=u?r:btoa(r);return o(f,c)}}),FP=(e,t,o)=>{const r=e.create(e9(),t,o);return e.add(r),r},Ff=(e,t,o=!1)=>M_(t,o,(r,c)=>P.from(e.getByData(r,c)).orThunk(()=>$P(c,r).map(u=>FP(e,u,r)))),P_=(e,t)=>{const o=()=>Promise.reject("Invalid data URI");if(hn(t,"blob:")){const r=e.getByUri(t);return X(r)?Promise.resolve(r):js(t).then(c=>N_(c).then(u=>M_(u,!1,f=>P.some(FP(e,c,f))).getOrThunk(o)))}else return hn(t,"data:")?Ff(e,t).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},t9=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,n9=e=>P.from(e.match(t9)).bind(t=>qr(t,1)).map(t=>hn(t,"www.")?t.substring(4):t),fT=(e,t)=>{P.from(e.attr("src")).bind(n9).forall(o=>!Lt(t,o))&&e.attr("sandbox","")},B_=(e,t)=>hn(e,`${t}/`),o9=e=>Gn(e)?"iframe":B_(e,"image")?"img":B_(e,"video")?"video":B_(e,"audio")?"audio":"iframe",ra=({type:e,src:t,width:o,height:r}={},c,u)=>{const f=o9(e),b=new Oa(f,1);return b.attr(f==="audio"?{src:t}:{src:t,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&fT(b,u),b},s9=e=>X(e.attr("data-mce-bogus")),yp=e=>e.attr("src")===fo.transparentSrc||X(e.attr("data-mce-placeholder")),r9=(e,t)=>{const{blob_cache:o}=t;if(o){const r=c=>{const u=c.attr("src");yp(c)||s9(c)||jt(u)||Ff(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>xe(c,r))}},a9=(e,t)=>{const o=e.schema;e.addAttributeFilter("href",f=>{let b=f.length;const v=O=>O.split(" ").filter(M=>M.length>0).concat(["noopener"]).sort().join(" "),S=O=>{const R=O?Je.trim(O):"";return/\b(noopener)\b/g.test(R)?R:v(R)};if(!t.allow_unsafe_link_target)for(;b--;){const O=f[b];O.name==="a"&&O.attr("target")==="_blank"&&O.attr("rel",S(O.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let b=f.length,v,S,O,R;for(;b--;)if(R=f[b],R.name==="a"&&R.firstChild&&!R.attr("href"))for(O=R.parent,v=R.lastChild;v&&O;)S=v.prev,O.insert(v,R),v=S}),t.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let b=f.length,v,S;for(;b--;)if(v=f[b],S=v.parent,S&&(S.name==="ul"||S.name==="ol"))if(v.prev&&v.prev.name==="li")v.prev.append(v);else{const O=new Oa("li",1);O.attr("style","list-style-type: none"),v.wrap(O)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",f=>{let b=f.length;for(;b--;){const v=f[b],S=v.attr("class")??"",O=Je.explode(S," ");let R="";for(let M=0;M<O.length;M++){const H=O[M];let J=!1,W=r["*"];W&&W[H]&&(J=!0),W=r[v.name],!J&&W&&W[H]&&(J=!0),J&&(R&&(R+=" "),R+=H)}R.length||(R=null),v.attr("class",R)}}),r9(e,t);const c=t.sandbox_iframes??!1,u=Ya(t.sandbox_iframes_exclusions??[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>xe(f,b=>{b.replace(ra({type:b.attr("type"),src:b.name==="object"?b.attr("data"):b.attr("src"),width:b.attr("width"),height:b.attr("height")},c,u))})),c&&e.addNodeFilter("iframe",f=>xe(f,b=>fT(b,u)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:LP,setPrototypeOf:HP,isFrozen:c9,getPrototypeOf:l9,getOwnPropertyDescriptor:i9}=Object;let{freeze:Ti,seal:Ld,create:gx}=Object,{apply:$_,construct:I_}=typeof Reflect<"u"&&Reflect;Ti||(Ti=function(t){return t}),Ld||(Ld=function(t){return t}),$_||($_=function(t,o,r){return t.apply(o,r)}),I_||(I_=function(t,o){return new t(...o)});const F_=Xc(Array.prototype.forEach),hx=Xc(Array.prototype.lastIndexOf),zP=Xc(Array.prototype.pop),bb=Xc(Array.prototype.push),u9=Xc(Array.prototype.splice),gT=Xc(String.prototype.toLowerCase),L_=Xc(String.prototype.toString),VP=Xc(String.prototype.match),Nm=Xc(String.prototype.replace),vb=Xc(String.prototype.indexOf),hT=Xc(String.prototype.trim),uu=Xc(Object.prototype.hasOwnProperty),ja=Xc(RegExp.prototype.test),Mm=pT(TypeError);function Xc(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return $_(e,t,r)}}function pT(e){return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return I_(e,o)}}function ds(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:gT;HP&&HP(e,null);let r=t.length;for(;r--;){let c=t[r];if(typeof c=="string"){const u=o(c);u!==c&&(c9(t)||(t[r]=u),c=u)}e[c]=!0}return e}function H_(e){for(let t=0;t<e.length;t++)uu(e,t)||(e[t]=null);return e}function Pm(e){const t=gx(null);for(const[o,r]of LP(e))uu(e,o)&&(Array.isArray(r)?t[o]=H_(r):r&&typeof r=="object"&&r.constructor===Object?t[o]=Pm(r):t[o]=r);return t}function Wv(e,t){for(;e!==null;){const r=i9(e,t);if(r){if(r.get)return Xc(r.get);if(typeof r.value=="function")return Xc(r.value)}e=l9(e)}function o(){return null}return o}const z_=Ti(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Cp=Ti(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bT=Ti(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),UP=Ti(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vT=Ti(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),yT=Ti(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),V_=Ti(["#text"]),U_=Ti(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),CT=Ti(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),j_=Ti(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Hd=Ti(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),xp=Ld(/\{\{[\w\W]*|[\w\W]*\}\}/gm),zd=Ld(/<%[\w\W]*|[\w\W]*%>/gm),d9=Ld(/\$\{[\w\W]*/gm),m9=Ld(/^data-[\-\w.\u00B7-\uFFFF]+$/),f9=Ld(/^aria-[\-\w]+$/),jP=Ld(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),g9=Ld(/^(?:\w+script|data):/i),h9=Ld(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),WP=Ld(/^html$/i),p9=Ld(/^[a-z][.\w]*(-[.\w]+)+$/i);var ZP=Object.freeze({__proto__:null,ARIA_ATTR:f9,ATTR_WHITESPACE:h9,CUSTOM_ELEMENT:p9,DATA_ATTR:m9,DOCTYPE_NAME:WP,ERB_EXPR:zd,IS_ALLOWED_URI:jP,IS_SCRIPT_OR_DATA:g9,MUSTACHE_EXPR:xp,TMPLIT_EXPR:d9});const px={element:1,text:3,progressingInstruction:7,comment:8,document:9},b9=function(){return typeof window>"u"?null:window},v9=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},xT=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ST(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b9();const t=so=>ST(so);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==px.document||!e.Element)return t.isSupported=!1,t;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:S,NamedNodeMap:O=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:R,DOMParser:M,trustedTypes:H}=e,J=v.prototype,W=Wv(J,"cloneNode"),Q=Wv(J,"remove"),ge=Wv(J,"nextSibling"),be=Wv(J,"childNodes"),ve=Wv(J,"parentNode");if(typeof f=="function"){const so=o.createElement("template");so.content&&so.content.ownerDocument&&(o=so.content.ownerDocument)}let Be,je="";const{implementation:xt,createNodeIterator:Kt,createDocumentFragment:Me,getElementsByTagName:Te}=o,{importNode:$e}=r;let yt=xT();t.isSupported=typeof LP=="function"&&typeof ve=="function"&&xt&&xt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Sn,ERB_EXPR:wn,TMPLIT_EXPR:uo,DATA_ATTR:qo,ARIA_ATTR:Cs,IS_SCRIPT_OR_DATA:Bs,ATTR_WHITESPACE:Na,CUSTOM_ELEMENT:_i}=ZP;let{IS_ALLOWED_URI:At}=ZP,sn=null;const Ho=ds({},[...z_,...Cp,...bT,...vT,...V_]);let Ao=null;const qa=ds({},[...U_,...CT,...j_,...Hd]);let Le=Object.seal(gx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dt=null,$t=null,to=!0,Zn=!0,Jo=!1,Oi=!0,Yd=!1,sd=!0,pu=!1,Ip=!1,Jc=!1,Ql=!1,ih=!1,Hy=!1,Tk=!0,bn=!1;const ho="user-content-";let Or=!0,As=!1,ns={},xr=null;const Di=ds({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let El=null;const rd=ds({},["audio","video","img","source","image","track"]);let uh=null;const kk=ds({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ak="http://www.w3.org/1998/Math/MathML",DS="http://www.w3.org/2000/svg",Xf="http://www.w3.org/1999/xhtml";let zy=Xf,qN=!1,_k=null;const xQ=ds({},[Ak,DS,Xf],L_);let KN=ds({},["mi","mo","mn","ms","mtext"]),YN=ds({},["annotation-xml"]);const SQ=ds({},["title","style","font","a","script"]);let Ok=null;const Vy=["application/xhtml+xml","text/html"],f7="text/html";let Se=null,ke=null;const Dt=o.createElement("form"),mt=function(Ae){return Ae instanceof RegExp||Ae instanceof Function},Tn=function(){let Ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ke&&ke===Ae)){if((!Ae||typeof Ae!="object")&&(Ae={}),Ae=Pm(Ae),Ok=Vy.indexOf(Ae.PARSER_MEDIA_TYPE)===-1?f7:Ae.PARSER_MEDIA_TYPE,Se=Ok==="application/xhtml+xml"?L_:gT,sn=uu(Ae,"ALLOWED_TAGS")?ds({},Ae.ALLOWED_TAGS,Se):Ho,Ao=uu(Ae,"ALLOWED_ATTR")?ds({},Ae.ALLOWED_ATTR,Se):qa,_k=uu(Ae,"ALLOWED_NAMESPACES")?ds({},Ae.ALLOWED_NAMESPACES,L_):xQ,uh=uu(Ae,"ADD_URI_SAFE_ATTR")?ds(Pm(kk),Ae.ADD_URI_SAFE_ATTR,Se):kk,El=uu(Ae,"ADD_DATA_URI_TAGS")?ds(Pm(rd),Ae.ADD_DATA_URI_TAGS,Se):rd,xr=uu(Ae,"FORBID_CONTENTS")?ds({},Ae.FORBID_CONTENTS,Se):Di,dt=uu(Ae,"FORBID_TAGS")?ds({},Ae.FORBID_TAGS,Se):Pm({}),$t=uu(Ae,"FORBID_ATTR")?ds({},Ae.FORBID_ATTR,Se):Pm({}),ns=uu(Ae,"USE_PROFILES")?Ae.USE_PROFILES:!1,to=Ae.ALLOW_ARIA_ATTR!==!1,Zn=Ae.ALLOW_DATA_ATTR!==!1,Jo=Ae.ALLOW_UNKNOWN_PROTOCOLS||!1,Oi=Ae.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Yd=Ae.SAFE_FOR_TEMPLATES||!1,sd=Ae.SAFE_FOR_XML!==!1,pu=Ae.WHOLE_DOCUMENT||!1,Ql=Ae.RETURN_DOM||!1,ih=Ae.RETURN_DOM_FRAGMENT||!1,Hy=Ae.RETURN_TRUSTED_TYPE||!1,Jc=Ae.FORCE_BODY||!1,Tk=Ae.SANITIZE_DOM!==!1,bn=Ae.SANITIZE_NAMED_PROPS||!1,Or=Ae.KEEP_CONTENT!==!1,As=Ae.IN_PLACE||!1,At=Ae.ALLOWED_URI_REGEXP||jP,zy=Ae.NAMESPACE||Xf,KN=Ae.MATHML_TEXT_INTEGRATION_POINTS||KN,YN=Ae.HTML_INTEGRATION_POINTS||YN,Le=Ae.CUSTOM_ELEMENT_HANDLING||{},Ae.CUSTOM_ELEMENT_HANDLING&&mt(Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Le.tagNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&mt(Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Le.attributeNameCheck=Ae.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Ae.CUSTOM_ELEMENT_HANDLING&&typeof Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Le.allowCustomizedBuiltInElements=Ae.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Yd&&(Zn=!1),ih&&(Ql=!0),ns&&(sn=ds({},V_),Ao=[],ns.html===!0&&(ds(sn,z_),ds(Ao,U_)),ns.svg===!0&&(ds(sn,Cp),ds(Ao,CT),ds(Ao,Hd)),ns.svgFilters===!0&&(ds(sn,bT),ds(Ao,CT),ds(Ao,Hd)),ns.mathMl===!0&&(ds(sn,vT),ds(Ao,j_),ds(Ao,Hd))),Ae.ADD_TAGS&&(sn===Ho&&(sn=Pm(sn)),ds(sn,Ae.ADD_TAGS,Se)),Ae.ADD_ATTR&&(Ao===qa&&(Ao=Pm(Ao)),ds(Ao,Ae.ADD_ATTR,Se)),Ae.ADD_URI_SAFE_ATTR&&ds(uh,Ae.ADD_URI_SAFE_ATTR,Se),Ae.FORBID_CONTENTS&&(xr===Di&&(xr=Pm(xr)),ds(xr,Ae.FORBID_CONTENTS,Se)),Or&&(sn["#text"]=!0),pu&&ds(sn,["html","head","body"]),sn.table&&(ds(sn,["tbody"]),delete dt.tbody),Ae.TRUSTED_TYPES_POLICY){if(typeof Ae.TRUSTED_TYPES_POLICY.createHTML!="function")throw Mm('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Ae.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Mm('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Be=Ae.TRUSTED_TYPES_POLICY,je=Be.createHTML("")}else Be===void 0&&(Be=v9(H,c)),Be!==null&&typeof je=="string"&&(je=Be.createHTML(""));Ti&&Ti(Ae),ke=Ae}},No=ds({},[...Cp,...bT,...UP]),Gr=ds({},[...vT,...yT]),dh=function(Ae){let rn=ve(Ae);(!rn||!rn.tagName)&&(rn={namespaceURI:zy,tagName:"template"});const Xn=gT(Ae.tagName),Ma=gT(rn.tagName);return _k[Ae.namespaceURI]?Ae.namespaceURI===DS?rn.namespaceURI===Xf?Xn==="svg":rn.namespaceURI===Ak?Xn==="svg"&&(Ma==="annotation-xml"||KN[Ma]):!!No[Xn]:Ae.namespaceURI===Ak?rn.namespaceURI===Xf?Xn==="math":rn.namespaceURI===DS?Xn==="math"&&YN[Ma]:!!Gr[Xn]:Ae.namespaceURI===Xf?rn.namespaceURI===DS&&!YN[Ma]||rn.namespaceURI===Ak&&!KN[Ma]?!1:!Gr[Xn]&&(SQ[Xn]||!No[Xn]):!!(Ok==="application/xhtml+xml"&&_k[Ae.namespaceURI]):!1},Qf=function(Ae){bb(t.removed,{element:Ae});try{ve(Ae).removeChild(Ae)}catch{Q(Ae)}},Dk=function(Ae,rn){try{bb(t.removed,{attribute:rn.getAttributeNode(Ae),from:rn})}catch{bb(t.removed,{attribute:null,from:rn})}if(rn.removeAttribute(Ae),Ae==="is")if(Ql||ih)try{Qf(rn)}catch{}else try{rn.setAttribute(Ae,"")}catch{}},wQ=function(Ae){let rn=null,Xn=null;if(Jc)Ae="<remove></remove>"+Ae;else{const Tl=VP(Ae,/^[\r\n\t ]+/);Xn=Tl&&Tl[0]}Ok==="application/xhtml+xml"&&zy===Xf&&(Ae='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Ae+"</body></html>");const Ma=Be?Be.createHTML(Ae):Ae;if(zy===Xf)try{rn=new M().parseFromString(Ma,Ok)}catch{}if(!rn||!rn.documentElement){rn=xt.createDocument(zy,"template",null);try{rn.documentElement.innerHTML=qN?je:Ma}catch{}}const bu=rn.body||rn.documentElement;return Ae&&Xn&&bu.insertBefore(o.createTextNode(Xn),bu.childNodes[0]||null),zy===Xf?Te.call(rn,pu?"html":"body")[0]:pu?rn.documentElement:bu},EQ=function(Ae){return Kt.call(Ae.ownerDocument||Ae,Ae,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},DY=function(Ae){return Ae instanceof R&&(typeof Ae.nodeName!="string"||typeof Ae.textContent!="string"||typeof Ae.removeChild!="function"||!(Ae.attributes instanceof O)||typeof Ae.removeAttribute!="function"||typeof Ae.setAttribute!="function"||typeof Ae.namespaceURI!="string"||typeof Ae.insertBefore!="function"||typeof Ae.hasChildNodes!="function")},TQ=function(Ae){return typeof b=="function"&&Ae instanceof b};function Gb(so,Ae,rn){F_(so,Xn=>{Xn.call(t,Ae,rn,ke)})}const kQ=function(Ae){let rn=null;if(Gb(yt.beforeSanitizeElements,Ae,null),DY(Ae))return Qf(Ae),!0;const Xn=Se(Ae.nodeName);if(Gb(yt.uponSanitizeElement,Ae,{tagName:Xn,allowedTags:sn}),sd&&Ae.hasChildNodes()&&!TQ(Ae.firstElementChild)&&ja(/<[/\w!]/g,Ae.innerHTML)&&ja(/<[/\w!]/g,Ae.textContent)||Ae.nodeType===px.progressingInstruction||sd&&Ae.nodeType===px.comment&&ja(/<[/\w]/g,Ae.data))return Qf(Ae),!0;if(!sn[Xn]||dt[Xn]){if(!dt[Xn]&&_Q(Xn)&&(Le.tagNameCheck instanceof RegExp&&ja(Le.tagNameCheck,Xn)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(Xn)))return!1;if(Or&&!xr[Xn]){const Ma=ve(Ae)||Ae.parentNode,bu=be(Ae)||Ae.childNodes;if(bu&&Ma){const Tl=bu.length;for(let Xd=Tl-1;Xd>=0;--Xd){const qb=W(bu[Xd],!0);qb.__removalCount=(Ae.__removalCount||0)+1,Ma.insertBefore(qb,ge(Ae))}}}return Qf(Ae),!0}return Ae instanceof v&&!dh(Ae)||(Xn==="noscript"||Xn==="noembed"||Xn==="noframes")&&ja(/<\/no(script|embed|frames)/i,Ae.innerHTML)?(Qf(Ae),!0):(Yd&&Ae.nodeType===px.text&&(rn=Ae.textContent,F_([Sn,wn,uo],Ma=>{rn=Nm(rn,Ma," ")}),Ae.textContent!==rn&&(bb(t.removed,{element:Ae.cloneNode()}),Ae.textContent=rn)),Gb(yt.afterSanitizeElements,Ae,null),!1)},AQ=function(Ae,rn,Xn){if(Tk&&(rn==="id"||rn==="name")&&(Xn in o||Xn in Dt))return!1;if(!(Zn&&!$t[rn]&&ja(qo,rn))){if(!(to&&ja(Cs,rn))){if(!Ao[rn]||$t[rn]){if(!(_Q(Ae)&&(Le.tagNameCheck instanceof RegExp&&ja(Le.tagNameCheck,Ae)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(Ae))&&(Le.attributeNameCheck instanceof RegExp&&ja(Le.attributeNameCheck,rn)||Le.attributeNameCheck instanceof Function&&Le.attributeNameCheck(rn))||rn==="is"&&Le.allowCustomizedBuiltInElements&&(Le.tagNameCheck instanceof RegExp&&ja(Le.tagNameCheck,Xn)||Le.tagNameCheck instanceof Function&&Le.tagNameCheck(Xn))))return!1}else if(!uh[rn]){if(!ja(At,Nm(Xn,Na,""))){if(!((rn==="src"||rn==="xlink:href"||rn==="href")&&Ae!=="script"&&vb(Xn,"data:")===0&&El[Ae])){if(!(Jo&&!ja(Bs,Nm(Xn,Na,"")))){if(Xn)return!1}}}}}}return!0},_Q=function(Ae){return Ae!=="annotation-xml"&&VP(Ae,_i)},OQ=function(Ae){Gb(yt.beforeSanitizeAttributes,Ae,null);const{attributes:rn}=Ae;if(!rn||DY(Ae))return;const Xn={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ao,forceKeepAttr:void 0};let Ma=rn.length;for(;Ma--;){const bu=rn[Ma],{name:Tl,namespaceURI:Xd,value:qb}=bu,XN=Se(Tl),RY=qb;let vu=Tl==="value"?RY:hT(RY);if(Xn.attrName=XN,Xn.attrValue=vu,Xn.keepAttr=!0,Xn.forceKeepAttr=void 0,Gb(yt.uponSanitizeAttribute,Ae,Xn),vu=Xn.attrValue,bn&&(XN==="id"||XN==="name")&&(Dk(Tl,Ae),vu=ho+vu),sd&&ja(/((--!?|])>)|<\/(style|title)/i,vu)){Dk(Tl,Ae);continue}if(Xn.forceKeepAttr)continue;if(!Xn.keepAttr){Dk(Tl,Ae);continue}if(!Oi&&ja(/\/>/i,vu)){Dk(Tl,Ae);continue}Yd&&F_([Sn,wn,uo],RQ=>{vu=Nm(vu,RQ," ")});const DQ=Se(Ae.nodeName);if(!AQ(DQ,XN,vu)){Dk(Tl,Ae);continue}if(Be&&typeof H=="object"&&typeof H.getAttributeType=="function"&&!Xd)switch(H.getAttributeType(DQ,XN)){case"TrustedHTML":{vu=Be.createHTML(vu);break}case"TrustedScriptURL":{vu=Be.createScriptURL(vu);break}}if(vu!==RY)try{Xd?Ae.setAttributeNS(Xd,Tl,vu):Ae.setAttribute(Tl,vu),DY(Ae)?Qf(Ae):zP(t.removed)}catch{Dk(Tl,Ae)}}Gb(yt.afterSanitizeAttributes,Ae,null)},RJ=function so(Ae){let rn=null;const Xn=EQ(Ae);for(Gb(yt.beforeSanitizeShadowDOM,Ae,null);rn=Xn.nextNode();)Gb(yt.uponSanitizeShadowNode,rn,null),kQ(rn),OQ(rn),rn.content instanceof u&&so(rn.content);Gb(yt.afterSanitizeShadowDOM,Ae,null)};return t.sanitize=function(so){let Ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rn=null,Xn=null,Ma=null,bu=null;if(qN=!so,qN&&(so="<!-->"),typeof so!="string"&&!TQ(so))if(typeof so.toString=="function"){if(so=so.toString(),typeof so!="string")throw Mm("dirty is not a string, aborting")}else throw Mm("toString is not a function");if(!t.isSupported)return so;if(Ip||Tn(Ae),t.removed=[],typeof so=="string"&&(As=!1),As){if(so.nodeName){const qb=Se(so.nodeName);if(!sn[qb]||dt[qb])throw Mm("root node is forbidden and cannot be sanitized in-place")}}else if(so instanceof b)rn=wQ("<!---->"),Xn=rn.ownerDocument.importNode(so,!0),Xn.nodeType===px.element&&Xn.nodeName==="BODY"||Xn.nodeName==="HTML"?rn=Xn:rn.appendChild(Xn);else{if(!Ql&&!Yd&&!pu&&so.indexOf("<")===-1)return Be&&Hy?Be.createHTML(so):so;if(rn=wQ(so),!rn)return Ql?null:Hy?je:""}rn&&Jc&&Qf(rn.firstChild);const Tl=EQ(As?so:rn);for(;Ma=Tl.nextNode();)kQ(Ma),OQ(Ma),Ma.content instanceof u&&RJ(Ma.content);if(As)return so;if(Ql){if(ih)for(bu=Me.call(rn.ownerDocument);rn.firstChild;)bu.appendChild(rn.firstChild);else bu=rn;return(Ao.shadowroot||Ao.shadowrootmode)&&(bu=$e.call(r,bu,!0)),bu}let Xd=pu?rn.outerHTML:rn.innerHTML;return pu&&sn["!doctype"]&&rn.ownerDocument&&rn.ownerDocument.doctype&&rn.ownerDocument.doctype.name&&ja(WP,rn.ownerDocument.doctype.name)&&(Xd="<!DOCTYPE "+rn.ownerDocument.doctype.name+`>
`+Xd),Yd&&F_([Sn,wn,uo],qb=>{Xd=Nm(Xd,qb," ")}),Be&&Hy?Be.createHTML(Xd):Xd},t.setConfig=function(){let so=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Tn(so),Ip=!0},t.clearConfig=function(){ke=null,Ip=!1},t.isValidAttribute=function(so,Ae,rn){ke||Tn({});const Xn=Se(so),Ma=Se(Ae);return AQ(Xn,Ma,rn)},t.addHook=function(so,Ae){typeof Ae=="function"&&bb(yt[so],Ae)},t.removeHook=function(so,Ae){if(Ae!==void 0){const rn=hx(yt[so],Ae);return rn===-1?void 0:u9(yt[so],rn,1)[0]}return zP(yt[so])},t.removeHooks=function(so){yt[so]=[]},t.removeAllHooks=function(){yt=xT()},t}var wT=ST();const GP=Je.each,y9=Je.trim,qP=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],KP={ftp:21,http:80,https:443,mailto:25},W_=["img","video"],YP=(e,t)=>X(e)?!e:X(t)?!Lt(W_,t):!0,XP=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},ET=(e,t,o)=>{const r=XP(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?YP(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Vd{static parseDataUri(t){let o;const r=decodeURIComponent(t).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(t,o,r={}){if(r.allow_script_urls)return!0;{const c=hl.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!ET(r,c,o)}}static getDocumentBaseUrl(t){let o;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?o=t.href??"":o=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}source;protocol;authority;userInfo;user;password;host;port;relative;path="";directory="";file;query;anchor;settings;constructor(t,o={}){t=y9(t),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){c.source=t;return}const u=t.indexOf("//")===0;if(t.indexOf("/")===0&&!u&&(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const b=r?r.path:new Vd(document.location.href).directory;if(r?.protocol==="")t="//mce_host"+c.toAbsPath(b,t);else{const v=/([^#?]*)([#?]?.*)/.exec(t);v&&(t=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}t=t.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);f&&GP(qP,(b,v)=>{let S=f[v];S&&(S=S.replace(/\(mce_at\)/g,"@@")),c[b]=S}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(t){const o=/^(.*?)\/?(\w+)?$/.exec(t);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const o=new Vd(t,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(t,o){const r=new Vd(t,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const o=this.protocol?KP[this.protocol]:null;if(o&&(this.port||o)==(t.port||o))return!0}return!1}toRelPath(t,o){let r=0,c="",u,f;const b=t.substring(0,t.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(t,o){let r=0;const c=/\/$/.test(o)?"/":"",u=t.split("/"),f=o.split("/"),b=[];GP(u,R=>{R&&b.push(R)});const v=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}v.push(f[R])}const S=b.length-r;let O;return S<=0?O=ms(v).join("/"):O=b.slice(0,S).join("/")+"/"+ms(v).join("/"),O.indexOf("/")!==0&&(O="/"+O),c&&O.lastIndexOf("/")!==O.length-1&&(O+=c),O}getURI(t=!1){let o;return(!this.source||t)&&(o="",t||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const C9=Je.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ud="data-mce-type";let Ku=0;const bx=(e,t,o,r,c)=>{const u=t.validate,f=o.getSpecialElements();e.nodeType===hc&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&U(e.nodeValue)&&(e.nodeValue=Zz(e.nodeValue)));const b=c?.tagName??e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){X(c)&&(c.allowedTags[b]=!0);return}if(e.nodeType!==rg||b==="body")return;const v=te.fromDom(e),S=xs(v,Ud),O=hs(v,"data-mce-bogus");if(!S&&U(O)){O==="all"?Ko(v):pc(v);return}const R=o.getElementRule(b);if(u&&!R){kn(f,b)?Ko(v):pc(v);return}else X(c)&&(c.allowedTags[b]=!0);if(u&&R&&!S){if(xe(R.attributesForced??[],M=>{ws(v,M.name,M.value==="{$uid}"?`mce_${Ku++}`:M.value)}),xe(R.attributesDefault??[],M=>{xs(v,M.name)||ws(v,M.name,M.value==="{$uid}"?`mce_${Ku++}`:M.value)}),R.attributesRequired&&!po(R.attributesRequired,M=>xs(v,M))){pc(v);return}if(R.removeEmptyAttrs&&Qm(v)){pc(v);return}R.outputName&&R.outputName!==b&&Au(v,R.outputName)}},QP=(e,t,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=vx(t,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,G_(f,o,e.nodeName)&&(c.attrValue=f),t.allow_svg_data_urls&&hn(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Z_(e,f)&&(c.forceKeepAttr=!0)},vx=(e,t,o,r,c,u)=>o!=="html"&&!pg(r)?!0:!(c in C9&&ET(e,u,r))&&(!e.validate||t.isValid(r,c)||hn(c,"data-")||hn(c,"aria-")),Z_=(e,t)=>e.hasAttribute(Ud)&&(t==="id"||t==="class"||t==="style"),G_=(e,t,o)=>e in t.getBoolAttrs()&&!kn(t.getCustomElements(),o.toLowerCase()),JP=(e,t,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!vx(t,o,r,e.tagName.toLowerCase(),b,v)&&!Z_(e,b)?e.removeAttribute(b):G_(b,o,e.nodeName)&&e.setAttribute(b,b)}},eB=(e,t,o)=>{const r=wT();return r.addHook("uponSanitizeElement",(c,u)=>{bx(c,e,t,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{QP(c,e,t,o.current(),u)}),r},tB=(e,t)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},nB=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};wT().sanitize(e,o)},TT=(e,t)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=wT(),c=t.allow_mathml_annotation_encodings,u=Ot(c)&&c.length>0,f=v=>{const S=v.getAttribute("encoding");return u&&U(S)&&Lt(c,S)},b=(v,S)=>u&&S==="semantics"?P.some(!0):S==="annotation"?P.some(pt(v)&&f(v)):Ot(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(S)?P.from(!0):P.none();r.addHook("uponSanitizeElement",(v,S)=>{const O=S.tagName??v.nodeName.toLowerCase();b(v,O).each(M=>{S.allowedTags[O]=M,!M&&t.sanitize&&pt(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,S)=>{Ot(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(S.attrName)&&(S.forceKeepAttr=!0)}),r.sanitize(e,o)},q_=e=>t=>{const o=g2(t);if(o==="svg")nB(t);else if(o==="math")TT(t,e);else throw new Error("Not a namespace element")},x9=(e,t)=>{const o=jS();if(e.sanitize){const r=eB(e,t,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,tB(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:q_(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const S=o.track(v);bx(v,e,t,S),pt(v)&&JP(v,e,t,S)}o.reset()},sanitizeNamespaceElement:St}},oB=["script","style","template","param","meta","title","link"],sB=Je.makeMap,rB=Je.extend,K_=(e,t,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=t.childNodes;for(let v=0,S=b.length;v<S;v++){const O=b[v],R=new Oa(O.nodeName.toLowerCase(),O.nodeType);if(pt(O)){const M=O.attributes;for(let H=0,J=M.length;H<J;H++){const W=M[H];R.attr(W.name,W.value)}pg(R.name)&&(r(O),R.value=O.innerHTML)}else tt(O)?(R.value=O.data,f&&(R.raw=!0)):zn(O)?R.value=c?Gz(O.data):O.data:(l2(O)||zr(O))&&(R.value=O.data);if(u2(O)){const M=Oa.create("#text");M.value=O.innerHTML,M.raw=!0,R.append(M)}else pg(R.name)||K_(R,O,o,r,c);e.append(R)}},S9=(e,t,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;xe(t,b=>b(f)),jt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];xe(o,f=>f(u))}},w9=(e,t,o,r)=>{const c=o.validate,u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=rB(sB(oB),t.getBlockElements()),v=v0(t),S=/[ \t\r\n]+/g,O=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,M=be=>{let ve=be.parent;for(;X(ve);){if(ve.name in f)return!0;ve=ve.parent}return!1},H=be=>{let ve=be;for(;X(ve);){if(ve.name in v)return mx(t,u,f,ve);ve=ve.parent}return!1},J=be=>be.name in b||gl(t,be)||pg(be.name)&&be.parent===e,W=(be,ve)=>{const Be=ve?be.prev:be.next;return X(Be)||jt(be.parent)?!1:J(be.parent)&&(be.parent!==e||r.isRootContent===!0)};return[be=>{if(be.type===3&&!M(be)){let ve=be.value??"";ve=ve.replace(S," "),(Rm(be.prev,J)||W(be,!0))&&(ve=ve.replace(O,"")),ve.length===0||ve===" "&&be.prev&&be.prev.type===hc&&be.next&&be.next.type===hc?be.remove():be.value=ve}},be=>{if(be.type===1){const ve=t.getElementRule(be.name);if(c&&ve){const Be=mx(t,u,f,be);ve.paddInEmptyBlock&&Be&&H(be)?vp(o,r,J,be):ve.removeEmpty&&Be?J(be)?be.remove():be.unwrap():ve.paddEmpty&&(Be||Uv(be))&&vp(o,r,J,be)}}else if(be.type===3&&!M(be)){let ve=be.value??"";(be.next&&J(be.next)||W(be,!1))&&(ve=ve.replace(R,"")),ve.length===0?be.remove():be.value=ve}}]},Y_=(e,t)=>{const o=t.forced_root_block??e.forced_root_block;return o===!1?"":o===!0?"p":o},aB=' xmlns="http://www.w3.org/1999/xhtml"',Zv=(e={},t=Ea())=>{const o=PP(),r=PP(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=x9(c,t),b=(ve,Be,je="html",xt=!1)=>{const Kt=je==="xhtml",Me=Kt?"application/xhtml+xml":"text/html",Te=kn(t.getSpecialElements(),Be.toLowerCase()),$e=Te?`<${Be}>${ve}</${Be}>`:ve,yt=()=>/^[\s]*<head/i.test(ve)||/^[\s]*<html/i.test(ve)||/^[\s]*<!DOCTYPE/i.test(ve)?`<html${Kt?aB:""}>${$e}</html>`:Kt?`<html${aB}><head></head><body>${$e}</body></html>`:`<body>${$e}</body>`,Sn=u.parseFromString(yt(),Me),wn=xt?Sn.documentElement:Sn.body;return f.sanitizeHtmlElement(wn,Me),Te?wn.firstChild:wn},v=o.addFilter,S=o.getFilters,O=o.removeFilter,R=r.addFilter,M=r.getFilters,H=r.removeFilter,J=(ve,Be)=>{fx(t,ve)&&Be.push(ve)},W=(ve,Be)=>{const je=U(Be.attr(Ud)),xt=Be.type===1&&!kn(ve,Be.name)&&!gl(t,Be)&&!pg(Be.name);return Be.type===3||xt&&!je},Q=(ve,Be)=>{const je=rB(sB(oB),t.getBlockElements()),xt=/^[ \t\r\n]+/,Kt=/[ \t\r\n]+$/;let Me=ve.firstChild,Te=null;const $e=yt=>{yt&&(Me=yt.firstChild,Me&&Me.type===3&&(Me.value=Me.value?.replace(xt,"")),Me=yt.lastChild,Me&&Me.type===3&&(Me.value=Me.value?.replace(Kt,"")))};if(t.isValidChild(ve.name,Be.toLowerCase())){for(;Me;){const yt=Me.next;W(je,Me)?(Te||(Te=new Oa(Be,1),Te.attr(c.forced_root_block_attrs),ve.insert(Te,Me)),Te.append(Me)):($e(Te),Te=null),Me=yt}$e(Te)}},be={schema:t,addAttributeFilter:R,getAttributeFilters:M,removeAttributeFilter:H,addNodeFilter:v,getNodeFilters:S,removeNodeFilter:O,parse:(ve,Be={})=>{const je=c.validate,xt=(Be.context??c.root_name)==="#document",Kt=Be.context??(xt?"html":c.root_name),Me=b(ve,Kt,Be.format,xt);na(t,Me);const Te=new Oa(Kt,11);K_(Te,Me,t.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),Me.innerHTML="";const[$e,yt]=w9(Te,t,c,Be),Sn=[],wn=je?Bs=>J(Bs,Sn):St,uo={nodes:{},attributes:{}},qo=Bs=>__(S(),M(),Bs,uo);S9(Te,[$e,qo],[yt,wn]),Sn.reverse(),je&&Sn.length>0&&(Be.context?Be.invalid=!0:NP(Sn,t,Te,qo));const Cs=Y_(c,Be);return Cs&&(Te.name==="body"||Be.isRootContent)&&Q(Te,Cs),Be.invalid||DP(uo,Be),Te}};return a9(be,c),Yz(be,c,t),be},kT=e=>e instanceof Oa,E9=e=>kT(e)?fp({validate:!1}).serialize(e):e,cB=(e,t,o)=>{const r=E9(e),c=t(r);if(c.isDefaultPrevented())return c;if(kT(e))if(c.content!==r){const u=Zv({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},lB=e=>({sanitize:yv(e),sandbox_iframes:ip(e),sandbox_iframes_exclusions:Sm(e)}),iB=(e,t)=>{if(t.no_events)return Sr.value(t);{const o=rp(e,t);return o.isDefaultPrevented()?Sr.error(Bw(e,{content:"",...o}).content):Sr.value(o)}},yx=(e,t,o)=>o.no_events?t:cB(t,c=>Bw(e,{...o,content:c}),lB(e)).content,Cx=(e,t)=>{if(t.no_events)return Sr.value(t);{const o=cB(t.content,r=>_3(e,{...t,content:r}),lB(e));return o.isDefaultPrevented()?(Pw(e,o),Sr.error(void 0)):Sr.value(o)}},X_=(e,t,o)=>{o.no_events||Pw(e,{...o,content:t})},T9="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),k9=["content_css_cors"],A9="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),Q_=[{name:"export",replacedWith:"Export to PDF"}],uB=(e,t)=>{const o=ze(t,r=>kn(e,r));return kl(o)},_9=e=>{const t=uB(e,T9),o=e.forced_root_block;return(o===!1||o==="")&&t.push("forced_root_block (false only)"),kl(t)},J_=e=>uB(e,k9),dB=(e,t)=>{const o=Je.makeMap(e.plugins," "),c=ze(t,u=>kn(o,u));return kl(c)},O9=e=>dB(e,A9),D9=e=>dB(e,Q_.map(t=>t.name)),R9=(e,t)=>{const o=_9(e),r=O9(t),c=r.length>0,u=o.length>0,f=t.theme==="mobile";if(c||u||f){const v=f?`

Themes:
- mobile`:"",S=c?`

Plugins:
- ${r.join(`
- `)}`:"",O=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+S+O)}},N9=e=>Oo(Q_,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),M9=(e,t)=>{const o=J_(e),r=D9(t),c=r.length>0,u=o.length>0;if(c||u){const b=c?`

Plugins:
- ${r.map(N9).join(`
- `)}`:"",v=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},P9=(e,t)=>{R9(e,t),M9(e,t)},AT={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},xx=e=>{console.warn(AT[e],new Error().stack)},mB=e=>e.dom.length===0?(Ko(e),P.none()):P.some(e),B9=(e,t)=>e.filter(o=>$v.isBookmarkNode(o.dom)).bind(t?nc:al),_T=(e,t,o,r,c)=>{const u=e.dom,f=t.dom,b=r?u.length:f.length;r?(oT(u,f,c,!1,!r),o.setStart(f,b)):(oT(f,u,c,!1,!r),o.setEnd(f,b))},$9=(e,t,o)=>{tc(e).each(r=>{const c=e.dom;t&&ox(r,Re(c,0),o)?tT(c,0,o):!t&&Rc(r,Re(c,c.length),o)&&nT(c,c.length,o)})},fB=(e,t,o,r,c)=>{e.bind(u=>((r?nT:tT)(u.dom,r?u.dom.length:0,c),t.filter(Eo).map(b=>_T(u,b,o,r,c)))).orThunk(()=>B9(t,r).or(t).filter(Eo).map(f=>$9(f,r,c)))},I9=(e,t,o)=>{const r=P.from(t.firstChild).map(te.fromDom),c=P.from(t.lastChild).map(te.fromDom);e.deleteContents(),e.insertNode(t);const u=r.bind(al).filter(Eo).bind(mB),f=c.bind(nc).filter(Eo).bind(mB);fB(u,r,e,!0,o),fB(f,c,e,!1,o),e.collapse(!1)},F9=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),L9=(e,t)=>{if(t.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(t.content,{forced_root_block:!1,...c,...t});return fp({validate:!1},e.schema).serialize(u)}else return t.content},OT=(e,t,o={})=>{const r=F9(o,t);Cx(e,r).each(c=>{const u=L9(e,c),f=e.selection.getRng();I9(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),lu(e,f),X_(e,u,c)})},H9=(e,t,o={})=>{xx("selectionSetContent"),OT(e,t,o)},z9=e=>X(e.firstChild)&&e.firstChild===e.lastChild,V9=e=>e.name==="br"||e.value===Is,U9=(e,t)=>e.getBlockElements()[t.name]&&z9(t)&&V9(t.firstChild),j9=(e,t)=>{const o=e.getNonEmptyElements();return X(t)&&(t.isEmpty(o)||U9(e,t))},YX=(e,t)=>{let o=t.firstChild,r=t.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),j9(e,r)&&(r=r?.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},jd=e=>{const t=e.firstChild,o=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode?.removeChild(t),o&&o.id==="mce_marker"&&o.parentNode?.removeChild(o),e},gB=(e,t,o)=>{const r=t.serialize(o),c=e.createFragment(r);return jd(c)},W9=e=>ze(e?.childNodes??[],t=>t.nodeName==="LI"),hB=e=>e.data===Is||Vs(e),Z9=e=>X(e?.firstChild)&&e.firstChild===e.lastChild&&hB(e.firstChild),G9=e=>!e.firstChild||Z9(e),XX=e=>e.length>0&&G9(e[e.length-1])?e.slice(0,-1):e,Wa=(e,t)=>{const o=e.getParent(t,e.isBlock);return o&&o.nodeName==="LI"?o:null},q9=(e,t)=>!!Wa(e,t),eO=(e,t)=>{const o=t.cloneRange(),r=t.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},pB=(e,t)=>{const o=Re.before(e),c=ju(t).next(o);return c?c.toRange():null},Sx=(e,t)=>{const o=Re.after(e),c=ju(t).prev(o);return c?c.toRange():null},K9=(e,t,o,r)=>{const c=eO(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Je.each(t,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),Sx(t[t.length-1],o)},Y9=(e,t,o)=>{const r=e.parentNode;return r&&Je.each(t,c=>{r.insertBefore(c,e)}),pB(e,o)},X9=(e,t,o,r)=>(r.insertAfter(t.reverse(),e),Sx(t[0],o)),Q9=(e,t,o,r)=>{const c=gB(t,e,r),u=Wa(t,o.startContainer),f=XX(W9(c.firstChild)),b=1,v=2,S=t.getRoot(),O=R=>{const M=Re.fromRangeStart(o),H=ju(t.getRoot()),W=(R===b?H.prev(M):H.next(M))?.getNode();return W?Wa(t,W)!==u:!0};return u?O(b)?Y9(u,f,S):O(v)?X9(u,f,S,t):K9(u,f,S,o):null},J9=["pre"],bB=(e,t,o,r)=>{const c=t.firstChild,u=t.lastChild,f=u.attr("data-mce-type")==="bookmark"?u.prev:u,b=c===f,v=Lt(J9,c.name);if(b&&v){const S=c.attr("contenteditable")!=="false",O=e.getParent(o,e.isBlock)?.nodeName.toLowerCase()===c.name,R=P.from(Om(r,o)).forall(ml);return S&&O&&R}else return!1},tO=Oh,vB=(e,t,o)=>{if(X(o)){const r=e.getParent(t.endContainer,tO);return o===r&&dA(te.fromDom(o),t)}else return!1},yB=(e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){const o=t.childNodes;return o.length===1&&Vs(o[0])||o.length===0}else return!1},eV=(e,t,o)=>{o.getAttribute("data-mce-bogus")==="all"?o.parentNode?.insertBefore(e.dom.createFragment(t),o):yB(e.dom,o)?e.dom.setHTML(o,t):OT(e,t,{no_events:!0})},tV=(e,t,o)=>{P.from(e.getParent(t,"td,th")).map(te.fromDom).each(r=>M2(r,o))},nV=(e,t)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(t){const c=e.getBody(),u=Dm(e),f="*[data-mce-fragment]",b=r.select(f);Je.each(b,v=>{const S=M=>X(o[M.nodeName.toLowerCase()]),O=M=>M.childNodes.length===1;if((M=>!(lM(r,M)||iM(r,M)))(v)&&S(v)&&O(v)){const M=Hv(r,v),H=(ge,be)=>Ka(ge,ve=>Lt(be,ve)),J=ge=>O(v)&&r.is(ge,f)&&S(ge)&&(ge.nodeName===v.nodeName&&H(M,Hv(r,ge))||J(ge.children[0])),W=ge=>X(ge)&&ge!==c&&(u.compare(v,ge)||W(ge.parentElement)),Q=ge=>X(ge)&&ge!==c&&r.is(ge,f)&&(TH(r,v,ge)||Q(ge.parentElement));(J(v.children[0])||W(v.parentElement)&&!Q(v.parentElement))&&r.remove(v,!0)}}),Fz(e,bd(b))}},oV=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},sV=e=>{Je.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},DT=e=>!!e.getAttribute("data-mce-fragment"),CB=(e,t)=>X(t)&&!e.schema.getVoidElements()[t.nodeName],xB=(e,t)=>{let o;const r=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const u=Om(e.getBody(),t);if(u&&r.getContentEditable(u)==="false"){r.remove(t),c.select(u);return}let f=r.createRng();const b=t.previousSibling;if(tt(b)){f.setStart(b,b.nodeValue?.length??0);const O=t.nextSibling;tt(O)&&(b.appendData(O.data),O.parentNode?.removeChild(O))}else f.setStartBefore(t),f.setEndBefore(t);const v=O=>{let R=Re.fromRangeStart(O);return R=ju(e.getBody()).next(R),R?.toRange()},S=r.getParent(t,r.isBlock);if(r.remove(t),S&&r.isEmpty(S)){const O=tO(S);Fl(te.fromDom(S)),f.setStart(S,0),f.setEnd(S,0),!O&&!DT(S)&&(o=v(f))?(f=o,r.remove(S)):r.add(S,r.create("br",O?{}:{"data-mce-bogus":"1"}))}c.setRng(f)},rV=e=>{const t=e.dom,o=D_(e.selection.getRng());e.selection.setRng(o);const r=t.getParent(o.startContainer,tO);vB(t,o,r)?rT(e,o,te.fromDom(r)):x7(o)||C7(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},SB=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return P.some(t);return P.none()},aV=(e,t,o)=>po(o.children(),Yl)&&e.getParent(t,e.isBlock)?.nodeName==="SUMMARY",cV=(e,t,o)=>{const r=e.selection,c=e.dom,u=e.parser,f=o.merge,b=fp({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(t=qc(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,v);let S=r.getRng();const O=S.startContainer,R=e.getBody();O===R&&r.isCollapsed()&&c.isBlock(R.firstChild)&&CB(e,R.firstChild)&&c.isEmpty(R.firstChild)&&(S=c.createRng(),S.setStart(R.firstChild,0),S.setEnd(R.firstChild,0),r.setRng(S)),r.isCollapsed()||rV(e);const M=r.getNode(),H={context:M.nodeName.toLowerCase(),data:o.data,insert:!0},J=u.parse(t,H);if(o.paste===!0&&YX(e.schema,J)&&q9(c,M))return S=Q9(b,c,r.getRng(),J),S&&r.setRng(S),t;o.paste===!0&&bB(c,J,M,e.getBody())&&J.firstChild?.unwrap(),oV(J);let W=J.lastChild;if(W&&W.attr("id")==="mce_marker"){const Q=W;for(W=W.prev;W&&W.name!=="table";W=W.walk(!0))if(W.type===3||!c.isBlock(W.name)){W.parent&&e.schema.isValidChild(W.parent.name,"span")&&W.parent.insert(Q,W,W.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(M),!H.invalid&&!aV(c,M,J))t=b.serialize(J),eV(e,t,M);else{OT(e,v);let Q=r.getNode(),ge;const be=e.getBody();for(lm(Q)?Q=ge=be:ge=Q;ge&&ge!==be;)Q=ge,ge=ge.parentNode;t=Q===be?be.innerHTML:c.getOuterHTML(Q);const ve=u.parse(t),Be=SB(ve),je=Be.bind(Uz).getOr(ve);Be.each(Me=>Me.replace(J));const xt=jz(J);J.unwrap();const Kt=ze(xt,Me=>fx(e.schema,Me));NP(Kt,e.schema,je),RP(u.getNodeFilters(),u.getAttributeFilters(),ve),t=b.serialize(ve),Q===be?c.setHTML(be,t):c.setOuterHTML(Q,t)}return nV(e,f),xB(e,c.get("mce_marker")),sV(e.getBody()),tV(c,r.getStart(),e.schema),g0(e.schema,e.getBody(),r.getStart()),t},lV=e=>{Fv(e)&&E(e.getBody()).each(t=>{const o=t.getNode(),r=Uc(o)?E(o).getOr(t):t;e.selection.setRng(r.toRange())})},wx=(e,t,o)=>{e.dom.setHTML(e.getBody(),t),o!==!0&&lV(e)},nO=(e,t,o,r)=>{if(o=qc(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';t.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+c+"</li>");const u=_r(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,ru(e),o)):o||(o=c),wx(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=fp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=P0(te.fromDom(t))?o:Je.trim(o);return wx(e,c,r.no_selection),{content:c,html:c}}},iV=(e,t,o,r)=>{RP(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=fp({validate:!1},e.schema).serialize(o),u=qc(P0(te.fromDom(t))?c:Je.trim(c));return wx(e,u,r.no_selection),{content:o,html:u}},oO=(e,t,o)=>P.from(e.getBody()).map(r=>kT(t)?iV(e,r,t,o):nO(e,r,t,o)).getOr({content:t,html:kT(o.content)?"":o.content}),Ex={},wB=pi(["pre"]),uV=(e,t)=>{Ex[e]||(Ex[e]=[]),Ex[e].push(t)},dV=(e,t)=>{kn(Ex,e)&&xe(Ex[e],o=>{o(t)})};uV("pre",e=>{const t=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return wB(f)&&Lt(c,f)},r=(c,u)=>{const f=te.fromDom(u),b=Bl(f).dom;Ko(f),il(te.fromDom(c),[te.fromTag("br",b),te.fromTag("br",b),...Ds(f)])};if(!t.collapsed){const c=e.selection.getSelectedBlocks(),u=ze(ze(c,wB),o(c));xe(u,f=>{r(f.previousSibling,f)})}});const EB=Je.each,mV=(e,t,o,r)=>{const c=u=>{if(Vc(u)&&pt(u.parentNode)&&e.isEditable(u)){const f=b5(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Je.walk(r,c,"childNodes"),c(r))},TB=(e,t,o,r)=>{if(t.styles&&t.styles.backgroundColor){const c=x_(e,"fontSize");C_(r,u=>c(u)&&e.isEditable(u),vP(e,"backgroundColor",jg(t.styles.backgroundColor,o)))}},fV=(e,t,o,r)=>{if(Ua(t)&&(t.inline==="sub"||t.inline==="sup")){const c=x_(e,"fontSize");C_(r,f=>c(f)&&e.isEditable(f),vP(e,"fontSize",""));const u=ze(e.select(t.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},gV=(e,t,o,r)=>{EB(t,c=>{Ua(c)&&EB(e.dom.select(c.inline,r),u=>{y_(u)&&dx(e,c,o,u,c.exact?u:null)}),kz(e.dom,c,r)})},hV=(e,t,o,r,c)=>{const u=c.parentNode;qu(e,u,o,r)&&dx(e,t,r,c)||t.merge_with_parents&&u&&e.dom.getParent(u,f=>qu(e,f,o,r)?(dx(e,t,r,c),!0):!1)},pV=Je.each,bV=(e,t,o,r)=>{if(i5(e)&&Ua(t)&&o.parentNode){const c=v0(e.schema),u=Zt(te.fromDom(o),f=>z(f.dom));return Go(c,r)&&on(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},vV=(e,t,o,r)=>{const c=e.formatter.get(t),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,S=(H,J)=>{let W=!1;return pV(H,Q=>Pd(Q)?b.getContentEditable(J)==="false"&&!Q.ceFalseOverride||X(Q.collapsed)&&Q.collapsed!==f?!0:b.is(J,Q.selector)&&!z(J)?(gb(e,J,Q,o,J),W=!0,!1):!0:!1),W},O=H=>{if(U(H)){const J=b.create(H);return gb(e,J,u,o,r),J}else return null},R=(H,J,W)=>{const Q=[];let ge=!0;const be=u.inline||u.block,ve=O(be),Be=Kt=>E7(u)&&qu(e,Kt,t,o),je=(Kt,Me,Te)=>{const $e=T7(u)&&ZC(e.schema,Kt)&&Pv(e,Me,be);return Te&&$e},xt=(Kt,Me,Te,$e)=>{const yt=Kt.nodeName.toLowerCase(),Sn=Pv(e,be,yt)&&Pv(e,Me,be),wn=!W&&tt(Kt)&&_1(Kt.data),uo=z(Kt),qo=!Ua(u)||!H.isBlock(Kt);return(Te||$e)&&Sn&&!wn&&!uo&&qo};Bd(H,J,Kt=>{let Me;const Te=$e=>{let yt=!1,Sn=ge,wn=!1;const uo=$e.parentNode,qo=uo.nodeName.toLowerCase(),Cs=H.getContentEditable($e);X(Cs)&&(Sn=ge,ge=Cs==="true",yt=!0,wn=p5(e,$e));const Bs=ge&&!yt;if(Vs($e)&&!bV(e,u,$e,qo)){Me=null,km(u)&&H.remove($e);return}if(Be($e)){Me=null;return}if(je($e,qo,Bs)){const Na=H.rename($e,be);gb(e,Na,u,o,$e),Q.push(Na),Me=null;return}if(Pd(u)){let Na=S(c,$e);if(!Na&&X(uo)&&gA(u)&&(Na=S(c,uo)),!Ua(u)||Na){Me=null;return}}X(ve)&&xt($e,qo,Bs,wn)?(Me||(Me=H.clone(ve,!1),uo.insertBefore(Me,$e),Q.push(Me)),wn&&yt&&(ge=Sn),Me.appendChild($e)):(Me=null,xe(as($e.childNodes),Te),yt&&(ge=Sn),Me=null)};xe(Kt,Te)}),u.links===!0&&xe(Q,Kt=>{const Me=Te=>{Te.nodeName==="A"&&gb(e,Te,u,o,r),xe(as(Te.childNodes),Me)};Me(Kt)}),Iz(e,t,bd(Q)),xe(Q,Kt=>{const Me=yt=>{let Sn=0;return xe(yt.childNodes,wn=>{!S7(wn)&&!Xs(wn)&&Sn++}),Sn},Te=yt=>Oo(yt.childNodes,WC).filter(wn=>H.getContentEditable(wn)!=="false"&&cT(H,wn,u)).map(wn=>{const uo=H.clone(wn,!1);return gb(e,uo,u,o,yt),H.replace(uo,yt,!0),H.remove(wn,!0),uo}).getOr(yt),$e=Me(Kt);if((Q.length>1||!H.isBlock(Kt))&&$e===0){H.remove(Kt,!0);return}(Ua(u)||km(u)&&u.wrapper)&&(!u.exact&&$e===1&&(Kt=Te(Kt)),gV(e,c,o,Kt),hV(e,u,t,o,Kt),TB(H,u,o,Kt),mV(H,u,o,Kt),fV(H,u,o,Kt),bP(e,u,o,Kt))})},M=jC(r)?r:v.getNode();if(b.getContentEditable(M)==="false"&&!p5(e,M)){r=M,S(c,r),Cm(e,t,r,o);return}if(u){if(r)if(jC(r)){if(!S(c,r)){const H=b.createRng();H.setStartBefore(r),H.setEndAfter(r),R(b,Pf(b,H,c),!0)}}else R(b,r,!0);else!f||!Ua(u)||Ft(e).length?(v.setRng(D_(v.getRng())),f5(e,()=>{VC(e,(H,J)=>{const W=J?H:Pf(b,H,c);R(b,W,!1)})},He),e.nodeChanged()):oP(e,t,o),Ez(e.formatter,t).each(H=>{const J=v_(e.selection);xe(J,W=>c_(b,W,H,o))});dV(t,e)}Cm(e,t,r,o)},kB=(e,t,o,r)=>{(r||e.selection.isEditable())&&vV(e,t,o,r)},yb=e=>kn(e,"vars"),RT=(e,t)=>{e.set({}),t.on("NodeChange",o=>{_B(t,o.element,e.get())}),t.on("FormatApply FormatRemove",o=>{const r=P.from(o.node).map(c=>jC(c)?c:c.startContainer).bind(c=>pt(c)?P.some(c):P.from(c.parentElement)).getOrThunk(()=>sO(t));_B(t,r,e.get())})},sO=e=>e.selection.getStart(),rO=(e,t,o,r,c)=>el(t,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!Gn(v)},b=>YM(e,b,o)?!0:r?!1:X(e.formatter.matchNode(b,o,c,!0))),AB=(e,t)=>{const o=t??sO(e);return ze(RE(e.dom,o),r=>pt(r)&&!uf(r))},_B=(e,t,o)=>{const r=AB(e,t);Un(o,(c,u)=>{const f=b=>{const v=rO(e,r,u,b.similar,yb(b)?b.vars:void 0),S=v.isSome();if(b.state.get()!==S){b.state.set(S);const O=v.getOr(t);yb(b)?b.callback(S,{node:O,format:u,parents:r}):xe(b.callbacks,R=>R(S,{node:O,format:u,parents:r}))}};xe([c.withSimilar,c.withoutSimilar],f),xe(c.withVars,f)})},aO=(e,t,o,r,c,u)=>{const f=t.get();xe(o.split(","),b=>{const v=Zo(f,b).getOrThunk(()=>{const O={withSimilar:{state:Wt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Wt(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=O,O}),S=()=>{const O=AB(e);return rO(e,O,b,c,u).isSome()};if(Gn(u)){const O=c?v.withSimilar:v.withoutSimilar;O.callbacks.push(r),O.callbacks.length===1&&O.state.set(S())}else v.withVars.push({state:Wt(S()),similar:c,vars:u,callback:r})}),t.set(f)},yV=(e,t,o)=>{const r=e.get();xe(t.split(","),c=>Zo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:ze(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:ze(u.withoutSimilar.callbacks,f=>f!==o)},withVars:ze(u.withVars,f=>f.callback!==o)}})),e.set(r)},CV=(e,t,o,r,c,u)=>(aO(e,t,o,r,c,u),{unbind:()=>yV(t,o,r)}),xV=(e,t,o,r)=>{const c=e.formatter.get(t);c&&(i_(e,t,o,r)&&(!("toggle"in c[0])||c[0].toggle)?uT(e,t,o,r):kB(e,t,o,r))},cO=(e,t,o)=>({element:e,width:t,rows:o}),OB=(e,t)=>({element:e,cells:t}),NT=(e,t)=>({x:e,y:t}),Gv=(e,t)=>ul(e,t).bind(Jf).getOr(1),SV=(e,t,o,r,c)=>{const u=Gv(c,"rowspan"),f=Gv(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=OB(Wi(r),[]));for(let S=t;S<t+f;S++){const O=b[v].cells;O[S]=v===o&&S===t?c:br(c)}}},qv=(e,t,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[t]},du=(e,t,o)=>{for(;qv(e,t,o);)t++;return t},Kv=e=>Fo(e,(t,o)=>o.cells.length>t?o.cells.length:t,0),Xo=(e,t)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Qn(c[u],t))return P.some(NT(u,r))}return P.none()},Yv=(e,t,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,S=t<r?v.slice(t,r+1):v.slice(r,t+1);u.push(OB(f[b].element,S))}return u},DB=(e,t,o)=>{const r=t.x,c=t.y,u=o.x,f=o.y,b=c<f?Yv(e,r,c,u,f):Yv(e,r,f,u,c);return cO(e.element,Kv(b),b)},RB=(e,t)=>{const o=br(e.element),r=te.fromTag("tbody");return il(r,t),bo(o,r),o},MT=e=>en(e.rows,t=>{const o=en(t.cells,c=>{const u=Wi(c);return rr(u,"colspan"),rr(u,"rowspan"),u}),r=br(t.element);return il(r,o),r}),lO=e=>{const t=cO(br(e),0,[]);return xe(Ne(e,"tr"),(o,r)=>{xe(Ne(o,"td,th"),(c,u)=>{SV(t,du(t,u,r),r,o,c)})}),cO(t.element,Kv(t.rows),t.rows)},iO=e=>RB(e,MT(e)),uO=(e,t,o)=>Xo(e,t).bind(r=>Xo(e,o).map(c=>DB(e,r,c))),dO=e=>Oo(e,t=>Hn(t)==="ul"||Hn(t)==="ol"),PT=(e,t)=>Oo(e,o=>Hn(o)==="li"&&dA(o,t)).fold(st([]),o=>dO(e).map(r=>{const c=te.fromTag(Hn(r)),u=Pi(tf(r),(f,b)=>hn(b,"list-style"));return bc(c,u),[te.fromTag("li"),c]}).getOr([])),mO=(e,t)=>{const o=Fo(t,(r,c)=>(bo(c,r),c),e);return t.length>0?yd([o]):o},NB=e=>Tc(e)?tc(e).filter(Si).fold(st([]),t=>[e,t]):Si(e)?[e]:[],MB=(e,t,o)=>{const r=te.fromDom(t.commonAncestorContainer),c=Fd(r,e),u=ze(c,v=>o.isWrapper(Hn(v))),f=PT(c,t),b=u.concat(f.length?f:NB(r));return en(b,br)},fO=()=>yd([]),PB=(e,t,o)=>mO(te.fromDom(t.cloneContents()),MB(e,t,o)),BB=(e,t)=>cr(t,"table",de(Qn,e)),Cb=(e,t)=>BB(e,t[0]).bind(o=>{const r=t[0],c=t[t.length-1],u=lO(o);return uO(u,r,c).map(f=>yd([iO(f)]))}).getOrThunk(fO),$B=(e,t,o)=>t.length>0&&t[0].collapsed?fO():PB(e,t[0],o),gO=(e,t,o)=>{const r=kE(t,e);return r.length>0?Cb(e,r):$B(e,t,o)},BT=(e,t)=>t>=0&&t<e.length&&ql(e.charAt(t)),IB=e=>qc(e.innerText),FB=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),LB=e=>P.from(e.selection.getRng()).map(t=>{const o=P.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),c=FB(o),u=te.fromDom(t.cloneContents());sM(u),rM(u);const f=e.dom.add(r,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),b=IB(f),v=qc(f.textContent??"");if(e.dom.remove(f),BT(v,0)||BT(v,v.length-1)){const S=o.getOr(r),O=IB(S),R=O.indexOf(b);if(R===-1)return b;{const M=BT(O,R-1),H=BT(O,R+b.length);return(M?" ":"")+b+(H?" ":"")}}else return b}).getOr(""),HB=(e,t)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=PA(e,Nv(c)),f=t.contextual?gO(te.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,t)},$T=(e,t)=>{if(t.format==="text")return LB(e);{const o=HB(e,t);return t.format==="tree"?o:e.selection.isCollapsed()?"":o}},zB=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),VB=(e,t,o={})=>{const r=zB(o,t);return iB(e,r).fold(Wo,c=>{const u=$T(e,c);return yx(e,u,c)})},IT=0,hO=1,pO=2,UB=(e,t)=>{const o=e.length+t.length+2,r=new Array(o),c=new Array(o),u=(O,R,M)=>({start:O,end:R,diag:M}),f=(O,R,M,H,J)=>{const W=v(O,R,M,H);if(W===null||W.start===R&&W.diag===R-H||W.end===O&&W.diag===O-M){let Q=O,ge=M;for(;Q<R||ge<H;)Q<R&&ge<H&&e[Q]===t[ge]?(J.push([IT,e[Q]]),++Q,++ge):R-O>H-M?(J.push([pO,e[Q]]),++Q):(J.push([hO,t[ge]]),++ge)}else{f(O,W.start,M,W.start-W.diag,J);for(let Q=W.start;Q<W.end;++Q)J.push([IT,e[Q]]);f(W.end,R,W.end-W.diag,H,J)}},b=(O,R,M,H)=>{let J=O;for(;J-R<H&&J<M&&e[J]===t[J-R];)++J;return u(O,J,R)},v=(O,R,M,H)=>{const J=R-O,W=H-M;if(J===0||W===0)return null;const Q=J-W,ge=W+J,be=(ge%2===0?ge:ge+1)/2;r[1+be]=O,c[1+be]=R+1;let ve,Be,je,xt,Kt;for(ve=0;ve<=be;++ve){for(Be=-ve;Be<=ve;Be+=2){for(je=Be+be,Be===-ve||Be!==ve&&r[je-1]<r[je+1]?r[je]=r[je+1]:r[je]=r[je-1]+1,xt=r[je],Kt=xt-O+M-Be;xt<R&&Kt<H&&e[xt]===t[Kt];)r[je]=++xt,++Kt;if(Q%2!==0&&Q-ve<=Be&&Be<=Q+ve&&c[je-Q]<=r[je])return b(c[je-Q],Be+O-M,R,H)}for(Be=Q-ve;Be<=Q+ve;Be+=2){for(je=Be+be-Q,Be===Q-ve||Be!==Q+ve&&c[je+1]<=c[je-1]?c[je]=c[je+1]-1:c[je]=c[je-1],xt=c[je]-1,Kt=xt-O+M-Be;xt>=O&&Kt>=M&&e[xt]===t[Kt];)c[je]=xt--,Kt--;if(Q%2===0&&-ve<=Be&&Be<=ve&&c[je]<=r[je+Q])return b(c[je],Be+O-M,R,H)}}return null},S=[];return f(0,e.length,0,t.length,S),S},bO=e=>pt(e)?e.outerHTML:tt(e)?hl.encodeRaw(e.data,!1):zn(e)?"<!--"+e.data+"-->":"",jB=e=>{let t;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);t=o.firstChild;)r.appendChild(t);return r},WB=(e,t,o)=>{const r=jB(t);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},ZB=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const o=e.childNodes[t];e.removeChild(o)}},vO=(e,t)=>{let o=0;xe(e,r=>{r[0]===IT?o++:r[0]===hO?(WB(t,r[1],o),o++):r[0]===pO&&ZB(t,o)})},GB=(e,t)=>ze(en(as(e.childNodes),A(qc,bO)),o=>o.length>0),qB=(e,t)=>{const o=en(as(t.childNodes),bO);return vO(UB(o,e),t),t},KB=pa(()=>document.implementation.createHTMLDocument("undo")),YB=e=>e.querySelector(`iframe, ${d2}`)!==null,XB=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),QB=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),Tx=e=>{const t=e.serializer.getTempAttrs(),o=oM(e.getBody(),t);return YB(o)?XB(GB(o)):QB(qc(o.innerHTML))},kx=(e,t,o)=>{const r=o?t.beforeBookmark:t.bookmark;t.type==="fragmented"?qB(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:X(r)&&wt(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},Xv=e=>e.type==="fragmented"?e.fragments.join(""):e.content,yO=(e,t)=>{const o=te.fromTag("body",KB());return _u(o,Xv(t)),xe(Ne(o,"*[data-mce-bogus]"),pc),e&&xe(Ne(o,"details[open]"),r=>rr(r,"open")),ia(o)},wV=(e,t)=>Xv(e)===Xv(t),JB=(e,t,o)=>yO(e,t)===yO(e,o),Qv=(e,t,o)=>!t||!o?!1:wV(t,o)?!0:JB(e,t,o),Ax=e=>e.get()===0,Sp=(e,t,o)=>{Ax(o)&&(e.typing=t)},FT=(e,t)=>{e.typing&&(Sp(e,!1,t),e.add())},e6=e=>{e.typing&&(e.typing=!1,e.add())},Jv=(e,t,o)=>{Ax(t)&&o.set(Qh(e.selection))},CO=(e,t,o,r,c,u,f)=>{const b=Tx(e),v=Je.extend(u||{},b);if(!Ax(r)||e.removed)return null;const S=t.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:S,originalEvent:f}).isDefaultPrevented()||S&&Qv(e.readonly,S,v))return null;t.data[o.get()]&&c.get().each(M=>{t.data[o.get()].beforeBookmark=M});const O=nE(e);if(O&&t.data.length>O){for(let M=0;M<t.data.length-1;M++)t.data[M]=t.data[M+1];t.data.length--,o.set(t.data.length)}v.bookmark=Qh(e.selection),o.get()<t.data.length-1&&(t.data.length=o.get()+1),t.data.push(v),o.set(t.data.length-1);const R={level:v,lastLevel:S,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),v},xO=(e,t,o)=>{t.data=[],o.set(0),t.typing=!1,e.dispatch("ClearUndos")},ey=(e,t,o,r,c)=>{if(t.transact(r)){const u=t.data[o.get()].bookmark,f=t.data[o.get()-1];kx(e,f,!0),t.transact(c)&&(t.data[o.get()-1].beforeBookmark=u)}},wp=(e,t,o)=>{let r;return t.get()<o.length-1&&(t.set(t.get()+1),r=o[t.get()],kx(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},t6=(e,t,o,r)=>{let c;return t.typing&&(t.add(),t.typing=!1,Sp(t,!1,o)),r.get()>0&&(r.set(r.get()-1),c=t.data[r.get()],kx(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},EV=e=>{e.clear(),e.add()},TV=(e,t,o)=>o.get()>0||t.typing&&t.data[0]&&!Qv(e.readonly,Tx(e),t.data[0]),n6=(e,t)=>t.get()<e.data.length-1&&!e.typing,o6=(e,t,o)=>(FT(e,t),e.beforeChange(),e.ignore(o),e.add()),s6=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},kV=(e,t)=>{const o=e.dom,r=X(t)?t:e.getBody();xe(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=sE(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=pv(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},Yg=e=>({init:{bindEvents:St},undoManager:{beforeChange:(t,o)=>Jv(e,t,o),add:(t,o,r,c,u,f)=>CO(e,t,o,r,c,u,f),undo:(t,o,r)=>t6(e,t,o,r),redo:(t,o)=>wp(e,t,o),clear:(t,o)=>xO(e,t,o),reset:t=>EV(t),hasUndo:(t,o)=>TV(e,t,o),hasRedo:(t,o)=>n6(t,o),transact:(t,o,r)=>o6(t,o,r),ignore:(t,o)=>s6(t,o),extra:(t,o,r,c)=>ey(e,t,o,r,c)},formatter:{match:(t,o,r,c)=>i_(e,t,o,r,c),matchAll:(t,o)=>u_(e,t,o),matchNode:(t,o,r,c)=>qu(e,t,o,r,c),canApply:t=>d_(e,t),closest:t=>QM(e,t),apply:(t,o,r)=>kB(e,t,o,r),remove:(t,o,r,c)=>uT(e,t,o,r,c),toggle:(t,o,r)=>xV(e,t,o,r),formatChanged:(t,o,r,c,u)=>CV(e,t,o,r,c,u)},editor:{getContent:t=>xH(e,t),setContent:(t,o)=>oO(e,t,o),insertContent:(t,o)=>cV(e,t,o),addVisual:t=>kV(e,t)},selection:{getContent:(t,o)=>VB(e,t,o)},autocompleter:{addDecoration:St,removeDecoration:St},raw:{getModel:()=>P.none()}}),xb=e=>{const t=S=>Ye(S)?S:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(S,O,R)=>r.transact(R),ignore:(S,O)=>r.ignore(O),extra:(S,O,R,M)=>r.extra(R,M)},formatter:{match:(S,O,R,M)=>c.match(S,t(O),M),matchAll:c.matchAll,matchNode:c.matchNode,canApply:S=>c.canApply(S),closest:S=>c.closest(S),apply:(S,O,R)=>c.apply(S,t(O)),remove:(S,O,R,M)=>c.remove(S,t(O)),toggle:(S,O,R)=>c.toggle(S,t(O)),formatChanged:(S,O,R,M,H)=>c.formatChanged(O,R,M,H)},editor:{getContent:S=>u.getContent(S),setContent:(S,O)=>({content:u.setContent(S,O),html:""}),insertContent:(S,O)=>(u.insertContent(S),""),addVisual:u.addVisual},selection:{getContent:(S,O)=>f.getContent(O)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>P.some(v.getRawModel())}}},r6=()=>{const e=st(null),t=st("");return{init:{bindEvents:St},undoManager:{beforeChange:St,add:e,undo:e,redo:e,clear:St,reset:St,hasUndo:ye,hasRedo:ye,transact:e,ignore:St,extra:St},formatter:{match:ye,matchAll:st([]),matchNode:st(void 0),canApply:ye,closest:t,apply:St,remove:St,toggle:St,formatChanged:st({unbind:St})},editor:{getContent:t,setContent:st({content:"",html:""}),insertContent:st(""),addVisual:St},selection:{getContent:t},autocompleter:{addDecoration:St,removeDecoration:St},raw:{getModel:st(P.none())}}},Bm=e=>kn(e.plugins,"rtc"),AV=e=>Zo(e.plugins,"rtc").bind(t=>P.from(t.setup)),_V=e=>{const t=e;return AV(e).fold(()=>(t.rtcInstance=Yg(e),P.none()),o=>(t.rtcInstance=r6(),P.some(()=>o().then(r=>(t.rtcInstance=xb(r),r.rtc.isRemote)))))},SO=e=>e.rtcInstance?e.rtcInstance:Yg(e),vs=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Wd=(e,t,o)=>{vs(e).undoManager.beforeChange(t,o)},a6=(e,t,o,r,c,u,f)=>vs(e).undoManager.add(t,o,r,c,u,f),wO=(e,t,o,r)=>vs(e).undoManager.undo(t,o,r),EO=(e,t,o)=>vs(e).undoManager.redo(t,o),LT=(e,t,o)=>{vs(e).undoManager.clear(t,o)},OV=(e,t)=>{vs(e).undoManager.reset(t)},c6=(e,t,o)=>vs(e).undoManager.hasUndo(t,o),_x=(e,t,o)=>vs(e).undoManager.hasRedo(t,o),DV=(e,t,o,r)=>vs(e).undoManager.transact(t,o,r),HT=(e,t,o)=>{vs(e).undoManager.ignore(t,o)},TO=(e,t,o,r,c)=>{vs(e).undoManager.extra(t,o,r,c)},l6=(e,t,o,r,c)=>vs(e).formatter.match(t,o,r,c),Ox=(e,t,o)=>vs(e).formatter.matchAll(t,o),RV=(e,t,o,r,c)=>vs(e).formatter.matchNode(t,o,r,c),NV=(e,t)=>vs(e).formatter.canApply(t),$m=(e,t)=>vs(e).formatter.closest(t),ki=(e,t,o,r)=>{vs(e).formatter.apply(t,o,r)},Dx=(e,t,o,r,c)=>{vs(e).formatter.remove(t,o,r,c)},Ai=(e,t,o,r)=>{vs(e).formatter.toggle(t,o,r)},MV=(e,t,o,r,c,u)=>vs(e).formatter.formatChanged(t,o,r,c,u),ys=(e,t)=>SO(e).editor.getContent(t),PV=(e,t,o)=>SO(e).editor.setContent(t,o),Xg=(e,t,o)=>SO(e).editor.insertContent(t,o),Rx=(e,t,o)=>vs(e).selection.getContent(t,o),i6=(e,t)=>vs(e).editor.addVisual(t),zT=e=>vs(e).init.bindEvents(),kO=(e,t={})=>{const o=t.format?t.format:"html";return Rx(e,o,t)},u6=(e,t,o)=>{if(kn(e,t)){const r=ze(e[t],c=>c!==o);r.length===0?delete e[t]:e[t]=r}};var AO=(e,t)=>{let o,r;const c=(b,v)=>Oo(v,S=>e.is(S,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},t.on("NodeChange",b=>{const v=b.element,S=u(v),O={};Un(o,(R,M)=>{c(M,S).each(H=>{r[M]||(xe(R,J=>{J(!0,{node:H,selector:M,parents:S})}),r[M]=R),O[M]=R})}),Un(r,(R,M)=>{O[M]||(delete r[M],xe(R,H=>{H(!1,{node:v,selector:M,parents:S})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(t.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{u6(o,b,v),u6(r,b,v)}})}};const d6=e=>!!(e&&e.ownerDocument)&&ec(te.fromDom(e.ownerDocument),te.fromDom(e)),m6=e=>e?d6(e.startContainer)&&d6(e.endContainer):!1,_O=(e,t,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=AO(e,r),b=(At,sn)=>{const Ho=e.createRng();X(At)&&X(sn)?(Ho.setStart(At,sn),Ho.setEnd(At,sn),Be(Ho),ge(!1)):(_E(e,Ho,r.getBody(),!0),Be(Ho))},v=At=>kO(r,At),S=(At,sn)=>H9(r,At,sn),O=At=>WE(r.getBody(),ve(),At),R=At=>RA(r.getBody(),ve(),At),M=(At,sn)=>Na.getBookmark(At,sn),H=At=>Na.moveToBookmark(At),J=(At,sn)=>(X5(e,At,sn).each(Be),At),W=()=>{const At=ve(),sn=be();return!At||At.item?!1:At.compareEndPoints?At.compareEndPoints("StartToEnd",At)===0:!sn||At.collapsed},Q=()=>{if(r.mode.isReadOnly())return!1;const At=ve(),sn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return sn.length>0?Ka(sn,Ho=>e.isEditable(Ho.parentElement)):cH(e,At)},ge=At=>{const sn=ve();sn.collapse(!!At),Be(sn)},be=()=>t.getSelection?t.getSelection():t.document.selection,ve=()=>{let At;const sn=(Ao,qa,Le)=>{try{return qa.compareBoundaryPoints(Ao,Le)}catch{return-1}},Ho=t.document;if(X(r.bookmark)&&!Fv(r)){const Ao=FE(r);if(Ao.isSome())return Ao.map(qa=>PA(r,[qa])[0]).getOr(Ho.createRange())}try{const Ao=be();Ao&&!d0(Ao.anchorNode)&&(Ao.rangeCount>0?At=Ao.getRangeAt(0):At=Ho.createRange(),At=PA(r,[At])[0])}catch{}if(At||(At=Ho.createRange()),lm(At.startContainer)&&At.collapsed){const Ao=e.getRoot();At.setStart(Ao,0),At.setEnd(Ao,0)}return c&&u&&(sn(At.START_TO_START,At,c)===0&&sn(At.END_TO_END,At,c)===0?At=u:(c=null,u=null)),At},Be=(At,sn)=>{if(!m6(At))return;const Ho=be();if(At=r.dispatch("SetSelectionRange",{range:At,forward:sn}).range,Ho){u=At;try{Ho.removeAllRanges(),Ho.addRange(At)}catch{}sn===!1&&Ho.extend&&(Ho.collapse(At.endContainer,At.endOffset),Ho.extend(At.startContainer,At.startOffset)),c=Ho.rangeCount>0?Ho.getRangeAt(0):null}if(!At.collapsed&&At.startContainer===At.endContainer&&Ho?.setBaseAndExtent&&At.endOffset-At.startOffset<2&&At.startContainer.hasChildNodes()){const qa=At.startContainer.childNodes[At.startOffset];qa&&qa.nodeName==="IMG"&&(Ho.setBaseAndExtent(At.startContainer,At.startOffset,At.endContainer,At.endOffset),(Ho.anchorNode!==At.startContainer||Ho.focusNode!==At.endContainer)&&Ho.setBaseAndExtent(qa,0,qa,1))}r.dispatch("AfterSetSelectionRange",{range:At,forward:sn})},je=At=>(OT(r,e.getOuterHTML(At)),At),xt=()=>MA(r.getBody(),ve()),Kt=(At,sn)=>lH(e,ve(),At,sn),Me=()=>{const At=be(),sn=At?.anchorNode,Ho=At?.focusNode;if(!At||!sn||!Ho||d0(sn)||d0(Ho))return!0;const Ao=e.createRng(),qa=e.createRng();try{Ao.setStart(sn,At.anchorOffset),Ao.collapse(!0),qa.setStart(Ho,At.focusOffset),qa.collapse(!0)}catch{return!0}return Ao.compareBoundaryPoints(Ao.START_TO_START,qa)<=0},Bs={dom:e,win:t,serializer:o,editor:r,expand:(At={type:"word"})=>Be(_m(e).expand(ve(),At)),collapse:ge,setCursorLocation:b,getContent:v,setContent:S,getBookmark:M,moveToBookmark:H,select:J,isCollapsed:W,isEditable:Q,isForward:Me,setNode:je,getNode:xt,getSel:be,setRng:Be,getRng:ve,getStart:O,getEnd:R,getSelectedBlocks:Kt,normalize:()=>{const At=ve(),sn=be();if(!Tm(sn)&&zC(r)){const Ho=VE(e,At);return Ho.each(Ao=>{Be(Ao,Me())}),Ho.getOr(At)}return At},selectorChanged:(At,sn)=>(f(At,sn),Bs),selectorChangedWithUnbind:f,getScrollContainer:()=>{let At,sn=e.getRoot();for(;sn&&sn.nodeName!=="BODY";){if(sn.scrollHeight>sn.clientHeight){At=sn;break}sn=sn.parentNode}return At},scrollIntoView:(At,sn)=>{X(At)?_t(r,At,sn):lu(r,ve(),sn)},placeCaretAt:(At,sn)=>Be(F5(At,sn,r.getDoc())),getBoundingClientRect:()=>{const At=ve();return At.collapsed?Re.fromRangeStart(At).getClientRects()[0]:At.getBoundingClientRect()},destroy:()=>{t=c=u=null,_i.destroy()}},Na=$v(Bs),_i=q7(Bs,r);return Bs.bookmarkManager=Na,Bs.controlSelection=_i,Bs},OO=(e,t,o)=>{t.addNodeFilter("br",(r,c,u)=>{const f=Je.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const S=O=>O.name in f||gl(o,O);for(let O=0,R=r.length;O<R;O++){let M=r[O],H=M.parent;if(H&&S(H)&&M===H.lastChild){let J=M.prev;for(;J;){const W=J.name;if(W!=="span"||J.attr("data-mce-type")!=="bookmark"){W==="br"&&(M=null);break}J=J.prev}if(M&&(M.remove(),mx(o,b,v,H))){const W=o.getElementRule(H.name);W&&(W.removeEmpty?H.remove():W.paddEmpty&&vp(e,u,S,H))}}else{let J=M;for(;H&&H.firstChild===J&&H.lastChild===J&&(J=H,!f[H.name]);)H=H.parent;if(J===H){const W=new Oa("#text",3);W.value=Is,M.replace(W)}}}})},f6=(e,t,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=t.url_converter,b=t.url_converter_scope;let v=r.length;for(;v--;){const S=r[v];let O=S.attr(u);O!==void 0?(S.attr(c,O.length>0?O:null),S.attr(u,null)):(O=S.attr(c),c==="style"?O=o.serializeStyle(o.parseStyle(O),S.name):f&&(O=f.call(b,O,c,S.name)),S.attr(c,O.length>0?O:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(P.from(b.firstChild).exists(S=>!_1(S.value??""))?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{const u=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=r.length;for(;f--;){const b=r[f],v=b.firstChild,S=v?.value??"";if(c==="script"){const O=b.attr("type");O&&b.attr("type",O==="mce-no/type"?null:O.replace(/^mce\-/,"")),t.element_format==="xhtml"&&v&&S.length>0&&(v.value=`// <![CDATA[
`+u(S)+`
// ]]>`)}else t.element_format==="xhtml"&&v&&S.length>0&&(v.value=`<!--
`+u(S)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;t.preserve_cdata&&f?.indexOf("[CDATA[")===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):f?.indexOf("mce:protected ")===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{xe(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.remove_trailing_brs&&OO(t,e,e.schema)},VT=e=>{const t=r=>r?.name==="br",o=e.lastChild;if(t(o)){const r=o.prev;t(r)&&(o.remove(),r.remove())}},BV=(e,t,o)=>{let r;const c=e.dom;let u=t.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Je.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return ev(e,{...o,node:u}),r&&(c.doc=r),u},$V=(e,t)=>X(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,IV=(e,t,o)=>$V(e,o)?BV(e,t,o):t,FV=(e,t,o)=>{Je.inArray(t,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.push(o))},LV=(e,t,o)=>!t.no_events&&e?oC(e,{...t,content:o}).content:o,g6=(e,t,o)=>{const r=qc(o.getInner?t.innerHTML:e.getOuterHTML(t));return o.selection||P0(te.fromDom(t))?r:Je.trim(r)},HV=(e,t,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(t,r);return VT(c),c},zV=(e,t,o)=>fp(e,t).serialize(o),h6=(e,t,o,r,c)=>{const u=zV(t,o,r);return LV(e,c,u)},VV=(e,t)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=t&&t.dom?t.dom:lo.DOM,u=t&&t.schema?t.schema:Ea(r),f=Zv(r,u);f6(f,r,c);const b=(v,S={})=>{const{indent:O,entity_encoding:R,...M}=S,H={format:"html",...M},J=IV(t,v,H),W=g6(c,J,H),Q=HV(f,W,H);if(H.format==="tree")return Q;const ge={...r,...X(O)?{indent:O}:{},...X(R)?{entity_encoding:R}:{}};return h6(t,ge,u,Q,H)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:de(FV,f,o),getTempAttrs:st(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},DO=(e,t)=>{const o=VV(e,t);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},Nx="html",UV=(e,t)=>({...e,format:t,get:!0,getInner:!0}),jV=(e,t={})=>{const o=t.format?t.format:Nx,r=UV(t,o);return iB(e,r).fold(Wo,c=>{const u=ys(e,c);return yx(e,u,c)})},p6="html",b6=(e,t)=>({format:p6,...e,set:!0,content:t}),RO=(e,t,o={})=>{const r=b6(o,t);Cx(e,r).each(c=>{const u=PV(e,c.content,c);X_(e,u.html,c)})},Mx=lo.DOM,Nc=e=>{Mx.setStyle(e.id,"display",e.orgDisplay)},UT=e=>P.from(e).each(t=>t.destroy()),v6=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const o=e.selection;if(o){const r=o.dom;t.selection=o.win=o.dom=r.doc=null}},NO=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),Mx.unbind(t,"submit reset",e.formEventDelegate))},MO=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&X(c?.nextSibling)&&Mx.remove(c.nextSibling),sC(e),e.editorManager.remove(e),!e.inline&&r&&Nc(e),Dw(e),Mx.remove(e.getContainer()),UT(t),UT(o),e.destroy()}},y6=(e,t)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),UT(o),UT(r)),NO(e),v6(e),e.destroyed=!0}},jT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>kn(e,c)}})(),ty=Ur.ModelManager,PO=(e,t)=>t.dom[e],BO=(e,t)=>parseInt(Hs(t,e),10),mu=de(PO,"clientWidth"),ZV=de(PO,"clientHeight"),GV=de(BO,"margin-top"),QX=de(BO,"margin-left"),$O=e=>e.dom.getBoundingClientRect(),qV=(e,t,o)=>{const r=mu(e),c=ZV(e);return t>=0&&o>=0&&t<=r&&o<=c},JX=(e,t,o,r)=>{const c=$O(t),u=e?c.left+t.dom.clientLeft+QX(t):0,f=e?c.top+t.dom.clientTop+GV(t):0,b=o-u,v=r-f;return{x:b,y:v}},KV=(e,t,o)=>{const r=te.fromDom(e.getBody()),c=e.inline?r:hr(r),u=JX(e.inline,c,t,o);return qV(c,u.x,u.y)},IO=e=>P.from(e).map(te.fromDom),Zd=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return IO(t).map(Po).getOr(!1)};var FO=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const Px=e=>{const t=[],o=()=>{const M=e.theme;return M&&M.getNotificationManagerImpl?M.getNotificationManagerImpl():FO()},r=()=>P.from(t[0]),c=(M,H)=>M.type===H.type&&M.text===H.text&&!M.progressBar&&!M.timeout&&!H.progressBar&&!H.timeout,u=()=>{r().each(M=>{M.reposition()})},f=M=>{t.push(M)},b=M=>{Jl(t,H=>H===M).each(H=>{t.splice(H,1)})},v=(M,H=!0)=>e.removed||!Zd(e)?{}:(H&&e.dispatch("BeforeOpenNotification",{notification:M}),Oo(t,J=>c(o().getArgs(J),M)).getOrThunk(()=>{e.editorManager.setActive(e);const J=o().open(M,()=>{b(J)},()=>B5(e));return f(J),u(),e.dispatch("OpenNotification",{notification:{...J}}),J})),S=()=>{r().each(M=>{o().close(M),b(M),u()})},O=st(t);return(M=>{M.on("SkinLoaded",()=>{const H=pC(M);H&&v({text:H,type:"warning",timeout:0},!1),u()}),M.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),M.on("remove",()=>{xe(t.slice(),H=>{o().close(H)})}),M.on("keydown",H=>{const J=H.key?.toLowerCase()==="f12"||H.keyCode===123;H.altKey&&J&&(H.preventDefault(),r().map(W=>te.fromDom(W.getEl())).each(W=>cg(W)))})})(e),{open:v,close:S,getNotifications:O}},Ep=Ur.PluginManager,Sb=Ur.ThemeManager;var LO=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const C6=e=>{let t=[];const o=()=>{const Q=e.theme;return Q&&Q.getWindowManagerImpl?Q.getWindowManagerImpl():LO()},r=(Q,ge)=>(...be)=>ge?ge.apply(Q,be):void 0,c=Q=>{e.dispatch("OpenWindow",{dialog:Q})},u=Q=>{e.dispatch("CloseWindow",{dialog:Q})},f=(Q,ge)=>{t.push({instanceApi:Q,triggerElement:ge}),c(Q)},b=Q=>{u(Q);const ge=lc(t,({instanceApi:be,triggerElement:ve})=>be===Q?ve:P.none());t=ze(t,({instanceApi:be})=>be!==Q),t.length===0?e.focus():ge.filter(Po).each(cg)},v=()=>P.from(t[t.length-1]),S=Q=>{e.editorManager.setActive(e),IE(e);const ge=Il();e.ui.show();const be=Q();return f(be,ge),be},O=(Q,ge)=>S(()=>o().open(Q,ge,b)),R=Q=>S(()=>o().openUrl(Q,b)),M=Q=>{t.length!==0&&Q.each(ge=>cg(ge))},H=(Q,ge,be)=>{const ve=Il(),Be=o();Be.alert(Q,r(be||Be,()=>{M(ve),ge?.()}))},J=(Q,ge,be)=>{const ve=Il(),Be=o();Be.confirm(Q,r(be||Be,je=>{M(ve),ge?.(je)}))},W=()=>{v().each(({instanceApi:Q})=>{o().close(Q),b(Q)})};return e.on("remove",()=>{xe(t,({instanceApi:Q})=>{o().close(Q)})}),{open:O,openUrl:R,alert:H,confirm:J,close:W}},HO=(e,t)=>{e.notificationManager.open({type:"error",text:t})},WT=(e,t)=>{e._skinLoaded?HO(e,t):e.on("SkinLoaded",()=>{HO(e,t)})},YV=(e,t)=>{WT(e,bl.translate(["Failed to upload image: {0}",t]))},Qg=(e,t,o)=>{tv(e,t,{message:o}),console.error(o)},wb=(e,t,o)=>o?`Failed to load ${e}: ${o} from url ${t}`:`Failed to load ${e} url: ${t}`,x6=(e,t,o)=>{Qg(e,"PluginLoadError",wb("plugin",t,o))},XV=(e,t,o)=>{Qg(e,"IconsLoadError",wb("icons",t,o))},Eb=(e,t,o)=>{Qg(e,"LanguageLoadError",wb("language",t,o))},S6=(e,t,o)=>{Qg(e,"ThemeLoadError",wb("theme",t,o))},QV=(e,t,o)=>{Qg(e,"ModelLoadError",wb("model",t,o))},w6=(e,t)=>{Qg(e,"LicenseKeyManagerLoadError",wb("license key manager",t))},JV=(e,t)=>{Qg(e,"ComponentLoadError",wb("component",t))},eU=(e,t,o)=>{const r=bl.translate(["Failed to initialize plugin: {0}",t]);tv(e,"PluginLoadError",{message:r}),ZT(r,o),WT(e,r)},ZT=(e,...t)=>{const o=window.console;o&&(o.error?o.error(e,...t):o.log(e,...t))},E6=new WeakMap,tU=e=>{if(E6.has(e))return;E6.set(e,!0);const t=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),t()},zO=(e,t)=>{const{type:o,message:r}=t;e.notificationManager.open({type:o,text:r})},nU=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},VO=e=>{nU(e.type)(e.message)},Lf=(e,t)=>{const{console:o,editor:r}=t;X(r)&&(e._skinLoaded?zO(e,r):e.on("SkinLoaded",()=>{zO(e,r)})),X(o)&&VO(o)},UO="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",Bx="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",T6=e=>{const t="The editor is disabled because a TinyMCE license key has not been provided.";Lf(e,{console:{type:"error",message:[`${t}`,Bx,UO].join(" ")},editor:{type:"warning",message:`${t}`}})},k6=(e,t)=>{const o=`${t==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;Lf(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,UO].join(" ")},editor:{type:"warning",message:`${r}`}})},A6=(e,t,o)=>{const r=`The "${t}" plugin requires a valid TinyMCE license key.`;Lf(e,{console:{type:"error",message:[`${r}`,UO].join(" ")},...o?{}:{editor:{type:"warning",message:"One or more premium plugins are disabled due to license key restrictions."}}})},$x="licensekeymanager",_6=e=>U(tb(e))?"online":"offline",oU=e=>{const t=dE(e)?.toLowerCase();return t==="gpl"?"gpl":jt(t)?"no_key":"non_gpl"},jO=e=>{const t=_6(e),o=oU(e),r=new Set([...Y1(e),...Vt(yC(e))]).has($x);return o!=="gpl"||t==="online"||r?{type:"use_plugin",onlineStatus:t,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:t,licenseKeyType:o,forcePlugin:r}},O6=e=>t=>{let o=!1;return{validate:r=>{const{plugin:c}=r,u=U(c);return u&&(A6(t,c,o),o=!0),Promise.resolve(e&&!u)}}},sU=O6(!1),GT=O6(!0),Ix="manager",WO=$x,GO=(()=>{const e=Ur();return{load:(c,u)=>{if(jO(c).type==="use_plugin"){const v=Zo(yC(c),WO).map(Os).filter(fs).getOr(`plugins/${WO}/plugin${u}.js`);e.load(Ix,v).catch(()=>{w6(c,v)})}},add:c=>{e.add(Ix,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=jO(c),b=e.get(Ix);if(X(b)){const v=b(c,e.urls[Ix]);u(v)}else switch(f.type){case"use_gpl":{u(GT(c));break}case"use_plugin":{tU(c),u(sU(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?T6(c):k6(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),rU=e=>{P.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},qO=(e,t,o)=>{try{e.getDoc().execCommand(t,!1,String(o))}catch{}},D6=(e,t)=>{qO(e,"StyleWithCSS",t),qO(e,"enableInlineTableEditing",t),qO(e,"enableObjectResizing",t)},KO=e=>{e.selection.setRng(e.selection.getRng())},R6=(e,t,o)=>{Ch(e,t)&&!o?lr(e,t):o&&vc(e,t)},YO=e=>{const t=te.fromDom(e.getBody());R6(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),rU(e)},N6=e=>{const t=te.fromDom(e.getBody());R6(t,"mce-content-readonly",!1),e.hasEditableRoot()&&w(t,!0),D6(e,!1),B5(e)&&e.focus(),KO(e),e.nodeChanged()},Jg=e=>au(e),Tb="data-mce-contenteditable",Fx=e=>{xe(Ne(e,'*[contenteditable="true"]'),t=>{ws(t,Tb,"true"),w(t,!1)})},Im=e=>{xe(Ne(e,`*[${Tb}="true"]`),t=>{rr(t,Tb),w(t,!0)})},M6=(e,t)=>{const o=te.fromDom(e.getBody());t?(YO(e),w(o,!1),Fx(o)):(Im(o),N6(e))},XO=e=>{e.serializer?nr(e):e.on("PreInit",()=>{nr(e)})},nr=e=>{e.parser.addAttributeFilter("contenteditable",t=>{Jg(e)&&xe(t,o=>{o.attr(Tb,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Tb,t=>{Jg(e)&&xe(t,o=>{o.attr("contenteditable",o.attr(Tb))})}),e.serializer.addTempAttr(Tb)},QO=e=>e.type==="click",qT=["copy"],eh=e=>Lt(qT,e.type),P6=(e,t)=>ua(t,"a",r=>Qn(r,te.fromDom(e.getBody()))).bind(r=>ul(r,"href")),JO=(e,t)=>Es(t,"details",r=>Qn(r,te.fromDom(e.getBody()))),aU=(e,t)=>{if(QO(t)&&!Et.metaKeyPressed(t)){const o=te.fromDom(t.target);P6(e,o).fold(()=>{JO(e,o)&&t.preventDefault()},r=>{if(t.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Zm(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else eh(t)&&e.dispatch(t.type,t)},ny=e=>{e.on("ShowCaret ObjectSelected",t=>{Jg(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||M6(e,t.state)})},cU=e=>{XO(e),ny(e)},lU=e=>/^[a-z0-9\-]+$/i.test(e),Tp=e=>"content/"+e+"/content.css",iU=e=>tinymce.Resource.has(Tp(e)),kb=e=>th(e,R3(e)),uU=e=>th(e,gC(e)),th=(e,t)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return en(t,u=>iU(u)?u:lU(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},dU=e=>{e.contentCSS=e.contentCSS.concat(kb(e),uU(e))},Yu=e=>e?as(e.getElementsByTagName("img")):[],Ab=(e,t)=>{const o={};return{findAll:(c,u=He)=>{const f=ze(Yu(c),v=>{const S=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!S||S===fo.transparentSrc?!1:hn(S,"blob:")?!e.isUploaded(S)&&u(v):hn(S,"data:")?u(v):!1}),b=en(f,v=>{const S=v.src;if(kn(o,S))return o[S].then(O=>U(O)?O:{image:v,blobInfo:O.blobInfo});{const O=P_(t,S).then(R=>(delete o[S],{image:v,blobInfo:R})).catch(R=>(delete o[S],R));return o[S]=O,O}});return Promise.all(b)}}},B6=()=>{let o={};const r=(M,H)=>({status:M,resultUri:H}),c=M=>M in o;return{hasBlobUri:c,getResultUri:M=>{const H=o[M];return H?H.resultUri:null},isPending:M=>c(M)?o[M].status===1:!1,isUploaded:M=>c(M)?o[M].status===2:!1,markPending:M=>{o[M]=r(1,null)},markUploaded:(M,H)=>{o[M]=r(2,H)},removeFailed:M=>{delete o[M]},destroy:()=>{o={}}}};let Lx=0;const eD=()=>{const e=()=>Math.round(ei()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},mU=e=>e+Lx+++eD(),oy=()=>{let e=[];const t=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,M,H,J,W)=>{if(U(R))return r({id:R,name:J,filename:W,blob:M,base64:H});if(Ye(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const M=R.id||mU("blobid"),H=R.name||M,J=R.blob;return{id:st(M),name:st(H),filename:st(R.filename||H+"."+t(J.type)),blob:st(J),base64:st(R.base64),blobUri:st(R.blobUri||URL.createObjectURL(J)),uri:st(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>Oo(e,R).getOrUndefined(),f=R=>u(M=>M.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(M=>M.blobUri()===R),getByData:(R,M)=>u(H=>H.base64()===R&&H.blob().type===M),findFirst:u,removeByUri:R=>{e=ze(e,M=>M.blobUri()===R?(URL.revokeObjectURL(M.blobUri()),!1):!0)},destroy:()=>{xe(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},fU=(e,t)=>{const o={},r=(W,Q)=>W?W.replace(/\/$/,"")+"/"+Q.replace(/^\//,""):Q,c=(W,Q)=>new Promise((ge,be)=>{const ve=new XMLHttpRequest;ve.open("POST",t.url),ve.withCredentials=t.credentials,ve.upload.onprogress=je=>{Q(je.loaded/je.total*100)},ve.onerror=()=>{be("Image upload failed due to a XHR Transport error. Code: "+ve.status)},ve.onload=()=>{if(ve.status<200||ve.status>=300){be("HTTP Error: "+ve.status);return}const je=JSON.parse(ve.responseText);if(!je||!U(je.location)){be("Invalid JSON: "+ve.responseText);return}ge(r(t.basePath,je.location))};const Be=new FormData;Be.append("file",W.blob(),W.filename()),ve.send(Be)}),u=se(t.handler)?t.handler:c,f=()=>new Promise(W=>{W([])}),b=(W,Q)=>({url:Q,blobInfo:W,status:!0}),v=(W,Q)=>({url:"",blobInfo:W,status:!1,error:Q}),S=(W,Q)=>{Je.each(o[W],ge=>{ge(Q)}),delete o[W]},O=(W,Q,ge)=>(e.markPending(W.blobUri()),new Promise(be=>{let ve,Be;try{const je=()=>{ve&&(ve.close(),Be=St)},xt=Me=>{je();const Te=U(Me)?Me:Me.url;e.markUploaded(W.blobUri(),Te),S(W.blobUri(),b(W,Te)),be(b(W,Te))},Kt=Me=>{je(),e.removeFailed(W.blobUri()),S(W.blobUri(),v(W,Me)),be(v(W,Me))};Be=Me=>{Me<0||Me>100||P.from(ve).orThunk(()=>P.from(ge).map(fn)).each(Te=>{ve=Te,Te.progressBar.value(Me)})},Q(W,Be).then(xt,Me=>{Kt(U(Me)?{message:Me}:Me)})}catch(je){be(v(W,je))}})),R=W=>W===c,M=W=>{const Q=W.blobUri();return new Promise(ge=>{o[Q]=o[Q]||[],o[Q].push(ge)})},H=(W,Q)=>(W=Je.grep(W,ge=>!e.isUploaded(ge.blobUri())),Promise.all(Je.map(W,ge=>e.isPending(ge.blobUri())?M(ge):O(ge,u,Q))));return{upload:(W,Q)=>!t.url&&R(u)?f():H(W,Q)}},Xu=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Hx=(e,t)=>fU(t,{url:iv(e),basePath:fC(e),credentials:O3(e),handler:Yw(e)}),$6=e=>{const t=B6(),o=Hx(e,t);return{upload:(r,c=!0)=>o.upload(r,c?Xu(e):void 0)}},tD=(e,t)=>e.dom.isEmpty(t.dom)&&X(e.schema.getTextBlockElements()[Hn(t)]),nD=e=>t=>{tD(e,t)&&bo(t,te.fromHtml('<br data-mce-bogus="1" />'))},_b=e=>{const t=oy();let o,r;const c=B6(),u=[],f=ve=>Be=>e.selection?ve(Be):[],b=ve=>ve+(ve.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(ve,Be,je)=>{let xt=0;do xt=ve.indexOf(Be,xt),xt!==-1&&(ve=ve.substring(0,xt)+je+ve.substr(xt+Be.length),xt+=je.length-Be.length+1);while(xt!==-1);return ve},S=(ve,Be,je)=>{const xt=`src="${je}"${je===fo.transparentSrc?' data-mce-placeholder="1"':""}`;return ve=v(ve,`src="${Be}"`,xt),ve=v(ve,'data-mce-src="'+Be+'"','data-mce-src="'+je+'"'),ve},O=(ve,Be)=>{xe(e.undoManager.data,je=>{je.type==="fragmented"?je.fragments=en(je.fragments,xt=>S(xt,ve,Be)):je.content=S(je.content,ve,Be)})},R=(ve,Be)=>{const je=e.convertURL(Be,"src");O(ve.src,Be),ta(te.fromDom(ve),{src:qw(e)?b(Be):Be,"data-mce-src":je})},M=()=>(o||(o=Hx(e,c)),Q().then(f(ve=>{const Be=en(ve,je=>je.blobInfo);return o.upload(Be,Xu(e)).then(f(je=>{const xt=[];let Kt=!1;const Me=en(je,(Te,$e)=>{const{blobInfo:yt,image:Sn}=ve[$e];let wn=!1;return Te.status&&Kw(e)?(Te.url&&!_s(Sn.src,Te.url)&&(Kt=!0),t.removeByUri(Sn.src),Bm(e)||R(Sn,Te.url)):Te.error&&(Te.error.remove&&(O(Sn.src,fo.transparentSrc),xt.push(Sn),wn=!0),YV(e,Te.error.message)),{element:Sn,status:Te.status,uploadUri:Te.url,blobInfo:yt,removed:wn}});return xt.length>0&&!Bm(e)?e.undoManager.transact(()=>{xe(bd(xt),Te=>{const $e=tc(Te);Ko(Te),$e.each(nD(e)),t.removeByUri(Te.dom.src)})}):Kt&&e.undoManager.dispatchChange(),Me}))}))),H=()=>dC(e)?M():Promise.resolve([]),J=ve=>Ka(u,Be=>Be(ve)),W=ve=>{u.push(ve)},Q=()=>(r||(r=Ab(c,t)),r.findAll(e.getBody(),J).then(f(ve=>{const Be=ze(ve,je=>U(je)?(WT(e,je),!1):je.uriType!=="blob");return Bm(e)||xe(Be,je=>{O(je.image.src,je.blobInfo.blobUri()),je.image.src=je.blobInfo.blobUri(),je.image.removeAttribute("data-mce-src")}),Be}))),ge=()=>{t.destroy(),c.destroy(),r=o=null},be=ve=>ve.replace(/src="(blob:[^"]+)"/g,(Be,je)=>{const xt=c.getResultUri(je);if(xt)return'src="'+xt+'"';let Kt=t.getByUri(je);return Kt||(Kt=Fo(e.editorManager.get(),(Me,Te)=>Me||Te.editorUpload&&Te.editorUpload.blobCache.getByUri(je),void 0)),Kt?'src="data:'+Kt.blob().type+";base64,"+Kt.base64()+'"':Be});return e.on("SetContent",()=>{dC(e)?H():Q()}),e.on("RawSaveContent",ve=>{ve.content=be(ve.content)}),e.on("GetContent",ve=>{ve.source_view||ve.format==="raw"||ve.format==="tree"||(ve.content=be(ve.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",ve=>{xe(ve,Be=>{const je=Be.attr("src");if(!je||t.getByUri(je))return;const xt=c.getResultUri(je);xt&&Be.attr("src",xt)})})}),{blobCache:t,addFilter:W,uploadImages:M,uploadImagesAuto:H,scanForImages:Q,destroy:ge}},oD=e=>{const t=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"},remove_similar:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>pt(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Je.each(f,(b,v)=>{t.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>c?.customValue??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Je.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},I6={remove_similar:!0,inherit:!1},sy={selector:"td,th",...I6},gU={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...sy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...sy},tablecellbordercolor:{styles:{borderColor:"%value"},...sy},tablecellclass:{classes:["%value"],...sy},tableclass:{selector:"table",classes:["%value"],...I6},tablecellborderstyle:{styles:{borderStyle:"%value"},...sy},tablecellborderwidth:{styles:{borderWidth:"%value"},...sy}},hU=st(gU),pU=e=>{const t={},o=f=>X(f)?t[f]:t,r=f=>kn(t,f),c=(f,b)=>{f&&(U(f)?(Ot(b)||(b=[b]),xe(b,v=>{Gn(v.deep)&&(v.deep=!Pd(v)),Gn(v.split)&&(v.split=!Pd(v)||Ua(v)),Gn(v.remove)&&Pd(v)&&!Ua(v)&&(v.remove="none"),Pd(v)&&Ua(v)&&(v.mixed=!0,v.block_expand=!0),U(v.classes)&&(v.classes=v.classes.split(/\s+/))}),t[f]=b):Un(f,(v,S)=>{c(S,v)}))},u=f=>(f&&t[f]&&delete t[f],t);return c(oD(e)),c(hU()),c($3(e)),{get:o,has:r,register:c,unregister:u}},KT=Je.each,Qc=lo.DOM,Qu=e=>X(e)&&Ye(e),F6=(e,t)=>{const o=t&&t.schema||Ea({}),r=(v,S)=>{S.classes.length>0&&Qc.addClass(v,S.classes.join(" ")),Qc.setAttribs(v,S.attrs)},c=v=>{const S=U(v)?{name:v,classes:[],attrs:{}}:v,O=Qc.create(S.name);return r(O,S),O},u=(v,S)=>{const R=o.getElementRule(v.nodeName.toLowerCase())?.parentsRequired;return R&&R.length?S&&Lt(R,S)?S:R[0]:!1},f=(v,S,O)=>{let R;const M=S[0],H=Qu(M)?M.name:void 0,J=u(v,H);if(J)H===J?(R=M,S=S.slice(1)):R=J;else if(M)R=M,S=S.slice(1);else if(!O)return v;const W=R?c(R):Qc.create("div");W.appendChild(v),O&&Je.each(O,ge=>{const be=c(ge);W.insertBefore(be,v)});const Q=Qu(R)?R.siblings:void 0;return f(W,S,Q)},b=Qc.create("div");if(e.length>0){const v=e[0],S=c(v),O=Qu(v)?v.siblings:void 0;b.appendChild(f(S,e.slice(1),O))}return b},bU=e=>{e=Je.trim(e);let t="div";const o={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Je.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=t||"div",o},vU=e=>U(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Je.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const o=Je.map(t.split(/(?:~\+|~|\+)/),bU),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],yU=(e,t)=>{let o="",r=I3(e);if(r==="")return"";const c=M=>U(M)?M.replace(/%(\w+)/g,""):"",u=(M,H)=>Qc.getStyle(H??e.getBody(),M,!0);if(U(t)){const M=e.formatter.get(t);if(!M)return"";t=M[0]}if("preview"in t){const M=t.preview;if(M===!1)return"";r=M||r}let f=t.block||t.inline||"span",b;const v=vU(t.selector);v.length>0?(v[0].name||(v[0].name=f),f=t.selector,b=F6(v,e)):b=F6([f],e);const S=Qc.select(f,b)[0]||b.firstChild;KT(t.styles,(M,H)=>{const J=c(M);J&&Qc.setStyle(S,H,J)}),KT(t.attributes,(M,H)=>{const J=c(M);J&&Qc.setAttrib(S,H,J)}),KT(t.classes,M=>{const H=c(M);Qc.hasClass(S,H)||Qc.addClass(S,H)}),e.dispatch("PreviewFormats"),Qc.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const O=u("fontSize"),R=/px$/.test(O)?parseInt(O,10):0;return KT(r.split(" "),M=>{let H=u(M,S);if(!(M==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(H)&&(H=u(M),xi(H).toLowerCase()==="#ffffff"))&&!(M==="color"&&xi(H).toLowerCase()==="#000000")){if(M==="font-size"&&/em|%$/.test(H)){if(R===0)return;H=parseFloat(H)/(/%$/.test(H)?100:1)*R+"px"}M==="border"&&H&&(o+="padding:0 2px;"),o+=M+":"+H+";"}}),e.dispatch("AfterPreviewFormats"),Qc.remove(b),o},CU=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},L6=e=>{const t=pU(e),o=Wt({});return CU(e),cP(e),Bm(e)||RT(o,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,c,u)=>{ki(e,r,c,u)},remove:(r,c,u,f)=>{Dx(e,r,c,u,f)},toggle:(r,c,u)=>{Ai(e,r,c,u)},match:(r,c,u,f)=>l6(e,r,c,u,f),closest:r=>$m(e,r),matchAll:(r,c)=>Ox(e,r,c),matchNode:(r,c,u,f)=>RV(e,r,c,u,f),canApply:r=>NV(e,r),formatChanged:(r,c,u,f)=>MV(e,o,r,c,u,f),getCssText:de(yU,e)}},H6=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},xU=(e,t,o)=>{const r=Wt(!1),c=v=>{Sp(t,!1,o),t.add({},v)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",v=>{const S=v.command;H6(S)||(FT(t,o),t.beforeChange())}),e.on("ExecCommand",v=>{const S=v.command;H6(S)||c(v)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;const O=fo.os.isMacOS()&&v.key==="Meta";(S>=33&&S<=36||S>=37&&S<=40||S===45||v.ctrlKey||O)&&(c(),e.nodeChanged()),(S===46||S===8)&&e.nodeChanged(),r.get()&&t.typing&&!Qv(e.readonly,Tx(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;if(S>=33&&S<=36||S>=37&&S<=40||S===45){t.typing&&c(v);return}const O=v.ctrlKey&&!v.altKey||v.metaKey;if((S<16||S>20)&&S!==224&&S!==91&&!t.typing&&!O){t.beforeChange(),Sp(t,!0,o),t.add({},v),r.set(!0);return}(fo.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&t.beforeChange()}),e.on("mousedown",v=>{t.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},SU=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},wU=e=>{const t=Pc(),o=Wt(0),r=Wt(0),c={data:[],typing:!1,beforeChange:()=>{Wd(e,o,t)},add:(u,f)=>a6(e,c,r,o,t,u,f),dispatchChange:()=>{e.setDirty(!0);const u=Tx(e);u.bookmark=Qh(e.selection),e.dispatch("change",{level:u,lastLevel:qr(c.data,r.get()).getOrUndefined()})},undo:()=>wO(e,c,o,r),redo:()=>EO(e,r,c.data),clear:()=>{LT(e,c,r)},reset:()=>{OV(e,c)},hasUndo:()=>c6(e,c,r),hasRedo:()=>_x(e,c,r),transact:u=>DV(e,c,o,u),ignore:u=>{HT(e,o,u)},extra:(u,f)=>{TO(e,c,r,u,f)}};return Bm(e)||xU(e,c,o),SU(e),c},EU=[9,27,Et.HOME,Et.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Et.DOWN,Et.UP,Et.LEFT,Et.RIGHT].concat(fo.browser.isFirefox()?[224]:[]),z6="data-mce-placeholder",V6=e=>e.type==="keydown"||e.type==="keyup",U6=e=>{const t=e.keyCode;return t===Et.BACKSPACE||t===Et.DELETE},TU=e=>{if(V6(e)){const t=e.keyCode;return!U6(e)&&(Et.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Lt(EU,t))}else return!1},kU=e=>V6(e)&&!(U6(e)||e.type==="keyup"&&e.keyCode===229),kp=(e,t,o)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const r=t.firstElementChild;return r?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},AU=e=>{const t=e.dom,o=_r(e),r=hC(e)??"",c=(u,f)=>{if(TU(u))return;const b=e.getBody(),v=kU(u)?!1:kp(t,b,o);(t.getAttrib(b,z6)!==""!==v||f)&&(t.setAttrib(b,z6,v?r:null),aC(e,v),e.on(v?"keydown":"keyup",c),e.off(v?"keyup":"keydown",c))};fs(r)&&e.on("init",u=>{c(u,!0),e.on("change SetContent ExecCommand",c),e.on("paste",f=>Id.setEditorTimeout(e,()=>c(f)))})},_U=e=>t=>X(t)&&t.nodeName.toLowerCase()===e,ry=e=>t=>X(t)&&e.test(t.nodeName),Fm=e=>X(e)&&e.nodeType===3,YT=e=>X(e)&&e.nodeType===1,Ju=ry(/^(OL|UL|DL)$/),OU=ry(/^(OL|UL)$/),XT=ry(/^(LI|DT|DD)$/),DU=ry(/^(DT|DD)$/),Ob=_U("br"),RU=e=>e.parentNode?.firstChild===e,sD=(e,t)=>X(t)&&t.nodeName in e.schema.getTextBlockElements(),rD=(e,t)=>X(e)&&e.nodeName in t,NU=(e,t)=>X(t)&&t.nodeName in e.schema.getVoidElements(),MU=(e,t)=>Ob(t)?e.isBlock(t.nextSibling)&&!Ob(t.previousSibling):!1,Db=(e,t,o)=>{const r=e.isEmpty(t);return o&&e.select("span[data-mce-type=bookmark]",t).length>0?!1:r},j6=(e,t)=>e.isChildOf(t,e.getRoot()),W6=lo.DOM,PU=(e,t)=>{const o=t.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===t){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(t),Db(e,o)&&W6.remove(o)):W6.setStyle(o,"listStyleType","none")}if(Ju(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(t)}},aD=(e,t)=>{const o=Je.grep(e.select("ol,ul",t));Je.each(o,r=>{PU(e,r)})},Z6=(e,t)=>{if(Fm(e))return{container:e,offset:t};const o=_m.getNode(e,t);return Fm(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&Fm(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&Fm(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},cD=e=>{const t=e.cloneRange(),o=Z6(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=Z6(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},G6=["OL","UL","DL"],q6=G6.join(","),zx=(e,t)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,q6,Vx(e,o))},K6=(e,t)=>X(e)&&t.length===1&&t[0]===e,BU=e=>ze(e.querySelectorAll(q6),Ju),$U=e=>{const t=zx(e),o=e.selection.getSelectedBlocks();return K6(t,o)?BU(t):ze(o,r=>Ju(r)&&t!==r)},IU=(e,t)=>{const o=Je.map(t,r=>{const c=e.dom.getParent(r,"li,dd,dt",Vx(e,r));return c||r});return Ya(o)},lD=e=>{const t=e.selection.getSelectedBlocks();return ze(IU(e,t),XT)},FU=e=>ze(lD(e),DU),iD=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},LU=(e,t)=>!Ju(t)&&!XT(t)&&po(G6,o=>e.isValidChild(t.nodeName,o)),Vx=(e,t)=>{const o=e.dom.getParents(t,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==_r(e);return Oo(o,u=>r(u)&&LU(e.schema,u)).getOr(e.getBody())},Y6=e=>tc(e).exists(t=>XT(t.dom)&&Fr(t).exists(o=>!Ju(o.dom))&&sr(t).exists(o=>!Ju(o.dom))),X6=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",Vx(e,t));return mr(o)},HU=e=>{const t=X6(e,e.selection.getStart()),o=ze(e.selection.getSelectedBlocks(),OU);return t.toArray().concat(o)},zU=e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",Vx(e,t))},VU=e=>{const t=HU(e),o=zU(e);return Oo(o,r=>Y6(te.fromDom(r))).fold(()=>UU(e,t),r=>[r])},UU=(e,t)=>{const o=en(t,r=>X6(e,r).getOr(r));return Ya(o)},QT=e=>/\btox\-/.test(e.className),Q6=(e,t)=>t!==null&&!e.dom.isEditable(t),jU=e=>{const t=zx(e);return Q6(e,t)||!e.selection.isEditable()},uD=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return Q6(e,o)||!e.selection.isEditable()},Ap=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),dD=(e,t,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=_r(e),b=ru(e);let v,S,O=!1;for(S=r.create(f,{...b,...o.style?{style:o.style}:{}}),rD(t.firstChild,c)||u.appendChild(S);v=t.firstChild;){const R=v.nodeName;!O&&(R!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(O=!0),rD(v,c)?(u.appendChild(v),S=null):(S||(S=r.create(f,b),u.appendChild(S)),S.appendChild(v))}return!O&&S&&S.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},ay=e=>Xm(e,"OL,UL"),tQ=e=>Xm(e,"LI"),mD=e=>Fr(e).exists(ay),WU=e=>sr(e).exists(ay),J6=(e,t)=>_C(e).map(o=>o>=t).getOr(!0),Rb=e=>"listAttributes"in e,e$=e=>"isComment"in e,ZU=e=>"isFragment"in e,t$=e=>e.depth>0,GU=e=>e.isSelected,qU=e=>{const t=Ds(e),o=WU(e)?t.slice(0,-1):t;return en(o,Wi)},fD=(e,t,o)=>tc(e).filter(Fs).map(r=>({depth:t,dirty:!1,isSelected:o,content:qU(e),itemAttributes:Kn(e),listAttributes:Kn(r),listType:Hn(r),isInPreviousLi:!1})),JT=(e,t)=>{bo(e.item,t.list)},KU=e=>{for(let t=1;t<e.length;t++)JT(e[t-1],e[t])},n$=(e,t)=>{Qs(mr(e),Ws(t),JT)},YU=(e,t)=>{const o={list:te.fromTag(t,e),item:te.fromTag("li",e)};return bo(o.list,o.item),o},XU=(e,t,o)=>{const r=[];for(let c=0;c<o;c++)r.push(YU(e,Rb(t)?t.listType:t.parentListType));return r},QU=(e,t)=>{for(let o=0;o<e.length-1;o++)xa(e[o].item,"list-style-type","none");mr(e).each(o=>{Rb(t)&&(ta(o.list,t.listAttributes),ta(o.item,t.itemAttributes)),il(o.item,t.content)})},JU=(e,t)=>{Hn(e.list)!==t.listType&&(e.list=Au(e.list,t.listType)),ta(e.list,t.listAttributes)},ej=(e,t,o)=>{const r=te.fromTag("li",e);return ta(r,t),il(r,o),r},tj=(e,t)=>{bo(e.list,t),e.item=t},o$=(e,t,o)=>{const r=t.slice(0,o.depth);return mr(r).each(c=>{if(Rb(o)){const u=ej(e,o.itemAttributes,o.content);tj(c,u),JU(c,o)}else if(ZU(o))il(c.item,o.content);else{const u=te.fromHtml(`<!--${o.content}-->`);bo(c.list,u)}}),r},nj=(e,t,o)=>{const r=XU(e,o,o.depth-t.length);return KU(r),QU(r,o),n$(t,r),t.concat(r)},oj=(e,t)=>{let o=P.none();const r=Fo(t,(c,u,f)=>e$(u)?f===0?(o=P.some(u),c):o$(e,c,u):u.depth>c.length?nj(e,c,u):o$(e,c,u),[]);return o.each(c=>{const u=te.fromHtml(`<!--${c.content}-->`);Ws(r).each(f=>{ji(f.list,u)})}),Ws(r).map(c=>c.list)},sj=(e,t,o)=>{switch(t){case"Indent":if(J6(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},gD=(e,t)=>{Rb(e)&&Rb(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},rj=e=>{e.listAttributes=Pi(e.listAttributes,(t,o)=>o!=="start")},aj=(e,t)=>{const o=e[t].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return el(ms(e.slice(0,t)),r,c).orThunk(()=>el(e.slice(t+1),r,c))},s$=e=>(xe(e,(t,o)=>{aj(e,o).fold(()=>{t.dirty&&Rb(t)&&rj(t)},r=>gD(t,r))}),e),r$=(e,t,o,r)=>{if(li(r))return[{depth:e+1,content:r.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each(f=>{Qn(f.start,r)&&o.set(!0)});const c=fD(r,e,o.get());t.each(f=>{Qn(f.end,r)&&o.set(!1)});const u=sr(r).filter(ay).map(f=>Ux(e,t,o,f)).getOr([]);return c.toArray().concat(u)},cj=(e,t,o,r)=>Fr(r).filter(ay).fold(()=>r$(e,t,o,r),c=>{const u=Fo(Ds(r),(f,b,v)=>{if(v===0)return f;if(tQ(b))return f.concat(r$(e,t,o,b));{const S={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:Hn(c)};return f.concat(S)}},[]);return Ux(e,t,o,c).concat(u)}),Ux=(e,t,o,r)=>xo(Ds(r),c=>{const u=ay(c)?Ux:cj,f=e+1;return u(f,t,o,c)}),Nb=(e,t)=>{const o=Wt(!1),r=0;return en(e,c=>({sourceList:c,entries:Ux(r,t,o,c)}))},a$=(e,t)=>{const o=s$(t);return en(o,r=>{const c=e$(r)?yd([te.fromHtml(`<!--${r.content}-->`)]):yd(r.content),u=Rb(r)?r.itemAttributes:{};return te.fromDom(dD(e,c.dom,u))})},lj=(e,t)=>{const o=s$(t);return oj(e.contentDocument,o).toArray()},ij=(e,t)=>xo(no(t,t$),o=>Ws(o).exists(t$)?lj(e,o):a$(e,o)),uj=(e,t,o)=>{xe(ze(t,GU),r=>sj(e,o,r))},dj=e=>{const t=en(lD(e),te.fromDom);return Qs(Oo(t,bt(mD)),Oo(ms(t),bt(mD)),(o,r)=>({start:o,end:r}))},cy=(e,t,o)=>{const r=Nb(t,dj(e));xe(r,c=>{uj(e,c.entries,o);const u=ij(e,c.entries);xe(u,f=>{Ap(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),n0(c.sourceList,u),Ko(c.sourceList)})},mj=e=>_C(e).forall(t=>{const o=e.selection.getSelectedBlocks();return po(o,r=>ua(te.fromDom(r),"li").forall(c=>me(c,"ol,ul").length<=t))}),Hf=lo.DOM,hD=(e,t,o)=>{const r=S=>{const O=S.parentNode;O&&Je.each(c,R=>{O.insertBefore(R,o.parentNode)}),Hf.remove(S)},c=Hf.select('span[data-mce-type="bookmark"]',t),u=dD(e,o),f=Hf.createRng();f.setStartAfter(o),f.setEndAfter(t);const b=f.extractContents();for(let S=b.firstChild;S;S=S.firstChild)if(S.nodeName==="LI"&&e.dom.isEmpty(S)){Hf.remove(S);break}e.dom.isEmpty(b)||Hf.insertAfter(b,t),Hf.insertAfter(u,t);const v=o.parentElement;v&&Db(e.dom,v)&&r(v),Hf.remove(o),Db(e.dom,t)&&Hf.remove(t)},fj=gr("dd"),pD=gr("dt"),e4=(e,t)=>{fj(t)?Au(t,"dt"):pD(t)&&Lc(t).each(o=>hD(e,o.dom,t.dom))},gj=e=>{pD(e)&&Au(e,"dd")},hj=(e,t,o)=>{t==="Indent"?xe(o,gj):xe(o,r=>e4(e,r))},pj=(e,t)=>{const o=bd(VU(e)),r=bd(FU(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();cy(e,o,t),hj(e,t,r),e.selection.moveToBookmark(u),e.selection.setRng(cD(e.selection.getRng())),e.nodeChanged(),c=!0}return c},bD=(e,t)=>!jU(e)&&pj(e,t),c$=e=>bD(e,"Indent"),jx=e=>bD(e,"Outdent"),t4=e=>bD(e,"Flatten"),ly=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},bj=(e,t,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},l$=(e,t)=>{Je.each(t,(o,r)=>{e.setAttribute(r,o)})},vj=(e,t,o)=>{l$(t,o["list-attributes"]),Je.each(e.select("li",t),r=>{l$(r,o["list-item-attributes"])})},iy=(e,t,o)=>{bj(e,t,o),vj(e,t,o)},yj=(e,t,o)=>{Je.each(o,r=>e.setStyle(t,r,""))},n4=(e,t)=>X(t)&&!rD(t,e.schema.getBlockElements()),vD=(e,t,o,r)=>{let c=t[o?"startContainer":"endContainer"];const u=t[o?"startOffset":"endOffset"];YT(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&Ob(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,S)=>{const O=new er(v,f(v)),R=S?"next":"prev";let M;for(;M=O[R]();)if(!(NU(e,M)||Qa(M.textContent)||M.textContent?.length===0))return P.some(M);return P.none()};if(o&&Fm(c))if(Qa(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&n4(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(n4(e,c.previousSibling)||Fm(c.previousSibling));)c=c.previousSibling;if(!o&&Fm(c))if(Qa(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&n4(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(n4(e,c.nextSibling)||Fm(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(sD(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},Cj=(e,t,o)=>{const r=[],c=e.dom,u=vD(e,t,!0,o),f=vD(e,t,!1,o);let b;const v=[];for(let S=u;S&&(v.push(S),S!==f);S=S.nextSibling);return Je.each(v,S=>{if(sD(e,S)){r.push(S),b=null;return}if(c.isBlock(S)||Ob(S)){Ob(S)&&c.remove(S),b=null;return}const O=S.nextSibling;if($v.isBookmarkNode(S)&&(Ju(O)||sD(e,O)||!O&&S.parentNode===o)){b=null;return}b||(b=c.create("p"),S.parentNode?.insertBefore(b,S),r.push(b)),b.appendChild(S)}),r},xj=(e,t,o)=>{const r=e.getStyle(t,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},Sj=(e,t)=>{const o=e.selection.getStart(!0),r=vD(e,t,!0,e.getBody());return Vn(te.fromDom(r),te.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:o},yD=(e,t,o)=>{const r=e.selection.getRng();let c="LI";const u=Vx(e,Sj(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;t=t.toUpperCase(),t==="DL"&&(c="DT");const b=If(r),v=ze(Cj(e,r,u),e.dom.isEditable);Je.each(v,S=>{let O;const R=S.previousSibling,M=S.parentNode;XT(M)||(R&&Ju(R)&&R.nodeName===t&&xj(f,R,o)?(O=R,S=f.rename(S,c),R.appendChild(S)):(O=f.create(t),M.insertBefore(O,S),O.appendChild(S),S=f.rename(S,c)),yj(f,S,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),iy(f,O,o),CD(e.dom,O))}),e.selection.setRng(Gu(b))},wj=(e,t)=>Ju(e)&&e.nodeName===t?.nodeName,i$=(e,t,o)=>{const r=e.getStyle(t,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},Ej=(e,t)=>e.className===t.className,u$=(e,t,o)=>wj(t,o)&&i$(e,t,o)&&Ej(t,o),CD=(e,t)=>{let o,r=t.nextSibling;if(u$(e,t,r)){const c=r;for(;o=c.firstChild;)t.appendChild(o);e.remove(c)}if(r=t.previousSibling,u$(e,t,r)){const c=r;for(;o=c.lastChild;)t.insertBefore(o,t.firstChild);e.remove(c)}},Tj=(e,t,o,r)=>{if(t.nodeName!==o){const c=e.dom.rename(t,o);iy(e.dom,c,r),Ap(e,ly(o),c)}else iy(e.dom,t,r),Ap(e,ly(o),t)},kj=(e,t,o,r)=>{if(t.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&t.removeAttribute("class"))}),t.nodeName!==o){const c=e.dom.rename(t,o);iy(e.dom,c,r),Ap(e,ly(o),c)}else iy(e.dom,t,r),Ap(e,ly(o),t)},xD=(e,t,o,r,c)=>{const u=Ju(t);if(u&&t.nodeName===r&&!d$(c)&&!QT(t))t4(e);else{yD(e,r,c);const f=If(e.selection.getRng()),b=u?[t,...o]:o,v=u&&QT(t)?kj:Tj;Je.each(b,S=>{v(e,S,r,c)}),e.selection.setRng(Gu(f))}},d$=e=>"list-style-type"in e,Aj=(e,t,o,r)=>{if(t!==e.getBody())if(t)if(t.nodeName===o&&!d$(r)&&!QT(t))t4(e);else{const c=If(e.selection.getRng());QT(t)&&t.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&t.removeAttribute("class"))}),iy(e.dom,t,r);const u=e.dom.rename(t,o);CD(e.dom,u),e.selection.setRng(Gu(c)),yD(e,o,r),Ap(e,ly(o),u)}else yD(e,o,r),Ap(e,ly(o),t)},SD=(e,t,o)=>{const r=zx(e);if(uD(e,r))return;const c=$U(e),u=Ye(o)?o:{};c.length>0?xD(e,r,c,t,u):Aj(e,r,t,u)},m$=(e,t,o,r)=>{let c=t.startContainer;const u=t.startOffset;if(Fm(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();YT(c)&&(c=_m.getNode(c,u));const b=new er(c,r);o&&MU(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||Fm(c)&&c.data.length>0)return c;return null},f$=(e,t)=>{const o=t.childNodes;return o.length===1&&!Ju(o[0])&&e.isBlock(o[0])},_j=e=>P.from(e).map(te.fromDom).filter(ii).exists(t=>Hl(t)&&!Lt(["details"],Hn(t))),Oj=(e,t)=>{f$(e,t)&&_j(t.firstChild)&&e.remove(t.firstChild,!0)},g$=(e,t,o)=>{let r;const c=f$(e,o)?o.firstChild:o;if(Oj(e,t),!Db(e,t,!0))for(;r=t.firstChild;)c.appendChild(r)},wD=(e,t,o)=>{let r;const c=t.parentNode;if(!j6(e,t)||!j6(e,o))return;Ju(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&Ob(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&Ob(u)&&t.hasChildNodes()&&e.remove(u),Db(e,o,!0)&&Fl(te.fromDom(o)),g$(e,t,o),r&&o.appendChild(r);const b=ec(te.fromDom(o),te.fromDom(t))?e.getParents(t,Ju,o):[];e.remove(t),xe(b,v=>{Db(e,v)&&v!==e.getRoot()&&e.remove(v)})},Dj=(e,t,o)=>{Fl(te.fromDom(o)),wD(e.dom,t,o),e.selection.setCursorLocation(o,0)},Rj=(e,t,o,r)=>{const c=e.dom;if(c.isEmpty(r))Dj(e,o,r);else{const u=If(t);wD(c,o,r),e.selection.setRng(Gu(u))}},Nj=(e,t,o,r)=>{const c=If(t);wD(e.dom,o,r);const u=Gu(c);e.selection.setRng(u)},Mj=(e,t)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=iD(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&Db(o,b))return!0;const v=cD(r.getRng()),S=o.getParent(m$(e,v,t,u),"LI",u),O=S&&(t?o.isChildOf(f,S):o.isChildOf(S,f));if(S&&S!==f&&!O)return e.undoManager.transact(()=>{t?Rj(e,v,S,f):RU(f)?jx(e):Nj(e,v,f,S)}),!0;if(O&&!t&&S!==f){const R=v.commonAncestorContainer.parentElement;return!R||o.isChildOf(S,R)?!1:(e.undoManager.transact(()=>{const M=If(v);g$(o,R,S),R.remove();const H=Gu(M);e.selection.setRng(H)}),!0)}else if(!S&&!t&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{t4(e)}),!0}return!1},Pj=(e,t,o)=>{const r=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},Bj=(e,t)=>{const o=e.dom,r=e.selection.getStart(),c=iD(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=cD(e.selection.getRng()),b=m$(e,f,t,c),v=o.getParent(b,"LI",c);if(b&&v){const S=H=>Lt(["td","th","caption"],Hn(H)),O=H=>H.dom===c,R=jo(te.fromDom(v),S,O),M=jo(te.fromDom(f.startContainer),S,O);return ld(R,M,Qn)?(e.undoManager.transact(()=>{const H=v.parentNode;Pj(o,u,c),CD(o,H),e.selection.select(b,!0),e.selection.collapse(t)}),!0):!1}}return!1},$j=(e,t)=>Mj(e,t)||Bj(e,t),ED=e=>{const t=e.selection.getStart(),o=iD(e,t),r=e.dom.getParent(t,"LI,DT,DD",o);return X(r)||lD(e).length>0},Ij=e=>ED(e)?(e.undoManager.transact(()=>{let t=!0;const o=()=>t=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),t&&e.dispatch("input"),aD(e.dom,e.getBody())}),!0):!1,TD=(e,t)=>{const o=e.selection;return!uD(e,o.getNode())&&(o.isCollapsed()?$j(e,t):Ij(e))},Fj=(e,t)=>({block:e,position:t}),Lj=(e,t)=>({from:e,to:t}),o4=(e,t)=>{const o=te.fromDom(e),r=te.fromDom(t.container());return QA(o,r).map(c=>Fj(c,t))},Hj=e=>!(ec(e.to.block,e.from.block)||ec(e.from.block,e.to.block)),zj=e=>!Qn(e.from.block,e.to.block),kD=(e,t)=>jo(t,c=>kg(c)||ml(c.dom),c=>Qn(c,e)).filter(Fs).getOr(e),Vj=(e,t)=>{const o=te.fromDom(e);return Qn(kD(o,t.from.block),kD(o,t.to.block))},Uj=e=>Ts(e.from.block.dom)===!1&&Ts(e.to.block.dom)===!1,jj=e=>{const t=o=>oc(o)||Ze(o.dom)||Tc(o);return t(e.from.block)&&t(e.to.block)},Wj=(e,t,o,r)=>Vs(r.position.getNode())&&!tr(e,r.block)?m(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Gl(o,t,c).bind(u=>o4(t,u)):P.some(r)).getOr(r):r,AD=(e,t,o,r)=>{const c=o4(t,Re.fromRangeStart(r)),u=c.bind(f=>Gl(o,t,f.position).bind(b=>o4(t,b).map(v=>Wj(e,t,o,v))));return Qs(c,u,Lj).filter(f=>zj(f)&&Vj(t,f)&&Uj(f)&&jj(f)&&Hj(f))},h$=(e,t,o,r)=>r.collapsed?AD(e,t,o,r):P.none(),nQ=(e,t)=>{const o=Ds(e);return Jl(o,r=>t.isBlock(Hn(r))).fold(st(o),r=>o.slice(0,r))},uy=(e,t)=>{const o=nQ(e,t);return xe(o,Ko),o},Zj=(e,t,o)=>{const r=Fd(o,t);return Oo(r.reverse(),c=>tr(e,c)).each(Ko)},oQ=(e,t)=>ze(Qr(t),o=>!tr(e,o)).length===0,sQ=(e,t,o,r,c)=>{if(tr(r,o))return vf(o),E(o.dom);oQ(r,c)&&tr(r,t)&&la(c,te.fromTag("br"));const u=y(o.dom,Re.before(c.dom));return xe(uy(t,r),f=>{la(c,f)}),Zj(r,e,t),u},rQ=(e,t)=>e.isInline(Hn(t)),Lm=(e,t,o,r)=>{if(tr(r,o)){if(tr(r,t)){const f=qn((b=>{const v=(S,O)=>Fr(S).fold(()=>O,R=>rQ(r,R)?v(R,O.concat(br(R))):O);return v(b,[])})(o),(b,v)=>(Hc(b,v),v),bf());Fl(t),bo(t,f)}return Ko(o),E(t.dom)}const c=D(o.dom);return xe(uy(t,r),u=>{bo(o,u)}),Zj(r,e,t),c},Wx=(e,t)=>{const o=Fd(t,e);return P.from(o[o.length-1])},Hm=(e,t)=>ec(t,e)?Wx(t,e):P.none(),_p=(e,t)=>{m(e,t.dom).bind(o=>P.from(o.getNode())).map(te.fromDom).filter(eu).each(Ko)},s4=(e,t,o,r)=>(_p(!0,t),_p(!1,o),Hm(t,o).fold(de(Lm,e,t,o,r),de(sQ,e,t,o,r))),_D=(e,t,o,r,c)=>t?s4(e,r,o,c):s4(e,o,r,c),Mb=(e,t)=>{const o=te.fromDom(e.getBody());return h$(e.schema,o.dom,t,e.selection.getRng()).map(c=>()=>{_D(o,t,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},Gj=(e,t,o)=>{const r=t.getRng();return Qs(QA(e,te.fromDom(r.startContainer)),QA(e,te.fromDom(r.endContainer)),(c,u)=>Qn(c,u)?P.none():P.some(()=>{r.deleteContents(),_D(e,!0,c,u,o).each(f=>{t.setRng(f.toRange())})})).getOr(P.none())},OD=(e,t)=>{const o=te.fromDom(t),r=de(Qn,e);return qi(o,kg,r).isSome()},aQ=(e,t)=>OD(e,t.startContainer)||OD(e,t.endContainer),qj=(e,t)=>{const o=y(e.dom,Re.fromRangeStart(t)).isNone(),r=p(e.dom,Re.fromRangeEnd(t)).isNone();return!aQ(e,t)&&o&&r},Zx=e=>P.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),p$=e=>{const t=te.fromDom(e.getBody()),o=e.selection.getRng();return qj(t,o)?Zx(e):Gj(t,e.selection,e.schema)},Cr=(e,t)=>e.selection.isCollapsed()?P.none():p$(e),nh=(e,t,o,r,c)=>P.from(t._selectionOverrides.showCaret(e,o,r,c)),Kj=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},zf=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?P.none():P.some(Kj(t)),Pb=(e,t,o)=>{const r=kv(1,e.getBody(),t),c=Re.fromRangeStart(r),u=c.getNode();if(Zl(u))return nh(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Zl(f))return nh(1,e,f,!1,!1);const b=Om(e.dom.getRoot(),c.getNode());return Zl(b)?nh(1,e,b,!1,o):P.none()},oh=(e,t,o)=>t.collapsed?Pb(e,t,o).getOr(t):t,Yj=e=>Zg(e)||ex(e),Xj=e=>Bf(e)||tx(e),DD=(e,t)=>{tt(t)&&t.data.length===0&&e.remove(t)},r4=(e,t,o,r,c,u)=>{nh(r,e,u.getNode(!c),c,!0).each(f=>{if(t.collapsed){const b=t.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else t.deleteContents();e.selection.setRng(f)}),DD(e.dom,o)},b$=(e,t)=>{const o=e.selection.getRng();if(!tt(o.commonAncestorContainer))return P.none();const r=t?1:-1,c=ju(e.getBody()),u=de(_v,t?c.next:c.prev),f=t?Yj:Xj,b=Rf(r,e.getBody(),o),v=u(b),S=v&&Zu(t,v);if(!S||!Uu(b,S))return P.none();if(f(S))return P.some(()=>r4(e,o,b.getNode(),r,t,S));const O=u(S);return O&&f(O)&&Uu(S,O)?P.some(()=>r4(e,o,b.getNode(),r,t,O)):P.none()},a4=(e,t)=>b$(e,t),RD=(e,t)=>{const o=e.getBody();return t?E(o).filter(Zg):D(o).filter(Bf)},ND=e=>{const t=e.selection.getRng();return!t.collapsed&&(RD(e,!0).exists(o=>o.isEqual(Re.fromRangeStart(t)))||RD(e,!1).exists(o=>o.isEqual(Re.fromRangeEnd(t))))},MD=e=>X(e)&&(kg(te.fromDom(e))||Tc(te.fromDom(e))),fu=tl.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Qj=(e,t)=>{const o=t.getNode(!e),r=e?"after":"before";return pt(o)&&o.getAttribute("data-mce-caret")===r},Jj=(e,t,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!Nd(o,r,e);return Av(!t,o).fold(()=>Av(t,r).fold(ye,u),u)},v$=(e,t,o,r,c)=>{const u=c.getNode(!o);return QA(te.fromDom(t),te.fromDom(r.getNode())).map(f=>tr(e,f)?fu.remove(f.dom):fu.moveToElement(u)).orThunk(()=>P.some(fu.moveToElement(u)))},y$=(e,t,o,r)=>Gl(t,e,o).bind(c=>MD(c.getNode())||Jj(e,t,o,c,r)?P.none():t&&Ts(c.getNode())||!t&&Ts(c.getNode(!0))?v$(r,e,t,o,c):t&&Bf(o)||!t&&Zg(o)?P.some(fu.moveToPosition(c)):P.none()),PD=(e,t)=>jt(t)?P.none():e&&Ts(t.nextSibling)?P.some(fu.moveToElement(t.nextSibling)):!e&&Ts(t.previousSibling)?P.some(fu.moveToElement(t.previousSibling)):P.none(),C$=(e,t,o)=>o.fold(r=>P.some(fu.remove(r)),r=>P.some(fu.moveToElement(r)),r=>Nd(t,r,e)?P.none():P.some(fu.moveToPosition(r))),eW=(e,t,o,r)=>Qj(t,o)?PD(t,o.getNode(!t)).orThunk(()=>y$(e,t,o,r)):y$(e,t,o,r).bind(c=>C$(e,o,c)),tW=(e,t,o,r)=>{const c=kv(t?1:-1,e,o),u=Re.fromRangeStart(c),f=te.fromDom(e);return!t&&Bf(u)?P.some(fu.remove(u.getNode(!0))):t&&Zg(u)?P.some(fu.remove(u.getNode())):!t&&Zg(u)&&JE(f,u,r)?vM(f,u,r).map(b=>fu.remove(b.getNode())):t&&Bf(u)&&ZA(f,u,r)?_H(f,u,r).map(b=>fu.remove(b.getNode())):eW(e,t,u,r)},dy=(e,t)=>o=>(e._selectionOverrides.hideFakeCaret(),$f(e,t,te.fromDom(o)),!0),x$=(e,t)=>o=>{const r=t?Re.before(o):Re.after(o);return e.selection.setRng(r.toRange()),!0},nW=e=>t=>(e.selection.setRng(t.toRange()),!0),BD=(e,t)=>P.from(Om(e.getBody(),t)),oW=(e,t)=>{const o=e.selection.getNode();return BD(e,o).filter(Ts).fold(()=>tW(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(dy(e,t),x$(e,t),nW(e))),()=>P.some(St))},S$=e=>{xe(Ne(e,".mce-offscreen-selection"),Ko)},sW=(e,t)=>{const o=e.selection.getNode();return Ts(o)&&!Oh(o)?BD(e,o.parentNode).filter(Ts).fold(()=>P.some(()=>{S$(te.fromDom(e.getBody())),$f(e,t,te.fromDom(e.selection.getNode())),IM(e)}),()=>P.some(St)):ND(e)?P.some(()=>{YH(e,e.selection.getRng(),te.fromDom(e.getBody()))}):P.none()},$D=e=>{const t=e.dom,o=e.selection,r=Om(e.getBody(),o.getNode());if(ml(r)&&t.isBlock(r)&&t.isEmpty(r)){const c=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(c),o.setRng(Re.before(c).toRange())}return!0},c4=(e,t)=>e.selection.isCollapsed()?oW(e,t):sW(e,t),l4=(e,t)=>{const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),c=o.getParent(e.selection.getEnd(),o.isBlock),u=e.getBody();if(r?.nodeName?.toLowerCase()==="div"&&r&&c&&r===u.firstChild&&c===u.lastChild&&!o.isEmpty(u)){const b=r.cloneNode(!1),v=()=>{if(t?qH(e):XA(e),u.firstChild!==r){const S=If(e.selection.getRng(),()=>document.createElement("span"));Array.from(u.childNodes).forEach(O=>b.appendChild(O)),u.appendChild(b),e.selection.setRng(Gu(S))}};return P.some(v)}return P.none()},w$=(e,t)=>{const o=Re.fromRangeStart(e.selection.getRng());return Gl(t,e.getBody(),o).filter(r=>t?HA(r):dM(r)).bind(r=>$C(t?0:-1,r)).map(r=>()=>e.selection.select(r))},i4=(e,t)=>e.selection.isCollapsed()?w$(e,t):P.none(),Bb=tt,E$=e=>Bb(e)&&e.data[0]===jr,T$=e=>Bb(e)&&e.data[e.data.length-1]===jr,k$=e=>(e.ownerDocument??document).createTextNode(jr),ID=e=>{if(Bb(e.previousSibling))return T$(e.previousSibling)||e.previousSibling.appendData(jr),e.previousSibling;if(Bb(e))return E$(e)||e.insertData(0,jr),e;{const t=k$(e);return e.parentNode?.insertBefore(t,e),t}},Gx=e=>{if(Bb(e.nextSibling))return E$(e.nextSibling)||e.nextSibling.insertData(0,jr),e.nextSibling;if(Bb(e))return T$(e)||e.appendData(jr),e;{const t=k$(e);return e.nextSibling?e.parentNode?.insertBefore(t,e.nextSibling):e.parentNode?.appendChild(t),t}},Op=(e,t)=>e?ID(t):Gx(t),FD=de(Op,!0),A$=de(Op,!1),LD=(e,t)=>tt(e.container())?Op(t,e.container()):Op(t,e.getNode()),qx=(e,t)=>{const o=t.get();return o&&e.container()===o&&Iu(o)},HD=(e,t)=>t.fold(o=>{Lg(e.get());const r=FD(o);return e.set(r),P.some(Re(r,r.length-1))},o=>E(o).map(r=>{if(qx(r,e)){const c=e.get();return Re(c,1)}else{Lg(e.get());const c=LD(r,!0);return e.set(c),Re(c,1)}}),o=>D(o).map(r=>{if(qx(r,e)){const c=e.get();return Re(c,c.length-1)}else{Lg(e.get());const c=LD(r,!1);return e.set(c),Re(c,c.length-1)}}),o=>{Lg(e.get());const r=A$(o);return e.set(r),P.some(Re(r,1))}),_$=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,t);if(r.isSome())return r}return P.none()},ga=tl.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),u4=(e,t)=>{const o=Of(t,e);return o||e},O$=(e,t,o)=>{const r=PM(o),c=u4(t,r.container());return pp(e,c,r).fold(()=>p(c,r).bind(de(pp,e,c)).map(u=>ga.before(u)),P.none)},Kx=(e,t)=>K(e,t)===null,zD=(e,t,o)=>pp(e,t,o).filter(de(Kx,t)),VD=(e,t,o)=>{const r=BM(o);return zD(e,t,r).bind(c=>y(c,r).isNone()?P.some(ga.start(c)):P.none())},D$=(e,t,o)=>{const r=PM(o);return zD(e,t,r).bind(c=>p(c,r).isNone()?P.some(ga.end(c)):P.none())},R$=(e,t,o)=>{const r=BM(o),c=u4(t,r.container());return pp(e,c,r).fold(()=>y(c,r).bind(de(pp,e,c)).map(u=>ga.after(u)),P.none)},N$=e=>!KA(UD(e)),zm=(e,t,o)=>_$([O$,VD,D$,R$],[e,t,o]).filter(N$),UD=e=>e.fold(Wo,Wo,Wo,Wo),M$=e=>e.fold(st("before"),st("start"),st("end"),st("after")),d4=e=>e.fold(ga.before,ga.before,ga.after,ga.after),jD=e=>e.fold(ga.start,ga.start,ga.end,ga.end),WD=(e,t)=>M$(e)===M$(t)&&UD(e)===UD(t),rW=(e,t,o,r,c,u)=>Qs(pp(t,o,r),pp(t,o,c),(f,b)=>f!==b&&ZH(o,f,b)?ga.after(e?f:b):u).getOr(u),P$=(e,t)=>e.fold(He,o=>!WD(o,t)),aW=(e,t,o,r,c)=>{const u=Zu(e,c);return Gl(e,o,u).map(de(Zu,e)).fold(()=>r.map(d4),v=>zm(t,o,v).map(de(rW,e,t,o,u,v)).filter(de(P$,r))).filter(N$)},cW=(e,t)=>e?t.fold(A(P.some,ga.start),P.none,A(P.some,ga.after),P.none):t.fold(P.none,A(P.some,ga.before),P.none,A(P.some,ga.end)),lW=(e,t,o,r)=>{const c=Zu(e,r),u=zm(t,o,c);return zm(t,o,c).bind(de(cW,e)).orThunk(()=>aW(e,t,o,u,r))},iW=e=>se(e.selection.getSel().modify),B$=(e,t,o)=>{const r=e?1:-1;return t.setRng(Re(o.container(),o.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},uW=(e,t)=>{const o=t.selection.getRng(),r=e?Re.fromRangeEnd(o):Re.fromRangeStart(o);return iW(t)?e&&pm(r)?B$(!0,t.selection,r):!e&&Ag(r)?B$(!1,t.selection,r):!1:!1};var Vf;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Vf||(Vf={}));const m4=(e,t)=>e===-1?ms(t):t,dW=(e,t,o)=>e===1?t.next(o):t.prev(o),mW=(e,t,o,r)=>Vs(r.getNode(t===1))?Vf.Br:Nd(o,r)===!1?Vf.Block:Vf.Wrap,$$=(e,t,o,r)=>{const c=ju(o);let u=r;const f=[];for(;u;){const b=dW(t,c,u);if(!b)break;if(Vs(b.getNode(!1)))return t===1?{positions:m4(t,f).concat([b]),breakType:Vf.Br,breakAt:P.some(b)}:{positions:m4(t,f),breakType:Vf.Br,breakAt:P.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=mW(o,t,u,b);return{positions:m4(t,f),breakType:v,breakAt:P.some(b)}}f.push(b),u=b}return{positions:m4(t,f),breakType:Vf.Eol,breakAt:P.none()}},ZD=(e,t,o,r)=>t(o,r).breakAt.map(c=>{const u=t(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),GD=(e,t)=>Fo(e,(o,r)=>o.fold(()=>P.some(r),c=>Qs(Ws(c.getClientRects()),Ws(r.getClientRects()),(u,f)=>{const b=Math.abs(t-u.left);return Math.abs(t-f.left)<=b?r:c}).or(o)),P.none()),$b=(e,t)=>Ws(t.getClientRects()).bind(o=>GD(e,o.left)),Da=de($$,Re.isAbove,-1),Yx=de($$,Re.isBelow,1),Xx=de(ZD,-1,Da),Dp=de(ZD,1,Yx),f4=(e,t)=>Da(e,t).breakAt.isNone(),xl=(e,t)=>Yx(e,t).breakAt.isNone(),Ib=e=>E(e).map(t=>[t].concat(Yx(e,t).positions)).getOr([]),I$=e=>D(e).map(t=>Da(e,t).positions.concat(t)).getOr([]),F$=(e,t)=>$b(Xx(e,t),t),qD=(e,t)=>$b(Dp(e,t),t),fW=Ts,KD=(e,t)=>Math.abs(e.left-t),g4=(e,t)=>Math.abs(e.right-t),YD=e=>Go(e,"node"),L$=(e,t)=>Fi(e,(o,r)=>{const c=Math.min(KD(o,t),g4(o,t)),u=Math.min(KD(r,t),g4(r,t));return u===c&&YD(r)&&fW(r.node)||u<c?r:o}),gW=e=>{const t=o=>en(o,r=>{const c=Cf(r);return c.node=e,c});if(pt(e))return t(e.getClientRects());if(tt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),t(o.getClientRects())}else return[]},XD=e=>xo(e,gW);var Sl;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Sl||(Sl={}));const QD=(e,t,o,r)=>{let c=r;for(;c=sb(c,e,z0,t);)if(o(c))return},H$=(e,t,o,r,c,u)=>{let f=0;const b=[],v=R=>{let M=XD([R]);e===Sl.Up&&(M=M.reverse());for(let H=0;H<M.length;H++){const J=M[H];if(!o(J,S)){if(b.length>0&&t(J,sl(b))&&f++,J.line=f,c(J))return!0;b.push(J)}}return!1},S=sl(u.getClientRects());if(!S)return b;const O=u.getNode();return O&&(v(O),QD(e,r,v,O)),b},h4=(e,t)=>t.line>e,JD=(e,t)=>t.line===e,z$=de(H$,Sl.Up,Og,xf),V$=de(H$,Sl.Down,xf,Og),eR=e=>sl(e.getClientRects()),hW=(e,t,o,r)=>{const c=ju(t);let u,f,b,v;const S=[];let O=0;e===Sl.Down?(u=c.next,f=xf,b=Og,v=Re.after(r)):(u=c.prev,f=Og,b=xf,v=Re.before(r));const R=eR(v);do{if(!v.isVisible())continue;const M=eR(v);if(b(M,R))continue;S.length>0&&f(M,sl(S))&&O++;const H=Cf(M);if(H.position=v,H.line=O,o(H))return S;S.push(H)}while(v=u(v));return S},U$=e=>t=>h4(e,t),tR=e=>t=>JD(e,t),Uf=(e,t)=>{e.selection.setRng(t),lu(e,e.selection.getRng())},nR=(e,t,o)=>P.some(oh(e,t,o)),oR=(e,t)=>{const o=e.getNode(t===-1);return X(o)&&Zr(o)?P.some(o):P.none()},j$=(e,t)=>{const o=e.dom.createRng();return o.selectNode(t),o},W$=(e,t,o,r,c,u)=>{const f=t===1,b=ju(e.getBody()),v=de(_v,f?b.next:b.prev),S=f?r:c;if(!o.collapsed){const J=Wr(o);if(u(J))if(Zr(J)){const W=Rf(t,e.getBody(),o);return P.from(v(W)).map(Q=>Q.toRange())}else return nh(t,e,J,t===-1,!1);else if(ND(e)){const W=o.cloneRange();return W.collapse(t===-1),P.from(W)}}const O=Rf(t,e.getBody(),o);if(S(O))return zf(e,O.getNode(!f));let R=v(O);const M=I0(o);if(R)R=Zu(f,R);else return M?P.some(o):P.none();if(S(R))return oR(R,t).fold(()=>nh(t,e,R?.getNode(!f),f,!1),J=>P.some(j$(e,J)));const H=v(R);return H&&S(H)&&Uu(R,H)?oR(R,t).fold(()=>nh(t,e,H.getNode(!f),f,!1),J=>P.some(j$(e,J))):M?nR(e,R.toRange(),!1):P.none()},Z$=(e,t,o,r,c,u)=>{const f=Rf(t,e.getBody(),o),b=sl(f.getClientRects()),v=t===Sl.Down,S=e.getBody();if(!b)return P.none();if(ND(e)){const Q=v?Re.fromRangeEnd(o):Re.fromRangeStart(o);return(v?qD:F$)(S,Q).orThunk(()=>P.from(Q)).map(be=>be.toRange())}const R=(v?V$:z$)(S,U$(1),f),M=ze(R,tR(1)),H=b.left,J=L$(M,H);if(J&&u(J.node)){const Q=Math.abs(H-J.left),ge=Math.abs(H-J.right);return nh(t,e,J.node,Q<ge,!1)}let W;if(r(f)?W=f.getNode():c(f)?W=f.getNode(!0):W=Wr(o),W){const Q=hW(t,S,U$(1),W);let ge=L$(ze(Q,tR(1)),H);if(ge||(ge=sl(ze(Q,tR(0))),ge))return nR(e,ge.position.toRange(),!1)}return M.length===0?p4(e,v).filter(v?c:r).map(Q=>oh(e,Q.toRange(),!1)):P.none()},p4=(e,t)=>{const o=e.selection.getRng(),r=t?Re.fromRangeEnd(o):Re.fromRangeStart(o),c=Ev(r.container(),e.getBody());if(t){const u=Yx(c,r);return mr(u.positions)}else{const u=Da(c,r);return Ws(u.positions)}},b4=(e,t,o)=>p4(e,t).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),my=(e,t)=>{const o=e.dom.createRng();o.setStart(t.container(),t.offset()),o.setEnd(t.container(),t.offset()),e.selection.setRng(o)},sR=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},v4=(e,t,o)=>HD(t,o).map(r=>(my(e,r),o)),G$=(e,t,o)=>{const r=Re.fromRangeStart(e);if(e.collapsed)return r;{const c=Re.fromRangeEnd(e);return o?y(t,c).getOr(c):p(t,r).getOr(r)}},q$=(e,t,o)=>{const r=e.getBody(),c=G$(e.selection.getRng(),r,o),u=de(mb,e);return lW(o,u,r,c).bind(b=>v4(e,t,b))},rR=(e,t,o)=>{const r=en(Ne(te.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=ze(r,e),u=ze(o,e);xe($s(c,u),de(sR,!1)),xe($s(u,c),de(sR,!0))},K$=(e,t)=>{const o=t.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Re.fromRangeStart(e.selection.getRng());Re.isTextPosition(r)&&!GH(r)&&(my(e,Q3(o,r)),t.set(null))}},Y$=(e,t,o,r)=>{if(t.selection.isCollapsed()){const c=ze(r,e);xe(c,u=>{const f=Re.fromRangeStart(t.selection.getRng());zm(e,t.getBody(),f).bind(b=>v4(t,o,b))})}},aR=(e,t,o)=>_f(e)?q$(e,t,o).isSome():!1,X$=(e,t,o)=>_f(t)?uW(e,t):!1,pW=e=>{const t=Wt(null),o=de(mb,e);return e.on("NodeChange",r=>{_f(e)&&(rR(o,e.dom,r.parents),K$(e,t),Y$(o,e,t,r.parents))}),t},y4=de(X$,!0),bW=de(X$,!1),Rp=(e,t,o)=>{if(_f(e)){const r=p4(e,t).getOrThunk(()=>{const c=e.selection.getRng();return t?Re.fromRangeEnd(c):Re.fromRangeStart(c)});return zm(de(mb,e),e.getBody(),r).exists(c=>{const u=d4(c);return HD(o,u).exists(f=>(my(e,f),!0))})}else return!1},vW=(e,t)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(t.container(),t.offset()),o},yW=e=>Qs(E(e),D(e),(t,o)=>{const r=Zu(!0,t),c=Zu(!1,o);return p(e,r).forall(u=>u.isEqual(c))}).getOr(!0),Q$=(e,t)=>o=>HD(t,o).map(r=>()=>my(e,r)),J$=(e,t,o,r)=>{const c=e.getBody(),u=de(mb,e);e.undoManager.ignore(()=>{e.selection.setRng(vW(o,r)),XA(e),zm(u,c,Re.fromRangeStart(e.selection.getRng())).map(jD).bind(Q$(e,t)).each(Fn)}),e.nodeChanged()},eI=(e,t)=>{const o=Of(t,e);return o||e},tI=(e,t,o,r)=>{const c=eI(e.getBody(),r.container()),u=de(mb,e),f=zm(u,c,r);return f.bind(v=>o?v.fold(st(P.some(jD(v))),P.none,st(P.some(d4(v))),P.none):v.fold(P.none,st(P.some(d4(v))),P.none,st(P.some(jD(v))))).map(Q$(e,t)).getOrThunk(()=>{const v=mp(o,c,r),S=v.bind(O=>zm(u,c,O));return Qs(f,S,()=>pp(u,c,r).bind(O=>yW(O)?P.some(()=>{$f(e,o,te.fromDom(O))}):P.none())).getOrThunk(()=>S.bind(()=>v.map(O=>()=>{o?J$(e,t,r,O):J$(e,t,O,r)})))})},cR=(e,t,o)=>{if(e.selection.isCollapsed()&&_f(e)){const r=Re.fromRangeStart(e.selection.getRng());return tI(e,t,o,r)}return P.none()},CW=e=>gd(e)>1,nI=(e,t)=>{const o=te.fromDom(e.getBody()),r=te.fromDom(e.selection.getStart()),c=Fd(r,o);return Jl(c,t).fold(st(c),u=>c.slice(0,u))},xW=e=>gd(e)===1,SW=e=>nI(e,t=>e.schema.isBlock(Hn(t))||CW(t)),oI=e=>nI(e,t=>e.schema.isBlock(Hn(t))),wW=(e,t)=>{const o=de(iP,e);return xo(t,r=>o(r)?[r.dom]:[])},lR=e=>{const t=oI(e);return wW(e,t)},EW=(e,t,o,r)=>{const c=wW(t,r);if(c.length===0)$f(t,e,o);else{const u=h_(o.dom,c);t.selection.setRng(u.toRange())}},TW=(e,t)=>{const o=ze(SW(e),xW);return mr(o).bind(r=>{const c=Re.fromRangeStart(e.selection.getRng());return FM(t,c,r.dom)&&!hA(r)?P.some(()=>EW(t,e,r,o)):P.none()})},kW=(e,t)=>{const o=t.parentElement;return Vs(t)&&!oe(o)&&e.dom.isEmpty(o)},AW=e=>hA(te.fromDom(e)),sI=(e,t)=>{const o=e.selection.getStart(),r=kW(e,o)||AW(o)?h_(o,t):xz(e.selection.getRng(),t);e.selection.setRng(r.toRange())},rI=(e,t)=>{const o=$s(t,lR(e));o.length>0&&sI(e,o)},iR=e=>tt(e.startContainer),_W=e=>e.startOffset===0&&iR(e),OW=(e,t)=>{const o=t.startContainer.parentElement;return!oe(o)&&iP(e,te.fromDom(o))},DW=e=>{const t=e.startContainer.parentNode,o=e.endContainer.parentNode;return!oe(t)&&!oe(o)&&t.isEqualNode(o)},RW=e=>{const t=e.endContainer;return e.endOffset===(tt(t)?t.length:t.childNodes.length)},NW=e=>DW(e)&&RW(e),MW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),PW=e=>NW(e)||MW(e),BW=e=>{const t=e.selection.getRng();return _W(t)&&OW(e,t)&&PW(t)},$W=e=>{if(BW(e)){const t=lR(e);return P.some(()=>{XA(e),rI(e,t)})}else return P.none()},uR=(e,t)=>e.selection.isCollapsed()?TW(e,t):$W(e),aI=(e,t)=>gt(e,o=>z(o.dom),o=>t.isBlock(Hn(o))),IW=e=>aI(te.fromDom(e.selection.getStart()),e.schema),FW=e=>{const t=e.selection.getRng();return t.collapsed&&(iR(t)||e.dom.isEmpty(t.startContainer))&&!IW(e)},Qx=e=>(FW(e)&&sI(e,[]),!0),fy=(e,t,o)=>X(o)?P.some(()=>{e._selectionOverrides.hideFakeCaret(),$f(e,t,te.fromDom(o))}):P.none(),LW=(e,t)=>{const o=t?ex:tx,c=Rf(t?1:-1,e.getBody(),e.selection.getRng());return o(c)?fy(e,t,c.getNode(!t)):P.from(Zu(t,c)).filter(u=>o(u)&&Uu(c,u)).bind(u=>fy(e,t,u.getNode(!t)))},HW=(e,t)=>{const o=e.selection.getNode();return yi(o)?fy(e,t,o):P.none()},C4=(e,t)=>e.selection.isCollapsed()?LW(e,t):HW(e,t),dR=e=>jo(e,t=>ml(t.dom)||Ts(t.dom)).exists(t=>ml(t.dom)),mR=e=>Jf(e??"").getOr(0),cI=(e,t)=>{const o=e||dw(t)?"margin":"padding",r=Hs(t,"direction")==="rtl"?"-right":"-left";return o+r},cQ=(e,t,o,r,c,u)=>{const f=cI(o,te.fromDom(u)),b=mR(e.getStyle(u,f));if(t==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},zW=(e,t)=>Ka(t,o=>{const r=cI(dv(e),o),c=ar(o,r).map(mR).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),lI=e=>{const t=iI(e);return!e.mode.isReadOnly()&&(t.length>1||zW(e,t))},VW=e=>!e.mode.isReadOnly()&&mj(e),gy=e=>Si(e)||Tc(e),UW=e=>tc(e).exists(gy),iI=e=>ze(bd(e.selection.getSelectedBlocks()),t=>!gy(t)&&!UW(t)&&dR(t)),uI=(e,t)=>{if(e.mode.isReadOnly())return;const{dom:o}=e,r=D3(e),c=/[a-z%]+$/i.exec(r)?.[0]??"px",u=mR(r),f=dv(e);xe(iI(e),b=>{cQ(o,t,f,u,c,b.dom)}),t==="indent"?c$(e):jx(e)},dI=e=>uI(e,"indent"),sh=e=>uI(e,"outdent"),wl=e=>{if(e.selection.isCollapsed()&&lI(e)){const t=e.dom,o=e.selection.getRng(),r=Re.fromRangeStart(o),c=t.getParent(o.startContainer,t.isBlock);if(c!==null&&XE(te.fromDom(c),r,e.schema))return P.some(()=>sh(e))}return P.none()},mI=(e,t)=>{const o=D_(e.selection.getRng());return y7(o)?P.some(()=>$f(e,t,te.fromDom(e.selection.getNode()))):P.none()},Fb=(e,t)=>e.selection.isCollapsed()?P.none():mI(e,t),rh=(e,t,o)=>lc([wl,c4,a4,(r,c)=>cR(r,t,c),Mb,a_,i4,C4,Cr,uR,l4,Fb],r=>r(e,o)).filter(r=>e.selection.isEditable()),Gd=(e,t)=>{rh(e,t,!1).fold(()=>{e.selection.isEditable()&&(XA(e),IM(e))},Fn),ED(e)&&aD(e.dom,e.getBody())},Jx=(e,t)=>{rh(e,t,!0).fold(()=>{e.selection.isEditable()&&qH(e)},Fn),ED(e)&&aD(e.dom,e.getBody())},fR=(e,t)=>{e.addCommand("delete",()=>{Gd(e,t)}),e.addCommand("forwardDelete",()=>{Jx(e,t)})},x4=5,fI=400,gR=e=>e.touches===void 0||e.touches.length!==1?P.none():P.some(e.touches[0]),jW=(e,t)=>{const o=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return o>x4||r>x4},WW=e=>{const t=Pc(),o=Wt(!1),r=oi(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},fI);e.on("touchstart",c=>{gR(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),t.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),gR(c).each(u=>{t.on(f=>{jW(u,f)&&(t.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&t.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},S4=(e,t)=>kn(e,t.nodeName),gI=(e,t)=>tt(t)?!0:pt(t)?!S4(e.getBlockElements(),t)&&!Xs(t)&&!Ks(e,t)&&!Rh(t)&&!u2(t):!1,hI=(e,t,o)=>po(fM(te.fromDom(o),te.fromDom(t)),r=>S4(e,r.dom)),ZW=(e,t)=>{if(tt(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||S4(e,t.nextSibling)||Rh(t.nextSibling)}return!1},pI=e=>e.dom.create(_r(e),ru(e)),lQ=e=>{const t=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,S=null;const O=_r(e);if(!u||!pt(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,O.toLowerCase())||hI(c,f,u))return;if(f.firstChild===f.lastChild&&Vs(f.firstChild)){b=pI(e),b.appendChild(bf().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let M=f.firstChild;for(;M;)if(pt(M)&&Sc(r,M),gI(r,M)){if(ZW(c,M)){v=M,M=M.nextSibling,t.remove(v);continue}if(!b){if(!S&&e.hasFocus()&&(S=If(e.selection.getRng(),()=>document.createElement("span"))),!M.parentNode){M=null;break}b=pI(e),f.insertBefore(b,M)}v=M,M=M.nextSibling,b.appendChild(v)}else b=null,M=M.nextSibling;S&&(e.selection.setRng(Gu(S)),e.nodeChanged())},GW=(e,t,o)=>{const r=te.fromDom(pI(e)),c=bf();bo(r,c),o(t,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},qd=e=>{e.on("NodeChange",()=>lQ(e))},bI=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,qW=(e,t,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?t.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=t.lastIndexOf("<",u);if(b!==-1&&t.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},Lb=(e,t,o)=>{let r=t.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(t[r],qW(e,c,Q1(e)));o.content=c}},vI=(e,t)=>Ka(e,o=>{const r=t.match(o);return r!==null&&r[0].length===t.length}),KW=e=>{const t="contenteditable",o=" "+Je.trim(lE(e))+" ",r=" "+Je.trim(Q1(e))+" ",c=bI(o),u=bI(r),f=Y3(e);f.length>0&&e.on("BeforeSetContent",b=>{Lb(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const S=b[v];c(S)?S.attr(t,"true"):u(S)&&S.attr(t,"false")}}),e.serializer.addAttributeFilter(t,b=>{let v=b.length;for(;v--;){const S=b[v];if(!c(S)&&!u(S))continue;const O=S.attr("data-mce-content");f.length>0&&O?vI(f,O)?(S.name="#text",S.type=3,S.raw=!0,S.value=O):S.remove():S.attr(t,null)}})},w4=e=>Ki(te.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),E4=(e,t)=>{t.hasAttribute("data-mce-caret")&&(tu(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},yI=(e,t)=>{const o=w4(e);if(o){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),E4(e,o);return}$0(o)&&(E4(e,o),e.undoManager.add())}},CI=e=>{e.on("keyup compositionstart",de(yI,e))},xI=Ts,SI=(e,t,o)=>W$(t,e,o,Zg,Bf,xI),wI=(e,t,o)=>Z$(t,e,o,u=>Zg(u)||nx(u),u=>Bf(u)||zA(u),xI),EI=e=>{const t=e.dom.create(_r(e));return t.innerHTML='<br data-mce-bogus="1">',t},T4=(e,t,o)=>{const r=ju(e.getBody()),c=de(_v,t===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Re.fromRangeStart(o))){const b=te.fromDom(EI(e));t===1?ll(te.fromDom(u),b):la(te.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},YW=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return SI(o,e,r).orThunk(()=>(T4(e,o,r),P.none()))},XW=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return wI(o,e,r).orThunk(()=>(T4(e,o,r),P.none()))},QW=(e,t)=>{const o=t?e.getEnd(!0):e.getStart(!0);return KA(o)?!t:t},TI=(e,t)=>YW(e,QW(e.selection,t)).exists(o=>(Uf(e,o),!0)),kI=(e,t)=>XW(e,t).exists(o=>(Uf(e,o),!0)),AI=(e,t)=>b4(e,t,t?Bf:Zg),k4=(e,t)=>RD(e,!t).map(o=>{const r=o.toRange(),c=e.selection.getRng();return t?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Uf(e,o),!0)),_I=(e,t)=>{const o=f=>Qn(f,t),r=f=>ml(f.dom),c=te.fromDom(e.container());return jo(c,r,o).filter(f=>!o(f))},OI=(e,t,o)=>(o?qD:F$)(e.getBody(),t).map(c=>c.toRange()),JW=(e,t)=>{const o=Re.fromRangeStart(e.selection.getRng()),r=Re.fromRangeEnd(e.selection.getRng()),c=te.fromDom(e.getBody());return id(Qs(_I(o,c),_I(r,c),(f,b)=>Qn(f,b)?P.some(f):P.none())).fold(ye,f=>t&&xl(f.dom,r)||!t&&f4(f.dom,o)?OI(e,t?r:o,t).exists(b=>(Uf(e,b),!0)):!1)},jf=(e,t)=>JW(e,t),hR=e=>Lt(["figcaption"],Hn(e)),eZ=(e,t,o)=>{const r=de(Qn,t);return jo(te.fromDom(e.container()),c=>o.isBlock(Hn(c)),r).filter(hR)},tZ=(e,t,o)=>t?xl(e.dom,o):f4(e.dom,o),nZ=(e,t)=>{const o=te.fromDom(e.getBody()),r=Re.fromRangeStart(e.selection.getRng());return eZ(r,o,e.schema).exists(()=>{if(tZ(o,t,r)){const u=GW(e,o,t?bo:ji);return e.selection.setRng(u),!0}else return!1})},A4=(e,t)=>e.selection.isCollapsed()?nZ(e,t):!1,pR=(e,t,o)=>{const r=e.selection.getRng(),c=Re.fromRangeStart(r);return e.getBody().firstChild===t&&f4(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},DI=(e,t)=>{const o=e.selection.getRng(),r=Re.fromRangeStart(o);return e.getBody().lastChild===t&&xl(t,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},RI=(e,t)=>t?P.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>DI(e,o)).getOr(!1):P.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>P.from(e.dom.getParent(o,"details")).map(r=>pR(e,r,o))).getOr(!1),bR=(e,t)=>RI(e,t),NI={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},eS=e=>en(e,t=>({...NI,...t})),_4=e=>en(e,t=>({...NI,...t})),vR=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,MI=(e,t)=>xo(eS(e),o=>vR(o,t)?[o]:[]),PI=(e,t)=>xo(_4(e),o=>vR(o,t)?[o]:[]),yn=(e,...t)=>()=>e.apply(null,t),Np=(e,t)=>Oo(MI(e,t),o=>o.action()),O4=(e,t)=>lc(PI(e,t),o=>o.action()),hy=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return W$(e,o,r,ex,tx,yi).exists(c=>(Uf(e,c),!0))},BI=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return Z$(e,o,r,ex,tx,yi).exists(c=>(Uf(e,c),!0))},yR=(e,t)=>b4(e,t,t?tx:ex),oZ=(e,t)=>$I(e,t,He),$I=(e,t,o)=>xo(Ds(e),r=>Fc(r,t)?o(r)?[r]:[]:$I(r,t,o)),II=(e,t,o=ye)=>{if(o(t))return P.none();if(Lt(e,Hn(t)))return P.some(t);const r=c=>Fc(c,"table")||o(c);return cr(t,e.join(","),r)},sZ=(e,t)=>II(["td","th"],e,t),FI=e=>oZ(e,"th,td"),rZ=(e,t)=>ua(e,"table",t),LI=tl.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),tS={...LI,none:e=>LI.none(e)},CR=(e,t,o,r,c=He)=>{const u=r===1;if(!u&&o<=0)return tS.first(e[0]);if(u&&o>=e.length-1)return tS.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?tS.middle(t,b):CR(e,t,f,r,c)}},HI=(e,t)=>rZ(e,t).bind(o=>{const r=FI(o);return Jl(r,u=>Qn(e,u)).map(u=>({index:u,all:r}))}),aZ=(e,t,o)=>HI(e,o).fold(()=>tS.none(e),c=>CR(c.all,e,c.index,1,t)),cZ=(e,t,o)=>HI(e,o).fold(()=>tS.none(),c=>CR(c.all,e,c.index,-1,t));var xR=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],lZ=()=>{const e=S=>te.fromDom(S.dom.cloneNode(!1)),t=S=>Bl(S).dom,o=S=>Fs(S)?Hn(S)==="body"?!0:Lt(xR,Hn(S)):!1,r=S=>Fs(S)?Lt(["br","img","hr","input"],Hn(S)):!1,c=S=>Fs(S)&&hs(S,"contenteditable")==="false",u=(S,O)=>S.dom.compareDocumentPosition(O.dom),f=(S,O)=>{const R=Kn(S);ta(O,R)},b=S=>{const O=Hn(S);return Lt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],O)},v=S=>Fs(S)?ul(S,"lang"):P.none();return{up:st({selector:cr,closest:ua,predicate:qi,all:Ca}),down:st({selector:Ne,predicate:q}),styles:st({get:Hs,getRaw:ar,set:xa,remove:vh}),attrs:st({get:hs,set:ws,remove:rr,copyTo:f}),insert:st({before:la,after:ll,afterAll:lg,append:bo,appendAll:il,prepend:ji,wrap:Hc}),remove:st({unwrap:pc,remove:Ko}),create:st({nu:te.fromTag,clone:e,text:te.fromText}),query:st({comparePosition:u,prevSibling:al,nextSibling:nc}),property:st({children:Ds,name:Hn,parent:tc,document:t,isText:Eo,isComment:li,isElement:Fs,isSpecial:b,getLanguage:v,getText:Sa,setText:r1,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:Qn,is:Xm}};const Wf=(e,t)=>({element:e,offset:t}),SR=(e,t)=>{if(e.property().isText(t))return Wf(t,e.property().getText(t).length);{const o=e.property().children(t);return o.length>0?SR(e,o[o.length-1]):Wf(t,o.length)}},D4=(e,t,o)=>{const r=e.property().children(t);return r.length>0&&o<r.length?D4(e,r[o],0):r.length>0&&e.property().isElement(t)&&r.length===o?SR(e,r[r.length-1]):Wf(t,o)},zI=D4,wR=lZ(),Mp=(e,t)=>zI(wR,e,t),ER=or("image"),ed=e=>{const t=e;return P.from(t[ER])},Hb=(e,t)=>{const o=e;o[ER]=t},R4=or("event"),TR=e=>{const t=e;return P.from(t[R4])},N4=e=>t=>{const o=t;o[R4]=e},VI=(e,t)=>N4(t)(e),UI=N4(0),iZ=N4(2),uZ=N4(1),dZ=(e=>t=>{const o=t;return P.from(o[R4]).exists(r=>r===e)})(0),jI=()=>Object.freeze({length:0,item:e=>null}),kR=or("mode"),mZ=e=>{const t=e;return P.from(t[kR])},ah=e=>t=>{const o=t;o[kR]=e},nS=(e,t)=>ah(t)(e),AR=ah(0),M4=ah(2),_R=ah(1),WI=e=>t=>{const o=t;return P.from(o[kR]).exists(r=>r===e)},py=WI(0),ZI=WI(1),GI=(e,t)=>({...t,get length(){return t.length},add:(o,r)=>{if(py(e))if(U(o)){if(!Gn(r))return t.add(o,r)}else return t.add(o);return null},remove:o=>{py(e)&&t.remove(o)},clear:()=>{py(e)&&t.clear()}}),P4=["none","copy","link","move"],qI=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],by=()=>{const e=new window.DataTransfer;let t="move",o="all";const r={get dropEffect(){return t},set dropEffect(c){Lt(P4,c)&&(t=c)},get effectAllowed(){return o},set effectAllowed(c){dZ(r)&&Lt(qI,c)&&(o=c)},get items(){return GI(r,e.items)},get files(){return ZI(r)?jI():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{py(r)&&(Hb(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>ZI(r)?"":e.getData(c),setData:(c,u)=>{py(r)&&e.setData(c,u)},clearData:c=>{py(r)&&e.clearData(c)}};return AR(r),r},fZ=e=>{const t=by(),o=mZ(e);return M4(e),UI(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,ed(e).each(r=>t.setDragImage(r.image,r.x,r.y)),xe(e.types,r=>{r!=="Files"&&t.setData(r,e.getData(r))}),xe(e.files,r=>t.items.add(r)),TR(e).each(r=>{VI(t,r)}),o.each(r=>{nS(e,r),nS(t,r)}),t},KI=e=>{const t=e.getData("text/html");return t===""?P.none():P.some(t)},YI=(e,t)=>e.setData("text/html",t),gZ=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),hZ=(e,t)=>xo(t,o=>{const r=gZ(Cf(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),XI=(e,t,o)=>Fo(e,(r,c)=>r.fold(()=>P.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-t)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-o));return P.some(b<f?c:u)}),P.none()),QI=(e,t,o,r,c)=>{const u=Ne(te.fromDom(o),"td,th,caption").map(b=>b.dom),f=ze(hZ(e,u),b=>t(b,c));return XI(f,r,c).map(b=>b.cell)},pZ=e=>e.bottom,JI=e=>e.top,oS=(e,t)=>e.y<t,bZ=(e,t)=>e.y>t,eF=de(QI,pZ,oS),tF=de(QI,JI,bZ),nF=(e,t)=>Ws(t.getClientRects()).bind(o=>eF(e,o.left,o.top)).bind(o=>$b(I$(o),t)),OR=(e,t)=>mr(t.getClientRects()).bind(o=>tF(e,o.left,o.top)).bind(o=>$b(Ib(o),t)),oF=(e,t,o)=>o.breakAt.exists(r=>e(t,r).breakAt.isSome()),vZ=e=>e.breakType===Vf.Wrap&&e.positions.length===0,sF=e=>e.breakType===Vf.Br&&e.positions.length===1,rF=(e,t,o)=>{const r=e(t,o);return vZ(r)||!Vs(o.getNode())&&sF(r)?!oF(e,t,r):r.breakAt.isNone()},yZ=de(rF,Da),CZ=de(rF,Yx),DR=(e,t,o)=>{const r=Re.fromRangeStart(t);return m(!e,o).exists(c=>c.isEqual(r))},xZ=(e,t,o,r)=>{const c=e.selection.getRng(),u=t?1:-1;return Sv()&&DR(t,c,o)?(nh(u,e,o,!t,!1).each(f=>{Uf(e,f)}),!0):!1},SZ=(e,t,o)=>nF(t,o).orThunk(()=>Ws(o.getClientRects()).bind(r=>GD(Xx(e,Re.before(t)),r.left))).getOr(Re.before(t)),B4=(e,t,o)=>OR(t,o).orThunk(()=>Ws(o.getClientRects()).bind(r=>GD(Dp(e,Re.after(t)),r.left))).getOr(Re.after(t)),aF=(e,t)=>{const o=t.getNode(e);return Uc(o)?P.some(o):P.none()},RR=(e,t,o)=>{t.undoManager.transact(()=>{const r=e?ll:la,c=GW(t,te.fromDom(o),r);Uf(t,c)})},NR=(e,t,o)=>{const r=aF(!!t,o),c=t===!1;r.fold(()=>Uf(e,o.toRange()),u=>m(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Uf(e,o.toRange()),f=>RR(t,e,u)))},cF=(e,t,o,r)=>{const c=e.selection.getRng(),u=Re.fromRangeStart(c),f=e.getBody();if(!t&&yZ(r,u)){const b=SZ(f,o,u);return NR(e,t,b),!0}else if(t&&CZ(r,u)){const b=B4(f,o,u);return NR(e,t,b),!0}else return!1},MR=(e,t,o)=>P.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>P.from(e.dom.getParent(r,"table")).map(c=>o(e,t,c,r))).getOr(!1),lF=(e,t)=>MR(e,t,xZ),PR=(e,t)=>MR(e,t,cF),wZ=e=>{const t=af.exact(e,0,e,0);return lf(t)},EZ=e=>vy(e)||Do(e).some(t=>ii(t)&&vy(t)),sS=(e,t,o)=>o.fold(P.none,P.none,(r,c)=>mg(c).map(u=>wZ(u)),r=>e.mode.isReadOnly()||!TZ(r)||!EZ(r)?P.none():(e.execCommand("mceTableInsertRowAfter"),iF(e,t,r))),TZ=e=>jo(e,gr("table")).exists(Hl),iF=(e,t,o)=>sS(e,t,aZ(o,vy)),kZ=(e,t,o)=>sS(e,t,cZ(o,vy)),vy=e=>Hl(e)||Dn(e,AZ),AZ=e=>ii(e)&&Hl(e),uF=(e,t)=>{const o=["table","li","dl"],r=te.fromDom(e.getBody()),c=b=>{const v=Hn(b);return Qn(b,r)||Lt(o,v)},u=e.selection.getRng(),f=te.fromDom(t?u.endContainer:u.startContainer);return sZ(f,c).map(b=>(rZ(b,c).each(O=>{e.model.table.clearSelectedCells(O.dom)}),e.selection.collapse(!t),(t?iF:kZ)(e,c,b).each(O=>{e.selection.setRng(O)}),!0)).getOr(!1)},dF=(e,t,o)=>{const r=fo.os.isMacOS()||fo.os.isiOS(),c=fo.browser.isFirefox();Np([{keyCode:Et.RIGHT,action:yn(TI,e,!0)},{keyCode:Et.LEFT,action:yn(TI,e,!1)},{keyCode:Et.UP,action:yn(kI,e,!1)},{keyCode:Et.DOWN,action:yn(kI,e,!0)},...r?[{keyCode:Et.UP,action:yn(k4,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Et.DOWN,action:yn(k4,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Et.RIGHT,action:yn(lF,e,!0)},{keyCode:Et.LEFT,action:yn(lF,e,!1)},{keyCode:Et.UP,action:yn(PR,e,!1)},{keyCode:Et.DOWN,action:yn(PR,e,!0)},{keyCode:Et.UP,action:yn(PR,e,!1)},{keyCode:Et.UP,action:yn(bR,e,!1)},{keyCode:Et.DOWN,action:yn(bR,e,!0)},{keyCode:Et.RIGHT,action:yn(hy,e,!0)},{keyCode:Et.LEFT,action:yn(hy,e,!1)},{keyCode:Et.UP,action:yn(BI,e,!1)},{keyCode:Et.DOWN,action:yn(BI,e,!0)},{keyCode:Et.RIGHT,action:yn(aR,e,t,!0)},{keyCode:Et.LEFT,action:yn(aR,e,t,!1)},{keyCode:Et.RIGHT,ctrlKey:!r,altKey:r,action:yn(y4,e,t)},{keyCode:Et.LEFT,ctrlKey:!r,altKey:r,action:yn(bW,e,t)},{keyCode:Et.UP,action:yn(A4,e,!1)},{keyCode:Et.DOWN,action:yn(A4,e,!0)},...c?[{keyCode:Et.UP,action:yn(jf,e,!1)},{keyCode:Et.DOWN,action:yn(jf,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},_Z=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||dF(e,t,o)})},Vm=(e,t)=>({container:e,offset:t}),$4=lo.DOM,I4=e=>t=>e===t?-1:0,OZ=e=>t=>e.isBlock(t)||Lt(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",BR=(e,t,o)=>{if(tt(e)&&t>=0)return P.some(Vm(e,t));{const r=Ed($4);return P.from(r.backwards(e,t,I4(e),o)).map(c=>Vm(c.container,c.container.data.length))}},$R=(e,t,o)=>{if(tt(e)&&t>=e.length)return P.some(Vm(e,t));{const r=Ed($4);return P.from(r.forwards(e,t,I4(e),o)).map(c=>Vm(c.container,0))}},IR=(e,t,o)=>{if(!tt(e))return P.none();const r=e.data;if(t>=0&&t<=r.length)return P.some(Vm(e,t));{const c=Ed($4);return P.from(c.backwards(e,t,I4(e),o)).bind(u=>{const f=u.container.data;return IR(u.container,t+f.length,o)})}},FR=(e,t,o)=>{if(!tt(e))return P.none();const r=e.data;if(t<=r.length)return P.some(Vm(e,t));{const c=Ed($4);return P.from(c.forwards(e,t,I4(e),o)).bind(u=>FR(u.container,t-r.length,o))}},LR=(e,t,o,r,c)=>{const u=Ed(e,OZ(e));return P.from(u.backwards(t,o,r,c))},DZ=e=>e.collapsed&&tt(e.startContainer),RZ=e=>qc(e.toString().replace(/\u00A0/g," ")),mF=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,aa=(e,t)=>e.substring(t.length),NZ=(e,t,o,r=!1)=>{let c;const u=o.charAt(0);for(c=t-1;c>=0;c--){const f=e.charAt(c);if(!r&&mF(f))return P.none();if(u===f&&_s(e,o,c,t))break}return P.some(c)},HR=(e,t,o,r=!1)=>{if(!DZ(t))return P.none();const c={text:"",offset:0},u=(b,v,S)=>(c.text=S+c.text,c.offset+=v,NZ(c.text,c.offset,o,r).getOr(v)),f=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return LR(e,t.startContainer,t.startOffset,u,f).bind(b=>{const v=t.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return P.none();const S=RZ(v);return S.lastIndexOf(o)!==0?P.none():P.some({text:aa(S,o),range:v,trigger:o})})},MZ=e=>e.nodeType===Kp,fF=e=>e.nodeType===rg,F4=e=>{if(MZ(e))return Vm(e,e.data.length);{const t=e.childNodes;return t.length>0?F4(t[t.length-1]):Vm(e,t.length)}},zR=(e,t)=>{const o=e.childNodes;return o.length>0&&t<o.length?zR(o[t],0):o.length>0&&fF(e)&&o.length===t?F4(o[o.length-1]):Vm(e,t)},rS=(e,t)=>{const o=e.getParent(t.container,e.isBlock)??e.getRoot();return LR(e,t.container,t.offset,(r,c)=>c===0?-1:c,o).filter(r=>{const c=r.container.data.charAt(r.offset-1);return!mF(c)}).isSome()},PZ=e=>t=>{const o=zR(t.startContainer,t.startOffset);return!rS(e,o)},BZ=(e,t,o)=>lc(o.triggers,r=>HR(e,t,r)),$Z=(e,t)=>{const o=t(),r=e.selection.getRng();return BZ(e.dom,r,o).bind(c=>gF(e,t,c))},gF=(e,t,o,r={})=>{const c=t(),f=e.selection.getRng().startContainer.nodeValue??"",b=ze(c.lookupByTrigger(o.trigger),S=>o.text.length>=S.minChars&&S.matches.getOrThunk(()=>PZ(e.dom))(o.range,f,o.text));if(b.length===0)return P.none();const v=Promise.all(en(b,S=>S.fetch(o.text,S.maxResults,r).then(R=>({matchText:o.text,items:R,columns:S.columns,onAction:S.onAction,highlightOn:S.highlightOn}))));return P.some({lookupData:v,context:o})},IZ=nC("type"),FZ=_w("fetch"),LZ=_w("onAction"),HZ=e=>sp("columns",e),zZ=_c([IZ,nC("trigger"),x3("minChars",1),HZ(1),x3("maxResults",10),r5("matches"),FZ,LZ,S3("highlightOn",[],Q2)]),VZ=e=>op("Autocompleter",zZ,e),UZ=()=>{const e={},t={},o={},r={},c={},u={},f={},b={},v={},S=(H,J)=>(W,Q)=>{H[W.toLowerCase()]={...Q,type:J}},O=(H,J)=>(W,Q)=>{H[W.toLowerCase()]={type:J,...Q}},R=(H,J)=>r[H.toLowerCase()]=J,M=(H,J)=>f[H.toLowerCase()]=J;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(t,"menuitem"),addNestedMenuItem:S(t,"nestedmenuitem"),addToggleMenuItem:S(t,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(c,"contextmenu"),addContextToolbar:S(u,"contexttoolbar"),addContextForm:O(u,"contextform"),addSidebar:S(b,"sidebar"),addView:S(v,"views"),addIcon:R,addContext:M,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},jZ=e=>{const t=e.ui.registry.getAll().popups,o=ic(t,f=>VZ(f).fold(b=>{throw new Error(_d(b))},Wo)),r=Gm(uc(o,f=>f.trigger)),c=Ba(o);return{dataset:o,triggers:r,lookupByTrigger:f=>ze(c,b=>b.trigger===f)}},WZ=(e,t)=>{const o=oi(t.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),t.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},ZZ=e=>{const t=Pc(),o=Wt(!1),r=t.isSet,c=()=>{r()&&(kf(e),o.set(!1),t.clear())},u=R=>{r()||t.set({trigger:R.trigger,matchLength:R.text.length})},f=pa(()=>jZ(e)),b=R=>t.get().map(M=>HR(e.dom,e.selection.getRng(),M.trigger,!0).bind(H=>gF(e,f,H,R))).getOrThunk(()=>$Z(e,f)),v=R=>{b(R).fold(c,M=>{u(M.context),M.lookupData.then(H=>{t.get().map(J=>{const W=M.context;J.trigger===W.trigger&&(t.set({...J,matchLength:W.text.length}),o.get()?(lC(e,{range:W.range}),j1(e,{lookupData:H})):(o.set(!0),lC(e,{range:W.range}),U1(e,{lookupData:H})))})})})},S=(R,M)=>{const H=R.compareBoundaryPoints(window.Range.START_TO_START,M),J=R.compareBoundaryPoints(window.Range.END_TO_END,M);return H>=0&&J<=0},O=()=>t.get().bind(({trigger:R})=>{const M=e.selection.getRng();return HR(e.dom,M,R,o.get()).filter(({range:H})=>S(M,H)).map(({range:H})=>H)});e.addCommand("mceAutocompleterReload",(R,M)=>{const H=Ye(M)?M.fetchOptions:{};v(H)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{O().each(R=>{lC(e,{range:R})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>O().isSome()),WZ(e,{cancelIfNecessary:c,load:v})},hF=Hi().browser.isSafari(),VR=e=>vf(te.fromDom(e)),pF=(e,t)=>e.startOffset===0&&e.endOffset===t.textContent?.length,L4=(e,t)=>P.from(e.getParent(t.container(),"details")),bF=(e,t)=>L4(e,t).isSome(),qZ=(e,t)=>{const o=P.from(e.getParent(t.startContainer,"details")),r=P.from(e.getParent(t.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>P.from(e.select("summary",u)[0]));return P.some({startSummary:c,startDetails:o,endDetails:r})}else return P.none()},vF=(e,t)=>E(t).exists(o=>o.isEqual(e)),KZ=(e,t)=>D(t).exists(o=>Vs(o.getNode())&&y(t,o).exists(r=>r.isEqual(e))||o.isEqual(e)),yF=(e,t)=>t.startSummary.exists(o=>vF(e,o)),YZ=(e,t)=>t.startSummary.exists(o=>KZ(e,o)),CF=(e,t)=>t.startDetails.exists(o=>y(o,e).forall(r=>t.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),xF=(e,t,o)=>o.startDetails.exists(r=>p(e,t).forall(c=>!r.contains(c.container()))),SF=(e,t)=>{const o=t.getNode();Gn(o)||e.selection.setCursorLocation(o,t.offset())},wF=(e,t,o)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?E(c):D(c)).each(f=>SF(e,f))}else SF(e,t)},XZ=(e,t)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=t.startSummary.exists(o),u=t.startSummary.exists(r),f=t.startDetails.forall(v=>t.endDetails.forall(S=>v!==S));return(c||u)&&!(c&&u)||f},EF=(e,t,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Re.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=L4(r,f),S=b&&r.isEmpty(b),O=oe(b?.previousSibling),R=oe(b?.nextSibling);return S&&(t?R:O)&&mp(!t,u,f).exists(J=>bF(r,J)&&!ld(v,L4(r,J)))?!0:mp(t,u,f).fold(ye,M=>{const H=L4(r,M);if(bF(r,M)&&!ld(v,H)){if(t||wF(e,M,!1),b&&S){if(t&&O)return!0;if(!t&&R)return!0;wF(e,M,t),e.dom.remove(b)}return!0}else return!1})}else return!1},TF=(e,t,o,r)=>{const u=e.selection.getRng(),f=Re.fromRangeStart(u),b=e.getBody();return r==="selection"?XZ(u,t):o?YZ(f,t)||xF(b,f,t):yF(f,t)||CF(f,t)},QZ=(e,t,o)=>qZ(e.dom,e.selection.getRng()).fold(()=>EF(e,t,o),r=>TF(e,r,t,o)||EF(e,t,o)),JZ=(e,t,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Re.fromRangeStart(u);return Uk(c)?(o==="selection"&&pF(u,c)||FM(t,f,c)?VR(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:S,focusNode:O,focusOffset:R}=b??{};const M=()=>{X(v)&&X(S)&&X(O)&&X(R)&&b?.setBaseAndExtent(v,S,O,R)},H=()=>{v=b?.anchorNode,S=b?.anchorOffset,O=b?.focusNode,R=b?.focusOffset},J=(Q,ge)=>{xe(Q.childNodes,be=>{jC(be)&&ge.appendChild(be)})},W=e.dom.create("span",{"data-mce-bogus":"1"});J(c,W),c.appendChild(W),M(),(o==="word"||o==="line")&&b?.modify("extend",t?"right":"left",o),!r.isCollapsed()&&pF(r.getRng(),W)?VR(c):(e.execCommand(t?"ForwardDelete":"Delete"),H(),J(W,c),M()),e.dom.remove(W)}),!0):!1},Pp=(e,t,o)=>QZ(e,t,o)||hF&&JZ(e,t,o)?P.some(St):P.none(),kF=e=>(t,o,r={})=>{const c=t.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:St,inputType:o},f=T2(new InputEvent(e));return t.dispatch(e,{...f,...u,...r})},aS=kF("input"),cS=kF("beforeinput"),AF=Hi(),_F=AF.os,OF=_F.isMacOS()||_F.isiOS(),DF=AF.browser.isFirefox(),tG=(e,t,o)=>{const r=o.keyCode===Et.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";O4([{keyCode:Et.BACKSPACE,action:yn(wl,e)},{keyCode:Et.BACKSPACE,action:yn(c4,e,!1)},{keyCode:Et.DELETE,action:yn(c4,e,!0)},{keyCode:Et.BACKSPACE,action:yn(a4,e,!1)},{keyCode:Et.DELETE,action:yn(a4,e,!0)},{keyCode:Et.BACKSPACE,action:yn(cR,e,t,!1)},{keyCode:Et.DELETE,action:yn(cR,e,t,!0)},{keyCode:Et.BACKSPACE,action:yn(a_,e,!1)},{keyCode:Et.DELETE,action:yn(a_,e,!0)},{keyCode:Et.BACKSPACE,action:yn(Pp,e,!1,u)},{keyCode:Et.DELETE,action:yn(Pp,e,!0,u)},...OF?[{keyCode:Et.BACKSPACE,altKey:!0,action:yn(Pp,e,!1,f(!0))},{keyCode:Et.DELETE,altKey:!0,action:yn(Pp,e,!0,f(!0))},{keyCode:Et.BACKSPACE,metaKey:!0,action:yn(Pp,e,!1,f(!1))}]:[{keyCode:Et.BACKSPACE,ctrlKey:!0,action:yn(Pp,e,!1,f(!0))},{keyCode:Et.DELETE,ctrlKey:!0,action:yn(Pp,e,!0,f(!0))}],{keyCode:Et.BACKSPACE,action:yn(i4,e,!1)},{keyCode:Et.DELETE,action:yn(i4,e,!0)},{keyCode:Et.BACKSPACE,action:yn(C4,e,!1)},{keyCode:Et.DELETE,action:yn(C4,e,!0)},{keyCode:Et.BACKSPACE,action:yn(Cr,e,!1)},{keyCode:Et.DELETE,action:yn(Cr,e,!0)},{keyCode:Et.BACKSPACE,action:yn(Mb,e,!1)},{keyCode:Et.DELETE,action:yn(Mb,e,!0)},{keyCode:Et.BACKSPACE,action:yn(uR,e,!1)},{keyCode:Et.DELETE,action:yn(uR,e,!0)},{keyCode:Et.BACKSPACE,action:yn(l4,e,!1)},{keyCode:Et.DELETE,action:yn(l4,e,!0)},{keyCode:Et.BACKSPACE,action:yn(Fb,e,!1)},{keyCode:Et.DELETE,action:yn(Fb,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),cS(e,r).isDefaultPrevented()||(b(),aS(e,r))})},nG=(e,t,o,r)=>Np([{keyCode:Et.BACKSPACE,action:yn($D,e)},{keyCode:Et.DELETE,action:yn($D,e)},...OF?[{keyCode:Et.BACKSPACE,altKey:!0,action:yn(Qx,e)},{keyCode:Et.DELETE,altKey:!0,action:yn(Qx,e)},...o?[{keyCode:DF?224:91,action:yn(()=>(rI(e,r),Qx(e)))}]:[]]:[{keyCode:Et.BACKSPACE,ctrlKey:!0,action:yn(Qx,e)},{keyCode:Et.DELETE,ctrlKey:!0,action:yn(Qx,e)}]],t),oG=(e,t)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===Et.BACKSPACE,r=lR(e),c.isDefaultPrevented()||tG(e,t,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||(nG(e,c,o,r),r.length=0),o=!1})},sG=(e,t)=>{const o=te.fromDom(e),r=te.fromDom(t),c=gr("span"),u=de(Qn,o),f=v=>Fs(v)&&ar(v,"font-size").isSome(),b=[...f(r)?[r]:[],...k(r,f,u)];xe(b.slice(1),v=>{vh(v,"font-size"),rr(v,"data-mce-style"),c(v)&&Qm(v)&&pc(v)})},rG=e=>{for(;e;){if(pt(e)||tt(e)&&e.data&&/[\r\n\s]/.test(e.data))return P.from(te.fromDom(e));e=e.nextSibling}return P.none()},yy=(e,t)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(Hn(v)),f=v=>u(v)?P.from(v):of(v,u),b=v=>o.isEmpty(v.dom);rG(t.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const S=Mp(v,0).element;Fs(S)&&!eu(S)&&bo(S,te.fromText(Is))}},S=>{la(S,te.fromText(Is))})})}const c=o.createRng();if(t.normalize(),t.hasChildNodes()){const u=new er(t,t);let f=t,b;for(;b=u.current();){if(tt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else Vs(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(c.setStartBefore(t),c.setEndBefore(t)):(c.setStartAfter(t),c.setEndAfter(t)):(c.setStart(t,0),c.setEnd(t,0));e.selection.setRng(c),lu(e,c)},lS=(e,t)=>{const o=e.getRoot();let r,c=t;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},UR=e=>P.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),dQ=e=>UR(e).fold(st(""),t=>t.nodeName.toUpperCase()),aG=e=>UR(e).filter(t=>Tc(te.fromDom(t))).isSome(),Cy=e=>{e.innerHTML='<br data-mce-bogus="1">'},RF=(e,t,o)=>{const r=e.dom;P.from(o.style).map(r.parseStyle).each(v=>{const O={...tf(te.fromDom(t)),...v};r.setStyles(t,O)});const c=P.from(o.class).map(v=>v.split(/\s+/)),u=P.from(t.className).map(v=>ze(v.split(/\s+/),S=>S!==""));Qs(c,u,(v,S)=>{const O=ze(S,M=>!Lt(v,M)),R=[...v,...O];r.setAttrib(t,"class",R.join(" "))});const f=["style","class"],b=Pi(o,(v,S)=>!Lt(f,S));r.setAttribs(t,b)},xy=(e,t)=>{if(_r(e).toLowerCase()===t.tagName.toLowerCase()){const r=ru(e);RF(e,t,r)}},NF=(e,t,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,S=_r(e),O=o?o.nodeName.toUpperCase():"";let R=t;const M=v.getTextInlineElements();let H;u||O==="TABLE"||O==="HR"?H=b.create(u||S,f||{}):H=o.cloneNode(!1);let J=H;if(!c)b.setAttrib(H,"style",null),b.setAttrib(H,"class",null);else{do if(M[R.nodeName]){if(z(R)||Xs(R))continue;const W=R.cloneNode(!1);b.setAttrib(W,"id",""),H.hasChildNodes()?(W.appendChild(H.firstChild),H.appendChild(W)):(J=W,H.appendChild(W))}while((R=R.parentNode)&&R!==r);H.nodeName!=="LI"&&sG(H,J)}return xy(e,H),Cy(J),H},MF=(e,t)=>e.dom.getParent(t,f1),PF=(e,t,o)=>{let r=t;for(;r&&r!==e&&oe(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return f1(c);r=c}return!1},cG=(e,t,o)=>!t&&o.nodeName.toLowerCase()===_r(e)&&e.dom.isEmpty(o)&&PF(e.getBody(),o,r=>kn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),lG=(e,t,o)=>{const r=t(_r(e)),c=MF(e,o);c&&(e.dom.insertAfter(r,c),yy(e,r),(o.parentElement?.childNodes?.length??0)>1&&e.dom.remove(o))},iG=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,BF=e=>e.parentNode?.firstChild===e,$F=(e,t)=>{const o=e?.parentNode;return X(o)&&o.nodeName===t},H4=e=>X(e)&&/^(OL|UL|LI)$/.test(e.nodeName),jR=e=>X(e)&&/^(LI|DT|DD)$/.test(e.nodeName),uG=e=>H4(e)&&H4(e.parentNode),z4=e=>{const t=e.parentNode;return jR(t)?t:e},iS=(e,t,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!pt(r);)r=r[o?"nextSibling":"previousSibling"];return r===t},IF=e=>Fo(uc(tf(te.fromDom(e)),(t,o)=>`${o}: ${t};`),(t,o)=>t+o,""),dG=(e,t,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;uG(o)&&(c="LI");const v=jR(r)?IF(r):void 0;let S=jR(r)&&v?t(c,{style:IF(r)}):t(c);if(iS(o,r,!0)&&iS(o,r,!1))if($F(o,"LI")){const O=z4(o);u.insertAfter(S,O),BF(o)?u.remove(O):u.remove(o)}else u.replace(S,o);else if(iS(o,r,!0))$F(o,"LI")?(u.insertAfter(S,z4(o)),S.appendChild(u.doc.createTextNode(" ")),S.appendChild(o)):b.insertBefore(S,o),u.remove(r);else if(iS(o,r,!1))u.insertAfter(S,z4(o)),u.remove(r);else{o=z4(o);const O=f.cloneRange();O.setStartAfter(r),O.setEndAfter(o);const R=O.extractContents();if(c==="LI"&&iG(R,"LI")){const M=ze(en(S.children,te.fromDom),bt(gr("br")));S=R.firstChild,u.insertAfter(R,o),xe(M,H=>ji(te.fromDom(S),H)),v&&S.setAttribute("style",v)}else u.insertAfter(R,o),u.insertAfter(S,o);u.remove(r)}yy(e,S)},mG=e=>{xe(q(te.fromDom(e),Eo),t=>{const o=t.dom;o.nodeValue=qc(o.data)})},fG=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},mQ=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),WR=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,gG=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,ZR=(e,t)=>X(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",hG=(e,t,o)=>{const r=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;pt(c)&&!t[c.nodeName.toLowerCase()]&&r.push(c)}let u=r.length;for(;u--;)c=r[u],(!c.hasChildNodes()||c.firstChild===c.lastChild&&c.firstChild?.nodeValue===""||mQ(e,c))&&e.remove(c)},GR=(e,t,o)=>tt(t)?e?o===1&&t.data.charAt(o-1)===jr?0:o:o===t.data.length-1&&t.data.charAt(o)===jr?t.data.length:o:o,FF=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,GR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,GR(!1,e.endContainer,e.endOffset)),t},pG=e=>{let t=e;do tt(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},qR=(e,t,o,r,c)=>{const u=e.dom,f=lS(u,r)??u.getRoot();let b=u.getParent(r,u.isBlock);if(!b||!ZR(u,b)){if(b=b||f,!b.hasChildNodes()){const R=u.create(t);return xy(e,R),b.appendChild(R),o.setStart(R,0),o.setEnd(R,0),R}let v=r;for(;v&&v.parentNode!==b;)v=v.parentNode;let S;for(;v&&!u.isBlock(v);)S=v,v=v.previousSibling;const O=S?.parentElement?.nodeName;if(S&&O&&e.schema.isValidChild(O,t.toLowerCase())){const R=S.parentNode,M=u.create(t);for(xy(e,M),R.insertBefore(M,S),v=S;v&&!u.isBlock(v);){const H=v.nextSibling;M.appendChild(v),v=H}o.setStart(r,c),o.setEnd(r,c)}}return r},Zf=(e,t)=>{t.normalize();const o=t.lastChild;(!o||pt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(t,"br")},LF=(e,t)=>{const o=lv(e);return jt(t)?!1:U(o)?Lt(Je.explode(o),t.nodeName.toLowerCase()):o},uS={insert:(e,t)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,S=v.getNonEmptyElements(),O=e.selection.getRng(),R=_r(e),M=te.fromDom(O.startContainer),H=$l(M,O.startOffset),J=H.exists($e=>ii($e)&&!Hl($e)),W=O.collapsed&&J,Q=($e,yt)=>NF(e,o,xt,je,Gw(e),$e,yt),ge=$e=>{const yt=GR($e,o,r);if(tt(o)&&($e?yt>0:yt<o.data.length))return!1;if((o.parentNode===xt||o===xt)&&f&&!$e||$e&&pt(o)&&o===xt.firstChild)return!0;if(WR(o,"TABLE")||WR(o,"HR"))return gG(o,"BR")?!$e:f&&!$e||!f&&$e;const Sn=new er(o,xt);tt(o)&&($e&&yt===0?Sn.prev():!$e&&yt===o.data.length&&Sn.next());let wn;for(;wn=Sn.current();){if(pt(wn)){if(!wn.getAttribute("data-mce-bogus")){const uo=wn.nodeName.toLowerCase();if(S[uo]&&uo!=="br")return!1}}else if(tt(wn)&&!kh(wn.data))return!1;$e?Sn.prev():Sn.next()}return!0},be=()=>{let $e;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Kt!=="HGROUP"?$e=Q(R):$e=Q(),LF(e,u)&&ZR(b,u)&&b.isEmpty(xt,void 0,{includeZwsp:!0})?$e=b.split(u,xt):b.insertAfter($e,xt),yy(e,$e),$e};VE(b,O).each($e=>{O.setStart($e.startContainer,$e.startOffset),O.setEnd($e.endContainer,$e.endOffset)}),o=O.startContainer,r=O.startOffset;const ve=!!(t&&t.shiftKey),Be=!!(t&&t.ctrlKey);pt(o)&&o.hasChildNodes()&&!W&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&tt(o)?r=o.data.length:r=0);const je=lS(b,o);if(!je||fG(e,o))return;ve||(o=qR(e,R,O,o,r));let xt=b.getParent(o,b.isBlock)||b.getRoot();u=X(xt?.parentNode)?b.getParent(xt.parentNode,b.isBlock):null,c=xt?xt.nodeName.toUpperCase():"";const Kt=u?u.nodeName.toUpperCase():"";if(Kt==="LI"&&!Be){const $e=u;xt=$e,u=$e.parentNode,c=Kt}if(pt(u)&&cG(e,ve,xt))return lG(e,Q,xt);if(/^(LI|DT|DD)$/.test(c)&&pt(u)&&b.isEmpty(xt)){dG(e,Q,u,xt,R);return}if(!W&&(xt===e.getBody()||!ZR(b,xt)))return;const Me=xt.parentNode;let Te;if(W)Te=Q(R),H.fold(()=>{bo(M,te.fromDom(Te))},$e=>{la($e,te.fromDom(Te))}),e.selection.setCursorLocation(Te,0);else if(hm(xt))Te=tu(xt),b.isEmpty(xt)&&Cy(xt),xy(e,Te),yy(e,Te);else if(ge(!1))Te=be();else if(ge(!0)&&Me){const $e=Re.fromRangeStart(O),yt=zA($e),Sn=te.fromDom(xt),uo=JE(Sn,$e,e.schema)?vM(Sn,$e,e.schema).bind(Cs=>P.from(Cs.getNode())):P.none();Te=Me.insertBefore(Q(),xt);const qo=WR(xt,"HR")||yt?Te:uo.getOr(xt);yy(e,qo)}else{const $e=FF(O).cloneRange();$e.setEndAfter(xt);const yt=$e.extractContents();mG(yt),pG(yt),Te=yt.firstChild,xt===Te?X(Me)&&b.insertAfter(yt,Me):b.insertAfter(yt,xt),hG(b,S,Te),Zf(b,xt),b.isEmpty(xt)&&Cy(xt),Te.normalize(),b.isEmpty(Te)?(b.remove(Te),be()):(xy(e,Te),yy(e,Te))}b.setAttrib(Te,"id",""),e.dispatch("NewBlock",{newBlock:Te})},fakeEventName:"insertParagraph"},KR=(e,t,o)=>{const r=new er(t,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||tt(c)&&c.length>0)return!0;return!1},YR=(e,t,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),lu(e,r)},HF=(e,t)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;VE(r,c).each(H=>{c.setStart(H.startContainer,H.startOffset),c.setEnd(H.endContainer,H.endOffset)});let b=c.startOffset,v=c.startContainer;if(pt(v)&&v.hasChildNodes()){const H=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,H&&tt(v)?b=v.data.length:b=0}let S=r.getParent(v,r.isBlock);const O=S&&S.parentNode?r.getParent(S.parentNode,r.isBlock):null,R=O?O.nodeName.toUpperCase():"",M=!!(t&&t.ctrlKey);R==="LI"&&!M&&(S=O),tt(v)&&b>=v.data.length&&(KR(e.schema,v,S||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Kh(r,c,u),YR(e,u,f),e.undoManager.add()},vG=(e,t)=>{const o=te.fromTag("br");la(te.fromDom(t),o),e.undoManager.add()},yG=(e,t)=>{xG(e.getBody(),t)||ll(te.fromDom(t),te.fromTag("br"));const o=te.fromTag("br");ll(te.fromDom(t),o),YR(e,o.dom,!1),e.undoManager.add()},CG=e=>Vs(e.getNode()),xG=(e,t)=>CG(Re.after(t))?!0:p(e,Re.after(t)).map(o=>Vs(o.getNode())).getOr(!1),zF=e=>e&&e.nodeName==="A"&&"href"in e,VF=e=>e.fold(ye,zF,zF,ye),SG=e=>{const t=de(mb,e),o=Re.fromRangeStart(e.selection.getRng());return zm(t,e.getBody(),o).filter(VF)},wG=(e,t)=>{t.fold(St,de(vG,e),de(yG,e),St)},jF={insert:(e,t)=>{const o=SG(e);o.isSome()?o.each(de(wG,e)):HF(e,t)},fakeEventName:"insertLineBreak"},WF=(e,t)=>UR(e).filter(o=>t.length>0&&Fc(te.fromDom(o),t)).isSome(),EG=e=>WF(e,Ww(e)),TG=e=>WF(e,Zw(e)),gu=tl.generate([{br:[]},{block:[]},{none:[]}]),kG=(e,t)=>TG(e),ZF=e=>(t,o)=>aG(t)===e,GF=(e,t)=>(o,r)=>dQ(o)===e.toUpperCase()===t,V4=e=>{const t=lS(e.dom,e.selection.getStart());return jt(t)},dS=e=>GF("pre",e),AG=()=>GF("summary",!0),Sy=e=>(t,o)=>av(t)===e,XR=(e,t)=>EG(e),U4=(e,t)=>t,_G=e=>{const t=_r(e),o=lS(e.dom,e.selection.getStart());return X(o)&&e.schema.isValidChild(o.nodeName,t)},qF=e=>{const t=e.selection.getRng(),o=te.fromDom(t.startContainer),c=$l(o,t.startOffset).map(u=>ii(u)&&!Hl(u));return t.collapsed&&c.getOr(!0)},td=(e,t)=>(o,r)=>Fo(e,(u,f)=>u&&f(o,r),!0)?P.some(t):P.none(),OG=(e,t)=>_$([td([kG],gu.none()),td([dS(!0),V4],gu.none()),td([AG()],gu.br()),td([dS(!0),Sy(!1),U4],gu.br()),td([dS(!0),Sy(!1)],gu.block()),td([dS(!0),Sy(!0),U4],gu.block()),td([dS(!0),Sy(!0)],gu.br()),td([ZF(!0),U4],gu.br()),td([ZF(!0)],gu.block()),td([XR],gu.br()),td([U4],gu.br()),td([_G],gu.block()),td([qF],gu.block())],[e,!!(t&&t.shiftKey)]).getOr(gu.none()),j4=(e,t,o)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||$M(t),!(X(o)&&cS(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,o),X(o)&&aS(t,e.fakeEventName)))},KF=(e,t)=>{if(e.mode.isReadOnly())return;const o=()=>j4(jF,e,t),r=()=>j4(uS,e,t),c=OG(e,t);switch(cv(e)){case"linebreak":c.fold(o,o,St);break;case"block":c.fold(r,r,St);break;case"invert":c.fold(r,o,St);break;default:c.fold(o,r,St);break}},YF=Hi(),DG=YF.os.isiOS()&&YF.browser.isSafari(),QR=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),e6(e.undoManager),e.undoManager.transact(()=>{KF(e,t)}))},W4=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(tt(t)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return o.test(r)}else return!1},XF=e=>{let t=P.none();const o=c=>{t=P.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),t.fold(St,f=>c.selection.moveToBookmark(f)),QR(c,u),t=P.none()};e.on("keydown",c=>{c.keyCode===Et.ENTER&&(DG&&W4(e.selection.getRng())?o(e):QR(e,c))}),e.on("keyup",c=>{c.keyCode===Et.ENTER&&t.each(()=>r(e,c))})},QF=(e,t,o)=>{const r=fo.os.isMacOS()||fo.os.isiOS();Np([{keyCode:Et.END,action:yn(AI,e,!0)},{keyCode:Et.HOME,action:yn(AI,e,!1)},...r?[]:[{keyCode:Et.HOME,action:yn(k4,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Et.END,action:yn(k4,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Et.END,action:yn(yR,e,!0)},{keyCode:Et.HOME,action:yn(yR,e,!1)},{keyCode:Et.END,action:yn(Rp,e,!0,t)},{keyCode:Et.HOME,action:yn(Rp,e,!1,t)}],o).each(c=>{o.preventDefault()})},RG=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||QF(e,t,o)})},NG=e=>{e.on("input",t=>{t.isComposing||AM(e)})},Z4=Hi(),MG=(e,t,o)=>{Np([{keyCode:Et.PAGE_UP,action:yn(Rp,e,!1,t)},{keyCode:Et.PAGE_DOWN,action:yn(Rp,e,!0,t)}],o)},JR=e=>e.stopImmediatePropagation(),JF=e=>e.keyCode===Et.PAGE_UP||e.keyCode===Et.PAGE_DOWN,eN=(e,t,o)=>{o&&!e.get()?t.on("NodeChange",JR,!0):!o&&e.get()&&t.off("NodeChange",JR),e.set(o)},PG=(e,t)=>{if(Z4.os.isMacOS())return;const o=Wt(!1);e.on("keydown",r=>{JF(r)&&eN(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||MG(e,t,r),JF(r)&&o.get()&&(eN(o,e,!1),e.nodeChanged())})},e8=(e,t)=>e===t||e.contains(t),BG=(e,t)=>!e8(e.getBody(),t.startContainer)||!e8(e.getBody(),t.endContainer)?!0:cH(e.dom,t),$G=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||po(t.getTargetRanges(),o=>!BG(e,o)))&&t.preventDefault()})},t8=(e,t)=>{const o=t.container(),r=t.offset();return tt(o)?(o.insertData(r,e),P.some(Re(o,r+e.length))):ab(t).map(c=>{const u=te.fromText(e);return t.isAtEnd()?ll(c,u):la(c,u),Re(u.dom,e.length)})},zb=de(t8,Is),n8=de(t8," "),IG=(e,t,o)=>NH(e,t,o)?zb(t):n8(t),o8=e=>t=>t.fold(o=>y(e.dom,Re.before(o)),o=>E(o),o=>D(o),o=>p(e.dom,Re.after(o))),FG=(e,t,o)=>r=>NH(e,r,o)?zb(t):n8(t),s8=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},LG=(e,t)=>e.isEditable(e.getParent(t,"summary")),r8=e=>{const t=Re.fromRangeStart(e.selection.getRng()),o=te.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=de(mb,e),c=Re.fromRangeStart(e.selection.getRng());return zm(r,e.getBody(),c).bind(o8(o)).map(u=>()=>FG(o,t,e.schema)(u).each(s8(e)))}else return P.none()},HG=e=>{const t=()=>{const o=te.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Re.fromRangeStart(e.selection.getRng());IG(o,r,e.schema).each(s8(e))};return Ia(fo.browser.isFirefox()&&e.selection.isEditable()&&LG(e.dom,e.selection.getRng().startContainer),t)},zG=(e,t)=>{O4([{keyCode:Et.SPACEBAR,action:yn(r8,e)},{keyCode:Et.SPACEBAR,action:yn(HG,e)}],t).each(o=>{t.preventDefault(),cS(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),aS(e,"insertText",{data:" "}))})},gQ=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||zG(e,t)})},G4=e=>uE(e)?[{keyCode:Et.TAB,action:yn(uF,e,!0)},{keyCode:Et.TAB,shiftKey:!0,action:yn(uF,e,!1)}]:[],VG=(e,t)=>{Np([...G4(e)],t).each(o=>{t.preventDefault()})},UG=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||VG(e,t)})},jG=e=>{if(e.addShortcut("Meta+P","","mcePrint"),ZZ(e),Bm(e))return Wt(null);{const t=pW(e);return $G(e),CI(e),_Z(e,t),oG(e,t),XF(e),gQ(e),NG(e),UG(e),RG(e,t),PG(e,t),t}},WG=(e,t)=>{const o=zx(e);o===null||uD(e,o)||e.undoManager.transact(()=>{Ye(t.styles)&&e.dom.setStyles(o,t.styles),Ye(t.attrs)&&Un(t.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},tN=(e,t)=>()=>{const o=zx(e);return X(o)&&o.nodeName===t},ZG=e=>{e.addCommand("InsertUnorderedList",(t,o)=>{SD(e,"UL",o)}),e.addCommand("InsertOrderedList",(t,o)=>{SD(e,"OL",o)}),e.addCommand("InsertDefinitionList",(t,o)=>{SD(e,"DL",o)}),e.addCommand("RemoveList",()=>{t4(e)}),e.addCommand("mceListUpdate",(t,o)=>{Ye(o)&&WG(e,o)}),e.addCommand("mceListBackspaceDelete",(t,o)=>{TD(e,o)}),e.addQueryStateHandler("InsertUnorderedList",tN(e,"UL")),e.addQueryStateHandler("InsertOrderedList",tN(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",tN(e,"DL"))},GG=e=>{e.on("keydown",t=>{t.keyCode===Et.BACKSPACE?TD(e,!1)&&t.preventDefault():t.keyCode===Et.DELETE&&TD(e,!0)&&t.preventDefault()})},a8=e=>e.type===3,c8=e=>e.length===0,qG=e=>{const t=(c,u)=>{const f=Oa.create("li");xe(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>a8(u)?[...c,u]:!c8(c)&&!a8(u)?(t(c,u),[]):c,r=Fo(e.children(),o,[]);c8(r)||t(r)},KG=e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",o=>xe(o,qG))})},YG=e=>{e.on("keydown",t=>{t.keyCode!==Et.TAB||Et.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?jx(e):c$(e))&&t.preventDefault()})})},XG=e=>{AC(e)&&YG(e)},ts=e=>{GG(e),ZG(e),KG(e),XG(e)};class QG{editor;lastPath=[];constructor(t){this.editor=t;let o;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",c=>{const u=t.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Wg(f,o))&&t.dispatch("SelectionChange"),o=f}),t.on("contextmenu",()=>{IE(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const c=t.selection.getStart(!0);c&&zC(t)&&!r.isSameElementPath(c)&&t.dom.isChildOf(c,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",c=>{!c.isDefaultPrevented()&&zC(t)&&(t.selection.getNode().nodeName==="IMG"?Id.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!oE(o)&&!au(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...t,element:c,parents:f})}}isSameElementPath(t){let o;const r=this.editor,c=ms(r.dom.getParents(t,He,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const nN="x-tinymce/html",q4=st(nN),mS="<!-- "+nN+" -->",l8=e=>mS+e,JG=e=>e.replace(mS,""),i8=e=>e.indexOf(mS)!==-1,eq=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),u8=(e,t)=>{let o="<"+e;const r=uc(t,(c,u)=>u+'="'+hl.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},K4=(e,t,o)=>{const r=e.split(/\n\n/),c=u8(t,o),u="</"+t+">",f=en(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:en(f,b).join("")},d8="%MCEPASTEBIN%",tq=(e,t)=>{const{dom:o,selection:r}=e,c=e.getBody();t.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},d8);fo.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},oN=(e,t)=>{const o=e.dom;if(sN(e)){let r;const c=t.get();for(;r=sN(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}t.set(null)},sN=e=>e.dom.get("mcepastebin"),nq=e=>X(e)&&e.id==="mcepastebin",oq=e=>{const t=e.dom,o=(f,b)=>{f.appendChild(b),t.remove(b,!0)},[r,...c]=ze(e.getBody().childNodes,nq);xe(c,f=>{o(r,f)});const u=t.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=t.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},m8=e=>e===d8,f8=e=>{const t=Wt(null);return{create:()=>tq(e,t),remove:()=>oN(e,t),getEl:()=>sN(e),getHtml:()=>oq(e),getLastRng:t.get}},g8=(e,t)=>(Je.each(t,o=>{lt(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),sq=e=>{const t=Ea(),o=Zv({},t);let r="";const c=t.getVoidElements(),u=Je.makeMap("script noscript style textarea video audio iframe object"," "),f=t.getBlockElements(),b=v=>{const S=v.name,O=v;if(S==="br"){r+=`
`;return}if(S!=="wbr"){if(c[S]&&(r+=" "),u[S]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in t.getVoidElements())){let R=v.firstChild;if(R)do b(R);while(R=R.next)}f[S]&&O.next&&(r+=`
`,S==="p"&&(r+=`
`))}};return e=g8(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},rN=e=>(e=g8(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Is],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),rq=e=>{let t=0;return()=>e+t++},aq=e=>{const t=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Je.hasOwn(o,t)?"image/"+o[t]:"image/"+t},cq=(e,t)=>{const o=Zv({sanitize:yv(e),sandbox_iframes:ip(e),sandbox_iframes_exclusions:Sm(e),convert_unsafe_embeds:wm(e)},e.schema);o.addNodeFilter("meta",c=>{Je.each(c,u=>{u.remove()})});const r=o.parse(t,{forced_root_block:!1,isRootContent:!0});return fp({validate:!0},e.schema).serialize(r)},Y4=(e,t)=>({content:e,cancelled:t}),lq=(e,t,o)=>{const r=e.dom.create("div",{style:"display:none"},t),c=Iw(e,r,o);return Y4(c.node.innerHTML,c.isDefaultPrevented())},h8=(e,t,o)=>{const r=$w(e,t,o),c=cq(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?lq(e,c,o):Y4(c,r.isDefaultPrevented())},iq=(e,t,o)=>h8(e,t,o),fS=(e,t)=>(e.insertContent(t,{merge:aE(e),paste:!0}),!0),aN=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),p8=(e,t)=>aN(t)&&po(kC(e),o=>Kr(t.toLowerCase(),`.${o.toLowerCase()}`)),uq=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),dq=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),mq=(e,t,o)=>!e.selection.isCollapsed()&&aN(t)?dq(e,t,o):!1,fq=(e,t,o)=>p8(e,t)?uq(e,t,o):!1,b8=(e,t)=>{Je.each([mq,fq,fS],o=>!o(e,t,fS))},gq=(e,t,o)=>{o||!xC(e)?fS(e,t):b8(e,t)},v8=rq("mceclip"),X4=e=>{const t=by();return YI(t,e),M4(t),t},Q4=(e,t,o,r,c)=>{const u=iq(e,t,o);if(!u.cancelled){const f=u.content,b=()=>gq(e,f,r);c?cS(e,"insertFromPaste",{dataTransfer:X4(f)}).isDefaultPrevented()||(b(),aS(e,"insertFromPaste")):b()}},wy=(e,t,o,r)=>{const c=o||i8(t);Q4(e,JG(t),c,!1,r)},cN=(e,t,o)=>{const r=e.dom.encode(t).replace(/\r\n/g,`
`),c=u0(r,K3(e)),u=K4(c,_r(e),ru(e));Q4(e,u,!1,!0,o)},y8=e=>{const t={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},nd=(e,t)=>t in e&&e[t].length>0,C8=e=>nd(e,"text/html")||nd(e,"text/plain"),Ey=(e,t)=>{const o=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return X(o)?e.dom.encode(o[1]):void 0},gS=(e,t,o,r)=>{const c=v8(),u=qw(e)&&X(o.name),f=u?Ey(e,o.name):c,b=u?o.name:void 0,v=t.create(c,o,r,f,b);return t.add(v),v},hq=(e,t)=>{R_(t.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=t.file,b=e.editorUpload.blobCache,S=b.getByData(u,r)??gS(e,b,f,u);wy(e,`<img src="${S.blobUri()}">`,!1,!0)})},pq=e=>e.type==="paste",Ty=e=>Promise.all(en(e,t=>N_(t).then(o=>({file:t,uri:o})))),bq=e=>{const t=kC(e);return o=>hn(o.type,"image/")&&po(t,r=>aq(r)===o.type)},lN=(e,t)=>{const o=t.items?xo(as(t.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=t.files?as(t.files):[];return ze(o.length>0?o:r,bq(e))},x8=(e,t,o)=>{const r=pq(t)?t.clipboardData:t.dataTransfer;if(vv(e)&&r){const c=lN(e,r);if(c.length>0)return t.preventDefault(),Ty(c).then(u=>{o&&e.selection.setRng(o),xe(u,f=>{hq(e,f)})}),!0}return!1},S8=e=>fo.os.isAndroid()&&e.clipboardData?.items?.length===0,w8=e=>Et.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,hS=(e,t,o,r,c)=>{let u=rN(o);const f=nd(t,q4())||i8(o),b=!f&&eq(u),v=aN(u);(m8(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(nd(t,"text/plain")&&b?u=t["text/plain"]:u=sq(u)),!m8(u)&&(r?cN(e,u,c):wy(e,u,f,c))},E8=(e,t,o)=>{let r;const c=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",u=>{w8(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||S8(u))return;const f=o.get()==="text"||r;r=!1;const b=y8(u.clipboardData);!C8(b)&&x8(e,u,c())||(nd(b,"text/html")?(u.preventDefault(),hS(e,b,b["text/html"],f,!0)):nd(b,"text/plain")&&nd(b,"text/uri-list")?(u.preventDefault(),hS(e,b,b["text/plain"],f,!0)):(t.create(),Id.setEditorTimeout(e,()=>{const v=t.getHtml();t.remove(),hS(e,b,v,f,!1)},0)))})},vq=e=>{const t=c=>hn(c,"webkit-fake-url"),o=c=>hn(c,"data:"),r=c=>c.data?.paste===!0;e.parser.addNodeFilter("img",(c,u,f)=>{if(!vv(e)&&r(f))for(const b of c){const v=b.attr("src");U(v)&&!b.attr("data-mce-object")&&v!==fo.transparentSrc&&(t(v)||!SC(e)&&o(v))&&b.remove()}})},yq=(e,t,o)=>{E8(e,t,o),vq(e)},T8=(e,t)=>{t.get()==="text"?(t.set("html"),Fw(e,!1)):(t.set("text"),Fw(e,!0)),e.focus()},Cq=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{T8(e,t)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&wy(e,r.html,r.internal,!1),r.text&&cN(e,r.text,!1)})},k8=(e,t,o)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",o),e.setData(q4(),t),!0}catch{return!1}else return!1},J4=(e,t,o,r)=>{k8(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):o(t.html,r)},iN=e=>(t,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},t);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),Id.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},A8=e=>({html:l8(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),xq=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),_8=e=>!e.selection.isCollapsed()||xq(e),O8=(e,t)=>o=>{!o.isDefaultPrevented()&&_8(e)&&e.selection.isEditable()&&J4(o,A8(e),iN(e),()=>{if(fo.browser.isChromium()||fo.browser.isFirefox()){const r=e.selection.getRng();Id.setEditorTimeout(e,()=>{e.selection.setRng(r),Gd(e,t)},0)}else Gd(e,t)})},uN=e=>t=>{!t.isDefaultPrevented()&&_8(e)&&J4(t,A8(e),iN(e),St)},Sq=(e,t)=>{e.on("cut",O8(e,t)),e.on("copy",uN(e))},dN=(e,t)=>_m.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),D8=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},R8=(e,t)=>{t&&e.selection.setRng(t),e.focus()},N8=e=>po(e.files,t=>/^image\//.test(t.type)),wq=(e,t,o,r)=>{const c=e.getParent(o,f=>Ks(t,f));if(!oe(e.getParent(o,"summary")))return!0;if(c&&kn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!oe(f.querySelector(c.nodeName.toLowerCase()))}else return!1},Eq=e=>{e.on("input",t=>{const o=r=>oe(r.querySelector("summary"));if(t.inputType==="deleteByDrag"){const r=ze(e.dom.select("details"),o);xe(r,c=>{Vs(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(bf().dom),c.prepend(u)})}})},ek=(e,t)=>{d5(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),vv(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&N8(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=dN(e,o);if(jt(r))return;const c=y8(o.dataTransfer),u=nd(c,q4());if((!C8(c)||D8(c))&&x8(e,o,r))return;const f=c[q4()],b=f||c["text/html"]||c["text/plain"],v=wq(e.dom,e.schema,r.startContainer,c),S=t.get();S&&!v||b&&(o.preventDefault(),Id.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||S&&v)&&e.execCommand("Delete"),R8(e,r);const O=rN(b);c["text/html"]?wy(e,O,u,!0):cN(e,O,!0)})}))}),e.on("dragstart",o=>{t.set(!0)}),e.on("dragover dragend",o=>{vv(e)&&!t.get()&&(o.preventDefault(),R8(e,dN(e,o))),o.type==="dragend"&&t.set(!1)}),Eq(e)},Tq=e=>{const t=c=>u=>{c(e,u)},o=j3(e);se(o)&&e.on("PastePreProcess",t(o));const r=W3(e);se(r)&&e.on("PastePostProcess",t(r))},kq=(e,t)=>{e.on("PastePreProcess",o=>{o.content=t(e,o.content,o.internal)})},M8=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,mN=e=>Je.trim(e).replace(M8,xi).toLowerCase(),Aq=(e,t,o)=>{const r=CC(e);if(o||r==="all"||!G3(e))return t;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,S,O)=>{const R=u.parseStyle(u.decode(S)),M={};for(let J=0;J<c.length;J++){const W=R[c[J]];let Q=W,ge=u.getStyle(f,c[J],!0);/color/.test(c[J])&&(Q=mN(Q),ge=mN(ge)),ge!==Q&&(M[c[J]]=W)}const H=u.serializeStyle(M,"span");return H?v+' style="'+H+'"'+O:v+O})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),t},_q=e=>{(fo.browser.isChromium()||fo.browser.isSafari())&&kq(e,Aq)},Oq=(e,t)=>{const o=Wt(!1),r=Wt(q3(e)?"text":"html"),c=f8(e);_q(e),Cq(e,r),Tq(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{Sq(e,t),ek(e,o),yq(e,c,r)})},Dq=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},Rq=e=>{e.parser.addNodeFilter("details",t=>{const o=lp(e);xe(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const o=xm(e);xe(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},P8=e=>{Dq(e),Rq(e)},Nq=Vs,B8=tt,Mq=e=>Ts(e.dom),Pq=e=>ml(e.dom),$8=e=>t=>Qn(te.fromDom(e),t),Bq=(e,t,o)=>jo(te.fromDom(e),r=>Pq(r)||o.isBlock(Hn(r)),$8(t)).getOr(te.fromDom(t)).dom,I8=(e,t)=>jo(te.fromDom(e),Mq,$8(t)),F8=(e,t,o)=>{const r=new er(e,t),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!Nq(f);f=c())Ns(f)&&(u=f);return u},L8=(e,t,o)=>{const c=Re.fromRangeStart(e).getNode(),u=Bq(c,t,o),f=F8(c,u,!1),b=F8(c,u,!0),v=document.createRange();return I8(f,u).fold(()=>{B8(f)?v.setStart(f,0):v.setStartBefore(f)},S=>v.setStartBefore(S.dom)),I8(b,u).fold(()=>{B8(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},S=>v.setEndAfter(S.dom)),v},H8=e=>{const t=L8(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(D_(t))},$q=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),H8(e))})};var ky;(function(e){e.Before="before",e.After="after"})(ky||(ky={}));const Iq=(e,t)=>Math.abs(e.left-t),pS=(e,t)=>Math.abs(e.right-t),Fq=(e,t)=>e>=t.top&&e<=t.bottom,Lq=(e,t)=>e.top<t.bottom&&e.bottom>t.top,z8=(e,t)=>{const o=fw(e,t)/Math.min(e.height,t.height);return Lq(e,t)&&o>.5},Hq=(e,t)=>{const o=ze(e,r=>Fq(t,r));return D1(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=rt(e,f=>z8(f,r));return[c,u]})},zq=(e,t)=>({node:e.node,position:Iq(e,t)<pS(e,t)?ky.Before:ky.After}),Vq=(e,t,o)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),fN=(e,t,o,r)=>{const c=R=>Ns(R.node)?P.some(R):pt(R.node)?fN(as(R.node.childNodes),t,o,!1):P.none(),u=(R,M,H)=>c(M).filter(J=>Math.abs(H(R,t,o)-H(J,t,o))<2&&tt(J.node)),f=(R,M)=>{const H=kl(R,(J,W)=>M(J,t,o)-M(W,t,o));return lc(H,c).map(J=>r&&!tt(J.node)&&H.length>1?u(J,H[1],M).getOr(J):J)},[b,v]=Hq(XD(e),o),{pass:S,fail:O}=rt(v,R=>R.top<o);return f(b,Vq).orThunk(()=>f(O,I2)).orThunk(()=>f(S,I2))},Uq=(e,t,o,r)=>{const c=(u,f)=>{const b=S=>pt(S)&&S.classList.contains("mce-drag-container"),v=ze(u.dom.childNodes,bt(b));return f.fold(()=>fN(v,o,r,!0),S=>{const O=ze(v,R=>R!==S.dom);return fN(O,o,r,!0)}).orThunk(()=>(Qn(u,e)?P.none():Lc(u)).bind(O=>c(O,P.some(u))))};return c(t,P.none())},tk=(e,t,o)=>{const r=te.fromDom(e),c=Bl(r),f=te.fromPoint(c,t,o).filter(b=>ec(r,b)).getOr(r);return Uq(r,f,t,o)},gN=(e,t,o)=>tk(e,t,o).filter(r=>nb(r.node)).map(r=>zq(r,t)),hN=e=>{const t=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,c=o.defaultView;return{top:t.top+(c?.scrollY??0)-r.clientTop,left:t.left+(c?.scrollX??0)-r.clientLeft}},jq=e=>e.inline?hN(e.getBody()):{left:0,top:0},Wq=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Zq=e=>{const t=e.getBody(),o=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},c={left:t.scrollLeft||o.scrollLeft,top:t.scrollTop||o.scrollTop};return e.inline?r:c},hQ=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const o=hN(e.getContentAreaContainer()),r=Zq(e);return{left:t.pageX-o.left+r.left,top:t.pageY-o.top+r.top}}return{left:t.pageX,top:t.pageY}},Gq=(e,t,o)=>({pageX:o.left-e.left+t.left,pageY:o.top-e.top+t.top}),qq=(e,t)=>Gq(jq(e),Wq(e),hQ(e,t)),nk=e=>({target:e,srcElement:e}),ok=(e,t,o,r)=>({...t,dataTransfer:r,type:e,...nk(o)}),Kq=(e,t,o)=>{const r=cn("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:St,stopImmediatePropagation:St,stopPropagation:St,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...nk(t)}},Yq=(e,t)=>{const o=fZ(e);return t==="dragstart"?(UI(o),AR(o)):t==="drop"?(iZ(o),M4(o)):(uZ(o),_R(o)),o},Xq=(e,t,o,r)=>{const c=Yq(o,e);return Gn(r)?Kq(e,t,c):ok(e,r,t,c)},bS=32,Qq=100,Ay=8,vS=16,V8=Ts,Jq=F2(V8,ml),U8=(e,t,o)=>V8(o)&&o!==t&&e.isEditable(o.parentElement),eK=(e,t,o)=>jt(t)||t===o||e.dom.isChildOf(t,o)?!1:e.dom.isEditable(t),pQ=(e,t,o,r)=>{const c=e.dom,u=t.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},tK=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},sk=(e,t)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+t,behavior:"smooth"})},j8=sk("left",-bS),pN=sk("left",bS),rk=sk("top",-bS),yS=sk("top",bS),W8=(e,t,o,r,c,u,f,b,v,S,O,R)=>{let M=0,H=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+o>c&&(M=t.pageX+o-c),t.pageY+r>u&&(H=t.pageY+r-u),e.style.width=o-M+"px",e.style.height=r-H+"px";const J=v.clientHeight,W=v.clientWidth,Q=f+v.getBoundingClientRect().top,ge=b+v.getBoundingClientRect().left;O.on(be=>{be.intervalId.clear(),be.dragging&&R&&(f+Ay>=J?be.intervalId.set(yS(S)):f-Ay<=0?be.intervalId.set(rk(S)):b+Ay>=W?be.intervalId.set(pN(S)):b-Ay<=0?be.intervalId.set(j8(S)):Q+vS>=window.innerHeight?be.intervalId.set(yS(window)):Q-vS<=0?be.intervalId.set(rk(window)):ge+vS>=window.innerWidth?be.intervalId.set(pN(window)):ge-vS<=0&&be.intervalId.set(j8(window)))})},Z8=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},nK=(e,t)=>{const o=e.getParent(t.parentNode,e.isBlock);Z8(t),o&&o!==e.getRoot()&&e.isEmpty(o)&&vf(te.fromDom(o))},oK=e=>e.button===0,sK=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),G8=(e,t)=>o=>{if(oK(o)){const r=Oo(t.dom.getParents(o.target),Jq).getOr(null);if(X(r)&&U8(t.dom,t.getBody(),r)){const c=t.dom.getPos(r),u=t.getBody(),f=t.getDoc().documentElement;e.set({element:r,dataTransfer:by(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(t.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(t.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:pQ(t,r,r.offsetWidth,r.offsetHeight),intervalId:Jd(Qq)})}}},rK=(e,t,o)=>{e._selectionOverrides.hideFakeCaret(),gN(e.getBody(),t,o).fold(()=>e.selection.placeCaretAt(t,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===ky.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(t,o)})},_y=(e,t,o,r,c)=>{t==="dragstart"&&YI(r,e.dom.getOuterHTML(o));const u=Xq(t,o,r,c);return e.dispatch(t,u)},aK=(e,t)=>{const o=vt((c,u)=>rK(t,c,u),0);t.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=_y(t,"dragstart",u.element,u.dataTransfer,c);if(X(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,t.focus()}if(u.dragging){const b=c.currentTarget===t.getDoc().documentElement,v=sK(u,qq(t,c));tK(u.ghost,t.getBody()),W8(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,t.getContentAreaContainer(),t.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},cK=e=>{const t=e.getSel();if(X(t)){const r=t.getRangeAt(0).startContainer;return tt(r)?r.parentNode:r}else return null},bN=(e,t)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(eK(t,cK(t.selection),r.element)){const c=t.getDoc().elementFromPoint(o.clientX,o.clientY)??t.getBody();_y(t,"drop",c,r.dataTransfer,o).isDefaultPrevented()||t.undoManager.transact(()=>{nK(t.dom,r.element),KI(r.dataTransfer).each(f=>t.insertContent(f)),t._selectionOverrides.hideFakeCaret()})}_y(t,"dragend",t.getBody(),r.dataTransfer,o)}}),q8(e)},vN=(e,t,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>_y(t,"dragend",r.element,r.dataTransfer),c=>_y(t,"dragend",r.element,r.dataTransfer,c))}),q8(e)},bQ=(e,t)=>o=>vN(e,t,P.some(o)),q8=e=>{e.on(t=>{t.intervalId.clear(),Z8(t.ghost)}),e.clear()},K8=e=>{const t=Pc(),o=lo.DOM,r=document,c=G8(t,e),u=aK(t,e),f=bN(t,e),b=bQ(t,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===Et.ESC&&vN(t,e,P.none())})},lK=e=>{const t=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Lt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&WT(e,"Dropped file type is not supported"))}},o=c=>{HE(e,c.target)&&t(c)},r=()=>{const c=lo.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];xe(v,S=>{c.bind(f,S,o),u.bind(b,S,t)}),e.on("remove",()=>{xe(v,S=>{c.unbind(f,S,o),u.unbind(b,S,t)})})};e.on("init",()=>{Id.setEditorTimeout(e,r,0)})},yN=e=>{K8(e),H3(e)&&lK(e)},iK=e=>{const t=vt(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=oh(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},uK=e=>{e.on("init",()=>{e.on("focusin",t=>{const o=t.target;if(yi(o)){const r=Om(e.getBody(),o),c=Ts(r)?r:o;e.selection.getNode()!==c&&zf(e,c).each(u=>e.selection.setRng(u))}})})},CS=Ts,CN=(e,t)=>Om(e.getBody(),t),ak=e=>{const t=e.selection,o=e.dom,r=e.getBody(),c=An(e,r,o.isBlock,()=>Fv(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=Me=>X(Me)&&o.hasClass(Me,"mce-offscreen-selection"),S=Me=>Me!==r&&(CS(Me)||yi(Me))&&o.isChildOf(Me,r)&&o.isEditable(Me.parentNode),O=Me=>{Me&&t.setRng(Me)},R=(Me,Te,$e,yt=!0)=>e.dispatch("ShowCaret",{target:Te,direction:Me,before:$e}).isDefaultPrevented()?null:(yt&&t.scrollIntoView(Te,Me===-1),c.show($e,Te)),M=Me=>{Me.hasAttribute("data-mce-caret")&&(tu(Me),t.scrollIntoView(Me))},H=()=>{e.on("click",Te=>{o.isEditable(Te.target)||(Te.preventDefault(),e.focus())}),e.on("blur NewBlock",je),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Te=>{const $e=Te.target,yt=CN(e,$e);CS(yt)?(Te.preventDefault(),zf(e,yt).each(Be)):S($e)&&zf(e,$e).each(Be)},!0),e.on("mousedown",Te=>{const $e=Te.target;if($e!==r&&$e.nodeName!=="HTML"&&!o.isChildOf($e,r)||!KV(e,Te.clientX,Te.clientY))return;je(),Kt();const yt=CN(e,$e);CS(yt)?(Te.preventDefault(),zf(e,yt).each(Be)):gN(r,Te.clientX,Te.clientY).each(Sn=>{Te.preventDefault();const wn=R(1,Sn.node,Sn.position===ky.Before,!1);O(wn),Vc(yt)?yt.focus():e.getBody().focus()})}),e.on("keypress",Te=>{Et.modifierPressed(Te)||CS(t.getNode())&&Te.preventDefault()}),e.on("GetSelectionRange",Te=>{let $e=Te.range;if(b){if(!b.parentNode){b=null;return}$e=$e.cloneRange(),$e.selectNode(b),Te.range=$e}}),e.on("focusin",Te=>{if(!yi(Te.target)&&e.getBody().contains(Te.target)&&Te.target!==e.getBody()&&!e.dom.isEditable(Te.target.parentNode)){c.isShowing()&&c.hide(),Te.target.contains(e.selection.getNode())||(e.selection.select(Te.target,!0),e.selection.collapse(!0));const $e=Be(e.selection.getRng(),!0);$e&&e.selection.setRng($e)}}),e.on("SetSelectionRange",Te=>{Te.range=Q(Te.range);const $e=Be(Te.range,Te.forward);$e&&(Te.range=$e)});const Me=Te=>pt(Te)&&Te.id==="mcepastebin";e.on("AfterSetSelectionRange",Te=>{const $e=Te.range,yt=$e.startContainer.parentElement;!W($e)&&!Me(yt)&&Kt(),v(yt)||je()}),yN(e),iK(e),uK(e)},J=Me=>Wl(Me)||vl(Me)||yf(Me),W=Me=>J(Me.startContainer)||J(Me.endContainer),Q=Me=>{const Te=e.schema.getVoidElements(),$e=o.createRng(),yt=Me.startContainer,Sn=Me.startOffset,wn=Me.endContainer,uo=Me.endOffset;return kn(Te,yt.nodeName.toLowerCase())?Sn===0?$e.setStartBefore(yt):$e.setStartAfter(yt):$e.setStart(yt,Sn),kn(Te,wn.nodeName.toLowerCase())?uo===0?$e.setEndBefore(wn):$e.setEndAfter(wn):$e.setEnd(wn,uo),$e},ge=(Me,Te)=>{const $e=te.fromDom(e.getBody()),yt=e.getDoc(),Sn=Ki($e,"#"+u).getOrThunk(()=>{const qo=te.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',yt);return ws(qo,"id",u),bo($e,qo),qo}),wn=o.createRng();Fl(Sn),il(Sn,[te.fromText(Is,yt),te.fromDom(Te),te.fromText(Is,yt)]),wn.setStart(Sn.dom.firstChild,1),wn.setEnd(Sn.dom.lastChild,0),bc(Sn,{top:o.getPos(Me,e.getBody()).y+"px"}),cg(Sn);const uo=t.getSel();return uo&&(uo.removeAllRanges(),uo.addRange(wn)),wn},be=Me=>{const Te=e.getDoc().createElement("div");Te.style.width=Me.style.width,Te.style.height=Me.style.height;const $e=Me.getAttribute("width");$e&&Te.setAttribute("width",$e);const yt=Me.getAttribute("height");return yt&&Te.setAttribute("height",yt),Te},ve=Me=>{const Te=g1(Me)?be(Me):Me.cloneNode(!0),$e=e.dispatch("ObjectSelected",{target:Me,targetClone:Te});if($e.isDefaultPrevented())return null;const yt=ge(Me,$e.targetClone),Sn=te.fromDom(Me);return xe(Ne(te.fromDom(e.getBody()),`*[${f}]`),wn=>{Qn(Sn,wn)||rr(wn,f)}),o.getAttrib(Me,f)||Me.setAttribute(f,"1"),b=Me,Kt(),yt},Be=(Me,Te)=>{if(!Me)return null;if(Me.collapsed){if(!W(Me)){const wn=Te?1:-1,uo=Rf(wn,r,Me),qo=uo.getNode(!Te);if(X(qo)){if(nb(qo))return R(wn,qo,Te?!uo.isAtEnd():!1,!1);if(Iu(qo)&&Ts(qo.nextSibling)){const Bs=o.createRng();return Bs.setStart(qo,0),Bs.setEnd(qo,0),Bs}}const Cs=uo.getNode(Te);if(X(Cs)){if(nb(Cs))return R(wn,Cs,Te?!1:!uo.isAtEnd(),!1);if(Iu(Cs)&&Ts(Cs.previousSibling)){const Bs=o.createRng();return Bs.setStart(Cs,1),Bs.setEnd(Cs,1),Bs}}}return null}let $e=Me.startContainer,yt=Me.startOffset;const Sn=Me.endOffset;if(tt($e)&&yt===0&&CS($e.parentNode)&&($e=$e.parentNode,yt=o.nodeIndex($e),$e=$e.parentNode),!pt($e))return null;if(Sn===yt+1&&$e===Me.endContainer){const wn=$e.childNodes[yt];if(S(wn))return ve(wn)}return null},je=()=>{b&&b.removeAttribute(f),Ki(te.fromDom(e.getBody()),"#"+u).each(Ko),b=null},xt=()=>{c.destroy(),b=null},Kt=()=>{c.hide()};return Bm(e)||H(),{showCaret:R,showBlockCaretContainer:M,hideFakeCaret:Kt,destroy:xt}},Y8=(e,t)=>{let o=t;for(let r=e.previousSibling;tt(r);r=r.previousSibling)o+=r.data.length;return o},xN=(e,t,o,r,c)=>{if(tt(o)&&(r<0||r>o.data.length))return[];const u=c&&tt(o)?[Y8(o,r)]:[r];let f=o;for(;f!==t&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===t?u.reverse():[]},SN=(e,t,o,r,c,u,f=!1)=>{const b=xN(e,t,o,r,f),v=xN(e,t,c,u,f);return{start:b,end:v}},X8=(e,t)=>{const o=t.slice(),r=o.pop();return os(r)?Fo(o,(u,f)=>u.bind(b=>P.from(b.childNodes[f])),P.some(e)).bind(u=>tt(u)&&(r<0||r>u.data.length)?P.none():P.some({node:u,offset:r})):P.none()},wN=(e,t)=>X8(e,t.start).bind(({node:o,offset:r})=>X8(e,t.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),dK=(e,t,o,r=!1)=>SN(e,t,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Oy=(e,t,o)=>{if(t&&e.isEmpty(t)&&!o(t)){const r=t.parentNode;e.remove(t,tt(t.firstChild)&&kh(t.firstChild.data)),Oy(e,r,o)}},ck=(e,t,o,r=!0)=>{const c=t.startContainer.parentNode,u=t.endContainer.parentNode;t.deleteContents(),r&&!o(t.startContainer)&&(tt(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),tt(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Oy(e,c,o),c!==u&&Oy(e,u,o))},Dy=(e,t)=>P.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),EN=(e,t,o)=>{const r=e.dynamicPatternsLookup({text:o,block:t});return{...e,blockPatterns:E3(r).concat(e.blockPatterns),inlinePatterns:z1(r).concat(e.inlinePatterns)}},TN=(e,t,o,r)=>{const c=e.createRng();return c.setStart(t,0),c.setEnd(o,r),c.toString()},Q8=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),lk=(e,t)=>{const o=e.createRng();return o.setStartAfter(t.start),o.setEndBefore(t.end),o},J8=(e,t,o)=>{const r=wN(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,S=f.parentNode;return{prefix:t,end:S.insertBefore(Q8(e,t+"-end"),f),start:v.insertBefore(Q8(e,t+"-start"),b)}},eL=(e,t,o)=>{Oy(e,e.get(t.prefix+"-end"),o),Oy(e,e.get(t.prefix+"-start"),o)},xS=e=>e.start.length===0,mK=e=>(t,o)=>{const c=t.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},tL=(e,t,o,r)=>{const c=t.start;return LR(e,r.container,r.offset,mK(c),o).bind(f=>{const b=o.textContent?.indexOf(c)??-1;if(b!==-1&&f.offset>=b+c.length){const S=e.createRng();return S.setStart(f.container,f.offset-c.length),S.setEnd(f.container,f.offset),P.some(S)}else{const S=f.offset-c.length;return IR(f.container,S,o).map(O=>{const R=e.createRng();return R.setStart(O.container,O.offset),R.setEnd(f.container,f.offset),R}).filter(O=>O.toString()===c).orThunk(()=>tL(e,t,o,Vm(f.container,0)))}})},fK=(e,t,o,r,c,u=!1)=>{if(t.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),P.some(f)}return BR(o,r,c).bind(f=>tL(e,t,c,f).bind(v=>{if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return P.none();if(f.offset===0&&v.endContainer.textContent?.length===v.endOffset)return P.none()}return P.some(v)}))},nL=(e,t,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return IR(b,v-o.pattern.end.length,t).bind(S=>{const O=SN(c,u,S.container,S.offset,b,v,r);if(xS(f))return P.some({matches:[{pattern:f,startRng:O,endRng:O}],position:S});{const R=ik(e,o.remainingPatterns,S.container,S.offset,t,r),M=R.getOr({matches:[],position:S}),H=M.position;return fK(c,f,H.container,H.offset,t,R.isNone()).map(W=>{const Q=dK(c,u,W,r);return{matches:M.matches.concat([{pattern:f,startRng:Q,endRng:O}]),position:Vm(W.startContainer,W.startOffset)}})}})},ik=(e,t,o,r,c,u)=>{const f=e.dom;return BR(o,r,f.getRoot()).bind(b=>{const v=TN(f,c,o,r);for(let S=0;S<t.length;S++){const O=t[S];if(!Kr(v,O.end))continue;const R=t.slice();R.splice(S,1);const M=nL(e,c,{pattern:O,remainingPatterns:R,position:b},u);if(M.isNone()&&r>0)return ik(e,t,o,r-1,c,u);if(M.isSome())return M}return P.none()})},oL=(e,t,o)=>{e.selection.setRng(o),t.type==="inline-format"?xe(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},gK=(e,t,o,r)=>{const c=lk(e.dom,o);ck(e.dom,c,r),oL(e,t,c)},hK=(e,t,o,r,c)=>{const u=e.dom,f=lk(u,r),b=lk(u,o);ck(u,b,c),ck(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},S=lk(u,v);oL(e,t,S)},pK=(e,t)=>{const o=or("mce_textpattern"),r=qn(t,(c,u)=>{const f=J8(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return qn(r,(c,u)=>{const f=r.length-c.length-1,b=xS(u.pattern)?u.endMarker:J8(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},bK=e=>kl(e,(t,o)=>o.end.length-t.end.length),vK=(e,t)=>{const o=Ka(e,r=>po(t,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===t.length?o?e:t:e.length>t.length?e:t},sL=(e,t,o,r,c,u)=>{const f=ik(e,c.inlinePatterns,o,r,t,u).fold(()=>[],v=>v.matches),b=ik(e,bK(c.inlinePatterns),o,r,t,u).fold(()=>[],v=>v.matches);return vK(f,b)},kN=(e,t)=>{if(t.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=pK(o,t);xe(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;xS(u.pattern)?gK(e,u.pattern,u.endMarker,b):hK(e,u.pattern,u.startMarker,u.endMarker,b),eL(o,u.endMarker,b),eL(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},rL=(e,t,o)=>$R(t,0,t).map(r=>{const c=r.container;return FR(c,o.start.length,t).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),ck(e,f,b=>b===t)}),c}),uk=e=>(t,o)=>{const r=t.dom,c=o.pattern,u=wN(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const S=v.get(b);return Ot(S)&&Ws(S).exists(O=>kn(O,"block"))};return Dy(t,u).each(b=>{c.type==="block-format"?f(c.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,b,c),t.formatter.apply(c.format)}):c.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,b,c),t.execCommand(c.cmd,!1,c.value)})}),!0},yK=e=>kl(e,(t,o)=>o.start.length-t.start.length),aL=e=>(t,o)=>{const r=yK(t),c=o.replace(Is," ");return Oo(r,u=>e(u,o,c))},cL=(e,t)=>(o,r,c,u,f=r.textContent??"")=>{const b=o.dom,v=_r(o);return b.is(r,v)?e(c.blockPatterns,f).map(S=>t&&Je.trim(f).length===S.start.length?[]:[{pattern:S,range:SN(b,b.getRoot(),r,0,r,0,u)}]).getOr([]):[]},CK=e=>/^\s[^\s]/.test(e),xK=uk((e,t,o)=>{rL(e,t,o).each(r=>{const c=te.fromDom(r),u=Sa(c);CK(u)&&r1(c,u.slice(1))})}),dk=aL((e,t,o)=>t.indexOf(e.start)===0||o.indexOf(e.start)===0),SK=cL(dk,!0),wK=(e,t)=>{const o=e.selection.getRng();return Dy(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=EN(t,r,r.textContent??""),f=sL(e,r,o.startContainer,c,u,!0),b=SK(e,r,u,!0);return{inlineMatches:f,blockMatches:b}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},EK=(e,t)=>{if(t.length===0)return;const o=e.selection.getBookmark();xe(t,r=>xK(e,r)),e.selection.moveToBookmark(o)},TK=uk(rL),kK=aL((e,t,o)=>t===e.start||o===e.start),AK=cL(kK,!1),_K=(e,t)=>{const o=e.selection.getRng();return Dy(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=TN(e.dom,r,o.startContainer,c),f=EN(t,r,u);return AK(e,r,f,!1,u)}).filter(r=>r.length>0)},OK=(e,t)=>{xe(t,o=>TK(e,o))},DK=(e,t)=>wK(e,t).fold(ye,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{B0(e),kN(e,o),EK(e,r);const c=e.selection.getRng(),u=BR(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Bc&&(b.deleteData(f.offset-1,1),Oy(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),lL=(e,t)=>{const o=e.selection.getRng();Dy(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=TN(e.dom,r,o.startContainer,c),f=EN(t,r,u),b=sL(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{kN(e,b)})})},RK=(e,t)=>_K(e,t).fold(ye,o=>(e.undoManager.transact(()=>{OK(e,o)}),!0)),AN=(e,t,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},NK=(e,t)=>AN(e,t,(o,r)=>o===r.keyCode&&!Et.modifierPressed(r)),MK=(e,t)=>AN(e,t,(o,r)=>o.charCodeAt(0)===r.charCode),iL=e=>{const t=[",",".",";",":","!","?"],o=[32],r=()=>T3(cE(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),Xt(e)),c=()=>cp(e);e.on("keydown",f=>{if(f.keyCode===13&&!Et.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=V1(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&DK(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=V1(r(),"space");(b.blockPatterns.length>0||c())&&RK(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=V1(r(),"space");(f.inlinePatterns.length>0||c())&&lL(e,f)}};e.on("keyup",f=>{NK(o,f)&&u()}),e.on("keypress",f=>{MK(t,f)&&Id.setEditorTimeout(e,u)})},SS=e=>{iL(e)},PK=e=>{const t=Je.each,o=Et.BACKSPACE,r=Et.DELETE,c=e.dom,u=e.selection,f=e.parser,b=fo.browser,v=b.isFirefox(),S=b.isChromium()||b.isSafari(),O=fo.deviceType.isiPhone()||fo.deviceType.isiPad(),R=fo.os.isMacOS()||fo.os.isiOS(),M=(Le,dt)=>{try{e.getDoc().execCommand(Le,!1,String(dt))}catch{}},H=Le=>Le.isDefaultPrevented(),J=()=>{const Le=$t=>{const to=c.create("body"),Zn=$t.cloneContents();return to.appendChild(Zn),u.serializer.serialize(to,{format:"html"})},dt=$t=>{const to=Le($t),Zn=c.createRng();Zn.selectNode(e.getBody());const Jo=Le(Zn);return to===Jo};e.on("keydown",$t=>{const to=$t.keyCode;if(!H($t)&&(to===r||to===o)&&e.selection.isEditable()){const Zn=e.selection.isCollapsed(),Jo=e.getBody();if(Zn&&!on(e.schema,Jo)||!Zn&&!dt(e.selection.getRng()))return;$t.preventDefault(),e.setContent(""),Jo.firstChild&&c.isBlock(Jo.firstChild)?e.selection.setCursorLocation(Jo.firstChild,0):e.selection.setCursorLocation(Jo,0),e.nodeChanged()}})},W=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},Q=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Le=>{let dt;if(Le.target===e.getDoc().documentElement)if(dt=u.getRng(),e.getDoc().getSelection()?.anchorNode!==null&&e.getBody().focus(),Le.type==="mousedown"){if(Wl(dt.startContainer))return;u.placeCaretAt(Le.clientX,Le.clientY)}else u.setRng(dt)})},ge=()=>{e.on("keydown",Le=>{if(!H(Le)&&Le.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const dt=u.getNode(),$t=dt.previousSibling;if(dt.nodeName==="HR"){c.remove(dt),Le.preventDefault();return}$t&&$t.nodeName&&$t.nodeName.toLowerCase()==="hr"&&(c.remove($t),Le.preventDefault())}}})},be=()=>{Range.prototype.getClientRects||e.on("mousedown",Le=>{if(!H(Le)&&Le.target.nodeName==="HTML"){const dt=e.getBody();dt.blur(),Id.setEditorTimeout(e,()=>{dt.focus()})}})},ve=()=>{const Le=pv(e);e.on("click",dt=>{const $t=dt.target;/^(IMG|HR)$/.test($t.nodeName)&&c.isEditable($t)&&(dt.preventDefault(),e.selection.select($t),e.nodeChanged()),$t.nodeName==="A"&&c.hasClass($t,Le)&&$t.childNodes.length===0&&c.isEditable($t.parentNode)&&(dt.preventDefault(),u.select($t))})},Be=()=>{const Le=dt=>dt.nodeName==="IMG"&&e.dom.isEditable(dt);e.on("mousedown",dt=>{Qs(P.from(dt.clientX),P.from(dt.clientY),($t,to)=>{const Zn=e.getDoc().caretPositionFromPoint($t,to),Jo=Zn?.offsetNode?.childNodes[Zn.offset-(Zn.offset>0?1:0)]||Zn?.offsetNode;if(X(Jo)&&Le(Jo)){const Oi=Jo.getBoundingClientRect();dt.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(Jo),dt.clientX<Oi.left||dt.clientY<Oi.top?e.selection.collapse(!0):(dt.clientX>Oi.right||dt.clientY>Oi.bottom)&&e.selection.collapse(!1)}})})},je=()=>{const Le=()=>{const $t=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const to=u.getStart();to!==e.getBody()&&(c.setAttrib(to,"style",null),t($t,Zn=>{to.setAttributeNode(Zn.cloneNode(!0))}))}},dt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",$t=>{let to;return!H($t)&&($t.keyCode===8||$t.keyCode===46)&&dt()?(to=Le(),e.getDoc().execCommand("delete",!1),to(),$t.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",$t=>{if(!H($t)&&dt()){const to=Le();Id.setEditorTimeout(e,()=>{to()})}})},xt=()=>{e.on("keydown",Le=>{if(!H(Le)&&Le.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const dt=u.getNode().previousSibling;if(dt&&dt.nodeName&&dt.nodeName.toLowerCase()==="table")return Le.preventDefault(),!1}return!0})},Kt=()=>{e.on("keydown",Le=>{if(H(Le)||Le.keyCode!==Et.BACKSPACE)return;let dt=u.getRng();const $t=dt.startContainer,to=dt.startOffset,Zn=c.getRoot();let Jo=$t;if(!(!dt.collapsed||to!==0)){for(;Jo.parentNode&&Jo.parentNode.firstChild===Jo&&Jo.parentNode!==Zn;)Jo=Jo.parentNode;Jo.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Jo),dt=c.createRng(),dt.setStart($t,0),dt.setEnd($t,0),u.setRng(dt))}})},Me=()=>{const Le=gr("figcaption");e.on("keydown",dt=>{if(dt.keyCode===Et.LEFT||dt.keyCode===Et.RIGHT){const $t=te.fromDom(e.selection.getNode());Le($t)&&e.selection.isCollapsed()&&tc($t).bind(to=>e.selection.getRng().startOffset===0&&dt.keyCode===Et.LEFT?al(to):e.selection.getRng().endOffset===$t.dom.textContent?.length&&dt.keyCode===Et.RIGHT?nc(to):P.none()).each(to=>{e.selection.setCursorLocation(to.dom,0)})}})},Te=()=>{const Le=()=>{M("StyleWithCSS",!1),M("enableInlineTableEditing",!1),eE(e)||M("enableObjectResizing",!1)};K1(e)||e.on("BeforeExecCommand mousedown",Le)},$e=()=>{const Le=()=>{t(c.select("a:not([data-mce-block])"),dt=>{let $t=dt.parentNode;const to=c.getRoot();if($t?.lastChild===dt){for(;$t&&!c.isBlock($t);){if($t.parentNode?.lastChild!==$t||$t===to)return;$t=$t.parentNode}c.add($t,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",dt=>{(dt.type==="setcontent"||dt.command==="mceInsertLink")&&Le()})},yt=()=>{e.on("init",()=>{M("DefaultParagraphSeparator",_r(e))})},Sn=Le=>{const dt=Le.getBody(),$t=Le.selection.getRng();return $t.startContainer===$t.endContainer&&$t.startContainer===dt&&$t.startOffset===0&&$t.endOffset===dt.childNodes.length},wn=()=>{e.on("keyup focusin mouseup",Le=>{!Et.modifierPressed(Le)&&!Sn(e)&&u.normalize()},!0)},uo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},qo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Cs=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Le=>{let dt;Le.target.nodeName==="HTML"&&(dt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(dt),e.selection.normalize(),e.nodeChanged())}))},Bs=()=>{R&&e.on("keydown",Le=>{Et.metaKeyPressed(Le)&&!Le.shiftKey&&(Le.keyCode===37||Le.keyCode===39)&&(Le.preventDefault(),e.selection.getSel().modify("move",Le.keyCode===37?"backward":"forward","lineboundary"))})},Na=()=>{e.on("click",Le=>{let dt=Le.target;do if(dt.tagName==="A"){Le.preventDefault();return}while(dt=dt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},_i=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Le=>{Le.preventDefault()})})},At=()=>{f.addNodeFilter("br",Le=>{let dt=Le.length;for(;dt--;)Le[dt].attr("class")==="Apple-interchange-newline"&&Le[dt].remove()})},sn=St,Ho=()=>{if(!v||e.removed)return!1;const Le=e.selection.getSel();return!Le||!Le.rangeCount||Le.rangeCount===0},Ao=()=>{S&&(Q(),ve(),_i(),W(),O&&(qo(),Cs(),Na())),v&&(be(),Te(),uo(),Bs())},qa=()=>{Kt(),J(),fo.windowsPhone||wn(),S&&(Q(),ve(),yt(),_i(),xt(),At(),O?(qo(),Cs(),Na()):W()),v&&(Me(),Be(),ge(),be(),je(),Te(),$e(),uo(),Bs(),xt())};return Bm(e)?Ao():qa(),{refreshContentEditable:sn,isHidden:Ho}};class _N extends Error{url;constructor(t,o){super(t),this.url=o}}const ON={},BK=(e,t,o)=>new Promise((r,c)=>{const u=te.fromTag("script");ta(u,{type:"text/javascript",src:e,...o});const f=()=>{Ko(u)};ag(u,"load",()=>{f(),r()}),ag(u,"error",()=>{f(),c(new Error(`Failed to load script url: ${e}`))}),bo(Xp(t),u)}),uL=async(e,t)=>{const o=Ro.ScriptLoader.getScriptAttributes(e);return await BK(e,t,o).catch(()=>Promise.reject(new _N(`Failed to load component url: ${e}`,e))),e},$K=e=>uc(e,(t,o)=>Zo(ON,t).getOrThunk(()=>{if(jt(window.customElements.get(o))){const r=uL(t,bh());return ON[t]=r,r}else return Promise.resolve(t)}).catch(r=>(delete ON[t],Promise.reject(r)))),dL=(e,t)=>{const o=Ya(Ba(e));return en(o,r=>uL(r,te.fromDom(t)))},IK=e=>{const t=e.schema.getComponentUrls();return e.inline?$K(t):dL(t,e.getDoc())},mL=async e=>{const t=IK(e),o=ze(await Promise.allSettled(t),r=>r.status==="rejected");o.length>0&&xe(o,r=>{if(r.reason instanceof _N){const{url:c}=r.reason;JV(e,c)}})},FK=e=>{mL(e)},DN=lo.DOM,LK=(e,t)=>{const o=te.fromDom(e.getBody()),r=Qp(Lr(o)),c=te.fromTag("style");ws(c,"type","text/css"),bo(c,te.fromText(t)),bo(r,c),e.on("remove",()=>{Ko(c)})},HK=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,RN=e=>Pi(e,t=>Gn(t)===!1),fL=e=>{const t=e.options.get,o=e.editorUpload.blobCache;return RN({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:HK(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Sm(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},gL=e=>{const t=e.options.get;return RN({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},zK=e=>{const t=e.options.get;return{...fL(e),...gL(e),...RN({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},VK=e=>{const t=Zv(fL(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),t.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),wC(e)&&t.addNodeFilter("#cdata",o=>{let r=o.length;for(;r--;){const c=o[r];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode(c.value??"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Oa("br",1))}}),t},hL=e=>{const t=V3(e);t&&Id.setEditorTimeout(e,()=>{let o;t===!0?o=e:o=e.editorManager.get(t),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},NN=e=>{const t=e.dom.getRoot();!e.inline&&(!zC(e)||e.selection.getStart(!0)===t)&&E(t).each(o=>{const r=o.getNode(),c=Uc(r)?E(r).getOr(o):o;e.selection.setRng(c.toRange())})},pL=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Mw(e),e.focus(!0),NN(e),e.nodeChanged({initial:!0});const t=z3(e);se(t)&&t.call(e,e),hL(e),Jg(e)&&M6(e,!0)},mk=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,UK=(e,t,o)=>{const{pass:r,fail:c}=rt(t,b=>tinymce.Resource.has(Tp(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(Tp(b));return U(v)?Promise.resolve(mk(e).loadRawCss(b,v)):Promise.resolve()}),mk(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},bL=e=>{const t=mk(e),o=gC(e),r=e.contentCSS,c=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";Je.each(e.contentStyles,S=>{v+=S+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(UK(e,r,o)).then(u).catch(u),b=$g(e);return b&&LK(e,b),f},jK=e=>{const t=e.getDoc(),o=e.getBody();Nw(e),rE(e)||(t.body.spellcheck=!1,DN.setAttrib(o,"spellcheck","false")),e.quirks=PK(e),So(e);const r=N3(e);r!==void 0&&(o.dir=r);const c=U3(e);c&&e.on("BeforeSetContent",u=>{Je.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},vL=e=>{Bm(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},fk=e=>{e.removed!==!0&&(vL(e),pL(e))},WK=e=>{let t=!1;const o=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(o),t=!0,e.setProgressState(!1)}},yL=e=>{const t=e.getElement();let o=e.getDoc();e.inline&&(DN.addClass(t,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=K1(e),e._editableRoot=hv(e),!au(e)&&e.hasEditableRoot()&&(e.inline&&DN.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=_b(e),e.schema=Ea(gL(e)),e.dom=lo(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Xw(e),referrerPolicy:uv(e),crossOrigin:Bg(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=VK(e),e.serializer=DO(zK(e),e),e.selection=_O(e.dom,e.getWin(),e.serializer,e),e.annotator=A5(e),e.formatter=L6(e),e.undoManager=wU(e),e._nodeChangeDispatcher=new QG(e),e._selectionOverrides=ak(e),ts(e),WW(e),P8(e),KW(e),Bm(e)||($q(e),SS(e));const c=jG(e);fR(e,c),qd(e),AU(e),Oq(e,c);const u=_V(e);jK(e),FK(e),u.fold(()=>{const f=WK(e);bL(e).then(()=>{fk(e),f()})},f=>{e.setProgressState(!0),bL(e).then(()=>{f().then(b=>{e.setProgressState(!1),fk(e),zT(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),fk(e),zT(e)})})})},wS=lo.DOM,gk=(e,t,o,r)=>{const c=te.fromTag("iframe");return r.each(u=>ws(c,"tabindex",u)),ta(c,o),ta(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...fo.browser.isFirefox()?{title:t}:{}}),vc(c,"tox-edit-area__iframe"),c},CL=e=>{let t=iC(e)+"<html><head>";uC(e)!==e.editorManager.documentBaseURL&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Vw(e),r=Uw(e),c=e.translate(bv(e)),u=fo.browser.isFirefox()?"":`aria-label="${c}"`;return jw(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+jw(e)+'" />'),t+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,t},xL=(e,t)=>{const o=bv(e),r=e.translate(o),c=ul(te.fromDom(e.getElement()),"tabindex").bind(Jf),u=gk(e.id,r,zw(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=u,e.iframeHTML=CL(e),wS.add(t.iframeContainer,u)},SL=e=>{const t=e.iframeElement,o=()=>{e.contentDocument=t.contentDocument,yL(e)};if(eb(e)||fo.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=ag(te.fromDom(t),"load",()=>{r.unbind(),o()});t.srcdoc=e.iframeHTML}},ZK=(e,t)=>{xL(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=wS.isHidden(t.editorContainer)),e.getElement().style.display="none",wS.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,SL(e)},wL=lo.DOM,GK=(e,t,o)=>{const r=Ep.get(o),c=Ep.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=Je.trim(o),r&&Je.inArray(t,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,se(u.init)&&(u.init(e,c),t.push(o))}catch(u){eU(e,o,u)}}},qK=e=>{const t=o=>{o.keyCode===Et.ESC&&!o.defaultPrevented&&Hw(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",t),e.inline||e.on("keyup",t),e.on("remove",()=>{document.removeEventListener("keyup",t),e.inline||e.off("keyup",t)})},Gf=e=>e.replace(/^\-/,""),EL=e=>{const t=[];xe(Y1(e),o=>{GK(e,t,Gf(o))})},KK=e=>{const t=Je.trim(G1(e)),o=e.ui.registry.getAll().icons,r={...jT.get("default").icons,...jT.get(t).icons};Un(r,(c,u)=>{kn(o,u)||e.ui.registry.addIcon(u,c)})},TL=e=>{const t=Dd(e);if(U(t)){const o=Sb.get(t);e.theme=o(e,Sb.urls[t])||{},se(e.theme.init)&&e.theme.init(e,Sb.urls[t]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},YK=e=>{const t=fv(e),o=ty.get(t);e.model=o(e,ty.urls[t])},XK=e=>{GO.init(e)},MN=e=>{const t=e.theme.renderUI;return t?t():AL(e)},hk=e=>{const t=e.getElement(),r=Dd(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r},kL=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),QK=e=>{const t=wL.create("div");return wL.insertAfter(t,e),kL(t,t)},AL=e=>{const t=e.getElement();return e.inline?kL(null):QK(t)},_L=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,U(Dd(e))?MN(e):se(Dd(e))?hk(e):AL(e)},JK=(e,t)=>{const o={show:P.from(t.show).getOr(St),hide:P.from(t.hide).getOr(St),isEnabled:P.from(t.isEnabled).getOr(He),setEnabled:r=>{r&&(e.mode.get()==="readonly"||Jg(e))||P.from(t.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},OL=async e=>{e.dispatch("ScriptsLoaded"),KK(e),qK(e),TL(e),YK(e),XK(e),EL(e);const t=await _L(e);JK(e,P.from(t.api).getOr({})),e.editorContainer=t.editorContainer,dU(e),e.inline?yL(e):ZK(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Vb=lo.DOM,DL=e=>e.charAt(0)==="-",eY=(e,t)=>{const o=Qw(t),r=Jw(t);if(!bl.hasCode(o)&&o!=="en"){const c=fs(r)?r:`${t.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{Eb(t,c,o)})}},tY=(e,t)=>{const o=Dd(e);if(U(o)&&!DL(o)&&!kn(Sb.urls,o)){const r=tE(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${t}.js`;Sb.load(o,c).catch(()=>{S6(e,c,o)})}},nY=(e,t)=>{const o=fv(e);if(o!=="plugin"&&!kn(ty.urls,o)){const r=B3(e),c=U(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${t}.js`;ty.load(o,c).catch(()=>{QV(e,c,o)})}},RL=(e,t)=>{GO.load(e,t)},pk=e=>P.from(mC(e)).filter(fs).map(t=>({url:t,name:P.none()})),bk=(e,t,o)=>P.from(t).filter(r=>fs(r)&&!jT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:P.some(r)})),oY=(e,t,o)=>{const r=bk(t,"default",o),c=pk(t).orThunk(()=>bk(t,G1(t),""));xe(dc([r,c]),u=>{e.add(u.url).catch(()=>{XV(t,u.url,u.name.getOrUndefined())})})},NL=(e,t)=>{const o=(r,c)=>{r!=="licensekeymanager"&&Ep.load(r,c).catch(()=>{x6(e,c,r)})};Un(yC(e),(r,c)=>{o(c,r),e.options.set("plugins",Y1(e).concat(c))}),xe(Y1(e),r=>{r=Je.trim(r),r&&!Ep.urls[r]&&!DL(r)&&o(r,`plugins/${r}/plugin${t}.js`)})},ML=e=>{const t=Dd(e);return!U(t)||X(Sb.get(t))},sY=e=>{const t=fv(e);return X(ty.get(t))},PL=(e,t)=>{const o=Ro.ScriptLoader,r=()=>{!e.removed&&ML(e)&&sY(e)&&OL(e)};tY(e,t),nY(e,t),RL(e,t),eY(o,e),oY(o,e,t),NL(e,t),o.loadQueue().then(r,r)},rY=(e,t)=>p2.forElement(e,{contentCssCors:vC(t),referrerPolicy:uv(t)}),aY=e=>{const t=e.id;bl.setCode(Qw(e));const o=()=>{Vb.unbind(window,"ready",o),e.render()};if(!Vh.Event.domLoaded){Vb.bind(window,"ready",o);return}if(!e.getElement())return;const r=te.fromDom(e.getElement()),c=Kn(r);e.on("remove",()=>{We(r.dom.attributes,f=>rr(r,f.name)),ta(r,c)}),e.ui.styleSheetLoader=rY(r,e),q1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Vb.getParent(t,"form");u&&(e.formElement=u,bC(e)&&!bi(e.getElement())&&(Vb.insertAfter(Vb.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Vb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),F3(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=C6(e),e.notificationManager=Px(e),iE(e)&&e.on("GetContent",f=>{f.save&&(f.content=Vb.encode(f.content))}),L3(e)&&e.on("submit",()=>{e.initialized&&e.save()}),gv(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),PL(e,e.suffix)},BL=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],cY=e=>Intl.Segmenter?`${new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value?.segment}`:e.trim()[0],$L=(e,t)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(t+1)},IL=e=>{const t=$L(e??"",BL.length-1);return BL[t]},FL=(e,t,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${t}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},LL=(e,t,o)=>"data:image/svg+xml,"+encodeURIComponent(FL(e,t,o)),vk=(e,t={size:36})=>LL(cY(e.name),IL(e.id),t.size),HL=_c([ym("id"),Tf("name"),Tf("avatar"),io("custom")]),PN=e=>{const t={};return Un(e,(o,r)=>{o.each(c=>{t[r]=c})}),t},zL=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=en(e,c=>op("Invalid user object",HL,c)),{errors:o,values:r}=$r(t);if(o.length>0){const c=en(o,(u,f)=>`User at index ${f}: ${_d(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return en(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(vk({id:u,name:f.getOr(u)})),...PN(v)}})},VL=e=>{const t=new Map,o=new Map,r=S=>P.from(t.get(S)),c=(S,O)=>{t.set(O,S)},u=(S,O)=>P.from(o.get(S)).each(({reject:R})=>{R(O),o.delete(S)}),f=(S,O)=>P.from(o.get(S)).each(({resolve:R})=>{R(O),o.delete(S)}),b=S=>{const O=fE(e);if(Array.isArray(S)){if(!O)return yu(S,M=>Promise.resolve({id:M,name:M,avatar:vk({id:M,name:M})}))}else return{};const R=Ya(ze(S,M=>!r(M).isSome()));return xe(R,M=>{const H=new Promise((J,W)=>{o.set(M,{resolve:J,reject:W})});c(H,M)}),R.length>0&&O(R).then(zL).then(M=>{const H=new Set(en(M,J=>J.id));xe(M,J=>f(J.id,J)),xe(R,J=>{H.has(J)||u(J,new Error(`User ${J} not found`))})}).catch(M=>{xe(R,H=>u(H,M instanceof Error?M:new Error("Network error")))}),Fo(S,(M,H)=>(M[H]=r(H).getOr(Promise.resolve({id:H,name:H,avatar:vk({id:H,name:H})})),M),{})},v=mE(e);return Object.freeze({userId:v,fetchUsers:b})},UL=e=>VL(e),lY=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,Jg(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Lw(e,t))},iY=e=>e._editableRoot,jL=(e,t)=>({sections:st(e),options:st(t)}),BN=Hi().deviceType,$N=BN.isPhone(),WL=BN.isTablet(),Ub=e=>{if(jt(e))return[];{const t=Ot(e)?e:e.split(/[ ,]/),o=en(t,Os);return ze(o,fs)}},IN=(e,t)=>{const o=cs(t,(r,c)=>Lt(e,c));return jL(o.t,o.f)},yk=(e,t,o={})=>{const r=e.sections(),c=Zo(r,t).getOr({});return Je.extend({},o,c)},Ck=(e,t)=>kn(e.sections(),t),ZL=(e,t)=>Ck(e,t)?e.sections()[t]:{},GL=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Zo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),FN=(e,t)=>{const o=t.external_plugins??{};return e&&e.external_plugins?Je.extend({},e.external_plugins,o):o},qL=(e,t)=>[...Ub(e),...Ub(t)],KL=(e,t,o,r)=>e&&Ck(t,"mobile")?r:o,uY=(e,t,o,r)=>{const c=Ub(o.forced_plugins),u=Ub(r.plugins),f=ZL(t,"mobile"),b=f.plugins?Ub(f.plugins):u,v=KL(e,t,u,b),S=qL(c,v);return Je.extend(r,{forced_plugins:c,plugins:S})},YL=(e,t)=>e&&Ck(t,"mobile"),dY=(e,t,o,r,c)=>{const u=e?{mobile:GL(c.mobile??{},t)}:{},f=IN(["mobile"],Su(u,c)),b=Je.extend(o,r,f.options(),YL(e,f)?yk(f,"mobile"):{},{external_plugins:FN(r,f.options())});return uY(e,f,r,b)},mY=(e,t)=>{const o=Al(t);return dY($N||WL,$N,o,e,o)},fY=(e,t)=>i6(e,t),XL=e=>{const t=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{xe("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},gY=e=>{const t=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return po(c,u=>X(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},QL=e=>{XL(e),gY(e)},xk=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const o=e.getDoc();let r;try{o.execCommand(t)}catch{r=!0}if(t==="paste"&&!o.queryCommandEnabled(t)&&(r=!0),r||!o.queryCommandSupported(t)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(fo.os.isMacOS()||fo.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},hY=(e,t,o,r)=>{const c=te.fromDom(e.getRoot());return ox(c,Re.fromRangeStart(t),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Rc(c,Re.fromRangeEnd(t),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},JL=e=>{if(typeof e!="string"){const t=Je.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},pY=(e,t)=>{const o=e.selection,r=e.dom;return/^ | $/.test(t)?hY(r,o.getRng(),t,e.schema):t},ES=(e,t)=>{if(e.selection.isEditable()){const{content:o,details:r}=JL(t);Cx(e,{...r,content:pY(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=Xg(e,c.content,r);X_(e,u,c),e.addVisual()})}},LN=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,o,r)=>{ES(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,o,r)=>{ES(e,e.dom.encode(r))},insertHTML:(t,o,r)=>{ES(e,r)},mceInsertContent:(t,o,r)=>{ES(e,r)},mceSetContent:(t,o,r)=>{e.setContent(r)},mceReplaceContent:(t,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Z3(e))}})},bY={"font-size":"size","font-family":"face"},vY=gr("font"),e7=(e,t,o)=>{const r=u=>ar(u,e).orThunk(()=>vY(u)?Zo(bY,e).bind(f=>ul(u,f)):P.none()),c=u=>Qn(te.fromDom(t),u);return hi(te.fromDom(o),u=>r(u),c)},yY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),CY=(e,t)=>P.from(lo.DOM.getStyle(t,e,!0)),t7=e=>(t,o)=>P.from(o).map(te.fromDom).filter(Fs).bind(r=>e7(e,t,r.dom).or(CY(e,r.dom))).getOr(""),xY=t7("font-size"),SY=A(yY,t7("font-family")),n7=e=>E(e.getBody()).bind(t=>{const o=t.container();return P.from(tt(o)?o.parentNode:o)}),o7=e=>P.from(e.selection.getRng()).bind(t=>{const o=e.getBody();return t.startContainer===o&&t.startOffset===0?P.none():P.from(e.selection.getStart(!0))}),wY=(e,t)=>o7(e).orThunk(de(n7,e)).map(te.fromDom).filter(Fs).bind(t),HN=(e,t)=>wY(e,Mo(P.some,t)),s7=(e,t)=>{if(/^[0-9.]+$/.test(t)){const o=parseInt(t,10);if(o>=1&&o<=7){const r=EC(e),c=TC(e);return c.length>0?c[o-1]||t:r[o-1]||t}else return t}else return t},EY=e=>{const t=e.split(/\s*,\s*/);return en(t,o=>o.indexOf(" ")!==-1&&!(hn(o,'"')||hn(o,"'"))?`'${o}'`:o).join(",")},n=(e,t)=>{const o=s7(e,t);e.formatter.toggle("fontname",{value:EY(o)}),e.nodeChanged()},s=e=>HN(e,t=>SY(e.getBody(),t.dom)).getOr(""),a=(e,t)=>{e.formatter.toggle("fontsize",{value:s7(e,t)}),e.nodeChanged()},l=e=>HN(e,t=>xY(e.getBody(),t.dom)).getOr(""),d=e=>HN(e,t=>{const o=te.fromDom(e.getBody()),r=hi(t,u=>ar(u,"line-height"),de(Qn,o)),c=()=>{const u=parseFloat(Hs(t,"line-height")),f=parseFloat(Hs(t,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),g=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},h=e=>{const t=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{t(o)},"ForeColor,HiliteColor":(o,r,c)=>{t(o,{value:c})},BackColor:(o,r,c)=>{t("hilitecolor",{value:c})},FontName:(o,r,c)=>{n(e,c)},FontSize:(o,r,c)=>{a(e,c)},LineHeight:(o,r,c)=>{g(e,c)},Lang:(o,r,c)=>{t(o,{value:c.code,customValue:c.customCode??null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(o,r,c)=>{t(U(c)?c:"p")},mceToggleFormat:(o,r,c)=>{t(c)}})},C=e=>{const t=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>t(o),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>s(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>l(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>d(e))},x=e=>{h(e),C(e)},T=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},_=e=>{e.editorCommands.addCommands({Indent:()=>{dI(e)},Outdent:()=>{sh(e)}}),e.editorCommands.addCommands({Outdent:()=>lI(e),Indent:()=>VW(e)},"state")},N=e=>{const t=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=U(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Ye(u)&&U(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},L=(e,t,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(t)?t:c.getParent(r,u,o);return P.from(f).map(te.fromDom)},j=(e,t)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=t?e.selection.getStart():e.selection.getEnd(),u=t?r.startContainer:r.endContainer,f=lS(o,u);if(!f||!f.isContentEditable)return;const b=t?la:ll,v=_r(e);L(e,c,f,u).each(S=>{const O=NF(e,u,S.dom,f,!1,v);b(S,te.fromDom(O)),e.selection.setCursorLocation(O,0),e.dispatch("NewBlock",{newBlock:O}),aS(e,"insertParagraph")})},Z=e=>j(e,!0),ne=e=>j(e,!1),ae=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Z(e)},InsertNewBlockAfter:()=>{ne(e)}})},Y=e=>{e.editorCommands.addCommands({insertParagraph:()=>{j4(uS,e)},mceInsertNewLine:(t,o,r)=>{KF(e,r)},InsertLineBreak:(t,o,r)=>{j4(jF,e)}})},le=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>pt(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(t,o,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),ml);if(t){const o=e.dom.createRng();o.selectNodeContents(t),e.selection.setRng(o)}}})},pe=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,o,r)=>{$5(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},Ee=e=>{QL(e),xk(e),T(e),le(e),LN(e),N(e),_(e),ae(e),Y(e),x(e),pe(e)},Oe=["toggleview"],ht=e=>Lt(Oe,e.toLowerCase());class Ue{editor;commands={state:{},exec:{},value:{}};constructor(t){this.editor=t}execCommand(t,o=!1,r,c){const u=this.editor,f=t.toLowerCase(),b=c?.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():P7(u)),u.dispatch("BeforeExecCommand",{command:t,ui:o,value:r}).isDefaultPrevented()))return!1;const S=this.commands.exec[f];return se(S)?(S(f,o,r,c),u.dispatch("ExecCommand",{command:t,ui:o,value:r,args:c}),!0):!1}queryCommandState(t){if(!ht(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=t.toLowerCase(),r=this.commands.state[o];return se(r)?r(o):!1}queryCommandValue(t){if(!ht(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=t.toLowerCase(),r=this.commands.value[o];return se(r)?r(o):""}addCommands(t,o="exec"){const r=this.commands;Un(t,(c,u)=>{xe(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(t,o,r){const c=t.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}removeCommand(t,o){const r=t.toLowerCase();o?delete this.commands[o][r]:(delete this.commands.exec[r],delete this.commands.state[r],delete this.commands.value[r])}queryCommandSupported(t){const o=t.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(t,o,r){this.commands.state[t.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(t,o,r){this.commands.value[t.toLowerCase()]=()=>o.call(r??this.editor)}}const Qe=Je.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ke{static isNative(t){return!!Qe[t.toLowerCase()]}settings;scope;toggleEvent;bindings={};constructor(t){this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ye}fire(t,o){return this.dispatch(t,o)}dispatch(t,o){const r=t.toLowerCase(),c=w0(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(t,o,r,c){if(o===!1&&(o=ye),o){const u={func:o,removed:!1};c&&Je.extend(u,c);const f=t.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let S=this.bindings[v];S||(S=[],this.toggleEvent(v,!0)),r?S=[u,...S]:S=[...S,u],this.bindings[v]=S}}return this}off(t,o){if(t){const r=t.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return Un(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=rt(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,xe(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(t,!1),delete this.bindings[u])}}}else Un(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(t,o,r){return this.on(t,o,r,{once:!0})}has(t){t=t.toLowerCase();const o=this.bindings[t];return!(!o||o.length===0)}}const Qt=e=>(e._eventDispatcher||(e._eventDispatcher=new Ke({scope:e,toggleEvent:(t,o)=>{Ke.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,o)}})),e._eventDispatcher),zt={fire(e,t,o){return xx("fire"),this.dispatch(e,t,o)},dispatch(e,t,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return w0(e.toLowerCase(),t??{},r);const c=Qt(r).dispatch(e,t);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,t,o){return Qt(this).on(e,t,o)},off(e,t){return Qt(this).off(e,t)},once(e,t){return Qt(this).once(e,t)},hasEventListeners(e){return Qt(this).has(e)}},jn=lo.DOM;let Jt;const _n=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const o=mv(e);return o?(e.eventRoot||(e.eventRoot=jn.select(o)[0]),e.eventRoot):e.getBody()},Ut=e=>!e.hidden&&!Jg(e),Ve=(e,t,o)=>{Ut(e)?e.dispatch(t,o):Jg(e)&&aU(e,o)},ct=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=_n(e,t);if(mv(e)){if(Jt||(Jt={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||Jt&&(Un(Jt,(c,u)=>{e.dom.unbind(_n(e,u))}),Jt=null)})),Jt[t])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||jn.isChildOf(u,v))&&Ve(f[b],t,c)}};Jt[t]=r,jn.bind(o,t,r)}else{const r=c=>{Ve(e,t,c)};jn.bind(o,t,r),e.delegates[t]=r}},mn={...zt,bindPendingEventDelegates(){const e=this;Je.each(e._pendingNativeEvents,t=>{ct(e,t)})},toggleNativeEvent(e,t){const o=this;e==="focus"||e==="blur"||o.removed||(t?o.initialized?ct(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(_n(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),o=e.dom;e.delegates&&(Un(e.delegates,(r,c)=>{e.dom.unbind(_n(e,c),c,r)}),delete e.delegates),!e.inline&&t&&o&&(t.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(t),o.unbind(e.getContainer()))}},Pn=e=>U(e)?{value:e.split(/[ ,]/),valid:!0}:an(e,U)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},qt=e=>{const t=(()=>{switch(e){case"array":return Ot;case"boolean":return Yt;case"function":return se;case"number":return os;case"object":return Ye;case"string":return U;case"string[]":return Pn;case"object[]":return o=>an(o,Ye);case"regexp":return o=>lt(o,RegExp);default:return He}})();return o=>cc(o,t,`The value must be a ${e}.`)},Nn=e=>U(e.processor),Qo=(e,t)=>{const o=ni(t.message)?"":`. ${t.message}`;return e+o},ko=e=>e.valid,cc=(e,t,o="")=>{const r=t(e);return Yt(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},Ps=(e,t,o)=>{if(!Gn(t)){const r=cc(t,o);if(ko(r))return r.value;console.error(Qo(`Invalid default value passed for the "${e}" option`,r))}},Xl=(e,t,o=t)=>{const r={},c={},u=(H,J,W)=>{const Q=cc(J,W);return ko(Q)?(c[H]=Q.value,!0):(console.warn(Qo(`Invalid value passed for the ${H} option`,Q)),!1)},f=(H,J)=>{const W=Nn(J)?qt(J.processor):J.processor,Q=Ps(H,J.default,W);r[H]={...J,default:Q,processor:W},Zo(c,H).orThunk(()=>Zo(t,H)).each(be=>u(H,be,W))},b=H=>kn(r,H);return{register:f,isRegistered:b,get:H=>Zo(c,H).orThunk(()=>Zo(r,H).map(J=>J.default)).getOrUndefined(),set:(H,J)=>{if(b(H)){const W=r[H];return W.immutable?(console.error(`"${H}" is an immutable option and cannot be updated`),!1):u(H,J,W.processor)}else return console.warn(`"${H}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:H=>{const J=b(H);return J&&delete c[H],J},isSet:H=>kn(c,H),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(H,J)=>Yt(J)||os(J)||U(J)||oe(J)||Ot(J)||On(J)?J:Object.prototype.toString.call(J))))}catch(H){console.error(H)}}}},Ra=(e,t)=>{e.dom.contentEditable="true"},hu=(e,t)=>{const o=te.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&Ra(o),YO(e)):(e.readonly=!1,N6(e))},Za=e=>e.readonly,od=e=>{const t=e.undoManager.add();X(t)&&(e.undoManager.undo(),e.undoManager.reset())},Bp=e=>po(e,t=>t.type==="characterData"||t.type==="childList"),qf=e=>{const t=r=>{Za(e)&&Bp(r)&&od(e)},o=new MutationObserver(t);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Za(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Za(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Za(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Za(e)){const r=o.takeRecords();t(r)}o.disconnect()})},Ry=["design","readonly"],Kf=(e,t,o,r)=>{const c=o[t.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&hu(e,u.editorReadOnly),t.set(r),A3(e,r)},TS=(e,t,o,r)=>{if(!(r===o.get()||e.initialized&&Jg(e))){if(!kn(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Kf(e,o,t,r):e.on("init",()=>Kf(e,o,t,r))}},zN=(e,t,o)=>{if(Lt(Ry,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${t}:`,r)}}}}},Ny=e=>{const t=Wt("design"),o=Wt({design:{activate:St,deactivate:St,editorReadOnly:!1},readonly:{activate:St,deactivate:St,editorReadOnly:!0}});return qf(e),cU(e),{isReadOnly:()=>Za(e),set:r=>TS(e,o.get(),t,r),get:()=>t.get(),register:(r,c)=>{o.set(zN(o.get(),r,c))}}},My=Je.each,Py=Je.explode,r7={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},VN=Je.makeMap("alt,ctrl,shift,meta,access"),TY=e=>e in VN,UN=e=>{const t={},o=fo.os.isMacOS()||fo.os.isiOS();My(Py(e.toLowerCase(),"+"),u=>{TY(u)?t[u]=!0:/^[0-9]{2,}$/.test(u)?t.keyCode=parseInt(u,10):(t.charCode=u.charCodeAt(0),t.keyCode=r7[u]||u.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let c;for(c in VN)t[c]?r.push(c):t[c]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,o?t.ctrl=!0:t.shift=!0),t.meta&&(o?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class By{editor;shortcuts={};pendingPatterns=[];constructor(t){this.editor=t;const o=this;t.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(My(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(t,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return My(Py(Je.trim(t)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(t){const o=this.createShortcut(t);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(t){const o=this,r=t;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Je.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,o,r,c){const u=Je.map(Py(t,">"),UN);return u[u.length-1]=Je.extend(u[u.length-1],{func:r,scope:c||this.editor}),Je.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,o){return!o||o.ctrl!==t.ctrlKey||o.meta!==t.metaKey||o.alt!==t.altKey||o.shift!==t.shiftKey?!1:t.keyCode===o.keyCode||t.charCode&&t.charCode===o.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const $y=()=>{const e=UZ();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Kd=lo.DOM,jN=Je.extend,a7=Je.each;class kS{baseUri;id;editorUid;plugins={};documentBaseURI;baseURI;contentCSS=[];contentStyles=[];ui;mode;options;editorUpload;userLookup;shortcuts;loadedCSS={};editorCommands;suffix;editorManager;hidden;inline;hasVisual;isNotDirty=!1;annotator;bodyElement;bookmark;composing=!1;container;contentAreaContainer;contentDocument;contentWindow;delegates;destroyed=!1;dom;editorContainer;eventRoot;formatter;formElement;formEventDelegate;hasHiddenInput=!1;iframeElement=null;iframeHTML;initialized=!1;notificationManager;orgDisplay;orgVisibility;parser;quirks;readonly=!1;removed=!1;schema;selection;serializer;startContent="";targetElm;theme;model;undoManager;windowManager;licenseKeyManager;_beforeUnload;_eventDispatcher;_nodeChangeDispatcher;_pendingNativeEvents=[];_selectionOverrides;_skinLoaded=!1;_editableRoot=!0;bindPendingEventDelegates;toggleNativeEvent;unbindAllNativeEvents;fire;dispatch;on;off;once;hasEventListeners;constructor(t,o,r){this.editorManager=r,jN(this,mn);const c=this;this.id=t,this.editorUid=$i(),this.hidden=!1;const u=mY(r.defaultOptions,o);this.options=Xl(c,u,o),Z1(c),this.userLookup=UL(this);const f=this.options.get;f("deprecation_warnings")&&P9(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const S=uv(c);S&&(Ro.ScriptLoader._setReferrerPolicy(S),lo.DOM.styleSheetLoader._setReferrerPolicy(S)),Ro.ScriptLoader._setCrossOrigin(H=>Bg(c)(H,"script")),lo.DOM.styleSheetLoader._setCrossOrigin(H=>Bg(c)(H,"stylesheet"));const O=vC(c);X(O)&&lo.DOM.styleSheetLoader._setContentCssCors(O),Ur.languageLoad=f("language_load"),Ur.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Vd(uC(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=q1(c),this.hasVisual=X1(c),this.shortcuts=new By(this),this.editorCommands=new Ue(this),Ee(this);const R=f("cache_suffix");R&&(fo.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:$y(),styleSheetLoader:void 0,show:St,hide:St,setEnabled:St,isEnabled:He},this.mode=Ny(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const M=Ig(c);se(M)&&M.call(c,c)}render(){aY(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return Fv(this)}translate(t){return bl.translate(t)}getParam(t,o,r){const c=this.options;return c.isRegistered(t)||(X(r)?c.register(t,{processor:r,default:o}):c.register(t,{processor:He,default:o})),!c.isSet(t)&&!Gn(o)?o:c.get(t)}hasPlugin(t,o){return Lt(Y1(this),t)?o?Ep.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,o,r){this.editorCommands.addCommand(t,o,r)}addQueryStateHandler(t,o,r){this.editorCommands.addQueryStateHandler(t,o,r)}addQueryValueHandler(t,o,r){this.editorCommands.addQueryValueHandler(t,o,r)}addShortcut(t,o,r,c){this.shortcuts.add(t,o,r,c)}execCommand(t,o,r,c){return this.editorCommands.execCommand(t,o,r,c)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Kd.show(t.getContainer()),Kd.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Kd.hide(t.getContainer()),Kd.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,o){this.dispatch("ProgressState",{state:t,time:o})}load(t={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...t,load:!0},u=bi(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(t={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...t,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,bi(r))r.value=u;else{(t.is_removing||!o.inline)&&(r.innerHTML=u);const b=Kd.getParent(o.id,"form");b&&a7(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(t,o){RO(this,t,o)}getContent(t){return jV(this,t)}insertContent(t,o){o&&(t=jN({content:t},o)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?RO(this,this.startContent,{initial:!0,format:"raw"}):RO(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const o=!this.isNotDirty;this.isNotDirty=!t,t&&t!==o&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Kd.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Kd.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const o=t.iframeElement;o&&(t.contentWindow=o.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const o=t.getWin();o&&(t.contentDocument=o.document)}return t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement??t?.body??null}convertURL(t,o,r){const c=this,u=c.options.get,f=Rd(c);if(se(f))return f.call(c,t,r,!0,o);if(!u("convert_urls")||r==="link"||Ye(r)&&r.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const b=new Vd(t);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?t:u("relative_urls")?c.documentBaseURI.toRelative(t):(t=c.documentBaseURI.toAbsolute(t,u("remove_script_host")),t)}addVisual(t){fY(this,t)}setEditableRoot(t){lY(this,t)}hasEditableRoot(){return iY(this)}remove(){MO(this)}destroy(t){y6(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const $p=lo.DOM,AS=Je.each;let _S=!1,jb,ca=[];const ch=e=>{const t=e.type;AS(Um.get(),o=>{switch(t){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},Sk=e=>{if(e!==_S){const t=lo.DOM;e?(t.bind(window,"resize",ch),t.bind(window,"scroll",ch)):(t.unbind(window,"resize",ch),t.unbind(window,"scroll",ch)),_S=e}},wk=e=>{const t=ca;return ca=ze(ca,o=>e!==o),Um.activeEditor===e&&(Um.activeEditor=ca.length>0?ca[0]:null),Um.focusedEditor===e&&(Um.focusedEditor=null),t.length!==ca.length},kY=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(wk(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},Ek=document.compatMode!=="CSS1Compat",Um={...zt,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:$i(),majorVersion:"8",minorVersion:"3.2",releaseDate:"2026-01-14",i18n:bl,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",o="",r=Vd.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)t=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),t=b.substring(0,b.lastIndexOf("/"));break}}if(!t&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),t=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Vd(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Vd(e.baseURL),e.suffix=o,N5(e),xe(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&Un(r,(c,u)=>{Ur.PluginManager.urls[u]=c})},init(e){const t=this;let o;const r=Je.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(O,R)=>O.inline&&R.tagName.toLowerCase()in r,u=O=>{let R=O.id;return R||(R=Zo(O,"name").filter(M=>!$p.get(M)).getOrThunk($p.uniqueId),O.setAttribute("id",R)),R},f=O=>{const R=e[O];if(R)return R.apply(t,[])},b=O=>fo.browser.isIE()||fo.browser.isEdge()?(ZT("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):Ek?(ZT("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):U(O.selector)?$p.select(O.selector):X(O.target)?[O.target]:[];let v=O=>{o=O};const S=()=>{let O=0;const R=[];let M;const H=(J,W,Q)=>{const ge=new kS(J,W,t);R.push(ge),ge.on("init",()=>{++O===M.length&&v(R)}),ge.targetElm=ge.targetElm||Q,ge.render()};$p.unbind(window,"ready",S),f("onpageload"),M=Ya(b(e)),Je.each(M,J=>{kY(t.get(J.id))}),M=Je.grep(M,J=>!t.get(J.id)),M.length===0?v([]):AS(M,J=>{c(e,J)?ZT("Could not initialize inline editor on invalid inline target element",J):H(u(J),e,J)})};return $p.bind(window,"ready",S),new Promise(O=>{o?O(o):v=R=>{O(R)}})},get(e){return arguments.length===0?ca.slice(0):U(e)?Oo(ca,t=>t.id===e).getOr(null):os(e)&&ca[e]?ca[e]:null},add(e){const t=this,o=t.get(e.id);return o===e||(o===null&&ca.push(e),Sk(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),jb||(jb=r=>{const c=t.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",jb))),e},createEditor(e,t){return this.add(new kS(e,t,this))},remove(e){const t=this;let o;if(!e){for(let r=ca.length-1;r>=0;r--)t.remove(ca[r]);return}if(U(e)){AS($p.select(e),r=>{o=t.get(r.id),o&&t.remove(o)});return}return o=e,oe(t.get(o.id))?null:(wk(o)&&t.dispatch("RemoveEditor",{editor:o}),ca.length===0&&window.removeEventListener("beforeunload",jb),o.remove(),Sk(ca.length>0),o)},execCommand(e,t,o){const r=this,c=Ye(o)?o.id??o.index:o;switch(e){case"mceAddEditor":{if(!r.get(c)){const u=o.options;new kS(c,u,r).render()}return!0}case"mceRemoveEditor":{const u=r.get(c);return u&&u.remove(),!0}case"mceToggleEditor":{const u=r.get(c);return u?(u.isHidden()?u.show():u.hide(),!0):(r.execCommand("mceAddEditor",!1,o),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,t,o):!1},triggerSave:()=>{AS(ca,e=>{e.save()})},addI18n:(e,t)=>{bl.add(e,t)},translate:e=>bl.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Vd(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Vd(this.baseURL)},_addLicenseKeyManager:e=>GO.add(e)};Um.setup();const OS=(()=>{const e=Pc(),t=u=>({items:u,types:Vt(u),getType:f=>Zo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:t,write:o,read:r,clear:c}})(),c7=Math.min,Iy=Math.max,Ga=Math.round,Wb=(e,t,o)=>{let r=t.x,c=t.y;const u=e.w,f=e.h,b=t.w,v=t.h,S=(o||"").split("");return S[0]==="b"&&(c+=v),S[1]==="r"&&(r+=b),S[0]==="c"&&(c+=Ga(v/2)),S[1]==="c"&&(r+=Ga(b/2)),S[3]==="b"&&(c-=f),S[4]==="r"&&(r-=u),S[3]==="c"&&(c-=Ga(f/2)),S[4]==="c"&&(r-=Ga(u/2)),Zb(r,c,u,f)},AY=(e,t,o,r)=>{for(let c=0;c<r.length;c++){const u=Wb(e,t,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},l7=(e,t,o)=>Zb(e.x-t,e.y-o,e.w+t*2,e.h+o*2),WN=(e,t)=>{const o=Iy(e.x,t.x),r=Iy(e.y,t.y),c=c7(e.x+e.w,t.x+t.w),u=c7(e.y+e.h,t.y+t.h);return c-o<0||u-r<0?null:Zb(o,r,c-o,u-r)},i7=(e,t,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=t.x+t.w,v=t.y+t.h,S=Iy(0,t.x-r),O=Iy(0,t.y-c),R=Iy(0,u-b),M=Iy(0,f-v);return r+=S,c+=O,o&&(u+=S,f+=O,r-=R,c-=M),u-=R,f-=M,Zb(r,c,u-r,f-c)},Zb=(e,t,o,r)=>({x:e,y:t,w:o,h:r}),Yf={inflate:l7,relativePosition:Wb,findBestRelativePosition:AY,intersect:WN,clamp:i7,create:Zb,fromClientRect:e=>Zb(e.left,e.top,e.width,e.height)},Fy=(e,t,o=1e3)=>{let r=!1,c=null;const u=S=>(...O)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),S.apply(null,O))},f=u(e),b=u(t);return{start:(...S)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,S),o))},resolve:f,reject:b}},u7=(()=>{const e={},t={},o={};return{load:(v,S)=>{const O=`Script at URL "${S}" failed to load`,R=`Script at URL "${S}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const M=new Promise((H,J)=>{const W=Fy(H,J);t[v]=W.resolve,Ro.ScriptLoader.loadScript(S).then(()=>W.start(R),()=>W.reject(O))});return e[v]=M,M}},add:(v,S)=>{t[v]!==void 0&&(t[v](S),delete t[v]),e[v]=Promise.resolve(S),o[v]=S},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),ZN=()=>(()=>{let e={},t=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{t.push(r),e[r]=String(c)},key:r=>t[r],removeItem:r=>{t=t.filter(c=>c===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),o})();let Ly;try{const e="__storage_test__";Ly=window.localStorage,Ly.setItem(e,e),Ly.removeItem(e)}catch{Ly=ZN()}var lh=Ly;const d7={geom:{Rect:Yf},util:{Delay:Id,Tools:Je,VK:Et,URI:Vd,EventDispatcher:Ke,Observable:zt,I18n:bl,LocalStorage:lh,ImageUploader:$6},dom:{EventUtils:Vh,TreeWalker:er,TextSeeker:Ed,DOMUtils:lo,ScriptLoader:Ro,RangeUtils:_m,Serializer:DO,StyleSheetLoader:Mh,ControlSelection:q7,BookmarkManager:$v,Selection:_O,Event:Vh.Event},html:{Styles:fm,Entities:hl,Node:Oa,Schema:Ea,DomParser:Zv,Writer:$A,Serializer:fp},Env:fo,AddOnManager:Ur,Annotator:A5,Formatter:L6,UndoManager:wU,EditorCommands:Ue,WindowManager:C6,NotificationManager:Px,EditorObservable:mn,Shortcuts:By,Editor:kS,FocusManager:D5,EditorManager:Um,DOM:lo.DOM,ScriptLoader:Ro.ScriptLoader,PluginManager:Ep,ThemeManager:Sb,ModelManager:ty,IconManager:jT,Resource:u7,FakeClipboard:OS,trim:Je.trim,isArray:Je.isArray,is:Je.is,toArray:Je.toArray,makeMap:Je.makeMap,each:Je.each,map:Je.map,grep:Je.grep,inArray:Je.inArray,extend:Je.extend,walk:Je.walk,resolve:Je.resolve,explode:Je.explode,_addCacheSuffix:Je._addCacheSuffix},GN=Je.extend(Um,d7),m7=e=>{try{V.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(GN),m7(GN)})()}(b7)),b7.exports}rJ();var ZY={},GY={},qY;function aJ(){return qY||(qY=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',"upload-from-device":'<svg width="24" height="25"><path d="M11 19a1 1 0 1 0 2 0v-3.2l1.5 1a1 1 0 1 0 1-1.7L12 12.8l-3.5 2.3a1 1 0 0 0 1 1.7l1.5-1V19Z"/><path d="M9.6 4c.3 0 .6.2.8.5l1.3 2h6.7c.7 0 1.4.2 1.8.7.5.5.8 1.2.8 1.9v8.3c0 .7-.3 1.3-.8 1.8a2.6 2.6 0 0 1-1.8.8H16v-2h2.4a.6.6 0 0 0 .4-.2.6.6 0 0 0 .2-.4V9a.6.6 0 0 0-.2-.5.6.6 0 0 0-.4-.1h-7.2a1 1 0 0 1-.8-.5L9 6H5.6a.6.6 0 0 0-.4.2.6.6 0 0 0-.2.4v10.8c0 .1 0 .3.2.4a.6.6 0 0 0 .4.2H8v2H5.6a2.6 2.6 0 0 1-1.8-.8 2.7 2.7 0 0 1-.8-1.8V6.6c0-.7.3-1.3.8-1.8A2.6 2.6 0 0 1 5.6 4h4Z"/></svg>',"upload-from-link":'<svg height="25" width="24"><path d="M11.5 11.8a1 1 0 0 1 1.9-.5 5 5 0 0 1-1.3 4.8l-2.4 2.3A4 4 0 1 1 4 13L5 12a1 1 0 0 1 1.4 1.4l-.7.8A2 2 0 1 0 8.3 17l2.4-2.4a3 3 0 0 0 .8-2.8z"/><path d="M10.1 11.8a1 1 0 0 1-2 .5 5 5 0 0 1 1.4-4.8L12 5.1a4 4 0 0 1 5.5 5.6l-.7.8a1 1 0 0 1-1.5-1.4l.8-.8a2 2 0 1 0-2.7-2.7l-2.4 2.3a3 3 0 0 0-.8 3zm5.7 7.2a1 1 0 1 0 2 0v-3l1.4 1.1a1 1 0 0 0 1.2-1.5l-3.6-2.9-3.6 2.9a1 1 0 0 0 1.2 1.5l1.4-1z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),GY}var KY;function cJ(){return KY||(KY=1,aJ()),ZY}cJ();var YY={},XY={},QY;function lJ(){return QY||(QY=1,function(){const V=Object.getPrototypeOf,ue=(n,s,a)=>a(n,s.prototype)?!0:n.constructor?.name===s.name,ut=n=>{const s=typeof n;return n===null?"null":s==="object"&&Array.isArray(n)?"array":s==="object"&&ue(n,String,(a,l)=>l.isPrototypeOf(a))?"string":s},ot=n=>s=>ut(s)===n,Nt=n=>s=>typeof s===n,ft=n=>s=>n===s,nn=(n,s)=>et(n)&&ue(n,s,(a,l)=>V(a)===l),De=ot("string"),et=ot("object"),Tt=n=>nn(n,Object),$n=ot("array"),Mt=ft(null),vn=Nt("boolean"),Cn=ft(void 0),pn=n=>n==null,un=n=>!pn(n),Xe=Nt("function"),In=Nt("number"),lt=(n,s)=>{if($n(n)){for(let a=0,l=n.length;a<l;++a)if(!s(n[a]))return!1;return!0}return!1},U=()=>{},Ye=n=>()=>n(),On=(n,s)=>(...a)=>n(s.apply(null,a)),Ot=(n,s)=>a=>n(s(a)),oe=n=>()=>n,Yt=n=>n,Gn=(n,s)=>n===s;function jt(n,...s){return(...a)=>{const l=s.concat(a);return n.apply(null,l)}}const X=n=>s=>!n(s),se=n=>()=>{throw new Error(n)},os=n=>n(),an=oe(!1),St=oe(!0);class A{tag;value;static singletonNone=new A(!1);constructor(s,a){this.tag=s,this.value=a}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return un(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Mo=Array.prototype.slice,st=Array.prototype.indexOf,Wo=Array.prototype.push,he=(n,s)=>st.call(n,s),de=(n,s)=>{const a=he(n,s);return a===-1?A.none():A.some(a)},bt=(n,s)=>he(n,s)>-1,cn=(n,s)=>{for(let a=0,l=n.length;a<l;a++){const d=n[a];if(s(d,a))return!0}return!1},fn=(n,s)=>{const a=[];for(let l=0;l<n;l++)a.push(s(l));return a},Fn=(n,s)=>{const a=[];for(let l=0;l<n.length;l+=s){const d=Mo.call(n,l,l+s);a.push(d)}return a},ye=(n,s)=>{const a=n.length,l=new Array(a);for(let d=0;d<a;d++){const g=n[d];l[d]=s(g,d)}return l},He=(n,s)=>{for(let a=0,l=n.length;a<l;a++){const d=n[a];s(d,a)}},P=(n,s)=>{for(let a=n.length-1;a>=0;a--){const l=n[a];s(l,a)}},ro=(n,s)=>{const a=[],l=[];for(let d=0,g=n.length;d<g;d++){const h=n[d];(s(h,d)?a:l).push(h)}return{pass:a,fail:l}},Ln=(n,s)=>{const a=[];for(let l=0,d=n.length;l<d;l++){const g=n[l];s(g,l)&&a.push(g)}return a},oo=(n,s,a)=>(P(n,(l,d)=>{a=s(a,l,d)}),a),ao=(n,s,a)=>(He(n,(l,d)=>{a=s(a,l,d)}),a),dr=(n,s,a)=>{for(let l=0,d=n.length;l<d;l++){const g=n[l];if(s(g,l))return A.some(g);if(a(g,l))break}return A.none()},Lt=(n,s)=>dr(n,s,an),po=(n,s)=>{for(let a=0,l=n.length;a<l;a++){const d=n[a];if(s(d,a))return A.some(a)}return A.none()},en=n=>{const s=[];for(let a=0,l=n.length;a<l;++a){if(!$n(n[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+n);Wo.apply(s,n[a])}return s},xe=(n,s)=>en(ye(n,s)),We=(n,s)=>{for(let a=0,l=n.length;a<l;++a){const d=n[a];if(s(d,a)!==!0)return!1}return!0},rt=n=>{const s=Mo.call(n,0);return s.reverse(),s},ze=(n,s)=>Ln(n,a=>!bt(s,a)),no=(n,s)=>{const a={};for(let l=0,d=n.length;l<d;l++){const g=n[l];a[String(g)]=s(g,l)}return a},qn=n=>[n],Fo=(n,s)=>{const a=Mo.call(n,0);return a.sort(s),a},el=(n,s)=>s>=0&&s<n.length?A.some(n[s]):A.none(),Oo=n=>el(n,0),Jl=n=>el(n,n.length-1),jm=Xe(Array.from)?Array.from:n=>Mo.call(n),ha=(n,s)=>{for(let a=0;a<n.length;a++){const l=s(n[a],a);if(l.isSome())return l}return A.none()},xo=Object.keys,Ka=Object.hasOwnProperty,ms=(n,s)=>{const a=xo(n);for(let l=0,d=a.length;l<d;l++){const g=a[l],h=n[g];s(h,g)}},$s=(n,s)=>yu(n,(a,l)=>({k:l,v:s(a,l)})),yu=(n,s)=>{const a={};return ms(n,(l,d)=>{const g=s(l,d);a[g.k]=g.v}),a},kl=n=>(s,a)=>{n[a]=s},qr=(n,s,a,l)=>{ms(n,(d,g)=>{(s(d,g)?a:l)(d,g)})},Ws=(n,s)=>{const a={},l={};return qr(n,s,kl(a),kl(l)),{t:a,f:l}},mr=(n,s)=>{const a={};return qr(n,s,kl(a),U),a},as=(n,s)=>{const a=[];return ms(n,(l,d)=>{a.push(s(l,d))}),a},lc=(n,s)=>{const a=xo(n);for(let l=0,d=a.length;l<d;l++){const g=a[l],h=n[g];if(s(h,g,n))return A.some(h)}return A.none()},Ya=n=>as(n,Yt),Vt=(n,s)=>mo(n,s)?A.from(n[s]):A.none(),mo=(n,s)=>Ka.call(n,s),Un=(n,s)=>mo(n,s)&&n[s]!==void 0&&n[s]!==null,Pa={generate:n=>{if(!$n(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");const s=[],a={};return He(n,(l,d)=>{const g=xo(l);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=l[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!$n(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...x)=>{const T=x.length;if(T!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+T);return{fold:(...N)=>{if(N.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+N.length);return N[d].apply(null,x)},match:N=>{const L=xo(N);if(s.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+L.join(","));if(!We(s,Z=>bt(L,Z)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+s.join(", "));return N[h].apply(null,x)},log:N=>{console.log(N,{constructors:s,constructor:h,params:x})}}}}),a}},Pt=n=>{let s=n;return{get:()=>s,set:d=>{s=d}}},Mi=n=>{let s=A.none(),a=[];const l=T=>Mi(_=>{d(N=>{_(T(N))})}),d=T=>{h()?x(T):a.push(T)},g=T=>{h()||(s=A.some(T),C(a),a=[])},h=()=>s.isSome(),C=T=>{He(T,x)},x=T=>{s.each(_=>{setTimeout(()=>{T(_)},0)})};return n(g),{get:d,map:l,isReady:h}},Pi={nu:Mi,pure:n=>Mi(s=>{s(n)})},uc=n=>{setTimeout(()=>{throw n},0)},Ba=n=>{const s=x=>{n().then(x,uc)};return{map:x=>Ba(()=>n().then(x)),bind:x=>Ba(()=>n().then(T=>x(T).toPromise())),anonBind:x=>Ba(()=>n().then(()=>x.toPromise())),toLazy:()=>Pi.nu(s),toCached:()=>{let x=null;return Ba(()=>(x===null&&(x=n()),x))},toPromise:n,get:s}},Go={nu:n=>Ba(()=>new Promise(n)),pure:n=>Ba(()=>Promise.resolve(n))},ad=n=>{const s=g=>g(n),a=oe(n),l=()=>d,d={tag:!0,inner:n,fold:(g,h)=>h(n),isValue:St,isError:an,map:g=>Wt.value(g(n)),mapError:l,bind:s,exists:s,forall:s,getOr:a,or:l,getOrThunk:a,orThunk:l,getOrDie:a,each:g=>{g(n)},toOptional:()=>A.some(n)};return d},Cu=n=>{const s=()=>a,a={tag:!1,inner:n,fold:(l,d)=>l(n),isValue:an,isError:St,map:s,mapError:l=>Wt.error(l(n)),bind:s,exists:an,forall:St,getOr:Yt,or:Yt,getOrThunk:os,orThunk:os,getOrDie:se(String(n)),each:U,toOptional:A.none};return a},Wt={value:ad,error:Cu,fromOption:(n,s)=>n.fold(()=>Cu(s),ad)},$a=n=>({...n,toCached:()=>$a(n.toCached()),bindFuture:x=>$a(n.bind(T=>T.fold(_=>Go.pure(Wt.error(_)),_=>x(_)))),bindResult:x=>$a(n.map(T=>T.bind(x))),mapResult:x=>$a(n.map(T=>T.map(x))),mapError:x=>$a(n.map(T=>T.mapError(x))),foldResult:(x,T)=>n.map(_=>_.fold(x,T)),withTimeout:(x,T)=>$a(Go.nu(_=>{let N=!1;const L=setTimeout(()=>{N=!0,_(Wt.error(T()))},x);n.get(j=>{N||(clearTimeout(L),_(j))})}))}),Dr=n=>$a(Go.nu(n)),Wm=n=>$a(Go.pure(Wt.value(n))),cd={nu:Dr,wrap:$a,pure:Wm,value:Wm,error:n=>$a(Go.pure(Wt.error(n))),fromResult:n=>$a(Go.pure(n)),fromFuture:n=>$a(n.map(Wt.value)),fromPromise:n=>Dr(s=>{n.then(a=>{s(Wt.value(a))},a=>{s(Wt.error(a))})})},ei=typeof window<"u"?window:Function("return this;")(),Mc=(n,s,a,l)=>{const d=n+s;return d>l?a:d<a?l:d},or=(n,s,a)=>Math.min(Math.max(n,s),a),$i=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let xu=0;const Ct=n=>{const a=new Date().getTime(),l=Math.floor($i()*1e9);return xu++,n+"_"+l+xu+String(a)},Xa=(n,s)=>s,Su=(n,s)=>Tt(n)&&Tt(s)?zo(n,s):s,Al=n=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let l=0;l<s.length;l++){const d=s[l];for(const g in d)mo(d,g)&&(a[g]=n(a[g],d[g]))}return a},zo=Al(Su),ld=Al(Xa),dc=(n,s,a=Gn)=>n.exists(l=>a(l,s)),Qs=(n,s,a=Gn)=>Ia(n,s,a).getOr(n.isNone()&&s.isNone()),_l=n=>{const s=[],a=l=>{s.push(l)};for(let l=0;l<n.length;l++)n[l].each(a);return s},id=n=>{const s=[];for(let a=0;a<n.length;a++){const l=n[a];if(l.isSome())s.push(l.getOrDie());else return A.none()}return A.some(s)},Ia=(n,s,a)=>n.isSome()&&s.isSome()?A.some(a(n.getOrDie(),s.getOrDie())):A.none(),Br=(n,s,a,l)=>n.isSome()&&s.isSome()&&a.isSome()?A.some(l(n.getOrDie(),s.getOrDie(),a.getOrDie())):A.none(),nl=(n,s)=>n!=null?A.some(s(n)):A.none(),$r=(n,s)=>n?A.some(s):A.none(),fh=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Jd=(n,s)=>{let a=s??ei;for(let l=0;l<n.length&&a!==void 0&&a!==null;++l)a=a[n[l]];return a},Pc=(n,s)=>{const a=n.split(".");return Jd(a,s)};Pa.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ol=n=>{const s=[],a=[];return He(n,l=>{l.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},ti=n=>{const s=Pt(A.none()),a=()=>s.get().each(n);return{clear:()=>{a(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(A.some(C))}}},Zm=()=>ti(n=>n.destroy()),_s=()=>ti(n=>n.unbind()),hn=()=>{const n=ti(U);return{...n,on:a=>n.get().each(a)}},Kr=(n,s)=>n+s,Yr=(n,s)=>n.substring(s),Os=(n,s,a)=>s===""||n.length>=s.length&&n.substr(a,a+s.length)===s,em=(n,s)=>ni(n,s)?Yr(n,s.length):n,Ii=(n,s)=>ol(n,s)?n:Kr(n,s),fs=(n,s,a=0,l)=>{const d=n.indexOf(s,a);return d!==-1?Cn(l)?!0:d+s.length<=l:!1},ni=(n,s)=>Os(n,s,0),ol=(n,s)=>Os(n,s,n.length-s.length),vt=(n=>s=>s.replace(n,""))(/^\s+|\s+$/g),oi=n=>n.length>0,pa=n=>!oi(n),Bc=n=>{const s=parseFloat(n);return isNaN(s)?A.none():A.some(s)},Is=(n,s)=>{let a=null,l=null;return{cancel:()=>{Mt(a)||(clearTimeout(a),a=null,l=null)},throttle:(...h)=>{l=h,Mt(a)&&(a=setTimeout(()=>{const C=l;a=null,l=null,n.apply(null,C)},s))}}},eg=(n,s)=>{let a=null;return{cancel:()=>{Mt(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Mt(a)&&(a=setTimeout(()=>{a=null,n.apply(null,g)},s))}}},Qa=(n,s)=>{let a=null;const l=()=>{Mt(a)||(clearTimeout(a),a=null)};return{cancel:l,throttle:(...g)=>{l(),a=setTimeout(()=>{a=null,n.apply(null,g)},s)}}},$c=n=>{let s=!1,a;return(...l)=>(s||(s=!0,a=n.apply(null,l)),a)},Gm="\uFEFF",tg=" ",si=(n,s)=>{const l=(s||document).createElement("div");if(l.innerHTML=n,!l.hasChildNodes()||l.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,n),new Error(d)}return ri(l.childNodes[0])},ng=(n,s)=>{const l=(s||document).createElement(n);return ri(l)},wu=(n,s)=>{const l=(s||document).createTextNode(n);return ri(l)},ri=n=>{if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},at={fromHtml:si,fromTag:ng,fromText:wu,fromDom:ri,fromPoint:(n,s,a)=>A.from(n.dom.elementFromPoint(s,a)).map(ri)},Fi=(n,s)=>{s.fold(a=>{n.setStartBefore(a.dom)},(a,l)=>{n.setStart(a.dom,l)},a=>{n.setStartAfter(a.dom)})},tm=(n,s)=>{s.fold(a=>{n.setEndBefore(a.dom)},(a,l)=>{n.setEnd(a.dom,l)},a=>{n.setEndAfter(a.dom)})},sl=(n,s,a)=>{const l=n.document.createRange();return Fi(l,s),tm(l,a),l},mc=(n,s,a,l,d)=>{const g=n.document.createRange();return g.setStart(s.dom,a),g.setEnd(l.dom,d),g},ud=n=>({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}),ba=n=>{const s=n.getClientRects(),a=s.length>0?s[0]:n.getBoundingClientRect();return a.width>0||a.height>0?A.some(a).map(ud):A.none()},Dl=n=>{const s=n.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(ud):A.none()},Li=Pa.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ai=(n,s,a)=>s(at.fromDom(a.startContainer),a.startOffset,at.fromDom(a.endContainer),a.endOffset),Vo=(n,s)=>s.match({domRange:a=>({ltr:oe(a),rtl:A.none}),relative:(a,l)=>({ltr:$c(()=>sl(n,a,l)),rtl:$c(()=>A.some(sl(n,l,a)))}),exact:(a,l,d,g)=>({ltr:$c(()=>mc(n,a,l,d,g)),rtl:$c(()=>A.some(mc(n,d,g,a,l)))})}),dd=(n,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Li.rtl(at.fromDom(d.endContainer),d.endOffset,at.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>ai(n,Li.ltr,a)):ai(n,Li.ltr,a)},B=(n,s)=>{const a=Vo(n,s);return dd(n,a)},G=(n,s)=>B(n,s).match({ltr:(l,d,g,h)=>{const C=n.document.createRange();return C.setStart(l.dom,d),C.setEnd(g.dom,h),C},rtl:(l,d,g,h)=>{const C=n.document.createRange();return C.setStart(g.dom,h),C.setEnd(l.dom,d),C}});Li.ltr,Li.rtl;const re=9,Pe=11,Ht=1,Jn=3,Uo=(n,s)=>{const a=n.dom;if(a.nodeType!==Ht)return!1;{const l=a;if(l.matches!==void 0)return l.matches(s);if(l.msMatchesSelector!==void 0)return l.msMatchesSelector(s);if(l.webkitMatchesSelector!==void 0)return l.webkitMatchesSelector(s);if(l.mozMatchesSelector!==void 0)return l.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},wr=n=>n.nodeType!==Ht&&n.nodeType!==re&&n.nodeType!==Pe||n.childElementCount===0,Xr=(n,s)=>{const a=s===void 0?document:s.dom;return wr(a)?[]:ye(a.querySelectorAll(n),at.fromDom)},Ja=(n,s)=>{const a=s===void 0?document:s.dom;return wr(a)?A.none():A.from(a.querySelector(n)).map(at.fromDom)},I=(n,s)=>n.dom===s.dom,ee=(n,s)=>{const a=n.dom,l=s.dom;return a===l?!1:a.contains(l)},fe=(n,s,a,l)=>{const d=n.isiOS()&&/ipad/i.test(a)===!0,g=n.isiOS()&&!d,h=n.isiOS()||n.isAndroid(),C=h||l("(pointer:coarse)"),x=d||!g&&h&&l("(min-device-width:768px)"),T=g||h&&!x,_=s.isSafari()&&n.isiOS()&&/safari/i.test(a)===!1,N=!T&&!x&&!_;return{isiPad:oe(d),isiPhone:oe(g),isTablet:oe(x),isPhone:oe(T),isTouch:oe(C),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:oe(_),isDesktop:oe(N)}},_e=(n,s)=>{for(let a=0;a<n.length;a++){const l=n[a];if(l.test(s))return l}},it=(n,s)=>{const a=_e(n,s);if(!a)return{major:0,minor:0};const l=d=>Number(s.replace(a,"$"+d));return wo(l(1),l(2))},It=(n,s)=>{const a=String(s).toLowerCase();return n.length===0?Mn():it(n,a)},Mn=()=>wo(0,0),wo=(n,s)=>({major:n,minor:s}),co={nu:wo,detect:It,unknown:Mn},va=(n,s)=>ha(s.brands,a=>{const l=a.brand.toLowerCase();return Lt(n,d=>l===d.brand?.toLowerCase()).map(d=>({current:d.name,version:co.nu(parseInt(a.version,10),0)}))}),Zs=(n,s)=>{const a=String(s).toLowerCase();return Lt(n,l=>l.search(a))},Tu=(n,s)=>Zs(n,s).map(a=>{const l=co.detect(a.versionRegexes,s);return{current:a.name,version:l}}),qm=(n,s)=>Zs(n,s).map(a=>{const l=co.detect(a.versionRegexes,s);return{current:a.name,version:l}}),nm=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Rl=n=>s=>fs(s,n),Kb=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>fs(n,"edge/")&&fs(n,"chrome")&&fs(n,"safari")&&fs(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,nm],search:n=>fs(n,"chrome")&&!fs(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>fs(n,"msie")||fs(n,"trident")},{name:"Opera",versionRegexes:[nm,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rl("firefox")},{name:"Safari",versionRegexes:[nm,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(fs(n,"safari")||fs(n,"mobile/"))&&fs(n,"applewebkit")}],Yb=[{name:"Windows",search:Rl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>fs(n,"iphone")||fs(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Rl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rl("linux"),versionRegexes:[]},{name:"Solaris",search:Rl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Lp={browsers:oe(Kb),oses:oe(Yb)},Nl="Edge",Xb="Chromium",Qb="IE",Uy="Opera",Hi="Firefox",jy="Safari",Wy=()=>Hp({current:void 0,version:co.unknown()}),Hp=n=>{const s=n.current,a=n.version,l=d=>()=>s===d;return{current:s,version:a,isEdge:l(Nl),isChromium:l(Xb),isIE:l(Qb),isOpera:l(Uy),isFirefox:l(Hi),isSafari:l(jy)}},zp={unknown:Wy,nu:Hp},MS="Windows",Zy="iOS",Vp="Android",zi="Linux",rl="macOS",om="Solaris",Gy="FreeBSD",fo="ChromeOS",qy=()=>gh({current:void 0,version:co.unknown()}),gh=n=>{const s=n.current,a=n.version,l=d=>()=>s===d;return{current:s,version:a,isWindows:l(MS),isiOS:l(Zy),isAndroid:l(Vp),isMacOS:l(rl),isLinux:l(zi),isSolaris:l(om),isFreeBSD:l(Gy),isChromeOS:l(fo)}},Js={unknown:qy,nu:gh},Up={detect:(n,s,a)=>{const l=Lp.browsers(),d=Lp.oses(),g=s.bind(x=>va(l,x)).orThunk(()=>Tu(l,n)).fold(zp.unknown,zp.nu),h=qm(d,n).fold(Js.unknown,Js.nu),C=fe(h,g,n,a);return{browser:g,os:h,deviceType:C}}},BS=n=>window.matchMedia(n).matches;let Jb=$c(()=>Up.detect(window.navigator.userAgent,A.from(window.navigator.userAgentData),BS));const Gs=()=>Jb(),sm=(n,s)=>Pc(n,s),Ky=(n,s)=>{const a=sm(n,s);if(a==null)throw new Error(n+" not available on this browser");return a},Je=Object.getPrototypeOf,Ic=n=>Ky("HTMLElement",n),og=n=>{const s=Pc("ownerDocument.defaultView",n);return et(n)&&(Ic(s).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(Je(n).constructor.name))},Ml=n=>n.dom.nodeName.toLowerCase(),Km=n=>n.dom.nodeType,jp=n=>s=>Km(s)===n,te=n=>fc(n)&&og(n.dom),fc=jp(Ht),md=jp(Jn),Wp=jp(re),Ym=jp(Pe),ya=n=>s=>fc(s)&&Ml(s)===n,gc=n=>at.fromDom(n.dom.ownerDocument),Zp=n=>Wp(n)?n:gc(n),Gp=n=>at.fromDom(Zp(n).dom.documentElement),sg=n=>at.fromDom(Zp(n).dom.defaultView),hc=n=>A.from(n.dom.parentNode).map(at.fromDom),qp=n=>hc(n),Vi=n=>A.from(n.dom.parentElement).map(at.fromDom),rg=(n,s)=>{const a=Xe(s)?s:an;let l=n.dom;const d=[];for(;l.parentNode!==null&&l.parentNode!==void 0;){const g=l.parentNode,h=at.fromDom(g);if(d.push(h),a(h)===!0)break;l=g}return d},Kp=n=>A.from(n.dom.offsetParent).map(at.fromDom),Fc=n=>A.from(n.dom.previousSibling).map(at.fromDom),Yp=n=>A.from(n.dom.nextSibling).map(at.fromDom),ci=n=>ye(n.dom.childNodes,at.fromDom),fd=(n,s)=>{const a=n.dom.childNodes;return A.from(a[s]).map(at.fromDom)},Qn=n=>fd(n,0),ec=(n,s)=>({element:n,offset:s}),Xm=(n,s)=>{const a=ci(n);return a.length>0&&s<a.length?ec(a[s],0):ec(n,s)},e0=(n,s,a,l)=>{const g=gc(n).dom.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,l),g},Hn=(n,s,a,l)=>{const d=e0(n,s,a,l),g=I(n,a)&&s===l;return d.collapsed&&!g},ku=n=>Ym(n)&&un(n.dom.host),fr=n=>at.fromDom(n.dom.getRootNode()),li=n=>ku(n)?n:at.fromDom(Zp(n).dom.body),ii=n=>Fs(n).isSome(),Fs=n=>{const s=fr(n);return ku(s)?A.some(s):A.none()},Eo=n=>at.fromDom(n.dom.host),Yy=n=>{if(un(n.target)){const s=at.fromDom(n.target);if(fc(s)&&Xy(s)&&n.composed&&n.composedPath){const a=n.composedPath();if(a)return Oo(a)}}return A.from(n.target)},Xy=n=>un(n.dom.shadowRoot),gr=(n,s,a,l,d,g,h)=>({target:n,x:s,y:a,stop:l,prevent:d,kill:g,raw:h}),Pl=n=>{const s=at.fromDom(Yy(n).getOr(n.target)),a=()=>n.stopPropagation(),l=()=>n.preventDefault(),d=On(l,a);return gr(s,n.clientX,n.clientY,a,l,d,n)},Bl=(n,s)=>a=>{n(a)&&s(Pl(a))},hr=(n,s,a,l,d)=>{const g=Bl(a,l);return n.dom.addEventListener(s,g,d),{unbind:jt(Lc,n,s,g,d)}},ui=(n,s,a,l)=>hr(n,s,a,l,!1),tc=(n,s,a,l)=>hr(n,s,a,l,!0),Lc=(n,s,a,l)=>{n.dom.removeEventListener(s,a,l)},Ca=St,Do=(n,s,a)=>ui(n,s,Ca,a),al=(n,s,a)=>tc(n,s,Ca,a),nc=Pl,Qr=()=>at.fromDom(document),Ir=(n,s=!1)=>n.dom.focus({preventScroll:s}),Ds=n=>n.dom.blur(),$l=n=>{const s=fr(n).dom;return n.dom===s.activeElement},Fr=(n=Qr())=>A.from(n.dom.activeElement).map(at.fromDom),sr=n=>Fr(fr(n)).filter(s=>n.dom.contains(s.dom)),gd=(n,s)=>{hc(n).each(l=>{l.dom.insertBefore(s.dom,n.dom)})},Xp=(n,s)=>{Yp(n).fold(()=>{hc(n).each(d=>{Lr(d,s)})},l=>{gd(l,s)})},hh=(n,s)=>{Qn(n).fold(()=>{Lr(n,s)},l=>{n.dom.insertBefore(s.dom,l.dom)})},Lr=(n,s)=>{n.dom.appendChild(s.dom)},Qp=(n,s,a)=>{fd(n,a).fold(()=>{Lr(n,s)},l=>{gd(l,s)})},t0=(n,s)=>{He(s,a=>{Lr(n,a)})},rm=(n,s,a)=>{if(De(a)||vn(a)||In(a))n.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",n),new Error("Attribute value was not simple")},ln=(n,s,a)=>{rm(n.dom,s,a)},Jp=(n,s)=>{const a=n.dom;ms(s,(l,d)=>{rm(a,d,l)})},Rr=(n,s)=>{const a=n.dom.getAttribute(s);return a===null?void 0:a},Jr=(n,s)=>A.from(Rr(n,s)),ea=(n,s)=>{const a=n.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},gs=(n,s)=>{n.dom.removeAttribute(s)},hd=n=>ao(n.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),ph=n=>{n.dom.textContent="",He(ci(n),s=>{cl(s)})},cl=n=>{const s=n.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},di=(n,s)=>at.fromDom(n.dom.cloneNode(s)),ag=n=>di(n,!1),bh=n=>di(n,!0),cg=(n,s)=>{const l=(s||document).createElement("div");return l.innerHTML=n,ci(at.fromDom(l))},Ui=n=>n.dom.innerHTML,Il=(n,s)=>{const l=gc(n).dom,d=at.fromDom(l.createDocumentFragment()),g=cg(s,l);t0(d,g),ph(n),Lr(n,d)},e1=n=>{const s=at.fromTag("div"),a=at.fromDom(n.dom.cloneNode(!0));return Lr(s,a),Ui(s)},la=n=>{if(ku(n))return"#shadow-root";{const s=ag(n);return e1(s)}},ll=n=>new Promise((s,a)=>{const l=()=>{g(),s(n)},d=[Do(n,"load",l),Do(n,"error",()=>{g(),a("Unable to load data from image: "+n.dom.src)})],g=()=>He(d,h=>h.unbind());n.dom.complete&&l()}),ji=n=>n.style!==void 0&&Xe(n.style.getPropertyValue),bo=n=>{const s=md(n)?n.dom.parentNode:n.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Fs(at.fromDom(s)).fold(()=>a.body.contains(s),Ot(bo,Eo))},Hc=()=>n0(at.fromDom(document)),n0=n=>{const s=n.dom.body;if(s==null)throw new Error("Body is not available yet");return at.fromDom(s)},lg=(n,s,a)=>{if(!De(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",n),new Error("CSS value must be a string: "+a);ji(n)&&n.style.setProperty(s,a)},il=(n,s)=>{ji(n)&&n.style.removeProperty(s)},gn=(n,s,a)=>{const l=n.dom;lg(l,s,a)},ws=(n,s)=>{const a=n.dom;ms(s,(l,d)=>{lg(a,d,l)})},ta=(n,s)=>{const a=n.dom;ms(s,(l,d)=>{l.fold(()=>{il(a,d)},g=>{lg(a,d,g)})})},hs=(n,s)=>{const a=n.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!bo(n)?ul(a,s):d},ul=(n,s)=>ji(n)?n.style.getPropertyValue(s):"",xs=(n,s)=>{const a=n.dom,l=ul(a,s);return A.from(l).filter(d=>d.length>0)},rr=n=>{const s={},a=n.dom;if(ji(a))for(let l=0;l<a.style.length;l++){const d=a.style.item(l);s[d]=a.style[d]}return s},Qm=(n,s,a)=>{const l=at.fromTag(n);return gn(l,s,a),xs(l,s).isSome()},Kn=(n,s)=>{const a=n.dom;il(a,s),dc(Jr(n,"style").map(vt),"")&&gs(n,"style")},Fl=n=>n.dom.offsetWidth,Ko=(n,s)=>{const a=(C,x)=>{if(!In(x)&&!x.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+x);const T=C.dom;ji(T)&&(T.style[n]=x+"px")},l=C=>{const x=s(C);if(x<=0||x===null){const T=hs(C,n);return parseFloat(T)||0}return x},d=l,g=(C,x)=>ao(x,(T,_)=>{const N=hs(C,_),L=N===void 0?0:parseInt(N,10);return isNaN(L)?T:T+L},0);return{set:a,get:l,getOuter:d,aggregate:g,max:(C,x,T)=>{const _=g(C,T);return x>_?x-_:0}}},pc=Ko("height",n=>{const s=n.dom;return bo(n)?s.getBoundingClientRect().height:s.offsetHeight}),pr=n=>pc.get(n),br=n=>pc.getOuter(n),Wi=(n,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],l=pc.max(n,s,a);gn(n,"max-height",l+"px")},Jm=n=>n.offsetWidth<=0&&n.offsetHeight<=0,Au=n=>!Jm(n.dom),pd=Ko("width",n=>{const s=n.dom;return bo(n)?s.getBoundingClientRect().width:s.offsetWidth}),bd=(n,s)=>pd.set(n,s),ia=n=>pd.get(n),_u=n=>pd.getOuter(n),Qy=(n,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],l=pd.max(n,s,a);gn(n,"max-width",l+"px")},vd=(n,s)=>({left:n,top:s,translate:(l,d)=>vd(n+l,s+d)}),Po=vd,t1=n=>{const s=n.getBoundingClientRect();return Po(s.left,s.top)},ef=(n,s)=>n!==void 0?n:s!==void 0?s:0,xa=n=>{const s=n.dom.ownerDocument,a=s.body,l=s.defaultView,d=s.documentElement;if(a===n.dom)return Po(a.offsetLeft,a.offsetTop);const g=ef(l?.pageYOffset,d.scrollTop),h=ef(l?.pageXOffset,d.scrollLeft),C=ef(d.clientTop,a.clientTop),x=ef(d.clientLeft,a.clientLeft);return bc(n).translate(h-x,g-C)},bc=n=>{const s=n.dom,l=s.ownerDocument.body;return l===s?Po(l.offsetLeft,l.offsetTop):bo(n)?t1(s):Po(0,0)},Hs=n=>{const s=n!==void 0?n.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,l=s.body.scrollTop||s.documentElement.scrollTop;return Po(a,l)},Ou=(n,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(n,s)},tf=((n,s)=>{const a=g=>{if(!n(g))throw new Error("Can only get "+s+" value of a "+s+" node");return l(g).getOr("")},l=g=>n(g)?A.from(g.dom.nodeValue):A.none();return{get:a,getOption:l,set:(g,h)=>{if(!n(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(md,"text"),vh=n=>tf.get(n),n1=(n,s)=>a=>$S(a)==="rtl"?s:n,$S=n=>hs(n,"direction")==="rtl"?"rtl":"ltr",mi=(n,s)=>{const a=Rr(n,s);return a===void 0||a===""?[]:a.split(" ")},Jy=(n,s,a)=>{const d=mi(n,s).concat([a]);return ln(n,s,d.join(" ")),!0},o1=(n,s,a)=>{const l=Ln(mi(n,s),d=>d!==a);return l.length>0?ln(n,s,l.join(" ")):gs(n,s),!1};var fi=(n,s,a,l,d)=>n(a,l)?A.some(a):Xe(d)&&d(a)?A.none():s(a,l,d);const o0=(n,s,a)=>{let l=n.dom;const d=Xe(a)?a:an;for(;l.parentNode;){l=l.parentNode;const g=at.fromDom(l);if(s(g))return A.some(g);if(d(g))break}return A.none()},nf=(n,s,a)=>fi((d,g)=>g(d),o0,n,s,a),ig=(n,s)=>{const a=n.dom;return a.parentNode?ug(at.fromDom(a.parentNode),l=>!I(n,l)&&s(l)):A.none()},ug=(n,s)=>{const a=d=>s(at.fromDom(d));return Lt(n.dom.childNodes,a).map(at.fromDom)},s1=(n,s)=>{const a=l=>{for(let d=0;d<l.childNodes.length;d++){const g=at.fromDom(l.childNodes[d]);if(s(g))return A.some(g);const h=a(l.childNodes[d]);if(h.isSome())return h}return A.none()};return a(n.dom)},s0=n=>Ja(n),Ll=(n,s,a)=>o0(n,l=>Uo(l,s),a),e2=(n,s)=>ig(n,a=>Uo(a,s)),yd=(n,s)=>ug(n,a=>Uo(a,s)),Bo=(n,s)=>Ja(s,n),Sa=(n,s,a)=>fi((d,g)=>Uo(d,g),Ll,n,s,a),Zi=(n,s)=>{n.dom.checked=s},r1=n=>n.dom.checked,Cd=n=>n.dom.classList!==void 0,a1=n=>mi(n,"class"),r0=(n,s)=>Jy(n,"class",s),Gi=(n,s)=>o1(n,"class",s),qi=(n,s)=>bt(a1(n),s)?Gi(n,s):r0(n,s),jo=(n,s)=>{Cd(n)?n.dom.classList.add(s):r0(n,s)},a0=n=>{(Cd(n)?n.dom.classList:a1(n)).length===0&&gs(n,"class")},Rs=(n,s)=>{Cd(n)?n.dom.classList.remove(s):Gi(n,s),a0(n)},of=(n,s)=>{const a=Cd(n)?n.dom.classList.toggle(s):qi(n,s);return a0(n),a},cr=(n,s)=>Cd(n)&&n.dom.classList.contains(s),Ki=(n,s)=>{He(s,a=>{jo(n,a)})},ua=(n,s)=>{He(s,a=>{Rs(n,a)})},Du=(n,s)=>{He(s,a=>{of(n,a)})},yh=(n,s)=>We(s,a=>cr(n,a)),c1=n=>{const s=n.dom.classList,a=new Array(s.length);for(let l=0;l<s.length;l++){const d=s.item(l);d!==null&&(a[l]=d)}return a},l1=n=>Cd(n)?c1(n):a1(n),t2=n=>n.dom.textContent,vc=n=>n.dom.value,gi=(n,s)=>{if(s===void 0)throw new Error("Value.set was undefined");n.dom.value=s},lr=(n,s,a)=>Ln(rg(n,a),s),Hr=(n,s)=>Xr(s,n),Ch=(n,s,a)=>nf(n,s,a).isSome(),dg=(n,s,a)=>Sa(n,s,a).isSome(),xh=n=>Xe(n)?n:an,c0=(n,s,a)=>{let l=n.dom;const d=xh(a);for(;l.parentNode;){l=l.parentNode;const g=at.fromDom(l),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Hl=(n,s,a)=>{const l=s(n),d=xh(a);return l.orThunk(()=>d(n)?A.none():c0(n,s,d))},w={create:(n,s,a,l)=>({start:n,soffset:s,finish:a,foffset:l})},k=Pa.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),F=(n,s,a,l)=>n.fold(s,a,l),q=n=>n.fold(Yt,Yt,Yt),me=k.before,Ne=k.on,gt=k.after,Zt={before:me,on:Ne,after:gt,cata:F,getStart:q},Dn=Pa.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Vn=n=>Dn.exact(n.start,n.soffset,n.finish,n.foffset),rs=n=>n.match({domRange:s=>at.fromDom(s.startContainer),relative:(s,a)=>Zt.getStart(s),exact:(s,a,l,d)=>s}),Es=Dn.domRange,ir=Dn.relative,zc=Dn.exact,hi=n=>{const s=rs(n);return sg(s)},Ru=w.create,zl={domRange:Es,relative:ir,exact:zc,exactFromRange:Vn,getWin:hi,range:Ru},i1=n=>A.from(n.getSelection()),sf=n=>{if(n.rangeCount>0){const s=n.getRangeAt(0),a=n.getRangeAt(n.rangeCount-1);return A.some(w.create(at.fromDom(s.startContainer),s.startOffset,at.fromDom(a.endContainer),a.endOffset))}else return A.none()},mg=n=>{if(n.anchorNode===null||n.focusNode===null)return sf(n);{const s=at.fromDom(n.anchorNode),a=at.fromDom(n.focusNode);return Hn(s,n.anchorOffset,a,n.focusOffset)?A.some(w.create(s,n.anchorOffset,a,n.focusOffset)):sf(n)}},fg=n=>i1(n).filter(s=>s.rangeCount>0).bind(mg),gg=(n,s)=>{const a=G(n,s);return ba(a)},rf=(n,s)=>{const a=G(n,s);return Dl(a)},Sh={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},n2=(()=>{const n="[0-9]+",a="[eE]"+("[+-]?"+n),l="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",n+l+d(n)+d(a),l+n+d(a),n+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),o2=(n,s)=>cn(s,a=>cn(Sh[a],l=>n===l)),vo=(n,s)=>A.from(n2.exec(n)).bind(l=>{const d=Number(l[1]),g=l[2];return o2(g,s)?A.some({value:d,unit:g}):A.none()}),zs=(n,s)=>vo(n,s).map(({value:a,unit:l})=>a+l),qs=n=>{const s=n===void 0?window:n;return Gs().browser.isFirefox()?A.none():A.from(s.visualViewport)},wa=(n,s,a,l)=>({x:n,y:s,width:a,height:l,right:n+a,bottom:s+l}),wh=n=>{const s=n===void 0?window:n,a=s.document,l=Hs(at.fromDom(a));return qs(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return wa(l.left,l.top,g,h)},d=>wa(Math.max(d.pageLeft,l.left),Math.max(d.pageTop,l.top),d.width,d.height))},hg=(n,s)=>n.view(s).fold(oe([]),l=>{const d=n.owner(l),g=hg(n,d);return[l].concat(g)}),Eh=(n,s)=>{const a=s.owner(n),l=hg(s,a);return A.some(l)};var am=Object.freeze({__proto__:null,view:n=>(n.dom===document?A.none():A.from(n.dom.defaultView?.frameElement)).map(at.fromDom),owner:n=>gc(n)});const u1=n=>{const s=Qr(),a=Hs(s);return Eh(n,am).fold(jt(xa,n),d=>{const g=bc(n),h=oo(d,(C,x)=>{const T=bc(x);return{left:C.left+T.left,top:C.top+T.top}},{left:0,top:0});return Po(h.left+g.left+a.left,h.top+g.top+a.top)})},af=(n,s,a)=>({point:n,width:s,height:a}),Lk=(n,s,a,l)=>({x:n,y:s,width:a,height:l}),Nr=(n,s,a,l)=>({x:n,y:s,width:a,height:l,right:n+a,bottom:s+l}),Er=n=>{const s=xa(n),a=_u(n),l=br(n);return Nr(s.left,s.top,a,l)},cf=n=>{const s=u1(n),a=_u(n),l=br(n);return Nr(s.left,s.top,a,l)},cm=(n,s)=>{const a=Math.max(n.x,s.x),l=Math.max(n.y,s.y),d=Math.min(n.right,s.right),g=Math.min(n.bottom,s.bottom),h=d-a,C=g-l;return Nr(a,l,h,C)},s2=(n,s)=>ao(s,(a,l)=>cm(a,l),n),Fa=()=>wh(window),r2=(n,s)=>I(n.element,s.event.target),lf=n=>(dc(xs(n,"position"),"fixed")?A.none():Kp(n)).orThunk(()=>{const l=at.fromTag("span");return hc(n).bind(d=>{Lr(d,l);const g=Kp(l);return cl(l),g})}),l0=n=>lf(n).map(xa).getOrThunk(()=>Po(0,0)),Vl=(n,s)=>{const a=A.from(Rr(n,"id")).getOrThunk(()=>{const l=Ct("aria");return ln(s,"id",l),l});ln(n,"aria-describedby",a)},a2=n=>{gs(n,"aria-describedby")};var dl;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(dl||(dl={}));const er=(n,s,a)=>n.stype===dl.Error?s(n.serror):a(n.svalue),i0=n=>{const s=[],a=[];return He(n,l=>{er(l,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},kh=(n,s)=>n.stype===dl.Error?{stype:dl.Error,serror:s(n.serror)}:n,LS=(n,s)=>n.stype===dl.Value?{stype:dl.Value,svalue:s(n.svalue)}:n,c2=(n,s)=>n.stype===dl.Value?s(n.svalue):n,HS=(n,s)=>n.stype===dl.Error?s(n.serror):n,zS=n=>({stype:dl.Value,svalue:n}),u0=n=>({stype:dl.Error,serror:n}),pt={fromResult:n=>n.fold(u0,zS),toResult:n=>er(n,Wt.error,Wt.value),svalue:zS,partition:i0,serror:u0,bind:c2,bindError:HS,map:LS,mapError:kh,fold:er},Vc=n=>et(n)&&xo(n).length>100?" removed due to size":JSON.stringify(n,null,2),Hk=n=>{const s=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:oe("... (only showing first ten failures)")}]):n;return ye(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},yc=(n,s)=>pt.serror([{path:n,getErrorInfo:s}]),pi=(n,s,a)=>yc(n,()=>'Could not find valid *required* value for "'+s+'" in '+Vc(a)),m0=(n,s)=>yc(n,()=>'Choice schema did not contain choice key: "'+s+'"'),zk=(n,s,a)=>yc(n,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Vc(s)),uf=(n,s)=>yc(n,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Vk=(n,s)=>yc(n,oe(s)),Uc=n=>{const s=(l,d)=>pt.bindError(n(d),g=>Vk(l,g)),a=oe("val");return{extract:s,toString:a}},VS=Uc(pt.svalue),bi=oe(VS),tt=(n,s)=>Uc(a=>{const l=typeof a;return n(a)?pt.svalue(a):pt.serror(`Expected type: ${s} but got: ${l}`)}),l2=tt(In,"number"),zr=tt(De,"string"),zn=tt(vn,"boolean"),lm=tt(Xe,"function"),_h=n=>{if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(s=>_h(n[s]));default:return!1}},Vs=Uc(n=>_h(n)?pt.svalue(n):pt.serror("Expected value to be acceptable for sending via postMessage")),vi=()=>({tag:"required",process:{}}),d1=n=>({tag:"defaultedThunk",process:n}),ml=n=>d1(oe(n)),Ts=()=>({tag:"option",process:{}}),im=n=>({tag:"mergeWithThunk",process:n}),Oh=n=>im(oe(n)),i2=(n,s,a,l)=>({tag:"field",key:n,newKey:s,presence:a,prop:l}),u2=(n,s)=>({tag:"custom",newKey:n,instantiator:s}),yi=(n,s,a)=>{switch(n.tag){case"field":return s(n.key,n.newKey,n.presence,n.prop);case"custom":return a(n.newKey,n.instantiator)}},m1=(n,s)=>pt.svalue(zo(s,ld.apply(void 0,n))),f1=n=>On(pt.serror,en)(n),g1={consolidateObj:(n,s)=>{const a=pt.partition(n);return a.errors.length>0?f1(a.errors):m1(a.values,s)},consolidateArr:n=>{const s=pt.partition(n);return s.errors.length>0?f1(s.errors):pt.svalue(s.values)}},m2=(n,s,a,l)=>Vt(s,a).fold(()=>pi(n,a,s),l),f0=(n,s,a,l)=>{const d=Vt(n,s).getOrThunk(()=>a(n));return l(d)},jk=(n,s,a)=>a(Vt(n,s)),Wk=(n,s,a,l)=>{const d=Vt(n,s).map(g=>g===!0?a(n):g);return l(d)},f2=(n,s,a,l,d)=>{const g=C=>d.extract(s.concat([l]),C),h=C=>C.fold(()=>pt.svalue(A.none()),x=>{const T=d.extract(s.concat([l]),x);return pt.map(T,A.some)});switch(n.tag){case"required":return m2(s,a,l,g);case"defaultedThunk":return f0(a,l,n.process,g);case"option":return jk(a,l,h);case"defaultedOptionThunk":return Wk(a,l,n.process,h);case"mergeWithThunk":return f0(a,l,oe({}),C=>{const x=zo(n.process(a),C);return g(x)})}},Zk=(n,s,a)=>{const l={},d=[];for(const g of a)yi(g,(h,C,x,T)=>{const _=f2(x,n,s,h,T);pt.fold(_,N=>{d.push(...N)},N=>{l[C]=N})},(h,C)=>{l[h]=C(s)});return d.length>0?pt.serror(d):pt.svalue(l)},h1=n=>({extract:(l,d)=>n().extract(l,d),toString:()=>n().toString()}),o5=n=>xo(mr(n,un)),fl=n=>{const s=on(n),a=oo(n,(d,g)=>yi(g,h=>zo(d,{[h]:!0}),oe(d)),{});return{extract:(d,g)=>{const h=vn(g)?[]:o5(g),C=Ln(h,x=>!Un(a,x));return C.length===0?s.extract(d,g):uf(d,C)},toString:s.toString}},on=n=>({extract:(l,d)=>Zk(l,d,n),toString:()=>`obj{
`+ye(n,d=>yi(d,(g,h,C,x)=>g+" -> "+x.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),tr=n=>({extract:(l,d)=>{const g=ye(d,(h,C)=>n.extract(l.concat(["["+C+"]"]),h));return g1.consolidateArr(g)},toString:()=>"array("+n.toString()+")"}),Dh=(n,s)=>{const a=s!==void 0?s:Yt;return{extract:(g,h)=>{const C=[];for(const x of n){const T=x.extract(g,h);if(T.stype===dl.Value)return{stype:dl.Value,svalue:a(T.svalue)};C.push(T)}return g1.consolidateArr(C)},toString:()=>"oneOf("+ye(n,g=>g.toString()).join(", ")+")"}},US=(n,s)=>{const a=(g,h)=>tr(Uc(n)).extract(g,h);return{extract:(g,h)=>{const C=xo(h),x=a(g,C);return pt.bind(x,T=>{const _=ye(T,N=>i2(N,N,vi(),s));return on(_).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},pg=(n,s)=>{const a=$c(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Rh=On(tr,on),g2=(n,s,a,l)=>Vt(a,l).fold(()=>zk(n,a,l),g=>g.extract(n.concat(["branch: "+l]),s)),bg=(n,s)=>({extract:(d,g)=>Vt(g,n).fold(()=>m0(d,n),C=>g2(d,g,s,C)),toString:()=>"chooseOn("+n+"). Possible values: "+xo(s)}),jS=()=>tr(VS),xd=n=>Uc(s=>n(s).fold(pt.serror,pt.svalue)),WS=(n,s)=>US(a=>pt.fromResult(n(a)),s),h2=(n,s,a)=>{const l=s.extract([n],a);return pt.mapError(l,d=>({input:a,errors:d}))},Ls=(n,s,a)=>pt.toResult(h2(n,s,a)),Ci=n=>n.fold(s=>{throw new Error(Nh(s))},Yt),Cc=(n,s,a)=>Ci(Ls(n,s,a)),Nh=n=>`Errors: 
`+Hk(n.errors).join(`
`)+`

Input object: `+Vc(n.input),xc=(n,s)=>bg(n,$s(s,on)),vg=(n,s)=>pg(n,s),na=i2,Sc=u2,g0=n=>xd(s=>bt(n,s)?Wt.value(s):Wt.error(`Unsupported value: "${s}", choose one of "${n.join(", ")}".`)),Ze=n=>na(n,n,vi(),bi()),jc=(n,s)=>na(n,n,vi(),s),p1=n=>jc(n,l2),Ks=n=>jc(n,zr),Yi=(n,s)=>na(n,n,vi(),g0(s)),gl=n=>jc(n,lm),Gk=(n,s)=>na(n,n,Ts(),Uc(a=>pt.serror("The field: "+n+" is forbidden. "+s))),Sd=(n,s)=>na(n,n,vi(),on(s)),ZS=(n,s)=>na(n,n,vi(),Rh(s)),Wc=(n,s)=>na(n,n,vi(),tr(s)),Lo=n=>na(n,n,Ts(),bi()),Nu=(n,s)=>na(n,n,Ts(),s),Mh=n=>Nu(n,l2),Ys=n=>Nu(n,zr),p2=(n,s)=>Nu(n,g0(s)),b2=n=>Nu(n,zn),Xi=n=>Nu(n,lm),h0=(n,s)=>Nu(n,tr(s)),Zc=(n,s)=>Nu(n,on(s)),qk=(n,s)=>Nu(n,fl(s)),we=(n,s)=>na(n,n,ml(s),bi()),Ul=(n,s,a)=>na(n,n,ml(s),a),b1=(n,s)=>Ul(n,s,l2),Us=(n,s)=>Ul(n,s,zr),wc=(n,s,a)=>Ul(n,s,g0(a)),Vr=(n,s)=>Ul(n,s,zn),ls=(n,s)=>Ul(n,s,lm),GS=(n,s)=>Ul(n,s,Vs),df=(n,s,a)=>Ul(n,s,tr(a)),mf=(n,s,a)=>Ul(n,s,on(a)),Ph=(n,s)=>{const a={};return ms(n,(l,d)=>{bt(s,d)||(a[d]=l)}),a},v1=(n,s)=>({[n]:s}),v2=n=>{const s={};return He(n,a=>{s[a.key]=a.value}),s},y2=(n,s)=>Ph(n,s),ff=(n,s)=>v1(n,s),Bh=n=>v2(n),qS=(n,s)=>n.length===0?Wt.value(s):Wt.value(zo(s,ld.apply(void 0,n))),C2=n=>Wt.error(en(n)),Kk=(n,s)=>{const a=Ol(n);return a.errors.length>0?C2(a.errors):qS(a.values,s)},La=oe,hl=La("touchstart"),ur=La("touchmove"),gf=La("touchend"),y1=La("touchcancel"),Gc=La("mousedown"),$h=La("mousemove"),Mr=La("mouseout"),p0=La("mouseup"),jl=La("mouseover"),Qi=La("focusin"),x2=La("focusout"),oa=La("keydown"),Ih=La("keyup"),Mu=La("input"),yg=La("change"),Cg=La("click"),Yk=La("transitioncancel"),b0=La("transitionend"),um=La("transitionstart"),C1=La("selectstart"),is=n=>oe("alloy."+n),KS={tap:is("tap")},dm=is("focus"),Fh=is("blur.post"),v0=is("paste.post"),mm=is("receive"),Ea=is("execute"),xg=is("focus.item"),Lh=KS.tap,y0=is("longpress"),C0=is("sandbox.close"),x0=is("typeahead.cancel"),x1=is("system.init"),YS=is("system.touchmove"),S2=is("system.touchend"),w2=is("system.scroll"),Hh=is("system.resize"),Pu=is("system.attached"),xi=is("system.detached"),fm=is("system.dismissRequested"),XS=is("system.repositionRequested"),S0=is("focusmanager.shifted"),E2=is("slotcontainer.visibility"),QS=is("system.external.element.scroll"),T2=is("change.tab"),w0=is("dismiss.tab"),E0=is("highlight"),T0=is("dehighlight"),Bu=n=>la(n),S1="unknown";var zh;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(zh||(zh={}));const Sg=Pt({}),JS=(n,s)=>{const a=[],l=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();bt(["mousemove","mouseover","mouseout",x1()],n)||console.log(n,{event:n,time:d-l,target:s.dom,sequence:ye(a,g=>bt(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Bu(g.target)+")":g.outcome)})}}},Vh=(n,s,a)=>{switch(Vt(Sg.get(),n).orThunk(()=>{const d=xo(Sg.get());return ha(d,g=>n.indexOf(g)>-1?A.some(Sg.get()[g]):A.none())}).getOr(zh.NORMAL)){case zh.NORMAL:return a(k0());case zh.LOGGING:{const d=JS(n,s),g=a(d);return d.write(),g}case zh.STOP:return!0}},Ec=["alloy/data/Fields","alloy/debugging/Debugging"],Xk=()=>{const n=new Error;if(n.stack!==void 0){const s=n.stack.split(`
`);return Lt(s,a=>a.indexOf("alloy")>0&&!cn(Ec,l=>a.indexOf(l)>-1)).getOr(S1)}else return S1},k2={logEventCut:U,logEventStopped:U,logNoParent:U,logEventNoHandlers:U,logEventResponse:U,write:U},A2=(n,s,a)=>Vh(n,s,a),k0=oe(k2),ew=oe([Ze("menu"),Ze("selectedMenu")]),wg=oe([Ze("item"),Ze("selectedItem")]);oe(on(wg().concat(ew())));const tw=oe(on(wg())),w1=Sd("initSize",[Ze("numColumns"),Ze("numRows")]),_2=()=>jc("markers",tw()),nw=()=>Sd("markers",[Ze("backgroundMenu")].concat(ew()).concat(wg())),lo=n=>Sd("markers",ye(n,Ze)),A0=(n,s,a)=>(Xk(),na(s,s,a,xd(l=>Wt.value((...d)=>l.apply(void 0,d))))),yo=n=>A0("onHandler",n,ml(U)),pl=n=>A0("onKeyboardHandler",n,ml(A.none)),hf=n=>A0("onHandler",n,vi()),E1=n=>A0("onKeyboardHandler",n,vi()),Ro=(n,s)=>Sc(n,oe(s)),ow=n=>Sc(n,Yt),sw=oe(w1),Qk=(n,s,a)=>{const l=a.toString(),d=l.indexOf(")")+1,g=l.indexOf("("),h=l.substring(g+1,d-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:Eg(h.slice(0,1).concat(h.slice(3)))}),n},Eg=n=>ye(n,s=>ol(s,"/*")?s.substring(0,s.length-2):s),T1=(n,s)=>{const a=n.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:Eg(g)}),n},rw=(n,s)=>{const a=s.toString(),l=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,l-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Eg(g.slice(1))}),n},Jk=(n,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{n.apply(null,g),a=null},s)}}},e3=5,aw=400,cw=n=>{const s=n.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},t3=(n,s)=>{const a=Math.abs(n.clientX-s.x),l=Math.abs(n.clientY-s.y);return a>e3||l>e3},n3=n=>{const s=hn(),a=Pt(!1),l=Jk(T=>{n.triggerEvent(y0(),T),a.set(!0)},aw),d=T=>(cw(T).each(_=>{l.cancel();const N={x:_.clientX,y:_.clientY,target:T.target};l.schedule(T),a.set(!1),s.set(N)}),A.none()),g=T=>(l.cancel(),cw(T).each(_=>{s.on(N=>{t3(_,N)&&s.clear()})}),A.none()),h=T=>{l.cancel();const _=N=>I(N.target,T.target);return s.get().filter(_).map(N=>a.get()?(T.prevent(),!1):n.triggerEvent(Lh(),T))},C=Bh([{key:hl(),value:d},{key:ur(),value:g},{key:gf(),value:h}]);return{fireIfReady:(T,_)=>Vt(C,_).bind(N=>N(T))}};var Tg;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(Tg||(Tg={}));const bl="placeholder",Ur=Pa.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),pf=n=>mo(n,"uiType"),Ji=(n,s,a,l)=>n.exists(d=>d!==a.owner)?Ur.single(!0,oe(a)):Vt(l,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+xo(l)+`]
Namespace: `+n.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),wd=(n,s,a,l)=>pf(a)&&a.uiType===bl?Ji(n,s,a,l):Ur.single(!1,oe(a)),Uh=(n,s,a,l)=>wd(n,s,a,l).fold((g,h)=>{const C=pf(a)?h(s,a.config,a.validated):h(s),x=Vt(C,"components").getOr([]),T=xe(x,_=>Uh(n,s,_,l));return[{...C,components:T}]},(g,h)=>{if(pf(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(Yt)(C)}else return h(s)}),jh=(n,s,a,l)=>xe(a,d=>Uh(n,s,d,l)),_0=(n,s)=>{let a=!1;const l=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+n);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:oe(n),required:g,used:l,replace:d}},o3=(n,s,a,l)=>{const d=$s(l,(h,C)=>_0(C,h)),g=jh(n,s,a,d);return ms(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+n.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},O0=Ur.single,O2=Ur.multiple,D2=oe(bl),k1=Pa.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),gm=we("factory",{sketch:Yt}),D0=we("schema",[]),A1=Ze("name"),R0=na("pname","pname",d1(n=>"<alloy."+Ct(n.name)+">"),bi()),lw=Sc("schema",()=>[Lo("preprocess")]),Ed=we("defaults",oe({})),N0=we("overrides",oe({})),iw=on([gm,D0,A1,R0,Ed,N0]),s3=on([gm,D0,A1,Ed,N0]),r3=on([gm,D0,A1,R0,Ed,N0]),uw=on([gm,lw,A1,Ze("unit"),R0,Ed,N0]),R2=n=>n.fold(A.some,A.none,A.some,A.some),Td=n=>{const s=a=>a.name;return n.fold(s,s,s,s)},dw=n=>n.fold(Yt,Yt,Yt,Yt),eu=(n,s)=>a=>{const l=Cc("Converting part type",s,a);return n(l)},oc=eu(k1.required,iw),Si=eu(k1.external,s3),Tc=eu(k1.optional,r3),M0=eu(k1.group,uw),kg=oe("entirety");var P0=Object.freeze({__proto__:null,required:oc,external:Si,optional:Tc,group:M0,asNamedPart:R2,name:Td,asCommon:dw,original:kg});const N2=(n,s,a,l)=>zo(s.defaults(n,a,l),a,{uid:n.partUids[s.name]},s.overrides(n,a,l)),a3=(n,s,a)=>{const l={},d={};return He(a,g=>{g.fold(h=>{l[h.pname]=O0(!0,(C,x,T)=>h.factory.sketch(N2(C,h,x,T)))},h=>{const C=s.parts[h.name];d[h.name]=oe(h.factory.sketch(N2(s,h,C[kg()]),C))},h=>{l[h.pname]=O0(!1,(C,x,T)=>h.factory.sketch(N2(C,h,x,T)))},h=>{l[h.pname]=O2(!0,(C,x,T)=>{const _=C[h.name];return ye(_,N=>h.factory.sketch(zo(h.defaults(C,N,T),N,h.overrides(C,N))))})})}),{internals:oe(l),externals:oe(d)}},bf=(n,s)=>{const a={};return He(s,l=>{R2(l).each(d=>{const g=vf(n,d.pname);a[d.name]=h=>{const C=Cc("Part: "+d.name+" in "+n,on(d.schema),h);return{...g,config:h,validated:C}}})}),a},vf=(n,s)=>({uiType:D2(),owner:n,name:s}),M2=(n,s,a)=>({uiType:D2(),owner:n,name:s,config:a,validated:{}}),jr=n=>xe(n,s=>s.fold(A.none,A.some,A.none,A.none).map(a=>Sd(a.name,a.schema.concat([ow(kg())]))).toArray()),_1=n=>ye(n,Td),qc=(n,s,a)=>a3(n,s,a),B0=(n,s,a)=>o3(A.some(n),s,s.components,a),es=(n,s,a)=>{const l=s.partUids[a];return n.getSystem().getByUid(l).toOptional()},$u=(n,s,a)=>es(n,s,a).getOrDie("Could not find part: "+a),hm=(n,s,a)=>{const l={},d=s.partUids,g=n.getSystem();return He(a,h=>{l[h]=oe(g.getByUid(d[h]))}),l},Iu=(n,s)=>{const a=n.getSystem();return $s(s.partUids,(l,d)=>oe(a.getByUid(l)))},Wl=n=>xo(n.partUids),$0=(n,s,a)=>{const l={},d=s.partUids,g=n.getSystem();return He(a,h=>{l[h]=oe(g.getByUid(d[h]).getOrDie())}),l},mw=(n,s)=>{const a=_1(s);return Bh(ye(a,l=>({key:l,value:n+"-"+l})))},pm=n=>na("partUids","partUids",im(s=>mw(s.uid,n)),bi());var Ag=Object.freeze({__proto__:null,generate:bf,generateOne:M2,schemas:jr,names:_1,substitutes:qc,components:B0,defaultUids:mw,defaultUidsSchema:pm,getAllParts:Iu,getAllPartNames:Wl,getPart:es,getPartOrDie:$u,getParts:hm,getPartsOrDie:$0});const P2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],vl=(n,s,a,l=1)=>{const d=n*l,g=s*l,h=x=>Vt(a,x).getOr([]),C=(x,T,_)=>{const N=ze(P2,_);return{offset:Po(x,T),classesOn:xe(_,h),classesOff:xe(N,h)}};return{southeast:()=>C(-n,s,["top","alignLeft"]),southwest:()=>C(n,s,["top","alignRight"]),south:()=>C(-n/2,s,["top","alignCentre"]),northeast:()=>C(-n,-s,["bottom","alignLeft"]),northwest:()=>C(n,-s,["bottom","alignRight"]),north:()=>C(-n/2,-s,["bottom","alignCentre"]),east:()=>C(n,-s/2,["valignCentre","left"]),west:()=>C(-n,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},yf=()=>vl(0,0,{}),Ta=(n,s,a,l,d,g,h,C=!1)=>({x:n,y:s,bubble:a,direction:l,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),tu=Pa.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),I0=(n,s,a,l,d,g,h,C,x)=>n.fold(s,a,l,d,g,h,C,x),_g=(n,s,a,l)=>n.fold(s,s,l,l,s,l,a,a),Cf=(n,s,a,l)=>n.fold(s,l,s,l,a,a,s,l),O1=tu.southeast,B2=tu.southwest,F0=tu.northeast,Og=tu.northwest,xf=tu.south,$2=tu.north,D1=tu.east,I2=tu.west,fw=(n,s)=>{switch(s){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},Wr=(n,s)=>no(["left","right","top","bottom"],a=>Vt(s,a).map(l=>fw(n,l))),Sf=(n,s,a)=>{const l=(x,T)=>s[x].map(_=>{const N=x==="top"||x==="bottom",L=N?a.top:a.left,Z=(x==="left"||x==="top"?Math.max:Math.min)(_,T)+L;return N?or(Z,n.y,n.bottom):or(Z,n.x,n.right)}).getOr(T),d=l("left",n.x),g=l("top",n.y),h=l("right",n.right),C=l("bottom",n.bottom);return Nr(d,g,h-d,C-g)},wf="layout",gw=n=>n.x,L0=(n,s)=>n.x+n.width/2-s.width/2,F2=(n,s)=>n.x+n.width-s.width,R1=(n,s)=>n.y-s.height,H0=n=>n.y+n.height,hw=(n,s)=>n.y+n.height/2-s.height/2,c3=n=>n.x+n.width,N1=(n,s)=>n.x-s.width,Pr=(n,s,a)=>Ta(gw(n),H0(n),a.southeast(),O1(),"southeast",Wr(n,{left:1,top:3}),wf),Tr=(n,s,a)=>Ta(F2(n,s),H0(n),a.southwest(),B2(),"southwest",Wr(n,{right:0,top:3}),wf),ka=(n,s,a)=>Ta(gw(n),R1(n,s),a.northeast(),F0(),"northeast",Wr(n,{left:1,bottom:2}),wf),da=(n,s,a)=>Ta(F2(n,s),R1(n,s),a.northwest(),Og(),"northwest",Wr(n,{right:0,bottom:2}),wf),Ns=(n,s,a)=>Ta(L0(n,s),R1(n,s),a.north(),$2(),"north",Wr(n,{bottom:2}),wf),kr=(n,s,a)=>Ta(L0(n,s),H0(n),a.south(),xf(),"south",Wr(n,{top:3}),wf),Wh=(n,s,a)=>Ta(c3(n),hw(n,s),a.east(),D1(),"east",Wr(n,{left:0}),wf),L2=(n,s,a)=>Ta(N1(n,s),hw(n,s),a.west(),I2(),"west",Wr(n,{right:1}),wf),H2=()=>[Pr,Tr,ka,da,kr,Ns,Wh,L2],pw=()=>[Tr,Pr,da,ka,kr,Ns,Wh,L2],z0=()=>[ka,da,Pr,Tr,Ns,kr],z2=()=>[da,ka,Tr,Pr,Ns,kr],V2=()=>[Pr,Tr,ka,da,kr,Ns],V0=()=>[Tr,Pr,da,ka,kr,Ns],U2="data-alloy-placement",Zh=(n,s)=>{ln(n,U2,s)},bw=n=>Jr(n,U2),M1=n=>gs(n,U2),Fu="layout-inset",U0=n=>n.x,P1=(n,s)=>n.x+n.width/2-s.width/2,Gh=(n,s)=>n.x+n.width-s.width,Dg=n=>n.y,B1=(n,s)=>n.y+n.height-s.height,j0=(n,s)=>n.y+n.height/2-s.height/2,$1=(n,s,a)=>Ta(Gh(n,s),B1(n,s),a.insetSouthwest(),Og(),"southwest",Wr(n,{right:0,bottom:3}),Fu),W0=(n,s,a)=>Ta(U0(n),B1(n,s),a.insetSoutheast(),F0(),"southeast",Wr(n,{left:1,bottom:3}),Fu),Rg=(n,s,a)=>Ta(Gh(n,s),Dg(n),a.insetNorthwest(),B2(),"northwest",Wr(n,{right:0,top:2}),Fu),kc=(n,s,a)=>Ta(U0(n),Dg(n),a.insetNortheast(),O1(),"northeast",Wr(n,{left:1,top:2}),Fu),Ha=(n,s,a)=>Ta(P1(n,s),Dg(n),a.insetNorth(),xf(),"north",Wr(n,{top:2}),Fu),qh=(n,s,a)=>Ta(P1(n,s),B1(n,s),a.insetSouth(),$2(),"south",Wr(n,{bottom:3}),Fu),Re=(n,s,a)=>Ta(Gh(n,s),j0(n,s),a.insetEast(),I2(),"east",Wr(n,{right:0}),Fu),I1=(n,s,a)=>Ta(U0(n),j0(n,s),a.insetWest(),D1(),"west",Wr(n,{left:1}),Fu),l3=n=>{switch(n){case"north":return Ha;case"northeast":return kc;case"northwest":return Rg;case"south":return qh;case"southeast":return W0;case"southwest":return $1;case"east":return Re;case"west":return I1}},Ac=(n,s,a,l,d)=>bw(l).map(l3).getOr(Ha)(n,s,a,l,d),Kh=n=>{switch(n){case"north":return qh;case"northeast":return W0;case"northwest":return $1;case"south":return Ha;case"southeast":return kc;case"southwest":return Rg;case"east":return I1;case"west":return Re}},Lu=(n,s,a,l,d)=>bw(l).map(Kh).getOr(Ha)(n,s,a,l,d),j2=(n,s)=>{Wi(n,Math.floor(s))},W2=oe((n,s)=>{j2(n,s),ws(n,{"overflow-x":"hidden","overflow-y":"auto"})}),Ng=oe((n,s)=>{j2(n,s)}),F1=oe((n,s)=>{Qy(n,Math.floor(s))});var bm;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(bm||(bm={}));const Z0="data-alloy-vertical-dir",i3=n=>Ch(n,s=>fc(s)&&Rr(s,"data-alloy-vertical-dir")===bm.BottomToTop);var za;(function(n){n[n.HighlightMenuAndItem=0]="HighlightMenuAndItem",n[n.HighlightJustMenu=1]="HighlightJustMenu",n[n.HighlightNone=2]="HighlightNone"})(za||(za={}));const Hu={init:()=>yl({readState:oe("No State required")})},yl=n=>n,u3={can:St,abort:an,run:U},Yh=n=>{if(!Un(n,"can")&&!Un(n,"abort")&&!Un(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return{...u3,...n}},vw=(n,s)=>(...a)=>ao(n,(l,d)=>l&&s(d).apply(void 0,a),!0),G0=(n,s)=>(...a)=>ao(n,(l,d)=>l||s(d).apply(void 0,a),!1),d3=n=>Xe(n)?{can:St,abort:an,run:n}:n,yw=n=>{const s=vw(n,d=>d.can),a=G0(n,d=>d.abort);return{can:s,abort:a,run:(...d)=>{He(n,g=>{g.run.apply(void 0,d)})}}},Wn=(n,s)=>{K0(n,n.element,s,{})},tn=(n,s,a)=>{K0(n,n.element,s,a)},Xh=n=>{Wn(n,Ea())},q0=(n,s,a)=>{K0(n,s,a,{})},K0=(n,s,a,l)=>{const d={target:s,...l};n.getSystem().triggerEvent(a,s,d)},m3=(n,s,a,l)=>{const d={...l,target:s};n.getSystem().triggerEvent(a,s,d)},Z2=(n,s,a,l)=>{n.getSystem().triggerEvent(a,s,l.event)},ks=n=>Bh(n),Y0=(n,s)=>({key:n,value:Yh({abort:s})}),X0=(n,s)=>({key:n,value:Yh({can:s})}),G2=n=>({key:n,value:Yh({run:(s,a)=>{a.event.prevent()}})}),Ie=(n,s)=>({key:n,value:Yh({run:s})}),Qh=(n,s,a)=>({key:n,value:Yh({run:(l,d)=>{s.apply(void 0,[l,d].concat(a))}})}),Mg=n=>s=>Ie(n,s),kd=n=>s=>({key:n,value:Yh({run:(a,l)=>{r2(a,l)&&s(a,l)}})}),nu=(n,s)=>Ie(n,(a,l)=>{a.getSystem().getByUid(s).each(d=>{Z2(d,d.element,n,l)})}),Ad=(n,s,a)=>{const l=s.partUids[a];return nu(n,l)},Jh=(n,s)=>Ie(n,(a,l)=>{const d=l.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Hl(d.target,C=>a.getSystem().getByDom(C).toOptional(),an).getOr(a));s(a,g,l)}),Pg=n=>Ie(n,(s,a)=>{a.cut()}),f3=n=>Ie(n,(s,a)=>{a.stop()}),ep=(n,s)=>kd(n)(s),ps=kd(Pu()),ou=kd(xi()),q2=kd(x1()),Ef=Mg(Ea()),zu=n=>({classes:Cn(n.classes)?[]:n.classes,attributes:Cn(n.attributes)?{}:n.attributes,styles:Cn(n.styles)?{}:n.styles}),Va=(n,s)=>({...n,attributes:{...n.attributes,...s.attributes},styles:{...n.styles,...s.styles},classes:n.classes.concat(s.classes)}),Cw=(n,s,a)=>Ef(l=>{a(l,n,s)}),K2=(n,s,a)=>q2((l,d)=>{a(l,n,s)}),xw=(n,s,a,l,d,g)=>{const h=fl(n),C=Zc(s,[qk("config",n)]);return Sw(h,C,s,a,l,d,g)},g3=(n,s,a,l,d,g)=>{const h=n,C=Zc(s,[Nu("config",n)]);return Sw(h,C,s,a,l,d,g)},h3=(n,s,a)=>Qk((d,...g)=>{const h=[d].concat(g);return d.config({name:oe(n)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+a)},C=>{const x=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(x))})},a,s),Y2=n=>({key:n,value:void 0}),Sw=(n,s,a,l,d,g,h)=>{const C=N=>Un(N,a)?N[a]():A.none(),x=$s(d,(N,L)=>h3(a,N,L)),_={...$s(g,(N,L)=>T1(N,L)),...x,revoke:jt(Y2,a),config:N=>{const L=Cc(a+"-config",n,N);return{key:a,value:{config:L,me:_,configAsRaw:$c(()=>Cc(a+"-config",n,N)),initialConfig:N,state:h}}},schema:oe(s),exhibit:(N,L)=>Ia(C(N),Vt(l,"exhibit"),(j,Z)=>Z(L,j.config,j.state)).getOrThunk(()=>zu({})),name:oe(a),handlers:N=>C(N).map(L=>Vt(l,"events").getOr(()=>({}))(L.config,L.state)).getOr({})};return _},nt=n=>Bh(n),X2=fl([Ze("fields"),Ze("name"),we("active",{}),we("apis",{}),we("state",Hu),we("extra",{})]),ma=n=>{const s=Cc("Creating behaviour: "+n.name,X2,n);return xw(s.fields,s.name,s.active,s.apis,s.extra,s.state)},Q2=fl([Ze("branchKey"),Ze("branches"),Ze("name"),we("active",{}),we("apis",{}),we("state",Hu),we("extra",{})]),J2=n=>{const s=Cc("Creating behaviour: "+n.name,Q2,n);return g3(xc(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},eC=oe(void 0),p3=(n,s)=>{const a=ks(s);return ma({fields:[Ze("enabled")],name:n,active:{events:oe(a)}})},xn=(n,s)=>{const a=p3(n,s);return{key:n,value:{config:{},me:a,configAsRaw:oe({}),initialConfig:{},state:Hu}}},ww=n=>({init:()=>{const a=Pt(n);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(n),readState:()=>a.get()}}}),Ew=(n,s)=>{s.ignore||(Ir(n.element),s.onFocus(n))};var Tw=Object.freeze({__proto__:null,focus:Ew,blur:(n,s)=>{s.ignore||Ds(n.element)},isFocused:n=>$l(n.element)}),kw=Object.freeze({__proto__:null,exhibit:(n,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return zu(a)},events:n=>ks([Ie(dm(),(s,a)=>{Ew(s,n),a.stop()})].concat(n.stopMousedown?[Ie(Gc(),(s,a)=>{a.event.prevent()})]:[]))}),y3=[yo("onFocus"),we("stopMousedown",!1),we("ignore",!1)];const En=ma({fields:y3,name:"focusing",active:kw,apis:Tw}),tC=[8],vm=[9],wi=[13],Q0=[27],_c=[32],tp=[37],L1=[38],J0=[39],np=[40],op=oe("tooltipping.close.all"),_d=oe("dismiss.popups"),Ar=oe("reposition.popups"),ym=oe("mouse.released"),Aw=(n,s,a)=>{const l=rt(n.slice(0,s)),d=rt(n.slice(s+1));return Lt(l.concat(d),a)},nC=(n,s,a)=>{const l=rt(n.slice(0,s));return Lt(l,a)},_w=(n,s,a)=>{const l=n.slice(0,s),d=n.slice(s+1);return Lt(d.concat(l),a)},C3=(n,s,a)=>{const l=n.slice(s+1);return Lt(l,a)},io=n=>s=>{const a=s.raw;return bt(n,a.which)},su=n=>s=>We(n,a=>a(s)),Tf=n=>n.raw.shiftKey===!0,r5=n=>n.raw.ctrlKey===!0,sp=X(Tf),go=(n,s)=>({matches:n,classification:s}),x3=(n,s)=>Lt(n,l=>l.matches(s)).map(l=>l.classification),S3=(n,s,a,l)=>{const d=Hr(n.element,"."+s.highlightClass);He(d,g=>{cn(l,C=>I(C.element,g))||(Rs(g,s.highlightClass),n.getSystem().getByDom(g).each(C=>{s.onDehighlight(n,C),Wn(C,T0())}))})},a5=(n,s,a)=>S3(n,s,a,[]),c5=(n,s,a,l)=>{V1(n,s,a,l)&&(Rs(l.element,s.highlightClass),s.onDehighlight(n,l),Wn(l,T0()))},H1=(n,s,a,l)=>{S3(n,s,a,[l]),V1(n,s,a,l)||(jo(l.element,s.highlightClass),s.onHighlight(n,l),Wn(l,E0()))},w3=(n,s,a)=>{ev(n,s).each(l=>{H1(n,s,a,l)})},E3=(n,s,a)=>{oC(n,s).each(l=>{H1(n,s,a,l)})},z1=(n,s,a,l)=>{k3(n,s,a,l).fold(d=>{throw d},d=>{H1(n,s,a,d)})},T3=(n,s,a,l)=>{const d=Rw(n,s);Lt(d,l).each(h=>{H1(n,s,a,h)})},V1=(n,s,a,l)=>cr(l.element,s.highlightClass),Ow=(n,s,a)=>Bo(n.element,"."+s.highlightClass).bind(l=>n.getSystem().getByDom(l).toOptional()),k3=(n,s,a,l)=>{const d=Hr(n.element,"."+s.itemClass);return A.from(d[l]).fold(()=>Wt.error(new Error("No element found with index "+l)),n.getSystem().getByDom)},ev=(n,s,a)=>Bo(n.element,"."+s.itemClass).bind(l=>n.getSystem().getByDom(l).toOptional()),oC=(n,s,a)=>{const l=Hr(n.element,"."+s.itemClass);return(l.length>0?A.some(l[l.length-1]):A.none()).bind(g=>n.getSystem().getByDom(g).toOptional())},sC=(n,s,a,l)=>{const d=Hr(n.element,"."+s.itemClass);return po(d,h=>cr(h,s.highlightClass)).bind(h=>{const C=Mc(h,l,0,d.length-1);return n.getSystem().getByDom(d[C]).toOptional()})},Dw=(n,s,a)=>sC(n,s,a,-1),A3=(n,s,a)=>sC(n,s,a,1),Rw=(n,s,a)=>{const l=Hr(n.element,"."+s.itemClass);return _l(ye(l,d=>n.getSystem().getByDom(d).toOptional()))};var rC=Object.freeze({__proto__:null,dehighlightAll:a5,dehighlight:c5,highlight:H1,highlightFirst:w3,highlightLast:E3,highlightAt:z1,highlightBy:T3,isHighlighted:V1,getHighlighted:Ow,getFirst:ev,getLast:oC,getPrevious:Dw,getNext:A3,getCandidates:Rw}),Nw=[Ze("highlightClass"),Ze("itemClass"),yo("onHighlight"),yo("onDehighlight")];const So=ma({fields:Nw,name:"highlighting",apis:rC}),Mw=(n,s,a)=>{s.exists(d=>a.exists(g=>I(g,d)))||tn(n,S0(),{prevFocus:s,newFocus:a})},aC=()=>{const n=a=>sr(a.element);return{get:n,set:(a,l)=>{const d=n(a);a.getSystem().triggerFocus(l,a.element);const g=n(a);Mw(a,d,g)}}},tv=()=>{const n=a=>So.getHighlighted(a).map(l=>l.element);return{get:n,set:(a,l)=>{const d=n(a);a.getSystem().getByDom(l).fold(U,h=>{So.highlight(a,h)});const g=n(a);Mw(a,d,g)}}},Cm=(n,s,a,l,d)=>{const g=()=>n.concat([we("focusManager",aC()),Ul("focusInside","onFocus",xd(T=>bt(["onFocus","onEnterOrSpace","onApi"],T)?Wt.value(T):Wt.error("Invalid value for focusInside"))),Ro("handler",x),Ro("state",s),Ro("sendFocusIn",d)]),h=(T,_,N,L,j)=>{const Z=N(T,_,L,j);return x3(Z,_.event).bind(ne=>ne(T,_,L,j))},x={schema:g,processKey:h,toEvents:(T,_)=>{const N=T.focusInside!==Tg.OnFocusMode?A.none():d(T).map(Z=>Ie(dm(),(ne,ae)=>{Z(ne,T,_),ae.stop()})),L=(Z,ne)=>{const ae=io(_c.concat(wi))(ne.event);T.focusInside===Tg.OnEnterOrSpaceMode&&ae&&r2(Z,ne)&&d(T).each(Y=>{Y(Z,T,_),ne.stop()})},j=[Ie(oa(),(Z,ne)=>{h(Z,ne,a,T,_).fold(()=>{L(Z,ne)},ae=>{ne.stop()})}),Ie(Ih(),(Z,ne)=>{h(Z,ne,l,T,_).each(ae=>{ne.stop()})})];return ks(N.toArray().concat(j))}};return x},cC=n=>{const s=[Lo("onEscape"),Lo("onEnter"),we("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),we("firstTabstop",0),we("useTabstopAt",St),Lo("visibilitySelector")].concat([n]),a=(Y,le)=>{const pe=Y.visibilitySelector.bind(Ee=>Sa(le,Ee)).getOr(le);return pr(pe)>0},l=(Y,le)=>{const pe=Hr(Y.element,le.selector),Ee=Ln(pe,Oe=>a(le,Oe));return A.from(Ee[le.firstTabstop])},d=(Y,le)=>le.focusManager.get(Y).bind(pe=>Sa(pe,le.selector)),g=(Y,le)=>a(Y,le)&&Y.useTabstopAt(le),h=(Y,le,pe)=>{l(Y,le).each(Ee=>{le.focusManager.set(Y,Ee)})},C=(Y,le,pe,Ee,Oe)=>Oe(le,pe,ht=>g(Ee,ht)).fold(()=>Ee.cyclic?A.some(!0):A.none(),ht=>(Ee.focusManager.set(Y,ht),A.some(!0))),x=(Y,le,pe,Ee)=>{const Oe=Ln(Hr(Y.element,pe.selector),ht=>a(pe,ht));return d(Y,pe).bind(ht=>po(Oe,jt(I,ht)).bind(Qe=>C(Y,Oe,Qe,pe,Ee)))},T=(Y,le,pe)=>{const Ee=pe.cyclic?Aw:nC;return x(Y,le,pe,Ee)},_=(Y,le,pe)=>{const Ee=pe.cyclic?_w:C3;return x(Y,le,pe,Ee)},N=Y=>qp(Y).bind(Qn).exists(le=>I(le,Y)),L=(Y,le,pe)=>d(Y,pe).filter(Ee=>!pe.useTabstopAt(Ee)).bind(Ee=>(N(Ee)?T:_)(Y,le,pe)),j=(Y,le,pe)=>pe.onEnter.bind(Ee=>Ee(Y,le)),Z=(Y,le,pe)=>(Y.getSystem().broadcastOn([op()],{closedTooltip:()=>{le.stop()}}),le.isStopped()?A.none():pe.onEscape.bind(Ee=>Ee(Y,le))),ne=oe([go(su([Tf,io(vm)]),T),go(io(vm),_),go(su([sp,io(wi)]),j)]),ae=oe([go(io(Q0),Z),go(io(vm),L)]);return Cm(s,Hu.init,ne,ae,()=>A.some(h))};var _3=cC(Sc("cyclic",an)),Pw=cC(Sc("cyclic",St));const rp=n=>ya("input")(n)&&Rr(n,"type")!=="radio"||ya("textarea")(n),Bw=(n,s,a)=>(q0(n,a,Ea()),A.some(!0)),U1=(n,s,a)=>rp(a)&&io(_c)(s.event)?A.none():Bw(n,s,a),j1=(n,s)=>A.some(!0),lC=[we("execute",U1),we("useSpace",!1),we("useEnter",!0),we("useControlEnter",!1),we("useDown",!1)],kf=(n,s,a)=>a.execute(n,s,n.element),$w=(n,s,a,l)=>{const d=a.useSpace&&!rp(n.element)?_c:[],g=a.useEnter?wi:[],h=a.useDown?np:[],C=d.concat(g).concat(h);return[go(io(C),kf)].concat(a.useControlEnter?[go(su([r5,io(wi)]),kf)]:[])},Iw=(n,s,a,l)=>a.useSpace&&!rp(n.element)?[go(io(_c),j1)]:[];var Fw=Cm(lC,Hu.init,$w,Iw,()=>A.none());const Lw=()=>{const n=hn();return yl({readState:()=>n.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{n.set({numRows:d,numColumns:g})},getNumRows:()=>n.get().map(d=>d.numRows),getNumColumns:()=>n.get().map(d=>d.numColumns)})};var Hw=Object.freeze({__proto__:null,flatgrid:Lw,init:n=>n.state(n)});const nv=n=>(s,a,l,d)=>{const g=n(s.element);return rv(g,s,a,l,d)},ov=(n,s)=>{const a=n1(n,s);return nv(a)},W1=(n,s)=>{const a=n1(s,n);return nv(a)},sv=n=>(s,a,l,d)=>rv(n,s,a,l,d),rv=(n,s,a,l,d)=>l.focusManager.get(s).bind(h=>n(s.element,h,l,d)).map(h=>(l.focusManager.set(s,h),!0)),Rt=sv,Af=sv,Od=sv,Z1=(n,s)=>po(n,s).map(a=>({index:a,candidates:n})),zw=(n,s,a)=>{const l=h=>I(h,s),d=Hr(n,a),g=Ln(d,Au);return Z1(g,l)},iC=(n,s)=>po(n,a=>I(s,a)),uC=(n,s,a,l)=>{const d=Math.floor(s/a),g=s%a;return l(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<n.length?A.some(n[C]):A.none()})},Vw=(n,s,a,l,d)=>uC(n,s,l,(g,h)=>{const x=g===a-1?n.length-g*l:l,T=Mc(h,d,0,x-1);return A.some({row:g,column:T})}),Uw=(n,s,a,l,d)=>uC(n,s,l,(g,h)=>{const C=Mc(g,d,0,a-1),T=C===a-1?n.length-C*l:l,_=or(h,0,T-1);return A.some({row:C,column:_})}),jw=(n,s,a,l)=>Vw(n,s,a,l,1),av=(n,s,a,l)=>Vw(n,s,a,l,-1),_r=(n,s,a,l)=>Uw(n,s,a,l,-1),ru=(n,s,a,l)=>Uw(n,s,a,l,1),cv=[Ze("selector"),we("execute",U1),pl("onEscape"),we("captureTab",!1),sw()],Ww=(n,s,a)=>{Bo(n.element,s.selector).each(l=>{s.focusManager.set(n,l)})},Zw=(n,s)=>s.focusManager.get(n).bind(a=>Sa(a,s.selector)),Gw=(n,s,a,l)=>Zw(n,a).bind(d=>a.execute(n,s,d)),lv=n=>(s,a,l,d)=>zw(s,a,l.selector).bind(g=>n(g.candidates,g.index,d.getNumRows().getOr(l.initSize.numRows),d.getNumColumns().getOr(l.initSize.numColumns))),dC=(n,s,a)=>a.captureTab?A.some(!0):A.none(),qw=(n,s,a)=>a.onEscape(n,s),Kw=lv(av),G1=lv(jw),mC=lv(_r),iv=lv(ru),fC=oe([go(io(tp),ov(Kw,G1)),go(io(J0),W1(Kw,G1)),go(io(L1),Rt(mC)),go(io(np),Af(iv)),go(su([Tf,io(vm)]),dC),go(su([sp,io(vm)]),dC),go(io(_c.concat(wi)),Gw)]),O3=oe([go(io(Q0),qw),go(io(_c),j1)]);var Yw=Cm(cv,Lw,fC,O3,()=>A.some(Ww));const Xw=(n,s,a,l,d)=>{const g=C=>Ml(C)==="button"&&Rr(C,"disabled")==="disabled",h=(C,x,T)=>d(C,x,l,0,T.length-1,T[x],_=>g(T[_])?h(C,_,T):A.from(T[_]));return zw(n,a,s).bind(C=>{const x=C.index,T=C.candidates;return h(x,x,T)})},uv=(n,s,a,l)=>Xw(n,s,a,l,(d,g,h,C,x,T,_)=>{const N=or(g+h,C,x);return N===d?A.from(T):_(N)}),Bg=(n,s,a,l)=>Xw(n,s,a,l,(d,g,h,C,x,T,_)=>{const N=Mc(g,h,C,x);return N===d?A.none():_(N)}),Qw=[Ze("selector"),we("getInitial",A.none),we("execute",U1),pl("onEscape"),we("executeOnMove",!1),we("allowVertical",!0),we("allowHorizontal",!0),we("cycles",!0)],Jw=(n,s)=>s.focusManager.get(n).bind(a=>Sa(a,s.selector)),dv=(n,s,a)=>Jw(n,a).bind(l=>a.execute(n,s,l)),D3=(n,s,a)=>{s.getInitial(n).orThunk(()=>Bo(n.element,s.selector)).each(l=>{s.focusManager.set(n,l)})},R3=(n,s,a)=>(a.cycles?Bg:uv)(n,a.selector,s,-1),$g=(n,s,a)=>(a.cycles?Bg:uv)(n,a.selector,s,1),gC=n=>(s,a,l,d)=>n(s,a,l,d).bind(()=>l.executeOnMove?dv(s,a,l):A.some(!0)),N3=(n,s,a)=>a.onEscape(n,s),M3=(n,s,a,l)=>{const d=[...a.allowHorizontal?tp:[]].concat(a.allowVertical?L1:[]),g=[...a.allowHorizontal?J0:[]].concat(a.allowVertical?np:[]);return[go(io(d),gC(ov(R3,$g))),go(io(g),gC(W1(R3,$g))),go(io(wi),dv),go(io(_c),dv)]},eE=oe([go(io(_c),j1),go(io(Q0),N3)]);var P3=Cm(Qw,Hu.init,M3,eE,()=>A.some(D3));const hC=(n,s,a)=>A.from(n[s]).bind(l=>A.from(l[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),mv=(n,s,a,l)=>{const g=n[s].length,h=Mc(a,l,0,g-1);return hC(n,s,h)},pC=(n,s,a,l)=>{const d=Mc(a,l,0,n.length-1),g=n[d].length,h=or(s,0,g-1);return hC(n,d,h)},Dd=(n,s,a,l)=>{const g=n[s].length,h=or(a+l,0,g-1);return hC(n,s,h)},tE=(n,s,a,l)=>{const d=or(a+l,0,n.length-1),g=n[d].length,h=or(s,0,g-1);return hC(n,d,h)},fv=(n,s,a)=>mv(n,s,a,1),B3=(n,s,a)=>mv(n,s,a,-1),_f=(n,s,a)=>pC(n,a,s,-1),$3=(n,s,a)=>pC(n,a,s,1),I3=(n,s,a)=>Dd(n,s,a,-1),i5=(n,s,a)=>Dd(n,s,a,1),u5=(n,s,a)=>tE(n,a,s,-1),ap=(n,s,a)=>tE(n,a,s,1),q1=[Sd("selectors",[Ze("row"),Ze("cell")]),we("cycles",!0),we("previousSelector",A.none),we("execute",U1)],bC=(n,s,a)=>{s.previousSelector(n).orThunk(()=>{const d=s.selectors;return Bo(n.element,d.cell)}).each(d=>{s.focusManager.set(n,d)})},F3=(n,s,a)=>sr(n.element).bind(l=>a.execute(n,s,l)),L3=(n,s)=>ye(n,a=>Hr(a,s.selectors.cell)),gv=(n,s)=>(a,l,d)=>{const g=d.cycles?n:s;return Sa(l,d.selectors.row).bind(h=>{const C=Hr(h,d.selectors.cell);return iC(C,l).bind(x=>{const T=Hr(a,d.selectors.row);return iC(T,h).bind(_=>{const N=L3(T,d);return g(N,_,x).map(L=>L.cell)})})})},nE=gv(B3,I3),oE=gv(fv,i5),K1=gv(_f,u5),hv=gv($3,ap),vC=oe([go(io(tp),ov(nE,oE)),go(io(J0),W1(nE,oE)),go(io(L1),Rt(K1)),go(io(np),Af(hv)),go(io(_c.concat(wi)),F3)]),Y1=oe([go(io(_c),j1)]);var yC=Cm(q1,Hu.init,vC,Y1,()=>A.some(bC));const H3=[Ze("selector"),we("execute",U1),we("moveOnTab",!1)],X1=(n,s,a)=>a.focusManager.get(n).bind(l=>a.execute(n,s,l)),sE=(n,s,a)=>{Bo(n.element,s.selector).each(l=>{s.focusManager.set(n,l)})},pv=(n,s,a)=>Bg(n,a.selector,s,-1),bv=(n,s,a)=>Bg(n,a.selector,s,1),Ig=(n,s,a,l)=>a.moveOnTab?Od(pv)(n,s,a,l):A.none(),z3=(n,s,a,l)=>a.moveOnTab?Od(bv)(n,s,a,l):A.none(),Rd=oe([go(io(L1),Od(pv)),go(io(np),Od(bv)),go(su([Tf,io(vm)]),Ig),go(su([sp,io(vm)]),z3),go(io(wi),X1),go(io(_c),X1)]),V3=oe([go(io(_c),j1)]);var rE=Cm(H3,Hu.init,Rd,V3,()=>A.some(sE));const U3=[pl("onSpace"),pl("onEnter"),pl("onShiftEnter"),pl("onLeft"),pl("onRight"),pl("onTab"),pl("onShiftTab"),pl("onUp"),pl("onDown"),pl("onEscape"),we("stopSpaceKeyup",!1),Lo("focusIn")],d5=(n,s,a)=>[go(io(_c),a.onSpace),go(su([sp,io(wi)]),a.onEnter),go(su([Tf,io(wi)]),a.onShiftEnter),go(su([Tf,io(vm)]),a.onShiftTab),go(su([sp,io(vm)]),a.onTab),go(io(L1),a.onUp),go(io(np),a.onDown),go(io(tp),a.onLeft),go(io(J0),a.onRight),go(io(_c),a.onSpace)],vv=(n,s,a)=>[...a.stopSpaceKeyup?[go(io(_c),j1)]:[],go(io(Q0),a.onEscape)];var j3=Cm(U3,Hu.init,d5,vv,n=>n.focusIn);const W3=_3.schema(),Z3=Pw.schema(),CC=P3.schema(),G3=Yw.schema(),aE=yC.schema(),xC=Fw.schema(),q3=rE.schema(),K3=j3.schema();var SC=Object.freeze({__proto__:null,acyclic:W3,cyclic:Z3,flow:CC,flatgrid:G3,matrix:aE,execution:xC,menu:q3,special:K3});const cE=n=>Un(n,"setGridSize"),Xt=J2({branchKey:"mode",branches:SC,name:"keying",active:{events:(n,s)=>n.handler.toEvents(n,s)},apis:{focusIn:(n,s,a)=>{s.sendFocusIn(s).fold(()=>{n.getSystem().triggerFocus(n.element,n.element)},l=>{l(n,s,a)})},setGridSize:(n,s,a,l,d)=>{cE(a)?a.setGridSize(l,d):console.error("Layout does not support setGridSize")}},state:Hw}),Q1=Ct("alloy-premade"),lE=n=>(Object.defineProperty(n.element.dom,Q1,{value:n.uid,writable:!0}),ff(Q1,n)),Y3=n=>mo(n.dom,Q1),wC=n=>Vt(n,Q1),J1=n=>rw((s,...a)=>n(s.getApis(),s,...a),n),yv=n=>n.getSystem().isConnected(),eb=n=>{Wn(n,xi());const s=n.components();He(s,eb)},cp=n=>{const s=n.components();He(s,cp),Wn(n,Pu())},EC=(n,s)=>{n.getSystem().addToWorld(s),bo(n.element)&&cp(s)},TC=n=>{eb(n),n.getSystem().removeFromWorld(n)},iE=(n,s)=>{Lr(n.element,s.element)},kC=n=>{He(n.components(),s=>cl(s.element)),ph(n.element),n.syncComponents()},uE=(n,s,a)=>{const l=n.components();kC(n);const d=a(s),g=ze(l,d);He(g,h=>{eb(h),n.getSystem().removeFromWorld(h)}),He(d,h=>{yv(h)?iE(n,h):(n.getSystem().addToWorld(h),iE(n,h),bo(n.element)&&cp(h))}),n.syncComponents()},lp=(n,s,a)=>{const l=n.components(),d=xe(s,C=>wC(C).toArray());He(l,C=>{bt(d,C)||TC(C)});const g=a(s),h=ze(l,g);He(h,C=>{yv(C)&&TC(C)}),He(g,C=>{yv(C)||EC(n,C)}),n.syncComponents()},xm=(n,s)=>{ip(n,s,Lr)},ip=(n,s,a)=>{n.getSystem().addToWorld(s),a(n.element,s.element),bo(n.element)&&cp(s),n.syncComponents()},Sm=n=>{eb(n),cl(n.element),n.getSystem().removeFromWorld(n)},wm=n=>{const s=hc(n.element).bind(a=>n.getSystem().getByDom(a).toOptional());Sm(n),s.each(a=>{a.syncComponents()})},dE=n=>{const s=n.components();He(s,Sm),ph(n.element),n.syncComponents()},tb=(n,s)=>{mE(n,s,Lr)},au=(n,s)=>{mE(n,s,Xp)},mE=(n,s,a)=>{a(n,s.element);const l=ci(s.element);He(l,d=>{s.getByDom(d).each(cp)})},fE=n=>{const s=ci(n.element);He(s,a=>{n.getByDom(a).each(eb)}),cl(n.element)},AC=(n,s,a)=>fd(n,s).map(d=>{if(a.exists(h=>!I(h,d))){const h=a.map(Ml).getOr("span"),C=at.fromTag(h);return gd(d,C),C}else return d}),_C=(n,s,a)=>{a.fold(()=>Lr(n,s),l=>{I(l,s)||(gd(l,s),cl(l))})},gE=(n,s,a)=>{const l=ye(s,a),d=ci(n);return He(d.slice(l.length),cl),l},hE=(n,s,a,l)=>{const d=fd(n,s),g=l(a,d),h=AC(n,s,d);return _C(n,g.element,h),g},X3=(n,s,a)=>gE(n,s,(l,d)=>hE(n,d,l,a)),pE=(n,s)=>gE(n,s,(a,l)=>{const d=fd(n,l);return _C(n,a,d),a}),Fg=(n,s)=>{const a=fr(s),l=Fr(a).bind(g=>{const h=C=>I(g,C);return h(s)?A.some(s):s1(s,h)}),d=n(s);return l.each(g=>{Fr(a).filter(h=>I(h,g)).fold(()=>{Ir(g)},U)}),d},OC=(n,s)=>{Fg(()=>{uE(n,s,()=>ye(s,n.getSystem().build))},n.element)},bE=(n,s)=>{Fg(()=>{lp(n,s,()=>X3(n.element,s,n.getSystem().buildOrPatch))},n.element)},DC=(n,s,a,l)=>{TC(s);const d=hE(n.element,a,l,n.getSystem().buildOrPatch);EC(n,d),n.syncComponents()},RC=(n,s,a)=>{const l=n.getSystem().build(a);ip(n,l,s)},NC=(n,s,a,l)=>{wm(s),RC(n,(d,g)=>Qp(d,g,a),l)},Q3=(n,s,a,l)=>(s.reuseDom?bE:OC)(n,l),Lg=(n,s,a,l)=>{RC(n,Lr,l)},Hg=(n,s,a,l)=>{RC(n,hh,l)},Cv=(n,s,a,l)=>{const d=xv(n);Lt(d,h=>I(l.element,h.element)).each(wm)},xv=(n,s)=>n.components(),vE=(n,s,a,l,d)=>{const g=xv(n);return A.from(g[l]).map(h=>(d.fold(()=>wm(h),C=>{(s.reuseDom?DC:NC)(n,h,l,C)}),h))};var yE=Object.freeze({__proto__:null,append:Lg,prepend:Hg,remove:Cv,replaceAt:vE,replaceBy:(n,s,a,l,d)=>{const g=xv(n);return po(g,l).bind(h=>vE(n,s,a,h,d))},set:Q3,contents:xv});const An=ma({fields:[Vr("reuseDom",!0)],name:"replacing",apis:yE}),Sv=(n,s,a)=>I(s,n.element)&&!I(s,a),Zl=ks([X0(dm(),(n,s)=>{const a=s.event,l=a.originator,d=a.target;return Sv(n,l,d)?(console.warn(dm()+` did not get interpreted by the desired target. 
Originator: `+Bu(l)+`
Target: `+Bu(d)+`
Check the `+dm()+" event handlers"),!1):!0})]);var nb=Object.freeze({__proto__:null,events:Zl});const eA=oe("alloy-id-"),wv=oe("data-alloy-id"),tA=eA(),MC=wv(),PC=(n,s)=>{const a=Ct(tA+n);return ob(s,a),a},ob=(n,s)=>{Object.defineProperty(n.dom,MC,{value:s,writable:!0})},Vu=n=>{const s=fc(n)?n.dom[MC]:null;return A.from(s)},up=n=>Ct(n),nA=Yt,zg=n=>{const s=d=>`The component must be in a context to execute: ${d}`+(n?`
`+Bu(n().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},l=d=>()=>{console.warn(s(d))};return{debugInfo:oe("fake"),triggerEvent:l("triggerEvent"),triggerFocus:l("triggerFocus"),triggerEscape:l("triggerEscape"),broadcast:l("broadcast"),broadcastOn:l("broadcastOn"),broadcastEvent:l("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:an}},sb=zg(),Ev=(n,s)=>{const a=ye(s,d=>Zc(d.name(),[Ze("config"),we("state",Hu)])),l=Ls("component.behaviours",on(a),n.behaviours).fold(d=>{throw new Error(Nh(d)+`
Complete spec:
`+JSON.stringify(n,null,2))},Yt);return{list:s,data:$s(l,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return oe(g)})}},Zr=n=>n.list,oA=n=>n.data,BC=(n,s)=>{const a={};return ms(n,(l,d)=>{ms(l,(g,h)=>{const C=Vt(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},Of=(n,s,a,l)=>{const d={...s};He(a,_=>{d[_.name()]=_.exhibit(n,l)});const g=BC(d,(_,N)=>({name:_,modification:N})),h=_=>oo(_,(N,L)=>({...L.modification,...N}),{}),C=oo(g.classes,(_,N)=>N.modification.concat(_),[]),x=h(g.attributes),T=h(g.styles);return zu({classes:C,attributes:x,styles:T})},Nd=(n,s,a,l)=>{try{const d=Fo(a,(g,h)=>{const C=g[s],x=h[s],T=l.indexOf(C),_=l.indexOf(x);if(T===-1)throw new Error("The ordering for "+n+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(l,null,2));if(_===-1)throw new Error("The ordering for "+n+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(l,null,2));return T<_?-1:_<T?1:0});return Wt.value(d)}catch(d){return Wt.error([d])}},$C=(n,s)=>({handler:n,purpose:s}),CE=(n,s)=>({cHandler:n,purpose:s}),sA=(n,s)=>CE(jt.apply(void 0,[n.handler].concat(s)),n.purpose),Tv=n=>n.cHandler,rb=(n,s)=>({name:n,handler:s}),Df=(n,s)=>{const a={};return He(n,l=>{a[l.name()]=l.handlers(s)}),a},kv=(n,s,a)=>{const l={...a,...Df(s,n)};return BC(l,rb)},Av=(n,s,a,l)=>{const d=kv(n,a,l);return _v(d,s)},Rf=n=>{const s=d3(n);return(a,l,...d)=>{const g=[a,l].concat(d);s.abort.apply(void 0,g)?l.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},ab=(n,s)=>Wt.error(["The event ("+n+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(ye(s,a=>a.name),null,2)]),IC=(n,s,a)=>{const l=s[a];return l?Nd("Event: "+a,"name",n,l).map(d=>{const g=ye(d,h=>h.handler);return yw(g)}):ab(a,n)},_v=(n,s)=>{const a=as(n,(l,d)=>(l.length===1?Wt.value(l[0].handler):IC(l,s,d)).map(h=>{const C=Rf(h),x=l.length>1?Ln(s[d],T=>cn(l,_=>_.name===T)).join(" > "):l[0].name;return ff(d,$C(C,x))}));return Kk(a,{})},Uu="alloy.base.behaviour",xE=on([na("dom","dom",vi(),on([Ze("tag"),we("styles",{}),we("classes",[]),we("attributes",{}),Lo("value"),Lo("innerHtml")])),Ze("components"),Ze("uid"),we("events",{}),we("apis",{}),na("eventOrder","eventOrder",Oh({[Ea()]:["disabling",Uu,"toggling","typeaheadevents"],[dm()]:[Uu,"focusing","keying"],[x1()]:[Uu,"disabling","toggling","representing","tooltipping"],[Mu()]:[Uu,"representing","streaming","invalidating"],[xi()]:[Uu,"representing","item-events","toolbar-button-events","tooltipping"],[Gc()]:["focusing",Uu,"item-type-events"],[hl()]:["focusing",Uu,"item-type-events"],[jl()]:["item-type-events","tooltipping"],[mm()]:["receiving","reflecting","tooltipping"]}),bi()),Lo("domModification")]),Md=n=>Ls("custom.definition",xE,n),FC=n=>({...n.dom,uid:n.uid,domChildren:ye(n.components,s=>s.element)}),Ov=n=>n.domModification.fold(()=>zu({}),zu),dp=n=>n.events,cb=(n,s)=>{const a=xo(n),l=xo(s),d=ze(l,a),g=Ws(n,(h,C)=>!mo(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},Dv=(n,s)=>{const{class:a,style:l,...d}=hd(s),{toSet:g,toRemove:h}=cb(n.attributes,d),C=()=>{He(h,pe=>gs(s,pe)),Jp(s,g)},x=rr(s),{toSet:T,toRemove:_}=cb(n.styles,x),N=()=>{He(_,pe=>Kn(s,pe)),ws(s,T)},L=l1(s),j=ze(L,n.classes),Z=ze(n.classes,L),ne=()=>{Ki(s,Z),ua(s,j)},ae=pe=>{Il(s,pe)},Y=()=>{const pe=n.domChildren;pE(s,pe)},le=()=>{const pe=s,Ee=n.value.getOrUndefined();Ee!==vc(pe)&&gi(pe,Ee??"")};return C(),ne(),N(),n.innerHtml.fold(Y,ae),le(),s},rA=n=>{const s=at.fromTag(n.tag);Jp(s,n.attributes),Ki(s,n.classes),ws(s,n.styles),n.innerHtml.each(l=>Il(s,l));const a=n.domChildren;return t0(s,a),n.value.each(l=>{gi(s,l)}),s},SE=(n,s)=>{try{const a=Dv(n,s);return A.some(a)}catch{return A.none()}},Rv=n=>n.innerHtml.isSome()&&n.domChildren.length>0,aA=(n,s)=>{const a=d=>Ml(d)===n.tag&&!Rv(n)&&!Y3(d),l=s.filter(a).bind(d=>SE(n,d)).getOrThunk(()=>rA(n));return ob(l,n.uid),l},LC=n=>{const s=Vt(n,"behaviours").getOr({});return xe(xo(s),a=>{const l=s[a];return un(l)?[l.me]:[]})},ju=(n,s)=>Ev(n,s),HC=n=>{const s=LC(n);return ju(n,s)},cA=(n,s,a)=>{const l=FC(n),d=Ov(n),g={"alloy.base.modification":d},h=s.length>0?Of(a,g,s,l):d;return Va(l,h)},wE=(n,s,a)=>{const l={"alloy.base.behaviour":dp(n)};return Av(a,n.eventOrder,s,l).getOrDie()},EE=(n,s)=>{const a=()=>pe,l=Pt(sb),d=Ci(Md(n)),g=HC(n),h=Zr(g),C=oA(g),x=cA(d,h,C),T=aA(x,s),_=wE(d,h,C),N=Pt(d.components),L=Ee=>{l.set(Ee)},j=()=>{l.set(zg(a))},Z=()=>{const Ee=ci(T),Oe=xe(Ee,ht=>l.get().getByDom(ht).fold(()=>[],qn));N.set(Oe)},ne=Ee=>{const Oe=C;return(Xe(Oe[Ee.name()])?Oe[Ee.name()]:()=>{throw new Error("Could not find "+Ee.name()+" in "+JSON.stringify(n,null,2))})()},ae=Ee=>Xe(C[Ee.name()]),Y=()=>d.apis,le=Ee=>C[Ee]().map(Oe=>Oe.state.readState()).getOr("not enabled"),pe={uid:n.uid,getSystem:l.get,config:ne,hasConfigured:ae,spec:n,readState:le,getApis:Y,connect:L,disconnect:j,element:T,syncComponents:Z,components:N.get,events:_};return pe},TE=(n,s)=>{const a=Vt(n,"components").getOr([]);return s.fold(()=>ye(a,p),l=>ye(a,(d,g)=>m(d,fd(l,g))))},lA=(n,s)=>{const{events:a,...l}=nA(n),d=TE(l,s),g={...l,events:{...nb,...a},components:d};return Wt.value(EE(g,s))},Ss=n=>{const s=at.fromText(n);return Gl({element:s})},Gl=n=>{const s=Cc("external.component",fl([Ze("element"),Lo("uid")]),n),a=Pt(zg()),l=C=>{a.set(C)},d=()=>{a.set(zg(()=>h))},g=s.uid.getOrThunk(()=>up("external"));ob(s.element,g);const h={uid:g,getSystem:a.get,config:A.none,hasConfigured:an,connect:l,disconnect:d,getApis:()=>({}),element:s.element,spec:n,readState:oe("No state"),syncComponents:U,components:oe([]),events:{}};return lE(h)},mp=up,i=n=>mo(n,"uid"),m=(n,s)=>wC(n).getOrThunk(()=>{const a=i(n)?n:{uid:mp(""),...n};return lA(a,s).getOrDie()}),p=n=>m(n,A.none()),y=lE;var z=Object.freeze({__proto__:null,block:(n,s,a,l)=>{ln(n.element,"aria-busy",!0);const d=s.getRoot(n).getOr(n),g=nt([Xt.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),En.config({})]),h=l(d,g),C=d.getSystem().build(h);An.append(d,y(C)),C.hasConfigured(Xt)&&s.focus&&Xt.focusIn(C),a.isBlocked()||s.onBlock(n),a.blockWith(()=>An.remove(d,C))},unblock:(n,s,a)=>{gs(n.element,"aria-busy"),a.isBlocked()&&s.onUnblock(n),a.clear()},isBlocked:(n,s,a)=>a.isBlocked()}),K=[ls("getRoot",A.none),Vr("focus",!0),yo("onBlock"),yo("onUnblock")],Ce=Object.freeze({__proto__:null,init:()=>{const n=Zm(),s=a=>{n.set({destroy:a})};return yl({readState:n.isSet,blockWith:s,clear:n.clear,isBlocked:n.isSet})}});const Ge=ma({fields:K,name:"blocking",apis:z,state:Ce});var wt=Object.freeze({__proto__:null,getCurrent:(n,s,a)=>s.find(n)});const Gt=[Ze("find")],Fe=ma({fields:Gt,name:"composing",apis:wt});var Bn=Object.freeze({__proto__:null,getCoupled:(n,s,a,l)=>a.getOrCreate(n,s,l),getExistingCoupled:(n,s,a,l)=>a.getExisting(n,s,l)}),Bt=[jc("others",WS(Wt.value,bi()))],Io=Object.freeze({__proto__:null,init:()=>{const n={},s=(g,h)=>{if(xo(g.others).length===0)throw new Error("Cannot find any known coupled components");return Vt(n,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const T=Vt(h.others,C).getOrDie("No information found for coupled component: "+C)(g),_=g.getSystem().build(T);return n[C]=_,_}),l=(g,h,C)=>s(h,C).orThunk(()=>(Vt(h.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=oe({});return yl({readState:d,getExisting:l,getOrCreate:a})}});const Rn=ma({fields:Bt,name:"coupling",apis:Bn,state:Io}),vr=["input","button","textarea","select"],Ei=(n,s,a)=>{(s.disabled()?sc:ql)(n,s)},Em=(n,s)=>s.useNative===!0&&bt(vr,Ml(n.element)),Nf=n=>ea(n.element,"disabled"),Vg=n=>{ln(n.element,"disabled","disabled")},Yo=n=>{gs(n.element,"disabled")},Oc=n=>Rr(n.element,"aria-disabled")==="true",Xs=n=>{ln(n.element,"aria-disabled","true")},Wu=n=>{ln(n.element,"aria-disabled","false")},sc=(n,s,a)=>{s.disableClass.each(d=>{jo(n.element,d)}),(Em(n,s)?Vg:Xs)(n),s.onDisabled(n)},ql=(n,s,a)=>{s.disableClass.each(d=>{Rs(n.element,d)}),(Em(n,s)?Yo:Wu)(n),s.onEnabled(n)},Aa=(n,s)=>Em(n,s)?Nf(n):Oc(n);var lb=Object.freeze({__proto__:null,enable:ql,disable:sc,isDisabled:Aa,onLoad:Ei,set:(n,s,a,l)=>{(l?sc:ql)(n,s)}}),iA=Object.freeze({__proto__:null,exhibit:(n,s)=>zu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(n,s)=>ks([Y0(Ea(),(a,l)=>Aa(a,n)),K2(n,s,Ei)])}),kE=[ls("disabled",an),we("useNative",!0),Lo("disableClass"),yo("onDisabled"),yo("onEnabled")];const Ft=ma({fields:kE,name:"disabling",active:iA,apis:lb}),Kc=(n,s,a,l,d)=>{const g=h=>h+"px";return{position:n,left:s.map(g),top:a.map(g),right:l.map(g),bottom:d.map(g)}},uA=n=>({...n,position:A.some(n.position)}),Mv=(n,s)=>{ta(n,uA(s))},AE=(n,s)=>{const a=n.element;jo(a,s.transitionClass),Rs(a,s.fadeOutClass),jo(a,s.fadeInClass),s.onShow(n)},Ug=(n,s)=>{const a=n.element;jo(a,s.transitionClass),Rs(a,s.fadeInClass),jo(a,s.fadeOutClass),s.onHide(n)},dA=(n,s)=>n.y<s.bottom&&n.bottom>s.y,_E=(n,s)=>n.y>=s.y,zC=(n,s)=>n.bottom<=s.bottom,VC=(n,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-n.y}),OE=(n,s,a)=>({location:"bottom",leftX:s,bottomY:n.bottom-a.bounds.bottom}),UC=n=>n.box.x-n.win.x,y7=(n,s,a)=>{const l=s.win,d=s.box,g=UC(s);return ha(n,h=>{switch(h){case"bottom":return zC(d,a.bounds)?A.none():A.some(OE(l,g,a));case"top":return _E(d,a.bounds)?A.none():A.some(VC(l,g,a));default:return A.none()}}).getOr({location:"no-dock"})},C7=(n,s,a)=>We(n,l=>{switch(l){case"bottom":return zC(s,a.bounds);case"top":return _E(s,a.bounds)}}),x7=(n,s)=>{const a=s.optScrollEnv.fold(oe(n.bounds.y),l=>l.scrollElmTop+(n.bounds.y-l.currentScrollTop));return Po(n.bounds.x,a)},jC=(n,s)=>{const a=s.optScrollEnv.fold(oe(n.y),l=>n.y+l.currentScrollTop-l.scrollElmTop);return Po(n.x,a)},WC=(n,s,a)=>a.getInitialPos().map(l=>{const d=x7(l,s);return{box:Nr(d.left,d.top,ia(n),pr(n)),location:l.location}}),m5=(n,s,a,l,d)=>{const g=jC(s,a),h=Nr(g.left,g.top,s.width,s.height);l.setInitialPos({style:rr(n),position:hs(n,"position")||"static",bounds:h,location:d.location})},f5=(n,s,a,l,d)=>{l.getInitialPos().fold(()=>m5(n,s,a,l,d),()=>U)},g5=(n,s,a)=>a.getInitialPos().bind(l=>{switch(a.clearInitialPos(),l.position){case"static":return A.some({morph:"static"});case"absolute":const d=lf(n).getOr(Hc()),g=Er(d),h=d.dom.scrollTop??0;return A.some({morph:"absolute",positionCss:Kc("absolute",Vt(l.style,"left").map(C=>s.x-g.x),Vt(l.style,"top").map(C=>s.y-g.y+h),Vt(l.style,"right").map(C=>g.right-s.right),Vt(l.style,"bottom").map(C=>g.bottom-s.bottom))});default:return A.none()}}),h5=(n,s,a)=>WC(n,s,a).filter(({box:l})=>C7(a.getModes(),l,s)).bind(({box:l})=>g5(n,l,a)),ZC=n=>{switch(n.location){case"top":return A.some({morph:"fixed",positionCss:Kc("fixed",A.some(n.leftX),A.some(n.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:Kc("fixed",A.some(n.leftX),A.none(),A.none(),A.some(n.bottomY))});default:return A.none()}},Pv=(n,s,a)=>{const l=Er(n),d=Fa(),g=y7(a.getModes(),{win:d,box:l},s);return g.location==="top"||g.location==="bottom"?(m5(n,l,s,a,g),ZC(g)):A.none()},mA=(n,s,a)=>h5(n,s,a).orThunk(()=>s.optScrollEnv.bind(l=>WC(n,s,a)).bind(({box:l,location:d})=>{const g=Fa(),h=UC({win:g,box:l}),C=d==="top"?VC(g,h,s):OE(g,h,s);return ZC(C)})),S7=(n,s,a)=>{const l=n.element;return dc(xs(l,"position"),"fixed")?mA(l,s,a):Pv(l,s,a)},w7=(n,s,a)=>{const l=n.element;return WC(l,s,a).bind(({box:d})=>g5(l,d,a))},p5=(n,s,a,l)=>{const d=Er(n),g=Fa(),h=UC({win:g,box:d}),C=l(g,h,s);return C.location==="bottom"||C.location==="top"?(f5(n,d,s,a,C),ZC(C)):A.none()},jg=(n,s,a)=>{a.setDocked(!1),He(["left","right","top","bottom","position"],l=>Kn(n.element,l)),s.onUndocked(n)},GC=(n,s,a,l)=>{const d=l.position==="fixed";a.setDocked(d),Mv(n.element,l),(d?s.onDocked:s.onUndocked)(n)},DE=(n,s,a,l,d=!1)=>{s.contextual.each(g=>{g.lazyContext(n).each(h=>{const C=dA(h,l.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Ki(n.element,[g.fadeOutClass]),g.onHide(n)):(C?AE:Ug)(n,g))})})},qC=(n,s,a,l,d)=>{DE(n,s,a,l,!0),GC(n,s,a,d.positionCss)},b5=(n,s,a,l,d)=>{switch(d.morph){case"static":return jg(n,s,a);case"absolute":return GC(n,s,a,d.positionCss);case"fixed":return qC(n,s,a,l,d)}},RE=(n,s,a)=>{const l=s.lazyViewport(n);DE(n,s,a,l),S7(n,l,a).each(d=>{b5(n,s,a,l,d)})},fA=(n,s,a)=>{const l=n.element;a.setDocked(!1);const d=s.lazyViewport(n);w7(n,d,a).each(g=>{switch(g.morph){case"static":{jg(n,s,a);break}case"absolute":{GC(n,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{ua(l,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(n)}),NE(n,s,a)},NE=(n,s,a)=>{n.getSystem().isConnected()&&RE(n,s,a)},v5=(n,s,a)=>{a.isDocked()&&fA(n,s,a)},km=n=>(s,a,l)=>{const d=a.lazyViewport(s);p5(s.element,d,l,n).each(h=>{qC(s,a,l,d,h)})},E7=km(VC),T7=km(OE);var gA=Object.freeze({__proto__:null,refresh:NE,reset:v5,isDocked:(n,s,a)=>a.isDocked(),getModes:(n,s,a)=>a.getModes(),setModes:(n,s,a,l)=>a.setModes(l),forceDockToTop:E7,forceDockToBottom:T7}),y5=Object.freeze({__proto__:null,events:(n,s)=>ks([ep(b0(),(a,l)=>{n.contextual.each(d=>{cr(a.element,d.transitionClass)&&(ua(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),l.stop()})}),Ie(w2(),(a,l)=>{NE(a,n,s)}),Ie(QS(),(a,l)=>{NE(a,n,s)}),Ie(Hh(),(a,l)=>{v5(a,n,s)})])}),hA=[Zc("contextual",[Ks("fadeInClass"),Ks("fadeOutClass"),Ks("transitionClass"),gl("lazyContext"),yo("onShow"),yo("onShown"),yo("onHide"),yo("onHidden")]),ls("lazyViewport",()=>({bounds:Fa(),optScrollEnv:A.none()})),df("modes",["top","bottom"],zr),yo("onDocked"),yo("onUndocked")],C5=Object.freeze({__proto__:null,init:n=>{const s=Pt(!1),a=Pt(!0),l=hn(),d=Pt(n.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return yl({isDocked:s.get,setDocked:s.set,getInitialPos:l.get,setInitialPos:l.set,clearInitialPos:l.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Ms=ma({fields:hA,name:"docking",active:y5,apis:gA,state:C5}),pA=Pa.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),ME=n=>s=>s.translate(-n.left,-n.top),YC=n=>s=>s.translate(n.left,n.top),Mf=n=>(s,a)=>ao(n,(l,d)=>d(l),Po(s,a)),PE=(n,s,a)=>n.fold(Mf([YC(a),ME(s)]),Mf([ME(s)]),Mf([])),Bv=(n,s,a)=>n.fold(Mf([YC(a)]),Mf([]),Mf([YC(s)])),bA=(n,s,a)=>n.fold(Mf([]),Mf([ME(a)]),Mf([YC(s),ME(a)])),x5=(n,s,a,l,d,g)=>{const h=Bv(n,d,g),C=Bv(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=l},S5=(n,s,a,l,d,g)=>{const h=Bv(n,d,g),C=Bv(s,d,g),x=Math.abs(h.left-C.left),T=Math.abs(h.top-C.top);return Po(x,T)},vA=(n,s,a)=>{const l=n.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-a.left+"px"),top:A.some(g-a.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...l}},BE=(n,s,a)=>n.fold((l,d)=>Pf(l+s,d+a),(l,d)=>Bd(l+s,d+a),(l,d)=>ib(l+s,d+a)),$E=(n,s,a,l)=>{const d=(g,h)=>(C,x)=>{const T=g(s,a,l);return h(C.getOr(T.left),x.getOr(T.top))};return n.fold(d(bA,Pf),d(Bv,Bd),d(PE,ib))},Pf=pA.offset,Bd=pA.absolute,ib=pA.fixed,w5=(n,s)=>{const a=Rr(n,s);return Cn(a)?NaN:parseInt(a,10)},k7=(n,s)=>{const a=n.element,l=w5(a,s.leftAttr),d=w5(a,s.topAttr);return isNaN(l)||isNaN(d)?A.none():A.some(Po(l,d))},A7=(n,s,a)=>{const l=n.element;ln(l,s.leftAttr,a.left+"px"),ln(l,s.topAttr,a.top+"px")},E5=(n,s)=>{const a=n.element;gs(a,s.leftAttr),gs(a,s.topAttr)},_7=(n,s,a,l)=>k7(n,s).fold(()=>a,d=>ib(d.left+l.left,d.top+l.top)),T5=(n,s,a,l,d,g)=>{const h=_7(n,s,a,l),C=s.mustSnap?A5(n,s,h,d,g):$v(n,s,h,d,g),x=PE(h,d,g);return A7(n,s,x),C.fold(()=>({coord:ib(x.left,x.top),extra:A.none()}),T=>({coord:T.output,extra:T.extra}))},O7=(n,s)=>{E5(n,s)},k5=(n,s,a,l)=>ha(n,d=>{const g=d.sensor;return x5(s,g,d.range.left,d.range.top,a,l)?A.some({output:$E(d.output,s,a,l),extra:d.extra}):A.none()}),A5=(n,s,a,l,d)=>{const g=s.getSnapPoints(n);return k5(g,a,l,d).orThunk(()=>ao(g,(x,T)=>{const _=T.sensor,N=S5(a,_,T.range.left,T.range.top,l,d);return x.deltas.fold(()=>({deltas:A.some(N),snap:A.some(T)}),L=>{const j=(N.left+N.top)/2,Z=(L.left+L.top)/2;return j<=Z?{deltas:A.some(N),snap:A.some(T)}:x})},{deltas:A.none(),snap:A.none()}).snap.map(x=>({output:$E(x.output,a,l,d),extra:x.extra})))},$v=(n,s,a,l,d)=>{const g=s.getSnapPoints(n);return k5(g,a,l,d)},_5=(n,s,a)=>({coord:$E(n.output,n.output,s,a),extra:n.extra});var R7=Object.freeze({__proto__:null,snapTo:(n,s,a,l)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=gc(n.element),h=Hs(g),C=l0(d),x=_5(l,h,C),T=vA(x.coord,h,C);ta(d,T)}}});const _a=(n,s)=>mf(n,{},ye(s,a=>Gk(a.name(),"Cannot configure "+a.name()+" for "+n)).concat([Sc("dump",Yt)])),XC=n=>n.dump,ac=(n,s)=>({...nt(s),...n.dump}),$d={field:_a,augment:ac,get:XC},N7=(n,s)=>(n.length>0?[Sd("parts",n)]:[]).concat([Ze("uid"),we("dom",{}),we("components",[]),ow("originalSpec"),we("debug.sketcher",{})]).concat(s),O5=(n,s,a,l,d)=>{const g=N7(l,d);return Cc(n+" [SpecSchema]",fl(g.concat(s)),a)},M7=(n,s,a,l)=>{const d=FE(l),g=O5(n,s,d,[],[]);return a(g,d)},yA=(n,s,a,l,d)=>{const g=FE(d),h=jr(a),C=pm(a),x=O5(n,s,g,h,[C]),T=qc(n,x,a),_=B0(n,x,T.internals());return l(x,_,g,T.externals())},IE=n=>mo(n,"uid"),FE=n=>IE(n)?n:{...n,uid:up("uid")},P7=n=>n.uid!==void 0,_X=fl([Ze("name"),Ze("factory"),Ze("configFields"),we("apis",{}),we("extraApis",{})]),D5=fl([Ze("name"),Ze("factory"),Ze("configFields"),Ze("partFields"),we("apis",{}),we("extraApis",{})]),cu=n=>{const s=Cc("Sketcher for "+n.name,_X,n),a=g=>M7(s.name,s.configFields,s.factory,g),l=$s(s.apis,J1),d=$s(s.extraApis,(g,h)=>T1(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...l,...d}},Cl=n=>{const s=Cc("Sketcher for "+n.name,D5,n),a=h=>yA(s.name,s.configFields,s.partFields,s.factory,h),l=bf(s.name,s.partFields),d=$s(s.apis,J1),g=$s(s.extraApis,(h,C)=>T1(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:l,...d,...g}},Am=cu({name:"Container",factory:n=>{const{attributes:s,...a}=n.dom;return{uid:n.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:n.components,behaviours:XC(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[we("components",[]),_a("containerBehaviours",[]),we("events",{}),we("domModification",{}),we("eventOrder",{})]}),CA="data-initial-z-index",B7=n=>{hc(n.element).filter(fc).each(s=>{Jr(s,CA).fold(()=>Kn(s,"z-index"),a=>gn(s,"z-index",a)),gs(s,CA)})},$7=n=>{hc(n.element).filter(fc).each(s=>{xs(s,"z-index").each(a=>{ln(s,CA,a)}),gn(s,"z-index",hs(n.element,"z-index"))})},R5=(n,s)=>{n.getSystem().addToGui(s),$7(s)},Iv=n=>{B7(n),n.getSystem().removeFromGui(n)},LE=(n,s,a)=>n.getSystem().build(Am.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var I7=Zc("snaps",[Ze("getSnapPoints"),yo("onSensor"),Ze("leftAttr"),Ze("topAttr"),we("lazyViewport",Fa),we("mustSnap",!1)]);const QC=[we("useFixed",an),Ze("blockerClass"),we("getTarget",Yt),we("onDrag",U),we("repositionTarget",!0),we("onDrop",U),ls("getBounds",Fa),I7],HE=n=>Br(xs(n,"left"),xs(n,"top"),xs(n,"position"),(s,a,l)=>(l==="fixed"?ib:Pf)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=xa(n);return Bd(s.left,s.top)}),xA=(n,s,a,l,d)=>{const g=d.bounds,h=Bv(s,a,l),C=or(h.left,g.x,g.x+g.width-d.width),x=or(h.top,g.y,g.y+g.height-d.height),T=Bd(C,x);return s.fold(()=>{const _=bA(T,a,l);return Pf(_.left,_.top)},oe(T),()=>{const _=PE(T,a,l);return ib(_.left,_.top)})},F7=(n,s,a,l,d,g,h)=>{const C=s.fold(()=>{const x=BE(a,g.left,g.top),T=PE(x,l,d);return ib(T.left,T.top)},x=>{const T=T5(n,x,a,g,l,d);return T.extra.each(_=>{x.onSensor(n,_)}),T.coord});return xA(n,C,l,d,h)},L7=(n,s,a,l)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=gc(n.element),h=Hs(g),C=l0(d),x=HE(d),T=F7(n,s.snaps,x,h,C,l,a),_=vA(T,h,C);ta(d,_)}s.onDrag(n,d,l)},N5=(n,s)=>({bounds:n.getBounds(),height:br(s.element),width:_u(s.element)}),SA=(n,s,a,l,d)=>{const g=a.update(l,d),h=a.getStartData().getOrThunk(()=>N5(s,n));g.each(C=>{L7(n,s,h,C)})},M5=(n,s,a,l)=>{s.each(Iv),a.snaps.each(g=>{O7(n,g)});const d=a.getTarget(n.element);l.reset(),a.onDrop(n,d)},wA=n=>(s,a)=>{const l=d=>{a.setStartData(N5(s,d))};return ks([Ie(w2(),d=>{a.getStartData().each(()=>l(d))}),...n(s,a,l)])},H7=n=>ks([Ie(Gc(),n.forceDrop),Ie(p0(),n.drop),Ie($h(),(s,a)=>{n.move(a.event)}),Ie(Mr(),n.delayDrop)]);var V7=Object.freeze({__proto__:null,getData:n=>A.from(Po(n.x,n.y)),getDelta:(n,s)=>Po(s.left-n.left,s.top-n.top)});const P5=(n,s,a)=>[Ie(Gc(),(l,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>M5(l,A.some(T),n,s),C=Jk(h,200),x={drop:h,delayDrop:C.schedule,forceDrop:h,move:N=>{C.cancel(),SA(l,n,s,V7,N)}},T=LE(l,n.blockerClass,H7(x));(()=>{a(l),R5(l,T)})()})],U7=[...QC,Ro("dragger",{handlers:wA(P5)})],j7=n=>ks([Ie(hl(),n.forceDrop),Ie(gf(),n.drop),Ie(y1(),n.drop),Ie(ur(),(s,a)=>{n.move(a.event)})]),Fv=n=>{const s=n[0];return A.some(Po(s.clientX,s.clientY))};var zE=Object.freeze({__proto__:null,getData:n=>{const a=n.raw.touches;return a.length===1?Fv(a):A.none()},getDelta:(n,s)=>Po(s.left-n.left,s.top-n.top)});const $5=(n,s,a)=>{const l=hn(),d=g=>{M5(g,l.get(),n,s),l.clear()};return[Ie(hl(),(g,h)=>{h.stop();const C=()=>d(g),x={drop:C,delayDrop:U,forceDrop:C,move:N=>{SA(g,n,s,zE,N)}},T=LE(g,n.blockerClass,j7(x));l.set(T),(()=>{a(g),R5(g,T)})()}),Ie(ur(),(g,h)=>{h.stop(),SA(g,n,s,zE,h.event)}),Ie(gf(),(g,h)=>{h.stop(),d(g)}),Ie(y1(),d)]},Et=[...QC,Ro("dragger",{handlers:wA($5)})],ub=(n,s,a)=>[...P5(n,s,a),...$5(n,s,a)],W7=[...QC,Ro("dragger",{handlers:wA(ub)})];var G7=Object.freeze({__proto__:null,mouse:U7,touch:Et,mouseOrTouch:W7}),F5=Object.freeze({__proto__:null,init:()=>{let n=A.none(),s=A.none();const a=()=>{n=A.none(),s=A.none()},l=(x,T)=>{const _=n.map(N=>x.getDelta(N,T));return n=A.some(T),_},d=(x,T)=>x.getData(T).bind(_=>l(x,_)),g=x=>{s=A.some(x)},h=()=>s,C=oe({});return yl({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const Wg=J2({branchKey:"mode",branches:G7,name:"dragging",active:{events:(n,s)=>n.dragger.handlers(n,s)},extra:{snap:n=>({sensor:n.sensor,range:n.range,output:n.output,extra:A.from(n.extra)})},state:F5,apis:R7}),K7=["input","textarea"],kA=n=>{const s=Ml(n);return bt(K7,s)},L5=(n,s)=>{const a=s.getRoot(n).getOr(n.element);Rs(a,s.invalidClass),s.notify.each(l=>{kA(n.element)&&ln(n.element,"aria-invalid",!1),l.getContainer(n).each(d=>{Il(d,l.validHtml)}),l.onValid(n)})},H5=(n,s,a,l)=>{const d=s.getRoot(n).getOr(n.element);jo(d,s.invalidClass),s.notify.each(g=>{kA(n.element)&&ln(n.element,"aria-invalid",!0),g.getContainer(n).each(h=>{Il(h,l)}),g.onInvalid(n,l)})},AA=(n,s,a)=>s.validator.fold(()=>Go.pure(Wt.value(!0)),l=>l.validate(n)),_A=(n,s,a)=>(s.notify.each(l=>{l.onValidate(n)}),AA(n,s).map(l=>n.getSystem().isConnected()?l.fold(d=>(H5(n,s,a,d),Wt.error(d)),d=>(L5(n,s),Wt.value(d))):Wt.error("No longer in system")));var OA=Object.freeze({__proto__:null,markValid:L5,markInvalid:H5,query:AA,run:_A,isInvalid:(n,s)=>{const a=s.getRoot(n).getOr(n.element);return cr(a,s.invalidClass)}}),VE=Object.freeze({__proto__:null,events:(n,s)=>n.validator.map(a=>ks([Ie(a.onEvent,l=>{_A(l,n,s).get(Yt)})].concat(a.validateOnLoad?[ps(l=>{_A(l,n,s).get(U)})]:[]))).getOr({})}),UE=[Ze("invalidClass"),we("getRoot",A.none),Zc("notify",[we("aria","alert"),we("getContainer",A.none),we("validHtml",""),yo("onValid"),yo("onInvalid"),yo("onValidate")]),Zc("validator",[Ze("validate"),we("onEvent","input"),we("validateOnLoad",!0)])];const Lv=(n,s,a)=>{s.store.manager.onLoad(n,s,a)},_m=(n,s,a)=>{s.store.manager.onUnload(n,s,a)};var NX=Object.freeze({__proto__:null,onLoad:Lv,onUnload:_m,setValue:(n,s,a,l)=>{s.store.manager.setValue(n,s,a,l)},getValue:(n,s,a)=>s.store.manager.getValue(n,s,a),getState:(n,s,a)=>a}),Q7=Object.freeze({__proto__:null,events:(n,s)=>{const a=n.resetOnDom?[ps((l,d)=>{Lv(l,n,s)}),ou((l,d)=>{_m(l,n,s)})]:[K2(n,s,Lv)];return ks(a)}});const jE=()=>{const n=Pt(null),s=()=>({mode:"memory",value:n.get()}),a=()=>n.get()===null,l=()=>{n.set(null)};return yl({set:n.set,get:n.get,isNotSet:a,clear:l,readState:s})},J7=()=>yl({readState:U}),z5=()=>{const n=Pt({}),s=Pt({});return yl({readState:()=>({mode:"dataset",dataByValue:n.get(),dataByText:s.get()}),lookup:h=>Vt(n.get(),h).orThunk(()=>Vt(s.get(),h)),update:h=>{const C=n.get(),x=s.get(),T={},_={};He(h,N=>{T[N.value]=N,Vt(N,"meta").each(L=>{Vt(L,"text").each(j=>{_[j]=N})})}),n.set({...C,...T}),s.set({...x,..._})},clear:()=>{n.set({}),s.set({})}})};var V5=Object.freeze({__proto__:null,memory:jE,dataset:z5,manual:J7,init:n=>n.store.manager.state(n)});const U5=(n,s,a,l)=>{const d=s.store;a.update([l]),d.setValue(n,l),s.onSetValue(n,l)},eH=(n,s,a)=>{const l=s.store,d=l.getDataKey(n);return a.lookup(d).getOrThunk(()=>l.getFallbackEntry(d))},j5=(n,s,a)=>{s.store.initialValue.each(d=>{U5(n,s,a,d)})},W5=(n,s,a)=>{a.clear()};var tH=[Lo("initialValue"),Ze("getFallbackEntry"),Ze("getDataKey"),Ze("setValue"),Ro("manager",{setValue:U5,getValue:eH,onLoad:j5,onUnload:W5,state:z5})];const Z5=(n,s,a)=>s.store.getValue(n),nH=(n,s,a,l)=>{s.store.setValue(n,l),s.onSetValue(n,l)},DA=(n,s,a)=>{s.store.initialValue.each(l=>{s.store.setValue(n,l)})};var G5=[Ze("getValue"),we("setValue",U),Lo("initialValue"),Ro("manager",{setValue:nH,getValue:Z5,onLoad:DA,onUnload:U,state:Hu.init})];const q5=(n,s,a,l)=>{a.set(l),s.onSetValue(n,l)},K5=(n,s,a)=>a.get(),oH=(n,s,a)=>{s.store.initialValue.each(l=>{a.isNotSet()&&a.set(l)})},sH=(n,s,a)=>{a.clear()};var rH=[Lo("initialValue"),Ro("manager",{setValue:q5,getValue:K5,onLoad:oH,onUnload:sH,state:jE})],aH=[Ul("store",{mode:"memory"},xc("mode",{memory:rH,manual:G5,dataset:tH})),yo("onSetValue"),we("resetOnDom",!1)];const _t=ma({fields:aH,name:"representing",active:Q7,apis:NX,extra:{setValueFrom:(n,s)=>{const a=_t.getValue(s);_t.setValue(n,a)}},state:V5}),lu=ma({fields:UE,name:"invalidating",active:VE,apis:OA,extra:{validation:n=>s=>{const a=_t.getValue(s);return Go.pure(n(a))}}});var Y5=Object.freeze({__proto__:null,exhibit:(n,s)=>zu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const WE=Pa.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),RA=(n,s,a,l,d,g)=>{const h=s.rect,C=h.x-a,x=h.y-l,T=h.width,_=h.height,N=d-(C+T),L=g-(x+_),j=A.some(C),Z=A.some(x),ne=A.some(N),ae=A.some(L),Y=A.none();return I0(s.direction,()=>Kc(n,j,Z,Y,Y),()=>Kc(n,Y,Z,ne,Y),()=>Kc(n,j,Y,Y,ae),()=>Kc(n,Y,Y,ne,ae),()=>Kc(n,j,Z,Y,Y),()=>Kc(n,j,Y,Y,ae),()=>Kc(n,j,Z,Y,Y),()=>Kc(n,Y,Z,ne,Y))},NA=(n,s)=>n.fold(()=>{const a=s.rect;return Kc("absolute",A.some(a.x),A.some(a.y),A.none(),A.none())},(a,l,d,g)=>RA("absolute",s,a,l,d,g),(a,l,d,g)=>RA("fixed",s,a,l,d,g)),MA=(n,s)=>{const a=jt(u1,s),l=n.fold(a,a,()=>{const h=Hs();return u1(s).translate(-h.left,-h.top)}),d=_u(s),g=br(s);return Nr(l.left,l.top,d,g)},lH=(n,s)=>s.fold(()=>n.fold(Fa,Fa,Nr),a=>n.fold(oe(a),oe(a),()=>{const l=X5(n,a.x,a.y);return Nr(l.left,l.top,a.width,a.height)})),X5=(n,s,a)=>{const l=Po(s,a),d=()=>{const g=Hs();return l.translate(-g.left,-g.top)};return n.fold(oe(l),oe(l),d)},PA=(n,s,a,l)=>n.fold(s,a,l);WE.none;const iH=WE.relative,ZE=WE.fixed,uH=(n,s)=>({anchorBox:n,origin:s}),Q5=(n,s)=>uH(n,s),Oa=Pa.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),dH=(n,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:h,y:C,right:x,bottom:T,width:_,height:N}=n,L=h>=a&&h<=d,j=C>=l&&C<=g,Z=L&&j,ne=x<=d&&x>=a,ae=T<=g&&T>=l,Y=ne&&ae,le=Math.min(_,h>=a?d-h:x-a),pe=Math.min(N,C>=l?g-C:T-l);return{originInBounds:Z,sizeInBounds:Y,visibleW:le,visibleH:pe}},J5=(n,s)=>{const{x:a,y:l,right:d,bottom:g}=s,{x:h,y:C,width:x,height:T}=n,_=Math.max(a,d-x),N=Math.max(l,g-T),L=or(h,a,_),j=or(C,l,N),Z=Math.min(L+x,d)-L,ne=Math.min(j+T,g)-j;return Nr(L,j,Z,ne)},eM=(n,s,a)=>{const l=oe(s.bottom-a.y),d=oe(a.bottom-s.y),g=_g(n,d,d,l),h=oe(s.right-a.x),C=oe(a.right-s.x);return{maxWidth:Cf(n,C,C,h),maxHeight:g}},mH=(n,s,a,l)=>{const d=n.bubble,g=d.offset,h=Sf(l,n.restriction,g),C=n.x+g.left,x=n.y+g.top,T=Nr(C,x,s,a),{originInBounds:_,sizeInBounds:N,visibleW:L,visibleH:j}=dH(T,h),Z=_&&N,ne=Z?T:J5(T,h),ae=ne.width>0&&ne.height>0,{maxWidth:Y,maxHeight:le}=eM(n.direction,ne,l),pe={rect:ne,maxHeight:le,maxWidth:Y,direction:n.direction,placement:n.placement,classes:{on:d.classesOn,off:d.classesOff},layout:n.label,testY:x};return Z||n.alwaysFit?Oa.fit(pe):Oa.nofit(pe,L,j,ae)},tM=(n,s,a,l,d,g)=>{const h=l.width,C=l.height,x=(_,N,L,j,Z)=>{const ne=_(a,l,d,n,g),ae=mH(ne,h,C,g);return ae.fold(oe(ae),(Y,le,pe,Ee)=>(Z===Ee?pe>j||le>L:!Z&&Ee)?ae:Oa.nofit(N,L,j,Z))};return ao(s,(_,N)=>{const L=jt(x,N);return _.fold(oe(_),L)},Oa.nofit({rect:a,maxHeight:l.height,maxWidth:l.width,direction:O1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Yt,Yt)},BA=["top","bottom","right","left"],GE="data-alloy-transition-timer",fH=(n,s)=>yh(n,s.classes),gH=(n,s,a)=>a.exists(l=>{const d=n.mode;return d==="all"?!0:l[d]!==s[d]}),hH=(n,s)=>{const a=l=>parseFloat(l).toFixed(3);return lc(s,(l,d)=>{const g=n[d].map(a),h=l.map(a);return!Qs(g,h)}).isSome()},nM=n=>{const s=g=>{const C=hs(n,g).split(/\s*,\s*/);return Ln(C,oi)},a=g=>{if(De(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ol(g,"ms")?h:h*1e3}else return 0},l=s("transition-delay"),d=s("transition-duration");return ao(d,(g,h,C)=>{const x=a(l[C])+a(h);return Math.max(g,x)},0)},pH=(n,s)=>{const a=_s(),l=_s();let d;const g=T=>{const _=T.raw.pseudoElement??"";return I(T.target,n)&&pa(_)&&bt(BA,T.raw.propertyName)},h=T=>{if(pn(T)||g(T)){a.clear(),l.clear();const _=T?.raw.type;(pn(_)||_===b0())&&(clearTimeout(d),gs(n,GE),ua(n,s.classes))}},C=Do(n,um(),T=>{g(T)&&(C.unbind(),a.set(Do(n,b0(),h)),l.set(Do(n,Yk(),h)))}),x=nM(n);window.requestAnimationFrame(()=>{d=setTimeout(h,x+17),ln(n,GE,d)})},bH=(n,s)=>{Ki(n,s.classes),Jr(n,GE).each(a=>{clearTimeout(parseInt(a,10)),gs(n,GE)}),pH(n,s)},oM=(n,s,a,l,d,g)=>{const h=gH(l,d,g);if(h||fH(n,l)){gn(n,"position",a.position);const C=MA(s,n),x=NA(s,{...d,rect:C}),T=no(BA,_=>x[_]);hH(a,T)&&(ta(n,T),h&&bH(n,l),Fl(n))}else ua(n,l.classes)},sM=n=>({width:Math.ceil(_u(n)),height:br(n)}),rM=(n,s,a,l)=>{Kn(s,"max-height"),Kn(s,"max-width");const d=sM(s);return tM(s,l.preference,n,d,a,l.bounds)},vH=(n,s)=>{const a=s.classes;ua(n,a.off),Ki(n,a.on)},yH=(n,s,a)=>{const l=a.maxHeightFunction;l(n,s.maxHeight)},CH=(n,s,a)=>{const l=a.maxWidthFunction;l(n,s.maxWidth)},xH=(n,s,a)=>{const l=NA(a.origin,s);a.transition.each(d=>{oM(n,a.origin,l,d,s,a.lastPlacement)}),Mv(n,l)},aM=(n,s)=>{Zh(n,s.placement)},$A=(n,s,a)=>n[s]===void 0?a:n[s],fp=(n,s,a,l,d,g,h,C)=>{const x=$A(h,"maxHeightFunction",W2()),T=$A(h,"maxWidthFunction",U),_=n.anchorBox,N=n.origin,L={bounds:lH(N,g),origin:N,preference:l,maxHeightFunction:x,maxWidthFunction:T,lastPlacement:d,transition:C};return cM(_,s,a,L)},cM=(n,s,a,l)=>{const d=rM(n,s,a,l);return xH(s,d,l),aM(s,d),vH(s,d),yH(s,d,l),CH(s,d,l),{layout:d.layout,placement:d.placement}},JC=Yt,gp=()=>Zc("layouts",[Ze("onLtr"),Ze("onRtl"),Lo("onBottomLtr"),Lo("onBottomRtl")]),qE=(n,s,a,l,d,g,h)=>{const C=h.map(i3).getOr(!1),x=s.layouts.map(j=>j.onLtr(n)),T=s.layouts.map(j=>j.onRtl(n)),_=C?s.layouts.bind(j=>j.onBottomLtr.map(Z=>Z(n))).or(x).getOr(d):x.getOr(a),N=C?s.layouts.bind(j=>j.onBottomRtl.map(Z=>Z(n))).or(T).getOr(g):T.getOr(l);return n1(_,N)(n)},Hv=(n,s,a)=>{const l=s.hotspot,d=MA(a,l.element),g=qE(n.element,s,V2(),V0(),z0(),z2(),A.some(s.hotspot.element));return A.some(JC({anchorBox:d,bubble:s.bubble.getOr(yf()),overrides:s.overrides,layouts:g}))};var SH=[Ze("hotspot"),Lo("bubble"),we("overrides",{}),gp(),Ro("placement",Hv)];const wH=(n,s,a)=>{const l=X5(a,s.x,s.y),d=Nr(l.left,l.top,s.width,s.height),g=qE(n.element,s,H2(),pw(),H2(),pw(),A.none());return A.some(JC({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var lM=[Ze("x"),Ze("y"),we("height",0),we("width",0),we("bubble",yf()),we("overrides",{}),gp(),Ro("placement",wH)];const iM=Pa.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),EH=n=>n.fold(Yt,(s,a,l)=>s.translate(-a,-l)),TH=n=>n.fold(Yt,Yt),IA=n=>ao(n,(s,a)=>s.translate(a.left,a.top),Po(0,0)),FA=n=>{const s=ye(n,EH);return IA(s)},KE=n=>{const s=ye(n,TH);return IA(s)},kH=iM.screen,hp=iM.absolute,uM=(n,s,a)=>{const l=sg(a.root).dom,d=g=>{const h=gc(g),C=gc(n.element);return I(h,C)};return A.from(l.frameElement).map(at.fromDom).filter(d).map(xa)},LA=(n,s,a)=>{const l=gc(n.element),d=Hs(l),g=uM(n,s,a).getOr(d);return hp(g,d.left,d.top)},HA=(n,s,a,l)=>{const d=kH(Po(n,s));return A.some(af(d,a,l))},dM=(n,s,a,l,d)=>n.map(g=>{const h=[s,g.point],C=PA(l,()=>KE(h),()=>KE(h),()=>FA(h)),x=Lk(C.left,C.top,g.width,g.height),T=a.showAbove?z0():V2(),_=a.showAbove?z2():V0(),N=qE(d,a,T,_,T,_,A.none());return JC({anchorBox:x,bubble:a.bubble.getOr(yf()),overrides:a.overrides,layouts:N})}),ex=(n,s,a)=>{const l=LA(n,a,s);return s.node.filter(bo).bind(d=>{const g=d.dom.getBoundingClientRect(),h=HA(g.left,g.top,g.width,g.height),C=s.node.getOr(n.element);return dM(h,l,s,a,C)})};var tx=[Ze("node"),Ze("root"),Lo("bubble"),gp(),we("overrides",{}),we("showAbove",!1),Ro("placement",ex)];const nx=(n,s)=>({element:n,offset:s}),zA=(n,s)=>{const a=ci(n);if(a.length===0)return nx(n,s);if(s<a.length)return nx(a[s],0);{const l=a[a.length-1],d=md(l)?vh(l).length:ci(l).length;return nx(l,d)}},Zg=(n,s)=>md(n)?nx(n,s):zA(n,s),Bf=n=>n.foffset!==void 0,mM=(n,s)=>s.getSelection.getOrThunk(()=>()=>fg(n))().map(l=>{if(Bf(l)){const d=Zg(l.start,l.soffset),g=Zg(l.finish,l.foffset);return zl.range(d.element,d.offset,g.element,g.offset)}else return l}),AH=(n,s,a)=>{const l=sg(s.root).dom,d=LA(n,a,s),g=mM(l,s).bind(x=>{if(Bf(x))return rf(l,zl.exactFromRange(x)).orThunk(()=>{const _=at.fromText(Gm);gd(x.start,_);const N=gg(l,zl.exact(_,0,_,1));return cl(_),N}).bind(_=>HA(_.left,_.top,_.width,_.height));{const T=$s(x,N=>N.dom.getBoundingClientRect()),_={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return HA(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),C=mM(l,s).bind(x=>Bf(x)?fc(x.start)?A.some(x.start):Vi(x.start):A.some(x.firstCell)).getOr(n.element);return dM(g,d,s,a,C)};var fM=[Lo("getSelection"),Ze("root"),Lo("bubble"),gp(),we("overrides",{}),we("showAbove",!1),Ro("placement",AH)];const Fd="link-layout",YE=n=>n.x+n.width,gM=(n,s)=>n.x-s.width,VA=(n,s)=>n.y-s.height+n.height,UA=n=>n.y,jA=(n,s,a)=>Ta(YE(n),UA(n),a.southeast(),O1(),"southeast",Wr(n,{left:0,top:2}),Fd),XE=(n,s,a)=>Ta(gM(n,s),UA(n),a.southwest(),B2(),"southwest",Wr(n,{right:1,top:2}),Fd),WA=(n,s,a)=>Ta(YE(n),VA(n,s),a.northeast(),F0(),"northeast",Wr(n,{left:0,bottom:3}),Fd),hM=(n,s,a)=>Ta(gM(n,s),VA(n,s),a.northwest(),Og(),"northwest",Wr(n,{right:1,bottom:3}),Fd),pM=()=>[jA,XE,WA,hM],bM=()=>[XE,jA,hM,WA],QE=(n,s,a)=>{const l=MA(a,s.item.element),d=qE(n.element,s,pM(),bM(),pM(),bM(),A.none());return A.some(JC({anchorBox:l,bubble:yf(),overrides:s.overrides,layouts:d}))};var ZA=[Ze("item"),gp(),we("overrides",{}),Ro("placement",QE)],JE=xc("type",{selection:fM,node:tx,hotspot:SH,submenu:ZA,makeshift:lM});const vM=[Wc("classes",zr),wc("mode","all",["all","layout","placement"])],_H=[we("useFixed",an),Lo("getBounds")],yM=[jc("anchor",JE),Zc("transition",vM)],CM=()=>{const n=document.documentElement;return ZE(0,0,n.clientWidth,n.clientHeight)},xM=n=>{const s=xa(n.element),a=n.element.dom.getBoundingClientRect();return iH(s.left,s.top,a.width,a.height)},SM=(n,s,a,l,d,g)=>{const h=Q5(s.anchorBox,n);return fp(h,l.element,s.bubble,s.layouts,d,a,s.overrides,g)},OH=(n,s,a,l,d)=>{const g=A.none();eT(n,s,a,l,d,g)},eT=(n,s,a,l,d,g)=>{const h=Cc("placement.info",on(yM),d),C=h.anchor,x=l.element,T=a.get(l.uid);Fg(()=>{gn(x,"position","fixed");const _=xs(x,"visibility");gn(x,"visibility","hidden");const N=s.useFixed()?CM():xM(n);C.placement(n,C,N).each(L=>{const j=g.orThunk(()=>s.getBounds.map(os)),Z=SM(N,L,j,l,T,h.transition);a.set(l.uid,Z)}),_.fold(()=>{Kn(x,"visibility")},L=>{gn(x,"visibility",L)}),xs(x,"left").isNone()&&xs(x,"top").isNone()&&xs(x,"right").isNone()&&xs(x,"bottom").isNone()&&dc(xs(x,"position"),"fixed")&&Kn(x,"position")},x)};var DH=Object.freeze({__proto__:null,position:OH,positionWithinBounds:eT,getMode:(n,s,a)=>s.useFixed()?"fixed":"absolute",reset:(n,s,a,l)=>{const d=l.element;He(["position","left","right","top","bottom"],g=>Kn(d,g)),M1(d),a.clear(l.uid)}}),wM=Object.freeze({__proto__:null,init:()=>{let n={};return yl({readState:()=>n,clear:d=>{un(d)?delete n[d]:n={}},set:(d,g)=>{n[d]=g},get:d=>Vt(n,d)})}});const Dc=ma({fields:_H,name:"positioning",active:Y5,apis:DH,state:wM}),RH=(n,s)=>s.universal?n:Ln(n,a=>bt(s.channels,a));var ox=Object.freeze({__proto__:null,events:n=>ks([Ie(mm(),(s,a)=>{const l=n.channels,d=xo(l),g=a,h=RH(d,g);He(h,C=>{const x=l[C],T=x.schema,_=Cc("channel["+C+`] data
Receiver: `+Bu(s.element),T,g.data);x.onReceive(s,_)})})])}),MH=[jc("channels",WS(Wt.value,fl([hf("onReceive"),we("schema",bi())])))];const Rc=ma({fields:MH,name:"receiving",active:ox});var TM=Object.freeze({__proto__:null,events:(n,s)=>{const a=(l,d)=>{n.updateState.each(g=>{const h=g(l,d);s.set(h)}),n.renderComponents.each(g=>{const h=g(d,s.get());(n.reuseDom?bE:OC)(l,h)})};return ks([Ie(mm(),(l,d)=>{const g=d;if(!g.universal){const h=n.channel;bt(g.channels,h)&&a(l,g.data)}}),ps((l,d)=>{n.initialData.each(g=>{a(l,g)})})])}}),BH=Object.freeze({__proto__:null,getState:(n,s,a)=>a}),$H=[Ze("channel"),Lo("renderComponents"),Lo("updateState"),Lo("initialData"),Vr("reuseDom",!0)],FH=Object.freeze({__proto__:null,init:()=>{const n=Pt(A.none()),s=()=>n.set(A.none());return{readState:()=>n.get().getOr("none"),get:n.get,set:n.set,clear:s}}});const Kl=ma({fields:$H,name:"reflecting",active:TM,apis:BH,state:FH}),kM=(n,s,a,l)=>{a.get().each(h=>{dE(n)});const d=s.getAttachPoint(n);xm(d,n);const g=n.getSystem().build(l);return xm(n,g),a.set(g),g},AM=(n,s,a,l)=>{const d=kM(n,s,a,l);return s.onOpen(n,d),d},_M=(n,s,a,l)=>a.get().map(()=>kM(n,s,a,l)),tT=(n,s,a,l,d)=>{GA(n,s),AM(n,s,a,l),d(),DM(n,s)},nT=(n,s,a)=>{a.get().each(l=>{dE(n),wm(n),s.onClose(n,l),a.clear()})},oT=(n,s,a)=>a.isOpen(),LH=(n,s,a,l)=>oT(n,s,a)&&a.get().exists(d=>s.isPartOf(n,d,l)),HH=(n,s,a)=>a.get(),zH=(n,s,a,l)=>{xs(n.element,s).fold(()=>{gs(n.element,a)},d=>{ln(n.element,a,d)}),gn(n.element,s,l)},VH=(n,s,a)=>{Jr(n.element,a).fold(()=>Kn(n.element,s),l=>gn(n.element,s,l))},GA=(n,s,a)=>{const l=s.getAttachPoint(n);gn(n.element,"position",Dc.getMode(l)),zH(n,"visibility",s.cloakVisibilityAttr,"hidden")},OM=n=>cn(["top","left","right","bottom"],s=>xs(n,s).isSome()),DM=(n,s,a)=>{OM(n.element)||Kn(n.element,"position"),VH(n,"visibility",s.cloakVisibilityAttr)};var UH=Object.freeze({__proto__:null,cloak:GA,decloak:DM,open:AM,openWhileCloaked:tT,close:nT,isOpen:oT,isPartOf:LH,getState:HH,setContent:_M}),jH=Object.freeze({__proto__:null,events:(n,s)=>ks([Ie(C0(),(a,l)=>{nT(a,n,s)})])}),WH=[yo("onOpen"),yo("onClose"),Ze("isPartOf"),Ze("getAttachPoint"),we("cloakVisibilityAttr","data-precloak-visibility")],RM=Object.freeze({__proto__:null,init:()=>{const n=hn(),s=oe("not-implemented");return yl({readState:s,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}});const Co=ma({fields:WH,name:"sandboxing",active:jH,apis:UH,state:RM}),sx=(n,s)=>s.getAnimationRoot.fold(()=>n.element,a=>a(n)),Gg=n=>n.dimension.property,db=(n,s)=>n.dimension.getDimension(s),sT=(n,s)=>{const a=sx(n,s);ua(a,[s.shrinkingClass,s.growingClass])},$f=(n,s)=>{Rs(n.element,s.openClass),jo(n.element,s.closedClass),gn(n.element,Gg(s),"0px"),Fl(n.element)},qA=(n,s)=>{Rs(n.element,s.closedClass),jo(n.element,s.openClass),Kn(n.element,Gg(s))},NM=(n,s,a,l)=>{a.setCollapsed(),gn(n.element,Gg(s),db(s,n.element)),sT(n,s),$f(n,s),s.onStartShrink(n),s.onShrunk(n)},mb=(n,s,a,l)=>{const d=l.getOrThunk(()=>db(s,n.element));a.setCollapsed(),gn(n.element,Gg(s),d),Fl(n.element);const g=sx(n,s);Rs(g,s.growingClass),jo(g,s.shrinkingClass),$f(n,s),s.onStartShrink(n)},KA=(n,s,a)=>{const l=db(s,n.element);(l==="0px"?NM:mb)(n,s,a,A.some(l))},MM=(n,s,a)=>{const l=sx(n,s),d=cr(l,s.shrinkingClass),g=db(s,n.element);qA(n,s);const h=db(s,n.element);(d?()=>{gn(n.element,Gg(s),g),Fl(n.element)}:()=>{$f(n,s)})(),Rs(l,s.shrinkingClass),jo(l,s.growingClass),qA(n,s),gn(n.element,Gg(s),h),a.setExpanded(),s.onStartGrow(n)},pp=(n,s,a)=>{if(a.isExpanded()){Kn(n.element,Gg(s));const l=db(s,n.element);gn(n.element,Gg(s),l)}},ZH=(n,s,a)=>{a.isExpanded()||MM(n,s,a)},GH=(n,s,a)=>{a.isExpanded()&&KA(n,s,a)},Zu=(n,s,a)=>{a.isExpanded()&&NM(n,s,a)},PM=(n,s,a)=>a.isExpanded(),BM=(n,s,a)=>a.isCollapsed(),YA=(n,s,a)=>{const l=sx(n,s);return cr(l,s.growingClass)===!0},$M=(n,s,a)=>{const l=sx(n,s);return cr(l,s.shrinkingClass)===!0};var KH=Object.freeze({__proto__:null,refresh:pp,grow:ZH,shrink:GH,immediateShrink:Zu,hasGrown:PM,hasShrunk:BM,isGrowing:YA,isShrinking:$M,isTransitioning:(n,s,a)=>YA(n,s)||$M(n,s),toggleGrow:(n,s,a)=>{(a.isExpanded()?KA:MM)(n,s,a)},disableTransitions:sT,immediateGrow:(n,s,a)=>{a.isExpanded()||(qA(n,s),gn(n.element,Gg(s),db(s,n.element)),sT(n,s),a.setExpanded(),s.onStartGrow(n),s.onGrown(n))}}),FM=Object.freeze({__proto__:null,exhibit:(n,s,a)=>{const l=s.expanded;return zu(l?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:ff(s.dimension.property,"0px")})},events:(n,s)=>ks([ep(b0(),(a,l)=>{l.event.raw.propertyName===n.dimension.property&&(sT(a,n),s.isExpanded()&&Kn(a.element,n.dimension.property),(s.isExpanded()?n.onGrown:n.onShrunk)(a))})])}),LM=[Ze("closedClass"),Ze("openClass"),Ze("shrinkingClass"),Ze("growingClass"),Lo("getAnimationRoot"),yo("onShrunk"),yo("onStartShrink"),yo("onGrown"),yo("onStartGrow"),we("expanded",!1),jc("dimension",xc("property",{width:[Ro("property","width"),Ro("getDimension",n=>ia(n)+"px")],height:[Ro("property","height"),Ro("getDimension",n=>pr(n)+"px")]}))],XH=Object.freeze({__proto__:null,init:n=>{const s=Pt(n.expanded),a=()=>"expanded: "+s.get();return yl({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:jt(s.set,!1),setExpanded:jt(s.set,!0),readState:a})}});const Yc=ma({fields:LM,name:"sliding",active:FM,apis:KH,state:XH});var JH=Object.freeze({__proto__:null,events:(n,s)=>{const l=n.stream.streams.setup(n,s);return ks([Ie(n.event,l),ou(()=>s.cancel())].concat(n.cancelEvent.map(d=>[Ie(d,()=>s.cancel())]).getOr([])))}});const HM=n=>{const s=Pt(null);return yl({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var JA=Object.freeze({__proto__:null,throttle:HM,init:n=>n.stream.streams.state(n)});const ez=(n,s)=>{const a=n.stream,l=Qa(n.onStream,a.delay);return s.setTimer(l),(d,g)=>{l.throttle(d,g),a.stopEvent&&g.stop()}};var rx=[jc("stream",xc("mode",{throttle:[Ze("delay"),we("stopEvent",!0),Ro("streams",{setup:ez,state:HM})]})),we("event","input"),Lo("cancelEvent"),hf("onStream")];const zv=ma({fields:rx,name:"streaming",active:JH,state:JA});var zM=Object.freeze({__proto__:null,exhibit:(n,s)=>zu({attributes:Bh([{key:s.tabAttr,value:"true"}])})}),nz=[we("tabAttr","data-alloy-tabstop")];const us=ma({fields:nz,name:"tabstopping",active:zM}),oz=(n,s,a)=>{const l=s.aria;l.update(n,l,a.get())},sz=(n,s,a)=>{s.toggleClass.each(l=>{a.get()?jo(n.element,l):Rs(n.element,l)})},fb=(n,s,a,l)=>{const d=a.get();a.set(l),sz(n,s,a),oz(n,s,a),d!==l&&s.onToggled(n,l)},e_=(n,s,a)=>{fb(n,s,a,!a.get())},VM=(n,s,a)=>{fb(n,s,a,!0)},t_=(n,s,a)=>{fb(n,s,a,!1)},rz=(n,s,a)=>a.get(),n_=(n,s,a)=>{fb(n,s,a,s.selected)};var az=Object.freeze({__proto__:null,onLoad:n_,toggle:e_,isOn:rz,on:VM,off:t_,set:fb}),UM=Object.freeze({__proto__:null,exhibit:()=>zu({}),events:(n,s)=>{const a=Cw(n,s,e_),l=K2(n,s,n_);return ks(en([n.toggleOnExecute?[a]:[],[l]]))}});const cz=(n,s,a)=>{ln(n.element,"aria-pressed",a),s.syncWithExpanded&&s_(n,s,a)},lz=(n,s,a)=>{ln(n.element,"aria-selected",a)},o_=(n,s,a)=>{ln(n.element,"aria-checked",a)},s_=(n,s,a)=>{ln(n.element,"aria-expanded",a)};var jM=[we("selected",!1),Lo("toggleClass"),we("toggleOnExecute",!0),yo("onToggled"),Ul("aria",{mode:"none"},xc("mode",{pressed:[we("syncWithExpanded",!1),Ro("update",cz)],checked:[Ro("update",o_)],expanded:[Ro("update",s_)],selected:[Ro("update",lz)],none:[Ro("update",U)]}))];const eo=ma({fields:jM,name:"toggling",active:UM,apis:az,state:ww(!1)}),rT=Ct("tooltip.exclusive"),ax=Ct("tooltip.show"),cx=Ct("tooltip.hide"),lx=Ct("tooltip.immediateHide"),ix=Ct("tooltip.immediateShow"),WM=(n,s,a)=>{n.getSystem().broadcastOn([rT],{})};var uz=Object.freeze({__proto__:null,hideAllExclusive:WM,immediateOpenClose:(n,s,a,l)=>Wn(n,l?ix:lx),isEnabled:(n,s,a)=>a.isEnabled(),setComponents:(n,s,a,l)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&An.set(d,l)})},setEnabled:(n,s,a,l)=>a.setEnabled(l)}),dz=Object.freeze({__proto__:null,events:(n,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(wm(C),n.onHide(h,C),s.clearTooltip())}),s.clearTimer()},l=h=>{if(!s.isShowing()&&s.isEnabled()){WM(h);const C=n.lazySink(h).getOrDie(),x=h.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:ks(n.mode==="normal"?[Ie(jl(),T=>{Wn(h,ax)}),Ie(Mr(),T=>{Wn(h,cx)})]:[]),behaviours:nt([An.config({})])});s.setTooltip(x),xm(C,x),n.onShow(h,x),Dc.position(C,x,{anchor:n.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const x=n.lazySink(h).getOrDie();Dc.position(x,C,{anchor:n.anchor(h)})})},g=()=>{switch(n.mode){case"normal":return[Ie(Qi(),h=>{Wn(h,ix)}),Ie(Fh(),h=>{Wn(h,lx)}),Ie(jl(),h=>{Wn(h,ax)}),Ie(Mr(),h=>{Wn(h,cx)})];case"follow-highlight":return[Ie(E0(),(h,C)=>{Wn(h,ax)}),Ie(T0(),h=>{Wn(h,cx)})];case"children-normal":return[Ie(Qi(),(h,C)=>{sr(h.element).each(x=>{Uo(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Wn(h,ix)},T=>{s.isShowing()&&(n.onShow(h,T),d(h))})})}),Ie(Fh(),h=>{sr(h.element).fold(()=>{Wn(h,lx)},U)}),Ie(jl(),h=>{Bo(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Wn(h,ax)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),Ie(Mr(),h=>{Bo(h.element,"[data-mce-tooltip]:hover").fold(()=>{Wn(h,cx)},U)})];default:return[Ie(Qi(),(h,C)=>{sr(h.element).each(x=>{Uo(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Wn(h,ix)},T=>{s.isShowing()&&(n.onShow(h,T),d(h))})})}),Ie(Fh(),h=>{sr(h.element).fold(()=>{Wn(h,lx)},U)})]}};return ks(en([[q2(h=>{n.onSetup(h)}),Ie(ax,h=>{s.resetTimer(()=>{l(h)},n.delayForShow())}),Ie(cx,h=>{s.resetTimer(()=>{a(h)},n.delayForHide())}),Ie(ix,h=>{s.resetTimer(()=>{l(h)},0)}),Ie(lx,h=>{s.resetTimer(()=>{a(h)},0)}),Ie(mm(),(h,C)=>{const x=C;x.universal||(bt(x.channels,rT)||bt(x.channels,op()))&&(x.data.closedTooltip&&s.isShowing()&&x.data.closedTooltip(),a(h))}),ou(h=>{a(h)})],g()]))}}),mz=[Ze("lazySink"),Ze("tooltipDom"),we("exclusive",!0),we("tooltipComponents",[]),ls("delayForShow",oe(300)),ls("delayForHide",oe(100)),ls("onSetup",U),wc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),we("anchor",n=>({type:"hotspot",hotspot:n,layouts:{onLtr:oe([kr,Ns,Pr,ka,Tr,da]),onRtl:oe([kr,Ns,Pr,ka,Tr,da])},bubble:vl(0,-2,{})})),yo("onHide"),yo("onShow")],fz=Object.freeze({__proto__:null,init:()=>{const n=Pt(!0),s=hn(),a=hn(),l=()=>{s.on(clearTimeout)},d=(h,C)=>{l(),s.set(setTimeout(h,C))},g=oe("not-implemented");return yl({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:l,resetTimer:d,readState:g,isEnabled:()=>n.get(),setEnabled:h=>n.set(h)})}});const bs=ma({fields:mz,name:"tooltipping",active:dz,state:fz,apis:uz});var a_=Object.freeze({__proto__:null,events:()=>ks([Y0(C1(),St)]),exhibit:()=>zu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Om=ma({fields:[],name:"unselecting",active:a_}),gz=n=>{const s=n.dom.attributes!==void 0?n.dom.attributes:[];return ao(s,(a,l)=>l.name==="class"?a:{...a,[l.name]:l.value},{})},hz=n=>Array.prototype.slice.call(n.dom.classList,0),Dm=n=>{const s=at.fromHtml(n),a=ci(s),l=gz(s),d=hz(s),g=a.length===0?{}:{innerHtml:Ui(s)};return{tag:Ml(s),classes:d,attributes:l,...g}},To=n=>{const s=P7(n)&&Un(n,"uid")?n.uid:up("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...n,uid:s})}},fa=Ag,iu=P0,pz=(n,s)=>{const a=Pt(!1),l=Pt(!1);return{stop:()=>{a.set(!0)},cut:()=>{l.set(!0)},isStopped:a.get,isCut:l.get,event:n,setSource:s.set,getSource:s.get}},GM=n=>{const s=Pt(!1);return{stop:()=>{s.set(!0)},cut:U,isStopped:s.get,isCut:an,event:n,setSource:se("Cannot set source of a broadcasted event"),getSource:se("Cannot get source of a broadcasted event")}},qM=n=>n.raw.which===tC[0]&&!bt(["input","textarea"],Ml(n.target))&&!dg(n.target,'[contenteditable="true"]'),KM=(n,s)=>{const a={stopBackspace:!0,...s},l=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=n3(a),g=ye(l.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),j=>Do(n,j,Z=>{d.fireIfReady(Z,j).each(ae=>{ae&&Z.kill()}),a.triggerEvent(j,Z)&&Z.kill()})),h=hn(),C=Do(n,"paste",j=>{d.fireIfReady(j,"paste").each(ne=>{ne&&j.kill()}),a.triggerEvent("paste",j)&&j.kill(),h.set(setTimeout(()=>{a.triggerEvent(v0(),j)},0))}),x=Do(n,"keydown",j=>{a.triggerEvent("keydown",j)?j.kill():a.stopBackspace&&qM(j)&&j.prevent()}),T=Do(n,"focusin",j=>{a.triggerEvent("focusin",j)&&j.kill()}),_=hn(),N=Do(n,"focusout",j=>{a.triggerEvent("focusout",j)&&j.kill(),_.set(setTimeout(()=>{a.triggerEvent(Fh(),j)},0))});return{unbind:()=>{He(g,j=>{j.unbind()}),x.unbind(),T.unbind(),N.unbind(),C.unbind(),h.on(clearTimeout),_.on(clearTimeout)}}},If=(n,s)=>{const a=Vt(n,"target").getOr(s);return Pt(a)},Gu=Pa.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),c_=(n,s,a,l,d,g)=>{const h=n(s,l),C=pz(a,d);return h.fold(()=>(g.logEventNoHandlers(s,l),Gu.complete()),x=>{const T=x.descHandler;return Tv(T)(C),C.isStopped()?(g.logEventStopped(s,x.element,T.purpose),Gu.stopped()):C.isCut()?(g.logEventCut(s,x.element,T.purpose),Gu.complete()):hc(x.element).fold(()=>(g.logNoParent(s,x.element,T.purpose),Gu.complete()),N=>(g.logEventResponse(s,x.element,T.purpose),Gu.resume(N)))})},gb=(n,s,a,l,d,g)=>c_(n,s,a,l,d,g).fold(St,h=>gb(n,s,a,h,d,g),an),bz=(n,s,a,l,d)=>{const g=If(a,l);return c_(n,s,a,l,g,d)},l_=(n,s,a)=>{const l=GM(s);return He(n,d=>{const g=d.descHandler;Tv(g)(l)}),l.isStopped()},YM=(n,s,a,l)=>aT(n,s,a,a.target,l),aT=(n,s,a,l,d)=>{const g=If(a,l);return gb(n,s,a,l,g,d)},cT=(n,s)=>({element:n,descHandler:s}),XM=(n,s)=>({id:n,descHandler:s}),qu=()=>{const n={},s=(h,C,x)=>{ms(x,(T,_)=>{const N=n[_]!==void 0?n[_]:{};N[C]=sA(T,h),n[_]=N})},a=(h,C)=>Vu(C).bind(x=>Vt(h,x)).map(x=>cT(C,x));return{registerId:s,unregisterId:h=>{ms(n,(C,x)=>{mo(C,h)&&delete C[h]})},filterByType:h=>Vt(n,h).map(C=>as(C,(x,T)=>XM(T,x))).getOr([]),find:(h,C,x)=>Vt(n,C).bind(T=>Hl(x,_=>a(T,_),h))}},i_=()=>{const n=qu(),s={},a=T=>{const _=T.element;return Vu(_).getOrThunk(()=>PC("uid-",T.element))},l=(T,_)=>{const N=s[_];if(N===T)g(T);else throw new Error('The tagId "'+_+'" is already used by: '+Bu(N.element)+`
Cannot use it for: `+Bu(T.element)+`
The conflicting element is`+(bo(N.element)?" ":" not ")+"already in the DOM")},d=T=>{const _=a(T);Un(s,_)&&l(T,_);const N=[T];n.registerId(N,_,T.events),s[_]=T},g=T=>{Vu(T.element).each(_=>{delete s[_],n.unregisterId(_)})};return{find:(T,_,N)=>n.find(T,_,N),filter:T=>n.filterByType(T),register:d,unregister:g,getById:T=>Vt(s,T)}},u_=n=>{const s=Y=>hc(n.element).fold(St,le=>I(Y,le)),a=i_(),l=(Y,le)=>a.find(s,Y,le),d=KM(n.element,{triggerEvent:(Y,le)=>A2(Y,le.target,pe=>YM(l,Y,le,pe))}),g={debugInfo:oe("real"),triggerEvent:(Y,le,pe)=>{A2(Y,le,Ee=>aT(l,Y,pe,le,Ee))},triggerFocus:(Y,le)=>{Vu(Y).fold(()=>{Ir(Y)},pe=>{A2(dm(),Y,Ee=>(bz(l,dm(),{originator:le,kill:U,prevent:U,target:Y},Y,Ee),!1))})},triggerEscape:(Y,le)=>{g.triggerEvent("keydown",Y.element,le.event)},getByUid:Y=>ne(Y),getByDom:Y=>ae(Y),build:p,buildOrPatch:m,addToGui:Y=>{x(Y)},removeFromGui:Y=>{T(Y)},addToWorld:Y=>{h(Y)},removeFromWorld:Y=>{C(Y)},broadcast:Y=>{L(Y)},broadcastOn:(Y,le)=>{j(Y,le)},broadcastEvent:(Y,le)=>{Z(Y,le)},isConnected:St},h=Y=>{Y.connect(g),md(Y.element)||(a.register(Y),He(Y.components(),h),g.triggerEvent(x1(),Y.element,{target:Y.element}))},C=Y=>{md(Y.element)||(He(Y.components(),C),a.unregister(Y)),Y.disconnect()},x=Y=>{xm(n,Y)},T=Y=>{wm(Y)},_=()=>{d.unbind(),cl(n.element)},N=Y=>{const le=a.filter(mm());He(le,pe=>{const Ee=pe.descHandler;Tv(Ee)(Y)})},L=Y=>{N({universal:!0,data:Y})},j=(Y,le)=>{N({universal:!1,channels:Y,data:le})},Z=(Y,le)=>{const pe=a.filter(Y);return l_(pe,le)},ne=Y=>a.getById(Y).fold(()=>Wt.error(new Error('Could not find component with uid: "'+Y+'" in system.')),Wt.value),ae=Y=>{const le=Vu(Y).getOr("not found");return ne(le)};return h(n),{root:n,element:n.element,destroy:_,add:x,remove:T,getByUid:ne,getByDom:ae,addToWorld:h,removeFromWorld:C,broadcast:L,broadcastOn:j,broadcastEvent:Z}},QM=()=>{const n=(s,a)=>{a.stop(),Xh(s)};return[Ie(Cg(),n),Ie(Lh(),n),Pg(hl()),Pg(Gc())]},d_=n=>{const s=a=>Ef((l,d)=>{a(l),d.stop()});return ks(en([n.map(s).toArray(),QM()]))},sa=cu({name:"Button",factory:n=>{const s=d_(n.action),a=n.dom.tag,l=g=>Vt(n.dom,"attributes").bind(h=>Vt(h,g)),d=()=>{if(a==="button"){const g=l("type").getOr("button"),h=l("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:n.role.getOr(l("role").getOr("button"))}};return{uid:n.uid,dom:n.dom,components:n.components,events:s,behaviours:$d.augment(n.buttonBehaviours,[En.config({}),Xt.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:n.eventOrder}},configFields:[we("uid",void 0),Ze("dom"),we("components",[]),$d.field("buttonBehaviours",[En,Xt]),Lo("action"),Lo("role"),we("eventOrder",{})]}),vz=oe([we("shell",!1),Ze("makeItem"),we("setupItem",U),$d.field("listBehaviours",[An])]),m_=Tc({name:"items",overrides:()=>({behaviours:nt([An.config({})])})}),Cz=oe([m_]),f_=oe("CustomList"),g_=(n,s,a,l)=>{const d=(C,x)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const _=An.contents(T),N=x.length,L=N-_.length,j=L>0?fn(L,()=>n.makeItem()):[],Z=_.slice(N);He(Z,ae=>An.remove(T,ae)),He(j,ae=>An.append(T,ae));const ne=An.contents(T);He(ne,(ae,Y)=>{n.setupItem(C,ae,x[Y],Y)})})},g=n.shell?{behaviours:[An.config({})],components:[]}:{behaviours:[],components:s},h=C=>n.shell?A.some(C):es(C,n,"items");return{uid:n.uid,dom:n.dom,components:g.components,behaviours:ac(n.listBehaviours,g.behaviours),apis:{setItems:d}}},JM=Cl({name:f_(),configFields:vz(),partFields:Cz(),factory:g_,apis:{setItems:(n,s,a)=>{n.setItems(s,a)}}}),Vv="aria-controls",eP=n=>nf(n,a=>{if(!fc(a))return!1;const l=Rr(a,"id");return l!==void 0&&l.indexOf(Vv)>-1}).bind(a=>{const l=Rr(a,"id"),d=fr(a);return Bo(d,`[${Vv}="${l}"]`)}),tP=()=>{const n=Ct(Vv);return{id:n,link:l=>{ln(l,Vv,n)},unlink:l=>{gs(l,Vv)}}},nP=(n,s)=>eP(s).exists(a=>bp(n,a)),bp=(n,s)=>Ch(s,a=>I(a,n.element),an)||nP(n,s),oP="alloy.item-hover",sP="alloy.item-focus",rP="alloy.item-toggled",aP=n=>{(sr(n.element).isNone()||En.isFocused(n))&&(En.isFocused(n)||En.focus(n),tn(n,oP,{item:n}))},cP=n=>{tn(n,sP,{item:n})},lP=(n,s)=>{tn(n,rP,{item:n,state:s})},h_=oe(oP),xz=oe(sP),iP=oe(rP),uP=n=>n.role.fold(()=>n.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),Yt),Sz=(n,s)=>({aria:{mode:s?"selected":"checked"},...mr(n,(a,l)=>l!=="exclusive"),onToggled:(a,l)=>{Xe(n.onToggled)&&n.onToggled(a,l),lP(a,l)}}),wz=n=>({dom:n.dom,domModification:{...n.domModification,attributes:{role:uP(n),...n.domModification.attributes,"aria-haspopup":n.hasSubmenu,...n.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:$d.augment(n.itemBehaviours,[n.toggling.fold(eo.revoke,s=>eo.config(Sz(s,n.role.exists(a=>a==="option")))),En.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:s=>{cP(s)}}),Xt.config({mode:"execution"}),_t.config({store:{mode:"memory",initialValue:n.data}}),xn("item-type-events",[...QM(),Ie(jl(),aP),Ie(xg(),En.focus)])]),components:n.components,eventOrder:n.eventOrder});var p_=[Ze("data"),Ze("components"),Ze("dom"),we("hasSubmenu",!1),Lo("toggling"),Lo("role"),$d.field("itemBehaviours",[eo,En,Xt,_t]),we("ignoreFocus",!1),we("domModification",{}),Ro("builder",wz),we("eventOrder",{})];const dP=n=>({dom:n.dom,components:n.components,events:ks([f3(xg())])});var mP=[Ze("dom"),Ze("components"),Ro("builder",dP)];const b_=oe("item-widget"),v_=oe([oc({name:"widget",overrides:n=>({behaviours:nt([_t.config({store:{mode:"manual",getValue:s=>n.data,setValue:U}})])})})]),fP=n=>{const s=qc(b_(),n,v_()),a=B0(b_(),n,s.internals()),l=g=>es(g,n,"widget").map(h=>(Xt.focusIn(h),h)),d=(g,h)=>rp(h.event.target)?A.none():(n.autofocus&&h.setSource(g.element),A.none());return{dom:n.dom,components:a,domModification:n.domModification,events:ks([Ef((g,h)=>{l(g).each(C=>{h.stop()})}),Ie(jl(),aP),Ie(xg(),(g,h)=>{n.autofocus?l(g):En.focus(g)})]),behaviours:$d.augment(n.widgetBehaviours,[_t.config({store:{mode:"memory",initialValue:n.data}}),En.config({ignore:n.ignoreFocus,onFocus:g=>{cP(g)}}),Xt.config({mode:"special",focusIn:n.autofocus?g=>{l(g)}:eC(),onLeft:d,onRight:d,onEscape:(g,h)=>!En.isFocused(g)&&!n.autofocus?(En.focus(g),A.some(!0)):(n.autofocus&&h.setSource(g.element),A.none())})])}};var y_=[Ze("uid"),Ze("data"),Ze("components"),Ze("dom"),we("autofocus",!1),we("ignoreFocus",!1),$d.field("widgetBehaviours",[_t,En,Xt]),we("domModification",{}),pm(v_()),Ro("builder",fP)];const hP=xc("type",{widget:y_,item:p_,separator:mP}),pP=(n,s)=>({mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:n.focusManager}),bP=(n,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+n.markers.item},previousSelector:s.previousSelector,focusManager:n.focusManager}),kz=(n,s)=>({mode:"menu",selector:"."+n.markers.item,moveOnTab:s.moveOnTab,focusManager:n.focusManager}),C_=oe([M0({factory:{sketch:n=>{const s=Cc("menu.spec item",hP,n);return s.builder(s)}},name:"items",unit:"item",defaults:(n,s)=>mo(s,"uid")?s:{...s,uid:up("item")},overrides:(n,s)=>({type:s.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}})})]),Az=oe([Ys("role"),Ze("value"),Ze("items"),Ze("dom"),Ze("components"),we("eventOrder",{}),_a("menuBehaviours",[So,_t,Fe,Xt]),Ul("movement",{mode:"menu",moveOnTab:!0},xc("mode",{grid:[sw(),Ro("config",pP)],matrix:[Ro("config",bP),Ze("rowSelector"),we("previousSelector",A.none)],menu:[we("moveOnTab",!0),Ro("config",kz)]})),_2(),we("fakeFocus",!1),we("focusManager",aC()),yo("onHighlight"),yo("onDehighlight"),we("showMenuRole",!0)]),x_=oe("alloy.menu-focus"),vP=(n,s)=>{const a=Hr(n.element,'[role="menuitemradio"][aria-checked="true"]');He(a,l=>{I(l,s.element)||n.getSystem().getByDom(l).each(d=>{eo.off(d)})})},hb=(n,s,a,l)=>({uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ac(n.menuBehaviours,[So.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight,onDehighlight:n.onDehighlight}),_t.config({store:{mode:"memory",initialValue:n.value}}),Fe.config({find:A.some}),Xt.config(n.movement.config(n,n.movement))]),events:ks([Ie(xz(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{So.highlight(d,C),g.stop(),tn(d,x_(),{menu:d,item:C})})}),Ie(h_(),(d,g)=>{const h=g.event.item;So.highlight(d,h)}),Ie(iP(),(d,g)=>{const{item:h,state:C}=g.event;C&&Rr(h.element,"role")==="menuitemradio"&&vP(d,h)})]),components:s,eventOrder:n.eventOrder,...n.showMenuRole?{domModification:{attributes:{role:n.role.getOr("menu")}}}:{}}),qg=Cl({name:"Menu",configFields:Az(),partFields:C_(),factory:hb}),S_=n=>yu(n,(s,a)=>({k:s,v:a})),ux=(n,s,a,l)=>Vt(a,l).bind(d=>Vt(n,d).bind(g=>{const h=ux(n,s,a,g);return A.some([g].concat(h))})).getOr([]),_z=(n,s)=>{const a={};ms(n,(h,C)=>{He(h,x=>{a[x]=C})});const l=s,d=S_(s),g=$s(d,(h,C)=>[C].concat(ux(a,l,d,C)));return $s(a,h=>Vt(g,h).getOr([h]))},yP=()=>{const n=Pt({}),s=Pt({}),a=Pt({}),l=hn(),d=Pt({}),g=()=>{n.set({}),s.set({}),a.set({}),l.clear()},h=()=>l.get().isNone(),C=(Oe,ht)=>{s.set({...s.get(),[Oe]:{type:"prepared",menu:ht}})},x=(Oe,ht,Ue,Qe)=>{l.set(Oe),n.set(Ue),s.set(ht),d.set(Qe);const Ke=_z(Qe,Ue);a.set(Ke)},T=Oe=>lc(n.get(),(ht,Ue)=>ht===Oe),_=(Oe,ht,Ue)=>ne(Oe).bind(Qe=>T(Oe).bind(Ke=>ht(Ke).map(Qt=>({triggeredMenu:Qe,triggeringItem:Qt,triggeringPath:Ue})))),N=(Oe,ht)=>{const Ue=Ln(Y(Oe).toArray(),Qe=>ne(Qe).isSome());return Vt(a.get(),Oe).bind(Qe=>{const Ke=rt(Ue.concat(Qe)),Qt=xe(Ke,(zt,jn)=>_(zt,ht,Ke.slice(0,jn+1)).fold(()=>dc(l.get(),zt)?[]:[A.none()],Jt=>[A.some(Jt)]));return id(Qt)})},L=Oe=>Vt(n.get(),Oe).map(ht=>{const Ue=Vt(a.get(),Oe).getOr([]);return[ht].concat(Ue)}),j=Oe=>Vt(a.get(),Oe).bind(ht=>ht.length>1?A.some(ht.slice(1)):A.none()),Z=Oe=>Vt(a.get(),Oe),ne=Oe=>ae(Oe).bind(w_),ae=Oe=>Vt(s.get(),Oe),Y=Oe=>Vt(n.get(),Oe);return{setMenuBuilt:C,setContents:x,expand:L,refresh:Z,collapse:j,lookupMenu:ae,lookupItem:Y,otherMenus:Oe=>{const ht=d.get();return ze(xo(ht),Oe)},getPrimary:()=>l.get().bind(ne),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:N}},w_=n=>n.type==="prepared"?A.some(n.menu):A.none(),E_={init:yP,extractPreparedMenu:w_},lT=Ct("tiered-menu-item-highlight"),T_=Ct("tiered-menu-item-dehighlight"),Oz=(n,s)=>{const a=hn(),l=(Ve,ct,mn)=>$s(mn,(Pn,qt)=>{const Nn=()=>qg.sketch({...Pn,value:qt,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:(Qo,ko)=>{tn(Qo,lT,{menuComp:Qo,itemComp:ko})},onDehighlight:(Qo,ko)=>{tn(Qo,T_,{menuComp:Qo,itemComp:ko})},focusManager:n.fakeFocus?tv():aC()});return qt===ct?{type:"prepared",menu:Ve.getSystem().build(Nn())}:{type:"notbuilt",nbMenu:Nn}}),d=E_.init(),g=Ve=>{const ct=l(Ve,n.data.primary,n.data.menus),mn=x();return d.setContents(n.data.primary,ct,n.data.expansions,mn),d.getPrimary()},h=Ve=>_t.getValue(Ve).value,C=(Ve,ct,mn)=>ha(ct,Pn=>{if(!Pn.getSystem().isConnected())return A.none();const qt=So.getCandidates(Pn);return Lt(qt,Nn=>h(Nn)===mn)}),x=Ve=>$s(n.data.menus,(ct,mn)=>xe(ct.items,Pn=>Pn.type==="separator"?[]:[Pn.data.value])),T=So.highlight,_=(Ve,ct)=>{T(Ve,ct),So.getHighlighted(ct).orThunk(()=>So.getFirst(ct)).each(mn=>{n.fakeFocus?So.highlight(ct,mn):q0(Ve,mn.element,xg())})},N=(Ve,ct)=>_l(ye(ct,mn=>Ve.lookupMenu(mn).bind(Pn=>Pn.type==="prepared"?A.some(Pn.menu):A.none()))),L=(Ve,ct,mn)=>{const Pn=N(ct,ct.otherMenus(mn));He(Pn,qt=>{ua(qt.element,[n.markers.backgroundMenu]),n.stayInDom||An.remove(Ve,qt)})},j=Ve=>a.get().getOrThunk(()=>{const ct={},mn=Hr(Ve.element,`.${n.markers.item}`),Pn=Ln(mn,qt=>Rr(qt,"aria-haspopup")==="true");return He(Pn,qt=>{Ve.getSystem().getByDom(qt).each(Nn=>{const Qo=h(Nn);ct[Qo]=Nn})}),a.set(ct),ct}),Z=(Ve,ct)=>{const mn=j(Ve);ms(mn,(Pn,qt)=>{const Nn=bt(ct,qt);ln(Pn.element,"aria-expanded",Nn)})},ne=(Ve,ct,mn)=>A.from(mn[0]).bind(Pn=>ct.lookupMenu(Pn).bind(qt=>{if(qt.type==="notbuilt")return A.none();{const Nn=qt.menu,Qo=N(ct,mn.slice(1));return He(Qo,ko=>{jo(ko.element,n.markers.backgroundMenu)}),bo(Nn.element)||An.append(Ve,y(Nn)),ua(Nn.element,[n.markers.backgroundMenu]),_(Ve,Nn),L(Ve,ct,mn),A.some(Nn)}}));let ae;(function(Ve){Ve[Ve.HighlightSubmenu=0]="HighlightSubmenu",Ve[Ve.HighlightParent=1]="HighlightParent"})(ae||(ae={}));const Y=(Ve,ct,mn)=>{if(mn.type==="notbuilt"){const Pn=Ve.getSystem().build(mn.nbMenu());return d.setMenuBuilt(ct,Pn),Pn}else return mn.menu},le=(Ve,ct,mn=ae.HighlightSubmenu)=>{if(ct.hasConfigured(Ft)&&Ft.isDisabled(ct))return A.some(ct);{const Pn=h(ct);return d.expand(Pn).bind(qt=>(Z(Ve,qt),A.from(qt[0]).bind(Nn=>d.lookupMenu(Nn).bind(Qo=>{const ko=Y(Ve,Nn,Qo);return bo(ko.element)||An.append(Ve,y(ko)),n.onOpenSubmenu(Ve,ct,ko,rt(qt)),mn===ae.HighlightSubmenu?(So.highlightFirst(ko),ne(Ve,d,qt)):(So.dehighlightAll(ko),A.some(ct))}))))}},pe=(Ve,ct)=>{const mn=h(ct);return d.collapse(mn).bind(Pn=>(Z(Ve,Pn),ne(Ve,d,Pn).map(qt=>(n.onCollapseMenu(Ve,ct,qt),qt))))},Ee=(Ve,ct)=>{const mn=h(ct);return d.refresh(mn).bind(Pn=>(Z(Ve,Pn),ne(Ve,d,Pn)))},Oe=(Ve,ct)=>rp(ct.element)?A.none():le(Ve,ct,ae.HighlightSubmenu),ht=(Ve,ct)=>rp(ct.element)?A.none():pe(Ve,ct),Ue=(Ve,ct)=>pe(Ve,ct).orThunk(()=>n.onEscape(Ve,ct).map(()=>Ve)),Qe=Ve=>(ct,mn)=>Sa(mn.getSource(),`.${n.markers.item}`).bind(Pn=>ct.getSystem().getByDom(Pn).toOptional().bind(qt=>Ve(ct,qt).map(St))),Ke=ks([Ie(x_(),(Ve,ct)=>{const mn=ct.event.item;d.lookupItem(h(mn)).each(()=>{const Pn=ct.event.menu;So.highlight(Ve,Pn);const qt=h(ct.event.item);d.refresh(qt).each(Nn=>L(Ve,d,Nn))})}),Ef((Ve,ct)=>{const mn=ct.event.target;Ve.getSystem().getByDom(mn).each(Pn=>{h(Pn).indexOf("collapse-item")===0&&pe(Ve,Pn),le(Ve,Pn,ae.HighlightSubmenu).fold(()=>{n.onExecute(Ve,Pn)},U)})}),ps((Ve,ct)=>{g(Ve).each(mn=>{An.append(Ve,y(mn)),n.onOpenMenu(Ve,mn),n.highlightOnOpen===za.HighlightMenuAndItem?_(Ve,mn):n.highlightOnOpen===za.HighlightJustMenu&&T(Ve,mn)})}),Ie(lT,(Ve,ct)=>{n.onHighlightItem(Ve,ct.event.menuComp,ct.event.itemComp)}),Ie(T_,(Ve,ct)=>{n.onDehighlightItem(Ve,ct.event.menuComp,ct.event.itemComp)}),...n.navigateOnHover?[Ie(h_(),(Ve,ct)=>{const mn=ct.event.item;Ee(Ve,mn),le(Ve,mn,ae.HighlightParent),n.onHover(Ve,mn)})]:[]]),Qt=Ve=>So.getHighlighted(Ve).bind(So.getHighlighted),zt=Ve=>{Qt(Ve).each(ct=>{pe(Ve,ct)})},jn=Ve=>{d.getPrimary().each(ct=>{_(Ve,ct)})},Jt=Ve=>A.from(Ve.components()[0]).filter(ct=>Rr(ct.element,"role")==="menu"),Ut={collapseMenu:zt,highlightPrimary:jn,repositionMenus:Ve=>{d.getPrimary().bind(mn=>Qt(Ve).bind(Pn=>{const qt=h(Pn),Nn=Ya(d.getMenus()),Qo=_l(ye(Nn,E_.extractPreparedMenu));return d.getTriggeringPath(qt,ko=>C(Ve,Qo,ko))}).map(Pn=>({primary:mn,triggeringPath:Pn}))).fold(()=>{Jt(Ve).each(mn=>{n.onRepositionMenu(Ve,mn,[])})},({primary:mn,triggeringPath:Pn})=>{n.onRepositionMenu(Ve,mn,Pn)})}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:ac(n.tmenuBehaviours,[Xt.config({mode:"special",onRight:Qe(Oe),onLeft:Qe(ht),onEscape:Qe(Ue),focusIn:(Ve,ct)=>{d.getPrimary().each(mn=>{q0(Ve,mn.element,xg())})}}),So.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),Fe.config({find:Ve=>So.getHighlighted(Ve)}),An.config({})]),eventOrder:n.eventOrder,apis:Ut,events:Ke}},CP=oe("collapse-item"),xP=(n,s,a)=>({primary:n,menus:s,expansions:a}),SP=(n,s)=>({primary:n,menus:ff(n,s),expansions:{}}),wP=n=>({value:Ct(CP()),meta:{text:n}}),pb=cu({name:"TieredMenu",configFields:[E1("onExecute"),E1("onEscape"),hf("onOpenMenu"),hf("onOpenSubmenu"),yo("onRepositionMenu"),yo("onCollapseMenu"),we("highlightOnOpen",za.HighlightMenuAndItem),Sd("data",[Ze("primary"),Ze("menus"),Ze("expansions")]),we("fakeFocus",!1),yo("onHighlightItem"),yo("onDehighlightItem"),yo("onHover"),nw(),Ze("dom"),we("navigateOnHover",!0),we("stayInDom",!1),_a("tmenuBehaviours",[Xt,So,Fe,An]),we("eventOrder",{})],apis:{collapseMenu:(n,s)=>{n.collapseMenu(s)},highlightPrimary:(n,s)=>{n.highlightPrimary(s)},repositionMenus:(n,s)=>{n.repositionMenus(s)}},factory:Oz,extraApis:{tieredData:xP,singleData:SP,collapseItem:wP}}),iT=oe("sink"),Dz=oe(Tc({name:iT(),overrides:oe({dom:{tag:"div"},behaviours:nt([Dc.config({useFixed:St})]),events:ks([Pg(oa()),Pg(Gc()),Pg(Cg())])})})),Rz=fl([we("isExtraPart",an),Zc("fireEventInstead",[we("event",fm())])]),k_=n=>{const s=Cc("Dismissal",Rz,n);return{[_d()]:{schema:fl([Ze("target")]),onReceive:(a,l)=>{Co.isOpen(a)&&(Co.isPartOf(a,l.target)||s.isExtraPart(a,l.target)||s.fireEventInstead.fold(()=>Co.close(a),g=>Wn(a,g.event)))}}}},Nz=fl([Zc("fireEventInstead",[we("event",XS())]),gl("doReposition")]),uT=n=>{const s=Cc("Reposition",Nz,n);return{[Ar()]:{onReceive:a=>{Co.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),l=>Wn(a,l.event))}}}},EP=(n,s)=>{const a=n.getHotspot(s).getOr(s),l="hotspot",d=n.getAnchorOverrides();return n.layouts.fold(()=>({type:l,hotspot:a,overrides:d}),g=>({type:l,hotspot:a,overrides:d,layouts:g}))},dx=(n,s,a)=>{const l=n.fetch;return l(a).map(s)},TP=(n,s,a,l,d,g,h)=>{const C=dx(n,s,l),x=kP(l,n);return C.map(T=>T.bind(_=>{const N=_.menus[_.primary];return A.from(N).each(L=>{n.listRole.each(j=>{L.role=j})}),A.from(pb.sketch({...g.menu(),uid:up(""),data:_,highlightOnOpen:h,onOpenMenu:(L,j)=>{const Z=x().getOrDie();Dc.position(Z,j,{anchor:a}),Co.decloak(d)},onOpenSubmenu:(L,j,Z)=>{const ne=x().getOrDie();Dc.position(ne,Z,{anchor:{type:"submenu",item:j}}),Co.decloak(d)},onRepositionMenu:(L,j,Z)=>{const ne=x().getOrDie();Dc.position(ne,j,{anchor:a}),He(Z,ae=>{Dc.position(ne,ae.triggeredMenu,{anchor:{type:"submenu",item:ae.triggeringItem}})})},onEscape:()=>(En.focus(l),Co.close(d),A.some(!0))}))}))},dT=(n,s,a,l,d,g,h)=>{const C=EP(n,a);return TP(n,s,C,a,l,d,h).map(T=>(T.fold(()=>{Co.isOpen(l)&&Co.close(l)},_=>{Co.cloak(l),Co.open(l,_),g(l)}),l))},Mz=(n,s,a,l,d,g,h)=>(Co.close(l),Go.pure(l)),mT=(n,s,a,l,d,g)=>{const h=Rn.getCoupled(a,"sandbox");return(Co.isOpen(h)?Mz:dT)(n,s,a,h,l,d,g)},Pz=(n,s,a)=>{const l=Fe.getCurrent(s).getOr(s),d=ia(n.element);a?gn(l.element,"min-width",d+"px"):bd(l.element,d)},kP=(n,s)=>n.getSystem().getByUid(s.uid+"-"+iT()).map(a=>()=>Wt.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Wt.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(n))),AP=n=>{Co.getState(n).each(s=>{pb.repositionMenus(s)})},_P=(n,s,a)=>{const l=tP(),d=(C,x)=>{const T=EP(n,s);l.link(s.element),n.matchWidth&&Pz(T.hotspot,x,n.useMinWidth),n.onOpen(T,C,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,x)},g=(C,x)=>{l.unlink(s.element),h().getOr(x).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,x)},h=kP(s,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:l.id}},behaviours:$d.augment(n.sandboxBehaviours,[_t.config({store:{mode:"memory",initialValue:s}}),Co.config({onOpen:d,onClose:g,isPartOf:(C,x,T)=>bp(x,T)||bp(s,T),getAttachPoint:()=>h().getOrDie()}),Fe.config({find:C=>Co.getState(C).bind(x=>Fe.getCurrent(x))}),Rc.config({channels:{...k_({isExtraPart:an}),...uT({doReposition:AP})}})])}},Bz=n=>{const s=Rn.getCoupled(n,"sandbox");AP(s)},A_=()=>[we("sandboxClasses",[]),$d.field("sandboxBehaviours",[Fe,Rc,Co,_t])],$z=oe([Ze("dom"),Ze("fetch"),yo("onOpen"),pl("onExecute"),we("getHotspot",A.some),we("getAnchorOverrides",oe({})),gp(),_a("dropdownBehaviours",[eo,Rn,Xt,En]),Ze("toggleClass"),we("eventOrder",{}),Lo("lazySink"),we("matchWidth",!1),we("useMinWidth",!1),Lo("role"),Lo("listRole")].concat(A_())),Iz=oe([Si({schema:[nw(),we("fakeFocus",!1)],name:"menu",defaults:n=>({onExecute:n.onExecute})}),Dz()]),Fz=(n,s,a,l)=>{const d=_=>Vt(n.dom,"attributes").bind(N=>Vt(N,_)),g=_=>{Co.getState(_).each(N=>{pb.highlightPrimary(N)})},h=(_,N,L)=>mT(n,Yt,_,l,N,L),C=_=>{h(_,g,za.HighlightMenuAndItem).get(U)},x={expand:_=>{eo.isOn(_)||h(_,U,za.HighlightNone).get(U)},open:_=>{eo.isOn(_)||h(_,U,za.HighlightMenuAndItem).get(U)},refetch:_=>Rn.getExistingCoupled(_,"sandbox").fold(()=>h(_,U,za.HighlightMenuAndItem).map(U),L=>dT(n,Yt,_,L,l,U,za.HighlightMenuAndItem).map(U)),isOpen:eo.isOn,close:_=>{eo.isOn(_)&&h(_,U,za.HighlightMenuAndItem).get(U)},repositionMenus:_=>{eo.isOn(_)&&Bz(_)}},T=(_,N)=>(Xh(_),A.some(!0));return{uid:n.uid,dom:n.dom,components:s,behaviours:ac(n.dropdownBehaviours,[eo.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Rn.config({others:{sandbox:_=>_P(n,_,{onOpen:()=>eo.on(_),onClose:()=>eo.off(_)})}}),Xt.config({mode:"special",onSpace:T,onEnter:T,onDown:(_,N)=>{if(Yl.isOpen(_)){const L=Rn.getCoupled(_,"sandbox");g(L)}else Yl.open(_);return A.some(!0)},onEscape:(_,N)=>Yl.isOpen(_)?(Yl.close(_),A.some(!0)):A.none()}),En.config({})]),events:d_(A.some(C)),eventOrder:{...n.eventOrder,[Ea()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":n.listRole.getOr("true"),...n.role.fold(()=>({}),_=>({role:_})),...n.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Yl=Cl({name:"Dropdown",configFields:$z(),partFields:Iz(),factory:Fz,apis:{open:(n,s)=>n.open(s),refetch:(n,s)=>n.refetch(s),expand:(n,s)=>n.expand(s),close:(n,s)=>n.close(s),isOpen:(n,s)=>n.isOpen(s),repositionMenus:(n,s)=>n.repositionMenus(s)}}),OP="form",Lz=[_a("formBehaviours",[_t])],__=n=>"<alloy.field."+n+">",Hz=n=>{const s=(()=>{const g=[];return{field:(C,x)=>(g.push(C),M2(OP,__(C),x)),record:oe(g)}})(),a=n(s),l=s.record(),d=ye(l,g=>oc({name:g,pname:__(g)}));return yA(OP,Lz,d,RP,a)},DP=(n,s)=>n.fold(()=>Wt.error(s),Wt.value),RP=(n,s)=>({uid:n.uid,dom:n.dom,components:s,behaviours:ac(n.formBehaviours,[_t.config({store:{mode:"manual",getValue:a=>{const l=Iu(a,n);return $s(l,(d,g)=>d().bind(h=>{const C=Fe.getCurrent(h);return DP(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Bu(h.element)))}).map(_t.getValue))},setValue:(a,l)=>{ms(l,(d,g)=>{es(a,n,g).each(h=>{Fe.getCurrent(h).each(C=>{_t.setValue(C,d)})})})}}})]),apis:{getField:(a,l)=>es(a,n,l).bind(Fe.getCurrent)}}),vp={getField:J1((n,s,a)=>n.getField(s,a)),sketch:Hz},Uv=oe([Ze("dom"),we("shell",!0),_a("toolbarBehaviours",[An])]),Vz=oe([Tc({name:"groups",overrides:()=>({behaviours:nt([An.config({})])})})]),mx=(n,s,a,l)=>{const d=(C,x)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{An.set(T,x)})},g=C=>n.shell?A.some(C):es(C,n,"groups"),h=n.shell?{behaviours:[An.config({})],components:[]}:{behaviours:[],components:s};return{uid:n.uid,dom:n.dom,components:h.components,behaviours:ac(n.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:U},domModification:{attributes:{role:"group"}}}},Rm=Cl({name:"Toolbar",configFields:Uv(),partFields:Vz(),factory:mx,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)}}}),Uz=oe([lo(["toggledClass"]),Ze("lazySink"),gl("fetch"),Xi("getBounds"),Zc("fireDismissalEventInstead",[we("event",fm())]),gp(),yo("onToggled")]),jz=oe([Si({name:"button",overrides:n=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:nt([eo.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:n.onToggled})])})}),Si({factory:Rm,schema:Uv(),name:"toolbar",overrides:n=>({toolbarBehaviours:nt([Xt.config({mode:"cyclic",onEscape:s=>(es(s,n,"button").each(En.focus),A.none())})])})})]),jv=hn(),NP=(n,s)=>{jv.set(!0),O_(n,s),jv.clear()},O_=(n,s)=>{const a=Rn.getCoupled(n,"toolbarSandbox");Co.isOpen(a)?Co.close(a):Co.open(a,s.toolbar())},fx=(n,s,a,l)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(n).getOrDie();Dc.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:n,layouts:l,overrides:{maxWidthFunction:F1()}}},d)},MP=(n,s,a,l,d)=>{Rm.setGroups(s,d),fx(n,s,a,l),eo.on(n)},Wz=(n,s,a)=>{const l=tP(),d=(h,C)=>{const x=jv.get().getOr(!1);a.fetch().get(T=>{MP(n,C,a,s.layouts,T),l.link(n.element),x||Xt.focusIn(C)})},g=()=>{eo.off(n),jv.get().getOr(!1)||En.focus(n),l.unlink(n.element)};return{dom:{tag:"div",attributes:{id:l.id}},behaviours:nt([Xt.config({mode:"special",onEscape:h=>(Co.close(h),A.some(!0))}),Co.config({onOpen:d,onClose:g,isPartOf:(h,C,x)=>bp(C,x)||bp(n,x),getAttachPoint:()=>a.lazySink(n).getOrDie()}),Rc.config({channels:{...k_({isExtraPart:an,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...uT({doReposition:()=>{Co.getState(Rn.getCoupled(n,"toolbarSandbox")).each(h=>{fx(n,h,a,s.layouts)})}})}})])}},Kg=Cl({name:"FloatingToolbarButton",factory:(n,s,a,l)=>({...sa.sketch({...l.button(),action:d=>{O_(d,l)},buttonBehaviours:$d.augment({dump:l.button().buttonBehaviours},[Rn.config({others:{toolbarSandbox:d=>Wz(d,a,n)}})])}),apis:{setGroups:(d,g)=>{Co.getState(Rn.getCoupled(d,"toolbarSandbox")).each(h=>{MP(d,h,n,a.layouts,g)})},reposition:d=>{Co.getState(Rn.getCoupled(d,"toolbarSandbox")).each(g=>{fx(d,g,n,a.layouts)})},toggle:d=>{O_(d,l)},toggleWithoutFocusing:d=>{NP(d,l)},getToolbar:d=>Co.getState(Rn.getCoupled(d,"toolbarSandbox")),isOpen:d=>Co.isOpen(Rn.getCoupled(d,"toolbarSandbox"))}}),configFields:Uz(),partFields:jz(),apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggleWithoutFocusing(s)},getToolbar:(n,s)=>n.getToolbar(s),isOpen:(n,s)=>n.isOpen(s)}}),PP=oe([we("prefix","form-field"),_a("fieldBehaviours",[Fe,_t])]),Zz=oe([Tc({schema:[Ze("dom")],name:"label"}),Tc({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[Ze("text")],name:"aria-descriptor"}),oc({factory:{sketch:n=>{const s=y2(n,["factory"]);return n.factory.sketch(s)}},schema:[Ze("factory")],name:"field"})]),Gz=(n,s,a,l)=>{const d=ac(n.fieldBehaviours,[Fe.config({find:C=>es(C,n,"field")}),_t.config({store:{mode:"manual",getValue:C=>Fe.getCurrent(C).bind(_t.getValue),setValue:(C,x)=>{Fe.getCurrent(C).each(T=>{_t.setValue(T,x)})}}})]),g=ks([ps((C,x)=>{const T=hm(C,n,["label","field","aria-descriptor"]);T.field().each(_=>{const N=Ct(n.prefix);T.label().each(L=>{ln(L.element,"for",N),ln(_.element,"id",N)}),T["aria-descriptor"]().each(L=>{const j=Ct(n.prefix);ln(L.element,"id",j),ln(_.element,"aria-describedby",j)})})})]),h={getField:C=>es(C,n,"field"),getLabel:C=>es(C,n,"label")};return{uid:n.uid,dom:n.dom,components:s,behaviours:d,events:g,apis:h}},Yn=Cl({name:"FormField",configFields:PP(),partFields:Zz(),factory:Gz,apis:{getField:(n,s)=>n.getField(s),getLabel:(n,s)=>n.getLabel(s)}}),qz=oe([we("field1Name","field1"),we("field2Name","field2"),hf("onLockedChange"),lo(["lockClass"]),we("locked",!1),$d.field("coupledFieldBehaviours",[Fe,_t]),ls("onInput",U)]),Kz=(n,s,a)=>es(n,s,a).bind(Fe.getCurrent),BP=(n,s)=>oc({factory:Yn,name:n,overrides:a=>({fieldBehaviours:nt([xn("coupled-input-behaviour",[Ie(Mu(),l=>{Kz(l,a,s).each(d=>{es(l,a,"lock").each(g=>{eo.isOn(g)&&a.onLockedChange(l,d,g),a.onInput(l)})})})])])})}),Yz=oe([BP("field1","field2"),BP("field2","field1"),oc({factory:sa,schema:[Ze("dom")],name:"lock",overrides:n=>({buttonBehaviours:nt([eo.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])})})]),Xz=(n,s,a,l)=>({uid:n.uid,dom:n.dom,components:s,behaviours:$d.augment(n.coupledFieldBehaviours,[Fe.config({find:A.some}),_t.config({store:{mode:"manual",getValue:d=>{const g=$0(d,n,["field1","field2"]);return{[n.field1Name]:_t.getValue(g.field1()),[n.field2Name]:_t.getValue(g.field2())}},setValue:(d,g)=>{const h=$0(d,n,["field1","field2"]);Un(g,n.field1Name)&&_t.setValue(h.field1(),g[n.field1Name]),Un(g,n.field2Name)&&_t.setValue(h.field2(),g[n.field2Name])}}})]),apis:{getField1:d=>es(d,n,"field1"),getField2:d=>es(d,n,"field2"),getLock:d=>es(d,n,"lock")}}),yr=Cl({name:"FormCoupledInputs",configFields:qz(),partFields:Yz(),factory:Xz,apis:{getField1:(n,s)=>n.getField1(s),getField2:(n,s)=>n.getField2(s),getLock:(n,s)=>n.getLock(s)}}),Qz=(n,s)=>{const a=ye(n.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),l=n.data.map(d=>ff("initialValue",d)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:a,behaviours:ac(n.selectBehaviours,[En.config({}),_t.config({store:{mode:"manual",getValue:d=>vc(d.element),setValue:(d,g)=>{const h=Oo(n.options);Lt(n.options,x=>x.value===g).isSome()?gi(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(x=>gi(d.element,x.value))},...l}})])}},R_=cu({name:"HtmlSelect",configFields:[Ze("options"),_a("selectBehaviours",[En,_t]),we("selectClasses",[]),we("selectAttributes",{}),Lo("data")],factory:Qz}),$P=(n,s,a,l,d)=>{const g=()=>n.lazySink(s),h=l.type==="horizontal"?{layouts:{onLtr:()=>V2(),onRtl:()=>V0()}}:{},C=T=>T.length===2,x=T=>C(T)?h:{};return pb.sketch({dom:{tag:"div"},data:l.data,markers:l.menu.markers,highlightOnOpen:l.menu.highlightOnOpen,fakeFocus:l.menu.fakeFocus,onEscape:()=>(Co.close(s),n.onEscape.map(T=>T(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(T,_)=>{Dc.positionWithinBounds(g().getOrDie(),_,a,d())},onOpenSubmenu:(T,_,N,L)=>{const j=g().getOrDie();Dc.position(j,N,{anchor:{type:"submenu",item:_,...x(L)}})},onRepositionMenu:(T,_,N)=>{const L=g().getOrDie();Dc.positionWithinBounds(L,_,a,d()),He(N,j=>{const Z=x(j.triggeringPath);Dc.position(L,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem,...Z}})})}})},Jz=(n,s)=>{const a=(L,j)=>n.getRelated(L).exists(ne=>bp(ne,j)),l=(L,j)=>{Co.setContent(L,j)},d=(L,j,Z)=>{const ne=A.none;g(L,j,Z,ne)},g=(L,j,Z,ne)=>{const ae=n.lazySink(L).getOrDie();Co.openWhileCloaked(L,j,()=>Dc.positionWithinBounds(ae,L,Z,ne())),_t.setValue(L,A.some({mode:"position",config:Z,getBounds:ne}))},h=(L,j,Z)=>{C(L,j,Z,A.none)},C=(L,j,Z,ne)=>{const ae=$P(n,L,j,Z,ne);Co.open(L,ae),_t.setValue(L,A.some({mode:"menu",menu:ae}))},x=L=>{Co.isOpen(L)&&(_t.setValue(L,A.none()),Co.close(L))},T=L=>Co.getState(L),_=L=>{Co.isOpen(L)&&_t.getValue(L).each(j=>{switch(j.mode){case"menu":Co.getState(L).each(pb.repositionMenus);break;case"position":const Z=n.lazySink(L).getOrDie();Dc.positionWithinBounds(Z,L,j.config,j.getBounds());break}})},N={setContent:l,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:x,getContent:T,reposition:_,isOpen:Co.isOpen};return{uid:n.uid,dom:n.dom,behaviours:ac(n.inlineBehaviours,[Co.config({isPartOf:(L,j,Z)=>bp(j,Z)||a(L,Z),getAttachPoint:L=>n.lazySink(L).getOrDie(),onOpen:L=>{n.onShow(L)},onClose:L=>{n.onHide(L)}}),_t.config({store:{mode:"memory",initialValue:A.none()}}),Rc.config({channels:{...k_({isExtraPart:s.isExtraPart,...n.fireDismissalEventInstead.map(L=>({fireEventInstead:{event:L.event}})).getOr({})}),...uT({...n.fireRepositionEventInstead.map(L=>({fireEventInstead:{event:L.event}})).getOr({}),doReposition:_})}})]),eventOrder:n.eventOrder,apis:N}},js=cu({name:"InlineView",configFields:[Ze("lazySink"),yo("onShow"),yo("onHide"),Xi("onEscape"),_a("inlineBehaviours",[Co,_t,Rc]),Zc("fireDismissalEventInstead",[we("event",fm())]),Zc("fireRepositionEventInstead",[we("event",XS())]),we("getRelated",A.none),we("isExtraPart",an),we("eventOrder",A.none)],factory:Jz,apis:{showAt:(n,s,a,l)=>{n.showAt(s,a,l)},showWithinBounds:(n,s,a,l,d)=>{n.showWithinBounds(s,a,l,d)},showMenuAt:(n,s,a,l)=>{n.showMenuAt(s,a,l)},showMenuWithinBounds:(n,s,a,l,d)=>{n.showMenuWithinBounds(s,a,l,d)},hide:(n,s)=>{n.hide(s)},isOpen:(n,s)=>n.isOpen(s),getContent:(n,s)=>n.getContent(s),setContent:(n,s,a)=>{n.setContent(s,a)},reposition:(n,s)=>{n.reposition(s)}}}),N_=oe([Us("type","text"),Lo("data"),we("inputAttributes",{}),we("inputStyles",{}),we("tag","input"),we("inputClasses",[]),yo("onSetValue"),ls("fromInputValue",Yt),ls("toInputValue",Yt),we("styles",{}),we("eventOrder",{}),_a("inputBehaviours",[_t,En]),we("selectOnFocus",!0)]),IP=n=>nt([En.config({onFocus:n.selectOnFocus?s=>{const a=s.element,l=vc(a);n.type!=="range"&&a.dom.setSelectionRange(0,l.length)}:U})]),e9=n=>({...IP(n),...ac(n.inputBehaviours,[_t.config({store:{mode:"manual",...n.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>n.fromInputValue(vc(s.element)),setValue:(s,a)=>{vc(s.element)!==a&&gi(s.element,n.toInputValue(a))}},onSetValue:n.onSetValue})])}),M_=n=>({tag:n.tag,attributes:{type:n.type,...n.inputAttributes},styles:n.inputStyles,classes:n.inputClasses}),FP=(n,s)=>({uid:n.uid,dom:M_(n),components:[],behaviours:e9(n),eventOrder:n.eventOrder}),Ff=cu({name:"Input",configFields:N_(),factory:FP}),P_=bf(b_(),v_()),t9=(n,s)=>{const a=Jr(n,"id").fold(()=>{const l=Ct("dialog-label");return ln(s,"id",l),l},Yt);ln(n,"aria-labelledby",a)},n9=oe([Ze("lazySink"),Lo("dragBlockClass"),ls("getBounds",Fa),we("useTabstopAt",St),we("firstTabstop",0),we("eventOrder",{}),_a("modalBehaviours",[Xt]),pl("onExecute"),E1("onEscape")]),fT={sketch:Yt},B_=oe([Tc({name:"draghandle",overrides:(n,s)=>({behaviours:nt([Wg.config({mode:"mouse",getTarget:a=>Ll(a,'[role="dialog"]').getOr(a),blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:n.getDragBounds})])})}),oc({schema:[Ze("dom")],name:"title"}),oc({factory:fT,schema:[Ze("dom")],name:"close"}),oc({factory:fT,schema:[Ze("dom")],name:"body"}),Tc({factory:fT,schema:[Ze("dom")],name:"footer"}),Si({factory:{sketch:(n,s)=>({...n,dom:s.dom,components:s.components})},schema:[we("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),we("components",[])],name:"blocker"})]),o9=(n,s,a,l)=>{const d=hn(),g=Z=>{d.set(Z);const ne=n.lazySink(Z).getOrDie(),ae=l.blocker(),Y=ne.getSystem().build({...ae,components:ae.components.concat([y(Z)]),behaviours:nt([En.config({}),xn("dialog-blocker-events",[ep(Qi(),()=>{Ge.isBlocked(Z)?U():Xt.focusIn(Z)})])])});xm(ne,Y),Xt.focusIn(Z)},h=Z=>{d.clear(),hc(Z.element).each(ne=>{Z.getSystem().getByDom(ne).each(ae=>{wm(ae)})})},C=Z=>$u(Z,n,"body"),x=Z=>es(Z,n,"footer"),T=(Z,ne)=>{Ge.block(Z,ne)},_=Z=>{Ge.unblock(Z)},N=Ct("modal-events"),L={...n.eventOrder,[Pu()]:[N].concat(n.eventOrder["alloy.system.attached"]||[])},j=Gs();return{uid:n.uid,dom:n.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:x,setIdle:_,setBusy:T},eventOrder:L,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ac(n.modalBehaviours,[An.config({}),Xt.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt,firstTabstop:n.firstTabstop}),Ge.config({getRoot:d.get}),xn(N,[ps(Z=>{const ne=$u(Z,n,"title").element,ae=t2(ne);j.os.isMacOS()&&un(ae)?ln(Z.element,"aria-label",ae):t9(Z.element,ne)})])])}},ra=Cl({name:"ModalDialog",configFields:n9(),partFields:B_(),factory:o9,apis:{show:(n,s)=>{n.show(s)},hide:(n,s)=>{n.hide(s)},getBody:(n,s)=>n.getBody(s),getFooter:(n,s)=>n.getFooter(s),setBusy:(n,s,a)=>{n.setBusy(s,a)},setIdle:(n,s)=>{n.setIdle(s)}}}),s9=Tc({schema:[Ze("dom")],name:"label"}),yp=n=>Tc({name:""+n+"-edge",overrides:s=>s.model.manager.edgeActions[n].fold(()=>({}),l=>({events:ks([Qh(hl(),(d,g,h)=>l(d,h),[s]),Qh(Gc(),(d,g,h)=>l(d,h),[s]),Qh($h(),(d,g,h)=>{h.mouseIsDown.get()&&l(d,h)},[s])])}))}),r9=yp("top-left"),a9=yp("top"),LP=yp("top-right"),HP=yp("right"),c9=yp("bottom-right"),l9=yp("bottom"),i9=yp("bottom-left"),Ti=yp("left"),Ld=oc({name:"thumb",defaults:oe({dom:{styles:{position:"absolute"}}}),overrides:n=>({events:ks([Ad(hl(),n,"spectrum"),Ad(ur(),n,"spectrum"),Ad(gf(),n,"spectrum"),Ad(Gc(),n,"spectrum"),Ad($h(),n,"spectrum"),Ad(p0(),n,"spectrum")])})}),gx=n=>Tf(n.event),$_=oc({schema:[Sc("mouseIsDown",()=>Pt(!1))],name:"spectrum",overrides:n=>{const a=n.model.manager,l=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,n,h));return{behaviours:nt([Xt.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,n,gx(g)),onRight:(d,g)=>a.onRight(d,n,gx(g)),onUp:(d,g)=>a.onUp(d,n,gx(g)),onDown:(d,g)=>a.onDown(d,n,gx(g))}),us.config({}),En.config({})]),events:ks([Ie(hl(),l),Ie(ur(),l),Ie(Gc(),l),Ie($h(),(d,g)=>{n.mouseIsDown.get()&&l(d,g)})])}}});var I_=[s9,Ti,HP,a9,l9,r9,LP,i9,c9,Ld,$_];const hx=oe("slider.change.value"),zP=n=>n.type.indexOf("touch")!==-1,bb=n=>{const s=n.event.raw;if(zP(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?A.some(a.touches[0]).map(l=>Po(l.clientX,l.clientY)):A.none()}else{const a=s;return a.clientX!==void 0?A.some(a).map(l=>Po(l.clientX,l.clientY)):A.none()}},u9="top",gT="right",L_="bottom",VP="left",Nm=n=>n.model.minX,vb=n=>n.model.minY,hT=n=>n.model.minX-1,uu=n=>n.model.minY-1,ja=n=>n.model.maxX,Mm=n=>n.model.maxY,Xc=n=>n.model.maxX+1,pT=n=>n.model.maxY+1,ds=(n,s,a)=>s(n)-a(n),H_=n=>ds(n,ja,Nm),Pm=n=>ds(n,Mm,vb),Wv=n=>H_(n)/2,z_=n=>Pm(n)/2,Cp=(n,s)=>s?n.stepSize*n.speedMultiplier:n.stepSize,bT=n=>n.snapToGrid,UP=n=>n.snapStart,vT=n=>n.rounded,yT=(n,s)=>n[s+"-edge"]!==void 0,V_=n=>yT(n,VP),U_=n=>yT(n,gT),CT=n=>yT(n,u9),j_=n=>yT(n,L_),Hd=n=>n.model.value.get(),xp=(n,s)=>({x:n,y:s}),zd=(n,s)=>{tn(n,hx(),{value:s})},d9=(n,s)=>{zd(n,xp(hT(s),uu(s)))},m9=(n,s)=>{zd(n,uu(s))},f9=(n,s)=>{zd(n,xp(Wv(s),uu(s)))},jP=(n,s)=>{zd(n,xp(Xc(s),uu(s)))},g9=(n,s)=>{zd(n,Xc(s))},h9=(n,s)=>{zd(n,xp(Xc(s),z_(s)))},WP=(n,s)=>{zd(n,xp(Xc(s),pT(s)))},p9=(n,s)=>{zd(n,pT(s))},ZP=(n,s)=>{zd(n,xp(Wv(s),pT(s)))},px=(n,s)=>{zd(n,xp(hT(s),pT(s)))},b9=(n,s)=>{zd(n,hT(s))},v9=(n,s)=>{zd(n,xp(hT(s),z_(s)))},xT=(n,s,a,l)=>n<s?n:n>a?a:n===s?s-1:Math.max(s,n-l),ST=(n,s,a,l)=>n>a?n:n<s?s:n===a?a+1:Math.min(a,n+l),wT=(n,s,a)=>Math.max(s,Math.min(a,n)),GP=(n,s,a,l,d)=>d.fold(()=>{const g=n-s,h=Math.round(g/l)*l;return wT(s+h,s-1,a+1)},g=>{const h=(n-g)%l,C=Math.round(h/l),x=Math.floor((n-g)/l),T=Math.floor((a-g)/l),_=Math.min(T,x+C),N=g+_*l;return Math.max(g,N)}),y9=(n,s,a)=>Math.min(a,Math.max(n,s))-s,qP=n=>{const{min:s,max:a,range:l,value:d,step:g,snap:h,snapStart:C,rounded:x,hasMinEdge:T,hasMaxEdge:_,minBound:N,maxBound:L,screenRange:j}=n,Z=T?s-1:s,ne=_?a+1:a;if(d<N)return Z;if(d>L)return ne;{const ae=y9(d,N,L),Y=wT(ae/j*l+s,Z,ne);return h&&Y>=s&&Y<=a?GP(Y,s,a,g,C):x?Math.round(Y):Y}},KP=n=>{const{min:s,max:a,range:l,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:x,centerMinEdge:T,centerMaxEdge:_}=n;return d<s?g?0:T:d>a?h?C:_:(d-s)/l*x},W_="top",YP="right",XP="bottom",ET="left",Vd="width",C9="height",Ud=n=>n.element.dom.getBoundingClientRect(),Ku=(n,s)=>n[s],bx=n=>{const s=Ud(n);return Ku(s,ET)},QP=n=>{const s=Ud(n);return Ku(s,YP)},vx=n=>{const s=Ud(n);return Ku(s,W_)},Z_=n=>{const s=Ud(n);return Ku(s,XP)},G_=n=>{const s=Ud(n);return Ku(s,Vd)},JP=n=>{const s=Ud(n);return Ku(s,C9)},eB=(n,s,a)=>(n+s)/2-a,tB=(n,s)=>{const a=Ud(n),l=Ud(s),d=Ku(a,ET),g=Ku(a,YP),h=Ku(l,ET);return eB(d,g,h)},nB=(n,s)=>{const a=Ud(n),l=Ud(s),d=Ku(a,W_),g=Ku(a,XP),h=Ku(l,W_);return eB(d,g,h)},TT=(n,s)=>{tn(n,hx(),{value:s})},q_=(n,s,a)=>{const l={min:Nm(s),max:ja(s),range:H_(s),value:a,step:Cp(s),snap:bT(s),snapStart:UP(s),rounded:vT(s),hasMinEdge:V_(s),hasMaxEdge:U_(s),minBound:bx(n),maxBound:QP(n),screenRange:G_(n)};return qP(l)},x9=(n,s,a)=>{const l=q_(n,s,a);return TT(n,l),l},oB=(n,s)=>{const a=Nm(s);TT(n,a)},sB=(n,s)=>{const a=ja(s);TT(n,a)},rB=(n,s,a,l)=>{const g=(n>0?ST:xT)(Hd(a),Nm(a),ja(a),Cp(a,l));return TT(s,g),A.some(g)},K_=n=>(s,a,l)=>rB(n,s,a,l).map(St),S9=n=>bb(n).map(a=>a.left),w9=(n,s,a,l,d)=>{const h=G_(n),C=l.bind(_=>A.some(tB(_,n))).getOr(0),x=d.bind(_=>A.some(tB(_,n))).getOr(h),T={min:Nm(s),max:ja(s),range:H_(s),value:a,hasMinEdge:V_(s),hasMaxEdge:U_(s),minBound:bx(n),maxBound:QP(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:x};return KP(T)},Y_=(n,s,a,l,d,g)=>{const h=w9(s,g,a,l,d);return bx(s)-bx(n)+h},aB=(n,s,a,l)=>{const d=Hd(a),g=Y_(n,l.getSpectrum(n),d,l.getLeftEdge(n),l.getRightEdge(n),a),h=ia(s.element)/2;gn(s.element,"left",g-h+"px")},Zv=K_(-1),kT=K_(1),E9=A.none,cB=A.none,lB={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(g9),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(b9)};var iB=Object.freeze({__proto__:null,setValueFrom:x9,setToMin:oB,setToMax:sB,findValueOfOffset:q_,getValueFromEvent:S9,findPositionOfValue:Y_,setPositionFromValue:aB,onLeft:Zv,onRight:kT,onUp:E9,onDown:cB,edgeActions:lB});const yx=(n,s)=>{tn(n,hx(),{value:s})},Cx=(n,s,a)=>{const l={min:vb(s),max:Mm(s),range:Pm(s),value:a,step:Cp(s),snap:bT(s),snapStart:UP(s),rounded:vT(s),hasMinEdge:CT(s),hasMaxEdge:j_(s),minBound:vx(n),maxBound:Z_(n),screenRange:JP(n)};return qP(l)},X_=(n,s,a)=>{const l=Cx(n,s,a);return yx(n,l),l},T9=(n,s)=>{const a=vb(s);yx(n,a)},k9=(n,s)=>{const a=Mm(s);yx(n,a)},A9=(n,s,a,l)=>{const g=(n>0?ST:xT)(Hd(a),vb(a),Mm(a),Cp(a,l));return yx(s,g),A.some(g)},Q_=n=>(s,a,l)=>A9(n,s,a,l).map(St),uB=n=>bb(n).map(a=>a.top),_9=(n,s,a,l,d)=>{const h=JP(n),C=l.bind(_=>A.some(nB(_,n))).getOr(0),x=d.bind(_=>A.some(nB(_,n))).getOr(h),T={min:vb(s),max:Mm(s),range:Pm(s),value:a,hasMinEdge:CT(s),hasMaxEdge:j_(s),minBound:vx(n),maxBound:Z_(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:x};return KP(T)},J_=(n,s,a,l,d,g)=>{const h=_9(s,g,a,l,d);return vx(s)-vx(n)+h},dB=(n,s,a,l)=>{const d=Hd(a),g=J_(n,l.getSpectrum(n),d,l.getTopEdge(n),l.getBottomEdge(n),a),h=pr(s.element)/2;gn(s.element,"top",g-h+"px")},O9=A.none,D9=A.none,R9=Q_(-1),N9=Q_(1),M9={"top-left":A.none(),top:A.some(m9),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(p9),"bottom-left":A.none(),left:A.none()};var P9=Object.freeze({__proto__:null,setValueFrom:X_,setToMin:T9,setToMax:k9,findValueOfOffset:Cx,getValueFromEvent:uB,findPositionOfValue:J_,setPositionFromValue:dB,onLeft:O9,onRight:D9,onUp:R9,onDown:N9,edgeActions:M9});const AT=(n,s)=>{tn(n,hx(),{value:s})},xx=(n,s)=>({x:n,y:s}),mB=(n,s,a)=>{const l=q_(n,s,a.left),d=Cx(n,s,a.top),g=xx(l,d);return AT(n,g),g},B9=(n,s,a,l,d)=>{const g=n>0?ST:xT,h=s?Hd(l).x:g(Hd(l).x,Nm(l),ja(l),Cp(l,d)),C=s?g(Hd(l).y,vb(l),Mm(l),Cp(l,d)):Hd(l).y;return AT(a,xx(h,C)),A.some(h)},_T=(n,s)=>(a,l,d)=>B9(n,s,a,l,d).map(St),$9=(n,s)=>{const a=Nm(s),l=vb(s);AT(n,xx(a,l))},fB=(n,s)=>{const a=ja(s),l=Mm(s);AT(n,xx(a,l))},I9=n=>bb(n),F9=(n,s,a,l)=>{const d=Hd(a),g=Y_(n,l.getSpectrum(n),d.x,l.getLeftEdge(n),l.getRightEdge(n),a),h=J_(n,l.getSpectrum(n),d.y,l.getTopEdge(n),l.getBottomEdge(n),a),C=ia(s.element)/2,x=pr(s.element)/2;gn(s.element,"left",g-C+"px"),gn(s.element,"top",h-x+"px")},L9=_T(-1,!1),OT=_T(1,!1),H9=_T(-1,!0),z9=_T(1,!0),V9={"top-left":A.some(d9),top:A.some(f9),"top-right":A.some(jP),right:A.some(h9),"bottom-right":A.some(WP),bottom:A.some(ZP),"bottom-left":A.some(px),left:A.some(v9)};var U9=Object.freeze({__proto__:null,setValueFrom:mB,setToMin:$9,setToMax:fB,getValueFromEvent:I9,setPositionFromValue:F9,onLeft:L9,onRight:OT,onUp:H9,onDown:z9,edgeActions:V9});const j9=[we("stepSize",1),we("speedMultiplier",10),we("onChange",U),we("onChoose",U),we("onInit",U),we("onDragStart",U),we("onDragEnd",U),we("snapToGrid",!1),we("rounded",!0),Lo("snapStart"),jc("model",xc("mode",{x:[we("minX",0),we("maxX",100),Sc("value",n=>Pt(n.mode.minX)),Ze("getInitialValue"),Ro("manager",iB)],y:[we("minY",0),we("maxY",100),Sc("value",n=>Pt(n.mode.minY)),Ze("getInitialValue"),Ro("manager",P9)],xy:[we("minX",0),we("maxX",100),we("minY",0),we("maxY",100),Sc("value",n=>Pt({x:n.mode.minX,y:n.mode.minY})),Ze("getInitialValue"),Ro("manager",U9)]})),_a("sliderBehaviours",[Xt,_t]),Sc("mouseIsDown",()=>Pt(!1))],jd=Cl({name:"Slider",configFields:j9,partFields:I_,factory:(n,s,a,l)=>{const d=Oe=>$u(Oe,n,"thumb"),g=Oe=>$u(Oe,n,"spectrum"),h=Oe=>es(Oe,n,"left-edge"),C=Oe=>es(Oe,n,"right-edge"),x=Oe=>es(Oe,n,"top-edge"),T=Oe=>es(Oe,n,"bottom-edge"),_=n.model,N=_.manager,L=(Oe,ht)=>{N.setPositionFromValue(Oe,ht,n,{getLeftEdge:h,getRightEdge:C,getTopEdge:x,getBottomEdge:T,getSpectrum:g})},j=(Oe,ht)=>{_.value.set(ht);const Ue=d(Oe);L(Oe,Ue)},Z=(Oe,ht)=>{j(Oe,ht);const Ue=d(Oe);return n.onChange(Oe,Ue,ht),A.some(!0)},ne=Oe=>{N.setToMin(Oe,n)},ae=Oe=>{N.setToMax(Oe,n)},Y=Oe=>{const ht=()=>{es(Oe,n,"thumb").each(Qe=>{const Ke=_.value.get();n.onChoose(Oe,Qe,Ke)})},Ue=n.mouseIsDown.get();n.mouseIsDown.set(!1),Ue&&ht()},le=(Oe,ht)=>{ht.stop(),n.mouseIsDown.set(!0),n.onDragStart(Oe,d(Oe))},pe=(Oe,ht)=>{ht.stop(),n.onDragEnd(Oe,d(Oe)),Y(Oe)},Ee=Oe=>{es(Oe,n,"spectrum").map(Xt.focusIn)};return{uid:n.uid,dom:n.dom,components:s,behaviours:ac(n.sliderBehaviours,[Xt.config({mode:"special",focusIn:Ee}),_t.config({store:{mode:"manual",getValue:Oe=>_.value.get(),setValue:j}}),Rc.config({channels:{[ym()]:{onReceive:Y}}})]),events:ks([Ie(hx(),(Oe,ht)=>{Z(Oe,ht.event.value)}),ps((Oe,ht)=>{const Ue=_.getInitialValue();_.value.set(Ue);const Qe=d(Oe);L(Oe,Qe);const Ke=g(Oe);n.onInit(Oe,Qe,Ke,_.value.get())}),Ie(hl(),le),Ie(gf(),pe),Ie(Gc(),(Oe,ht)=>{Ee(Oe),le(Oe,ht)}),Ie(p0(),pe)]),apis:{resetToMin:ne,resetToMax:ae,setValue:j,refresh:L},domModification:{styles:{position:"relative"}}}},apis:{setValue:(n,s,a)=>{n.setValue(s,a)},resetToMin:(n,s)=>{n.resetToMin(s)},resetToMax:(n,s)=>{n.resetToMax(s)},refresh:(n,s)=>{n.refresh(s)}}}),gB="container",W9=[_a("slotBehaviours",[])],hB=n=>"<alloy.field."+n+">",Z9=n=>{const s=(()=>{const g=[];return{slot:(C,x)=>(g.push(C),M2(gB,hB(C),x)),record:oe(g)}})(),a=n(s),l=s.record(),d=ye(l,g=>oc({name:g,pname:hB(g)}));return yA(gB,W9,d,G9,a)},G9=(n,s)=>{const a=ne=>Wl(n),l=(ne,ae)=>es(ne,n,ae),d=(ne,ae)=>(Y,le)=>es(Y,n,le).map(pe=>ne(pe,le)).getOr(ae),g=ne=>(ae,Y)=>{He(Y,le=>ne(ae,le))},h=(ne,ae)=>Rr(ne.element,"aria-hidden")!=="true",C=(ne,ae)=>{if(!h(ne)){const Y=ne.element;Kn(Y,"display"),gs(Y,"aria-hidden"),tn(ne,E2(),{name:ae,visible:!0})}},x=(ne,ae)=>{if(h(ne)){const Y=ne.element;gn(Y,"display","none"),ln(Y,"aria-hidden","true"),tn(ne,E2(),{name:ae,visible:!1})}},T=d(h,!1),_=d(x),N=g(_),L=ne=>N(ne,a()),j=d(C),Z={getSlotNames:a,getSlot:l,isShowing:T,hideSlot:_,hideAllSlots:L,showSlot:j};return{uid:n.uid,dom:n.dom,components:s,behaviours:XC(n.slotBehaviours),apis:Z}},Wa={...$s({getSlotNames:(n,s)=>n.getSlotNames(s),getSlot:(n,s,a)=>n.getSlot(s,a),isShowing:(n,s,a)=>n.isShowing(s,a),hideSlot:(n,s,a)=>n.hideSlot(s,a),hideAllSlots:(n,s)=>n.hideAllSlots(s),showSlot:(n,s,a)=>n.showSlot(s,a)},n=>J1(n)),sketch:Z9},q9=(n,s)=>ao(n,(d,g)=>s(g,d.len).fold(oe(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,eO=(n,s,a)=>({within:n,extra:s,withinWidth:a}),pB=(n,s,a)=>{const l=q9(n,(C,x)=>{const T=a(C);return A.some({element:C,start:x,finish:x+T,width:T})}),d=Ln(l,C=>C.finish<=s),g=oo(d,(C,x)=>C+x.width,0),h=l.slice(d.length);return{within:d,extra:h,withinWidth:g}},Sx=n=>ye(n,s=>s.element),K9=(n,s,a)=>{const l=Sx(n.concat(s));return eO(l,[],a)},Y9=(n,s,a,l)=>{const d=Sx(n).concat([a]);return eO(d,Sx(s),l)},X9=(n,s,a)=>eO(Sx(n),[],a),Q9=(n,s,a)=>{const l=pB(s,n,a);return l.extra.length===0?A.some(l):A.none()},J9=(n,s,a,l)=>{const d=Q9(n,s,a).getOrThunk(()=>pB(s,n-a(l),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(l)?K9(g,h,C):h.length>=1?Y9(g,h,l,C):X9(g,h,C)},bB=(n,s)=>{const a=ye(s,l=>y(l));Rm.setGroups(n,a)},tO=n=>ha(n,s=>sr(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),vB=(n,s,a)=>{const l=s.builtGroups.get();if(l.length===0)return;const d=$u(n,s,"primary"),g=Rn.getCoupled(n,"overflowGroup");gn(d.element,"visibility","hidden");const h=l.concat([g]),C=tO(h);a([]),bB(d,h);const x=ia(d.element),T=J9(x,s.builtGroups.get(),_=>Math.ceil(_.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(An.remove(d,g),a([])):(bB(d,T.within),a(T.extra)),Kn(d.element,"visibility"),Fl(d.element),C.each(En.focus)},yB=oe([_a("splitToolbarBehaviours",[Rn]),Sc("builtGroups",()=>Pt([]))]),eV=oe([lo(["overflowToggledClass"]),Xi("getOverflowBounds"),Ze("lazySink"),Sc("overflowGroups",()=>Pt([])),yo("onOpened"),yo("onClosed")].concat(yB())),tV=oe([oc({factory:Rm,schema:Uv(),name:"primary"}),Si({schema:Uv(),name:"overflow"}),Si({name:"overflow-button"}),Si({name:"overflow-group"})]),nV=oe([Ze("items"),lo(["itemSelector"]),_a("tgroupBehaviours",[Xt])]),oV=oe([M0({name:"items",unit:"item"})]),sV=(n,s,a,l)=>({uid:n.uid,dom:n.dom,components:s,behaviours:ac(n.tgroupBehaviours,[Xt.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),DT=Cl({name:"ToolbarGroup",configFields:nV(),partFields:oV(),factory:sV}),CB=n=>ye(n,s=>y(s)),xB=(n,s,a)=>{vB(n,a,l=>{a.overflowGroups.set(l),s.getOpt(n).each(d=>{Kg.setGroups(d,CB(l))})})},rV=(n,s,a,l)=>{const d=To(Kg.sketch({fetch:()=>Go.nu(g=>{g(CB(n.overflowGroups.get()))}),layouts:{onLtr:()=>[Tr,Pr],onRtl:()=>[Pr,Tr],onBottomLtr:()=>[da,ka],onBottomRtl:()=>[ka,da]},getBounds:a.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:l["overflow-button"](),toolbar:l.overflow()},onToggled:(g,h)=>n[h?"onOpened":"onClosed"](g)}));return{uid:n.uid,dom:n.dom,components:s,behaviours:ac(n.splitToolbarBehaviours,[Rn.config({others:{overflowGroup:()=>DT.sketch({...l["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{n.builtGroups.set(ye(h,g.getSystem().build)),xB(g,d,n)},refresh:g=>xB(g,d,n),toggle:g=>{d.getOpt(g).each(h=>{Kg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Kg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Kg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Kg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Kg.getToolbar)},domModification:{attributes:{role:"group"}}}},SB=Cl({name:"SplitFloatingToolbar",configFields:eV(),partFields:tV(),factory:rV,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s),getOverflow:(n,s)=>n.getOverflow(s)}}),aV=oe([lo(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),yo("onOpened"),yo("onClosed")].concat(yB())),cV=oe([oc({factory:Rm,schema:Uv(),name:"primary"}),oc({factory:Rm,schema:Uv(),name:"overflow",overrides:n=>({toolbarBehaviours:nt([Yc.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:s=>{es(s,n,"overflow-button").each(a=>{eo.off(a)}),n.onClosed(s)},onGrown:s=>{n.onOpened(s)},onStartGrow:s=>{es(s,n,"overflow-button").each(eo.on)}}),Xt.config({mode:"acyclic",onEscape:s=>(es(s,n,"overflow-button").each(En.focus),A.some(!0))})])})}),Si({name:"overflow-button",overrides:n=>({buttonBehaviours:nt([eo.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Si({name:"overflow-group"})]),lV=(n,s)=>es(n,s,"overflow").map(Yc.hasGrown).getOr(!1),wx=(n,s,a)=>{es(n,s,"overflow-button").each(l=>{es(n,s,"overflow").each(d=>{if(nO(n,s),Yc.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||Xt.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||En.focus(l),g(h),s.onClosed=g}}Yc.toggleGrow(d)})})},nO=(n,s)=>{es(n,s,"overflow").each(a=>{vB(n,s,l=>{const d=ye(l,g=>y(g));Rm.setGroups(a,d)}),es(n,s,"overflow-button").each(l=>{Yc.hasGrown(a)&&eo.on(l)}),Yc.refresh(a)})},iV=(n,s,a,l)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const x=ye(C,h.getSystem().build);n.builtGroups.set(x)};return{uid:n.uid,dom:n.dom,components:s,behaviours:ac(n.splitToolbarBehaviours,[Rn.config({others:{overflowGroup:h=>DT.sketch({...l["overflow-group"](),items:[sa.sketch({...l["overflow-button"](),action:C=>{Wn(h,d)}})]})}}),xn("toolbar-toggle-events",[Ie(d,h=>{wx(h,n,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),nO(h,n)},refresh:h=>nO(h,n),toggle:h=>{wx(h,n,!1)},toggleWithoutFocusing:h=>{wx(h,n,!0)},isOpen:h=>lV(h,n)},domModification:{attributes:{role:"group"}}}},oO=Cl({name:"SplitSlidingToolbar",configFields:aV(),partFields:cV(),factory:iV,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},toggle:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s)}}),Ex=(n,s)=>({uid:n.uid,dom:n.dom,components:n.components,events:d_(n.action),behaviours:ac(n.tabButtonBehaviours,[En.config({}),Xt.config({mode:"execution",useSpace:!0,useEnter:!0}),_t.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}),wB=cu({name:"TabButton",configFields:[we("uid",void 0),Ze("value"),na("dom","dom",im(()=>({attributes:{role:"tab",id:Ct("aria"),"aria-selected":"false"}})),bi()),Lo("action"),we("domModification",{}),_a("tabButtonBehaviours",[En,Xt,_t]),Ze("view")],factory:Ex}),uV=oe([Ze("tabs"),Ze("dom"),we("clickToDismiss",!1),_a("tabbarBehaviours",[So,Xt]),lo(["tabClass","selectedClass"])]),dV=M0({factory:wB,name:"tabs",unit:"tab",overrides:n=>{const s=(l,d)=>{So.dehighlight(l,d),tn(l,w0(),{tabbar:l,button:d})},a=(l,d)=>{So.highlight(l,d),tn(l,T2(),{tabbar:l,button:d})};return{action:l=>{const d=l.getSystem().getByUid(n.uid).getOrDie(),g=So.isHighlighted(d,l);(g&&n.clickToDismiss?s:g?U:a)(d,l)},domModification:{classes:[n.markers.tabClass]}}}}),EB=oe([dV]),mV=(n,s,a,l)=>({uid:n.uid,dom:n.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ac(n.tabbarBehaviours,[So.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:(d,g)=>{ln(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{ln(g.element,"aria-selected","false")}}),Xt.config({mode:"flow",getInitial:d=>So.getHighlighted(d).map(g=>g.element),selector:"."+n.markers.tabClass,executeOnMove:!0})])}),TB=Cl({name:"Tabbar",configFields:uV(),partFields:EB(),factory:mV}),fV=(n,s)=>({uid:n.uid,dom:n.dom,behaviours:ac(n.tabviewBehaviours,[An.config({})]),domModification:{attributes:{role:"tabpanel"}}}),gV=cu({name:"Tabview",configFields:[_a("tabviewBehaviours",[An])],factory:fV}),hV=oe([we("selectFirst",!0),yo("onChangeTab"),yo("onDismissTab"),we("tabs",[]),_a("tabSectionBehaviours",[])]),pV=oc({factory:TB,schema:[Ze("dom"),Sd("markers",[Ze("tabClass"),Ze("selectedClass")])],name:"tabbar",defaults:n=>({tabs:n.tabs})}),bV=oc({factory:gV,name:"tabview"}),vV=oe([pV,bV]),kB=(n,s,a,l)=>{const d=h=>{const C=_t.getValue(h);es(h,n,"tabview").each(x=>{Lt(n.tabs,_=>_.value===C).each(_=>{const N=_.view();Jr(h.element,"id").each(L=>{ln(x.element,"aria-labelledby",L)}),An.set(x,N),n.onChangeTab(x,h,N)})})},g=(h,C)=>{es(h,n,"tabbar").each(x=>{C(x).each(Xh)})};return{uid:n.uid,dom:n.dom,components:s,behaviours:XC(n.tabSectionBehaviours),events:ks(en([n.selectFirst?[ps((h,C)=>{g(h,So.getFirst)})]:[],[Ie(T2(),(h,C)=>{const x=C.event.button;d(x)}),Ie(w0(),(h,C)=>{const x=C.event.button;n.onDismissTab(h,x)})]])),apis:{getViewItems:h=>es(h,n,"tabview").map(C=>An.contents(C)).getOr([]),showTab:(h,C)=>{g(h,T=>{const _=So.getCandidates(T);return Lt(_,L=>_t.getValue(L)===C).filter(L=>!So.isHighlighted(T,L))})}}}},yb=Cl({name:"TabSection",configFields:hV(),partFields:vV(),factory:kB,apis:{getViewItems:(n,s)=>n.getViewItems(s),showTab:(n,s,a)=>{n.showTab(s,a)}}}),RT=(n,s,a)=>{const l=_t.getValue(a);_t.setValue(s,l),rO(s)},sO=(n,s)=>{const a=n.element,l=vc(a),d=a.dom;Rr(a,"type")!=="number"&&s(d,l)},rO=n=>{sO(n,(s,a)=>s.setSelectionRange(a.length,a.length))},AB=(n,s)=>{sO(n,(a,l)=>a.setSelectionRange(s,l.length))},_B=(n,s,a)=>{if(n.selectsOver){const l=_t.getValue(s),d=n.getDisplayText(l),g=_t.getValue(a);return n.getDisplayText(g).indexOf(d)===0?A.some(()=>{RT(n,s,a),AB(s,d.length)}):A.none()}else return A.none()},aO=oe("alloy.typeahead.itemexecute"),yV=(n,s,a,l)=>{const d=(N,L,j)=>{n.previewing.set(!1);const Z=Rn.getCoupled(N,"sandbox");if(Co.isOpen(Z))Fe.getCurrent(Z).each(ne=>{So.getHighlighted(ne).fold(()=>{j(ne)},()=>{Z2(Z,ne.element,"keydown",L)})});else{const ne=ae=>{Fe.getCurrent(ae).each(j)};dT(n,h(N),N,Z,l,ne,za.HighlightMenuAndItem).get(U)}},g=IP(n),h=N=>L=>L.map(j=>{const Z=Ya(j.menus),ne=xe(Z,Y=>Ln(Y.items,le=>le.type==="item"));return _t.getState(N).update(ye(ne,Y=>Y.data)),j}),C=N=>Fe.getCurrent(N),x="typeaheadevents",T=[En.config({}),_t.config({onSetValue:n.onSetValue,store:{mode:"dataset",getDataKey:N=>vc(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,L)=>{gi(N.element,n.model.getDisplayText(L))},...n.initialData.map(N=>ff("initialValue",N)).getOr({})}}),zv.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:(N,L)=>{const j=Rn.getCoupled(N,"sandbox");if(En.isFocused(N)&&vc(N.element).length>=n.minChars){const ne=C(j).bind(Y=>So.getHighlighted(Y).map(_t.getValue));n.previewing.set(!0);const ae=Y=>{C(j).each(le=>{ne.fold(()=>{n.model.selectsOver&&So.highlightFirst(le)},pe=>{So.highlightBy(le,Ee=>_t.getValue(Ee).value===pe.value),So.getHighlighted(le).orThunk(()=>(So.highlightFirst(le),A.none()))})})};dT(n,h(N),N,j,l,ae,za.HighlightJustMenu).get(U)}},cancelEvent:x0()}),Xt.config({mode:"special",onDown:(N,L)=>(d(N,L,So.highlightFirst),A.some(!0)),onEscape:N=>{const L=Rn.getCoupled(N,"sandbox");return Co.isOpen(L)?(Co.close(L),A.some(!0)):A.none()},onUp:(N,L)=>(d(N,L,So.highlightLast),A.some(!0)),onEnter:N=>{const L=Rn.getCoupled(N,"sandbox"),j=Co.isOpen(L);if(j&&!n.previewing.get())return C(L).bind(Z=>So.getHighlighted(Z)).map(Z=>(tn(N,aO(),{item:Z}),!0));{const Z=_t.getValue(N);return Wn(N,x0()),n.onExecute(L,N,Z),j&&Co.close(L),A.some(!0)}}}),eo.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),Rn.config({others:{sandbox:N=>_P(n,N,{onOpen:()=>eo.on(N),onClose:()=>{n.lazyTypeaheadComp.get().each(L=>gs(L.element,"aria-activedescendant")),eo.off(N)}})}}),xn(x,[ps(N=>{n.lazyTypeaheadComp.set(A.some(N))}),ou(N=>{n.lazyTypeaheadComp.set(A.none())}),Ef(N=>{const L=U;mT(n,h(N),N,l,L,za.HighlightMenuAndItem).get(U)}),Ie(aO(),(N,L)=>{const j=Rn.getCoupled(N,"sandbox");RT(n.model,N,L.event.item),Wn(N,x0()),n.onItemExecute(N,j,L.event.item,_t.getValue(N)),Co.close(j),rO(N)})].concat(n.dismissOnBlur?[Ie(Fh(),N=>{const L=Rn.getCoupled(N,"sandbox");sr(L.element).isNone()&&Co.close(L)})]:[]))],_={[xi()]:[_t.name(),zv.name(),x],...n.eventOrder};return{uid:n.uid,dom:M_(zo(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...ac(n.typeaheadBehaviours,T)},eventOrder:_}},CV=oe([Lo("lazySink"),Ze("fetch"),we("minChars",5),we("responseTime",1e3),yo("onOpen"),we("getHotspot",A.some),we("getAnchorOverrides",oe({})),we("layouts",A.none()),we("eventOrder",{}),mf("model",{},[we("getDisplayText",n=>n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value),we("selectsOver",!0),we("populateFromBrowse",!0)]),yo("onSetValue"),pl("onExecute"),yo("onItemExecute"),we("inputClasses",[]),we("inputAttributes",{}),we("inputStyles",{}),we("matchWidth",!0),we("useMinWidth",!1),we("dismissOnBlur",!0),lo(["openClass"]),Lo("initialData"),Lo("listRole"),_a("typeaheadBehaviours",[En,_t,zv,Xt,eo,Rn]),Sc("lazyTypeaheadComp",()=>Pt(A.none)),Sc("previewing",()=>Pt(!0))].concat(N_()).concat(A_())),xV=oe([Si({schema:[nw()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(s,a,l)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(d=>{_B(n.model,d,l).fold(()=>{n.model.selectsOver?(So.dehighlight(a,l),n.previewing.set(!0)):n.previewing.set(!1)},g=>{g(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(d=>{n.model.populateFromBrowse&&RT(n.model,d,l),Jr(l.element,"id").each(g=>ln(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>n.lazyTypeaheadComp.get().map(l=>(tn(l,aO(),{item:a}),!0)),onHover:(s,a)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(l=>{n.model.populateFromBrowse&&RT(n.model,l,a)})}})})]),cO=Cl({name:"Typeahead",configFields:CV(),partFields:xV(),factory:yV});var OB=tinymce.util.Tools.resolve("tinymce.ThemeManager"),NT=tinymce.util.Tools.resolve("tinymce.util.Delay"),Gv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),SV=tinymce.util.Tools.resolve("tinymce.EditorManager"),qv=tinymce.util.Tools.resolve("tinymce.Env"),du;(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(du||(du={}));var Kv;(function(n){n.auto="auto",n.top="top",n.bottom="bottom"})(Kv||(Kv={}));const Xo=n=>s=>s.options.get(n),Yv=n=>s=>A.from(n(s)),DB=n=>{const s=qv.deviceType.isPhone(),a=qv.deviceType.isTablet()||s,l=n.options.register,d=h=>De(h)||h===!1,g=h=>De(h)||In(h);l("skin",{processor:h=>De(h)||h===!1,default:"oxide"}),l("skin_url",{processor:"string"}),l("height",{processor:g,default:Math.max(n.getElement().offsetHeight,400)}),l("width",{processor:g,default:Gv.DOM.getStyle(n.getElement(),"width")}),l("min_height",{processor:"number",default:100}),l("min_width",{processor:"number"}),l("max_height",{processor:"number"}),l("max_width",{processor:"number"}),l("style_formats",{processor:"object[]"}),l("style_formats_merge",{processor:"boolean",default:!1}),l("style_formats_autohide",{processor:"boolean",default:!1}),l("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),l("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),l("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),l("font_size_input_default_unit",{processor:"string",default:"pt"}),l("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),l("content_langs",{processor:"object[]"}),l("removed_menuitems",{processor:"string",default:""}),l("menubar",{processor:h=>De(h)||vn(h),default:!s}),l("menu",{processor:"object",default:{}}),l("toolbar",{processor:h=>vn(h)||De(h)||$n(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),fn(9,h=>{l("toolbar"+(h+1),{processor:"string"})}),l("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),l("toolbar_groups",{processor:"object",default:{}}),l("toolbar_location",{processor:"string",default:Kv.auto}),l("toolbar_persist",{processor:"boolean",default:!1}),l("toolbar_sticky",{processor:"boolean",default:n.inline}),l("toolbar_sticky_offset",{processor:"number",default:0}),l("fixed_toolbar_container",{processor:"string",default:""}),l("fixed_toolbar_container_target",{processor:"object"}),l("ui_mode",{processor:"string",default:"combined"}),l("file_picker_callback",{processor:"function"}),l("file_picker_validator_handler",{processor:"function"}),l("file_picker_types",{processor:"string"}),l("typeahead_urls",{processor:"boolean",default:!0}),l("anchor_top",{processor:d,default:"#top"}),l("anchor_bottom",{processor:d,default:"#bottom"}),l("draggable_modal",{processor:"boolean",default:!1}),l("statusbar",{processor:"boolean",default:!0}),l("elementpath",{processor:"boolean",default:!0}),l("branding",{processor:"boolean",default:!0}),l("promotion",{processor:"boolean",default:!0}),l("resize",{processor:h=>h==="both"||vn(h),default:!qv.deviceType.isTouch()}),l("sidebar_show",{processor:"string"}),l("help_accessibility",{processor:"boolean",default:n.hasPlugin("help")}),l("default_font_stack",{processor:"string[]",default:[]})},RB=Xo("readonly"),MT=Xo("disabled"),lO=Xo("height"),iO=Xo("width"),uO=Yv(Xo("min_width")),dO=Yv(Xo("min_height")),PT=Yv(Xo("max_width")),mO=Yv(Xo("max_height")),NB=Yv(Xo("style_formats")),MB=Xo("style_formats_merge"),fO=Xo("style_formats_autohide"),PB=Xo("content_langs"),BB=Xo("removed_menuitems"),Cb=Xo("toolbar_mode"),$B=Xo("toolbar_groups"),gO=Xo("toolbar_location"),BT=Xo("fixed_toolbar_container"),IB=Xo("fixed_toolbar_container_target"),FB=Xo("toolbar_persist"),LB=Xo("toolbar_sticky_offset"),HB=Xo("menubar"),$T=Xo("toolbar"),zB=Xo("file_picker_callback"),VB=Xo("file_picker_validator_handler"),IT=Xo("font_size_input_default_unit"),hO=Xo("file_picker_types"),pO=Xo("typeahead_urls"),UB=Xo("anchor_top"),bO=Xo("anchor_bottom"),jB=Xo("draggable_modal"),WB=Xo("statusbar"),ZB=Xo("elementpath"),vO=Xo("branding"),GB=Xo("resize"),qB=Xo("paste_as_text"),KB=Xo("sidebar_show"),YB=Xo("promotion"),XB=Xo("help_accessibility"),QB=Xo("default_font_stack"),Tx=Xo("skin"),kx=n=>n.options.get("skin")===!1,Xv=n=>n.options.get("menubar")!==!1,yO=n=>{const s=n.options.get("skin_url");if(kx(n))return s;if(s)return n.documentBaseURI.toAbsolute(s);{const a=n.options.get("skin");return SV.baseURL+"/skins/ui/"+a}},wV=n=>A.from(n.options.get("skin_url")),JB=n=>n.options.get("line_height_formats").split(" "),Qv=n=>{const s=$T(n),a=De(s),l=$n(s)&&s.length>0;return!Sp(n)&&(l||a||s===!0)},Ax=n=>{const s=fn(9,l=>n.options.get("toolbar"+(l+1))),a=Ln(s,De);return $r(a.length>0,a)},Sp=n=>Ax(n).fold(()=>{const s=$T(n);return lt(s,De)&&s.length>0},St),FT=n=>gO(n)===Kv.bottom,e6=n=>{if(!n.inline)return A.none();const s=BT(n)??"";if(s.length>0)return Bo(Hc(),s);const a=IB(n);return un(a)?A.some(at.fromDom(a)):A.none()},Jv=n=>n.inline&&e6(n).isSome(),CO=n=>e6(n).getOrThunk(()=>li(fr(at.fromDom(n.getElement())))),xO=n=>n.inline&&!Xv(n)&&!Qv(n)&&!Sp(n),ey=n=>(n.options.get("toolbar_sticky")||n.inline)&&!Jv(n)&&!xO(n),wp=n=>!Jv(n)&&n.options.get("ui_mode")==="split",t6=n=>{const s=n.options.get("menu");return $s(s,a=>({...a,items:a.items}))};var EV=Object.freeze({__proto__:null,get ToolbarMode(){return du},get ToolbarLocation(){return Kv},register:DB,getSkinUrl:yO,getSkinUrlOption:wV,isReadOnly:RB,isDisabled:MT,getSkin:Tx,isSkinDisabled:kx,getHeightOption:lO,getWidthOption:iO,getMinWidthOption:uO,getMinHeightOption:dO,getMaxWidthOption:PT,getMaxHeightOption:mO,getUserStyleFormats:NB,shouldMergeStyleFormats:MB,shouldAutoHideStyleFormats:fO,getLineHeightFormats:JB,getContentLanguages:PB,getRemovedMenuItems:BB,isMenubarEnabled:Xv,isMultipleToolbars:Sp,isToolbarEnabled:Qv,isToolbarPersist:FB,getMultipleToolbarsOption:Ax,getUiContainer:CO,useFixedContainer:Jv,isSplitUiMode:wp,getToolbarMode:Cb,isDraggableModal:jB,isDistractionFree:xO,isStickyToolbar:ey,getStickyToolbarOffset:LB,getToolbarLocation:gO,isToolbarLocationBottom:FT,getToolbarGroups:$B,getMenus:t6,getMenubar:HB,getToolbar:$T,getFilePickerCallback:zB,getFilePickerTypes:hO,useTypeaheadUrls:pO,getAnchorTop:UB,getAnchorBottom:bO,getFilePickerValidatorHandler:VB,getFontSizeInputDefaultUnit:IT,useStatusBar:WB,useElementPath:ZB,promotionEnabled:YB,useBranding:vO,getResize:GB,getPasteAsText:qB,getSidebarShow:KB,useHelpAccessibility:XB,getDefaultFontStack:QB});const TV=["visible","hidden","clip"],n6=n=>vt(n).length>0&&!bt(TV,n),o6=n=>{if(te(n)){const s=hs(n,"overflow-x"),a=hs(n,"overflow-y");return n6(s)||n6(a)}else return!1},s6=n=>n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen(),kV=(n,s)=>{const a=lr(s,o6),l=a.length===0?Fs(s).map(Eo).map(d=>lr(d,o6)).getOr([]):a;return Oo(l).map(d=>({element:d,others:l.slice(1),isFullscreen:()=>s6(n)}))},Yg=(n,s)=>wp(n)?kV(n,s):A.none(),xb=n=>{const s=[...ye(n.others,Er),Fa()];return n.isFullscreen()?Fa():s2(Er(n.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:r6,setPrototypeOf:Bm,isFrozen:AV,getPrototypeOf:_V,getOwnPropertyDescriptor:SO}=Object;let{freeze:vs,seal:Wd,create:a6}=Object,{apply:wO,construct:EO}=typeof Reflect<"u"&&Reflect;vs||(vs=function(s){return s}),Wd||(Wd=function(s){return s}),wO||(wO=function(s,a,l){return s.apply(a,l)}),EO||(EO=function(s,a){return new s(...a)});const LT=Ai(Array.prototype.forEach),OV=Ai(Array.prototype.lastIndexOf),c6=Ai(Array.prototype.pop),_x=Ai(Array.prototype.push),DV=Ai(Array.prototype.splice),HT=Ai(String.prototype.toLowerCase),TO=Ai(String.prototype.toString),l6=Ai(String.prototype.match),Ox=Ai(String.prototype.replace),RV=Ai(String.prototype.indexOf),NV=Ai(String.prototype.trim),$m=Ai(Object.prototype.hasOwnProperty),ki=Ai(RegExp.prototype.test),Dx=MV(TypeError);function Ai(n){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return wO(n,s,l)}}function MV(n){return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return EO(n,a)}}function ys(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:HT;Bm&&Bm(n,null);let l=s.length;for(;l--;){let d=s[l];if(typeof d=="string"){const g=a(d);g!==d&&(AV(s)||(s[l]=g),d=g)}n[d]=!0}return n}function PV(n){for(let s=0;s<n.length;s++)$m(n,s)||(n[s]=null);return n}function Xg(n){const s=a6(null);for(const[a,l]of r6(n))$m(n,a)&&(Array.isArray(l)?s[a]=PV(l):l&&typeof l=="object"&&l.constructor===Object?s[a]=Xg(l):s[a]=l);return s}function Rx(n,s){for(;n!==null;){const l=SO(n,s);if(l){if(l.get)return Ai(l.get);if(typeof l.value=="function")return Ai(l.value)}n=_V(n)}function a(){return null}return a}const i6=vs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),zT=vs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),kO=vs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),u6=vs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),AO=vs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),d6=vs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),m6=vs(["#text"]),_O=vs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),OO=vs(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),f6=vs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),VT=vs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),BV=Wd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$V=Wd(/<%[\w\W]*|[\w\W]*%>/gm),IV=Wd(/\$\{[\w\W]*/gm),FV=Wd(/^data-[\-\w.\u00B7-\uFFFF]+$/),LV=Wd(/^aria-[\-\w]+$/),g6=Wd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),HV=Wd(/^(?:\w+script|data):/i),zV=Wd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),h6=Wd(/^html$/i),VV=Wd(/^[a-z][.\w]*(-[.\w]+)+$/i);var DO=Object.freeze({__proto__:null,ARIA_ATTR:LV,ATTR_WHITESPACE:zV,CUSTOM_ELEMENT:VV,DATA_ATTR:FV,DOCTYPE_NAME:h6,ERB_EXPR:$V,IS_ALLOWED_URI:g6,IS_SCRIPT_OR_DATA:HV,MUSTACHE_EXPR:BV,TMPLIT_EXPR:IV});const Nx={element:1,text:3,progressingInstruction:7,comment:8,document:9},UV=function(){return typeof window>"u"?null:window},jV=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let l=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(l=a.getAttribute(d));const g="dompurify"+(l?"#"+l:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},p6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function b6(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:UV();const s=t=>b6(t);if(s.version="3.2.6",s.removed=[],!n||!n.document||n.document.nodeType!==Nx.document||!n.Element)return s.isSupported=!1,s;let{document:a}=n;const l=a,d=l.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:x,NodeFilter:T,NamedNodeMap:_=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:N,DOMParser:L,trustedTypes:j}=n,Z=x.prototype,ne=Rx(Z,"cloneNode"),ae=Rx(Z,"remove"),Y=Rx(Z,"nextSibling"),le=Rx(Z,"childNodes"),pe=Rx(Z,"parentNode");if(typeof h=="function"){const t=a.createElement("template");t.content&&t.content.ownerDocument&&(a=t.content.ownerDocument)}let Ee,Oe="";const{implementation:ht,createNodeIterator:Ue,createDocumentFragment:Qe,getElementsByTagName:Ke}=a,{importNode:Qt}=l;let zt=p6();s.isSupported=typeof r6=="function"&&typeof pe=="function"&&ht&&ht.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:jn,ERB_EXPR:Jt,TMPLIT_EXPR:_n,DATA_ATTR:Ut,ARIA_ATTR:Ve,IS_SCRIPT_OR_DATA:ct,ATTR_WHITESPACE:mn,CUSTOM_ELEMENT:Pn}=DO;let{IS_ALLOWED_URI:qt}=DO,Nn=null;const Qo=ys({},[...i6,...zT,...kO,...AO,...m6]);let ko=null;const cc=ys({},[..._O,...OO,...f6,...VT]);let Ps=Object.seal(a6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Xl=null,Ra=null,hu=!0,Za=!0,od=!1,Bp=!0,qf=!1,Ry=!0,Kf=!1,TS=!1,zN=!1,Ny=!1,My=!1,Py=!1,r7=!0,VN=!1;const TY="user-content-";let UN=!0,By=!1,$y={},Kd=null;const jN=ys({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let a7=null;const kS=ys({},["audio","video","img","source","image","track"]);let $p=null;const AS=ys({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),_S="http://www.w3.org/1998/Math/MathML",jb="http://www.w3.org/2000/svg",ca="http://www.w3.org/1999/xhtml";let ch=ca,Sk=!1,wk=null;const kY=ys({},[_S,jb,ca],TO);let Ek=ys({},["mi","mo","mn","ms","mtext"]),Um=ys({},["annotation-xml"]);const yQ=ys({},["title","style","font","a","script"]);let OS=null;const c7=["application/xhtml+xml","text/html"],Iy="text/html";let Ga=null,Wb=null;const AY=a.createElement("form"),l7=function(o){return o instanceof RegExp||o instanceof Function},WN=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wb&&Wb===o)){if((!o||typeof o!="object")&&(o={}),o=Xg(o),OS=c7.indexOf(o.PARSER_MEDIA_TYPE)===-1?Iy:o.PARSER_MEDIA_TYPE,Ga=OS==="application/xhtml+xml"?TO:HT,Nn=$m(o,"ALLOWED_TAGS")?ys({},o.ALLOWED_TAGS,Ga):Qo,ko=$m(o,"ALLOWED_ATTR")?ys({},o.ALLOWED_ATTR,Ga):cc,wk=$m(o,"ALLOWED_NAMESPACES")?ys({},o.ALLOWED_NAMESPACES,TO):kY,$p=$m(o,"ADD_URI_SAFE_ATTR")?ys(Xg(AS),o.ADD_URI_SAFE_ATTR,Ga):AS,a7=$m(o,"ADD_DATA_URI_TAGS")?ys(Xg(kS),o.ADD_DATA_URI_TAGS,Ga):kS,Kd=$m(o,"FORBID_CONTENTS")?ys({},o.FORBID_CONTENTS,Ga):jN,Xl=$m(o,"FORBID_TAGS")?ys({},o.FORBID_TAGS,Ga):Xg({}),Ra=$m(o,"FORBID_ATTR")?ys({},o.FORBID_ATTR,Ga):Xg({}),$y=$m(o,"USE_PROFILES")?o.USE_PROFILES:!1,hu=o.ALLOW_ARIA_ATTR!==!1,Za=o.ALLOW_DATA_ATTR!==!1,od=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Bp=o.ALLOW_SELF_CLOSE_IN_ATTR!==!1,qf=o.SAFE_FOR_TEMPLATES||!1,Ry=o.SAFE_FOR_XML!==!1,Kf=o.WHOLE_DOCUMENT||!1,Ny=o.RETURN_DOM||!1,My=o.RETURN_DOM_FRAGMENT||!1,Py=o.RETURN_TRUSTED_TYPE||!1,zN=o.FORCE_BODY||!1,r7=o.SANITIZE_DOM!==!1,VN=o.SANITIZE_NAMED_PROPS||!1,UN=o.KEEP_CONTENT!==!1,By=o.IN_PLACE||!1,qt=o.ALLOWED_URI_REGEXP||g6,ch=o.NAMESPACE||ca,Ek=o.MATHML_TEXT_INTEGRATION_POINTS||Ek,Um=o.HTML_INTEGRATION_POINTS||Um,Ps=o.CUSTOM_ELEMENT_HANDLING||{},o.CUSTOM_ELEMENT_HANDLING&&l7(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ps.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&l7(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ps.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ps.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),qf&&(Za=!1),My&&(Ny=!0),$y&&(Nn=ys({},m6),ko=[],$y.html===!0&&(ys(Nn,i6),ys(ko,_O)),$y.svg===!0&&(ys(Nn,zT),ys(ko,OO),ys(ko,VT)),$y.svgFilters===!0&&(ys(Nn,kO),ys(ko,OO),ys(ko,VT)),$y.mathMl===!0&&(ys(Nn,AO),ys(ko,f6),ys(ko,VT))),o.ADD_TAGS&&(Nn===Qo&&(Nn=Xg(Nn)),ys(Nn,o.ADD_TAGS,Ga)),o.ADD_ATTR&&(ko===cc&&(ko=Xg(ko)),ys(ko,o.ADD_ATTR,Ga)),o.ADD_URI_SAFE_ATTR&&ys($p,o.ADD_URI_SAFE_ATTR,Ga),o.FORBID_CONTENTS&&(Kd===jN&&(Kd=Xg(Kd)),ys(Kd,o.FORBID_CONTENTS,Ga)),UN&&(Nn["#text"]=!0),Kf&&ys(Nn,["html","head","body"]),Nn.table&&(ys(Nn,["tbody"]),delete Xl.tbody),o.TRUSTED_TYPES_POLICY){if(typeof o.TRUSTED_TYPES_POLICY.createHTML!="function")throw Dx('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof o.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Dx('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ee=o.TRUSTED_TYPES_POLICY,Oe=Ee.createHTML("")}else Ee===void 0&&(Ee=jV(j,d)),Ee!==null&&typeof Oe=="string"&&(Oe=Ee.createHTML(""));vs&&vs(o),Wb=o}},i7=ys({},[...zT,...kO,...u6]),Zb=ys({},[...AO,...d6]),CQ=function(o){let r=pe(o);(!r||!r.tagName)&&(r={namespaceURI:ch,tagName:"template"});const c=HT(o.tagName),u=HT(r.tagName);return wk[o.namespaceURI]?o.namespaceURI===jb?r.namespaceURI===ca?c==="svg":r.namespaceURI===_S?c==="svg"&&(u==="annotation-xml"||Ek[u]):!!i7[c]:o.namespaceURI===_S?r.namespaceURI===ca?c==="math":r.namespaceURI===jb?c==="math"&&Um[u]:!!Zb[c]:o.namespaceURI===ca?r.namespaceURI===jb&&!Um[u]||r.namespaceURI===_S&&!Ek[u]?!1:!Zb[c]&&(yQ[c]||!i7[c]):!!(OS==="application/xhtml+xml"&&wk[o.namespaceURI]):!1},Yf=function(o){_x(s.removed,{element:o});try{pe(o).removeChild(o)}catch{ae(o)}},Fy=function(o,r){try{_x(s.removed,{attribute:r.getAttributeNode(o),from:r})}catch{_x(s.removed,{attribute:null,from:r})}if(r.removeAttribute(o),o==="is")if(Ny||My)try{Yf(r)}catch{}else try{r.setAttribute(o,"")}catch{}},_Y=function(o){let r=null,c=null;if(zN)o="<remove></remove>"+o;else{const b=l6(o,/^[\r\n\t ]+/);c=b&&b[0]}OS==="application/xhtml+xml"&&ch===ca&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");const u=Ee?Ee.createHTML(o):o;if(ch===ca)try{r=new L().parseFromString(u,OS)}catch{}if(!r||!r.documentElement){r=ht.createDocument(ch,"template",null);try{r.documentElement.innerHTML=Sk?Oe:u}catch{}}const f=r.body||r.documentElement;return o&&c&&f.insertBefore(a.createTextNode(c),f.childNodes[0]||null),ch===ca?Ke.call(r,Kf?"html":"body")[0]:Kf?r.documentElement:f},u7=function(o){return Ue.call(o.ownerDocument||o,o,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},ZN=function(o){return o instanceof N&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof _)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function"||typeof o.hasChildNodes!="function")},Ly=function(o){return typeof C=="function"&&o instanceof C};function lh(t,o,r){LT(t,c=>{c.call(s,o,r,Wb)})}const d7=function(o){let r=null;if(lh(zt.beforeSanitizeElements,o,null),ZN(o))return Yf(o),!0;const c=Ga(o.nodeName);if(lh(zt.uponSanitizeElement,o,{tagName:c,allowedTags:Nn}),Ry&&o.hasChildNodes()&&!Ly(o.firstElementChild)&&ki(/<[/\w!]/g,o.innerHTML)&&ki(/<[/\w!]/g,o.textContent)||o.nodeType===Nx.progressingInstruction||Ry&&o.nodeType===Nx.comment&&ki(/<[/\w]/g,o.data))return Yf(o),!0;if(!Nn[c]||Xl[c]){if(!Xl[c]&&m7(c)&&(Ps.tagNameCheck instanceof RegExp&&ki(Ps.tagNameCheck,c)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(c)))return!1;if(UN&&!Kd[c]){const u=pe(o)||o.parentNode,f=le(o)||o.childNodes;if(f&&u){const b=f.length;for(let v=b-1;v>=0;--v){const S=ne(f[v],!0);S.__removalCount=(o.__removalCount||0)+1,u.insertBefore(S,Y(o))}}}return Yf(o),!0}return o instanceof x&&!CQ(o)||(c==="noscript"||c==="noembed"||c==="noframes")&&ki(/<\/no(script|embed|frames)/i,o.innerHTML)?(Yf(o),!0):(qf&&o.nodeType===Nx.text&&(r=o.textContent,LT([jn,Jt,_n],u=>{r=Ox(r,u," ")}),o.textContent!==r&&(_x(s.removed,{element:o.cloneNode()}),o.textContent=r)),lh(zt.afterSanitizeElements,o,null),!1)},GN=function(o,r,c){if(r7&&(r==="id"||r==="name")&&(c in a||c in AY))return!1;if(!(Za&&!Ra[r]&&ki(Ut,r))){if(!(hu&&ki(Ve,r))){if(!ko[r]||Ra[r]){if(!(m7(o)&&(Ps.tagNameCheck instanceof RegExp&&ki(Ps.tagNameCheck,o)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(o))&&(Ps.attributeNameCheck instanceof RegExp&&ki(Ps.attributeNameCheck,r)||Ps.attributeNameCheck instanceof Function&&Ps.attributeNameCheck(r))||r==="is"&&Ps.allowCustomizedBuiltInElements&&(Ps.tagNameCheck instanceof RegExp&&ki(Ps.tagNameCheck,c)||Ps.tagNameCheck instanceof Function&&Ps.tagNameCheck(c))))return!1}else if(!$p[r]){if(!ki(qt,Ox(c,mn,""))){if(!((r==="src"||r==="xlink:href"||r==="href")&&o!=="script"&&RV(c,"data:")===0&&a7[o])){if(!(od&&!ki(ct,Ox(c,mn,"")))){if(c)return!1}}}}}}return!0},m7=function(o){return o!=="annotation-xml"&&l6(o,Pn)},OY=function(o){lh(zt.beforeSanitizeAttributes,o,null);const{attributes:r}=o;if(!r||ZN(o))return;const c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ko,forceKeepAttr:void 0};let u=r.length;for(;u--;){const f=r[u],{name:b,namespaceURI:v,value:S}=f,O=Ga(b),R=S;let M=b==="value"?R:NV(R);if(c.attrName=O,c.attrValue=M,c.keepAttr=!0,c.forceKeepAttr=void 0,lh(zt.uponSanitizeAttribute,o,c),M=c.attrValue,VN&&(O==="id"||O==="name")&&(Fy(b,o),M=TY+M),Ry&&ki(/((--!?|])>)|<\/(style|title)/i,M)){Fy(b,o);continue}if(c.forceKeepAttr)continue;if(!c.keepAttr){Fy(b,o);continue}if(!Bp&&ki(/\/>/i,M)){Fy(b,o);continue}qf&&LT([jn,Jt,_n],J=>{M=Ox(M,J," ")});const H=Ga(o.nodeName);if(!GN(H,O,M)){Fy(b,o);continue}if(Ee&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!v)switch(j.getAttributeType(H,O)){case"TrustedHTML":{M=Ee.createHTML(M);break}case"TrustedScriptURL":{M=Ee.createScriptURL(M);break}}if(M!==R)try{v?o.setAttributeNS(v,b,M):o.setAttribute(b,M),ZN(o)?Yf(o):c6(s.removed)}catch{Fy(b,o)}}lh(zt.afterSanitizeAttributes,o,null)},e=function t(o){let r=null;const c=u7(o);for(lh(zt.beforeSanitizeShadowDOM,o,null);r=c.nextNode();)lh(zt.uponSanitizeShadowNode,r,null),d7(r),OY(r),r.content instanceof g&&t(r.content);lh(zt.afterSanitizeShadowDOM,o,null)};return s.sanitize=function(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=null,c=null,u=null,f=null;if(Sk=!t,Sk&&(t="<!-->"),typeof t!="string"&&!Ly(t))if(typeof t.toString=="function"){if(t=t.toString(),typeof t!="string")throw Dx("dirty is not a string, aborting")}else throw Dx("toString is not a function");if(!s.isSupported)return t;if(TS||WN(o),s.removed=[],typeof t=="string"&&(By=!1),By){if(t.nodeName){const S=Ga(t.nodeName);if(!Nn[S]||Xl[S])throw Dx("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof C)r=_Y("<!---->"),c=r.ownerDocument.importNode(t,!0),c.nodeType===Nx.element&&c.nodeName==="BODY"||c.nodeName==="HTML"?r=c:r.appendChild(c);else{if(!Ny&&!qf&&!Kf&&t.indexOf("<")===-1)return Ee&&Py?Ee.createHTML(t):t;if(r=_Y(t),!r)return Ny?null:Py?Oe:""}r&&zN&&Yf(r.firstChild);const b=u7(By?t:r);for(;u=b.nextNode();)d7(u),OY(u),u.content instanceof g&&e(u.content);if(By)return t;if(Ny){if(My)for(f=Qe.call(r.ownerDocument);r.firstChild;)f.appendChild(r.firstChild);else f=r;return(ko.shadowroot||ko.shadowrootmode)&&(f=Qt.call(l,f,!0)),f}let v=Kf?r.outerHTML:r.innerHTML;return Kf&&Nn["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&ki(h6,r.ownerDocument.doctype.name)&&(v="<!DOCTYPE "+r.ownerDocument.doctype.name+`>
`+v),qf&&LT([jn,Jt,_n],S=>{v=Ox(v,S," ")}),Ee&&Py?Ee.createHTML(v):v},s.setConfig=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};WN(t),TS=!0},s.clearConfig=function(){Wb=null,TS=!1},s.isValidAttribute=function(t,o,r){Wb||WN({});const c=Ga(t),u=Ga(o);return GN(c,u,r)},s.addHook=function(t,o){typeof o=="function"&&_x(zt[t],o)},s.removeHook=function(t,o){if(o!==void 0){const r=OV(zt[t],o);return r===-1?void 0:DV(zt[t],r,1)[0]}return c6(zt[t])},s.removeHooks=function(t){zt[t]=[]},s.removeAllHooks=function(){zt=p6()},s}var RO=b6();const Mx=n=>RO().sanitize(n);var Nc=tinymce.util.Tools.resolve("tinymce.util.I18n");const UT={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},v6="temporary-placeholder",NO=n=>()=>Vt(n,v6).getOr("!not found!"),MO=(n,s)=>{const a=n.toLowerCase();if(Nc.isRtl()){const l=Ii(a,"-rtl");return mo(s,l)?l:a}else return a},y6=(n,s)=>Vt(s,MO(n,s)),WV=(n,s)=>{const a=s();return y6(n,a).getOrThunk(NO(a))},jT=(n,s,a)=>{const l=s();return y6(n,l).or(a).getOrThunk(NO(l))},ty=n=>Nc.isRtl()?mo(UT,n):!1,PO=()=>xn("add-focusable",[ps(n=>{yd(n.element,"svg").each(s=>ln(s,"focusable","false"))})]),BO=(n,s,a,l)=>{const d=ty(s)?["tox-icon--flip"]:[],g=Vt(a,MO(s,a)).or(l).getOrThunk(NO(a));return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes.concat(d),innerHtml:g},behaviours:nt([...n.behaviours??[],PO()]),eventOrder:n.eventOrder??{}}},mu=(n,s,a,l=A.none())=>BO(s,n,a(),l),ZV=(n,s,a)=>{const l=a(),d=Lt(n,g=>mo(l,MO(g,l)));return BO(s,d.getOr(v6),l,A.none())},GV={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},$O=cu({name:"Notification",factory:n=>{const s=Ct("notification-text"),a=To({dom:Dm(`<p id=${s}>${Mx(n.backstageProvider.translate(n.text))}</p>`),behaviours:nt([An.config({})])}),l=Z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Z}%`}}}),d=Z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Z}%`}}),g=To({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(0)]},d(0)],behaviours:nt([An.config({})])}),x={updateProgress:(Z,ne)=>{Z.getSystem().isConnected()&&g.getOpt(Z).each(ae=>{An.set(ae,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[l(ne)]},d(ne)])})},updateText:(Z,ne)=>{if(Z.getSystem().isConnected()){const ae=a.get(Z);An.set(ae,[Ss(ne)])}}},T=en([n.icon.toArray(),[n.level],A.from(GV[n.level]).toArray()]),_=To(sa.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":n.backstageProvider.translate("Close")}},components:[mu("close",{tag:"span",classes:["tox-icon"]},n.iconProvider)],buttonBehaviours:nt([us.config({}),bs.config({...n.backstageProvider.tooltips.getConfig({tooltipText:n.backstageProvider.translate("Close")})})]),action:Z=>{n.onAction(Z)}})),N=ZV(T,{tag:"div",classes:["tox-notification__icon"]},n.iconProvider),L={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:nt([An.config({})])},j=[N,L];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},behaviours:nt([us.config({}),En.config({}),Xt.config({mode:"special",onEscape:Z=>(n.onAction(Z),A.some(!0))})]),components:j.concat(n.progress?[g.asSpec()]:[]).concat([_.asSpec()]),apis:x}},configFields:[wc("level","info",["success","error","warning","warn","info"]),Ze("progress"),Lo("icon"),Ze("onAction"),Ze("text"),Ze("iconProvider"),Ze("backstageProvider")],apis:{updateProgress:(n,s,a)=>{n.updateProgress(s,a)},updateText:(n,s,a)=>{n.updateText(s,a)}}});var qV=(n,s,a,l)=>{const d=s.backstage.shared,g=()=>at.fromDom(n.queryCommandValue("ToggleView")===""?n.getContentAreaContainer():n.getContainer()),h=()=>{const N=Er(g());return A.some(N)},C=N=>{h().each(L=>{He(N,j=>{Kn(j.element,"width"),ia(j.element)>L.width&&gn(j.element,"width",L.width+"px")})})};return{open:(N,L,j)=>{const Z=()=>{const pe=Ue=>{An.remove(Ue,ae),Y()},Ee=(Ue,Qe)=>{ci(Ue.element).length===0?Oe(Ue,Qe):ht(Ue,Qe)},Oe=(Ue,Qe)=>{js.hide(Ue),l.clear(),Qe&&n.focus()},ht=(Ue,Qe)=>{Qe&&Xt.focusIn(Ue)};l.on(Ue=>{L();const Qe=j();pe(Ue),Ee(Ue,Qe)})},ne=()=>!ey(n)||!d.header.isPositionedAtTop(),ae=p($O.sketch({text:N.text,level:bt(["success","error","warning","warn","info"],N.type)?N.type:void 0,progress:N.progressBar===!0,icon:N.icon,onAction:Z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(l.isSet()){const pe=y(ae);l.on(Ee=>{An.append(Ee,pe),js.reposition(Ee),ae.hasConfigured(Ms)&&Ms.refresh(Ee),C(Ee.components())})}else{const pe=p(js.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:nt([Xt.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),An.config({}),...ne()?[Ms.config({contextual:{lazyContext:()=>A.some(Er(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Ue=>Yg(n,Ue.element).map(Ke=>({bounds:xb(Ke),optScrollEnv:A.some({currentScrollTop:Ke.element.dom.scrollTop,scrollElmTop:xa(Ke.element).top})})).getOrThunk(()=>({bounds:Fa(),optScrollEnv:A.none()}))})]:[]])})),Ee=y(ae),Oe={maxHeightFunction:Ng()},ht={...d.anchors.banner(),overrides:Oe};l.set(pe),a.add(pe),js.showWithinBounds(pe,Ee,{anchor:ht},h)}In(N.timeout)&&N.timeout>0&&NT.setEditorTimeout(n,()=>{Z()},N.timeout);const Y=()=>{l.on(pe=>{js.reposition(pe),pe.hasConfigured(Ms)&&Ms.refresh(pe),C(pe.components())})};return{close:Z,reposition:Y,text:pe=>{$O.updateText(ae,pe)},settings:N,getEl:()=>ae.element.dom,progressBar:{value:pe=>{$O.updateProgress(ae,pe)}}}},close:N=>{N.close()},getArgs:N=>N.settings}};const KV={setup:(n,s)=>{const a=(d,g)=>{tn(d,oa(),{raw:g})},l=()=>n.getMenu().bind(So.getHighlighted);s.on("keydown",d=>{const g=d.which;n.isActive()&&(n.isMenuOpen()?g===13?(l().each(Xh),d.preventDefault()):g===40?(l().fold(()=>{n.getMenu().each(So.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&l().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&n.cancelIfNecessary())}),s.on("NodeChange",()=>{n.isActive()&&!n.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&n.cancelIfNecessary()})}};var IO;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(IO||(IO={}));var Zd=IO;const FO="tox-menu-nav__js",Px="tox-collection__item",Ep="tox-swatch",Sb={normal:FO,color:Ep},LO="tox-collection__item--enabled",C6="tox-collection__group-heading",HO="tox-collection__item-icon",WT="tox-collection__item-image",YV="tox-collection__item-image-selector",Qg="tox-collection__item-label",wb="tox-collection__item-accessory",x6="tox-collection__item-caret",XV="tox-collection__item-checkmark",Eb="tox-collection__item--active",S6="tox-collection__item-container",QV="tox-collection__item-container--column",w6="tox-collection__item-container--row",JV="tox-collection__item-container--align-right",eU="tox-collection__item-container--align-left",ZT="tox-collection__item-container--valign-top",E6="tox-collection__item-container--valign-middle",tU="tox-collection__item-container--valign-bottom",zO=n=>Vt(Sb,n).getOr(FO),nU=n=>n==="color"?"tox-swatches":"tox-menu",VO=n=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:nU(n),tieredMenu:"tox-tiered-menu"}),Lf=n=>{const s=VO(n);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:zO(n)}},eQ=(n,s,a)=>{const l=VO(a);return{tag:"div",classes:en([[l.menu,`tox-menu-${s}-column`],n?[l.hasIcons]:[]])}},UO=[qg.parts.items({})],Bx=(n,s,a)=>{const l=VO(a);return{dom:{tag:"div",classes:en([[l.tieredMenu]])},markers:Lf(a)}},T6=Ct("refetch-trigger-event"),k6=Ct("redirect-menu-item-interaction"),A6="tox-menu__searcher",$x=n=>Bo(n.element,`.${A6}`).bind(s=>n.getSystem().getByDom(s).toOptional()),_6=$x,oU=(n,s)=>{_t.setValue(n,s.fetchPattern),n.element.dom.selectionStart=s.selectionStart,n.element.dom.selectionEnd=s.selectionEnd},jO=n=>{const s=_t.getValue(n),a=n.element.dom.selectionStart,l=n.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:l}},O6=(n,s)=>{Jr(s.element,"id").each(a=>ln(n.element,"aria-activedescendant",a))},sU=n=>{const s=(d,g)=>(g.cut(),A.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return tn(d,k6,h),A.some(!0)},l="searcher-events";return{dom:{tag:"div",classes:[Px]},components:[Ff.sketch({inputClasses:[A6,"tox-textfield"],inputAttributes:{...n.placeholder.map(d=>({placeholder:n.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:nt([xn(l,[Ie(Mu(),d=>{Wn(d,T6)}),Ie(oa(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),Xt.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[l,Xt.name()]}})]}},GT="tox-collection--results__js",Ix=n=>n.dom?{...n,dom:{...n.dom,attributes:{...n.dom.attributes??{},id:Ct("aria-item-search-result-id"),"aria-selected":"false"}}}:n,WO="Use arrow keys to navigate.",ZO=(n,s)=>a=>{const l=Fn(a,s);return ye(l,d=>({dom:n,components:d}))},GO=n=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":Nc.translate(WO)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[qg.parts.items({preprocess:n!=="auto"?ZO({tag:"div",classes:["tox-swatches__row"]},n):Yt})]}]}),rU=n=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[qg.parts.items({preprocess:n!=="auto"?ZO({tag:"div",classes:["tox-image-selector__row"]},n):Yt})]}]}),qO=n=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[qg.parts.items({preprocess:ZO({tag:"div",classes:["tox-collection__group"]},n)})]}),D6=(n,s)=>{const a=[];let l=[];return He(n,(d,g)=>{s(d,g)?(l.length>0&&a.push(l),l=[],(mo(d.dom,"innerHtml")||d.components&&d.components.length>0)&&l.push(d)):l.push(d)}),l.length>0&&a.push(l),ye(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},KO=(n,s,a)=>qg.parts.items({preprocess:l=>{const d=ye(l,a);return n!=="auto"&&n>1?ZO({tag:"div",classes:["tox-collection__group"]},n)(d):D6(d,(g,h)=>s[h].type==="separator")}}),R6=n=>cn(n,s=>s.type==="widget"),YO=(n,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...R6(s)?{"aria-label":Nc.translate(WO)}:{}}},components:[KO(n,s,Yt)]}),N6=(n,s,a=!0)=>{const l=Ct("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",GT].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:l}},components:[KO(n,s,Ix)]}},Jg=(n,s,a)=>{const l=Ct("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[sU({i18n:Nc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...n===1?["tox-collection--list"]:["tox-collection--grid"],GT],attributes:{id:l}},components:[KO(n,s,Ix)]}]}},Tb=(n,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[qg.parts.items({preprocess:a=>D6(a,(l,d)=>n[d].type==="separator")})]}),Fx=n=>cn(n,s=>"icon"in s&&s.icon!==void 0),Im=n=>(console.error(Nh(n)),console.log(n),A.none()),M6=(n,s,a,l,d)=>{const g=Tb(a);return{value:n,dom:g.dom,components:g.components,items:a}},XO=(n,s,a,l,d)=>{const g=()=>d.menuType!=="searchable"?YO(l,a):d.searchMode.searchMode==="search-with-field"?Jg(l,a,d.searchMode):N6(l,a);if(d.menuType==="color"){const h=GO(l);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&l!=="auto"){const h=rU(l);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&l==="auto"){const h=YO(l,a);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&l!=="auto"){const h=qO(l);return{value:n,dom:h.dom,components:h.components,items:a}}else return{value:n,dom:eQ(s,l,d.menuType),components:UO,items:a}},nr=Ks("type"),QO=Ks("name"),qT=Ks("label"),eh=Ks("text"),P6=Ks("title"),JO=Ks("icon"),aU=Ks("url"),ny=Ks("value"),cU=gl("fetch"),lU=gl("getSubmenuItems"),Tp=gl("onAction"),iU=gl("onItemAction"),kb=ls("onSetup",()=>U),uU=Ys("name"),th=Ys("text"),dU=Ys("role"),Yu=Ys("icon"),Ab=Ys("tooltip"),B6=Ys("chevronTooltip"),Lx=Ys("label"),eD=Ys("shortcut"),mU=Xi("select"),oy=Vr("active",!1),fU=Vr("borderless",!1),Xu=Vr("enabled",!0),Hx=Vr("primary",!1),$6=n=>we("columns",n),tD=we("meta",{}),nD=ls("onAction",U),_b=n=>Us("type",n),oD=n=>na("name","name",d1(()=>Ct(`${n}-name`)),zr),I6=n=>na("value","value",d1(()=>Ct(`${n}-value`)),bi()),sy=[nr,eh,Yi("level",["info","warn","error","success"]),JO,we("url","")],gU=on(sy),hU=n=>[nr,n],pU=[nr,eh,Xu,oD("button"),Yu,fU,p2("buttonType",["primary","secondary","toolbar"]),Hx,Us("context","mode:design")],KT=on(pU),Qc=[nr,QO],Qu=Qc.concat([Lx]),F6=Qc.concat([qT,Xu,Us("context","mode:design")]),bU=on(F6),vU=zn,yU=Qu.concat([$6("auto"),Us("context","mode:design")]),CU=on(yU),L6=Rh([ny,eh,JO]),H6=Qu.concat([Us("storageKey","default"),Us("context","mode:design")]),xU=on(H6),SU=zr,EU=on(Qu),z6=zr,V6=Qc.concat([Us("tag","textarea"),Ks("scriptId"),Ks("scriptUrl"),Xi("onFocus"),GS("settings",void 0)]),U6=Qc.concat([Us("tag","textarea"),gl("init")]),TU=xd(n=>Ls("customeditor.old",fl(U6),n).orThunk(()=>Ls("customeditor.new",fl(V6),n))),kU=zr,kp=[Xu,th,dU,eD,I6("menuitem"),tD,Us("context","mode:design")],AU=on([nr,QO].concat(kp)),_U=zn,ry=[oD("button"),Yu,wc("align","end",["start","end"]),Hx,Xu,p2("buttonType",["primary","secondary"]),Us("context","mode:design")],Fm=[...ry,eh],YT=[Yi("type",["submit","cancel","custom"]),...Fm],Ju=[Yi("type",["menu"]),th,Ab,Yu,Wc("items",AU),...ry],OU=[...ry,Yi("type",["togglebutton"]),Ab,Yu,th,Vr("active",!1)],XT=xc("type",{submit:YT,cancel:YT,custom:YT,menu:Ju,togglebutton:OU}),DU=Qu.concat([Us("context","mode:design"),Ys("dropAreaLabel"),Ys("buttonLabel"),Ys("allowedFileTypes"),h0("allowedFileExtensions",zr)]),Ob=on(DU),RU=jS(),sD=n=>[nr,p1("columns"),n],rD=[nr,Ks("html"),wc("presets","presentation",["presentation","document"]),ls("onInit",U),Vr("stretched",!1)],NU=on(rD),MU=Qu.concat([Vr("border",!1),Vr("sandboxed",!0),Vr("streamContent",!1),Vr("transparent",!0)]),Db=on(MU),j6=zr,W6=on(Qc.concat([Ys("height")])),PU=on([Ks("url"),Mh("zoom"),Mh("cachedWidth"),Mh("cachedHeight")]),aD=Qu.concat([Ys("inputMode"),Ys("placeholder"),Vr("maximized",!1),Xu,Us("context","mode:design")]),Z6=on(aD),cD=zr,G6=n=>[nr,qT,n,wc("align","start",["start","center","end"]),Ys("for")],q6=[eh,ny],zx=[eh,Wc("items",vg("items",()=>K6))],K6=Dh([on(q6),on(zx)]),BU=Qu.concat([Wc("items",K6),Xu,Us("context","mode:design")]),$U=on(BU),IU=zr,lD=Qu.concat([ZS("items",[eh,ny]),b1("size",1),Xu,Us("context","mode:design")]),FU=on(lD),iD=zr,LU=Qu.concat([Vr("constrain",!0),Xu,Us("context","mode:design")]),Vx=on(LU),Y6=on([Ks("width"),Ks("height")]),X6=Qc.concat([qT,b1("min",0),b1("max",0)]),HU=on(X6),zU=l2,VU=[nr,Wc("header",zr),Wc("cells",tr(zr))],UU=on(VU),QT=Qu.concat([Ys("placeholder"),Vr("maximized",!1),Xu,Us("context","mode:design"),b2("spellcheck")]),Q6=on(QT),jU=zr,uD=[Us("buttonType","default"),Ys("text"),Ys("tooltip"),Ys("icon"),Ul("search",!1,Dh([zn,on([Ys("placeholder")])],n=>vn(n)?n?A.some({placeholder:A.none()}):A.none():A.some(n))),gl("fetch"),ls("onSetup",()=>U),Us("context","mode:design")],Ap=on([nr,...uD]),dD=n=>Ls("menubutton",Ap,n),ay=[Yi("type",["directory","leaf"]),P6,Ks("id"),Nu("menu",Ap),Ys("customStateIcon"),Ys("customStateIconTooltip")],mD=on(ay),WU=ay.concat([Wc("children",vg("children",()=>bg("type",{directory:J6,leaf:mD})))]),J6=on(WU),Rb=bg("type",{directory:J6,leaf:mD}),e$=[nr,Wc("items",Rb),Xi("onLeafAction"),Xi("onToggleExpand"),df("defaultExpandedIds",[],zr),Ys("defaultSelectedId")],ZU=on(e$),t$=Qu.concat([wc("filetype","file",["image","media","file"]),Xu,Ys("picker_text"),Us("context","mode:design")]),GU=on(t$),qU=on([ny,tD]),fD=n=>na("items","items",vi(),tr(xd(s=>Ls(`Checking item of ${n}`,JT,s).fold(a=>Wt.error(Nh(a)),a=>Wt.value(a))))),JT=h1(()=>bg("type",{alertbanner:gU,bar:on(hU(fD("bar"))),button:KT,checkbox:bU,colorinput:xU,colorpicker:EU,dropzone:Ob,grid:on(sD(fD("grid"))),iframe:Db,input:Z6,listbox:$U,selectbox:FU,sizeinput:Vx,slider:HU,textarea:Q6,urlinput:GU,customeditor:TU,htmlpanel:NU,imagepreview:W6,collection:CU,label:on(G6(fD("label"))),table:UU,tree:ZU,panel:n$})),KU=[nr,we("classes",[]),Wc("items",JT)],n$=on(KU),YU=[oD("tab"),P6,Wc("items",JT)],XU=[nr,ZS("tabs",YU)],QU=on(XU),JU=Fm,ej=XT,tj=on([Ks("title"),jc("body",bg("type",{panel:n$,tabpanel:QU})),Us("size","normal"),df("buttons",[],ej),we("initialData",{}),ls("onAction",U),ls("onChange",U),ls("onSubmit",U),ls("onClose",U),ls("onCancel",U),ls("onTabChange",U)]),o$=n=>Ls("dialog",tj,n),nj=on([Yi("type",["cancel","custom"]),...JU]),oj=on([Ks("title"),Ks("url"),Mh("height"),Mh("width"),h0("buttons",nj),ls("onAction",U),ls("onCancel",U),ls("onClose",U),ls("onMessage",U)]),sj=n=>Ls("dialog",oj,n),gD=n=>et(n)?[n].concat(xe(Ya(n),gD)):$n(n)?xe(n,gD):[],rj=n=>De(n.type)&&De(n.name),aj={checkbox:vU,colorinput:SU,colorpicker:z6,dropzone:RU,input:cD,iframe:j6,imagepreview:PU,selectbox:iD,sizeinput:Y6,slider:zU,listbox:IU,size:Y6,textarea:jU,urlinput:qU,customeditor:kU,collection:L6,togglemenuitem:_U},s$=n=>A.from(aj[n.type]),r$=n=>Ln(gD(n),rj),cj=n=>{const s=r$(n),a=xe(s,l=>s$(l).fold(()=>[],d=>[jc(l.name,d)]));return on(a)},Ux=n=>{const s=Ci(o$(n)),a=cj(n),l=n.initialData??{};return{internalDialog:s,dataValidator:a,initialData:l}},Nb={open:(n,s)=>{const a=Ux(s);return n(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(n,s)=>{const a=Ci(sj(s));return n(a)},redial:n=>Ux(n)},a$=on([nr,th]),lj=n=>Ls("separatormenuitem",a$,n),ij=on([_b("autocompleteitem"),oy,Xu,tD,ny,th,Yu]),uj=n=>Ls("Autocompleter.Separator",a$,n),dj=n=>Ls("Autocompleter.Item",ij,n),cy=[Xu,Ab,Yu,th,kb,Us("context","mode:design")],mj=on([nr,Tp,eD].concat(cy)),Hf=n=>Ls("toolbarbutton",mj,n),hD=[oy].concat(cy),fj=on(hD.concat([nr,Tp,eD])),pD=n=>Ls("ToggleButton",fj,n),e4=[ls("predicate",an),wc("scope","node",["node","editor"]),wc("position","selection",["node","selection","line"])],gj=cy.concat([_b("contextformbutton"),Us("align","end"),Hx,Tp,Sc("original",Yt)]),hj=hD.concat([_b("contextformbutton"),Us("align","end"),Hx,Tp,Sc("original",Yt)]),pj=cy.concat([_b("contextformbutton")]),bD=hD.concat([_b("contextformtogglebutton")]),c$=xc("type",{contextformbutton:gj,contextformtogglebutton:hj}),jx=[Lx,Wc("commands",c$),Nu("launch",xc("type",{contextformbutton:pj,contextformtogglebutton:bD})),ls("onInput",U),ls("onSetup",U)],t4=[...e4,...jx,Yi("type",["contextform"]),ls("initValue",oe("")),Ys("placeholder")],ly=[...e4,...jx,Yi("type",["contextsliderform"]),ls("initValue",oe(0)),ls("min",oe(0)),ls("max",oe(100))],bj=[...e4,...jx,Yi("type",["contextsizeinputform"]),ls("initValue",oe({width:"",height:""}))],l$=xc("type",{contextform:t4,contextsliderform:ly,contextsizeinputform:bj}),vj=n=>Ls("ContextForm",l$,n),iy=cy.concat([_b("contexttoolbarbutton")]),yj=on([_b("contexttoolbar"),Zc("launch",iy),jc("items",Dh([zr,Rh([Ys("name"),Ys("label"),Wc("items",zr)])]))].concat(e4)),n4=n=>({name:n.name.getOrUndefined(),label:n.label.getOrUndefined(),items:n.items}),vD=n=>({...n,launch:n.launch.getOrUndefined(),items:De(n.items)?n.items:ye(n.items,n4)}),Cj=n=>Ls("ContextToolbar",yj,n),xj=[nr,Ks("src"),Ys("alt"),df("classes",[],zr)],Sj=on(xj),yD=[nr,eh,uU,df("classes",["tox-collection__item-label"],zr)],wj=on(yD),i$=h1(()=>bg("type",{cardimage:Sj,cardtext:wj,cardcontainer:Ej})),Ej=on([nr,Us("direction","horizontal"),Us("align","left"),Us("valign","middle"),Wc("items",i$)]),u$=on([nr,Lx,Wc("items",i$),kb,nD].concat(kp)),CD=n=>Ls("cardmenuitem",u$,n),Tj=on([nr,oy,Yu,Lx].concat(kp)),kj=n=>Ls("choicemenuitem",Tj,n),xD=[nr,Ks("fancytype"),nD],d$=[we("initData",{})].concat(xD),Aj=[Xi("select"),mf("initData",{},[Vr("allowCustomColors",!0),Us("storageKey","default"),h0("colors",bi())])].concat(xD),SD=[Xi("select"),Sd("initData",[p1("columns"),df("items",[],bi())])].concat(xD),m$=xc("fancytype",{inserttable:d$,colorswatch:Aj,imageselect:SD}),f$=n=>Ls("fancymenuitem",m$,n),_j=on([nr,oy,aU,Lx,Ab].concat(kp)),Oj=on([nr,oy,JO,qT,Ab,ny].concat(kp)),g$=n=>Ls("imagemenuitem",_j,n),wD=n=>Ls("resetimageitem",Oj,n),Dj=on([nr,kb,nD,Yu].concat(kp)),Rj=n=>Ls("menuitem",Dj,n),Nj=on([nr,lU,kb,Yu].concat(kp)),Mj=n=>Ls("nestedmenuitem",Nj,n),Pj=on([nr,Yu,oy,kb,Tp].concat(kp)),Bj=n=>Ls("togglemenuitem",Pj,n),$j=on([Yu,Ab,ls("onShow",U),ls("onHide",U),kb]),ED=n=>Ls("sidebar",$j,n),Ij=on([nr,jc("items",Dh([Rh([QO,Wc("items",zr)]),zr]))].concat(cy)),TD=n=>Ls("GroupToolbarButton",Ij,n),Fj=on([nr,Ab,B6,Yu,th,mU,cU,kb,wc("presets","normal",["normal","color","listpreview"]),$6(1),Tp,iU,Us("context","mode:design")]),Lj=n=>Ls("SplitButton",Fj,n),o4=[th,Yu,Ys("tooltip"),wc("buttonType","secondary",["primary","secondary"]),Vr("borderless",!1),gl("onAction"),Us("context","mode:design")],Hj=[...o4,eh,Yi("type",["button"])],zj=[...o4,Vr("active",!1),Yi("type",["togglebutton"])],kD={button:Hj,togglebutton:zj},Vj=[Yi("type",["group"]),df("buttons",[],xc("type",kD))],Uj=xc("type",{...kD,group:Vj}),jj=on([df("buttons",[],Uj),gl("onShow"),gl("onHide")]),Wj=n=>Ls("view",jj,n),AD=(n,s,a)=>{const l=Hr(n.element,"."+a);if(l.length>0){const d=po(l,g=>{const h=g.dom.getBoundingClientRect().top,C=l[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(l.length);return A.some({numColumns:d,numRows:Math.ceil(l.length/d)})}else return A.none()},h$=(n,s)=>nt([xn(n,s)]),uy={namedEvents:h$,unnamedEvents:n=>h$(Ct("unnamed-events"),n)},Lm={item:n=>Ft.config({disabled:n,disableClass:"tox-collection__item--state-disabled"}),button:n=>Ft.config({disabled:n}),splitButton:n=>Ft.config({disabled:n,disableClass:"tox-tbtn--disabled"}),toolbarButton:n=>Ft.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},Wx=(n,s)=>{const a=n.getApi(s);return l=>{l(a)}},Hm=(n,s)=>ps(a=>{Xe(n.onBeforeSetup)&&n.onBeforeSetup(a),Wx(n,a)(d=>{const g=n.onSetup(d);Xe(g)&&s.set(g)})}),_p=(n,s)=>ou(a=>Wx(n,a)(s.get())),s4=(n,s,a)=>ou(l=>(a.set(_t.getValue(l)),Wx(n,l)(s.get()))),_D="silver.uistate",Mb="setDisabled",Gj="setEnabled",OD="init",qj=["switchmode",OD],Zx=(n,s)=>{const a=n.mainUi.outerContainer,l=[n.mainUi.mothership,...n.uiMotherships];s===Mb&&He(l,d=>{d.broadcastOn([_d()],{target:a.element})}),He(l,d=>{d.broadcastOn([_D],s)})},p$=(n,s)=>{n.on("init SwitchMode",a=>{Zx(s,a.type)}),n.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const l=a.state?Mb:OD;Zx(s,l),a.state||n.nodeChanged()}}),n.on("NodeChange",a=>{const l=n.ui.isEnabled()?a.type:Mb;Zx(s,l)}),RB(n)&&n.mode.set("readonly")},Cr=n=>Rc.config({channels:{[_D]:{onReceive:(s,a)=>{if(a===Mb||a===Gj){Ft.set(s,a===Mb);return}const{contextType:l,shouldDisable:d}=n();l==="mode"&&!bt(qj,a)||Ft.set(s,d)}}}}),nh=(n,s)=>Ef((a,l)=>{Wx(n,a)(n.onAction),!n.triggersSubmenu&&s===Zd.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Wn(a,C0()),l.stop())}),Kj={[Ea()]:["disabling","alloy.base.behaviour","toggling","item-events"]},zf=_l,Pb=(n,s,a,l)=>{const d=Pt(U);return{type:"item",dom:s.dom,components:zf(s.optComponents),data:n.data,eventOrder:Kj,hasSubmenu:n.triggersSubmenu,itemBehaviours:nt([xn("item-events",[nh(n,a),Hm(n,d),_p(n,d)]),Lm.item(()=>!n.enabled||l.checkUiComponentContext(n.context).shouldDisable),Cr(()=>l.checkUiComponentContext(n.context)),An.config({})].concat(n.itemBehaviours))}},oh=n=>({value:n.value,meta:{text:n.text.getOr(""),...n.meta}}),Yj=(n,s)=>{const a=at.fromTag("div");jo(a,"tox-image-selector-loading-spinner");const l=g=>{jo(g,"tox-image-selector-loading-spinner-wrapper"),Lr(g,a)},d=g=>{Rs(g,"tox-image-selector-loading-spinner-wrapper"),cl(a)};return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...n.checkMark.toArray()],behaviours:nt([...n.behaviours??[],xn("render-image-events",[ps(g=>{l(g.element),Bo(g.element,"img").each(h=>{ll(h).catch(C=>{console.error(C)}).finally(()=>{d(g.element)})})})])])}},Xj=(n,s)=>Yj(s,n),DD=n=>{const s=qv.os.isMacOS()||qv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=n.split("+"),h=ye(g,C=>{const x=C.toLowerCase().trim();return mo(d,x)?d[x]:C});return s?h.join(""):h.join("+")},r4=(n,s,a=[HO])=>mu(n,{tag:"div",classes:a},s),b$=n=>({dom:{tag:"div",classes:[Qg]},components:[Ss(Nc.translate(n))]}),a4=(n,s)=>({dom:{tag:"div",classes:s,innerHtml:n}}),RD=(n,s)=>({dom:{tag:"div",classes:[Qg]},components:[{dom:{tag:n.tag,styles:n.styles},components:[Ss(Nc.translate(s))]}]}),ND=n=>({dom:{tag:"div",classes:[wb]},components:[Ss(DD(n))]}),MD=n=>r4("checkmark",n,[XV]),fu=n=>r4("chevron-right",n,[x6]),Qj=n=>r4("chevron-down",n,[x6]),Jj=(n,s)=>{const a=n.direction==="vertical"?QV:w6,l=n.align==="left"?eU:JV;return{dom:{tag:"div",classes:[S6,a,l,(()=>{switch(n.valign){case"top":return ZT;case"middle":return E6;case"bottom":return tU}})()]},components:s}},v$=(n,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:n,alt:a.getOr("")}}}),y$=(n,s,a)=>{const l="custom",d="remove",g=n.value,h=n.iconContent.map(T=>jT(T,s.icons,a)),C=n.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=Ep,_=h.getOr(""),N={tag:"div",attributes:C,classes:[T]};return g===l?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:_}:g===d?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:_}:un(g)?{...N,attributes:{...N.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:_}:N})(),optComponents:[]}},PD=(n,s)=>{const a=n.map(l=>({attributes:{id:Ct("menu-item"),"aria-label":Nc.translate(l)}})).getOr({});return{tag:"div",classes:[FO,Px].concat(s),...a}},C$=n=>({dom:{tag:"label"},components:[Ss(n)]}),eW=(n,s,a,l)=>{const d={tag:"div",classes:[HO]},g=L=>mu(L,d,s.icons,l),h=()=>A.some({dom:d}),C=a?n.iconContent.map(g).orThunk(h):A.none(),x=n.checkMark,T=A.from(n.meta).fold(()=>b$,L=>mo(L,"style")?jt(RD,L.style):b$),_=n.htmlContent.fold(()=>n.textContent.map(T),L=>A.some(a4(L,[Qg])));return{dom:PD(n.ariaLabel,[]),optComponents:[C,_,n.shortcutContent.map(ND),x,n.caret,n.labelContent.map(C$)]}},tW=n=>({dom:PD(n.ariaLabel,[YV]),optComponents:[A.some(Xj(n.iconContent.getOrDie(),{tag:"div",classes:[WT],checkMark:n.checkMark})),n.labelContent.map(C$)]}),dy=(n,s,a,l=A.none())=>n.presets==="color"?y$(n,s,l):n.presets==="img"?tW(n):eW(n,s,a,l),x$=(n,s,a)=>Vt(n,"tooltipWorker").map(l=>[bs.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Ng}}),mode:"follow-highlight",onShow:(d,g)=>{l(h=>{bs.setComponents(d,[Gl({element:at.fromDom(h)})])})}})]).getOrThunk(()=>a.map(l=>[bs.config({...s.providers.tooltips.getConfig({tooltipText:l}),mode:"follow-highlight"})]).getOr([])),nW=n=>Gv.DOM.encode(n),BD=(n,s)=>{const a=Nc.translate(n),l=nW(a);if(s.length>0){const d=new RegExp(fh(s),"gi");return l.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return l},oW=(n,s,a,l,d,g,h,C=!0)=>{const x=dy({presets:l,textContent:A.none(),htmlContent:a?n.text.map(_=>BD(_,s)):A.none(),ariaLabel:n.text,labelContent:A.none(),iconContent:n.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:n.value},h.providers,C,n.icon),T=n.text.filter(_=>!a&&_!=="");return Pb({context:"mode:design",data:oh(n),enabled:n.enabled,getApi:oe({}),onAction:_=>d(n.value,n.meta),onSetup:oe(U),triggersSubmenu:!1,itemBehaviours:x$(n,h,T)},x,g,h.providers)},S$=(n,s)=>ye(n,a=>{switch(a.type){case"cardcontainer":return Jj(a,S$(a.items,s));case"cardimage":return v$(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>bt(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return a4(BD(a.text,d),a.classes)}}),sW=(n,s,a,l)=>{const d=h=>({isEnabled:()=>!Ft.isDisabled(h),setEnabled:C=>{Ft.set(h,!C),He(Hr(h.element,"*"),x=>{h.getSystem().getByDom(x).each(T=>{T.hasConfigured(Ft)&&Ft.set(T,!C)})})}}),g={dom:PD(n.label,[]),optComponents:[A.some({dom:{tag:"div",classes:[S6,w6]},components:S$(n.items,l)})]};return Pb({context:"mode:design",data:oh({text:A.none(),...n}),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(l.itemBehaviours).getOr([])},g,s,a.providers)},$D=(n,s,a,l,d,g,h,C=!0)=>{const x=N=>({setActive:L=>{eo.set(N,L)},isActive:()=>eo.isOn(N),isEnabled:()=>!Ft.isDisabled(N),setEnabled:L=>Ft.set(N,!L)}),T=dy({presets:a,textContent:s?n.text:A.none(),htmlContent:A.none(),labelContent:n.label,ariaLabel:n.text,iconContent:n.icon,shortcutContent:s?n.shortcut:A.none(),checkMark:s?A.some(MD(h.icons)):A.none(),caret:A.none(),value:n.value},h,C),_=n.text.filter(oe(!s)).map(N=>bs.config(h.tooltips.getConfig({tooltipText:h.translate(N)})));return zo(Pb({context:n.context,data:oh(n),enabled:n.enabled,getApi:x,onAction:N=>l(n.value),onSetup:N=>(N.setActive(d),U),triggersSubmenu:!1,itemBehaviours:[..._.toArray()]},T,g,h),{toggling:{toggleClass:LO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},c4=n=>({value:Bb(n)}),l4=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,w$=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,i4=n=>l4.test(n)||w$.test(n),Bb=n=>em(n,"#").toUpperCase(),E$=n=>i4(n)?A.some({value:Bb(n)}):A.none(),T$=n=>({value:n.value.replace(l4,(a,l,d,g)=>l+l+d+d+g+g)}),k$=n=>{const s=T$(n),a=w$.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},ID=n=>{const s=n.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Gx=n=>{const s=ID(n.red)+ID(n.green)+ID(n.blue);return c4(s)},Op=(n,s,a)=>({hue:n,saturation:s,value:a}),FD=n=>{let s=0,a=0,l=0;const d=n.red/255,g=n.green/255,h=n.blue/255,C=Math.min(d,Math.min(g,h)),x=Math.max(d,Math.max(g,h));if(C===x)return l=C,Op(0,0,l*100);const T=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-T/(x-C)),a=(x-C)/x,l=x,Op(Math.round(s),Math.round(a*100),Math.round(l*100))},A$=Math.min,LD=Math.max,qx=Math.round,HD=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,_$=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ga=(n,s,a,l)=>({red:n,green:s,blue:a,alpha:l}),u4=n=>{const s=parseInt(n,10);return s.toString()===n&&s>=0&&s<=255},O$=n=>{let s,a,l;const d=(n.hue||0)%360;let g=n.saturation/100,h=n.value/100;if(g=LD(0,A$(g,1)),h=LD(0,A$(h,1)),g===0)return s=a=l=qx(255*h),ga(s,a,l,1);const C=d/60,x=h*g,T=x*(1-Math.abs(C%2-1)),_=h-x;switch(Math.floor(C)){case 0:s=x,a=T,l=0;break;case 1:s=T,a=x,l=0;break;case 2:s=0,a=x,l=T;break;case 3:s=0,a=T,l=x;break;case 4:s=T,a=0,l=x;break;case 5:s=x,a=0,l=T;break;default:s=a=l=0}return s=qx(255*(s+_)),a=qx(255*(a+_)),l=qx(255*(l+_)),ga(s,a,l,1)},Kx=n=>{const s=k$(n),a=parseInt(s[1],16),l=parseInt(s[2],16),d=parseInt(s[3],16);return ga(a,l,d,1)},zD=(n,s,a,l)=>{const d=parseInt(n,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(l);return ga(d,g,h,C)},VD=n=>{const s=HD.exec(n);if(s!==null)return A.some(zD(s[1],s[2],s[3],"1"));const a=_$.exec(n);return a!==null?A.some(zD(a[1],a[2],a[3],a[4])):A.none()},D$=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,R$=ga(255,0,0,1),N$=n=>FD(Kx(n)),zm=n=>Gx(O$(n)),UD=n=>E$(n).orThunk(()=>VD(n).map(Gx)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=n,a.fillRect(0,0,1,1);const l=a.getImageData(0,0,1,1).data,d=l[0],g=l[1],h=l[2],C=l[3];return Gx(ga(d,g,h,C))}),M$=n=>{n.dispatch("SkinLoaded")},d4=(n,s)=>{n.dispatch("SkinLoadError",s)},jD=n=>{n.dispatch("ResizeEditor")},WD=(n,s)=>{n.dispatch("ResizeContent",s)},rW=(n,s)=>{n.dispatch("ScrollContent",s)},P$=(n,s)=>{n.dispatch("TextColorChange",s)},aW=(n,s)=>{n.dispatch("AfterProgressState",{state:s})},cW=(n,s)=>n.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),lW=(n,s)=>{n.dispatch("ToggleToolbarDrawer",{state:s})},iW=(n,s)=>{n.dispatch("StylesTextUpdate",s)},B$=(n,s)=>{n.dispatch("AlignTextUpdate",s)},uW=(n,s)=>{n.dispatch("FontSizeTextUpdate",s)},Vf=(n,s)=>{n.dispatch("FontSizeInputTextUpdate",s)},m4=(n,s)=>{n.dispatch("BlocksTextUpdate",s)},dW=(n,s)=>{n.dispatch("FontFamilyTextUpdate",s)},mW=n=>{n.dispatch("ToggleSidebar")},$$=n=>{n.dispatch("ToggleView")},ZD=n=>{n.dispatch("ContextToolbarClose")},GD=n=>{n.dispatch("ContextFormSlideBack")},$b=(n,s)=>()=>{n(),s()},Da=(n,s=St)=>Dp(n,"NodeChange",a=>{a.setEnabled(n.selection.isEditable()&&s())}),Yx=(n,s)=>a=>{const l=_s(),d=()=>{a.setActive(n.formatter.match(s));const g=n.formatter.formatChanged(s,a.setActive);l.set(g)};return n.initialized?d():n.once("init",d),()=>{n.off("init",d),l.clear()}},Xx=(n,s)=>a=>{const l=Da(n)(a),d=Yx(n,s)(a);return()=>{l(),d()}},Dp=(n,s,a)=>l=>{const d=()=>a(l),g=()=>{a(l),n.on(s,d)};return n.initialized?g():n.once("init",g),()=>{n.off("init",g),n.off(s,d)}},f4=n=>s=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("mceToggleFormat",!1,s.format)})},xl=(n,s)=>()=>n.execCommand(s);var Ib=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const I$={},F$=(n,s=10)=>{const a=Ib.getItem(n),l=De(a)?JSON.parse(a):[],g=(T=>s-T.length<0?T.slice(0,s):T)(l),h=T=>{de(g,T).each(C),g.unshift(T),g.length>s&&g.pop(),Ib.setItem(n,JSON.stringify(g))},C=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},qD=n=>Vt(I$,n).getOrThunk(()=>{const s=`tinymce-custom-colors-${n}`,a=Ib.getItem(s);if(pn(a)){const d=Ib.getItem("tinymce-custom-colors");Ib.setItem(s,un(d)?d:"[]")}const l=F$(s,10);return I$[n]=l,l}),fW=n=>ye(qD(n).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),KD=(n,s)=>{qD(n).add(s)},g4="forecolor",YD="hilitecolor",L$=5,gW=n=>XD(n.map((s,a)=>a%2===0?"#"+UD(s).value:s)),XD=n=>{const s=[];for(let a=0;a<n.length;a+=2)s.push({text:n[a+1],value:n[a],icon:"checkmark",type:"choiceitem"});return s},Sl=n=>s=>s.options.get(n),QD="#000000",H$=n=>{const s=n.options.register,a=g=>lt(g,De)?{value:gW(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},l=g=>lt(g,De)?{value:XD(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>In(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:l}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:JD(n)}),s("color_cols_foreground",{processor:d,default:z$(n,g4)}),s("color_cols_background",{processor:d,default:z$(n,YD)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:QD}),s("color_default_background",{processor:"string",default:QD})},h4=(n,s)=>s===g4&&n.options.isSet("color_map_foreground")?Sl("color_map_foreground")(n):s===YD&&n.options.isSet("color_map_background")?Sl("color_map_background")(n):n.options.isSet("color_map_raw")?Sl("color_map_raw")(n):Sl("color_map")(n),JD=(n,s="default")=>Math.max(L$,Math.ceil(Math.sqrt(h4(n,s).length))),z$=(n,s)=>{const a=Sl("color_cols")(n),l=JD(n,s);return a===JD(n)?l:a},V$=(n,s="default")=>Math.round(s===g4?Sl("color_cols_foreground")(n):s===YD?Sl("color_cols_background")(n):Sl("color_cols")(n)),eR=Sl("custom_colors"),hW=Sl("color_default_foreground"),U$=Sl("color_default_background"),tR="rgba(0, 0, 0, 0)",Uf=n=>VD(n).exists(s=>s.alpha!==0),nR=n=>Hl(n,s=>{if(fc(s)){const a=hs(s,"background-color");return $r(Uf(a),a)}else return A.none()}).getOr(tR),oR=(n,s)=>{const a=at.fromDom(n.selection.getStart()),l=s==="hilitecolor"?nR(a):hs(a,"color");return VD(l).map(d=>"#"+Gx(d).value)},j$=(n,s,a)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.apply(s,{value:a}),n.nodeChanged()})},W$=(n,s)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.remove(s,{value:null},void 0,!0),n.nodeChanged()})},Z$=n=>{n.addCommand("mceApplyTextcolor",(s,a)=>{j$(n,s,a)}),n.addCommand("mceRemoveTextcolor",s=>{W$(n,s)})},p4=n=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},b4=(n,s,a,l)=>{a==="custom"?aR(n)(g=>{g.each(h=>{KD(s,h),n.execCommand("mceApplyTextcolor",s,h),l(h)})},oR(n,s).getOr(QD)):a==="remove"?(l(""),n.execCommand("mceRemoveTextcolor",s)):(l(a),n.execCommand("mceApplyTextcolor",s,a))},my=(n,s,a)=>n.concat(fW(s).concat(p4(a))),sR=(n,s,a)=>l=>{l(my(n,s,a))},v4=(n,s,a)=>{const l=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(l,a)},G$=(n,s)=>{n.setTooltip(s)},q$=(n,s)=>a=>{const l=oR(n,s);return dc(l,a.toUpperCase())},rR=(n,s,a)=>{if(pa(a))return s==="forecolor"?"Text color":"Background color";const l=s==="forecolor"?"Text color {0}":"Background color {0}",d=my(h4(n,s),s,!1),g=Lt(d,h=>h.value===a).getOr({text:""}).text;return n.translate([l,n.translate(g)])},K$=(n,s,a,l)=>{n.ui.registry.addSplitButton(s,{tooltip:rR(n,a,l.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:q$(n,a),columns:V$(n,a),fetch:sR(h4(n,a),a,eR(n)),onAction:d=>{b4(n,a,l.get(),U)},onItemAction:(d,g)=>{b4(n,a,g,h=>{l.set(h),P$(n,{name:s,color:h})})},onSetup:d=>{v4(d,s,l.get());const g=h=>{h.name===s&&(v4(d,h.name,h.color),G$(d,rR(n,a,h.color)))};return n.on("TextColorChange",g),$b(Da(n)(d),()=>{n.off("TextColorChange",g)})}})},Y$=(n,s,a,l,d)=>{n.ui.registry.addNestedMenuItem(s,{text:l,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(G$(g,rR(n,a,d.get())),v4(g,s,d.get()),Da(n)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:q$(n,a),initData:{storageKey:a},onAction:g=>{b4(n,a,g.value,h=>{d.set(h),P$(n,{name:s,color:h})})}}]})},aR=n=>(s,a)=>{let l=!1;const d=C=>{const T=C.getData().colorpicker;l?(s(A.from(T)),C.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",T]))},g=(C,x)=>{x.name==="hex-valid"&&(l=x.value)},h={colorpicker:a};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:U,onCancel:()=>{s(A.none())}})},X$=n=>{Z$(n);const s=hW(n),a=U$(n),l=Pt(s),d=Pt(a);K$(n,"forecolor","forecolor",l),K$(n,"backcolor","hilitecolor",d),Y$(n,"forecolor","forecolor","Text color",l),Y$(n,"backcolor","hilitecolor","Background color",d)},pW=(n,s,a,l,d)=>{const g=x=>({setActive:T=>{eo.set(x,T)},isActive:()=>eo.isOn(x),isEnabled:()=>!Ft.isDisabled(x),setEnabled:T=>Ft.set(x,!T)}),h=dy({presets:"img",textContent:A.none(),htmlContent:A.none(),ariaLabel:n.tooltip,iconContent:A.some(n.url),labelContent:n.label,shortcutContent:A.none(),checkMark:A.some(MD(d.icons)),caret:A.none(),value:n.value},d,!0),C=n.tooltip.map(x=>bs.config(d.tooltips.getConfig({tooltipText:d.translate(x)})));return zo(Pb({context:n.context,data:oh(n),enabled:n.enabled,getApi:g,onAction:x=>{s(n.value),x.setActive(!0)},onSetup:x=>(x.setActive(a),U),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,l,d),{toggling:{toggleClass:LO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},y4=(n,s,a,l,d,g,h,C)=>{const x=Fx(s),_=bW(s,a,l,d!=="color"?"normal":"color",g,h,C);return XO(n,x,_,l,{menuType:d})},bW=(n,s,a,l,d,g,h)=>_l(ye(n,C=>C.type==="choiceitem"?kj(C).fold(Im,x=>A.some($D(x,a===1,l,s,g(x.value),d,h,Fx(n)))):C.type==="imageitem"?g$(C).fold(Im,x=>A.some(pW(x,s,g(x.value),d,h))):C.type==="resetimage"?wD(C).fold(Im,x=>A.some($D({...x,text:x.tooltip,icon:A.some(x.icon),label:A.some(x.label)},a===1,l,s,g(x.value),d,h,Fx(n)))):A.none())),Rp=(n,s)=>{const a=Lf(s);return n===1?{mode:"menu",moveOnTab:!0}:n==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?Bo(d.element,"[aria-checked=true]"):A.none()}},vW=(n,s)=>n===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:n==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${Ep}`:`.${Px}`}},yW=(n,s)=>{const a=Q$(n,s),l=s.colorinput.getColorCols(n.initData.storageKey),d="color",h={...y4(Ct("menu-value"),a,C=>{n.onAction({value:C})},l,d,Zd.CLOSE_ON_EXECUTE,n.select.getOr(an),s.shared.providers),markers:Lf(d),movement:Rp(l,d),showMenuRole:!1};return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[P_.widget(qg.sketch(h))]}},Q$=(n,s)=>{const a=n.initData.allowCustomColors&&s.colorinput.hasCustomColors();return n.initData.colors.fold(()=>my(s.colorinput.getColors(n.initData.storageKey),n.initData.storageKey,a),l=>l.concat(p4(a)))},J$=(n,s)=>{const a="imageselector",l=n.initData.columns,g={...y4(Ct("menu-value"),n.initData.items,h=>{n.onAction({value:h})},l,a,Zd.CLOSE_ON_EXECUTE,n.select.getOr(an),s.shared.providers),markers:Lf(a),movement:Rp(l,a),showMenuRole:!1};return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[P_.widget(qg.sketch(g))]}},eI=Ct("cell-over"),tI=Ct("cell-execute"),cR=n=>(s,a)=>n.shared.providers.translate(["{0} columns, {1} rows",a,s]),CW=(n,s,a)=>{const l=h=>tn(h,eI,{row:n,col:s}),d=h=>tn(h,tI,{row:n,col:s}),g=(h,C)=>{C.stop(),d(h)};return p({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:nt([xn("insert-table-picker-cell",[Ie(jl(),En.focus),Ie(Ea(),d),Ie(Cg(),g),Ie(Lh(),g)]),eo.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),En.config({onFocus:l})])})},nI=(n,s,a)=>{const l=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=n(d+1,h+1);g.push(CW(d,h,C))}l.push(g)}return l},xW=(n,s,a,l,d)=>{for(let g=0;g<l;g++)for(let h=0;h<d;h++)eo.set(n[g][h],g<=s&&h<=a)},SW=n=>xe(n,s=>ye(s,y)),oI=(n,s)=>Ss(`${s}x${n}`),lR={inserttable:(n,s)=>{const d=cR(s),g=nI(d,10,10),h=oI(0,0),C=To({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:nt([An.config({})])});return{type:"widget",data:{value:Ct("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[P_.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:SW(g).concat(C.asSpec()),behaviours:nt([xn("insert-table-picker",[ps(x=>{An.set(C.get(x),[h])}),Jh(eI,(x,T,_)=>{const{row:N,col:L}=_.event;xW(g,N,L,10,10),An.set(C.get(x),[oI(N+1,L+1)])}),Jh(tI,(x,T,_)=>{const{row:N,col:L}=_.event;Wn(x,C0()),n.onAction({numRows:N+1,numColumns:L+1})})]),Xt.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:yW,imageselect:J$},EW=(n,s)=>Vt(lR,n.fancytype).map(a=>a(n,s)),TW=(n,s,a,l=!0,d=!1)=>{const g=d?Qj(a.icons):fu(a.icons),h=x=>({isEnabled:()=>!Ft.isDisabled(x),setEnabled:T=>Ft.set(x,!T),setIconFill:(T,_)=>{Bo(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each(N=>{ln(N,"fill",_)})},setTooltip:T=>{const _=a.translate(T);ln(x.element,"aria-label",_)}}),C=dy({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:A.none(),ariaLabel:n.text,labelContent:A.none(),caret:A.some(g),checkMark:A.none(),shortcutContent:n.shortcut},a,l);return Pb({context:n.context,data:oh(n),getApi:h,enabled:n.enabled,onAction:U,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},kW=(n,s,a,l=!0)=>{const d=h=>({isEnabled:()=>!Ft.isDisabled(h),setEnabled:C=>Ft.set(h,!C)}),g=dy({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:A.none(),labelContent:A.none(),ariaLabel:n.text,caret:A.none(),checkMark:A.none(),shortcutContent:n.shortcut},a,l);return Pb({context:n.context,data:oh(n),getApi:d,enabled:n.enabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},AW=n=>({type:"separator",dom:{tag:"div",classes:[Px,C6]},components:n.text.map(Ss).toArray()}),sI=(n,s,a,l=!0)=>{const d=h=>({setActive:C=>{eo.set(h,C)},isActive:()=>eo.isOn(h),isEnabled:()=>!Ft.isDisabled(h),setEnabled:C=>Ft.set(h,!C)}),g=dy({iconContent:n.icon,textContent:n.text,htmlContent:A.none(),labelContent:A.none(),ariaLabel:n.text,checkMark:A.some(MD(a.icons)),caret:A.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},a,l);return zo(Pb({context:n.context,data:oh(n),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:LO,toggleOnExecute:!1,selected:n.active},role:n.role.getOrUndefined()})},rI=oW,iR=AW,_W=kW,OW=TW,DW=sI,RW=EW,NW=sW,MW=n=>{switch(n.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:n}}},PW=n=>{const s=_t.getValue(n),a=$x(n).map(jO);Yl.refetch(s).get(()=>{const l=Rn.getCoupled(s,"sandbox");a.each(d=>$x(l).each(g=>oU(g,d)))})},BW=(n,s)=>{$W(n).each(a=>{m3(n,a.element,s.event.eventType,s.event.interactionEvent)})},$W=n=>Co.getState(n).bind(So.getHighlighted).bind(So.getHighlighted),uR=n=>cr(n.element,GT)?A.some(n.element):Bo(n.element,"."+GT),aI=(n,s,a)=>{_6(n).each(l=>{O6(l,a),uR(s).each(g=>{Jr(g,"id").each(h=>ln(l.element,"aria-controls",h))})}),ln(a.element,"aria-selected","true")},IW=(n,s,a)=>{ln(a.element,"aria-selected","false")},FW=n=>{_6(n).each(s=>En.focus(s))},Qx=n=>Rn.getExistingCoupled(n,"sandbox").bind($x).map(jO).map(a=>a.fetchPattern).getOr("");var fy;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(fy||(fy={}));const LW=(n,s,a,l,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(n.type){case"menuitem":return Rj(n).fold(Im,C=>A.some(_W(h(C),s,g,l)));case"nestedmenuitem":return Mj(n).fold(Im,C=>A.some(OW(h(C),s,g,l,d)));case"togglemenuitem":return Bj(n).fold(Im,C=>A.some(DW(h(C),s,g,l)));case"separator":return lj(n).fold(Im,C=>A.some(iR(C)));case"fancymenuitem":return f$(n).fold(Im,C=>RW(C,a));default:return console.error("Unknown item in general menu",n),A.none()}},HW=(n,s,a,l,d,g,h)=>{const C=l===1,x=!C||Fx(n);return _l(ye(n,T=>{switch(T.type){case"separator":return uj(T).fold(Im,_=>A.some(iR(_)));case"cardmenuitem":return CD(T).fold(Im,_=>A.some(NW({..._,onAction:N=>{_.onAction(N),a(_.value,_.meta)}},d,g,{itemBehaviours:x$(_.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return dj(T).fold(Im,_=>A.some(rI(_,s,C,"normal",a,d,g,x)))}}))},C4=(n,s,a,l,d,g)=>{const h=Fx(s),C=_l(ye(s,_=>{const N=j=>d?!mo(j,"text"):h,L=j=>LW(j,a,l,N(j),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?L({..._,enabled:!1}):L(_)})),x=MW(g);return(d?M6:XO)(n,h,C,1,x)},dR=n=>pb.singleData(n.value,n),mR=(n,s,a,l)=>{const d=Rp(s,l),g=Lf(l);return{data:dR({...n,movement:d,menuBehaviours:uy.unnamedEvents(s!=="auto"?[]:[ps((h,C)=>{AD(h,4,g.item).each(({numColumns:x,numRows:T})=>{Xt.setGridSize(h,T,x)})})])}),menu:{markers:Lf(l),fakeFocus:a===fy.ContentFocus}}},cI=n=>w.create(at.fromDom(n.startContainer),n.startOffset,at.fromDom(n.endContainer),n.endOffset),zW={register:(n,s)=>{const a=Ct("autocompleter"),l=Pt(!1),d=Pt(!1),g=hn(),h=p(js.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:nt([xn("dismissAutocompleter",[Ie(fm(),()=>N()),Ie(E0(),(Y,le)=>{Jr(le.event.target,"id").each(pe=>ln(at.fromDom(n.getBody()),"aria-activedescendant",pe))})])]),lazySink:s.getSink})),C=()=>js.isOpen(h),x=d.get,T=()=>{if(C()){js.hide(h),n.dom.remove(a,!1);const Y=at.fromDom(n.getBody());Jr(Y,"aria-owns").filter(le=>le===a).each(()=>{gs(Y,"aria-owns"),gs(Y,"aria-activedescendant")})}},_=()=>js.getContent(h).bind(Y=>el(Y.components(),0)),N=()=>n.execCommand("mceAutocompleterClose"),L=Y=>{const le=ha(Y,pe=>A.from(pe.columns)).getOr(1);return xe(Y,pe=>{const Ee=pe.items;return HW(Ee,pe.matchText,(Oe,ht)=>{const Ue={hide:()=>N(),reload:Qe=>{T(),n.execCommand("mceAutocompleterReload",!1,{fetchOptions:Qe})}};n.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(Qe=>{l.set(!0),pe.onAction(Ue,Qe,Oe,ht),l.set(!1)})},le,Zd.BUBBLE_TO_SANDBOX,s,pe.highlightOn)})},j=(Y,le)=>{const pe=ha(Y,Ee=>A.from(Ee.columns)).getOr(1);js.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(cI),root:at.fromDom(n.getBody())}},mR(XO("autocompleter-value",!0,le,pe,{menuType:"normal"}),pe,fy.ContentFocus,"normal")),_().each(So.highlightFirst)},Z=Y=>{const le=L(Y);le.length>0?(j(Y,le),ln(at.fromDom(n.getBody()),"aria-owns",a),n.inline||ne()):T()},ne=()=>{n.dom.get(a)&&n.dom.remove(a,!1);const Y=n.getDoc().documentElement,le=n.selection.getNode(),pe=bh(h.element);ws(pe,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${le.offsetTop}px`,left:`${le.offsetLeft}px`}),n.dom.add(Y,pe.dom),Bo(pe,'[role="menu"]').each(Ee=>{Kn(Ee,"position"),Kn(Ee,"max-height")})};n.on("AutocompleterStart",({lookupData:Y})=>{d.set(!0),l.set(!1),Z(Y)}),n.on("AutocompleterUpdate",({lookupData:Y})=>Z(Y)),n.on("AutocompleterUpdateActiveRange",({range:Y})=>g.set(Y)),n.on("AutocompleterEnd",()=>{T(),d.set(!1),l.set(!1),g.clear()});const ae={cancelIfNecessary:N,isMenuOpen:C,isActive:x,isProcessingAction:l.get,getMenu:_};KV.setup(ae,n)}},lI=(n,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ye(n.items,s.interpreter)});var VW=tinymce.util.Tools.resolve("tinymce.html.Entities");const gy=(n,s,a,l)=>{const d=iI(n,s,a,l);return Yn.sketch(d)},UW=(n,s)=>gy(n,s,[],[]),iI=(n,s,a,l)=>({dom:dI(a),components:n.toArray().concat([s]),fieldBehaviours:nt(l)}),uI=()=>dI([]),dI=n=>({tag:"div",classes:["tox-form__group"].concat(n)}),sh=(n,s)=>Yn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ss(s.translate(n))]}),wl=Ct("form-component-change"),mI=Ct("form-component-input"),Fb=Ct("form-close"),rh=Ct("form-cancel"),Gd=Ct("form-action"),Jx=Ct("form-submit"),fR=Ct("form-block"),x4=Ct("form-unblock"),fI=Ct("form-tabchange"),gR=Ct("form-resize"),jW=(n,s,a)=>{const l=n.label.map(j=>sh(j,s)),d=s.icons(),g=j=>d[j]??j,h=j=>(Z,ne)=>{Sa(ne.event.target,"[data-collection-item-value]").each(ae=>{j(Z,ne,ae,Rr(ae,"data-collection-item-value"))})},C=(j,Z)=>{const ae=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",Y=ye(Z,Ee=>{const Oe=Nc.translate(Ee.text),ht=n.columns===1?`<div class="tox-collection__item-label">${Oe}</div>`:"",Ue=`<div class="tox-collection__item-icon">${g(Ee.icon)}</div>`,Qe={_:" "," - ":" ","-":" "},Ke=Oe.replace(/\_| \- |\-/g,Qt=>Qe[Qt]);return`<div data-mce-tooltip="${Ke}" class="tox-collection__item${ae}" tabindex="-1" data-collection-item-value="${VW.encodeAllRaw(Ee.value)}" aria-label="${Ke}">${Ue}${ht}</div>`}),le=n.columns!=="auto"&&n.columns>1?Fn(Y,n.columns):[Y],pe=ye(le,Ee=>`<div class="tox-collection__group">${Ee.join("")}</div>`);Il(j.element,pe.join(""))},x=h((j,Z,ne,ae)=>{Z.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||tn(j,Gd,{name:n.name,value:ae})}),T=[Ie(jl(),h((j,Z,ne)=>{Ir(ne,!0)})),Ie(Cg(),x),Ie(Lh(),x),Ie(Qi(),h((j,Z,ne)=>{Bo(j.element,"."+Eb).each(ae=>{Rs(ae,Eb)}),jo(ne,Eb)})),Ie(x2(),h(j=>{Bo(j.element,"."+Eb).each(Z=>{Rs(Z,Eb),Ds(Z)})})),Ef(h((j,Z,ne,ae)=>{tn(j,Gd,{name:n.name,value:ae})}))],_=(j,Z)=>ye(Hr(j.element,".tox-collection__item"),Z),N=Yn.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Yt},behaviours:nt([Ft.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable,onDisabled:j=>{_(j,Z=>{jo(Z,"tox-collection__item--state-disabled"),ln(Z,"aria-disabled",!0)})},onEnabled:j=>{_(j,Z=>{Rs(Z,"tox-collection__item--state-disabled"),gs(Z,"aria-disabled")})}}),Cr(()=>s.checkUiComponentContext(n.context)),An.config({}),bs.config({...s.tooltips.getConfig({tooltipText:"",onShow:j=>{Bo(j.element,"."+Eb+"[data-mce-tooltip]").each(Z=>{Jr(Z,"data-mce-tooltip").each(ne=>{bs.setComponents(j,s.tooltips.getComponents({tooltipText:ne}))})})}}),mode:"children-keyboard-focus",anchor:j=>({type:"node",node:Bo(j.element,"."+Eb).orThunk(()=>s0(".tox-collection__item")),root:j.element,layouts:{onLtr:oe([kr,Ns,Pr,ka,Tr,da]),onRtl:oe([kr,Ns,Pr,ka,Tr,da])},bubble:vl(0,-2,{})})}),_t.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(j,Z)=>{C(j,Z),n.columns==="auto"&&AD(j,5,"tox-collection__item").each(({numRows:ne,numColumns:ae})=>{Xt.setGridSize(j,ne,ae)}),Wn(j,gR)}}),us.config({}),Xt.config(vW(n.columns,"normal")),xn("collection-events",T)]),eventOrder:{[Ea()]:["disabling","alloy.base.behaviour","collection-events"],[Qi()]:["collection-events","tooltipping"]}});return gy(l,N,["tox-form__group--collection"],[])},WW=(n,s)=>Yl.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:nt([Lm.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable),Cr(()=>s.providers.checkUiComponentContext(n.context)),Om.config({}),us.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Go.nu(l=>n.fetch(l)).map(l=>A.from(dR(zo(y4(Ct("menu-value"),l,d=>{n.onItemAction(a,d)},n.columns,n.presets,Zd.CLOSE_ON_EXECUTE,an,s.providers),{movement:Rp(n.columns,n.presets)})))),parts:{menu:Bx(!1,1,n.presets)}}),S4=Ct("color-input-change"),gI=Ct("color-swatch-change"),hI=Ct("color-picker-cancel"),ZW=(n,s,a,l)=>{const d=Yn.parts.field({factory:Ff,inputClasses:["tox-textfield"],data:l,onSetValue:T=>lu.run(T).get(U),inputBehaviours:nt([Ft.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable}),Cr(()=>s.providers.checkUiComponentContext(n.context)),us.config({}),lu.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>Vi(T.element),notify:{onValid:T=>{const _=_t.getValue(T);tn(T,S4,{color:_})}},validator:{validateOnLoad:!1,validate:T=>{const _=_t.getValue(T);if(_.length===0)return Go.pure(Wt.value(!0));{const N=at.fromTag("span");gn(N,"background-color",_);const L=xs(N,"background-color").fold(()=>Wt.error("blah"),j=>Wt.value(_));return Go.pure(L)}}}})]),selectOnFocus:!1}),g=n.label.map(T=>sh(T,s.providers)),h=(T,_)=>{tn(T,gI,{value:_})},C=(T,_)=>{x.getOpt(T).each(N=>{_==="custom"?a.colorPicker(L=>{L.fold(()=>Wn(N,hI),j=>{h(N,j),KD(n.storageKey,j)})},"#ffffff"):_==="remove"?h(N,""):h(N,_)})},x=To(WW({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Tr,Pr,kr],onLtr:()=>[Pr,Tr,kr]},components:[],fetch:sR(a.getColors(n.storageKey),n.storageKey,a.hasCustomColors()),columns:a.getColorCols(n.storageKey),presets:"color",onItemAction:C,context:n.context},s));return Yn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:nt([xn("form-field-events",[Ie(S4,(T,_)=>{x.getOpt(T).each(N=>{gn(N.element,"background-color",_.event.color)}),tn(T,wl,{name:n.name})}),Ie(gI,(T,_)=>{Yn.getField(T).each(N=>{_t.setValue(N,_.event.value),Fe.getCurrent(T).each(En.focus)})}),Ie(hI,(T,_)=>{Yn.getField(T).each(N=>{Fe.getCurrent(T).each(En.focus)})})])])})},qd={self:()=>Fe.config({find:A.some}),memento:n=>Fe.config({find:n.getOpt}),childAt:n=>Fe.config({find:s=>fd(s.element,n).bind(a=>s.getSystem().getByDom(a).toOptional())})},bI=on([we("preprocess",Yt),we("postprocess",Yt)]),qW=(n,s)=>{const a=Cc("RepresentingConfigs.memento processors",bI,s);return _t.config({store:{mode:"manual",getValue:l=>{const d=n.get(l),g=_t.getValue(d);return a.postprocess(g)},setValue:(l,d)=>{const g=a.preprocess(d),h=n.get(l);_t.setValue(h,g)}}})},Lb=(n,s,a)=>_t.config({store:{mode:"manual",...n.map(l=>({initialValue:l})).getOr({}),getValue:s,setValue:a}}),vI=(n,s,a)=>Lb(n,l=>s(l.element),(l,d)=>a(l.element,d)),KW=n=>vI(n,Ui,Il),w4=n=>_t.config({store:{mode:"memory",initialValue:n}}),E4=Ct("rgb-hex-update"),yI=Ct("slider-update"),CI=Ct("palette-update"),xI=(n,s)=>{const a=jd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),l=jd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return jd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:oe(0)},components:[a,l],sliderBehaviours:nt([En.config({})]),onChange:(d,g,h)=>{ln(d.element,"aria-valuenow",Math.floor(360-h*3.6)),tn(d,yI,{value:h})}})},SI=Ct("valid-input"),wI=Ct("invalid-input"),EI=Ct("validating-input"),T4="colorcustom.rgb.",YW={isEnabled:St,setEnabled:U,immediatelyShow:U,immediatelyHide:U},XW=(n,s,a,l,d,g)=>{const h=(ne,ae)=>{const Y=ae.get();ne!==Y.isEnabled()&&(Y.setEnabled(ne),ne?Y.immediatelyShow():Y.immediatelyHide())},C=(ne,ae,Y)=>lu.config({invalidClass:s("invalid"),notify:{onValidate:le=>{tn(le,EI,{type:ne})},onValid:le=>{h(!1,Y),tn(le,SI,{type:ne,value:_t.getValue(le)})},onInvalid:le=>{h(!0,Y),tn(le,wI,{type:ne,value:_t.getValue(le)})}},validator:{validate:le=>{const pe=_t.getValue(le),Ee=ae(pe)?Wt.value(!0):Wt.error(n("aria.input.invalid"));return Go.pure(Ee)},validateOnLoad:!1}}),x=(ne,ae,Y,le,pe)=>{const Ee=Pt(YW),Oe=n(T4+"range"),ht=Yn.parts.label({dom:{tag:"label"},components:[Ss(Y)]}),Ue=Yn.parts.field({data:pe,factory:Ff,inputAttributes:{type:"text","aria-label":le,...ae==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:nt([C(ae,ne,Ee),us.config({}),bs.config({...d({tooltipText:"",onSetup:_n=>{Ee.set({isEnabled:()=>bs.isEnabled(_n),setEnabled:Ut=>bs.setEnabled(_n,Ut),immediatelyShow:()=>bs.immediateOpenClose(_n,!0),immediatelyHide:()=>bs.immediateOpenClose(_n,!1)}),bs.setEnabled(_n,!1)},onShow:(_n,Ut)=>{bs.setComponents(_n,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Ss(n(ae==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:_n=>{lu.isInvalid(_n)&&lu.run(_n).get(U)}}),Qe=Ct("aria-invalid"),Ke=To(g("invalid",A.some(Qe),"warning")),Qt=To({dom:{tag:"div",classes:[s("invalid-icon")]},components:[Ke.asSpec()]}),zt=[ht,Ue,Qt.asSpec()],jn=ae!=="hex"?[Yn.parts["aria-descriptor"]({text:Oe})]:[],Jt=zt.concat(jn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:Jt}},T=(ne,ae)=>{const Y=Gx(ae);return vp.getField(ne,"hex").each(le=>{En.isFocused(le)||_t.setValue(ne,{hex:Y.value})}),Y},_=(ne,ae)=>{const Y=ae.red,le=ae.green,pe=ae.blue;_t.setValue(ne,{red:Y,green:le,blue:pe})},N=To({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),L=(ne,ae)=>{N.getOpt(ne).each(Y=>{gn(Y.element,"background-color","#"+ae.value)})};return cu({factory:()=>{const ne={red:Pt(A.some(255)),green:Pt(A.some(255)),blue:Pt(A.some(255)),hex:Pt(A.some("ffffff"))},ae=(Ut,Ve)=>{const ct=Kx(Ve);_(Ut,ct),Ee(ct)},Y=Ut=>ne[Ut].get(),le=(Ut,Ve)=>{ne[Ut].set(Ve)},pe=()=>Y("red").bind(Ut=>Y("green").bind(Ve=>Y("blue").map(ct=>ga(Ut,Ve,ct,1)))),Ee=Ut=>{const Ve=Ut.red,ct=Ut.green,mn=Ut.blue;le("red",A.some(Ve)),le("green",A.some(ct)),le("blue",A.some(mn))},Oe=(Ut,Ve)=>{const ct=Ve.event;ct.type!=="hex"?le(ct.type,A.none()):l(Ut)},ht=(Ut,Ve)=>{a(Ut);const ct=c4(Ve);le("hex",A.some(ct.value));const mn=Kx(ct);_(Ut,mn),Ee(mn),tn(Ut,E4,{hex:ct}),L(Ut,ct)},Ue=(Ut,Ve,ct)=>{const mn=parseInt(ct,10);le(Ve,A.some(mn)),pe().each(Pn=>{const qt=T(Ut,Pn);tn(Ut,E4,{hex:qt}),L(Ut,qt)})},Qe=Ut=>Ut.type==="hex",Ke=(Ut,Ve)=>{const ct=Ve.event;Qe(ct)?ht(Ut,ct.value):Ue(Ut,ct.type,ct.value)},Qt=Ut=>({label:n(T4+Ut+".label"),description:n(T4+Ut+".description")}),zt=Qt("red"),jn=Qt("green"),Jt=Qt("blue"),_n=Qt("hex");return zo(vp.sketch(Ut=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[Ut.field("red",Yn.sketch(x(u4,"red",zt.label,zt.description,255))),Ut.field("green",Yn.sketch(x(u4,"green",jn.label,jn.description,255))),Ut.field("blue",Yn.sketch(x(u4,"blue",Jt.label,Jt.description,255))),Ut.field("hex",Yn.sketch(x(i4,"hex",_n.label,_n.description,"ffffff"))),N.asSpec()],formBehaviours:nt([lu.config({invalidClass:s("form-invalid")}),xn("rgb-form-events",[Ie(SI,Ke),Ie(wI,Oe),Ie(EI,Oe)])])})),{apis:{updateHex:(Ut,Ve)=>{_t.setValue(Ut,{hex:Ve.value}),ae(Ut,Ve),L(Ut,Ve)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(ne,ae,Y)=>{ne.updateHex(ae,Y)}},extraApis:{}})},QW=(n,s)=>{const a=jd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),l=jd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,_)=>{const{width:N,height:L}=T,j=T.getContext("2d");if(j===null)return;j.fillStyle=_,j.fillRect(0,0,N,L);const Z=j.createLinearGradient(0,0,N,0);Z.addColorStop(0,"rgba(255,255,255,1)"),Z.addColorStop(1,"rgba(255,255,255,0)"),j.fillStyle=Z,j.fillRect(0,0,N,L);const ne=j.createLinearGradient(0,0,0,L);ne.addColorStop(0,"rgba(0,0,0,0)"),ne.addColorStop(1,"rgba(0,0,0,1)"),j.fillStyle=ne,j.fillRect(0,0,N,L)},g=(T,_)=>{const N=T.components()[0].element.dom,L=Op(_,100,100),j=O$(L);d(N,D$(j))},h=(T,_)=>{const N=FD(Kx(_));jd.setValue(T,{x:N.saturation,y:100-N.value}),ln(T.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",N.saturation,N.value]))};return cu({factory:T=>{const _=oe({x:0,y:0}),N=(Z,ne,ae)=>{In(ae)||ln(Z.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",Math.floor(ae.x),Math.floor(100-ae.y)])),tn(Z,CI,{value:ae})},L=(Z,ne,ae,Y)=>{d(ae.element.dom,D$(R$))},j=nt([Fe.config({find:A.some}),En.config({})]);return jd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":n(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[a,l],onChange:N,onInit:L,sliderBehaviours:j})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,_,N)=>{g(_,N)},setThumb:(T,_,N)=>{h(_,N)}},extraApis:{}})},TI=(n,s,a,l)=>{const d=h=>{const C=XW(n,s,h.onValidHex,h.onInvalidHex,a,l),x=QW(n,s),T=Qe=>(100-Qe)/100*360,_=Qe=>100-Qe/360*100,N={paletteRgba:Pt(R$),paletteHue:Pt(0)},L=To(xI(n,s)),j=To(x.sketch({})),Z=To(C.sketch({})),ne=(Qe,Ke,Qt)=>{j.getOpt(Qe).each(zt=>{x.setHue(zt,Qt)})},ae=(Qe,Ke)=>{Z.getOpt(Qe).each(Qt=>{C.updateHex(Qt,Ke)})},Y=(Qe,Ke,Qt)=>{L.getOpt(Qe).each(zt=>{jd.setValue(zt,_(Qt))})},le=(Qe,Ke)=>{j.getOpt(Qe).each(Qt=>{x.setThumb(Qt,Ke)})},pe=(Qe,Ke)=>{const Qt=Kx(Qe);N.paletteRgba.set(Qt),N.paletteHue.set(Ke)},Ee=(Qe,Ke,Qt,zt)=>{pe(Ke,Qt),He(zt,jn=>{jn(Qe,Ke,Qt)})},Oe=()=>{const Qe=[ae];return(Ke,Qt)=>{const zt=Qt.event.value,jn=N.paletteHue.get(),Jt=Op(jn,zt.x,100-zt.y),_n=zm(Jt);Ee(Ke,_n,jn,Qe)}},ht=()=>{const Qe=[ne,ae];return(Ke,Qt)=>{const zt=T(Qt.event.value),jn=N.paletteRgba.get(),Jt=FD(jn),_n=Op(zt,Jt.saturation,Jt.value),Ut=zm(_n);Ee(Ke,Ut,zt,Qe)}},Ue=()=>{const Qe=[ne,Y,le];return(Ke,Qt)=>{const zt=Qt.event.hex,jn=N$(zt);Ee(Ke,zt,jn.hue,Qe)}};return{uid:h.uid,dom:h.dom,components:[j.asSpec(),L.asSpec(),Z.asSpec()],behaviours:nt([xn("colour-picker-events",[Ie(E4,Ue()),Ie(CI,Oe()),Ie(yI,ht())]),Fe.config({find:Qe=>Z.getOpt(Qe)}),Xt.config({mode:"acyclic"})])}};return cu({name:"ColourPicker",configFields:[Ze("dom"),we("onValidHex",U),we("onInvalidHex",U)],factory:d})},kI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},AI=n=>s=>De(s)?n.translate(kI[s]):n.translate(s),k4=(n,s,a)=>{const l=T=>"tox-"+T,d=(T,_,N=T,L=T)=>mu(N,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+T],attributes:{title:s.translate(L),"aria-live":"polite",..._.fold(()=>({}),j=>({id:j}))}},s.icons),g=TI(AI(s),l,s.tooltips.getConfig,d),h=T=>{tn(T,Gd,{name:"hex-valid",value:!0})},C=T=>{tn(T,Gd,{name:"hex-valid",value:!1})},x=To(g.sketch({dom:{tag:"div",classes:[l("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:nt([Lb(a,T=>{const _=x.get(T);return Fe.getCurrent(_).bind(j=>_t.getValue(j).hex).map(j=>"#"+em(j,"#")).getOr("")},(T,_)=>{const N=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,L=A.from(N.exec(_)).bind(ne=>el(ne,1)),j=x.get(T);Fe.getCurrent(j).fold(()=>{console.log("Can not find form")},ne=>{_t.setValue(ne,{hex:L.getOr("")}),vp.getField(ne,"hex").each(ae=>{Wn(ae,Mu())})})}),qd.self()])}};var _I=tinymce.util.Tools.resolve("tinymce.Resource");const OI=n=>mo(n,"init"),JW=n=>{const s=hn(),a=To({dom:{tag:n.tag}}),l=hn(),d=!OI(n)&&n.onFocus.isSome()?[En.config({onFocus:g=>{n.onFocus.each(h=>{h(g.element.dom)})}}),us.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:nt([xn("custom-editor-events",[ps(g=>{a.getOpt(g).each(h=>{(OI(n)?n.init(h.element.dom):_I.load(n.scriptId,n.scriptUrl).then(C=>C(h.element.dom,n.settings))).then(C=>{l.on(x=>{C.setValue(x)}),l.clear(),s.set(C)})})})]),Lb(A.none(),()=>s.get().fold(()=>l.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>l.set(h),C=>C.setValue(h))}),qd.self()].concat(d)),components:[a.asSpec()]}};var jf=tinymce.util.Tools.resolve("tinymce.util.Tools");const hR=Ct("browse.files.event"),eZ=(n,s,a)=>{const l=jf.explode(s.getOption("images_file_types")),d=g=>a.fold(()=>cn(l,h=>ol(g.name.toLowerCase(),`.${h.toLowerCase()}`)),h=>cn(h,C=>ol(g.name.toLowerCase(),`.${C.toLowerCase()}`)));return Ln(jm(n),d)},tZ=(n,s,a)=>{const l=(L,j)=>{j.stop()},d=L=>(j,Z)=>{He(L,ne=>{ne(j,Z)})},g=(L,j)=>{if(!Ft.isDisabled(L)){const Z=j.event.raw;tn(L,hR,{files:Z.dataTransfer?.files})}},h=(L,j)=>{const Z=j.event.raw.target;tn(L,hR,{files:Z.files})},C=(L,j)=>{j&&(_t.setValue(L,eZ(j,s,n.allowedFileExtensions)),tn(L,wl,{name:n.name}))},x=To({dom:{tag:"input",attributes:{type:"file",accept:n.allowedFileTypes.getOr("image/*")},styles:{display:"none"}},behaviours:nt([xn("input-file-events",[Pg(Cg()),Pg(Lh())])])}),T=n.label.map(L=>sh(L,s)),_=Yn.parts.field({factory:sa,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ss(s.translate(n.buttonLabel.getOr("Browse for an image"))),x.asSpec()],action:L=>{x.get(L).element.dom.click()},buttonBehaviours:nt([qd.self(),w4(a.getOr([])),us.config({}),Lm.button(()=>s.checkUiComponentContext(n.context).shouldDisable),Cr(()=>s.checkUiComponentContext(n.context))])}),N={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:nt([Ft.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable}),Cr(()=>s.checkUiComponentContext(n.context)),eo.config({toggleClass:"dragenter",toggleOnExecute:!1}),xn("dropzone-events",[Ie("dragenter",d([l,eo.toggle])),Ie("dragleave",d([l,eo.toggle])),Ie("dragover",l),Ie("drop",d([l,g])),Ie(yg(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ss(s.translate(n.dropAreaLabel.getOr("Drop an image here")))]},_]}]};return gy(T,N,["tox-form__group--stretched"],[xn("handle-files",[Ie(hR,(L,j)=>{Yn.getField(L).each(Z=>{C(Z,j.event.files)})})])])},nZ=(n,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${n.columns}col`]},components:ye(n.items,s.interpreter)}),A4=Ct("alloy-fake-before-tabstop"),pR=Ct("alloy-fake-after-tabstop"),DI=n=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:nt([En.config({ignore:!0}),us.config({})])}),RI=(n,s)=>({dom:{tag:"div",classes:["tox-navobj",...n.getOr([])]},components:[DI([A4]),s,DI([pR])],behaviours:nt([qd.childAt(1)])}),bR=(n,s)=>{tn(n,oa(),{raw:{which:9,shiftKey:s}})},NI=(n,s)=>{const a=s.element;cr(a,A4)?bR(n,!0):cr(a,pR)&&bR(n,!1)},eS=n=>dg(n,["."+A4,"."+pR].join(","),an),_4=Ct("update-dialog"),vR=Ct("update-title"),MI=Ct("update-body"),PI=Ct("update-footer"),yn=Ct("body-send-message"),Np=Ct("dialog-focus-shifted"),O4=Gs().browser,hy=O4.isSafari(),BI=O4.isFirefox(),yR=hy||BI,oZ=O4.isChromium(),$I=({scrollTop:n,scrollHeight:s,clientHeight:a})=>Math.ceil(n)+a>=s,II=(n,s)=>n.scrollTo(0,s==="bottom"?99999999:s),sZ=(n,s)=>{const a=n.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!oZ&&!hy||un(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:n.documentElement)},FI=(n,s,a)=>{const l=n.dom;A.from(l.contentDocument).fold(a,d=>{let g=0;const h=sZ(d,s).map(x=>(g=x.scrollTop,x)).forall($I),C=()=>{const x=l.contentWindow;un(x)&&(h?II(x,"bottom"):!h&&yR&&g!==0&&II(x,g))};hy&&l.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),hy||C()})},LI=$r(yR,hy?500:200).map(n=>Is(FI,n)),iQ=(n,s)=>{const a=Pt(n.getOr(""));return{getValue:l=>a.get(),setValue:(l,d)=>{if(a.get()!==d){const g=l.element,h=()=>ln(g,"srcdoc",d);s?LI.fold(oe(FI),C=>C.throttle)(g,d,h):h()}a.set(d)}}},tS=(n,s,a)=>{const l="tox-dialog__iframe",d=n.transparent?[]:[`${l}--opaque`],g=n.border?["tox-navobj-bordered"]:[],h={...n.label.map(N=>({title:N})).getOr({}),...a.map(N=>({srcdoc:N})).getOr({}),...n.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=iQ(a,n.streamContent),x=n.label.map(N=>sh(N,s)),T=N=>RI(A.from(g),{uid:N.uid,dom:{tag:"iframe",attributes:h,classes:[l,...d]},behaviours:nt([us.config({}),En.config({}),Lb(a,C.getValue,C.setValue),Rc.config({channels:{[Np]:{onReceive:(L,j)=>{j.newFocus.each(Z=>{Vi(L.element).each(ne=>{(I(L.element,Z)?jo:Rs)(ne,"tox-navobj-bordered-focus")})})}}}})])}),_=Yn.parts.field({factory:{sketch:T}});return gy(x,_,["tox-form__group--stretched"],[])},CR=(n,s,a,l,d)=>{const g=a*d,h=l*d,C=Math.max(0,n/2-g/2),x=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},HI=(n,s,a)=>{const l=ia(n),d=pr(n);return Math.min(l/s,d/a,1)},aZ=(n,s)=>{const a=Pt(s.getOr({url:""})),l=To({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=To({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[l.asSpec()]}),g=(x,T)=>{const _={url:T.url};T.zoom.each(L=>_.zoom=L),T.cachedWidth.each(L=>_.cachedWidth=L),T.cachedHeight.each(L=>_.cachedHeight=L),a.set(_);const N=()=>{const{cachedWidth:L,cachedHeight:j,zoom:Z}=_;if(!Cn(L)&&!Cn(j)){if(Cn(Z)){const ae=HI(x.element,L,j);_.zoom=ae}const ne=CR(ia(x.element),pr(x.element),L,j,_.zoom);d.getOpt(x).each(ae=>{ws(ae.element,ne)})}};l.getOpt(x).each(L=>{const j=L.element;T.url!==Rr(j,"src")&&(ln(j,"src",T.url),Rs(x.element,"tox-imagepreview__loaded")),N(),ll(j).then(Z=>{x.getSystem().isConnected()&&(jo(x.element,"tox-imagepreview__loaded"),_.cachedWidth=Z.dom.naturalWidth,_.cachedHeight=Z.dom.naturalHeight,N())})})},h={};n.height.each(x=>h.height=x);const C=s.map(x=>({url:x.url,zoom:A.from(x.zoom),cachedWidth:A.from(x.cachedWidth),cachedHeight:A.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:nt([qd.self(),Lb(C,()=>a.get(),g)])}},cZ=(n,s,a)=>{const l="tox-label",d=n.align==="center"?[`${l}--center`]:[],g=n.align==="end"?[`${l}--end`]:[],h=To({dom:{tag:"label",classes:[l,...d,...g]},components:[Ss(s.providers.translate(n.label))]}),C=ye(n.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:nt([qd.self(),An.config({}),KW(A.none()),Xt.config({mode:"acyclic"}),xn("label",[ps(x=>{n.for.each(T=>{a(T).each(_=>{h.getOpt(x).each(N=>{const L=Rr(_.element,"id")??Ct("form-field");ln(_.element,"id",L),ln(N.element,"for",L)})})})})])])}},xR=Ct("toolbar.button.execute"),lZ=n=>Ef((s,a)=>{Wx(n,s)(l=>{tn(s,xR,{buttonApi:l}),n.onAction(l)})}),Wf=Ct("common-button-display-events"),SR={[Ea()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Pu()]:["toolbar-button-events",Wf],[xi()]:["toolbar-button-events","dropdown-events","tooltipping"],[Gc()]:["focusing","alloy.base.behaviour",Wf]},D4=n=>gn(n.element,"width",hs(n.element,"width")),zI=(n,s,a)=>mu(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),wR=(n,s)=>zI(n,s,[]),Mp=(n,s)=>zI(n,s,[An.config({})]),ER=(n,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Ss(a.translate(n))],behaviours:nt([An.config({})])}),ed=Ct("update-menu-text"),Hb=Ct("update-menu-icon"),R4=Ct("update-tooltip-text"),TR=(n,s,a,l)=>{const d=Pt(U),g=Pt(n.tooltip),h=n.text.map(ae=>To(ER(ae,s,a.providers))),C=n.icon.map(ae=>To(Mp(ae,a.providers.icons))),x=(ae,Y)=>{const le=_t.getValue(ae);return En.focus(le),tn(le,"keydown",{raw:Y.event.raw}),Yl.close(le),A.some(!0)},T=n.role.fold(()=>({}),ae=>({role:ae})),_=A.from(n.listRole).map(ae=>({listRole:ae})).getOr({}),N=n.ariaLabel.fold(()=>({}),ae=>({"aria-label":a.providers.translate(ae)})),L=mu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),j=Ct("common-button-display-events"),Z="dropdown-events";return To(Yl.sketch({...n.uid?{uid:n.uid}:{},...T,..._,dom:{tag:"button",classes:[s,`${s}--select`].concat(ye(n.classes,ae=>`${s}--${ae}`)),attributes:{...N,...un(l)?{"data-mce-name":l}:{}}},components:zf([C.map(ae=>ae.asSpec()),h.map(ae=>ae.asSpec()),A.some(L)]),matchWidth:!0,useMinWidth:!0,onOpen:(ae,Y,le)=>{n.searchable&&FW(le)},dropdownBehaviours:nt([...n.dropdownBehaviours,Lm.button(()=>n.disabled||a.providers.checkUiComponentContext(n.context).shouldDisable),Cr(()=>a.providers.checkUiComponentContext(n.context)),Om.config({}),An.config({}),...n.tooltip.map(ae=>bs.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(ae),onShow:Y=>{if(Ia(g.get(),n.tooltip,(le,pe)=>pe!==le).getOr(!1)){const le=a.providers.translate(g.get().getOr(""));bs.setComponents(Y,a.providers.tooltips.getComponents({tooltipText:le}))}}}))).toArray(),xn(Z,[Hm(n,d),_p(n,d)]),xn(j,[ps((ae,Y)=>{n.listRole!=="listbox"&&D4(ae)})]),xn("update-dropdown-width-variable",[Ie(Hh(),(ae,Y)=>Yl.close(ae))]),xn("menubutton-update-display-text",[Ie(ed,(ae,Y)=>{h.bind(le=>le.getOpt(ae)).each(le=>{An.set(le,[Ss(a.providers.translate(Y.event.text))])})}),Ie(Hb,(ae,Y)=>{C.bind(le=>le.getOpt(ae)).each(le=>{An.set(le,[Mp(Y.event.icon,a.providers.icons)])})}),Ie(R4,(ae,Y)=>{const le=a.providers.translate(Y.event.text);ln(ae.element,"aria-label",le),g.set(A.some(Y.event.text))})])]),eventOrder:zo(SR,{[Gc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Pu()]:["toolbar-button-events",bs.name(),Z,j]}),sandboxBehaviours:nt([Xt.config({mode:"special",onLeft:x,onRight:x}),xn("dropdown-sandbox-events",[Ie(T6,(ae,Y)=>{PW(ae),Y.stop()}),Ie(k6,(ae,Y)=>{BW(ae,Y),Y.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Bx(!1,n.columns,n.presets),fakeFocus:n.searchable,...n.listRole==="listbox"?{}:{onHighlightItem:aI,onCollapseMenu:(ae,Y,le)=>{So.getHighlighted(le).each(pe=>{aI(ae,le,pe)})},onDehighlightItem:IW}}},getAnchorOverrides:()=>({maxHeightFunction:(ae,Y)=>{W2()(ae,Y-10)}}),fetch:ae=>Go.nu(jt(n.fetch,ae))})).asSpec()},N4=n=>De(n),VI=n=>n.type==="separator",UI=n=>mo(n,"getSubmenuItems"),iZ={type:"separator"},uZ=(n,s)=>{const a=ao(n,(l,d)=>N4(d)?d===""?l:d==="|"?l.length>0&&!VI(l[l.length-1])?l.concat([iZ]):l:mo(s,d.toLowerCase())?l.concat([s[d.toLowerCase()]]):l:l.concat([d]),[]);return a.length>0&&VI(a[a.length-1])&&a.pop(),a},uQ=(n,s)=>{const a=n.getSubmenuItems(),l=jI(a,s),d=zo(l.menus,{[n.value]:l.items}),g=zo(l.expansions,{[n.value]:n.value});return{item:n,menus:d,expansions:g}},dZ=n=>{const s=Vt(n,"value").getOrThunk(()=>Ct("generated-menu-item"));return zo({value:s},n)},jI=(n,s)=>{const a=uZ(De(n)?n.split(" "):n,s);return oo(a,(l,d)=>{if(UI(d)){const g=dZ(d),h=uQ(g,s);return{menus:zo(l.menus,h.menus),items:[h.item,...l.items],expansions:zo(l.expansions,h.expansions)}}else return{...l,items:[d,...l.items]}},{menus:{},expansions:{},items:[]})},kR=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),mZ=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),ah=(n,s,a,l)=>{const d=Ct("primary-menu"),g=jI(n,a.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=kR(l),C=C4(d,g.items,s,a,l.isHorizontalMenu,h),x=mZ(l),T=$s(g.menus,(N,L)=>C4(L,N,s,a,!1,x)),_=zo(T,ff(d,C));return A.from(pb.tieredData(d,_,g.expansions))},nS=n=>!mo(n,"items"),AR="data-value",M4=(n,s,a,l,d)=>ye(a,g=>nS(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===l,onAction:()=>{_t.setValue(n,g.value),tn(n,wl,{name:s}),En.focus(n)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>M4(n,s,g.items,l,d)}),_R=(n,s)=>ha(n,a=>nS(a)?$r(a.value===s,a):_R(a.items,s)),WI=(n,s,a)=>{const l=cn(n.items,T=>!nS(T)),d=s.shared.providers,g=a.bind(T=>_R(n.items,T)).orThunk(()=>Oo(n.items).filter(nS)),h=n.label.map(T=>sh(T,d)),C=Yn.parts.field({dom:{},factory:{sketch:T=>TR({context:n.context,uid:T.uid,text:g.map(_=>_.text),icon:A.none(),tooltip:A.none(),role:$r(!l,"combobox"),...l?{}:{listRole:"listbox"},ariaLabel:n.label,fetch:(_,N)=>{const L=M4(_,n.name,n.items,_t.getValue(_),l);N(ah(L,Zd.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:oe(U),getApi:oe({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[us.config({}),Lb(g.map(_=>_.value),_=>Rr(_.element,AR),(_,N)=>{_R(n.items,N).each(L=>{ln(_.element,AR,L.value),tn(_,ed,{text:L.text})})})]},"tox-listbox",s.shared)}}),x={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return Yn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:en([h.toArray(),[x]]),fieldBehaviours:nt([Ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:T=>{Yn.getField(T).each(Ft.disable)},onEnabled:T=>{Yn.getField(T).each(Ft.enable)}})])})},py=(n,s)=>({dom:{tag:"div",classes:n.classes},components:ye(n.items,s.shared.interpreter)}),ZI=(n,s,a)=>{const l=ye(n.items,x=>({text:s.translate(x.text),value:x.value})),d=n.label.map(x=>sh(x,s)),g=Yn.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:n.size},options:l,factory:R_,selectBehaviours:nt([Ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),us.config({}),xn("selectbox-change",[Ie(yg(),(x,T)=>{tn(x,wl,{name:n.name})})])])}),h=n.size>1?A.none():A.some(mu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:en([[g],h.toArray()])};return Yn.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:en([d.toArray(),[C]]),fieldBehaviours:nt([Ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{Yn.getField(x).each(Ft.disable)},onEnabled:x=>{Yn.getField(x).each(Ft.enable)}}),Cr(()=>s.checkUiComponentContext(n.context))])})},GI=n=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let l=n.value.toFixed(a(n.unit));return l.indexOf(".")!==-1&&(l=l.replace(/\.?0*$/,"")),l+n.unit},P4=n=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n);if(a!==null){const l=parseFloat(a[1]),d=a[2];return Wt.value({value:l,unit:d})}else return Wt.error(n)},qI=(n,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},l=d=>mo(a,d);return n.unit===s?A.some(n.value):l(n.unit)&&l(s)?a[n.unit]===a[s]?A.some(n.value):A.some(n.value/a[n.unit]*a[s]):A.none()},by=n=>A.none(),fZ=(n,s)=>a=>qI(a,s).map(l=>({value:l*n,unit:s})),KI=(n,s)=>{const a=P4(n).toOptional(),l=P4(s).toOptional();return Ia(a,l,(d,g)=>qI(d,g.unit).map(h=>g.value/h).map(h=>fZ(h,g.unit)).getOr(by)).getOr(by)},YI=(n,s)=>{let a=by;const l=Ct("ratio-event"),d=ne=>mu(ne,{tag:"span",classes:["tox-icon","tox-lock-icon__"+ne]},s.icons),g=()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,h=Cr(()=>s.checkUiComponentContext(n.context)),C=n.label.getOr("Constrain proportions"),x=s.translate(C),T=yr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":x,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:nt([Ft.config({disabled:g}),h,us.config({}),bs.config(s.tooltips.getConfig({tooltipText:x}))])}),_=ne=>({dom:{tag:"div",classes:["tox-form__group"]},components:ne}),N=ne=>Yn.parts.field({factory:Ff,inputClasses:["tox-textfield"],inputBehaviours:nt([Ft.config({disabled:g}),h,us.config({}),xn("size-input-events",[Ie(Qi(),(ae,Y)=>{tn(ae,l,{isField1:ne})}),Ie(yg(),(ae,Y)=>{tn(ae,wl,{name:n.name})})])]),selectOnFocus:!1}),L=ne=>({dom:{tag:"label",classes:["tox-label"]},components:[Ss(s.translate(ne))]}),j=yr.parts.field1(_([Yn.parts.label(L("Width")),N(!0)])),Z=yr.parts.field2(_([Yn.parts.label(L("Height")),N(!1)]));return yr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[j,Z,_([L(tg),T])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(ne,ae,Y)=>{P4(_t.getValue(ne)).each(le=>{a(le).each(pe=>{_t.setValue(ae,GI(pe))})})},coupledFieldBehaviours:nt([Ft.config({disabled:g,onDisabled:ne=>{yr.getField1(ne).bind(Yn.getField).each(Ft.disable),yr.getField2(ne).bind(Yn.getField).each(Ft.disable),yr.getLock(ne).each(Ft.disable)},onEnabled:ne=>{yr.getField1(ne).bind(Yn.getField).each(Ft.enable),yr.getField2(ne).bind(Yn.getField).each(Ft.enable),yr.getLock(ne).each(Ft.enable)}}),Cr(()=>s.checkUiComponentContext("mode:design")),xn("size-input-events2",[Ie(l,(ne,ae)=>{const Y=ae.event.isField1,le=Y?yr.getField1(ne):yr.getField2(ne),pe=Y?yr.getField2(ne):yr.getField1(ne),Ee=le.map(_t.getValue).getOr(""),Oe=pe.map(_t.getValue).getOr("");a=KI(Ee,Oe)})])])})},gZ=(n,s,a)=>{const l=jd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ss(s.translate(n.label))]}),d=jd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=jd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return jd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n.min,maxX:n.max,getInitialValue:oe(a.getOrThunk(()=>(Math.abs(n.max)-Math.abs(n.min))/2))},components:[l,d,g],sliderBehaviours:nt([qd.self(),En.config({})]),onChoose:(h,C,x)=>{tn(h,wl,{name:n.name,value:x})},onChange:(h,C,x)=>{tn(h,wl,{name:n.name,value:x})}})},hZ=(n,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),l=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ye(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:ye(C,d)}),h=C=>({dom:{tag:"tbody"},components:ye(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[l(n.header),h(n.cells)],behaviours:nt([us.config({}),En.config({})])}},XI=(n,s)=>{const a=n.label.map(Z=>sh(Z,s)),l=[Ft.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable}),Cr(()=>s.checkUiComponentContext(n.context)),Xt.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:Z=>(Wn(Z,Jx),A.some(!0))}),xn("textfield-change",[Ie(Mu(),(Z,ne)=>{tn(Z,wl,{name:n.name})}),Ie(v0(),(Z,ne)=>{tn(Z,wl,{name:n.name})})]),us.config({})],d=n.validation.map(Z=>lu.config({getRoot:ne=>Vi(ne.element),invalidClass:"tox-invalid",validator:{validate:ne=>{const ae=_t.getValue(ne),Y=Z.validator(ae);return Go.pure(Y===!0?Wt.value(ae):Wt.error(Y))},validateOnLoad:Z.validateOnLoad}})).toArray(),g=n.placeholder.fold(oe({}),Z=>({placeholder:s.translate(Z)})),h=n.inputMode.fold(oe({}),Z=>({inputmode:Z})),x={...n.spellcheck.fold(oe({}),Z=>({spellcheck:Z})),...g,...h,"data-mce-name":n.name},T=Yn.parts.field({tag:n.multiline===!0?"textarea":"input",...n.data.map(Z=>({data:Z})).getOr({}),inputAttributes:x,inputClasses:[n.classname],inputBehaviours:nt(en([l,d])),selectOnFocus:!1,factory:Ff}),_=n.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,L=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),j=[Ft.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:Z=>{Yn.getField(Z).each(Ft.disable)},onEnabled:Z=>{Yn.getField(Z).each(Ft.enable)}}),Cr(()=>s.checkUiComponentContext(n.context))];return gy(a,_,L,j)},QI=(n,s,a)=>XI({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:!n.enabled,classname:"tox-textfield",validation:A.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:A.none()},s),pZ=(n,s,a)=>XI({name:n.name,multiline:!0,label:n.label,inputMode:A.none(),placeholder:n.placeholder,flex:!0,disabled:!n.enabled,classname:"tox-textarea",validation:A.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:n.spellcheck},s),JI=n=>({isEnabled:()=>!Ft.isDisabled(n),setEnabled:s=>Ft.set(n,!s),setActive:s=>{const a=n.element;s?(jo(a,"tox-tbtn--enabled"),ln(a,"aria-pressed",!0)):(Rs(a,"tox-tbtn--enabled"),gs(a,"aria-pressed"))},isActive:()=>cr(n.element,"tox-tbtn--enabled"),setTooltip:s=>{tn(n,R4,{text:s})},setText:s=>{tn(n,ed,{text:s})},setIcon:s=>tn(n,Hb,{icon:s})}),oS=(n,s,a,l,d=!0,g)=>{const h=n.buttonType==="bordered"?["bordered"]:[];return TR({text:n.text,icon:n.icon,tooltip:n.tooltip,ariaLabel:n.tooltip,searchable:n.search.isSome(),role:l,fetch:(C,x)=>{const T={pattern:n.search.isSome()?Qx(C):""};n.fetch(_=>{x(ah(_,Zd.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:n.search}))},T,JI(C))},onSetup:n.onSetup,getApi:C=>JI(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[us.config({})]:[]],context:n.context},s,a.shared,g)},bZ=(n,s,a)=>{const l=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(x=>{s().getOpt(x).each(T=>{Ir(T.element),tn(T,Gd,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(ye(n,h=>{const C=h.text.fold(()=>({}),x=>({text:x}));return{type:h.type,active:!1,...C,context:h.context,onAction:l(h),onSetup:d(h)}}))}},eF=n=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":n}},components:[Ss(n)]}),tF=(n,s,a)=>{n.customStateIcon.each(l=>s.push(oF(l,a.shared.providers.icons,n.customStateIconTooltip.fold(()=>[],d=>[bs.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},nF=Ct("leaf-label-event-id"),OR=({leaf:n,onLeafAction:s,visible:a,treeId:l,selectedId:d,backstage:g})=>{const h=n.menu.map(x=>oS(x,"tox-mbtn",g,A.none(),a)),C=[eF(n.title)];return tF(n,C,g),h.each(x=>C.push(x)),sa.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:x=>{s(n.id),x.getSystem().broadcastOn([`update-active-item-${l}`],{value:n.id})},eventOrder:{[oa()]:[nF,"keying"]},buttonBehaviours:nt([...a?[us.config({})]:[],eo.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Rc.config({channels:{[`update-active-item-${l}`]:{onReceive:(x,T)=>{(T.value===n.id?eo.on:eo.off)(x)}}}}),xn(nF,[ps((x,T)=>{d.each(_=>{(_===n.id?eo.on:eo.off)(x)})}),Ie(oa(),(x,T)=>{const _=T.event.raw.code==="ArrowLeft",N=T.event.raw.code==="ArrowRight";_?(Ll(x.element,".tox-tree--directory").each(L=>{x.getSystem().getByDom(L).each(j=>{yd(L,".tox-tree--directory__label").each(Z=>{j.getSystem().getByDom(Z).each(En.focus)})})}),T.stop()):N&&T.stop()})])])})},oF=(n,s,a,l,d)=>mu(n,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(l||[]),behaviours:a,attributes:d},s),vZ=(n,s)=>oF(n,s,[]),sF=Ct("directory-label-event-id"),rF=({directory:n,visible:s,noChildren:a,backstage:l})=>{const d=n.menu.map(C=>oS(C,"tox-mbtn",l,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[vZ("chevron-right",l.shared.providers.icons)]},eF(n.title)];tF(n,g,l),d.each(C=>{g.push(C)});const h=C=>{Ll(C.element,".tox-tree--directory").each(x=>{C.getSystem().getByDom(x).each(T=>{const _=!eo.isOn(T);eo.toggle(T),tn(C,"expand-tree-node",{expanded:_,node:n.id})})})};return sa.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[oa()]:[sF,"keying"]},buttonBehaviours:nt([...s?[us.config({})]:[],xn(sF,[Ie(oa(),(C,x)=>{const T=x.event.raw.code==="ArrowRight",_=x.event.raw.code==="ArrowLeft";T&&a&&x.stop(),(T||_)&&Ll(C.element,".tox-tree--directory").each(N=>{C.getSystem().getByDom(N).each(L=>{!eo.isOn(L)&&T||eo.isOn(L)&&_?(h(C),x.stop()):_&&!eo.isOn(L)&&(Ll(L.element,".tox-tree--directory").each(j=>{yd(j,".tox-tree--directory__label").each(Z=>{L.getSystem().getByDom(Z).each(En.focus)})}),x.stop())})})})])])})},yZ=({children:n,onLeafAction:s,visible:a,treeId:l,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:n.map(C=>C.type==="leaf"?OR({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:l,backstage:h}):DR({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:h})),behaviours:nt([Yc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),An.config({})])}),CZ=Ct("directory-event-id"),DR=({directory:n,onLeafAction:s,labelTabstopping:a,treeId:l,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=n,x=Pt(g),T=N=>C.map(L=>L.type==="leaf"?OR({leaf:L,selectedId:h,onLeafAction:s,visible:N,treeId:l,backstage:d}):DR({directory:L,expandedIds:x.get(),selectedId:h,onLeafAction:s,labelTabstopping:N,treeId:l,backstage:d})),_=g.includes(n.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[rF({directory:n,visible:a,noChildren:n.children.length===0,backstage:d}),yZ({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:_,treeId:l,backstage:d})],behaviours:nt([xn(CZ,[ps((N,L)=>{eo.set(N,_)}),Ie("expand-tree-node",(N,L)=>{const{expanded:j,node:Z}=L.event;x.set(j?[...x.get(),Z]:x.get().filter(ne=>ne!==Z))})]),eo.config({...n.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(N,L)=>{const j=N.components()[1],Z=T(L);L?Yc.grow(j):Yc.shrink(j),An.set(j,Z)}})])}},xZ=Ct("tree-event-id"),SZ=(n,s)=>{const a=n.onLeafAction.getOr(U),l=n.onToggleExpand.getOr(U),d=n.defaultExpandedIds,g=Pt(d),h=Pt(n.defaultSelectedId),C=Ct("tree-id"),x=(T,_)=>n.items.map(N=>N.type==="leaf"?OR({leaf:N,selectedId:T,onLeafAction:a,visible:!0,treeId:C,backstage:s}):DR({directory:N,selectedId:T,onLeafAction:a,expandedIds:_,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:x(h.get(),g.get()),behaviours:nt([Xt.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),xn(xZ,[Ie("expand-tree-node",(T,_)=>{const{expanded:N,node:L}=_.event;g.set(N?[...g.get(),L]:g.get().filter(j=>j!==L)),l(g.get(),{expanded:N,node:L})})]),Rc.config({channels:{[`update-active-item-${C}`]:{onReceive:(T,_)=>{h.set(A.some(_.value)),An.set(T,x(A.some(_.value),g.get()))}}}}),An.config({})])}},B4=(n,s,a=[],l,d,g,h)=>{const C=s.fold(()=>({}),_=>({action:_})),x={buttonBehaviours:nt([Lm.item(()=>!n.enabled||h.checkUiComponentContext(n.context).shouldDisable),Cr(()=>h.checkUiComponentContext(n.context)),us.config({}),...g.map(_=>bs.config(h.tooltips.getConfig({tooltipText:h.translate(_)}))).toArray(),xn("button press",[G2("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},T=zo(x,{dom:l});return zo(T,{components:d})},aF=(n,s,a,l=[],d)=>{const g=n.tooltip.map(T=>({"aria-label":a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=n.icon.map(T=>wR(T,a.icons)),x=zf([C]);return B4(n,s,l,h,x,n.tooltip,a)},RR=n=>{switch(n){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},NR=(n,s,a,l=[],d=[])=>{const g=a.translate(n.text),h=n.icon.map(j=>wR(j,a.icons)),C=[h.getOrThunk(()=>Ss(g))],x=n.buttonType.getOr(!n.primary&&!n.borderless?"secondary":"primary"),N={tag:"button",classes:[...RR(x),...h.isSome()?["tox-button--icon"]:[],...n.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":n.text}},L=n.icon.map(oe(g));return B4(n,s,l,N,C,L,a)},cF=(n,s,a,l=[],d=[])=>{const g=NR(n,A.some(s),a,l,d);return sa.sketch(g)},MR=(n,s)=>a=>{s==="custom"?tn(a,Gd,{name:n,value:{}}):s==="submit"?Wn(a,Jx):s==="cancel"?Wn(a,rh):console.error("Unknown button type: ",s)},lF=(n,s)=>s==="menu",PR=(n,s)=>s==="custom"||s==="cancel"||s==="submit",wZ=(n,s)=>s==="togglebutton",EZ=(n,s,a)=>{const l=n.icon.map(Y=>Mp(Y,s.icons)).map(To),d=Y=>{tn(Y,Gd,{name:n.name,value:{setIcon:le=>{l.map(pe=>pe.getOpt(Y).each(Ee=>{An.set(Ee,[Mp(le,s.icons)])}))}}})},g=n.buttonType.getOr(n.primary?"primary":"secondary"),h={...n,name:n.name??"",tooltip:n.tooltip,enabled:n.enabled??!1},C=h.tooltip.or(n.text).map(Y=>({"aria-label":s.translate(Y)})).getOr({}),x=RR(g??"secondary"),T=n.icon.isSome()&&n.text.isSome(),_={tag:"button",classes:[...x.concat(n.icon.isSome()?["tox-button--icon"]:[]),...n.active?["tox-button--enabled"]:[],...T?["tox-button--icon-and-text"]:[]],attributes:{...C,...un(a)?{"data-mce-name":a}:{}}},N=[],L=s.translate(n.text.getOr("")),j=Ss(L),ne=[...zf([l.map(Y=>Y.asSpec())]),...n.text.isSome()?[j]:[]],ae=B4(h,A.some(d),N,_,ne,n.tooltip,s);return sa.sketch(ae)},sS=(n,s,a)=>{if(lF(n,s)){const l=()=>h,d=n,g={...n,buttonType:"default",type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(n.enabled),U),fetch:bZ(d.items,l,a)},h=To(oS(g,"tox-tbtn",a,A.none(),!0,n.text.or(n.tooltip).getOrUndefined()));return h.asSpec()}else if(PR(n,s)){const l=MR(n.name,s),d={...n,context:s==="cancel"?"any":n.context,borderless:!1};return cF(d,l,a.shared.providers,[])}else{if(wZ(n,s))return EZ(n,a.shared.providers,n.text.or(n.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},TZ=(n,s)=>{const a=MR(n.name,"custom");return UW(A.none(),Yn.parts.field({factory:sa,...NR(n,A.some(a),s,[w4(""),qd.self()])}))},iF={type:"separator"},kZ=n=>({type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:U}),vy=(n,s)=>({type:"menuitem",value:s,text:n,meta:{attach:void 0},onAction:U}),AZ=n=>ye(n,kZ),uF=(n,s)=>Ln(s,a=>a.type===n),dF=(n,s)=>AZ(uF(n,s)),_Z=n=>dF("header",n.targets),Vm=n=>dF("anchor",n.targets),$4=n=>A.from(n.anchorTop).map(s=>vy("<top>",s)).toArray(),I4=n=>A.from(n.anchorBottom).map(s=>vy("<bottom>",s)).toArray(),OZ=n=>ye(n,s=>vy(s,s)),BR=n=>ao(n,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(iF,a),[]),$R=(n,s)=>{const a=n.toLowerCase();return Ln(s,l=>{const d=l.meta!==void 0&&l.meta.text!==void 0?l.meta.text:l.text,g=l.value??"";return fs(d.toLowerCase(),a)||fs(g.toLowerCase(),a)})},IR=(n,s,a)=>{const l=_t.getValue(s),d=l?.meta?.text??l.value;return a.getLinkInformation().fold(()=>[],h=>{const C=$R(d,OZ(a.getHistory(n)));return n==="file"?BR([C,$R(d,_Z(h)),$R(d,en([$4(h),Vm(h),I4(h)]))]):C})},FR=Ct("aria-invalid"),LR=(n,s,a,l)=>{const d=s.shared.providers,g=le=>{const pe=_t.getValue(le);a.addToHistory(pe.value,n.filetype)},h={...l.map(le=>({initialData:le})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:le=>{const pe=IR(n.filetype,le,a),Ee=ah(pe,Zd.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return Go.pure(Ee)},getHotspot:le=>Z.getOpt(le),onSetValue:(le,pe)=>{le.hasConfigured(lu)&&lu.run(le).get(U)},typeaheadBehaviours:nt([...a.getValidationHandler().map(le=>lu.config({getRoot:pe=>Vi(pe.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(pe,Ee)=>{_.getOpt(pe).each(Oe=>{ln(Oe.element,"title",d.translate(Ee))})}},validator:{validate:pe=>{const Ee=_t.getValue(pe);return cd.nu(Oe=>{le({type:n.filetype,url:Ee.value},ht=>{if(ht.status==="invalid"){ln(pe.element,"aria-errormessage",FR);const Ue=Wt.error(ht.message);Oe(Ue)}else{gs(pe.element,"aria-errormessage");const Ue=Wt.value(ht.message);Oe(Ue)}})})},validateOnLoad:!1}})).toArray(),Ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable}),us.config({}),xn("urlinput-events",[Ie(Mu(),le=>{const pe=vc(le.element),Ee=pe.trim();Ee!==pe&&gi(le.element,Ee),n.filetype==="file"&&tn(le,wl,{name:n.name})}),Ie(yg(),le=>{tn(le,wl,{name:n.name}),g(le)}),Ie(v0(),le=>{tn(le,wl,{name:n.name}),g(le)})])]),eventOrder:{[Mu()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:le=>le.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Bx(!1,1,"normal")},onExecute:(le,pe,Ee)=>{tn(pe,Jx,{})},onItemExecute:(le,pe,Ee,Oe)=>{g(le),tn(le,wl,{name:n.name})}},C=Yn.parts.field({...h,factory:cO}),x=n.label.map(le=>sh(le,d)),_=To(((le,pe,Ee=le,Oe=le)=>mu(Ee,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+le],attributes:{title:d.translate(Oe),"aria-live":"polite",...pe.fold(()=>({}),ht=>({id:ht}))}},d.icons))("invalid",A.some(FR),"warning")),N=To({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),L=a.getUrlPicker(n.filetype),j=Ct("browser.url.event"),Z=To({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,N.asSpec()],behaviours:nt([Ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable})])}),ne=To(cF({context:n.context,name:n.name,icon:A.some("browse"),text:n.picker_text.or(n.label).getOr(""),enabled:n.enabled,primary:!1,buttonType:A.none(),borderless:!0},le=>Wn(le,j),d,[],["tox-browse-url"])),ae=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:en([[Z.asSpec()],L.map(()=>ne.asSpec()).toArray()])}),Y=le=>{Fe.getCurrent(le).each(pe=>{const Ee=_t.getValue(pe),Oe={fieldname:n.name,...Ee};L.each(ht=>{ht(Oe).get(Ue=>{_t.setValue(pe,Ue),tn(le,wl,{name:n.name})})})})};return Yn.sketch({dom:uI(),components:x.toArray().concat([ae()]),fieldBehaviours:nt([Ft.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:le=>{Yn.getField(le).each(Ft.disable),ne.getOpt(le).each(Ft.disable)},onEnabled:le=>{Yn.getField(le).each(Ft.enable),ne.getOpt(le).each(Ft.enable)}}),Cr(()=>d.checkUiComponentContext(n.context)),xn("url-input-events",[Ie(j,Y)])])})},DZ=(n,s)=>{const a=WV(n.icon,s.icons);return Am.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:n.url?void 0:a},components:n.url?[sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(n.iconTooltip)}},action:l=>tn(l,Gd,{name:"alert-banner",value:n.url}),buttonBehaviours:nt([PO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(n.text)}}]})},RZ=(n,s,a)=>{const l=x=>(x.element.dom.click(),A.some(!0)),d=Yn.parts.field({factory:{sketch:Yt},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:nt([qd.self(),Ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{Vi(x.element).each(T=>jo(T,"tox-checkbox--disabled"))},onEnabled:x=>{Vi(x.element).each(T=>Rs(T,"tox-checkbox--disabled"))}}),us.config({}),En.config({}),vI(a,r1,Zi),Xt.config({mode:"special",onEnter:l,onSpace:l,stopSpaceKeyup:!0}),xn("checkbox-events",[Ie(yg(),(x,T)=>{tn(x,wl,{name:n.name})})])])}),g=Yn.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ss(s.translate(n.label))],behaviours:nt([Om.config({})])}),h=x=>mu(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),C=To({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return Yn.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:nt([Ft.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),Cr(()=>s.checkUiComponentContext(n.context))])})},mF=(n,s)=>{const a=["tox-form__group",...n.stretched?["tox-form__group--stretched"]:[]],l=xn("htmlpanel",[ps(d=>{n.onInit(d.element.dom)})]);return n.presets==="presentation"?Am.sketch({dom:{tag:"div",classes:a,innerHtml:n.html},containerBehaviours:nt([bs.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Bo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>sr(d.element)).each(g=>{Jr(g,"data-mce-tooltip").each(h=>{bs.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Bo(d.element,"[data-mce-tooltip]:hover").orThunk(()=>sr(d.element).filter(g=>Jr(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:oe([kr,Ns,Pr,ka,Tr,da]),onRtl:oe([kr,Ns,Pr,ka,Tr,da])},bubble:vl(0,-2,{})})}),l])}):Am.sketch({dom:{tag:"div",classes:a,innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:nt([us.config({}),En.config({}),l])})},aa=n=>(s,a,l,d,g)=>Vt(a,"name").fold(()=>n(a,d,A.none(),g),h=>s.field(h,n(a,d,Vt(l,h),g))),NZ=n=>(s,a,l,d,g)=>{const h=zo(a,{source:"dynamic"});return aa(n)(s,h,l,d,g)},HR={bar:aa((n,s)=>lI(n,s.shared)),collection:aa((n,s,a)=>jW(n,s.shared.providers,a)),alertbanner:aa((n,s)=>DZ(n,s.shared.providers)),input:aa((n,s,a)=>QI(n,s.shared.providers,a)),textarea:aa((n,s,a)=>pZ(n,s.shared.providers,a)),label:aa((n,s,a,l)=>cZ(n,s.shared,l)),iframe:NZ((n,s,a)=>tS(n,s.shared.providers,a)),button:aa((n,s)=>TZ(n,s.shared.providers)),checkbox:aa((n,s,a)=>RZ(n,s.shared.providers,a)),colorinput:aa((n,s,a)=>ZW(n,s.shared,s.colorinput,a)),colorpicker:aa((n,s,a)=>k4(n,s.shared.providers,a)),dropzone:aa((n,s,a)=>tZ(n,s.shared.providers,a)),grid:aa((n,s)=>nZ(n,s.shared)),listbox:aa((n,s,a)=>WI(n,s,a)),selectbox:aa((n,s,a)=>ZI(n,s.shared.providers,a)),sizeinput:aa((n,s)=>YI(n,s.shared.providers)),slider:aa((n,s,a)=>gZ(n,s.shared.providers,a)),urlinput:aa((n,s,a)=>LR(n,s,s.urlinput,a)),customeditor:aa(JW),htmlpanel:aa((n,s)=>mF(n,s.shared.providers)),imagepreview:aa((n,s,a)=>aZ(n,a)),table:aa((n,s)=>hZ(n,s.shared.providers)),tree:aa((n,s)=>SZ(n,s)),panel:aa((n,s)=>py(n,s))},MZ={field:(n,s)=>s,record:oe([])},fF=(n,s,a,l,d)=>{const g=zo(l,{shared:{interpreter:h=>F4(n,h,a,g,d)}});return F4(n,s,a,g,d)},F4=(n,s,a,l,d)=>Vt(HR,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(n,s,a,l,d)),zR=(n,s,a,l)=>F4(MZ,n,s,a,l),rS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},PZ=(n,s,a)=>{const d={maxHeightFunction:Ng()},g=()=>({type:"node",root:li(fr(n())),node:A.from(n()),bubble:vl(12,12,rS),layouts:{onRtl:()=>[kc],onLtr:()=>[Rg]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:vl(-12,12,rS),layouts:{onRtl:()=>[Pr,Tr,kr],onLtr:()=>[Tr,Pr,kr]},overrides:d});return()=>a()?g():h()},BZ=(n,s,a,l)=>{const g={maxHeightFunction:Ng()},h=()=>({type:"node",root:li(fr(s())),node:A.from(s()),bubble:vl(12,12,rS),layouts:{onRtl:()=>[Ha],onLtr:()=>[Ha]},overrides:g}),C=()=>n?{type:"node",root:li(fr(s())),node:A.from(s()),bubble:vl(0,-br(s()),rS),layouts:{onRtl:()=>[Ns],onLtr:()=>[Ns]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:vl(0,0,rS),layouts:{onRtl:()=>[Ns],onLtr:()=>[Ns]},overrides:g};return()=>l()?h():C()},$Z=(n,s,a)=>{const l=()=>({type:"node",root:li(fr(n())),node:A.from(n()),layouts:{onRtl:()=>[Ha],onLtr:()=>[Ha]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[kr],onLtr:()=>[kr]}});return()=>a()?l():d()},gF=(n,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=n.selection.getRng(),l=n.model.table.getSelectedCells();if(l.length>1){const d=l[0],g=l[l.length-1],h={firstCell:at.fromDom(d),lastCell:at.fromDom(g)};return A.some(h)}return A.some(zl.range(at.fromDom(a.startContainer),a.startOffset,at.fromDom(a.endContainer),a.endOffset))}}),IZ=n=>s=>({type:"node",root:n(),node:s}),FZ=(n,s,a,l)=>{const d=Jv(n),g=()=>at.fromDom(n.getBody()),h=()=>at.fromDom(n.getContentAreaContainer()),C=()=>d||!l();return{inlineDialog:PZ(h,s,C),inlineBottomDialog:BZ(n.inline,h,a,C),banner:$Z(h,s,C),cursor:gF(n,g),node:IZ(g)}},LZ=n=>(s,a)=>{aR(n)(s,a)},HZ=n=>()=>eR(n),zZ=n=>s=>h4(n,s),VZ=n=>s=>V$(n,s),UZ=n=>({colorPicker:LZ(n),hasCustomColors:HZ(n),getColors:zZ(n),getColorCols:VZ(n)}),jZ=n=>()=>jB(n),WZ=n=>({isDraggableModal:jZ(n)}),ZZ=n=>{const s=Pt(FT(n)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},GZ=n=>Un(n,"items"),hF=n=>Un(n,"format"),VR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],pF=n=>mo(n,"items"),L4=n=>mo(n,"block"),bF=n=>mo(n,"inline"),qZ=n=>mo(n,"selector"),vF=n=>ao(n,(s,a)=>{if(pF(a)){const l=vF(a.items);return{customFormats:s.customFormats.concat(l.customFormats),formats:s.formats.concat([{title:a.title,items:l.formats}])}}else if(bF(a)||L4(a)||qZ(a)){const d=`custom-${De(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),KZ=(n,s)=>{const a=vF(s),l=d=>{He(d,g=>{n.formatter.has(g.name)||n.formatter.register(g.name,g.format)})};return n.formatter?l(a.customFormats):n.on("init",()=>{l(a.customFormats)}),a.formats},yF=n=>NB(n).map(s=>{const a=KZ(n,s);return MB(n)?VR.concat(a):a}).getOr(VR),YZ=n=>{const s=xo(n);return s.length===1&&bt(s,"title")},CF=(n,s,a)=>({...n,type:"formatter",isSelected:s(n.format),getStylePreview:a(n.format)}),xF=(n,s,a,l)=>{const d=x=>CF(x,a,l),g=x=>{const T=C(x.items);return{...x,type:"submenu",getStyleItems:oe(T)}},h=x=>{const T=De(x.name)?x.name:Ct(x.title),_=`custom-${T}`,N={...x,type:"formatter",format:_,isSelected:a(_),getStylePreview:l(_)};return n.formatter.register(T,N),N},C=x=>ye(x,T=>GZ(T)?g(T):hF(T)?d(T):YZ(T)?{...T,type:"separator"}:h(T));return C(s)},SF=n=>{const s=C=>()=>n.formatter.match(C),a=C=>()=>{const x=n.formatter.get(C);return x!==void 0?A.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(C))}):A.none()},l=Pt([]),d=Pt([]),g=Pt(!1);return n.on("PreInit",C=>{const x=yF(n),T=xF(n,x,s,a);l.set(T)}),n.on("addStyleModifications",C=>{const x=xF(n,C.items,s,a);d.set(x),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:l.get(),x=d.get();return C.concat(x)}}},wF=n=>{let l=0;const d=()=>l>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Ss(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:oe(300),exclusive:!0,lazySink:n,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(x,T)=>{l++,C.onShow&&C.onShow(x,T)},onHide:(x,T)=>{l--,C.onHide&&C.onHide(x,T)},onSetup:C.onSetup}),getComponents:g}},XZ=n=>un(n)&&n.nodeType===1,EF=jf.trim,TF=n=>s=>!!(XZ(s)&&(s.contentEditable===n||s.getAttribute("data-mce-contenteditable")===n)),QZ=TF("true"),JZ=TF("false"),Pp=(n,s,a,l,d)=>({type:n,title:s,url:a,level:l,attach:d}),kF=n=>{let s=n;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return QZ(s)}return!1},aS=(n,s)=>ye(Hr(at.fromDom(s),n),a=>a.dom),cS=n=>n.innerText||n.textContent,AF=n=>n.id?n.id:Ct("h"),_F=n=>n&&n.nodeName==="A"&&(n.id||n.name)!==void 0,OF=n=>_F(n)&&DF(n),eG=n=>n&&/^(H[1-6])$/.test(n.nodeName),DF=n=>kF(n)&&!JZ(n),tG=n=>eG(n)&&DF(n),nG=n=>eG(n)?parseInt(n.nodeName.substr(1),10):0,oG=n=>{const s=AF(n),a=()=>{n.id=s};return Pp("header",cS(n)??"","#"+s,nG(n),a)},sG=n=>{const s=n.id||n.name,a=cS(n);return Pp("anchor",a||"#"+s,"#"+s,0,U)},rG=n=>ye(Ln(n,tG),oG),yy=n=>ye(Ln(n,OF),sG),lS=n=>aS("h1,h2,h3,h4,h5,h6,a:not([href])",n),UR=n=>EF(n.title).length>0,aG={find:n=>{const s=lS(n);return Ln(rG(s).concat(yy(s)),UR)}},Cy="tinymce-url-history",RF=5,xy=n=>De(n)&&/^https?/.test(n),NF=n=>$n(n)&&n.length<=RF&&We(n,xy),MF=n=>et(n)&&lc(n,s=>!NF(s)).isNone(),PF=()=>{const n=Ib.getItem(Cy);if(n===null)return{};let s;try{s=JSON.parse(n)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+Cy+" was not valid JSON",a),{};throw a}return MF(s)?s:(console.log("Local storage "+Cy+" was not valid format",s),{})},cG=n=>{if(!MF(n))throw new Error(`Bad format for history:
`+JSON.stringify(n));Ib.setItem(Cy,JSON.stringify(n))},lG=n=>{const s=PF();return Vt(s,n).getOr([])},iG=(n,s)=>{if(!xy(n))return;const a=PF(),l=Vt(a,s).getOr([]),d=Ln(l,g=>g!==n);a[s]=[n].concat(d).slice(0,RF),cG(a)},BF=n=>!!n,$F=n=>$s(jf.makeMap(n,/[, ]/),BF),H4=n=>A.from(zB(n)),jR=n=>{const s=A.from(hO(n)).filter(BF).map($F);return H4(n).fold(an,a=>s.fold(St,l=>xo(l).length>0?l:!1))},uG=(n,s)=>{const a=jR(n);return vn(a)?a?H4(n):A.none():a[s]?H4(n):A.none()},z4=(n,s)=>uG(n,s).map(a=>l=>Go.nu(d=>{const g=(C,x)=>{if(!De(C))throw new Error("Expected value to be string");if(x!==void 0&&!et(x))throw new Error("Expected meta to be a object");d({value:C,meta:x})},h={filetype:s,fieldname:l.fieldname,...A.from(l.meta).getOr({})};a.call(n,g,l.value,h)})),iS=n=>A.from(n).filter(De).getOrUndefined(),IF=n=>pO(n)?A.some({targets:aG.find(n.getBody()),anchorTop:iS(UB(n)),anchorBottom:iS(bO(n))}):A.none(),dG=n=>A.from(VB(n)),mG=n=>({getHistory:lG,addToHistory:iG,getLinkInformation:()=>IF(n),getValidationHandler:()=>dG(n),getUrlPicker:s=>z4(n,s)}),fG=(n,s,a,l)=>{const d=Pt(!1),g=ZZ(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Nc.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:wF(n.dialog),checkUiComponentContext:Y=>{if(MT(s))return{contextType:"disabled",shouldDisable:!0};const[le,pe=""]=Y.split(":"),Ee=s.ui.registry.getAll().contexts,Oe=Vt(Ee,le).fold(()=>Vt(Ee,"mode").map(ht=>ht("design")).getOr(!1),ht=>pe.charAt(0)==="!"?!ht(pe.slice(1)):ht(pe));return{contextType:le,shouldDisable:!Oe}}},C=mG(s),x=SF(s),T=UZ(s),_=WZ(s),N=()=>d.get(),L=Y=>d.set(Y),j={shared:{providers:h,anchors:FZ(s,a,l,g.isPositionedAtTop),header:g},urlinput:C,styles:x,colorinput:T,dialog:_,isContextMenuOpen:N,setContextMenuState:L},Z=Y=>A.none(),ne={...j,shared:{...j.shared,interpreter:Y=>zR(Y,{},ne,Z),getSink:n.popup}},ae={...j,shared:{...j.shared,interpreter:Y=>zR(Y,{},ae,Z),getSink:n.dialog}};return{popup:ne,dialog:ae}},WR={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},gG=n=>{console.warn(WR[n],new Error().stack)},ZR=(n,s,a)=>{const l=(Ke,Qt)=>{He([s,...a],zt=>{zt.broadcastEvent(Ke,Qt)})},d=(Ke,Qt)=>{He([s,...a],zt=>{zt.broadcastOn([Ke],Qt)})},g=Ke=>d(_d(),{target:Ke.target}),h=Ke=>{d(op(),{closedTooltip:()=>{Ke.preventDefault()}})},C=Qr(),x=Do(C,"touchstart",g),T=Do(C,"touchmove",Ke=>l(YS(),Ke)),_=Do(C,"touchend",Ke=>l(S2(),Ke)),N=Do(C,"mousedown",g),L=Do(C,"mouseup",Ke=>{Ke.raw.button===0&&d(ym(),{target:Ke.target})}),j=Ke=>d(_d(),{target:at.fromDom(Ke.target)}),Z=Ke=>{Ke.button===0&&d(ym(),{target:at.fromDom(Ke.target)})},ne=()=>{He(n.editorManager.get(),Ke=>{n!==Ke&&Ke.dispatch("DismissPopups",{relatedTarget:n})})},ae=Ke=>l(w2(),nc(Ke)),Y=Ke=>{d(Ar(),{}),l(Hh(),nc(Ke))},le=fr(at.fromDom(n.getElement())),pe=al(le,"scroll",Ke=>{requestAnimationFrame(()=>{const Qt=n.getContainer();if(Qt!=null){const jn=Yg(n,s.element).map(Jt=>[Jt.element,...Jt.others]).getOr([]);cn(jn,Jt=>I(Jt,Ke.target))&&(n.dispatch("ElementScroll",{target:Ke.target.dom}),l(QS(),Ke))}})}),Ee=()=>d(Ar(),{}),Oe=Ke=>{Ke.state&&d(_d(),{target:at.fromDom(n.getContainer())})},ht=Ke=>{d(_d(),{target:at.fromDom(Ke.relatedTarget.getContainer())})},Ue=Ke=>n.dispatch("focusin",Ke),Qe=Ke=>n.dispatch("focusout",Ke);n.on("PostRender",()=>{n.on("click",j),n.on("tap",j),n.on("mouseup",Z),n.on("mousedown",ne),n.on("ScrollWindow",ae),n.on("ResizeWindow",Y),n.on("ResizeEditor",Ee),n.on("AfterProgressState",Oe),n.on("DismissPopups",ht),n.on("CloseActiveTooltips",h),He([s,...a],Ke=>{Ke.element.dom.addEventListener("focusin",Ue),Ke.element.dom.addEventListener("focusout",Qe)})}),n.on("remove",()=>{n.off("click",j),n.off("tap",j),n.off("mouseup",Z),n.off("mousedown",ne),n.off("ScrollWindow",ae),n.off("ResizeWindow",Y),n.off("ResizeEditor",Ee),n.off("AfterProgressState",Oe),n.off("DismissPopups",ht),n.off("CloseActiveTooltips",h),He([s,...a],Ke=>{Ke.element.dom.removeEventListener("focusin",Ue),Ke.element.dom.removeEventListener("focusout",Qe)}),N.unbind(),x.unbind(),T.unbind(),_.unbind(),L.unbind(),pe.unbind()}),n.on("detach",()=>{He([s,...a],fE),He([s,...a],Ke=>Ke.destroy())})},hG=U,GR=an,FF=oe([]);var pG=Object.freeze({__proto__:null,setup:hG,isDocked:GR,getBehaviours:FF});const qR=oe(Ct("toolbar-height-change")),Zf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},LF="tox-tinymce--toolbar-sticky-on",bG="tox-tinymce--toolbar-sticky-off",fQ=(n,s)=>{const a=gc(s),d=sg(s).dom.innerHeight,g=Hs(a),h=at.fromDom(n.elm),C=cf(h),x=pr(h),T=C.y,_=T+x,N=xa(s),L=pr(s),j=N.top,Z=j+L,ne=Math.abs(j-g.top)<2,ae=Math.abs(Z-(g.top+d))<2;if(ne&&T<Z)Ou(g.left,T-L,a);else if(ae&&_>j){const Y=T-d+x+L;Ou(g.left,Y,a)}},uS=(n,s)=>bt(Ms.getModes(n),s),KR=n=>{const s=l=>br(l)+(parseInt(hs(l,"margin-top"),10)||0)+(parseInt(hs(l,"margin-bottom"),10)||0),a=n.element;Vi(a).each(l=>{const d="padding-"+Ms.getModes(n)[0];if(Ms.isDocked(n)){const g=ia(l);gn(a,"width",g+"px"),gn(l,d,s(a)+"px")}else Kn(a,"width"),Kn(l,d)})},YR=(n,s)=>{s?(Rs(n,Zf.fadeOutClass),Ki(n,[Zf.transitionClass,Zf.fadeInClass])):(Rs(n,Zf.fadeInClass),Ki(n,[Zf.fadeOutClass,Zf.transitionClass]))},HF=(n,s)=>{const a=at.fromDom(n.getContainer());s?(jo(a,LF),Rs(a,bG)):(jo(a,bG),Rs(a,LF))},vG=(n,s)=>{const a=gc(s);Fr(a).filter(l=>!I(s,l)).filter(l=>I(l,at.fromDom(a.dom.body))||ee(n,l)).each(()=>Ir(s))},yG=(n,s)=>sr(n).orThunk(()=>s().toOptional().bind(a=>sr(a.element))),CG=(n,s,a)=>{n.inline||(s.header.isPositionedAtTop()||n.on("ResizeEditor",()=>{a().each(Ms.reset)}),n.on("ResizeWindow ResizeEditor",()=>{a().each(KR)}),n.on("SkinLoaded",()=>{a().each(l=>{Ms.isDocked(l)?Ms.reset(l):Ms.refresh(l)})}),n.on("FullscreenStateChanged",()=>{a().each(Ms.reset)})),n.on("AfterScrollIntoView",l=>{a().each(d=>{Ms.refresh(d);const g=d.element;Au(g)&&fQ(l,g)})}),n.on("PostRender",()=>{HF(n,!1)})},xG=n=>n().map(Ms.isDocked).getOr(!1),zF=()=>[Rc.config({channels:{[qR()]:{onReceive:KR}}})],VF=(n,s)=>{const a=hn(),l=s.getSink,d=C=>{l().each(x=>C(x.element))},g=C=>{n.inline||KR(C),HF(n,Ms.isDocked(C)),C.getSystem().broadcastOn([Ar()],{}),l().each(x=>x.getSystem().broadcastOn([Ar()],{}))},h=n.inline?[]:zF();return[En.config({}),Ms.config({contextual:{lazyContext:C=>{const x=br(C.element),T=n.inline?n.getContentAreaContainer():n.getContainer();return A.from(T).map(_=>{const N=Er(at.fromDom(_));return Yg(n,C.element).fold(()=>{const j=N.height-x,Z=N.y+(uS(C,"top")?0:x);return Nr(N.x,Z,N.width,j)},j=>{const Z=cm(N,xb(j)),ne=uS(C,"top")?Z.y:Z.y+x;return Nr(Z.x,ne,Z.width,Z.height-x)})})},onShow:()=>{d(C=>YR(C,!0))},onShown:C=>{d(x=>ua(x,[Zf.transitionClass,Zf.fadeInClass])),a.get().each(x=>{vG(C.element,x),a.clear()})},onHide:C=>{yG(C.element,l).fold(a.clear,a.set),d(x=>YR(x,!1))},onHidden:()=>{d(C=>ua(C,[Zf.transitionClass]))},...Zf},lazyViewport:C=>Yg(n,C.element).fold(()=>{const T=Fa(),_=LB(n),N=T.y+(uS(C,"top")&&!s6(n)?_:0),L=T.height-(uS(C,"bottom")?_:0);return{bounds:Nr(T.x,N,T.width,L),optScrollEnv:A.none()}},T=>({bounds:xb(T),optScrollEnv:A.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:xa(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var SG=Object.freeze({__proto__:null,setup:CG,isDocked:xG,getBehaviours:VF});const wG=n=>{const s=n.editor,a=n.sticky?VF:FF;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:nt(a(s,n.sharedBackstage))}};var UF=cu({factory:(n,s)=>{const a=(d,g)=>{const h=ye(g,C=>{const x={type:"menubutton",text:C.text,fetch:_=>{_(C.getItems())},context:"any"},T=dD(x).mapError(_=>Nh(_)).getOrDie();return oS(T,"tox-mbtn",s.backstage,A.some("menuitem"))});An.set(d,h)},l={focus:Xt.focusIn,setMenus:a};return{uid:n.uid,dom:n.dom,components:[],behaviours:nt([An.config({}),xn("menubar-events",[ps(d=>{n.onSetup(d)}),Ie(jl(),(d,g)=>{Bo(d.element,".tox-mbtn--active").each(h=>{Sa(g.event.target,".tox-mbtn").each(C=>{I(h,C)||d.getSystem().getByDom(h).each(x=>{d.getSystem().getByDom(C).each(T=>{Yl.expand(T),Yl.close(x),En.focus(T)})})})})}),Ie(S0(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Yl.isOpen(h)&&(Yl.expand(C),Yl.close(h))})})})]),Xt.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(n.onEscape(d),A.some(!0))}),us.config({})]),apis:l,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ze("dom"),Ze("uid"),Ze("onEscape"),Ze("backstage"),we("onSetup",U)],apis:{focus:(n,s)=>{n.focus(s)},setMenus:(n,s,a)=>{n.setMenus(s,a)}}});const jF="💝 Get all features",WF="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",EG=n=>{const s=n.promotionLink?[{dom:{tag:"a",attributes:{href:WF,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:jF}}]:[];return{uid:n.uid,dom:n.dom,components:s}},TG=n=>{const{sidebars:s}=n.ui.registry.getAll();He(xo(s),a=>{const l=s[a],d=()=>dc(A.from(n.queryCommandValue("ToggleSidebar")),a);n.ui.registry.addToggleButton(a,{icon:l.icon,tooltip:l.tooltip,onAction:g=>{n.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return n.on("ToggleSidebar",h),()=>{n.off("ToggleSidebar",h)}},context:"any"})})},gu=n=>({element:()=>n.element.dom}),kG=(n,s)=>{const a=ye(xo(s),l=>{const d=s[l],g=Ci(ED(d));return{name:l,getApi:gu,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return ye(a,l=>{const d=Pt(U);return n.slot(l.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:uy.unnamedEvents([Hm(l,d),_p(l,d),Ie(E2(),(g,h)=>{const C=h.event;Lt(a,T=>T.name===C.name).each(T=>{(C.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},ZF=n=>Wa.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:kG(s,n),slotBehaviours:uy.unnamedEvents([ps(a=>Wa.hideAllSlots(a))])})),GF=(n,s,a)=>{Fe.getCurrent(n).each(d=>{An.set(d,[ZF(s)]);const g=a?.toLowerCase();De(g)&&mo(s,g)&&Fe.getCurrent(d).each(h=>{Wa.showSlot(h,g),Yc.immediateGrow(d),Kn(d.element,"width"),V4(n.element,"region")})})},V4=(n,s)=>{ln(n,"role",s)},dS=(n,s)=>{Fe.getCurrent(n).each(l=>{Fe.getCurrent(l).each(g=>{Yc.hasGrown(l)?Wa.isShowing(g,s)?(Yc.shrink(l),V4(n.element,"presentation")):(Wa.hideAllSlots(g),Wa.showSlot(g,s),V4(n.element,"region")):(Wa.hideAllSlots(g),Wa.showSlot(g,s),Yc.grow(l),V4(n.element,"region"))})})},AG=n=>Fe.getCurrent(n).bind(a=>Yc.isGrowing(a)||Yc.hasGrown(a)?Fe.getCurrent(a).bind(g=>Lt(Wa.getSlotNames(g),h=>Wa.isShowing(g,h))):A.none()),Sy=Ct("FixSizeEvent"),XR=Ct("AutoSizeEvent"),U4=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:nt([us.config({}),En.config({}),Yc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{Fe.getCurrent(s).each(Wa.hideAllSlots),Wn(s,XR)},onGrown:s=>{Wn(s,XR)},onStartGrow:s=>{tn(s,Sy,{width:xs(s.element,"width").getOr("")})},onStartShrink:s=>{tn(s,Sy,{width:ia(s.element)+"px"})}}),An.config({}),Fe.config({find:s=>{const a=An.contents(s);return Oo(a)}})])}],behaviours:nt([qd.childAt(0),xn("sidebar-sliding-events",[Ie(Sy,(s,a)=>{gn(s.element,"width",a.event.width)}),Ie(XR,(s,a)=>{Kn(s.element,"width")})])])}),_G=n=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Dm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),qF=n=>Fe.getCurrent(n).each(s=>Ir(s.element,!0)),td=(n,s)=>{const a="tabindex",l=`data-mce-${a}`;A.from(n.iframeElement).map(at.fromDom).each(d=>{s?(Jr(d,a).each(g=>ln(d,l,g)),ln(d,a,-1)):(gs(d,a),Jr(d,l).each(g=>{ln(d,a,g),gs(d,l)}))})},OG=(n,s,a,l)=>{const d=s.element;if(td(n,a),a)Ge.block(s,_G(l)),Kn(d,"display"),gs(d,"aria-hidden"),n.hasFocus()&&qF(s);else{const g=Fe.getCurrent(s).exists(h=>$l(h.element));Ge.unblock(s),gn(d,"display","none"),ln(d,"aria-hidden","true"),g&&n.focus()}},j4=n=>({uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:nt([An.config({}),Ge.config({focus:!1}),Fe.config({find:s=>Oo(s.components())})]),components:[]}),KF=n=>n.type==="focusin",YF=n=>KF(n)?(n.composed?Oo(n.composedPath()):A.from(n.target)).map(at.fromDom).filter(fc).exists(a=>cr(a,"mce-pastebin")):!1,DG=(n,s,a)=>{const l=Pt(!1),d=hn(),g=C=>{l.get()&&!YF(C)&&(C.preventDefault(),qF(s()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",()=>{n.dom.bind(n.getWin(),"focusin",g),n.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==l.get()&&(l.set(C),OG(n,s(),C,a.providers),aW(n,C))};n.on("ProgressState",C=>{if(d.on(clearTimeout),In(C.time)){const x=NT.setEditorTimeout(n,()=>h(C.state),C.time);d.set(x)}else h(C.state),d.clear()})},QR=n=>{const s=n.label.isNone()?n.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):n.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(n.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...n.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Ss(a)]})).toArray(),DT.parts.items({})],items:n.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:nt([us.config({}),En.config({ignore:!0})])}},W4=n=>DT.sketch(QR(n)),XF=(n,s)=>{const a=ps(l=>{const d=ye(n.initGroups,W4);Rm.setGroups(l,d)});return nt([Lm.toolbarButton(()=>n.providers.checkUiComponentContext("any").shouldDisable),Cr(()=>n.providers.checkUiComponentContext("any")),Xt.config({mode:s,onEscape:n.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),xn("toolbar-events",[a])])},QF=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":QR({title:A.none(),label:A.none(),items:[]}),"overflow-button":aF({context:"any",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items")},A.none(),n.providers,[],"overflow-button")},splitToolbarBehaviours:XF(n,s)}},RG=n=>{const s=QF(n),a=4,l=SB.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return SB.sketch({...s,lazySink:n.getSink,getOverflowBounds:()=>{const d=n.moreDrawerData.lazyHeader().element,g=cf(d),h=Gp(d),C=cf(h),x=Math.max(h.dom.scrollHeight,C.height);return Nr(g.x+a,C.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[l],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>n.onToggled(d,!0),onClosed:d=>n.onToggled(d,!1)})},NG=n=>{const s=oO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=oO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),l=QF(n);return oO.sketch({...l,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([qR()],{type:"opened"}),n.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([qR()],{type:"closed"}),n.onToggled(d,!1)}})},Z4=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return Rm.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===du.scrolling?["tox-toolbar--scrolling"]:[])},components:[Rm.parts.groups({})],toolbarBehaviours:XF(n,s)})},MG=(n,s)=>{const a=n.type==="togglebutton",l=n.icon.map(Y=>Mp(Y,s.icons)).map(To),g=Y=>{const le=ht=>{l.map(Ue=>Ue.getOpt(Y).each(Qe=>{An.set(Qe,[Mp(ht,s.icons)])}))},pe=ht=>{const Ue=Y.element;ht?(jo(Ue,"tox-button--enabled"),ln(Ue,"aria-pressed",!0)):(Rs(Ue,"tox-button--enabled"),gs(Ue,"aria-pressed"))},Ee=()=>cr(Y.element,"tox-button--enabled"),Oe=()=>Ir(Y.element);if(a)return n.onAction({setIcon:le,setActive:pe,isActive:Ee,focus:Oe});if(n.type==="button")return n.onAction({setIcon:le})},h={...n,name:a?n.text.getOr(n.icon.getOr("")):n.text??n.icon.getOr(""),primary:n.buttonType==="primary",buttonType:A.from(n.buttonType),tooltip:n.tooltip,icon:n.icon,enabled:!0,borderless:n.borderless},C=RR(n.buttonType??"secondary"),x=a?n.text.map(s.translate):A.some(s.translate(n.text)),T=x.map(Ss),_=h.tooltip.or(x).map(Y=>({"aria-label":s.translate(Y)})).getOr({}),N=l.map(Y=>Y.asSpec()),L=zf([N,T]),j=n.icon.isSome()&&T.isSome(),Z={tag:"button",classes:C.concat(...n.icon.isSome()&&!j?["tox-button--icon"]:[]).concat(...j?["tox-button--icon-and-text"]:[]).concat(...n.borderless?["tox-button--naked"]:[]).concat(...n.type==="togglebutton"&&n.active?["tox-button--enabled"]:[]),attributes:_},ne=[],ae=B4(h,A.some(g),ne,Z,L,n.tooltip,s);return sa.sketch(ae)},JR=(n,s)=>MG(n,s),JF=(n,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ye(n.buttons,a=>JR(a,s))}),eN=Gs().deviceType,PG=eN.isPhone(),e8=eN.isTablet(),BG=n=>{let s=!1;const a=ye(n.buttons,l=>l.type==="group"?(s=!0,JF(l,n.providers)):JR(l,n.providers));return{uid:n.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...PG||e8?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:nt([En.config({}),Xt.config({mode:"flow",selector:"button, .tox-button",focusInside:Tg.OnEnterOrSpaceMode})]),components:s?a:[Am.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Am.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},$G=n=>({uid:n.uid,behaviours:nt([En.config({}),us.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),t8=(n,s,a,l)=>{const d={getPane:g=>fa.getPart(g,n,"pane"),getOnShow:g=>n.viewConfig.onShow,getOnHide:g=>n.viewConfig.onHide};return{uid:n.uid,dom:n.dom,components:s,behaviours:nt([En.config({}),Xt.config({mode:"cyclic",focusInside:Tg.OnEnterOrSpaceMode})]),apis:d}};var zb=Cl({name:"silver.View",configFields:[Ze("viewConfig")],partFields:[Tc({factory:{sketch:BG},schema:[Ze("buttons"),Ze("providers")],name:"header"}),Tc({factory:{sketch:$G},schema:[],name:"pane"})],factory:t8,apis:{getPane:(n,s)=>n.getPane(s),getOnShow:(n,s)=>n.getOnShow(s),getOnHide:(n,s)=>n.getOnHide(s)}});const n8=(n,s,a)=>as(s,(l,d)=>{const g=Ci(Wj(l));return n.slot(d,zb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[zb.parts.header({buttons:g.buttons,providers:a})]:[],zb.parts.pane({})]}))}),IG=(n,s)=>Wa.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:n8(a,n,s),slotBehaviours:uy.unnamedEvents([ps(l=>Wa.hideAllSlots(l))])})),o8=n=>Lt(Wa.getSlotNames(n),s=>Wa.isShowing(n,s)),FG=n=>{const s=n.element;gn(s,"display","none"),ln(s,"aria-hidden","true")},s8=n=>{const s=n.element;Kn(s,"display"),gs(s,"aria-hidden")},LG=n=>({getContainer:oe(n)}),r8=(n,s,a)=>{Wa.getSlot(n,s).each(l=>{zb.getPane(l).each(d=>{a(l)(LG(d.element.dom))})})},HG=(n,s)=>r8(n,s,zb.getOnShow),zG=(n,s)=>r8(n,s,zb.getOnHide);var G4=cu({factory:(n,s)=>{const g={setViews:(h,C)=>{An.set(h,[IG(C,s.backstage.shared.providers)])},whichView:h=>Fe.getCurrent(h).bind(o8),toggleView:(h,C,x,T)=>Fe.getCurrent(h).exists(_=>{const N=o8(_),L=N.exists(Z=>T===Z),j=Wa.getSlot(_,T).isSome();return j&&(Wa.hideAllSlots(_),L?(FG(h),C()):(x(),s8(h),Wa.showSlot(_,T),HG(_,T)),N.each(Z=>zG(_,Z))),j})};return{uid:n.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:nt([An.config({}),Fe.config({find:h=>{const C=An.contents(h);return Oo(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[Ze("backstage")],apis:{setViews:(n,s,a)=>n.setViews(s,a),toggleView:(n,s,a,l,d)=>n.toggleView(s,a,l,d),whichView:(n,s)=>n.whichView(s)}});const VG=(n,s,a)=>{let l=!1;const d=h=>{e2(h,".tox-statusbar").each(C=>{hs(C,"display")==="none"&&Rr(C,"aria-hidden")==="true"?(Kn(C,"display"),gs(C,"aria-hidden")):(gn(C,"display","none"),ln(C,"aria-hidden","true"))})},g={getSocket:h=>fa.getPart(h,n,"socket"),setSidebar:(h,C,x)=>{fa.getPart(h,n,"sidebar").each(T=>GF(T,C,x))},toggleSidebar:(h,C)=>{fa.getPart(h,n,"sidebar").each(x=>dS(x,C))},whichSidebar:h=>fa.getPart(h,n,"sidebar").bind(AG).getOrNull(),getHeader:h=>fa.getPart(h,n,"header"),getToolbar:h=>fa.getPart(h,n,"toolbar"),setToolbar:(h,C)=>{fa.getPart(h,n,"toolbar").each(x=>{const T=ye(C,W4);x.getApis().setGroups(x,T)})},setToolbars:(h,C)=>{fa.getPart(h,n,"multiple-toolbar").each(x=>{const T=ye(C,_=>ye(_,W4));JM.setItems(x,T)})},refreshToolbar:h=>{fa.getPart(h,n,"toolbar").each(x=>x.getApis().refresh(x))},toggleToolbarDrawer:h=>{fa.getPart(h,n,"toolbar").each(C=>{nl(C.getApis().toggle,x=>x(C))})},toggleToolbarDrawerWithoutFocusing:h=>{fa.getPart(h,n,"toolbar").each(C=>{nl(C.getApis().toggleWithoutFocusing,x=>x(C))})},isToolbarDrawerToggled:h=>fa.getPart(h,n,"toolbar").bind(C=>A.from(C.getApis().isOpen).map(x=>x(C))).getOr(!1),getThrobber:h=>fa.getPart(h,n,"throbber"),focusToolbar:h=>{fa.getPart(h,n,"toolbar").orThunk(()=>fa.getPart(h,n,"multiple-toolbar")).each(x=>{Xt.focusIn(x)})},setMenubar:(h,C)=>{fa.getPart(h,n,"menubar").each(x=>{UF.setMenus(x,C)})},focusMenubar:h=>{fa.getPart(h,n,"menubar").each(C=>{UF.focus(C)})},setViews:(h,C)=>{fa.getPart(h,n,"viewWrapper").each(x=>{G4.setViews(x,C)})},toggleView:(h,C)=>fa.getPart(h,n,"viewWrapper").exists(x=>G4.toggleView(x,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>fa.getPart(h,n,"viewWrapper").bind(G4.whichView).getOrNull(),hideMainView:h=>{l=g.isToolbarDrawerToggled(h),l&&g.toggleToolbarDrawer(h),fa.getPart(h,n,"editorContainer").each(C=>{const x=C.element;d(x),gn(x,"display","none"),ln(x,"aria-hidden","true")})},showMainView:h=>{l&&g.toggleToolbarDrawer(h),fa.getPart(h,n,"editorContainer").each(C=>{const x=C.element;d(x),Kn(x,"display"),gs(x,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:s,apis:g,behaviours:n.behaviours}},UG=iu.optional({factory:UF,name:"menubar",schema:[Ze("backstage")]}),jG=n=>n.type===du.sliding?NG:n.type===du.floating?RG:Z4,WG=iu.optional({factory:{sketch:n=>JM.sketch({uid:n.uid,dom:n.dom,listBehaviours:nt([Xt.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Z4({type:n.type,uid:Ct("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:()=>(n.onEscape(),A.some(!0))}),setupItem:(s,a,l,d)=>{Rm.setGroups(a,l)},shell:!0})},name:"multiple-toolbar",schema:[Ze("dom"),Ze("onEscape")]}),tN=iu.optional({factory:{sketch:n=>{const s=jG(n),a={type:n.type,uid:n.uid,onEscape:()=>(n.onEscape(),A.some(!0)),onToggled:(l,d)=>n.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return s(a)}},name:"toolbar",schema:[Ze("dom"),Ze("onEscape"),Ze("getSink")]}),ZG=iu.optional({factory:{sketch:wG},name:"header",schema:[Ze("dom")]}),GG=iu.optional({factory:{sketch:EG},name:"promotion",schema:[Ze("dom"),Ze("promotionLink")]}),a8=iu.optional({name:"socket",schema:[Ze("dom")]}),c8=iu.optional({factory:{sketch:U4},name:"sidebar",schema:[Ze("dom")]}),qG=iu.optional({factory:{sketch:j4},name:"throbber",schema:[Ze("dom")]}),KG=iu.optional({factory:G4,name:"viewWrapper",schema:[Ze("backstage")]}),YG=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:n.components}),XG=iu.optional({factory:{sketch:YG},name:"editorContainer",schema:[]});var ts=Cl({name:"OuterContainer",factory:VG,configFields:[Ze("dom"),Ze("behaviours")],partFields:[ZG,UG,tN,WG,a8,c8,GG,qG,KG,XG],apis:{getSocket:(n,s)=>n.getSocket(s),setSidebar:(n,s,a,l)=>{n.setSidebar(s,a,l)},toggleSidebar:(n,s,a)=>{n.toggleSidebar(s,a)},whichSidebar:(n,s)=>n.whichSidebar(s),getHeader:(n,s)=>n.getHeader(s),getToolbar:(n,s)=>n.getToolbar(s),setToolbar:(n,s,a)=>{n.setToolbar(s,a)},setToolbars:(n,s,a)=>{n.setToolbars(s,a)},refreshToolbar:(n,s)=>n.refreshToolbar(s),toggleToolbarDrawer:(n,s)=>{n.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(n,s)=>{n.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(n,s)=>n.isToolbarDrawerToggled(s),getThrobber:(n,s)=>n.getThrobber(s),setMenubar:(n,s,a)=>{n.setMenubar(s,a)},focusMenubar:(n,s)=>{n.focusMenubar(s)},focusToolbar:(n,s)=>{n.focusToolbar(s)},setViews:(n,s,a)=>{n.setViews(s,a)},toggleView:(n,s,a)=>n.toggleView(s,a),whichView:(n,s)=>n.whichView(s)}});const QG="file edit view insert format tools table help",nN={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},q4=(n,s,a)=>{const l=BB(a).split(/[ ,]/);return{text:n.title,getItems:()=>xe(n.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:cn(l,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},mS=n=>n.split(" "),l8=(n,s)=>{const a={...nN,...s.menus},l=xo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?mS(QG):mS(s.menubar===!1?"":s.menubar),g=Ln(d,C=>{const x=mo(nN,C);return l?x||Vt(s.menus,C).exists(T=>mo(T,"items")):x}),h=ye(g,C=>{const x=a[C];return q4({title:x.title,items:mS(x.items)},s,n)});return Ln(h,C=>{const x=T=>De(T)||T.type!=="separator";return C.getItems().length>0&&cn(C.getItems(),x)})},JG=n=>{const s=()=>{n._skinLoaded=!0,M$(n)};return()=>{n.initialized?s():n.on("init",s)}},i8=(n,s)=>()=>d4(n,{message:s}),eq=n=>{const s=Tx(n);return s?A.from(s):A.none()},u8=(n,s,a)=>(n.on("remove",()=>a.unload(s)),a.load(s)),K4=(n,s,a,l)=>(n.on("remove",()=>l.unloadRawCss(s)),l.loadRawCss(s,a)),d8=(n,s)=>"ui/"+n+"/"+s,tq=n=>A.from(tinymce.Resource.get(n)).filter(De),oN=(n,s,a="")=>{const l=eq(n).map(g=>d8(g,`${s}.css`)),d=l.bind(tq);return Ia(l,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=n.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},sN=(n,s)=>{const a=n.ui.styleSheetLoader,l=oN(n,"skin",s);switch(l._kind){case"load-raw":const{key:d,css:g}=l;return K4(n,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=l;return u8(n,h,a);default:return Promise.resolve()}},nq=(n,s)=>{if(ii(at.fromDom(n.getElement()))){const l=Gv.DOM.styleSheetLoader,d=oN(n,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return K4(n,g,h,l),Promise.resolve();case"load-stylesheet":const{url:C}=d;return u8(n,C,l);default:return Promise.resolve()}}else return Promise.resolve()},oq=(n,s,a)=>{const d=oN(n,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?K4(n,g,h,n.ui.styleSheetLoader):n.on("PostRender",()=>{K4(n,g,h,n.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&n.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},m8=async(n,s)=>{const a=yO(s);if(await oq(s,n,a),!kx(s)&&De(a))return Promise.all([sN(s,a),nq(s,a)]).then()},f8=(n,s)=>m8(n,s).then(JG(s),i8(s,"Skin could not be loaded")),g8=jt(f8,!1),sq=jt(f8,!0),rN=n=>({isEnabled:()=>!Ft.isDisabled(n),setEnabled:s=>Ft.set(n,!s),setText:s=>tn(n,ed,{text:s}),setIcon:s=>tn(n,Hb,{icon:s})}),rq=n=>({setActive:s=>{eo.set(n,s)},isActive:()=>eo.isOn(n),isEnabled:()=>!Ft.isDisabled(n),setEnabled:s=>Ft.set(n,!s),setText:s=>tn(n,ed,{text:s}),setIcon:s=>tn(n,Hb,{icon:s})}),aq=(n,s)=>n.map(a=>({"aria-label":s.translate(a)})).getOr({}),cq=Ct("focus-button"),Y4=(n,s,a,l,d,g,h)=>{const C=s.map(T=>To(ER(T,"tox-tbtn",d))),x=n.map(T=>To(Mp(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...aq(a,d),...un(h)?{"data-mce-name":h}:{}}},components:zf([x.map(T=>T.asSpec()),C.map(T=>T.asSpec())]),eventOrder:{[Gc()]:["focusing","alloy.base.behaviour",Wf],[Pu()]:[Wf,"toolbar-group-button-events"],[xi()]:[Wf,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:nt([Lm.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),Cr(()=>d.checkUiComponentContext(g)),xn(Wf,[ps((T,_)=>D4(T)),Ie(ed,(T,_)=>{C.bind(N=>N.getOpt(T)).each(N=>{An.set(N,[Ss(d.translate(_.event.text))])})}),Ie(Hb,(T,_)=>{x.bind(N=>N.getOpt(T)).each(N=>{An.set(N,[Mp(_.event.icon,d.icons)])})}),Ie(Gc(),(T,_)=>{_.event.prevent(),Wn(T,cq)})])].concat(l.getOr([])))}},lq=(n,s,a,l,d)=>{const g=s.shared,h=Pt(U),C={toolbarButtonBehaviours:[],getApi:rN,onSetup:n.onSetup},x=[xn("toolbar-group-button-events",[Hm(C,h),_p(C,h)]),...n.tooltip.map(T=>bs.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(T)}))).toArray()];return Kg.sketch({lazySink:g.getSink,fetch:()=>Go.nu(T=>{T(ye(a(n.items),W4))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Y4(n.icon,n.text,n.tooltip,A.some(x),g.providers,n.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:l}}}})},h8=(n,s,a,l)=>{const d=Pt(U),g=Y4(n.icon,n.text,n.tooltip,A.none(),a,n.context,l);return sa.sketch({dom:g.dom,components:g.components,eventOrder:SR,buttonBehaviours:{...nt([xn("toolbar-button-events",[lZ({onAction:n.onAction,getApi:s.getApi}),Hm(s,d),_p(s,d)]),...n.tooltip.map(h=>bs.config(a.tooltips.getConfig({tooltipText:a.translate(h)+n.shortcut.map(C=>` (${DD(C)})`).getOr("")}))).toArray(),Lm.toolbarButton(()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable),Cr(()=>a.checkUiComponentContext(n.context))].concat(s.toolbarButtonBehaviours)),[Wf]:g.buttonBehaviours?.[Wf]}})},iq=(n,s,a)=>fS(n,s,[],a),fS=(n,s,a,l)=>h8(n,{toolbarButtonBehaviours:a.length>0?[xn("toolbarButtonWith",a)]:[],getApi:rN,onSetup:n.onSetup},s,l),aN=(n,s,a)=>p8(n,s,[],a),p8=(n,s,a,l)=>h8(n,{toolbarButtonBehaviours:[An.config({}),eo.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[xn("toolbarToggleButtonWith",a)]:[]),getApi:rq,onSetup:n.onSetup},s,l),uq=(n,s,a)=>l=>Go.nu(d=>s.fetch(d)).map(d=>A.from(dR(zo(y4(Ct("menu-value"),d,g=>{s.onItemAction(n(l),g)},s.columns,s.presets,Zd.CLOSE_ON_EXECUTE,s.select.getOr(an),a),{movement:Rp(s.columns,s.presets),menuBehaviours:uy.unnamedEvents(s.columns!=="auto"?[]:[ps((g,h)=>{AD(g,4,zO(s.presets)).each(({numRows:C,numColumns:x})=>{Xt.setGridSize(g,C,x)})})])})))),dq=(n,s,a)=>l=>{const d=l.getSystem(),g=l.element,h=()=>{const x=cr(g,"tox-split-button__chevron"),T=x?Fc(g).bind(N=>d.getByDom(N).toOptional()):A.some(l),_=x?A.some(l):Yp(g).bind(N=>d.getByDom(N).toOptional().filter(L=>cr(L.element,"tox-split-button__chevron")));return{mainOpt:T,chevronOpt:_}},C=x=>{const{mainOpt:T,chevronOpt:_}=h();T.each(x),_.each(x)};return{isEnabled:()=>{const{mainOpt:x}=h();return x.exists(T=>!Ft.isDisabled(T))},setEnabled:x=>C(T=>Ft.set(T,!x)),setText:x=>{const{mainOpt:T}=h();T.each(_=>tn(_,ed,{text:x}))},setIcon:x=>{const{mainOpt:T}=h();T.each(_=>tn(_,Hb,{icon:x}))},setIconFill:(x,T)=>C(_=>{Bo(_.element,`svg path[class="${x}"], rect[class="${x}"]`).each(N=>{ln(N,"fill",T)})}),isActive:()=>{const{mainOpt:x}=h();return x.exists(T=>eo.isOn(T))},setActive:x=>{const{mainOpt:T}=h();T.each(_=>eo.set(_,x))},setTooltip:x=>{n.set(x);const{mainOpt:T,chevronOpt:_}=h();T.each(L=>ln(L.element,"aria-label",s.providers.translate(x)));const N=a.chevronTooltip.map(L=>s.providers.translate(L)).getOr(s.providers.translate(x));_.each(L=>ln(L.element,"aria-label",N))}}},mq=(n,s,a)=>{const l=Pt(U),d=Pt(n.tooltip.getOr("")),g=dq(d,s,n),h=Ct("tox-split-menu"),C=Pt(!1),x=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),T=()=>n.tooltip.map(ne=>s.providers.translate(ne)).getOr(s.providers.translate("Text color")),_=()=>n.chevronTooltip.map(ne=>s.providers.translate(ne)).getOrThunk(()=>{const ne=T();return s.providers.translate(["{0} menu",ne])}),N=(ne,ae)=>{C.set(ne),ln(ae.element,"aria-expanded",String(ne))},L=Yl.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:WV("chevron-down",s.providers.icons),attributes:{"aria-label":_(),...un(a)?{"data-mce-name":a+"-chevron"}:{},...x()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:nt([xn("split-dropdown-events",[ps((ne,ae)=>D4(ne)),Hm({getApi:g,onSetup:n.onSetup},l),Ie("alloy-dropdown-open",ne=>N(!0,ne)),Ie("alloy-dropdown-close",ne=>N(!1,ne))]),Lm.toolbarButton(()=>s.providers.checkUiComponentContext(n.context).shouldDisable),Cr(()=>s.providers.checkUiComponentContext(n.context)),Om.config({}),bs.config(s.providers.tooltips.getConfig({tooltipText:_(),onShow:ne=>{if(d.get()!==n.tooltip.getOr("")){const ae=n.chevronTooltip.map(Y=>s.providers.translate(Y)).getOr(`${s.providers.translate(d.get())} menu`);bs.setComponents(ne,s.providers.tooltips.getComponents({tooltipText:ae}))}}}))]),lazySink:s.getSink,fetch:uq(g,n,s.providers),getHotspot:ne=>Fc(ne.element).bind(ae=>ne.getSystem().getByDom(ae).toOptional()),onOpen:(ne,ae,Y)=>{So.highlightBy(Y,le=>cr(le.element,"tox-collection__item--active")),So.getHighlighted(Y).each(Xt.focusIn)},parts:{menu:{...Bx(!1,n.columns,n.presets),dom:{...Bx(!1,n.columns,n.presets).dom,tag:"div",attributes:{id:h}}}}}),j=Y4(n.icon,n.text,A.none(),A.some([eo.config({toggleClass:"tox-tbtn--enabled",aria:n.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...n.tooltip.isSome()?[bs.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(n.tooltip.getOr("")),onShow:ne=>{if(d.get()!==n.tooltip.getOr("")){const ae=s.providers.translate(d.get());bs.setComponents(ne,s.providers.tooltips.getComponents({tooltipText:ae}))}}}))]:[]]),s.providers,n.context,a);return[sa.sketch({dom:{...j.dom,classes:["tox-tbtn","tox-split-button__main"].concat(n.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":T(),...un(a)?{"data-mce-name":a}:{}}},components:j.components,eventOrder:j.eventOrder,buttonBehaviours:j.buttonBehaviours,action:ne=>{if(n.onAction){const ae=g(ne);ae.isEnabled()&&n.onAction(ae)}}}),L]},fq=".tox-toolbar-slider__input,.tox-toolbar-textfield",b8=n=>{js.getContent(n).each(s=>{Bo(s.element,fq).fold(()=>Xt.focusIn(s),Ir)})},gq=n=>sr(n.element).each(s=>{Ll(s,'[tabindex="-1"]').each(a=>{Ir(a)})}),v8=Ct("forward-slide"),X4=Ct("backward-slide"),Q4=Ct("change-slide-event"),wy="tox-pop--resizing",cN=n=>{const s=Pt([]);return{sketch:js.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:l=>{s.set([]),js.getContent(l).each(d=>{Kn(d.element,"visibility")}),Rs(l.element,wy),Kn(l.element,"width")},onHide:()=>{s.set([]),n.onHide()},inlineBehaviours:nt([xn("context-toolbar-events",[ep(b0(),(l,d)=>{d.event.raw.propertyName==="width"&&(Rs(l.element,wy),Kn(l.element,"width"))}),Ie(Q4,(l,d)=>{const g=l.element;Kn(g,"width");const h=ia(g),C=sr(l.element).isSome();Kn(g,"left"),Kn(g,"right"),Kn(g,"max-width"),js.setContent(l,d.event.contents),jo(g,wy);const x=ia(g);gn(g,"transition","none"),js.reposition(l),Kn(g,"transition"),gn(g,"width",h+"px"),d.event.focus.fold(()=>{C&&b8(l)},T=>{Fr(fr(l.element)).fold(()=>Ir(T),_=>{I(_,T)||n.focusElement(T)})}),setTimeout(()=>{gn(l.element,"width",x+"px")},0)}),Ie(v8,(l,d)=>{js.getContent(l).each(g=>{s.set(s.get().concat([{bar:g,focus:Fr(fr(l.element))}]))}),tn(l,Q4,{contents:d.event.forwardContents,focus:A.none()})}),Ie(X4,(l,d)=>{n.onBack(),Jl(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),tn(l,Q4,{contents:y(g.bar),focus:g.focus})})})]),Xt.config({mode:"special",onEscape:l=>Jl(s.get()).fold(()=>n.onEscape(),d=>(Wn(l,X4),A.some(!0)))})]),lazySink:()=>Wt.value(n.sink)}),inSubtoolbar:()=>s.get().length>0}},y8=(n,s)=>{const a=Ci(Hf({type:"button",icon:"chevron-left",tooltip:"Back",onAction:U}));return fS(a,s.shared.providers,[Ie(xR,l=>{Wn(l,X4)})])},nd=(n,s,a)=>pa(a)?n.translate(s):n.translate([s,n.translate(a)]),C8=(n,s)=>{const a=(h,C,x,T)=>{const _=n.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:_});if(h.type==="submenu"){const N=xe(h.getStyleItems(),L=>l(L,C,T));return C===0&&N.length<=0?A.none():A.some({type:"nestedmenuitem",text:_,enabled:N.length>0,getSubmenuItems:()=>xe(h.getStyleItems(),L=>l(L,C,T))})}else return A.some({type:"togglemenuitem",text:_,icon:h.icon,active:h.isSelected(T),enabled:!x,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},l=(h,C,x)=>{const T=h.type==="formatter"&&s.isInvalid(h);return C===0?T?[]:a(h,C,!1,x).toArray():a(h,C,T,x).toArray()},d=h=>{const C=s.getCurrentValue(),x=s.shouldHide?0:1;return xe(h,T=>l(T,x,C))};return{validateItems:d,getFetch:(h,C)=>(x,T)=>{const _=C(),N=d(_),L=ah(N,Zd.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});T(L)}}},Ey=(n,s)=>{const a=s.dataset,l=a.type==="basic"?()=>ye(a.data,d=>CF(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:C8(n,s),getStyleItems:l}},gS=(n,s,a,l,d,g)=>{const{items:h,getStyleItems:C}=Ey(s,a),x=Pt(a.tooltip),T=N=>({getComponent:oe(N),setTooltip:L=>{const j=s.shared.providers.translate(L);ln(N.element,"aria-label",j),x.set(L)}}),_=N=>{const L=j=>N.setTooltip(nd(n,l(j.value),j.value));return n.on(d,L),$b(Dp(n,"NodeChange",j=>{const Z=j.getComponent();a.updateText(Z),Ft.set(j.getComponent(),!n.selection.isEditable()||C().length===0)})(N),()=>n.off(d,L))};return TR({context:"mode:design",text:a.icon.isSome()?A.none():a.text,icon:a.icon,ariaLabel:A.some(a.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,C),onSetup:_,getApi:T,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[bs.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:N=>{if(a.tooltip!==x.get()){const L=s.shared.providers.translate(x.get());bs.setComponents(N,s.shared.providers.tooltips.getComponents({tooltipText:L}))}}})})]},"tox-tbtn",s.shared,g)},hq=n=>ye(n,s=>{let a=s,l=s;const d=s.split("=");return d.length>1&&(a=d[0],l=d[1]),{title:a,format:l}}),pq=n=>({type:"basic",data:n});var Ty;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(Ty||(Ty={}));const bq=(n,s)=>s===Ty.SemiColon?n.replace(/;$/,"").split(";"):n.split(" "),lN=(n,s,a)=>{const l=n.options.get(s);return{type:"basic",data:hq(bq(l,a))}},x8="Align",S8=oe("Alignment {0}"),w8="left",hS=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],E8=n=>{const s=()=>Lt(hS,C=>n.formatter.match(C.format)),a=C=>()=>n.formatter.match(C),l=C=>A.none,d=C=>{const T=s().fold(oe(w8),_=>_.title.toLowerCase());tn(C,Hb,{icon:`align-${T}`}),B$(n,{value:T})},g=pq(hS),h=C=>()=>Lt(hS,x=>x.format===C.format).each(x=>n.execCommand(x.command));return{tooltip:nd(n,S8(),w8),text:A.none(),icon:A.some("align-left"),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:l,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!n.formatter.canApply(C.format)}},vq=(n,s)=>gS(n,s,E8(n),S8,"AlignTextUpdate","align"),yq=(n,s)=>{const a=Ey(s,E8(n));n.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(x8),onSetup:Da(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},T8=(n,s)=>{const a=s(),l=ye(a,d=>d.format);return A.from(n.formatter.closest(l)).bind(d=>Lt(a,g=>g.format===d))},Cq="Blocks",k8=oe("Block {0}"),J4="Paragraph",iN=n=>{const s=g=>()=>n.formatter.match(g),a=g=>()=>{const h=n.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(g))}):A.none()},l=g=>{const C=T8(n,()=>d.data).fold(oe(J4),x=>x.title);tn(g,ed,{text:C}),m4(n,{value:C})},d=lN(n,"block_formats",Ty.SemiColon);return{tooltip:nd(n,k8(),J4),text:A.some(J4),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:a,onAction:f4(n),updateText:l,dataset:d,shouldHide:!1,isInvalid:g=>!n.formatter.canApply(g.format)}},A8=(n,s)=>gS(n,s,iN(n),k8,"BlocksTextUpdate","blocks"),xq=(n,s)=>{const a=Ey(s,iN(n));n.ui.registry.addNestedMenuItem("blocks",{text:Cq,onSetup:Da(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},_8="Fonts",O8=oe("Font {0}"),uN="System Font",Sq=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],dN=n=>{const s=n.split(/\s*,\s*/);return ye(s,a=>a.replace(/^['"]+|['"]+$/g,""))},D8=(n,s)=>s.length>0&&We(s,a=>n.indexOf(a.toLowerCase())>-1),R8=(n,s)=>{if(n.indexOf("-apple-system")===0||s.length>0){const a=dN(n.toLowerCase());return D8(a,Sq)||D8(a,s)}else return!1},N8=n=>{const s=()=>{const x=Z=>Z?dN(Z)[0]:"",T=n.queryCommandValue("FontName"),_=C.data,N=T?T.toLowerCase():"",L=QB(n);return{matchOpt:Lt(_,Z=>{const ne=Z.format;return ne.toLowerCase()===N||x(ne).toLowerCase()===x(N).toLowerCase()}).orThunk(()=>$r(R8(N,L),{title:uN,format:N})),font:T}},a=x=>T=>T.exists(_=>_.format===x),l=()=>{const{matchOpt:x}=s();return x},d=x=>()=>A.some({tag:"div",styles:x.indexOf("dings")===-1?{"font-family":x}:{}}),g=x=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontName",!1,x.format)})},h=x=>{const{matchOpt:T,font:_}=s(),N=T.fold(oe(_),L=>L.title);tn(x,ed,{text:N}),dW(n,{value:N})},C=lN(n,"font_family_formats",Ty.SemiColon);return{tooltip:nd(n,O8(),uN),text:A.some(uN),icon:A.none(),isSelectedFor:a,getCurrentValue:l,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:an}},wq=(n,s)=>gS(n,s,N8(n),O8,"FontFamilyTextUpdate","fontfamily"),Eq=(n,s)=>{const a=Ey(s,N8(n));n.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(_8),onSetup:Da(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var ek=tinymce.util.Tools.resolve("tinymce.util.VK");const Tq=(n,s,a,l)=>{let d=A.none();const g=pe=>pe.map(Ee=>_t.getValue(Ee)).getOr(""),h=Dp(n,"NodeChange SwitchMode DisabledStateChange",pe=>{const Ee=pe.getComponent();d=A.some(Ee),a.updateInputValue(Ee),Ft.set(Ee,!n.selection.isEditable()||MT(n))}),C=pe=>({getComponent:oe(pe)}),x=Pt(U),T=Ct("custom-number-input-events"),_=(pe,Ee,Oe)=>{const ht=g(d),Ue=a.getNewValue(ht,pe),Qe=ht.length-`${Ue}`.length,Ke=d.map(zt=>zt.element.dom.selectionStart-Qe),Qt=d.map(zt=>zt.element.dom.selectionEnd-Qe);a.onAction(Ue,Oe),d.each(zt=>{_t.setValue(zt,Ue),Ee&&(Ke.each(jn=>zt.element.dom.selectionStart=jn),Qt.each(jn=>zt.element.dom.selectionEnd=jn))})},N=(pe,Ee)=>_((Oe,ht)=>Oe-ht,pe,Ee),L=(pe,Ee)=>_((Oe,ht)=>Oe+ht,pe,Ee),j=pe=>Vi(pe.element).fold(A.none,Ee=>(Ir(Ee),A.some(!0))),Z=pe=>$l(pe.element)?(Qn(pe.element).each(Ee=>Ir(Ee)),A.some(!0)):A.none(),ne=(pe,Ee,Oe,ht)=>{const Ue=Pt(U),Qe=s.shared.providers.translate(Oe),Ke=Ct("altExecuting"),Qt=Dp(n,"NodeChange SwitchMode DisabledStateChange",jn=>{Ft.set(jn.getComponent(),!n.selection.isEditable()||MT(n))}),zt=jn=>{Ft.isDisabled(jn)||pe(!0)};return sa.sketch({dom:{tag:"button",attributes:{"aria-label":Qe,"data-mce-name":Ee},classes:ht.concat(Ee)},components:[wR(Ee,s.shared.providers.icons)],buttonBehaviours:nt([Ft.config({}),bs.config(s.shared.providers.tooltips.getConfig({tooltipText:Qe})),xn(Ke,[Hm({onSetup:Qt,getApi:C},Ue),_p({getApi:C},Ue),Ie(oa(),(jn,Jt)=>{(Jt.event.raw.keyCode===ek.SPACEBAR||Jt.event.raw.keyCode===ek.ENTER)&&(Ft.isDisabled(jn)||pe(!1))}),Ie(Cg(),zt),Ie(gf(),zt)])]),eventOrder:{[oa()]:[Ke,"keying"],[Cg()]:[Ke,"alloy.base.behaviour"],[gf()]:[Ke,"alloy.base.behaviour"],[Pu()]:["alloy.base.behaviour",Ke,"tooltipping"],[xi()]:[Ke,"tooltipping"]}})},ae=To(ne(pe=>N(!1,pe),"minus","Decrease font size",[])),Y=To(ne(pe=>L(!1,pe),"plus","Increase font size",[])),le=To({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[Ff.sketch({inputBehaviours:nt([Ft.config({}),xn(T,[Hm({onSetup:h,getApi:C},x),_p({getApi:C},x)]),xn("input-update-display-text",[Ie(ed,(pe,Ee)=>{_t.setValue(pe,Ee.event.text)}),Ie(x2(),pe=>{a.onAction(_t.getValue(pe))}),Ie(yg(),pe=>{a.onAction(_t.getValue(pe))})]),Xt.config({mode:"special",onEnter:pe=>(_(Yt,!0,!0),A.some(!0)),onEscape:j,onUp:pe=>(L(!0,!1),A.some(!0)),onDown:pe=>(N(!0,!1),A.some(!0)),onLeft:(pe,Ee)=>(Ee.cut(),A.none()),onRight:(pe,Ee)=>(Ee.cut(),A.none())})])})],behaviours:nt([En.config({}),Xt.config({mode:"special",onEnter:Z,onSpace:Z,onEscape:j}),xn("input-wrapper-events",[Ie(jl(),pe=>{He([ae,Y],Ee=>{const Oe=at.fromDom(Ee.get(pe).element.dom);$l(Oe)&&Ds(Oe)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...un(l)?{"data-mce-name":l}:{}}},components:[ae.asSpec(),le.asSpec(),Y.asSpec()],behaviours:nt([En.config({}),Xt.config({mode:"flow",focusInside:Tg.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:pe=>$l(pe.element)?A.none():(Ir(pe.element),A.some(!0))})])}},kq="Font sizes",M8=oe("Font size {0}"),mN="12pt",Aq={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},_q={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Oq=(n,s)=>{const a=Math.pow(10,s);return Math.round(n*a)/a},Dq=(n,s)=>/[0-9.]+px$/.test(n)?Oq(parseInt(n,10)*72/96,s||0)+"pt":Vt(_q,n).getOr(n),Rq=n=>Vt(Aq,n).getOr(""),P8=n=>{const s=()=>{let x=A.none();const T=C.data,_=n.queryCommandValue("FontSize");if(_)for(let N=3;x.isNone()&&N>=0;N--){const L=Dq(_,N),j=Rq(L);x=Lt(T,Z=>Z.format===_||Z.format===L||Z.format===j)}return{matchOpt:x,size:_}},a=x=>T=>T.exists(_=>_.format===x),l=()=>{const{matchOpt:x}=s();return x},d=oe(A.none),g=x=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontSize",!1,x.format)})},h=x=>{const{matchOpt:T,size:_}=s(),N=T.fold(oe(_),L=>L.title);tn(x,ed,{text:N}),uW(n,{value:N})},C=lN(n,"font_size_formats",Ty.Space);return{tooltip:nd(n,M8(),mN),text:A.some(mN),icon:A.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:l,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:an}},Nq=(n,s)=>gS(n,s,P8(n),M8,"FontSizeTextUpdate","fontsize"),B8=n=>{const s={step:1};return{em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[n]??s},Mq=16,Pq=n=>n>=0,$8=n=>{const s=()=>n.queryCommandValue("FontSize");return{updateInputValue:l=>tn(l,ed,{text:s()}),onAction:(l,d)=>n.execCommand("FontSize",!1,l,{skip_focus:!d}),getNewValue:(l,d)=>{vo(l,["unsupportedLength","empty"]);const g=s(),h=vo(l,["unsupportedLength","empty"]).or(vo(g,["unsupportedLength","empty"])),C=h.map(L=>L.value).getOr(Mq),x=IT(n),T=h.map(L=>L.unit).filter(L=>L!=="").getOr(x),_=d(C,B8(T).step),N=`${Pq(_)?_:C}${T}`;return N!==g&&Vf(n,{value:N}),N}}},Bq=(n,s)=>Tq(n,s,$8(n),"fontsizeinput"),I8=(n,s)=>{const a=Ey(s,P8(n));n.ui.registry.addNestedMenuItem("fontsize",{text:kq,onSetup:Da(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},F8="Formats",L8=n=>pa(n)?"Formats":"Format {0}",H8=(n,s)=>{const a="Formats",l=h=>()=>n.formatter.match(h),d=h=>()=>{const C=n.formatter.get(h);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(h))}):A.none()},g=h=>{const C=N=>GZ(N)?xe(N.items,C):hF(N)?[{title:N.title,format:N.format}]:[],x=xe(yF(n),C),_=T8(n,oe(x)).fold(oe({title:a,tooltipLabel:""}),N=>({title:N.title,tooltipLabel:N.title}));tn(h,ed,{text:_.title}),iW(n,{value:_.tooltipLabel})};return{tooltip:nd(n,L8(""),""),text:A.some(a),icon:A.none(),isSelectedFor:l,getCurrentValue:A.none,getPreviewFor:d,onAction:f4(n),updateText:g,shouldHide:fO(n),isInvalid:h=>!n.formatter.canApply(h.format),dataset:s}},$q=(n,s)=>{const a={type:"advanced",...s.styles};return gS(n,s,H8(n,a),L8,"StylesTextUpdate","styles")},ky=(n,s)=>{const a={type:"advanced",...s.styles},l=Ey(s,H8(n,a));n.ui.registry.addNestedMenuItem("styles",{text:F8,onSetup:Da(n,()=>l.getStyleItems().length>0),getSubmenuItems:()=>l.items.validateItems(l.getStyleItems())})},Iq=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],pS=(n,s)=>(a,l,d,g)=>{const h=n(a).mapError(C=>Nh(C)).getOrDie();return s(h,l,d,g)},Fq={button:pS(Hf,(n,s,a,l)=>iq(n,s.shared.providers,l)),togglebutton:pS(pD,(n,s,a,l)=>aN(n,s.shared.providers,l)),menubutton:pS(dD,(n,s,a,l)=>oS(n,"tox-tbtn",s,A.none(),!1,l)),splitbutton:pS(Lj,(n,s,a,l)=>mq(n,s.shared,l)),grouptoolbarbutton:pS(TD,(n,s,a,l)=>{const d=a.ui.registry.getAll().buttons,g=C=>tk(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,A.none()),h={[Z0]:s.shared.header.isPositionedAtTop()?bm.TopToBottom:bm.BottomToTop};switch(Cb(a)){case du.floating:return lq(n,s,g,h,l);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},Lq=(n,s,a,l)=>Vt(Fq,n.type).fold(()=>(console.error("skipping button defined by",n),A.none()),d=>A.some(d(n,s,a,l))),z8={styles:$q,fontsize:Nq,fontsizeinput:Bq,fontfamily:wq,blocks:A8,align:vq,navigateback:y8},Hq=n=>{const s=ye(Iq,a=>{const l=Ln(a.items,d=>mo(n,d)||mo(z8,d));return{name:a.name,items:l}});return Ln(s,a=>a.items.length>0)},zq=n=>{const s=n.split("|");return ye(s,a=>({items:a.trim().split(" ")}))},Vq=n=>lt(n,s=>(mo(s,"name")||mo(s,"label"))&&mo(s,"items")),fN=n=>{const s=n.toolbar,a=n.buttons;return s===!1?[]:s===void 0||s===!0?Hq(a):De(s)?zq(s):Vq(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Uq=(n,s,a,l,d,g)=>Vt(s,a.toLowerCase()).orThunk(()=>g.bind(h=>ha(h,C=>Vt(s,C+a.toLowerCase())))).fold(()=>Vt(z8,a.toLowerCase()).map(h=>h(n,d)),h=>h.type==="grouptoolbarbutton"&&!l?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):Lq(h,d,n,a.toLowerCase())),tk=(n,s,a,l)=>{const d=fN(s),g=ye(d,h=>{const C=xe(h.items,x=>x.trim().length===0?[]:Uq(n,s.buttons,x,s.allowToolbarGroups,a,l).map(T=>Array.isArray(T)?T:[T]).getOr([]));return{title:A.from(n.translate(h.name)),label:$r(h.label!==void 0,n.translate(h.label)),items:C}});return Ln(g,h=>h.items.length>0)},gN=(n,s,a,l)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(lt(g,De)){const C=g.map(x=>{const T={toolbar:x,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return tk(n,T,l,A.none())});ts.setToolbars(d,C)}else ts.setToolbar(d,tk(n,a,l,A.none()))},hN=Gs(),jq=hN.os.isiOS()&&hN.os.version.major<=12,Wq=(n,s)=>{const{uiMotherships:a}=s,l=n.dom;let d=n.getWin();const g=n.getDoc().documentElement,h=Pt(Po(d.innerWidth,d.innerHeight)),C=Pt(Po(g.offsetWidth,g.offsetHeight)),x=()=>{const L=h.get();(L.left!==d.innerWidth||L.top!==d.innerHeight)&&(h.set(Po(d.innerWidth,d.innerHeight)),WD(n))},T=()=>{const L=n.getDoc().documentElement,j=C.get();(j.left!==L.offsetWidth||j.top!==L.offsetHeight)&&(C.set(Po(L.offsetWidth,L.offsetHeight)),WD(n))},_=L=>{rW(n,L)};l.bind(d,"resize",x),l.bind(d,"scroll",_);const N=al(at.fromDom(n.getBody()),"load",T);n.on("hide",()=>{He(a,L=>{gn(L.element,"display","none")})}),n.on("show",()=>{He(a,L=>{Kn(L.element,"display")})}),n.on("NodeChange",T),n.on("remove",()=>{N.unbind(),l.unbind(d,"resize",x),l.unbind(d,"scroll",_),d=null})},Zq=(n,s,a)=>{wp(n)&&au(a.mainUi.mothership.element,a.popupUi.mothership),tb(s,a.dialogUi.mothership)};var Gq=Object.freeze({__proto__:null,render:(n,s,a,l,d)=>{const{mainUi:g,uiMotherships:h}=s,C=Pt(0),x=g.outerContainer;g8(n);const T=at.fromDom(d.targetNode),_=li(fr(T));au(T,g.mothership),Zq(n,_,s),n.on("PostRender",()=>{ts.setSidebar(x,a.sidebar,KB(n)),ts.setViews(x,a.views)}),n.on("SkinLoaded",()=>{gN(n,s,a,l),C.set(n.getWin().innerWidth),ts.setMenubar(x,l8(n,a)),Wq(n,s)});const N=ts.getSocket(x).getOrDie("Could not find expected socket element");if(jq){ws(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const ne=eg(()=>{n.dispatch("ScrollContent")},20),ae=Do(N.element,"scroll",ne.throttle);n.on("remove",ae.unbind)}p$(n,s),n.addCommand("ToggleSidebar",(ne,ae)=>{ts.toggleSidebar(x,ae),mW(n)}),n.addQueryValueHandler("ToggleSidebar",()=>ts.whichSidebar(x)??""),n.addCommand("ToggleView",(ne,ae)=>{if(ts.toggleView(x,ae)){const Y=x.element;g.mothership.broadcastOn([_d()],{target:Y}),He(h,le=>{le.broadcastOn([_d()],{target:Y})}),Mt(ts.whichView(x))&&(n.focus(),n.nodeChanged(),ts.refreshToolbar(x)),$$(n)}}),n.addQueryValueHandler("ToggleView",()=>ts.whichView(x)??"");const L=Cb(n),j=()=>{ts.refreshToolbar(s.mainUi.outerContainer)};(L===du.sliding||L===du.floating)&&n.on("ResizeWindow ResizeEditor ResizeContent",()=>{const ne=n.getWin().innerWidth;ne!==C.get()&&(j(),C.set(ne))});const Z={setEnabled:ne=>{Zx(s,ne?"setEnabled":"setDisabled")},isEnabled:()=>!Ft.isDisabled(x)};return{iframeContainer:N.element.dom,editorContainer:x.element.dom,api:Z}}});const qq=n=>/^[0-9\.]+(|px)$/i.test(""+n)?A.some(parseInt(""+n,10)):A.none(),nk=n=>In(n)?n+"px":n,ok=(n,s,a)=>{const l=s.filter(g=>n<g),d=a.filter(g=>n>g);return l.or(d).getOr(n)},Kq=(n,s)=>{if(typeof s=="number")return A.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const l=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return A.none();if(l==="em")return A.from(d*Number.parseFloat(window.getComputedStyle(n.dom).fontSize));if(l==="pt")return A.from(d*(72/96));if(l==="px")return A.from(d)}return A.none()},Yq=n=>{const s=Kq(at.fromDom(n.targetElm),lO(n)),a=dO(n),l=mO(n);return s.map(d=>ok(d,a,l))},Xq=n=>Yq(n).getOr(lO(n)),bS=n=>{const s=iO(n),a=uO(n),l=PT(n);return qq(s).map(d=>ok(d,a,l))},Qq=n=>bS(n).getOr(iO(n)),{ToolbarLocation:Ay,ToolbarMode:vS}=EV,V8=40,Jq=(n,s,a,l,d)=>{const{mainUi:g,uiMotherships:h}=a,C=Gv.DOM,x=Jv(n),T=ey(n),_=PT(n).or(bS(n)),N=l.shared.header,L=N.isPositionedAtTop,j=150,Z=Cb(n),ne=Z===vS.sliding||Z===vS.floating,ae=Pt(!1),Y=()=>ae.get()&&!n.removed,le=Ut=>ne?Ut.fold(oe(0),Ve=>Ve.components().length>1?pr(Ve.components()[1].element):0):0,pe=Ut=>{switch(gO(n)){case Ay.auto:const Ve=ts.getToolbar(g.outerContainer),ct=le(Ve),mn=pr(Ut.element)-ct,Pn=Er(s);if(Pn.y>mn)return"top";{const Nn=Gp(s),Qo=Math.max(Nn.dom.scrollHeight,pr(Nn));return Pn.bottom<Qo-mn||Fa().bottom<Pn.bottom-mn?"bottom":"top"}case Ay.bottom:return"bottom";case Ay.top:default:return"top"}},Ee=Ut=>{d.on(Ve=>{Ms.setModes(Ve,[Ut]),N.setDockingMode(Ut);const ct=L()?bm.TopToBottom:bm.BottomToTop;ln(Ve.element,Z0,ct)})},Oe=()=>{d.on(Ut=>{const Ve=_.getOrThunk(()=>wh().width-bc(s).left-10);gn(Ut.element,"max-width",Ve+"px")})},ht=(Ut,Ve)=>{d.on(ct=>{const mn=ts.getToolbar(g.outerContainer),Pn=le(mn),qt=Er(s),Nn=Ue(n,g.outerContainer.element),Qo=()=>Nn.fold(()=>qt.x,Ra=>{const hu=Er(Ra);return I(Ra,Hc())?qt.x:qt.x-hu.x}),ko=()=>Nn.fold(()=>L()?Math.max(qt.y-pr(ct.element)+Pn,0):qt.bottom,Ra=>{const hu=Er(Ra),Za=Ra.dom.scrollTop??0,Bp=I(Ra,Hc())?Math.max(qt.y-pr(ct.element)+Pn,0):qt.y-hu.y+Za-pr(ct.element)+Pn;return L()?Bp:qt.bottom}),cc=Qo(),Ps=$r(Ut,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Ra=>Ra>j).map(Ra=>{const hu=Ve.getOr(Hs()),Za=window.innerWidth-(cc-hu.left),od=Math.max(Math.min(Ra,Za),j);return Za<Ra&&gn(g.outerContainer.element,"width",od+"px"),{width:od+"px"}}).getOr({width:"max-content"}),Xl={position:"absolute",left:Math.round(cc)+"px",top:ko()+"px"};ws(g.outerContainer.element,{...Xl,...Ps})})},Ue=(Ut,Ve)=>wp(Ut)?lf(Ve):A.none(),Qe=()=>{He(h,Ut=>{Ut.broadcastOn([Ar()],{})})},Ke=()=>!x&&(xa(g.outerContainer.element).left+_u(g.outerContainer.element)>=window.innerWidth-V8||xs(g.outerContainer.element,"width").isSome())?(gn(g.outerContainer.element,"position","absolute"),gn(g.outerContainer.element,"left","0px"),Kn(g.outerContainer.element,"width"),!0):!1,Qt=Ut=>{if(!Y())return;x||Oe();const Ve=Hs(),ct=x?!1:Ke();if(ne&&ts.refreshToolbar(g.outerContainer),!x){const mn=Hs(),Pn=$r(Ve.left!==mn.left,Ve);ht(ct,Pn),Pn.each(qt=>{Ou(qt.left,mn.top)})}T&&d.on(Ut),Qe()},zt=()=>x||!T||!Y()?!1:d.get().exists(Ut=>{const Ve=N.getDockingMode(),ct=pe(Ut);return ct!==Ve?(Ee(ct),!0):!1});return{isVisible:Y,isPositionedAtTop:L,show:()=>{ae.set(!0),gn(g.outerContainer.element,"display","flex"),C.addClass(n.getBody(),"mce-edit-focus"),He(h,Ut=>{Kn(Ut.element,"display")}),zt(),wp(n)?Qt(Ut=>Ms.isDocked(Ut)?Ms.reset(Ut):Ms.refresh(Ut)):Qt(Ms.refresh)},hide:()=>{ae.set(!1),gn(g.outerContainer.element,"display","none"),C.removeClass(n.getBody(),"mce-edit-focus"),He(h,Ut=>{gn(Ut.element,"display","none")})},update:Qt,updateMode:()=>{zt()&&Qt(Ms.reset)},repositionPopups:Qe}},U8=(n,s)=>{const a=Er(n);return{pos:s?a.y:a.bottom,bounds:a}},eK=(n,s,a,l)=>{const d=Pt(U8(s,a.isPositionedAtTop())),g=T=>{const{pos:_,bounds:N}=U8(s,a.isPositionedAtTop()),{pos:L,bounds:j}=d.get(),Z=N.height!==j.height||N.width!==j.width;d.set({pos:_,bounds:N}),Z&&WD(n,T),a.isVisible()&&(L!==_?a.update(Ms.reset):Z&&(a.updateMode(),a.repositionPopups()))};l||(n.on("activate",a.show),n.on("deactivate",a.hide)),n.on("SkinLoaded ResizeWindow",()=>a.update(Ms.reset)),n.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const C=Qa(()=>a.update(Ms.refresh),33);n.on("ScrollWindow",()=>{const T=Hs().left;T!==h&&(h=T,C.throttle()),a.updateMode()}),wp(n)&&n.on("ElementScroll",T=>{a.update(Ms.refresh)});const x=_s();x.set(al(at.fromDom(n.getBody()),"load",T=>g(T.raw))),n.on("remove",()=>{x.clear()})};var tK=Object.freeze({__proto__:null,render:(n,s,a,l,d)=>{const{mainUi:g}=s,h=hn(),C=at.fromDom(d.targetNode),x=Jq(n,C,s,l,h),T=FB(n);sq(n);const _=()=>{if(h.isSet()){x.show();return}h.set(ts.getHeader(g.outerContainer).getOrDie());const L=CO(n);wp(n)?(au(C,g.mothership),au(C,s.popupUi.mothership)):tb(L,g.mothership),tb(L,s.dialogUi.mothership);const j=()=>{gN(n,s,a,l),ts.setMenubar(g.outerContainer,l8(n,a)),x.show(),eK(n,C,x,T),n.nodeChanged()};T?n.once("SkinLoaded",j):j()};n.on("show",_),n.on("hide",x.hide),T||(n.on("focus",_),n.on("blur",x.hide)),n.on("init",()=>{(n.hasFocus()||T)&&_()}),p$(n,s);const N={show:_,hide:x.hide,setEnabled:L=>{Zx(s,L?"setEnabled":"setDisabled")},isEnabled:()=>!Ft.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const sk=()=>{const n=hn(),s=hn(),a=hn();return{dialogUi:n,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=n.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],x=>I(C.element,x.element)?[C]:[C,x]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},j8="contexttoolbar-show",pN="contexttoolbar-hide",rk=(n,s,a)=>({setInputEnabled:l=>{!l&&a&&Ir(a),Ft.set(n,!l)},isInputEnabled:()=>!Ft.isDisabled(n),hide:()=>{Wn(n,C0())},back:()=>{Wn(n,X4)},getValue:()=>s.get().getOrThunk(()=>_t.getValue(n)),setValue:l=>{n.getSystem().isConnected()?_t.setValue(n,l):s.set(l)}}),yS=(n,s,a)=>{const d=hc(n.element).bind(g=>n.getSystem().getByDom(g).toOptional());return rk(d.getOr(n),s,a)},W8=(n,s,a)=>Ie(xR,(l,d)=>{const g=n.get(l),h=rk(g,a,l.element);s.onAction(h,d.event.buttonApi)}),Z8=(n,s,a,l)=>{const{primary:d,...g}=s.original,h=Ci(Hf({...g,type:"button",onAction:U}));return fS(h,a,[W8(n,s,l)])},nK=(n,s,a,l)=>{const{primary:d,...g}=s.original,h=Ci(pD({...g,type:"togglebutton",onAction:U}));return p8(h,a,[W8(n,s,l)])},oK=n=>n.type==="contextformtogglebutton",sK=(n,s,a,l)=>oK(s)?nK(n,s,a,l):Z8(n,s,a,l),G8=(n,s,a,l)=>{const d=ye(s,C=>To(sK(n,C,a,l)));return{asSpecs:()=>ye(d,C=>C.asSpec()),findPrimary:C=>ha(s,(x,T)=>x.primary?A.from(d[T]).bind(_=>_.getOpt(C)).filter(X(Ft.isDisabled)):A.none())}},rK=(n,s,a,l)=>{const{width:d,height:g}=n.initValue();let h=by;const C=Ct("ratio-event"),x=Ue=>rk(Ue,l),T=Ue=>mu(Ue,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Ue]},s.icons),_=()=>!1,N=n.label.getOr("Constrain proportions"),L=s.translate(N),j=yr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":L,"data-mce-name":N}},components:[T("lock"),T("unlock")],buttonBehaviours:nt([Ft.config({disabled:_}),us.config({}),bs.config(s.tooltips.getConfig({tooltipText:L}))])}),Z=Ue=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Ue}),ne=Ue=>Ll(Ue.element,"div.tox-focusable-wrapper").fold(A.none,Ke=>(Ir(Ke),A.some(!0))),ae=Ue=>Yn.parts.field({factory:Ff,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Ue?d:g,inputBehaviours:nt([Ft.config({disabled:_}),us.config({}),xn("size-input-toolbar-events",[Ie(Qi(),(Qe,Ke)=>{tn(Qe,C,{isField1:Ue})})]),Xt.config({mode:"special",onEnter:a,onEscape:ne})]),selectOnFocus:!1}),Y=Ue=>({dom:{tag:"label",classes:["tox-label"]},components:[Ss(s.translate(Ue))]}),le=Ue=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Ue],behaviours:nt([us.config({}),En.config({}),Xt.config({mode:"special",onEnter:Qe=>Bo(Qe.element,"input").fold(A.none,Qt=>(Ir(Qt),A.some(!0)))})])}),pe=le(yr.parts.field1(Z([Yn.parts.label(Y("Width:")),ae(!0)]))),Ee=le(yr.parts.field2(Z([Yn.parts.label(Y("Height:")),ae(!1)]))),Oe=Pt(U),ht=[Hm({onBeforeSetup:Ue=>Bo(Ue.element,"input").each(Ir),onSetup:n.onSetup,getApi:x},Oe),s4({getApi:x},Oe,l)];return yr.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[pe,Z([j]),Ee],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Ue,Qe,Ke)=>{P4(_t.getValue(Ue)).each(Qt=>{h(Qt).each(zt=>{_t.setValue(Qe,GI(zt))})})},onInput:Ue=>Wn(Ue,mI),coupledFieldBehaviours:nt([En.config({}),Xt.config({mode:"flow",focusInside:Tg.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Ft.config({disabled:_,onDisabled:Ue=>{yr.getField1(Ue).bind(Yn.getField).each(Ft.disable),yr.getField2(Ue).bind(Yn.getField).each(Ft.disable),yr.getLock(Ue).each(Ft.disable)},onEnabled:Ue=>{yr.getField1(Ue).bind(Yn.getField).each(Ft.enable),yr.getField2(Ue).bind(Yn.getField).each(Ft.enable),yr.getLock(Ue).each(Ft.enable)}}),Cr(()=>s.checkUiComponentContext("mode:design")),xn("size-input-toolbar-events2",[Ie(C,(Ue,Qe)=>{const Ke=Qe.event.isField1,Qt=Ke?yr.getField1(Ue):yr.getField2(Ue),zt=Ke?yr.getField2(Ue):yr.getField1(Ue),jn=Qt.map(_t.getValue).getOr(""),Jt=zt.map(_t.getValue).getOr("");h=KI(jn,Jt)}),Ie(mI,Ue=>n.onInput(x(Ue))),...ht])])})},_y=(n,s,a)=>Yn.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...n.toArray(),s],fieldBehaviours:nt([Ft.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:l=>{gq(l),Yn.getField(l).each(Ft.disable)},onEnabled:l=>{Yn.getField(l).each(Ft.enable)}})])}),aK=(n,s,a,l)=>{const d=Pt(U),g=x=>yS(x,l),h=n.label.map(x=>Yn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ss(s.translate(x))]})),C=Yn.parts.field({factory:Ff,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(n.min()),max:String(n.max())},data:n.initValue().toString(),fromInputValue:x=>Bc(x).getOr(n.min()),toInputValue:x=>String(x),inputBehaviours:nt([Ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Cr(()=>s.checkUiComponentContext("mode:design")),Xt.config({mode:"special",onEnter:a,onLeft:(x,T)=>(T.cut(),A.none()),onRight:(x,T)=>(T.cut(),A.none())}),xn("slider-events",[Hm({onSetup:n.onSetup,getApi:g,onBeforeSetup:Xt.focusIn},d),s4({getApi:g},d,l),Ie(Mu(),x=>{n.onInput(g(x))})])])});return _y(h,C,s)},cK=(n,s,a,l)=>{const d=Pt(U),g=_=>yS(_,l),h=n.label.map(_=>Yn.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ss(s.translate(_))]})),x={...n.placeholder.map(_=>({placeholder:s.translate(_)})).getOr({})},T=Yn.parts.field({factory:Ff,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:x,data:n.initValue(),selectOnFocus:!0,inputBehaviours:nt([Ft.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),Cr(()=>s.checkUiComponentContext("mode:design")),Xt.config({mode:"special",onEnter:a,onLeft:(_,N)=>(N.cut(),A.none()),onRight:(_,N)=>(N.cut(),A.none())}),xn("input-events",[Hm({onSetup:n.onSetup,getApi:_=>Ll(_.element,".tox-toolbar").bind(L=>Bo(L,"button:enabled")).fold(()=>yS(_,l),L=>yS(_,l,L)),onBeforeSetup:Xt.focusIn},d),s4({getApi:g},d,l),Ie(Mu(),_=>{n.onInput(g(_))})])])});return _y(h,T,s)},bN=(n,s,a)=>{const l=hn(),g=To(n(a,T=>C.findPrimary(T).orThunk(()=>x.findPrimary(T)).map(_=>(Xh(_),!0)),l)),h=ro(s.commands,T=>T.align==="start"),C=G8(g,h.pass,a,l),x=G8(g,h.fail,a,l);return Ln([{title:A.none(),label:A.none(),items:C.asSpecs()},{title:A.none(),label:A.none(),items:[g.asSpec()]},{title:A.none(),label:A.none(),items:x.asSpecs()}],T=>T.items.length>0)},vN=(n,s)=>{switch(n.type){case"contextform":return bN(jt(cK,n),n,s);case"contextsliderform":return bN(jt(aK,n),n,s);case"contextsizeinputform":return bN(jt(rK,n),n,s)}},q8={renderContextForm:(n,s,a)=>Z4({type:n,uid:Ct("context-toolbar"),initGroups:vN(s,a),onEscape:A.none,cyclicKeying:!0,providers:a}),buildInitGroups:vN},K8=(n,s,a)=>s.bottom-n.y>=a&&n.bottom-s.y>=a,lK=n=>{const s=n.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=Xm(at.fromDom(n.startContainer),n.startOffset).element;return(md(a)?hc(a):A.some(a)).filter(fc).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},yN=n=>{const s=n.selection.getRng(),a=lK(s);if(n.inline){const l=Hs();return Nr(l.left+a.left,l.top+a.top,a.width,a.height)}else{const l=cf(at.fromDom(n.getBody()));return Nr(l.x+a.left,l.y+a.top,a.width,a.height)}},iK=(n,s)=>s.filter(a=>bo(a)&&te(a)).map(cf).getOrThunk(()=>yN(n)),uK=(n,s,a)=>{const l=Math.max(n.x+a,s.x),d=Math.min(n.right-a,s.right);return{x:l,width:d-l}},CS=(n,s,a,l,d,g)=>{const h=at.fromDom(n.getContainer()),C=Bo(h,".tox-editor-header").getOr(h),x=Er(C),T=x.y>=s.bottom,_=l&&!T;if(n.inline&&_)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(n.inline&&!_)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const N=d==="line"?Er(h):s;return _?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(N.bottom-g,a.bottom)}:{y:Math.max(N.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},CN=(n,s,a,l=0)=>{const d=wh(window),g=Er(at.fromDom(n.getContentAreaContainer())),h=Xv(n)||Qv(n)||Sp(n),{x:C,width:x}=uK(g,d,l);if(n.inline&&!h)return Nr(C,d.y,x,d.height);{const T=s.header.isPositionedAtTop(),{y:_,bottom:N}=CS(n,g,d,T,a,l);return Nr(C,_,x,N-_)}},ak=12,Y8={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},xN={maxHeightFunction:Ng(),maxWidthFunction:F1()},SN=(n,s)=>{const a=n.selection.getRng(),l=Xm(at.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&I(l.element,s)},X8=(n,s,a)=>{const l=xs(n,"position");gn(n,"position",s);const d=a(n);return l.each(g=>gn(n,"position",g)),d},wN=n=>n==="node",dK=(n,s,a,l,d)=>{const g=yN(n),h=l.lastElement().exists(C=>I(a,C));if(SN(n,a))return h?Ac:Ha;if(h)return X8(s,l.getMode(),()=>K8(g,Er(s),-20)&&!l.isReposition()?Lu:Ac);{const C=l.getMode()==="fixed"?d.y+Hs().top:d.y,x=pr(s)+ak;return C+x<=g.y?Ha:qh}},Oy=(n,s,a,l)=>{const d=x=>(T,_,N,L,j)=>{const Z=dK(n,L,x,a,j),ne={...T,y:j.y,height:j.height};return{...Z(ne,_,N,L,j),alwaysFit:!0}},g=x=>wN(l)?[d(x)]:[];return s?{onLtr:x=>[kr,Pr,Tr,ka,da,Ns].concat(g(x)),onRtl:x=>[kr,Tr,Pr,da,ka,Ns].concat(g(x))}:{onLtr:x=>[Ns,kr,ka,Pr,da,Tr].concat(g(x)),onRtl:x=>[Ns,kr,da,Tr,ka,Pr].concat(g(x))}},ck=(n,s,a,l)=>s==="line"?{bubble:vl(ak,0,Y8),layouts:{onLtr:()=>[Wh],onRtl:()=>[L2]},overrides:xN}:{bubble:vl(0,ak,Y8,1/ak),layouts:Oy(n,a,l,s),overrides:xN},Dy=(n,s)=>{const a=Ln(s,g=>g.predicate(n.dom)),{pass:l,fail:d}=ro(a,g=>g.type==="contexttoolbar");return{contextToolbars:l,contextForms:d}},EN=n=>{if(n.length<=1)return n;{const s=g=>cn(n,h=>h.position===g),a=g=>Ln(n,h=>h.position===g),l=s("selection"),d=s("node");if(l||d)if(d&&l){const g=a("node"),h=ye(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(l?"selection":"node");else return a("line")}},TN=n=>{if(n.length<=1)return n;{const s=l=>Lt(n,d=>d.position===l);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(l=>l.position).fold(()=>[],l=>Ln(n,d=>d.position===l))}},Q8=(n,s,a)=>{const l=Dy(n,s);if(l.contextForms.length>0)return A.some({elem:n,toolbars:[l.contextForms[0]]});{const d=Dy(n,a);if(d.contextForms.length>0)return A.some({elem:n,toolbars:[d.contextForms[0]]});if(l.contextToolbars.length>0||d.contextToolbars.length>0){const g=EN(l.contextToolbars.concat(d.contextToolbars));return A.some({elem:n,toolbars:g})}else return A.none()}},lk=(n,s,a)=>n(s)?A.none():c0(s,l=>{if(fc(l)){const{contextToolbars:d,contextForms:g}=Dy(l,a.inNodeScope),h=g.length>0?g:TN(d);return h.length>0?A.some({elem:l,toolbars:h}):A.none()}else return A.none()},n),J8=(n,s)=>{const a=at.fromDom(s.getBody()),l=h=>I(h,a),d=h=>!l(h)&&!ee(a,h),g=at.fromDom(s.selection.getNode());return d(g)?A.none():Q8(g,n.inNodeScope,n.inEditorScope).orThunk(()=>lk(l,g,n))},eL=(n,s)=>{const a={},l=[],d=[],g={},h={},C=(_,N)=>{const L=Ci(vj(N));a[_]=L,L.launch.map(j=>{g["form:"+_]={...N.launch,type:j.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(L)}}}),L.scope==="editor"?d.push(L):l.push(L),h[_]=L},x=(_,N)=>{Cj(N).each(L=>{L.launch.isSome()&&(g["toolbar:"+_]={...N.launch,type:"button",onAction:()=>{s(L)}}),N.scope==="editor"?d.push(L):l.push(L),h[_]=L})},T=xo(n);return He(T,_=>{const N=n[_];N.type==="contextform"||N.type==="contextsliderform"||N.type==="contextsizeinputform"?C(_,N):N.type==="contexttoolbar"&&x(_,N)}),{forms:a,inNodeScope:l,inEditorScope:d,lookupTable:h,formNavigators:g}},xS="tox-pop--transition",mK=n=>n===ek.ENTER||n===ek.SPACEBAR,tL=(n,s,a,l)=>{const d=l.backstage,g=d.shared,h=Gs().deviceType.isTouch,C=hn(),x=hn(),T=hn(),_=cN({sink:a,onEscape:()=>(n.focus(),ZD(n),A.some(!0)),onHide:()=>{ZD(n)},onBack:()=>{GD(n)},focusElement:Jt=>{n.getBody().contains(Jt.dom)?n.focus():Ir(Jt)}}),N=p(_.sketch),L=()=>{const Jt=T.get().getOr("node"),_n=wN(Jt)?1:0;return CN(n,g,Jt,_n)},j=()=>!n.removed&&!(h()&&d.isContextMenuOpen()),Z=Jt=>dc(Ia(Jt,C.get(),I),!0),ne=()=>{if(j()){const Jt=L(),_n=dc(T.get(),"node")?iK(n,C.get()):yN(n);return Jt.height<=0||!K8(_n,Jt,.01)}else return!0},ae=()=>{C.clear(),x.clear(),T.clear(),js.hide(N)},Y=()=>{if(js.isOpen(N)){const Jt=N.element;Kn(Jt,"display"),ne()?gn(Jt,"display","none"):(x.set(0),js.reposition(N))}},le=Jt=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Jt],behaviours:nt([Xt.config({mode:"acyclic"}),xn("pop-dialog-wrap-events",[ps(_n=>{n.shortcuts.add("ctrl+F9","focus statusbar",()=>Xt.focusIn(_n))}),ou(_n=>{n.shortcuts.remove("ctrl+F9")})])])}),pe=Jt=>{const _n=Ue([Jt]);tn(N,v8,{forwardContents:le(_n)})},Ee=$c(()=>eL(s,pe)),Oe=(Jt,_n)=>tk(n,{buttons:Jt,toolbar:_n.items,allowToolbarGroups:!1},l.backstage,A.some(["form:","toolbar:"])),ht=(Jt,_n)=>q8.buildInitGroups(Jt,_n),Ue=Jt=>{const{buttons:_n}=n.ui.registry.getAll(),Ut=Ee(),Ve={..._n,...Ut.formNavigators},ct=Cb(n)===du.scrolling?du.scrolling:du.default,mn=en(ye(Jt,Pn=>Pn.type==="contexttoolbar"?Oe(Ve,vD(Pn)):ht(Pn,g.providers)));return Z4({type:ct,uid:Ct("context-toolbar"),initGroups:mn,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},Qe=(Jt,_n)=>{const Ut=Jt==="node"?g.anchors.node(_n):g.anchors.cursor(),Ve=ck(n,Jt,h(),{lastElement:C.get,isReposition:()=>dc(x.get(),0),getMode:()=>Dc.getMode(a)});return zo(Ut,Ve)},Ke=(Jt,_n)=>{if(jn.cancel(),!j())return;const Ut=Ue(Jt),Ve=Jt[0].position,ct=Qe(Ve,_n);T.set(Ve),x.set(1);const mn=N.element;Kn(mn,"display"),Z(_n)||(Rs(mn,xS),Dc.reset(a,N)),js.showWithinBounds(N,le(Ut),{anchor:ct,transition:{classes:[xS],mode:"placement"}},()=>A.some(L())),_n.fold(C.clear,C.set),ne()&&gn(mn,"display","none")},Qt=()=>{gn(N.element,"transition","none"),Y(),Kn(N.element,"transition")};let zt=!1;const jn=Qa(()=>{if(!(!n.hasFocus()||n.removed||zt))if(cr(N.element,xS))jn.throttle();else{const Jt=Ee();J8(Jt,n).fold(ae,_n=>{Ke(_n.toolbars,A.some(_n.elem))})}},17);n.on("init",()=>{n.on("remove",ae),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Y),n.on("click focus SetContent",jn.throttle),n.on("keyup",Jt=>{(!mK(Jt.keyCode)||!_.inSubtoolbar())&&jn.throttle()}),n.on(pN,ae),n.on(j8,Jt=>{const _n=Ee();Vt(_n.lookupTable,Jt.toolbarKey).each(Ut=>{Ke([Ut],$r(Jt.target!==n,Jt.target)),b8(N)})}),n.on("focusout",Jt=>{NT.setEditorTimeout(n,()=>{sr(a.element).isNone()&&sr(N.element).isNone()&&!n.hasFocus()&&ae()},0)}),n.on("SwitchMode",()=>{n.mode.isReadOnly()&&ae()}),n.on("DisabledStateChange",Jt=>{Jt.state&&ae()}),n.on("ExecCommand",({command:Jt})=>{Jt.toLowerCase()==="toggleview"&&ae()}),n.on("AfterProgressState",Jt=>{Jt.state?ae():n.hasFocus()&&jn.throttle()}),n.on("dragstart",()=>{zt=!0}),n.on("dragend drop",()=>{zt=!1}),n.on("NodeChange",Jt=>{_.inSubtoolbar()?Qt():sr(N.element).fold(jn.throttle,U)})})},fK=n=>{He([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{n.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:xl(n,a.cmd),onSetup:Xx(n,a.name)})}),n.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Da(n),onAction:xl(n,"JustifyNone")})},nL=(n,s)=>{const a=()=>{const l=s.getOptions(n),d=s.getCurrent(n).map(s.hash),g=hn();return ye(l,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const x=_=>{_&&(g.on(N=>N.setActive(!1)),g.set(C)),C.setActive(_)};x(dc(d,s.hash(h)));const T=s.watcher(n,h,x);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(n,h)}))};n.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:l=>l(a()),onSetup:s.onToolbarSetup}),n.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},ik=n=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:JB,hash:s=>zs(s,["fixed","relative","empty"]).getOr(s),display:Yt,watcher:(s,a,l)=>s.formatter.formatChanged("lineheight",l,!1,{value:a}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Da(n),onMenuSetup:Da(n)}),oL=n=>A.from(PB(n)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:oe(a),hash:l=>Cn(l.customCode)?l.code:`${l.code}/${l.customCode}`,display:l=>l.title,watcher:(l,d,g)=>l.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:d.customCode??null}).unbind,getCurrent:l=>{const d=at.fromDom(l.selection.getNode());return Hl(d,g=>A.some(g).filter(fc).bind(h=>Jr(h,"lang").map(x=>{const T=Jr(h,"data-mce-lang").getOrUndefined();return{code:x,customCode:T,title:""}})))},setCurrent:(l,d)=>l.execCommand("Lang",!1,d),onToolbarSetup:l=>{const d=_s();return l.setActive(n.formatter.match("lang",{},void 0,!0)),d.set(n.formatter.formatChanged("lang",l.setActive,!0)),$b(d.clear,Da(n)(l))},onMenuSetup:Da(n)})),gK=n=>{nL(n,ik(n)),oL(n).each(s=>nL(n,s))},hK=(n,s)=>{yq(n,s),Eq(n,s),ky(n,s),xq(n,s),I8(n,s)},pK=n=>{n.ui.registry.addContext("editable",()=>n.selection.isEditable()),n.ui.registry.addContext("mode",s=>n.mode.get()===s),n.ui.registry.addContext("any",St),n.ui.registry.addContext("formatting",s=>n.formatter.canApply(s)),n.ui.registry.addContext("insert",s=>n.schema.isValidChild(n.selection.getNode().tagName,s))},bK=n=>Dp(n,"NodeChange",s=>{s.setEnabled(n.queryCommandState("outdent")&&n.selection.isEditable())}),vK=n=>{n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:bK(n),onAction:xl(n,"outdent")}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Da(n,()=>n.queryCommandState("indent")),onAction:xl(n,"indent")})},sL=n=>{vK(n)},kN=(n,s)=>a=>{a.setActive(s.get());const l=d=>{s.set(d.state),a.setActive(d.state)};return n.on("PastePlainTextToggle",l),$b(()=>n.off("PastePlainTextToggle",l),Da(n)(a))},rL=n=>{const s=Pt(qB(n)),a=()=>n.execCommand("mceTogglePlainTextPaste");n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:kN(n,s)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:kN(n,s)})},uk=(n,s)=>()=>{n.execCommand("mceToggleFormat",!1,s)},yK=n=>{jf.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Xx(n,s.name),onAction:uk(n,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,l=`Access+${s}`;n.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Xx(n,a),onAction:uk(n,a),shortcut:l})}},aL=n=>{jf.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:xl(n,s.action),shortcut:s.shortcut,context:s.context})}),jf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Da(n),onAction:xl(n,s.action)})})},cL=n=>{jf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:xl(n,s.action),onSetup:Xx(n,s.name)})})},CK=n=>{yK(n),aL(n),cL(n)},vQ=n=>{jf.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:xl(n,s.action),context:s.context})}),jf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Da(n),onAction:xl(n,s.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Da(n),onAction:uk(n,"code")})},xK=n=>{CK(n),vQ(n)},dk=(n,s)=>Dp(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!n.mode.isReadOnly()&&n.undoManager[s]())}),SK=n=>{n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:dk(n,"hasUndo"),onAction:xl(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:dk(n,"hasRedo"),onAction:xl(n,"redo")})},wK=n=>{n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:dk(n,"hasUndo"),onAction:xl(n,"undo"),shortcut:"Meta+Z"}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:dk(n,"hasRedo"),onAction:xl(n,"redo"),shortcut:"Meta+Y"})},EK=n=>{SK(n),wK(n)},TK=n=>Dp(n,"VisualAid",s=>{s.setActive(n.hasVisual)}),kK=n=>{n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:TK(n),onAction:xl(n,"mceToggleVisualAid"),context:"any"})},AK=n=>{n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:xl(n,"mceToggleVisualAid"),context:"any"})},_K=n=>{AK(n),kK(n)},OK=(n,s)=>{fK(n),xK(n),hK(n,s),EK(n),X$(n),_K(n),sL(n),gK(n),rL(n),pK(n)},DK=n=>De(n)?n.split(/[ ,]/):n,lL=n=>s=>s.options.get(n),RK=n=>{const s=n.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:De(a)||lt(a,De)?{value:DK(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},AN=lL("contextmenu_never_use_native"),NK=lL("contextmenu_avoid_overlap"),MK=n=>iL(n).length===0,iL=n=>{const s=n.ui.registry.getAll().contextMenus,a=n.options.get("contextmenu");return n.options.isSet("contextmenu")?a:Ln(a,l=>mo(s,l))},SS=(n,s)=>({type:"makeshift",x:n,y:s}),PK=(n,s,a)=>SS(n.x+s,n.y+a),_N=n=>n.type==="longpress"||n.type.indexOf("touch")===0,ON=n=>{if(_N(n)){const s=n.touches[0];return SS(s.pageX,s.pageY)}else return SS(n.pageX,n.pageY)},BK=n=>{if(_N(n)){const s=n.touches[0];return SS(s.clientX,s.clientY)}else return SS(n.clientX,n.clientY)},uL=(n,s)=>{const a=Gv.DOM.getPos(n);return PK(s,a.x,a.y)},$K=(n,s)=>s.type==="contextmenu"||s.type==="longpress"?n.inline?ON(s):uL(n.getContentAreaContainer(),BK(s)):dL(n),dL=n=>({type:"selection",root:at.fromDom(n.selection.getNode())}),IK=n=>({type:"node",node:A.some(at.fromDom(n.selection.getNode())),root:at.fromDom(n.getBody())}),mL=(n,s,a)=>{switch(a){case"node":return IK(n);case"point":return $K(n,s);case"selection":return dL(n)}},FK=(n,s,a,l,d,g)=>{const h=a(),C=mL(n,s,g);ah(h,Zd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!1,search:A.none()}).map(x=>{s.preventDefault(),js.showMenuAt(d,{anchor:C},{menu:{markers:Lf("normal")},data:x})})},DN={onLtr:()=>[kr,Pr,Tr,ka,da,Ns,Ha,qh,kc,W0,Rg,$1],onRtl:()=>[kr,Tr,Pr,da,ka,Ns,Ha,qh,Rg,$1,kc,W0]},LK=12,HK={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},RN=(n,s)=>{const a=n.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const l=s.touches[0],d=a.getRng();return gg(n.getWin(),zl.domRange(d)).exists(h=>h.left<=l.clientX&&h.right>=l.clientX&&h.top<=l.clientY&&h.bottom>=l.clientY)}},fL=n=>{const s=n.selection.getRng(),a=()=>{NT.setEditorTimeout(n,()=>{n.selection.setRng(s)},10),g()};n.once("touchend",a);const l=h=>{h.preventDefault(),h.stopImmediatePropagation()};n.on("mousedown",l,!0);const d=()=>g();n.once("longpresscancel",d);const g=()=>{n.off("touchend",a),n.off("longpresscancel",d),n.off("mousedown",l)}},gL=(n,s,a)=>{const l=mL(n,s,a);return{bubble:vl(0,a==="point"?LK:0,HK),layouts:DN,overrides:{maxWidthFunction:F1(),maxHeightFunction:Ng()},...l}},zK=(n,s,a,l,d,g,h)=>{const C=gL(n,s,g);ah(a,Zd.CLOSE_ON_EXECUTE,l,{isHorizontalMenu:!0,search:A.none()}).map(x=>{s.preventDefault();const T=h?za.HighlightMenuAndItem:za.HighlightNone;js.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Lf("normal"),highlightOnOpen:T},data:x,type:"horizontal"},()=>A.some(CN(n,l.shared,g==="node"?"node":"selection"))),n.dispatch(pN)})},VK=(n,s,a,l,d,g)=>{const h=Gs(),C=h.os.isiOS(),x=h.os.isMacOS(),T=h.os.isAndroid(),_=h.deviceType.isTouch(),N=()=>!(T||C||x&&_),L=()=>{const j=a();zK(n,s,j,l,d,g,N())};if((x||C)&&g!=="node"){const j=()=>{fL(n),L()};RN(n,s)?j():(n.once("selectionchange",j),n.once("touchend",()=>n.off("selectionchange",j)))}else L()},hL=n=>De(n)?n==="|":n.type==="separator",NN={type:"separator"},pL=n=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(De(n))return n;switch(n.type){case"separator":return NN;case"submenu":return{type:"nestedmenuitem",...s(n),getSubmenuItems:()=>{const l=n.getSubmenuItems();return De(l)?l:ye(l,pL)}};default:const a=n;return{type:"menuitem",...s(a),onAction:Ye(a.onAction)}}},mk=(n,s)=>{if(s.length===0)return n;const l=Jl(n).filter(d=>!hL(d)).fold(()=>[],d=>[NN]);return n.concat(l).concat(s).concat([NN])},UK=(n,s,a)=>{const l=ao(s,(d,g)=>Vt(n,g.toLowerCase()).map(h=>{const C=h.update(a);if(De(C)&&oi(vt(C)))return mk(d,C.split(" "));if($n(C)&&C.length>0){const x=ye(C,pL);return mk(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return l.length>0&&hL(l[l.length-1])&&l.pop(),l},bL=(n,s)=>s.ctrlKey&&!AN(n),jK=n=>n.type==="longpress"||mo(n,"touches"),vL=(n,s)=>!jK(s)&&(s.button!==2||s.target===n.getBody()&&s.pointerType===""),fk=(n,s)=>vL(n,s)?n.selection.getStart(!0):s.target,WK=(n,s)=>{const a=NK(n),l=vL(n,s)?"selection":"point";if(oi(a)){const d=fk(n,s);return dg(at.fromDom(d),a)?"node":l}else return l},yL=(n,s,a)=>{const d=Gs().deviceType.isTouch,g=p(js.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>n.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:nt([xn("dismissContextMenu",[Ie(fm(),(x,T)=>{Co.close(x),n.focus()})])])})),h=()=>js.hide(g),C=x=>{if(AN(n)&&x.preventDefault(),bL(n,x)||MK(n))return;const T=WK(n,x),_=()=>{const L=fk(n,x),j=n.ui.registry.getAll(),Z=iL(n);return UK(j.contextMenus,Z,L)};(d()?VK:FK)(n,x,_,a,g,T)};n.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");n.on(x,h),n.on("longpress contextmenu",C)})},wS=40,gk=wS/2,CL=(n,s,a,l,d,g)=>n.fold(()=>Wg.snap({sensor:Bd(a-gk,l-gk),range:Po(d,g),output:Bd(A.some(a),A.some(l)),extra:{td:s}}),h=>{const C=a-gk,x=l-gk,T=wS,_=wS,N=h.element.dom.getBoundingClientRect();return Wg.snap({sensor:Bd(C,x),range:Po(T,_),output:Bd(A.some(a-N.width/2),A.some(l-N.height/2)),extra:{td:s}})}),xL=(n,s,a)=>{const l=(d,g)=>d.exists(h=>I(h,g));return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;l(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},SL=n=>To(sa.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:nt([Wg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),Om.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),ZK=(n,s)=>{const a=Pt([]),l=Pt([]),d=Pt(!1),g=hn(),h=hn(),C=Ue=>{const Qe=cf(Ue);return CL(j.getOpt(s),Ue,Qe.x,Qe.y,Qe.width,Qe.height)},x=()=>ye(a.get(),Ue=>C(Ue)),T=Ue=>{const Qe=cf(Ue);return CL(Z.getOpt(s),Ue,Qe.right,Qe.bottom,Qe.width,Qe.height)},_=()=>ye(l.get(),Ue=>T(Ue)),N=xL(x,g,Ue=>{h.get().each(Qe=>{n.dispatch("TableSelectorChange",{start:Ue,finish:Qe})})}),L=xL(_,h,Ue=>{g.get().each(Qe=>{n.dispatch("TableSelectorChange",{start:Qe,finish:Ue})})}),j=SL(N),Z=SL(L),ne=p(j.asSpec()),ae=p(Z.asSpec()),Y=(Ue,Qe,Ke,Qt)=>{const zt=Qe.dom.getBoundingClientRect();Kn(Ue.element,"display");const jn=sg(at.fromDom(n.getBody())).dom.innerHeight,Jt=Ke(zt),_n=Qt(zt,jn);(Jt||_n)&&gn(Ue.element,"display","none")},le=(Ue,Qe,Ke,Qt)=>{const zt=Ke(Qe);Wg.snapTo(Ue,zt),Y(Ue,Qe,_n=>_n[Qt]<0,(_n,Ut)=>_n[Qt]>Ut)},pe=Ue=>le(ne,Ue,C,"top"),Ee=()=>g.get().each(pe),Oe=Ue=>le(ae,Ue,T,"bottom"),ht=()=>h.get().each(Oe);if(Gs().deviceType.isTouch()){const Ue=Qe=>ye(Qe,at.fromDom);n.on("TableSelectionChange",Qe=>{d.get()||(xm(s,ne),xm(s,ae),d.set(!0));const Ke=at.fromDom(Qe.start),Qt=at.fromDom(Qe.finish);g.set(Ke),h.set(Qt),A.from(Qe.otherCells).each(zt=>{a.set(Ue(zt.upOrLeftCells)),l.set(Ue(zt.downOrRightCells)),pe(Ke),Oe(Qt)})}),n.on("ResizeEditor ResizeWindow ScrollContent",()=>{Ee(),ht()}),n.on("TableSelectionClear",()=>{d.get()&&(wm(ne),wm(ae),d.set(!1)),g.clear(),h.clear()})}};var wL=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const GK=n=>n.nodeName==="BR"||!!n.getAttribute("data-mce-bogus")||n.getAttribute("data-mce-type")==="bookmark",qK=(n,s,a)=>{const l=s.delimiter??"›",d=(x,T,_)=>sa.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":_}},components:[Ss(x)],action:N=>{n.focus(),n.selection.select(T),n.nodeChanged()},buttonBehaviours:nt([bs.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",T.nodeName.toLowerCase()]),onShow:(N,L)=>{Vl(N.element,L.element)},onHide:N=>{a2(N.element)}})}),Lm.button(a.isDisabled),Cr(()=>a.checkUiComponentContext("any"))])}),g=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ss(` ${l} `)]}),h=x=>ao(x,(T,_,N)=>{const L=d(_.name,_.element,N);return N===0?T.concat([L]):T.concat([g(),L])},[]),C=x=>{const T=[];let _=x.length;for(;_-- >0;){const N=x[_];if(N.nodeType===1&&!GK(N)){const L=cW(n,N);if(L.isDefaultPrevented()||T.push({name:L.name,element:N}),L.isPropagationStopped())break}}return T};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:nt([Xt.config({mode:"flow",selector:"div[role=button]"}),Ft.config({disabled:a.isDisabled}),Cr(()=>a.checkUiComponentContext("any")),us.config({}),An.config({}),xn("elementPathEvents",[ps((x,T)=>{n.shortcuts.add("alt+F11","focus statusbar elementpath",()=>Xt.focusIn(x)),n.on("NodeChange",_=>{const N=C(_.parents),L=N.length>0?h(N):[];An.set(x,L)})})])]),components:[]}};var Gf;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(Gf||(Gf={}));const EL=n=>{const s=at.fromDom(n.getContainer()),a=pr(s),l=ia(s);return{height:a,width:l}},KK=(n,s,a,l)=>{const d=ok(l.height+s.top,dO(n),mO(n));return a===Gf.Both?{height:d,width:ok(l.width+s.left,uO(n),PT(n))}:{height:d}},TL=(n,s,a)=>{const l=at.fromDom(n.getContainer()),d=EL(n),g=KK(n,s,a,d);return ms(g,(h,C)=>{In(h)&&gn(l,C,nk(h))}),jD(n),g},YK=n=>{const s=GB(n);return s===!1?Gf.None:s==="both"?Gf.Both:Gf.Vertical},XK=(n,s)=>s===Gf.Both?Nc.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",n.height,n.width]):Nc.translate(["Editor's height: {0} pixels",n.height]),MN=(n,s,a)=>{ln(n.element,"aria-valuetext",XK(s,a))},hk=(n,s,a,l,d)=>{const h=Po(l*20,d*20),C=TL(n,h,a);return MN(s,C,a),A.some(!0)},kL=(n,s)=>{const a=YK(n);if(a===Gf.None)return A.none();const l=a===Gf.Both?Nc.translate("Press the arrow keys to resize the editor."):Nc.translate("Press the Up and Down arrow keys to resize the editor."),d=a===Gf.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return A.some(mu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(l),"data-mce-name":"resize-handle",role:"separator"},behaviours:[Wg.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const x=TL(n,C,a);MN(g,x,a)},blockerClass:"tox-blocker"}),Xt.config({mode:"special",onLeft:g=>hk(n,g,a,-1,0),onRight:g=>hk(n,g,a,1,0),onUp:g=>hk(n,g,a,0,-1),onDown:g=>hk(n,g,a,0,1)}),us.config({}),En.config({}),bs.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),xn("set-aria-valuetext",[ps(g=>{const h=()=>{MN(g,EL(n),a)};n._skinLoaded?h():n.once("SkinLoaded",h)})])],eventOrder:{[Pu()]:["add-focusable","set-aria-valuetext"]}},s.icons))},QK=(n,s)=>{const a=(l,d,g)=>An.set(l,[Ss(s.translate(["{0} "+g,d[g]]))]);return sa.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:nt([Lm.button(s.isDisabled),Cr(()=>s.checkUiComponentContext("any")),us.config({}),An.config({}),_t.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),xn("wordcount-events",[Ef(l=>{const d=_t.getValue(l),g=d.mode==="words"?"characters":"words";_t.setValue(l,{mode:g,count:d.count}),a(l,d.count,g)}),ps(l=>{n.on("wordCountUpdate",d=>{const{mode:g}=_t.getValue(l);_t.setValue(l,{mode:g,count:d.wordCount}),a(l,d.wordCount,g)})})])]),eventOrder:{[Ea()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},AL=(n,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":n.translate(["Build with {0}","TinyMCE"])},innerHtml:n.translate(["Build with {0}",wL.trim()])},behaviours:nt([En.config({})])}]}),l=()=>{const C=DD("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ss(Nc.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return n.hasPlugin("wordcount")&&C.push(QK(n,s)),vO(n)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],x=XB(n),T=ZB(n),_=vO(n)||n.hasPlugin("wordcount"),N=()=>{const L="tox-statusbar__text-container--flex-start",j="tox-statusbar__text-container--flex-end",Z="tox-statusbar__text-container--space-around";if(x){const ne="tox-statusbar__text-container-3-cols";return!_&&!T?[ne,Z]:_&&!T?[ne,j]:[ne,L]}return[_&&!T?j:L]};return T&&C.push(qK(n,{},s)),x&&C.push(l()),_&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...N()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),x=kL(n,s);return C.concat(x.toArray())})()}},_L=(n,s)=>s.get().getOrDie(`UI for ${n} has not been rendered`),JK=(n,s)=>{const a=n.inline,l=a?tK:Gq,d=ey(n)?SG:pG,g=sk(),h=hn(),C=hn(),x=hn(),L=Gs().deviceType.isTouch()?["tox-platform-touch"]:[],j=FT(n),Z=Cb(n),ne=To({dom:{tag:"div",classes:["tox-anchorbar"]}}),ae=To({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Y=()=>g.mainUi.get().map(qt=>qt.outerContainer).bind(ts.getHeader),le=()=>Wt.fromOption(g.dialogUi.get().map(qt=>qt.sink),"UI has not been rendered"),pe=()=>Wt.fromOption(g.popupUi.get().map(qt=>qt.sink),"(popup) UI has not been rendered"),Ee=g.lazyGetInOuterOrDie("anchor bar",ne.getOpt),Oe=g.lazyGetInOuterOrDie("bottom anchor bar",ae.getOpt),ht=g.lazyGetInOuterOrDie("toolbar",ts.getToolbar),Ue=g.lazyGetInOuterOrDie("throbber",ts.getThrobber),Qe=fG({popup:pe,dialog:le},n,Ee,Oe),Ke=()=>{const qt={attributes:{[Z0]:j?bm.BottomToTop:bm.TopToBottom}},Nn=ts.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Qe.popup,onEscape:()=>{n.focus()}}),Qo=ts.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:Qe.popup.shared.getSink,providers:Qe.popup.shared.providers,onEscape:()=>{n.focus()},onToolbarToggled:qf=>{lW(n,qf)},type:Z,lazyToolbar:ht,lazyHeader:()=>Y().getOrDie("Could not find header element"),...qt}),ko=ts.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Qe.popup.shared.providers,onEscape:()=>{n.focus()},type:Z}),cc=Sp(n),Ps=Qv(n),Xl=Xv(n),Ra=YB(n),hu=Qt(Ra),Za=cc||Ps||Xl,od=()=>cc?[ko]:Ps?[Qo]:[],Bp=[hu,Nn];return ts.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Za?[]:["tox-editor-header--empty"]),...qt},components:en([Xl?Bp:[],od(),Jv(n)?[]:[ne.asSpec()]]),sticky:ey(n),editor:n,sharedBackstage:Qe.popup.shared})},Qt=qt=>ts.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:qt}),zt=()=>{const qt=ts.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Nn=ts.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[qt,Nn]}},jn=()=>{const qt=CO(n),Nn=I(Hc(),qt)&&hs(qt,"display")==="grid",Qo={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(L),attributes:{...Nc.isRtl()?{dir:"rtl"}:{}}},behaviours:nt([Dc.config({useFixed:()=>d.isDocked(Y)})])},ko={dom:{styles:{width:document.body.clientWidth+"px"}},events:ks([Ie(Hh(),Xl=>{gn(Xl.element,"width",document.body.clientWidth+"px")})])},cc=p(zo(Qo,Nn?ko:{})),Ps=u_(cc);return C.set(Ps),{sink:cc,mothership:Ps}},Jt=()=>{const qt={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(L),attributes:{...Nc.isRtl()?{dir:"rtl"}:{}}},behaviours:nt([Dc.config({useFixed:()=>d.isDocked(Y),getBounds:()=>s.getPopupSinkBounds()})])},Nn=p(qt),Qo=u_(Nn);return x.set(Qo),{sink:Nn,mothership:Qo}},_n=()=>{const qt=Ke(),Nn=zt(),Qo=ts.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Qe.popup}),ko=ts.parts.viewWrapper({backstage:Qe.popup}),cc=WB(n)&&!a?A.some(AL(n,Qe.popup.shared.providers)):A.none(),Ps=en([j?[]:[qt],a?[]:[Nn],j?[qt]:[]]),Xl=ts.parts.editorContainer({components:en([Ps,a?[]:[ae.asSpec()]])}),Ra=xO(n),hu={role:"application",...Nc.isRtl()?{dir:"rtl"}:{},...Ra?{"aria-hidden":"true"}:{}},Za=p(ts.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(j?["tox-tinymce--toolbar-bottom"]:[]).concat(L),styles:{visibility:"hidden",...Ra?{opacity:"0",border:"0"}:{}},attributes:hu},components:[Xl,...a?[]:[ko,...cc.toArray()],Qo],behaviours:nt([Cr(()=>Qe.popup.shared.providers.checkUiComponentContext("any")),Ft.config({disableClass:"tox-tinymce--disabled"}),Xt.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),od=u_(Za);return h.set(od),{mothership:od,outerContainer:Za}},Ut=qt=>{const Nn=nk(Xq(n)),Qo=nk(Qq(n));return n.inline||(Qm("div","width",Qo)&&gn(qt.element,"width",Qo),Qm("div","height",Nn)?gn(qt.element,"height",Nn):gn(qt.element,"height","400px")),Nn},Ve=qt=>{n.addShortcut("alt+F9","focus menubar",()=>{ts.focusMenubar(qt)}),n.addShortcut("alt+F10","focus toolbar",()=>{ts.focusToolbar(qt)}),n.addCommand("ToggleToolbarDrawer",(Nn,Qo,ko)=>{Qo?.skipFocus?(gG("skipFocus"),ts.toggleToolbarDrawerWithoutFocusing(qt)):ko?.skip_focus?ts.toggleToolbarDrawerWithoutFocusing(qt):ts.toggleToolbarDrawer(qt)}),n.addQueryStateHandler("ToggleToolbarDrawer",()=>ts.isToolbarDrawerToggled(qt)),n.on("blur",()=>{Cb(n)===du.floating&&ts.isToolbarDrawerToggled(qt)&&ts.toggleToolbarDrawerWithoutFocusing(qt)})},ct=qt=>{const{mainUi:Nn,popupUi:Qo,uiMotherships:ko}=qt;$s($B(n),(Kf,TS)=>{n.ui.registry.addGroupToolbarButton(TS,Kf)});const{buttons:cc,menuItems:Ps,contextToolbars:Xl,sidebars:Ra,views:hu}=n.ui.registry.getAll(),Za=Ax(n),od={menuItems:Ps,menus:t6(n),menubar:HB(n),toolbar:Za.getOrThunk(()=>$T(n)),allowToolbarGroups:Z===du.floating,buttons:cc,sidebar:Ra,views:hu};Ve(Nn.outerContainer),ZR(n,Nn.mothership,ko),d.setup(n,Qe.popup.shared,Y),OK(n,Qe.popup),yL(n,Qe.popup.shared.getSink,Qe.popup),TG(n),DG(n,Ue,Qe.popup.shared),tL(n,Xl,Qo.sink,{backstage:Qe.popup}),ZK(n,Qo.sink);const Bp=n.getElement(),qf=Ut(Nn.outerContainer),Ry={targetNode:Bp,height:qf};return l.render(n,qt,od,Qe.popup,Ry)},mn=qt=>(x.set(qt.mothership),qt),Pn=()=>{const qt=_n(),Nn=jn(),Qo=wp(n)?Jt():mn(Nn);g.dialogUi.set(Nn),g.popupUi.set(Qo),g.mainUi.set(qt);const ko={popupUi:Qo,dialogUi:Nn,mainUi:qt,uiMotherships:g.getUiMotherships()};return ct(ko)};return{popups:{backstage:Qe.popup,getMothership:()=>_L("popups",x)},dialogs:{backstage:Qe.dialog,getMothership:()=>_L("dialogs",C)},renderUI:Pn}},OL=n=>{const s=[],a={};return ms(n,(l,d)=>{l.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Wt.error(s):Wt.value(a)},Vb=(n,s,a,l)=>{const d=To(vp.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:ye(n.items,h=>fF(g,h,s,a,l))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:nt([Xt.config({mode:"acyclic",useTabstopAt:X(eS)}),qd.memento(d),qW(d,{postprocess:g=>OL(g).fold(h=>(console.error(h),{}),Yt)}),xn("dialog-body-panel",[Ie(Qi(),(g,h)=>{g.getSystem().broadcastOn([Np],{newFocus:A.some(h.event.target)})})])])}},DL=(n,s,a)=>ye(n,(l,d)=>{An.set(a,n[d].view());const g=s.dom.getBoundingClientRect();return An.set(a,[]),g.height}),eY=n=>Oo(Fo(n,(s,a)=>s>a?-1:s<a?1:0)),tY=(n,s,a)=>{const l=Gp(n).dom,d=Ll(n,".tox-dialog-wrap").getOr(n),g=hs(d,"position")==="fixed";let h;g?h=Math.max(l.clientHeight,window.innerHeight):h=Math.max(l.offsetHeight,l.scrollHeight);const C=pr(s),T=s.dom.offsetLeft>=a.dom.offsetLeft+ia(a)?Math.max(pr(a),C):C,_=parseInt(hs(n,"margin-top"),10)||0,N=parseInt(hs(n,"margin-bottom"),10)||0,j=pr(n)+_+N-T;return h-j},nY=(n,s)=>{Oo(n).each(a=>yb.showTab(s,a.value))},RL=(n,s)=>{gn(n,"height",s+"px"),gn(n,"flex-basis",s+"px")},pk=(n,s,a)=>{Ll(n,'[role="dialog"]').each(l=>{Bo(l,'[role="tablist"]').each(d=>{a.get().map(g=>(gn(s,"height","0"),gn(s,"flex-basis","0"),Math.min(g,tY(l,s,d)))).each(g=>{RL(s,g)})})})},bk=n=>Bo(n,'[role="tabpanel"]'),oY=n=>{const s=hn();return{extraEvents:[ps(d=>{const g=d.element;bk(g).each(h=>{gn(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const x=DL(n,h,C);eY(x).fold(s.clear,s.set)}),pk(g,h,s),Kn(h,"visibility"),nY(n,d),requestAnimationFrame(()=>{pk(g,h,s)})})}),Ie(Hh(),d=>{const g=d.element;bk(g).each(h=>{pk(g,h,s)})}),Ie(gR,(d,g)=>{const h=d.element;bk(h).each(C=>{const x=Fr(fr(C));gn(C,"visibility","hidden");const T=xs(C,"height").map(L=>parseInt(L,10));Kn(C,"height"),Kn(C,"flex-basis");const _=C.dom.getBoundingClientRect().height;T.forall(L=>_>L)?(s.set(_),pk(h,C,s)):T.each(L=>{RL(C,L)}),Kn(C,"visibility"),x.each(Ir)})})],selectFirst:!1}},NL="send-data-to-section",ML="send-data-to-view",sY=(n,s,a,l)=>{const d=Pt({}),g=_=>{const N=_t.getValue(_),L=OL(N).getOr({}),j=d.get(),Z=zo(j,L);d.set(Z)},h=_=>{const N=d.get();_t.setValue(_,N)},C=Pt(null),x=ye(n.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ss(a.shared.providers.translate(_.title))],view:()=>[vp.sketch(N=>({dom:{tag:"div",classes:["tox-form"]},components:ye(_.items,L=>fF(N,L,s,a,l)),formBehaviours:nt([Xt.config({mode:"acyclic",useTabstopAt:X(eS)}),xn("TabView.form.events",[ps(h),ou(g)]),Rc.config({channels:Bh([{key:NL,value:{onReceive:g}},{key:ML,value:{onReceive:h}}])})])}))]})),T=oY(x);return yb.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,N,L)=>{const j=_t.getValue(N);tn(_,fI,{name:j,oldName:C.get()}),C.set(j)},tabs:x,components:[yb.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[TB.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:nt([us.config({})])}),yb.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:nt([xn("tabpanel",T.extraEvents),Xt.config({mode:"acyclic"}),Fe.config({find:_=>Oo(yb.getViewItems(_))}),Lb(A.none(),_=>(_.getSystem().broadcastOn([NL],{}),d.get()),(_,N)=>{d.set(N),_.getSystem().broadcastOn([ML],{})})])})},PL=(n,s,a,l,d,g)=>{const h=T=>{const _=T.body;switch(_.type){case"tabpanel":return[sY(_,T.initialData,l,g)];default:return[Vb(_,T.initialData,l,g)]}},C=(T,_)=>A.some({isTabPanel:()=>_.body.type==="tabpanel"}),x={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?x:{}}},components:[],behaviours:nt([qd.childAt(0),Kl.config({channel:`${MI}-${s}`,updateState:C,renderComponents:h,initialData:n})])}},rY=(n,s,a,l,d,g)=>PL(n,s,A.some(a),l,d,g),aY=(n,s,a,l)=>{const d=PL(n,s,A.none(),a,!1,l);return ra.parts.body(d)},BL=n=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[RI(A.none(),{dom:{tag:"iframe",attributes:{src:n.url}},behaviours:nt([us.config({}),En.config({})])})]}],behaviours:nt([Xt.config({mode:"acyclic",useTabstopAt:X(eS)})])};return ra.parts.body(s)},cY=qv.deviceType.isTouch(),$L=(n,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,s]}),IL=(n,s)=>ra.parts.close(sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:n,buttonBehaviours:nt([us.config({})])})),FL=()=>ra.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),LL=(n,s)=>ra.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Dm(`<p>${Mx(s.translate(n))}</p>`)}]}]}),vk=n=>ra.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n}),HL=(n,s)=>[Am.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),Am.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],PN=n=>{const s="tox-dialog",a=s+"-wrap",l=a+"__backdrop",d=s+"__disable-scroll";return ra.sketch({lazySink:n.lazySink,onEscape:g=>(n.onEscape(g),A.some(!0)),useTabstopAt:g=>!eS(g),firstTabstop:n.firstTabstop,dom:{tag:"div",classes:[s].concat(n.extraClasses),styles:{position:"relative",...n.extraStyles}},components:[n.header,n.body,...n.footer.toArray()],parts:{blocker:{dom:Dm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:cY?[l,l+"--opaque"]:[l]}}]}},dragBlockClass:a,modalBehaviours:nt([En.config({}),xn("dialog-events",n.dialogEvents.concat([ep(Qi(),(g,h)=>{Ge.isBlocked(g)?U():Xt.focusIn(g)}),Ie(S0(),(g,h)=>{g.getSystem().broadcastOn([Np],{newFocus:h.event.newFocus})})])),xn("scroll-lock",[ps(()=>{jo(Hc(),d)}),ou(()=>{Rs(Hc(),d)})]),...n.extraBehaviours]),eventOrder:{[Ea()]:["dialog-events"],[Pu()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[xi()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...n.eventOrder}})},zL=n=>sa.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:nt([us.config({}),bs.config(n.tooltips.getConfig({tooltipText:n.translate("Close")}))]),components:[mu("close",{tag:"span",classes:["tox-icon"]},n.icons)],action:s=>{Wn(s,rh)}}),VL=(n,s,a,l)=>{const d=g=>[Ss(l.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:nt([Kl.config({channel:`${vR}-${s}`,initialData:n,renderComponents:d})])}},UL=()=>({dom:Dm('<div class="tox-dialog__draghandle"></div>')}),lY=(n,s,a,l)=>Am.sketch({dom:Dm('<div class="tox-dialog__header"></div>'),components:[VL(n,s,A.some(a),l),UL(),zL(l)],containerBehaviours:nt([Wg.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Sa(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Ar()],{target:g})}})])}),iY=(n,s,a)=>{const l=ra.parts.title(VL(n,s,A.none(),a)),d=ra.parts.draghandle(UL()),g=ra.parts.close(zL(a)),h=[l].concat(n.draggable?[d]:[]).concat([g]);return Am.sketch({dom:Dm('<div class="tox-dialog__header"></div>'),components:h})},jL=(n,s,a)=>iY({title:a.shared.providers.translate(n),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),BN=(n,s,a,l)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${l.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Dm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),$N=(n,s,a)=>({onClose:()=>a.closeWindow(),onBlock:l=>{const d=Bo(n().element,".tox-dialog__header").map(g=>pr(g));ra.setBusy(n(),(g,h)=>BN(l.message,h,s,d))},onUnblock:()=>{ra.setIdle(n())}}),WL="tox-dialog--fullscreen",Ub="tox-dialog--width-lg",IN="tox-dialog--width-md",yk=n=>{switch(n){case"large":return A.some(Ub);case"medium":return A.some(IN);default:return A.none()}},Ck=(n,s)=>{const a=at.fromDom(s.element.dom);cr(a,WL)||(ua(a,[Ub,IN]),yk(n).each(l=>jo(a,l)))},ZL=(n,s)=>{const a=at.fromDom(n.element.dom),l=l1(a),d=Lt(l,g=>g===Ub||g===IN).or(yk(s));Du(a,[WL,...d.toArray()])},GL=(n,s,a)=>p(PN({...n,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[w4({}),...n.extraBehaviours],onEscape:l=>{Wn(l,rh)},dialogEvents:s,eventOrder:{[mm()]:[Kl.name(),Rc.name()],[Pu()]:["scroll-lock",Kl.name(),"messages","dialog-events","alloy.base.behaviour"],[xi()]:["alloy.base.behaviour","dialog-events","messages",Kl.name(),"scroll-lock"]}})),FN=(n,s={})=>{const a=l=>{const d=ye(l.items,g=>{const h=Vt(s,g.name).getOr(Pt(!1));return{...g,storage:h}});return{...l,items:d}};return ye(n,l=>l.type==="menu"?a(l):l)},qL=n=>ao(n,(s,a)=>a.type==="menu"?ao(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),KL=(n,s)=>[Jh(Qi(),NI),n(Fb,(a,l,d,g)=>{$l(g.element)&&Fr(fr(g.element)).each(Ds),s.onClose(),l.onClose()}),n(rh,(a,l,d,g)=>{l.onCancel(a),Wn(g,Fb)}),Ie(x4,(a,l)=>s.onUnblock()),Ie(fR,(a,l)=>s.onBlock(l.event))],uY=(n,s)=>{const a=(d,g)=>Ie(d,(h,C)=>{l(h,(x,T)=>{g(n(),x,C.event,h)})}),l=(d,g)=>{Kl.getState(d).get().each(h=>{g(h,d)})};return[...KL(a,s),a(Gd,(d,g,h)=>{g.onAction(d,{name:h.name})})]},YL=(n,s,a)=>{const l=(g,h)=>Ie(g,(C,x)=>{d(C,(T,_)=>{h(n(),T,x.event,C)})}),d=(g,h)=>{Kl.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...KL(l,s),l(Jx,(g,h)=>h.onSubmit(g)),l(wl,(g,h,C)=>{h.onChange(g,{name:C.name})}),l(Gd,(g,h,C,x)=>{const T=()=>x.getSystem().isConnected()?Xt.focusIn(x):void 0,_=j=>ea(j,"disabled")||Jr(j,"aria-disabled").exists(Z=>Z==="true"),N=fr(x.element),L=Fr(N);h.onAction(g,{name:C.name,value:C.value}),Fr(N).fold(T,j=>{_(j)||L.exists(Z=>ee(j,Z)&&_(Z))?T():a().toOptional().filter(Z=>!ee(Z.element,j)).each(T)})}),l(fI,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),ou(g=>{const h=n();_t.setValue(g,h.getData())})]},dY=(n,s)=>sS(n,n.type,s),mY=(n,s,a)=>Lt(s,l=>l.name===a).bind(l=>l.memento.getOpt(n)),fY=(n,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),l=ro(a,C=>C.align==="start"),d=(C,x)=>Am.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:ye(x,T=>T.memento.asSpec())}),g=d("start",l.pass),h=d("end",l.fail);return[g,h]},XL=(n,s,a)=>{const l=(d,g)=>{const h=ye(g.buttons,x=>{const T=To(dY(x,a));return{name:x.name,align:x.align,memento:T}}),C=x=>mY(d,h,x);return A.some({lookupByName:C,footerButtons:h})};return{dom:Dm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:nt([Kl.config({channel:`${PI}-${s}`,initialData:n,updateState:l,renderComponents:fY})])}},gY=(n,s,a)=>XL(n,s,a),QL=(n,s,a)=>ra.parts.footer(XL(n,s,a)),xk=(n,s)=>{if(n.getRoot().getSystem().isConnected()){const l=Fe.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return vp.getField(l,s).orThunk(()=>n.getFooter().bind(h=>Kl.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},hY=(n,s)=>{const a=n.getRoot();return Kl.getState(a).get().map(l=>Ci(Ls("data",l.dataValidator,s))).getOr(s)},JL=(n,s,a)=>{const l=Z=>{const ne=n.getRoot();ne.getSystem().isConnected()&&Z(ne)},j={getData:()=>{const Z=n.getRoot(),ne=Z.getSystem().isConnected()?n.getFormWrapper():Z,ae=_t.getValue(ne),Y=$s(a,le=>le.get());return{...ae,...Y}},setData:Z=>{l(ne=>{const ae=j.getData(),Y=zo(ae,Z),le=hY(n,Y),pe=n.getFormWrapper();_t.setValue(pe,le),ms(a,(Ee,Oe)=>{mo(Y,Oe)&&Ee.set(Y[Oe])})})},setEnabled:(Z,ne)=>{xk(n,Z).each(ne?Ft.enable:Ft.disable)},focus:Z=>{xk(n,Z).each(En.focus)},block:Z=>{if(!De(Z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");l(ne=>{tn(ne,fR,{message:Z})})},unblock:()=>{l(Z=>{Wn(Z,x4)})},showTab:Z=>{l(ne=>{const ae=n.getBody();Kl.getState(ae).get().exists(le=>le.isTabPanel())&&Fe.getCurrent(ae).each(le=>{yb.showTab(le,Z)})})},redial:Z=>{l(ne=>{const ae=n.getId(),Y=s(Z),le=FN(Y.internalDialog.buttons,a);ne.getSystem().broadcastOn([`${_4}-${ae}`],Y),ne.getSystem().broadcastOn([`${vR}-${ae}`],Y.internalDialog),ne.getSystem().broadcastOn([`${MI}-${ae}`],Y.internalDialog),ne.getSystem().broadcastOn([`${PI}-${ae}`],{...Y.internalDialog,buttons:le}),j.setData(Y.initialData)})},close:()=>{l(Z=>{Wn(Z,Fb)})},toggleFullscreen:n.toggleFullscreen};return j},pY=(n,s,a)=>{const l=Ct("dialog"),d=n.internalDialog,g=jL(d.title,l,a),h=Pt(d.size),C=pe=>xk(Y,pe),x=yk(h.get()).toArray(),T=(pe,Ee)=>(h.set(Ee.internalDialog.size),Ck(Ee.internalDialog.size,pe),A.some(Ee)),_=aY({body:d.body,initialData:d.initialData},l,a,C),N=FN(d.buttons),L=qL(N),j=$r(N.length!==0,QL({buttons:N},l,a)),Z=YL(()=>le,$N(()=>ae,a.shared.providers,s),a.shared.getSink),ne={id:l,header:g,body:_,footer:j,extraClasses:x,extraBehaviours:[Kl.config({channel:`${_4}-${l}`,updateState:T,initialData:n})],extraStyles:{}},ae=GL(ne,Z,a),Y=(()=>{const pe=()=>{const Oe=ra.getBody(ae);return Fe.getCurrent(Oe).getOr(Oe)},Ee=()=>{ZL(ae,h.get())};return{getId:oe(l),getRoot:oe(ae),getBody:()=>ra.getBody(ae),getFooter:()=>ra.getFooter(ae),getFormWrapper:pe,toggleFullscreen:Ee}})(),le=JL(Y,s.redial,L);return{dialog:ae,instanceApi:le}},ES=(n,s,a,l=!1,d)=>{const g=Ct("dialog"),h=Ct("dialog-label"),C=Ct("dialog-content"),x=n.internalDialog,T=Ke=>xk(Ue,Ke),_=Pt(x.size),N=yk(_.get()).toArray(),L=(Ke,Qt)=>(_.set(Qt.internalDialog.size),Ck(Qt.internalDialog.size,Ke),d(),A.some(Qt)),j=To(lY({title:x.title,draggable:!0},g,h,a.shared.providers)),Z=To(rY({body:x.body,initialData:x.initialData},g,C,a,l,T)),ne=FN(x.buttons),ae=qL(ne),Y=$r(ne.length!==0,To(gY({buttons:ne},g,a))),le=YL(()=>Qe,{onBlock:Ke=>{Ge.block(Oe,(Qt,zt)=>{const jn=j.getOpt(Oe).map(Jt=>pr(Jt.element));return BN(Ke.message,zt,a.shared.providers,jn)})},onUnblock:()=>{Ge.unblock(Oe)},onClose:()=>s.closeWindow()},a.shared.getSink),pe="tox-dialog-inline",Ee=Gs().os,Oe=p({dom:{tag:"div",classes:["tox-dialog",pe,...N],attributes:{role:"dialog",...Ee.isMacOS()?{"aria-label":x.title}:{"aria-labelledby":h}}},eventOrder:{[mm()]:[Kl.name(),Rc.name()],[Ea()]:["execute-on-form"],[Pu()]:["reflecting","execute-on-form"]},behaviours:nt([Xt.config({mode:"cyclic",onEscape:Ke=>(Wn(Ke,Fb),A.some(!0)),useTabstopAt:Ke=>!eS(Ke)&&(Ml(Ke)!=="button"||Rr(Ke,"disabled")!=="disabled"),firstTabstop:1}),Kl.config({channel:`${_4}-${g}`,updateState:L,initialData:n}),En.config({}),xn("execute-on-form",le.concat([ep(Qi(),(Ke,Qt)=>{Xt.focusIn(Ke)}),Ie(S0(),(Ke,Qt)=>{Ke.getSystem().broadcastOn([Np],{newFocus:Qt.event.newFocus})})])),Ge.config({getRoot:()=>A.some(Oe)}),An.config({}),w4({})]),components:[j.asSpec(),Z.asSpec(),...Y.map(Ke=>Ke.asSpec()).toArray()]}),ht=()=>{ZL(Oe,_.get())},Ue={getId:oe(g),getRoot:oe(Oe),getFooter:()=>Y.map(Ke=>Ke.get(Oe)),getBody:()=>Z.get(Oe),getFormWrapper:()=>{const Ke=Z.get(Oe);return Fe.getCurrent(Ke).getOr(Ke)},toggleFullscreen:ht},Qe=JL(Ue,s.redial,ae);return{dialog:Oe,instanceApi:Qe}};var LN=tinymce.util.Tools.resolve("tinymce.util.URI");const bY=n=>{const s=h=>{n.getSystem().isConnected()&&h(n)};return{block:h=>{if(!De(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{tn(C,fR,{message:h})})},unblock:()=>{s(h=>{Wn(h,x4)})},close:()=>{s(h=>{Wn(h,Fb)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([yn],h)})}}},vY=["insertContent","setContent","execCommand","close","block","unblock"],e7=n=>et(n)&&vY.indexOf(n.mceAction)!==-1,yY=n=>!e7(n)&&et(n)&&mo(n,"mceAction"),CY=(n,s,a)=>{switch(a.mceAction){case"insertContent":n.insertContent(a.content);break;case"setContent":n.setContent(a.content);break;case"execCommand":const l=vn(a.ui)?a.ui:!1;n.execCommand(a.cmd,l,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},t7=(n,s,a,l)=>{const d=Ct("dialog"),g=jL(n.title,d,l),h=BL(n),C=n.buttons.bind(pe=>pe.length===0?A.none():A.some(QL({buttons:pe},d,l))),x=uY(()=>le,$N(()=>Y,l.shared.providers,s)),T={...n.height.fold(()=>({}),pe=>({height:pe+"px","max-height":pe+"px"})),...n.width.fold(()=>({}),pe=>({width:pe+"px","max-width":pe+"px"}))},_=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],N=new LN(n.url,{base_uri:new LN(window.location.href)}),L=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,j=_s(),Z=(pe,Ee)=>A.some(Ee),ne=[Kl.config({channel:`${_4}-${d}`,updateState:Z,initialData:n}),xn("messages",[ps(()=>{const pe=Do(at.fromDom(window),"message",Ee=>{if(N.isSameOrigin(new LN(Ee.raw.origin))){const Oe=Ee.raw.data;e7(Oe)?CY(a,le,Oe):yY(Oe)&&n.onMessage(le,Oe)}});j.set(pe)}),ou(j.clear)]),Rc.config({channels:{[yn]:{onReceive:(pe,Ee)=>{Bo(pe.element,"iframe").each(Oe=>{const ht=Oe.dom.contentWindow;un(ht)&&ht.postMessage(Ee,L)})}}}})],Y=GL({id:d,header:g,body:h,footer:C,extraClasses:_,extraBehaviours:ne,extraStyles:T},x,l),le=bY(Y);return{dialog:Y,instanceApi:le}},xY=n=>{const s=n.shared;return{open:(l,d)=>{const g=()=>{ra.hide(T),d()},h=To(sS({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",n)),C=FL(),x=IL(g,s.providers),T=p(PN({lazySink:()=>s.getSink(),header:$L(C,x),body:LL(l,s.providers),footer:A.some(vk(HL([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ie(rh,g)],eventOrder:{}}));ra.show(T);const _=h.get(T);En.focus(_)}}},SY=n=>{const s=n.shared;return{open:(l,d)=>{const g=L=>{ra.hide(_),d(L)},h=To(sS({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",n)),C=sS({context:"any",name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",n),x=FL(),T=IL(()=>g(!1),s.providers),_=p(PN({lazySink:()=>s.getSink(),header:$L(x,T),body:LL(l,s.providers),footer:A.some(vk(HL([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Ie(rh,()=>g(!1)),Ie(Jx,()=>g(!0))],eventOrder:{}}));ra.show(_);const N=h.get(_);En.focus(N)}}},n7=(n,s)=>Ci(Ls("data",s,n)),o7=n=>dg(n,".tox-alert-dialog")||dg(n,".tox-confirm-dialog"),wY=(n,s,a,l)=>s&&a?[]:[Ms.config({contextual:{lazyContext:()=>A.some(Er(at.fromDom(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:l},modes:["top"],lazyViewport:d=>Yg(n,d.element).map(h=>({bounds:xb(h),optScrollEnv:A.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:xa(h.element).top})})).getOrThunk(()=>({bounds:Fa(),optScrollEnv:A.none()}))})],HN=n=>{const s=n.editor,a=ey(s),l=xY(n.backstages.dialog),d=SY(n.backstages.dialog),g=(Z,ne,ae)=>{if(!Cn(ne)){if(ne.inline==="toolbar")return T(Z,n.backstages.popup.shared.anchors.inlineDialog(),ae,ne);if(ne.inline==="bottom")return _(Z,n.backstages.popup.shared.anchors.inlineBottomDialog(),ae,ne);if(ne.inline==="cursor")return T(Z,n.backstages.popup.shared.anchors.cursor(),ae,ne)}return x(Z,ae)},h=(Z,ne)=>C(Z,ne),C=(Z,ne)=>{const ae=Y=>{const le=t7(Y,{closeWindow:()=>{ra.hide(le.dialog),ne(le.instanceApi)}},s,n.backstages.dialog);return ra.show(le.dialog),le.instanceApi};return Nb.openUrl(ae,Z)},x=(Z,ne)=>{const ae=(Y,le,pe)=>{const Ee=le,ht=pY({dataValidator:pe,initialData:Ee,internalDialog:Y},{redial:Nb.redial,closeWindow:()=>{ra.hide(ht.dialog),ne(ht.instanceApi)}},n.backstages.dialog);return ra.show(ht.dialog),ht.instanceApi.setData(Ee),ht.instanceApi};return Nb.open(ae,Z)},T=(Z,ne,ae,Y)=>{const le=(pe,Ee,Oe)=>{const ht=n7(Ee,Oe),Ue=hn(),Qe=n.backstages.popup.shared.header.isPositionedAtTop(),Ke={dataValidator:Oe,initialData:ht,internalDialog:pe},Qt=()=>Ue.on(Ve=>{js.reposition(Ve),(!a||!Qe)&&Ms.refresh(Ve)}),zt=ES(Ke,{redial:Nb.redial,closeWindow:()=>{Ue.on(js.hide),s.off("ResizeEditor",Qt),s.off("ScrollWindow",jn),Ue.clear(),ae(zt.instanceApi)}},n.backstages.popup,Y.ariaAttrs,Qt),jn=()=>zt.dialog.getSystem().broadcastOn([Ar()],{target:zt.dialog.element}),Jt=()=>zt.dialog.getSystem().broadcastOn([_d()],{target:zt.dialog.element}),_n=p(js.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Y.persistent?{event:"doNotDismissYet"}:{},...Qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:nt([xn("window-manager-inline-events",[Ie(fm(),(Ve,ct)=>{Wn(zt.dialog,rh)})]),...wY(s,a,Qe,Jt)]),isExtraPart:(Ve,ct)=>o7(ct)}));Ue.set(_n);const Ut=()=>{const Ve=s.inline?Hc():at.fromDom(s.getContainer()),ct=Er(Ve);return A.some(ct)};return js.showWithinBounds(_n,y(zt.dialog),{anchor:ne},Ut),(!a||!Qe)&&(Ms.refresh(_n),s.on("ResizeEditor",Qt)),s.on("ScrollWindow",jn),zt.instanceApi.setData(ht),Xt.focusIn(zt.dialog),zt.instanceApi};return Nb.open(le,Z)},_=(Z,ne,ae,Y)=>{const le=(pe,Ee,Oe)=>{const ht=n7(Ee,Oe),Ue=hn(),Qe=n.backstages.popup.shared.header.isPositionedAtTop(),Ke={dataValidator:Oe,initialData:ht,internalDialog:pe},Qt=()=>Ue.on(_n=>{js.reposition(_n),Ms.refresh(_n)}),zt=ES(Ke,{redial:Nb.redial,closeWindow:()=>{Ue.on(js.hide),s.off("ResizeEditor ScrollWindow ElementScroll",Qt),Ue.clear(),ae(zt.instanceApi)}},n.backstages.popup,Y.ariaAttrs,Qt),jn=p(js.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Y.persistent?{event:"doNotDismissYet"}:{},...Qe?{}:{fireRepositionEventInstead:{}},inlineBehaviours:nt([xn("window-manager-inline-events",[Ie(fm(),(_n,Ut)=>{Wn(zt.dialog,rh)})]),Ms.config({contextual:{lazyContext:()=>A.some(Er(at.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:_n=>Yg(s,_n.element).map(Ve=>({bounds:xb(Ve),optScrollEnv:A.some({currentScrollTop:Ve.element.dom.scrollTop,scrollElmTop:xa(Ve.element).top})})).getOrThunk(()=>({bounds:Fa(),optScrollEnv:A.none()}))})]),isExtraPart:(_n,Ut)=>o7(Ut)}));Ue.set(jn);const Jt=()=>n.backstages.popup.shared.getSink().toOptional().bind(_n=>{const Ut=Yg(s,_n.element),Ve=15,ct=Ut.map(qt=>xb(qt)).getOr(Fa()),mn=Er(at.fromDom(s.getContentAreaContainer())),Pn=cm(mn,ct);return A.some(Nr(Pn.x,Pn.y,Pn.width,Pn.height-Ve))});return js.showWithinBounds(jn,y(zt.dialog),{anchor:ne},Jt),Ms.refresh(jn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",Qt),zt.instanceApi.setData(ht),Xt.focusIn(zt.dialog),zt.instanceApi};return Nb.open(le,Z)};return{open:g,openUrl:h,alert:(Z,ne)=>{l.open(Z,ne)},close:Z=>{Z.close()},confirm:(Z,ne)=>{d.open(Z,ne)}}},s7=n=>{DB(n),H$(n),RK(n)};var EY=()=>{OB.add("silver",n=>{s7(n);let s=()=>Fa();const{dialogs:a,popups:l,renderUI:d}=JK(n,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return Yg(n,l.getMothership().element).each(L=>{s=()=>xb(L)}),_};zW.register(n,l.backstage.shared);const h=HN({editor:n,backstages:{popup:l.backstage,dialog:a.backstage}}),C=hn(),x=()=>qV(n,{backstage:l.backstage},l.getMothership(),C),T=()=>Bo(at.fromDom(n.getContainer()),".tox-promotion").map(_=>_.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:oe(h),getNotificationManagerImpl:x,getPromotionElement:T}})};EY()}()),XY}var JY;function iJ(){return JY||(JY=1,lJ()),YY}iJ();var eX={},tX={},nX;function uJ(){return nX||(nX=1,function(){var V=tinymce.util.Tools.resolve("tinymce.ModelManager");const ue=(i,m,p)=>p(i,m.prototype)?!0:i.constructor?.name===m.name,ut=i=>{const m=typeof i;return i===null?"null":m==="object"&&Array.isArray(i)?"array":m==="object"&&ue(i,String,(p,y)=>y.isPrototypeOf(p))?"string":m},ot=i=>m=>ut(m)===i,Nt=i=>m=>typeof m===i,ft=i=>m=>i===m,nn=ot("string"),De=ot("object"),et=ot("array"),Tt=ft(null),$n=Nt("boolean"),Mt=ft(void 0),vn=i=>i==null,Cn=i=>!vn(i),pn=Nt("function"),un=Nt("number"),Xe=()=>{},In=(i,m)=>(...p)=>i(m.apply(null,p)),lt=(i,m)=>p=>i(m(p)),U=i=>()=>i,Ye=i=>i,On=(i,m)=>i===m;function Ot(i,...m){return(...p)=>{const y=m.concat(p);return i.apply(null,y)}}const oe=i=>m=>!i(m),Yt=i=>()=>{throw new Error(i)},Gn=i=>i(),jt=U(!1),X=U(!0);class se{tag;value;static singletonNone=new se(!1);constructor(m,p){this.tag=m,this.value=p}static some(m){return new se(!0,m)}static none(){return se.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?se.some(m(this.value)):se.none()}bind(m){return this.tag?m(this.value):se.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:se.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Cn(m)?se.some(m):se.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const os=Array.prototype.slice,an=Array.prototype.indexOf,St=Array.prototype.push,A=(i,m)=>an.call(i,m),Mo=(i,m)=>A(i,m)>-1,st=(i,m)=>{for(let p=0,y=i.length;p<y;p++){const E=i[p];if(m(E,p))return!0}return!1},Wo=(i,m)=>{const p=[];for(let y=0;y<i;y++)p.push(m(y));return p},he=(i,m)=>{const p=i.length,y=new Array(p);for(let E=0;E<p;E++){const D=i[E];y[E]=m(D,E)}return y},de=(i,m)=>{for(let p=0,y=i.length;p<y;p++){const E=i[p];m(E,p)}},bt=(i,m)=>{for(let p=i.length-1;p>=0;p--){const y=i[p];m(y,p)}},cn=(i,m)=>{const p=[],y=[];for(let E=0,D=i.length;E<D;E++){const $=i[E];(m($,E)?p:y).push($)}return{pass:p,fail:y}},fn=(i,m)=>{const p=[];for(let y=0,E=i.length;y<E;y++){const D=i[y];m(D,y)&&p.push(D)}return p},Fn=(i,m,p)=>(bt(i,(y,E)=>{p=m(p,y,E)}),p),ye=(i,m,p)=>(de(i,(y,E)=>{p=m(p,y,E)}),p),He=(i,m,p)=>{for(let y=0,E=i.length;y<E;y++){const D=i[y];if(m(D,y))return se.some(D);if(p(D,y))break}return se.none()},P=(i,m)=>He(i,m,jt),ro=(i,m)=>{for(let p=0,y=i.length;p<y;p++){const E=i[p];if(m(E,p))return se.some(p)}return se.none()},Ln=i=>{const m=[];for(let p=0,y=i.length;p<y;++p){if(!et(i[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+i);St.apply(m,i[p])}return m},oo=(i,m)=>Ln(he(i,m)),ao=(i,m)=>{for(let p=0,y=i.length;p<y;++p){const E=i[p];if(m(E,p)!==!0)return!1}return!0},dr=i=>{const m=os.call(i,0);return m.reverse(),m},Lt=(i,m)=>{const p={};for(let y=0,E=i.length;y<E;y++){const D=i[y];p[String(D)]=m(D,y)}return p},po=(i,m)=>{const p=os.call(i,0);return p.sort(m),p},en=(i,m)=>m>=0&&m<i.length?se.some(i[m]):se.none(),xe=i=>en(i,0),We=i=>en(i,i.length-1),rt=(i,m)=>{for(let p=0;p<i.length;p++){const y=m(i[p],p);if(y.isSome())return y}return se.none()},ze=Object.keys,no=Object.hasOwnProperty,qn=(i,m)=>{const p=ze(i);for(let y=0,E=p.length;y<E;y++){const D=p[y],$=i[D];m($,D)}},Fo=(i,m)=>el(i,(p,y)=>({k:y,v:m(p,y)})),el=(i,m)=>{const p={};return qn(i,(y,E)=>{const D=m(y,E);p[D.k]=D.v}),p},Oo=i=>(m,p)=>{i[p]=m},Jl=(i,m,p,y)=>{qn(i,(E,D)=>{(m(E,D)?p:y)(E,D)})},jm=(i,m)=>{const p={};return Jl(i,m,Oo(p),Xe),p},ha=(i,m)=>{const p=[];return qn(i,(y,E)=>{p.push(m(y,E))}),p},xo=i=>ha(i,Ye),Ka=(i,m)=>ms(i,m)?se.from(i[m]):se.none(),ms=(i,m)=>no.call(i,m),$s=(i,m)=>ms(i,m)&&i[m]!==void 0&&i[m]!==null,yu=i=>{for(const m in i)if(no.call(i,m))return!1;return!0},qr={generate:i=>{if(!et(i))throw new Error("cases must be an array");if(i.length===0)throw new Error("there must be at least one case");const m=[],p={};return de(i,(y,E)=>{const D=ze(y);if(D.length!==1)throw new Error("one and only one name per case");const $=D[0],z=y[$];if(p[$]!==void 0)throw new Error("duplicate key detected:"+$);if($==="cata")throw new Error("cannot have a case named cata (sorry)");if(!et(z))throw new Error("case arguments must be an array");m.push($),p[$]=(...K)=>{const ce=K.length;if(ce!==z.length)throw new Error("Wrong number of arguments to case "+$+". Expected "+z.length+" ("+z+"), got "+ce);return{fold:(...Ge)=>{if(Ge.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+Ge.length);return Ge[E].apply(null,K)},match:Ge=>{const kt=ze(Ge);if(m.length!==kt.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+kt.join(","));if(!ao(m,Gt=>Mo(kt,Gt)))throw new Error("Not all branches were specified when using match. Specified: "+kt.join(", ")+`
Required: `+m.join(", "));return Ge[$].apply(null,K)},log:Ge=>{console.log(Ge,{constructors:m,constructor:$,params:K})}}}}),p}},Ws=i=>{let m=i;return{get:()=>m,set:E=>{m=E}}},mr=i=>i.slice(0).sort(),as=(i,m)=>{throw new Error("All required keys ("+mr(i).join(", ")+") were not specified. Specified keys were: "+mr(m).join(", ")+".")},lc=i=>{throw new Error("Unsupported keys for object: "+mr(i).join(", "))},Ya=(i,m)=>{if(!et(m))throw new Error("The "+i+" fields must be an array. Was: "+m+".");de(m,p=>{if(!nn(p))throw new Error("The value "+p+" in the "+i+" fields was not a string.")})},Vt=(i,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+mr(i).join(", ")+") were not.")},mo=i=>{const m=mr(i);P(m,(y,E)=>E<m.length-1&&y===m[E+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},Un=(i,m)=>ic(i,m,{validate:pn,label:"function"}),ic=(i,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Ya("required",m),mo(m),y=>{const E=ze(y);ao(m,z=>Mo(E,z))||as(m,E),i(m,E);const $=fn(m,z=>!p.validate(y[z],z));return $.length>0&&Vt($,p.label),y}},Pa=(i,m)=>{const p=fn(m,y=>!Mo(i,y));p.length>0&&lc(p)},Pt=i=>Un(Pa,i),Mi=i=>{const m=D=>D(i),p=U(i),y=()=>E,E={tag:!0,inner:i,fold:(D,$)=>$(i),isValue:X,isError:jt,map:D=>uc.value(D(i)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:D=>{D(i)},toOptional:()=>se.some(i)};return E},cs=i=>{const m=()=>p,p={tag:!1,inner:i,fold:(y,E)=>y(i),isValue:jt,isError:X,map:m,mapError:y=>uc.error(y(i)),bind:m,exists:jt,forall:X,getOr:Ye,or:Ye,getOrThunk:Gn,orThunk:Gn,getOrDie:Yt(String(i)),each:Xe,toOptional:se.none};return p},uc={value:Mi,error:cs,fromOption:(i,m)=>i.fold(()=>cs(m),Mi)},Ba=typeof window<"u"?window:Function("return this;")(),Zo=i=>{const m=i.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},kn=(i,m,p=On)=>i.exists(y=>p(y,m)),Go=i=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<i.length;y++)i[y].each(p);return m},ad=(i,m)=>i!=null?m(i):se.none(),Cu=(i,m)=>i?se.some(m):se.none(),tl=(i,m)=>{let p=m??Ba;for(let y=0;y<i.length&&p!==void 0&&p!==null;++y)p=p[i[y]];return p},Wt=(i,m)=>{const p=i.split(".");return tl(p,m)},$a=i=>{const m=Ws(se.none()),p=()=>m.get().each(i);return{clear:()=>{p(),m.set(se.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:z=>{p(),m.set(se.some(z))}}},Dr=()=>{const i=$a(Xe);return{...i,on:p=>i.get().each(p)}},Wm=(i,m)=>i.substring(m),Sr=(i,m,p)=>m===""||i.length>=m.length&&i.substr(p,p+m.length)===m,Qd=(i,m)=>Bi(i,m)?Wm(i,m.length):i,ss=(i,m,p=0,y)=>{const E=i.indexOf(m,p);return E!==-1?Mt(y)?!0:E+m.length<=y:!1},Bi=(i,m)=>Sr(i,m,0),cd=(i,m)=>Sr(i,m,i.length-m.length),Mc=(i=>m=>m.replace(i,""))(/^\s+|\s+$/g),or=i=>i.length>0,$i=i=>{const m=parseFloat(i);return isNaN(m)?se.none():se.some(m)},xu=(i,m)=>{let p=null;const y=()=>{Tt(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...D)=>{y(),p=setTimeout(()=>{p=null,i.apply(null,D)},m)}}},Ct=i=>{let m=!1,p;return(...y)=>(m||(m=!0,p=i.apply(null,y)),p)},Xa=" ",Su=["tfoot","thead","tbody","colgroup"],Al=i=>Mo(Su,i),zo=(i,m)=>({rows:i,columns:m}),ld=(i,m)=>({row:i,column:m}),dc=(i,m,p)=>({element:i,rowspan:m,colspan:p}),Qs=(i,m,p,y)=>({element:i,rowspan:m,colspan:p,isNew:y}),_l=(i,m,p,y,E,D)=>({element:i,rowspan:m,colspan:p,row:y,column:E,isLocked:D}),id=(i,m,p)=>({element:i,cells:m,section:p}),Ia=(i,m,p,y)=>({element:i,cells:m,section:p,isNew:y}),Br=(i,m,p)=>({element:i,isNew:m,isLocked:p}),nl=(i,m,p,y)=>({element:i,cells:m,section:p,isNew:y}),$r=(i,m,p,y)=>({startRow:i,startCol:m,finishRow:p,finishCol:y}),fh=(i,m,p)=>({element:i,colspan:m,column:p}),Jd=(i,m)=>({element:i,columns:m}),Pc=(i,m,p)=>{const y=i.cells,E=y.slice(0,m),D=y.slice(m),$=E.concat(p).concat(D);return Zm(i,$)},Ol=(i,m,p)=>Pc(i,m,[p]),ti=(i,m,p)=>{const y=i.cells;y[m]=p},Zm=(i,m)=>nl(i.element,m,i.section,i.isNew),_s=(i,m)=>{const p=i.cells,y=he(p,m);return nl(i.element,y,i.section,i.isNew)},hn=(i,m)=>i.cells[m],Kr=(i,m)=>hn(i,m).element,Yr=i=>i.cells.length,Os=i=>{const m=cn(i,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},em=(i,m,p)=>{const y=he(i.cells,p);return nl(m(i.element),y,i.section,!0)},Ii=(i,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=i,!y.hasChildNodes()||y.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,i),new Error(E)}return ol(y.childNodes[0])},fs=(i,m)=>{const y=(m||document).createElement(i);return ol(y)},ni=(i,m)=>{const y=(m||document).createTextNode(i);return ol(y)},ol=i=>{if(i==null)throw new Error("Node cannot be null or undefined");return{dom:i}},vt={fromHtml:Ii,fromTag:fs,fromText:ni,fromDom:ol,fromPoint:(i,m,p)=>se.from(i.dom.elementFromPoint(m,p)).map(ol)},oi=(i,m)=>{const p=i.document.createRange();return p.selectNode(m.dom),p},pa=(i,m)=>{const p=i.document.createRange();return Bc(p,m),p},Bc=(i,m)=>i.selectNodeContents(m.dom),Is=(i,m)=>{m.fold(p=>{i.setStartBefore(p.dom)},(p,y)=>{i.setStart(p.dom,y)},p=>{i.setStartAfter(p.dom)})},eg=(i,m)=>{m.fold(p=>{i.setEndBefore(p.dom)},(p,y)=>{i.setEnd(p.dom,y)},p=>{i.setEndAfter(p.dom)})},Qa=(i,m,p)=>{const y=i.document.createRange();return Is(y,m),eg(y,p),y},$c=(i,m,p,y,E)=>{const D=i.document.createRange();return D.setStart(m.dom,p),D.setEnd(y.dom,E),D},Gm=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height}),tg=i=>{const m=i.getClientRects(),p=m.length>0?m[0]:i.getBoundingClientRect();return p.width>0||p.height>0?se.some(p).map(Gm):se.none()},si=qr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ng=(i,m,p)=>m(vt.fromDom(p.startContainer),p.startOffset,vt.fromDom(p.endContainer),p.endOffset),wu=(i,m)=>m.match({domRange:p=>({ltr:U(p),rtl:se.none}),relative:(p,y)=>({ltr:Ct(()=>Qa(i,p,y)),rtl:Ct(()=>se.some(Qa(i,y,p)))}),exact:(p,y,E,D)=>({ltr:Ct(()=>$c(i,p,y,E,D)),rtl:Ct(()=>se.some($c(i,E,D,p,y)))})}),ri=(i,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>si.rtl(vt.fromDom(E.endContainer),E.endOffset,vt.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>ng(i,si.ltr,p)):ng(i,si.ltr,p)},Eu=(i,m)=>{const p=wu(i,m);return ri(i,p)},at=(i,m)=>Eu(i,m).match({ltr:(y,E,D,$)=>{const z=i.document.createRange();return z.setStart(y.dom,E),z.setEnd(D.dom,$),z},rtl:(y,E,D,$)=>{const z=i.document.createRange();return z.setStart(D.dom,$),z.setEnd(y.dom,E),z}});si.ltr,si.rtl;const Fi=8,tm=9,sl=11,mc=1,ud=3,ba=(i,m)=>{const p=i.dom;if(p.nodeType!==mc)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Dl=i=>i.nodeType!==mc&&i.nodeType!==tm&&i.nodeType!==sl||i.childElementCount===0,Li=(i,m)=>{const p=m===void 0?document:m.dom;return Dl(p)?[]:he(p.querySelectorAll(i),vt.fromDom)},ai=(i,m)=>{const p=m===void 0?document:m.dom;return Dl(p)?se.none():se.from(p.querySelector(i)).map(vt.fromDom)},Vo=(i,m)=>i.dom===m.dom,dd=(i,m)=>{const p=i.dom,y=m.dom;return p===y?!1:p.contains(y)},B=ba,G=(i,m,p,y)=>{const E=i.isiOS()&&/ipad/i.test(p)===!0,D=i.isiOS()&&!E,$=i.isiOS()||i.isAndroid(),z=$||y("(pointer:coarse)"),K=E||!D&&$&&y("(min-device-width:768px)"),ce=D||$&&!K,Ce=m.isSafari()&&i.isiOS()&&/safari/i.test(p)===!1,Ge=!ce&&!K&&!Ce;return{isiPad:U(E),isiPhone:U(D),isTablet:U(K),isPhone:U(ce),isTouch:U(z),isAndroid:i.isAndroid,isiOS:i.isiOS,isWebView:U(Ce),isDesktop:U(Ge)}},re=(i,m)=>{for(let p=0;p<i.length;p++){const y=i[p];if(y.test(m))return y}},Pe=(i,m)=>{const p=re(i,m);if(!p)return{major:0,minor:0};const y=E=>Number(m.replace(p,"$"+E));return Uo(y(1),y(2))},Ht=(i,m)=>{const p=String(m).toLowerCase();return i.length===0?Jn():Pe(i,p)},Jn=()=>Uo(0,0),Uo=(i,m)=>({major:i,minor:m}),wr={nu:Uo,detect:Ht,unknown:Jn},Xr=(i,m)=>rt(m.brands,p=>{const y=p.brand.toLowerCase();return P(i,E=>y===E.brand?.toLowerCase()).map(E=>({current:E.name,version:wr.nu(parseInt(p.version,10),0)}))}),Ja=(i,m)=>{const p=String(m).toLowerCase();return P(i,y=>y.search(p))},I=(i,m)=>Ja(i,m).map(p=>{const y=wr.detect(p.versionRegexes,m);return{current:p.name,version:y}}),ee=(i,m)=>Ja(i,m).map(p=>{const y=wr.detect(p.versionRegexes,m);return{current:p.name,version:y}}),fe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_e=i=>m=>ss(m,i),it=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:i=>ss(i,"edge/")&&ss(i,"chrome")&&ss(i,"safari")&&ss(i,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,fe],search:i=>ss(i,"chrome")&&!ss(i,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:i=>ss(i,"msie")||ss(i,"trident")},{name:"Opera",versionRegexes:[fe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:_e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:_e("firefox")},{name:"Safari",versionRegexes:[fe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:i=>(ss(i,"safari")||ss(i,"mobile/"))&&ss(i,"applewebkit")}],It=[{name:"Windows",search:_e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:i=>ss(i,"iphone")||ss(i,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:_e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:_e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:_e("linux"),versionRegexes:[]},{name:"Solaris",search:_e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:_e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:_e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Mn={browsers:U(it),oses:U(It)},wo="Edge",co="Chromium",va="IE",Zs="Opera",Tu="Firefox",qm="Safari",nm=()=>Rl({current:void 0,version:wr.unknown()}),Rl=i=>{const m=i.current,p=i.version,y=E=>()=>m===E;return{current:m,version:p,isEdge:y(wo),isChromium:y(co),isIE:y(va),isOpera:y(Zs),isFirefox:y(Tu),isSafari:y(qm)}},Kb={unknown:nm,nu:Rl},Yb="Windows",Lp="iOS",Nl="Android",Xb="Linux",Qb="macOS",Uy="Solaris",Hi="FreeBSD",jy="ChromeOS",Wy=()=>Hp({current:void 0,version:wr.unknown()}),Hp=i=>{const m=i.current,p=i.version,y=E=>()=>m===E;return{current:m,version:p,isWindows:y(Yb),isiOS:y(Lp),isAndroid:y(Nl),isMacOS:y(Qb),isLinux:y(Xb),isSolaris:y(Uy),isFreeBSD:y(Hi),isChromeOS:y(jy)}},zp={unknown:Wy,nu:Hp},Zy={detect:(i,m,p)=>{const y=Mn.browsers(),E=Mn.oses(),D=m.bind(K=>Xr(y,K)).orThunk(()=>I(y,i)).fold(Kb.unknown,Kb.nu),$=ee(E,i).fold(zp.unknown,zp.nu),z=G($,D,i,p);return{browser:D,os:$,deviceType:z}}},Vp=i=>window.matchMedia(i).matches;let zi=Ct(()=>Zy.detect(window.navigator.userAgent,se.from(window.navigator.userAgentData),Vp));const rl=()=>zi(),om=(i,m)=>Wt(i,m),Gy=(i,m)=>{const p=om(i,m);if(p==null)throw new Error(i+" not available on this browser");return p},fo=Object.getPrototypeOf,qy=i=>Gy("HTMLElement",i),gh=i=>{const m=Wt("ownerDocument.defaultView",i);return De(i)&&(qy(m).prototype.isPrototypeOf(i)||/^HTML\w*Element$/.test(fo(i).constructor.name))},Js=i=>i.dom.nodeName.toLowerCase(),PS=i=>i.dom.nodeType,Up=i=>m=>PS(m)===i,BS=i=>PS(i)===Fi||Js(i)==="#comment",Jb=i=>Gs(i)&&gh(i.dom),Gs=Up(mc),sm=Up(ud),Ky=Up(tm),Je=Up(sl),Ic=i=>m=>Gs(m)&&Js(m)===i,og=i=>vt.fromDom(i.dom.ownerDocument),Ml=i=>Ky(i)?i:og(i),Km=i=>vt.fromDom(Ml(i).dom.documentElement),jp=i=>vt.fromDom(Ml(i).dom.defaultView),te=i=>se.from(i.dom.parentNode).map(vt.fromDom),fc=i=>se.from(i.dom.parentElement).map(vt.fromDom),md=(i,m)=>{const p=pn(m)?m:jt;let y=i.dom;const E=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const D=y.parentNode,$=vt.fromDom(D);if(E.push($),p($)===!0)break;y=D}return E},Wp=i=>se.from(i.dom.previousSibling).map(vt.fromDom),Ym=i=>se.from(i.dom.nextSibling).map(vt.fromDom),ya=i=>he(i.dom.childNodes,vt.fromDom),gc=(i,m)=>{const p=i.dom.childNodes;return se.from(p[m]).map(vt.fromDom)},Zp=i=>gc(i,0),Gp=(i,m,p,y)=>{const D=og(i).dom.createRange();return D.setStart(i.dom,m),D.setEnd(p.dom,y),D},sg=(i,m,p,y)=>{const E=Gp(i,m,p,y),D=Vo(i,p)&&m===y;return E.collapsed&&!D},hc=i=>Je(i)&&Cn(i.dom.host),qp=i=>vt.fromDom(i.dom.getRootNode()),Vi=i=>hc(i)?i:vt.fromDom(Ml(i).dom.body),rg=i=>{const m=qp(i);return hc(m)?se.some(m):se.none()},Kp=i=>vt.fromDom(i.dom.host),Fc=i=>{if(Cn(i.target)){const m=vt.fromDom(i.target);if(Gs(m)&&Yp(m)&&i.composed&&i.composedPath){const p=i.composedPath();if(p)return xe(p)}}return se.from(i.target)},Yp=i=>Cn(i.dom.shadowRoot),ci=(i,m,p,y,E,D,$)=>({target:i,x:m,y:p,stop:y,prevent:E,kill:D,raw:$}),fd=i=>{const m=vt.fromDom(Fc(i).getOr(i.target)),p=()=>i.stopPropagation(),y=()=>i.preventDefault(),E=In(y,p);return ci(m,i.clientX,i.clientY,p,y,E,i)},Qn=(i,m)=>p=>{i(p)&&m(fd(p))},ec=(i,m,p,y,E)=>{const D=Qn(p,y);return i.dom.addEventListener(m,D,E),{unbind:Ot(e0,i,m,D,E)}},Xm=(i,m,p,y)=>ec(i,m,p,y,!1),e0=(i,m,p,y)=>{i.dom.removeEventListener(m,p,y)},Hn=X,ku=(i,m,p)=>Xm(i,m,Hn,p),fr=fd,li=(i,m)=>{te(i).each(y=>{y.dom.insertBefore(m.dom,i.dom)})},ii=(i,m)=>{Ym(i).fold(()=>{te(i).each(E=>{Eo(E,m)})},y=>{li(y,m)})},Fs=(i,m)=>{Zp(i).fold(()=>{Eo(i,m)},y=>{i.dom.insertBefore(m.dom,y.dom)})},Eo=(i,m)=>{i.dom.appendChild(m.dom)},Yy=(i,m,p)=>{gc(i,p).fold(()=>{Eo(i,m)},y=>{li(y,m)})},Xy=(i,m)=>{li(i,m),Eo(m,i)},gr=(i,m)=>{de(m,(p,y)=>{const E=y===0?i:m[y-1];ii(E,p)})},Pl=(i,m)=>{de(m,p=>{Eo(i,p)})},Bl=(i,m,p)=>{if(nn(p)||$n(p)||un(p))i.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",i),new Error("Attribute value was not simple")},hr=(i,m,p)=>{Bl(i.dom,m,p)},ui=(i,m)=>{const p=i.dom;qn(m,(y,E)=>{Bl(p,E,y)})},tc=(i,m)=>{qn(m,(p,y)=>{p.fold(()=>{Do(i,y)},E=>{Bl(i.dom,y,E)})})},Lc=(i,m)=>{const p=i.dom.getAttribute(m);return p===null?void 0:p},Ca=(i,m)=>se.from(Lc(i,m)),Do=(i,m)=>{i.dom.removeAttribute(m)},al=i=>ye(i.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),nc=i=>{i.dom.textContent="",de(ya(i),m=>{Qr(m)})},Qr=i=>{const m=i.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Ir=i=>{const m=ya(i);m.length>0&&gr(i,m),Qr(i)},Ds=(i,m)=>vt.fromDom(i.dom.cloneNode(m)),$l=i=>Ds(i,!1),Fr=i=>Ds(i,!0),sr=(i,m)=>{const p=vt.fromTag(m),y=al(i);return ui(p,y),p},gd=(i,m)=>{const p=sr(i,m),y=ya(Fr(i));return Pl(p,y),p},Xp=(i,m)=>{const p=sr(i,m);ii(i,p);const y=ya(i);return Pl(p,y),Qr(i),p},hh=(i,m)=>{const y=document.createElement("div");return y.innerHTML=i,ya(vt.fromDom(y))},Lr=i=>he(i,vt.fromDom),Qp=i=>i.dom.innerHTML,t0=i=>{const m=vt.fromTag("div"),p=vt.fromDom(i.dom.cloneNode(!0));return Eo(m,p),Qp(m)},rm=i=>i.style!==void 0&&pn(i.style.getPropertyValue),ln=i=>{const m=sm(i)?i.dom.parentNode:i.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return rg(vt.fromDom(m)).fold(()=>p.body.contains(m),lt(ln,Kp))},Jp=i=>{const m=i.dom.body;if(m==null)throw new Error("Body is not available yet");return vt.fromDom(m)},Rr=(i,m,p)=>{if(!nn(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",i),new Error("CSS value must be a string: "+p);rm(i)&&i.style.setProperty(m,p)},Jr=(i,m)=>{rm(i)&&i.style.removeProperty(m)},ea=(i,m,p)=>{const y=i.dom;Rr(y,m,p)},gs=(i,m)=>{const p=i.dom;qn(m,(y,E)=>{Rr(p,E,y)})},hd=(i,m)=>{const p=i.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!ln(i)?ph(p,m):E},ph=(i,m)=>rm(i)?i.style.getPropertyValue(m):"",cl=(i,m)=>{const p=i.dom,y=ph(p,m);return se.from(y).filter(E=>E.length>0)},di=(i,m)=>{const p=i.dom;Jr(p,m),kn(Ca(i,"style").map(Mc),"")&&Do(i,"style")},ag=(i,m)=>{const p=i.dom,y=m.dom;rm(p)&&rm(y)&&(y.style.cssText=p.style.cssText)},bh=(i,m)=>{const p=(z,K)=>{if(!un(K)&&!K.match(/^[0-9]+$/))throw new Error(i+".set accepts only positive integer values. Value was "+K);const ce=z.dom;rm(ce)&&(ce.style[i]=K+"px")},y=z=>{const K=m(z);if(K<=0||K===null){const ce=hd(z,i);return parseFloat(ce)||0}return K},E=y,D=(z,K)=>ye(K,(ce,Ce)=>{const Ge=hd(z,Ce),kt=Ge===void 0?0:parseInt(Ge,10);return isNaN(kt)?ce:ce+kt},0);return{set:p,get:y,getOuter:E,aggregate:D,max:(z,K,ce)=>{const Ce=D(z,ce);return K>Ce?K-Ce:0}}},cg=(i,m)=>$i(i).getOr(m),Ui=(i,m,p)=>cg(hd(i,m),p),Il=(i,m,p,y)=>{const E=Ui(i,`padding-${p}`,0),D=Ui(i,`padding-${y}`,0),$=Ui(i,`border-${p}-width`,0),z=Ui(i,`border-${y}-width`,0);return m-E-D-$-z},e1=(i,m)=>{const p=i.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return Il(i,y,"left","right")},la=i=>Ui(i,"height",i.dom.offsetHeight),ll=i=>Ui(i,"width",i.dom.offsetWidth),ji=i=>e1(i),bo=bh("height",i=>{const m=i.dom;return ln(i)?m.getBoundingClientRect().height:m.offsetHeight}),Hc=i=>bo.get(i),n0=i=>bo.getOuter(i),lg=la,il=bh("width",i=>{const m=i.dom;return ln(i)?m.getBoundingClientRect().width:m.offsetWidth}),gn=i=>il.get(i),ws=i=>il.getOuter(i),ta=ji,hs=ll,ul=(i,m)=>({left:i,top:m,translate:(y,E)=>ul(i+y,m+E)}),xs=ul,rr=i=>{const m=i.getBoundingClientRect();return xs(m.left,m.top)},Qm=(i,m)=>i!==void 0?i:m!==void 0?m:0,Kn=i=>{const m=i.dom.ownerDocument,p=m.body,y=m.defaultView,E=m.documentElement;if(p===i.dom)return xs(p.offsetLeft,p.offsetTop);const D=Qm(y?.pageYOffset,E.scrollTop),$=Qm(y?.pageXOffset,E.scrollLeft),z=Qm(E.clientTop,p.clientTop),K=Qm(E.clientLeft,p.clientLeft);return Fl(i).translate($-K,D-z)},Fl=i=>{const m=i.dom,y=m.ownerDocument.body;return y===m?xs(y.offsetLeft,y.offsetTop):ln(i)?rr(m):xs(0,0)},Ko=i=>{const m=i!==void 0?i.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return xs(p,y)},pc=(i,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(i,m)},br=((i,m)=>{const p=D=>{if(!i(D))throw new Error("Can only get "+m+" value of a "+m+" node");return y(D).getOr("")},y=D=>i(D)?se.from(D.dom.nodeValue):se.none();return{get:p,getOption:y,set:(D,$)=>{if(!i(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=$}}})(sm,"text"),Wi=i=>br.get(i),Jm=i=>br.getOption(i),Au=(i,m)=>br.set(i,m),pd=(i,m)=>p=>bd(p)==="rtl"?m:i,bd=i=>hd(i,"direction")==="rtl"?"rtl":"ltr",ia=(i,m)=>{const p=Lc(i,m);return p===void 0||p===""?[]:p.split(" ")},_u=(i,m,p)=>{const E=ia(i,m).concat([p]);return hr(i,m,E.join(" ")),!0},Qy=(i,m,p)=>{const y=fn(ia(i,m),E=>E!==p);return y.length>0?hr(i,m,y.join(" ")):Do(i,m),!1};var vd=(i,m,p,y,E)=>i(p,y)?se.some(p):pn(E)&&E(p)?se.none():m(p,y,E);const Po=(i,m,p)=>{let y=i.dom;const E=pn(p)?p:jt;for(;y.parentNode;){y=y.parentNode;const D=vt.fromDom(y);if(m(D))return se.some(D);if(E(D))break}return se.none()},t1=(i,m,p)=>vd((E,D)=>D(E),Po,i,m,p),ef=(i,m)=>{const p=E=>m(vt.fromDom(E));return P(i.dom.childNodes,p).map(vt.fromDom)},xa=(i,m)=>{const p=y=>{for(let E=0;E<y.childNodes.length;E++){const D=vt.fromDom(y.childNodes[E]);if(m(D))return se.some(D);const $=p(y.childNodes[E]);if($.isSome())return $}return se.none()};return p(i.dom)},bc=(i,m,p)=>Po(i,y=>ba(y,m),p),Hs=(i,m)=>ef(i,p=>ba(p,m)),Ou=(i,m)=>ai(m,i),ar=(i,m,p)=>vd((E,D)=>ba(E,D),bc,i,m,p),tf=i=>i.dom.classList!==void 0,vh=i=>ia(i,"class"),n1=(i,m)=>_u(i,"class",m),$S=(i,m)=>Qy(i,"class",m),mi=(i,m)=>{tf(i)?i.dom.classList.add(m):n1(i,m)},Jy=i=>{(tf(i)?i.dom.classList:vh(i)).length===0&&Do(i,"class")},o1=(i,m)=>{tf(i)?i.dom.classList.remove(m):$S(i,m),Jy(i)},fi=(i,m)=>tf(i)&&i.dom.classList.contains(m),o0=(i,m)=>{de(m,p=>{o1(i,p)})},nf=i=>ar(i,"[contenteditable]"),ig=(i,m=!1)=>ln(i)?i.dom.isContentEditable:nf(i).fold(U(m),p=>ug(p)==="true"),ug=i=>i.dom.contentEditable,s1=i=>m=>{mi(m,i)},s0=i=>m=>{o0(m,i)},Ll=(i,m,p)=>fn(md(i,p),m),e2=(i,m)=>fn(ya(i),m),yd=(i,m)=>{let p=[];return de(ya(i),y=>{m(y)&&(p=p.concat([y])),p=p.concat(yd(y,m))}),p},Bo=(i,m,p)=>Ll(i,y=>ba(y,m),p),Sa=(i,m)=>e2(i,p=>ba(p,m)),Zi=(i,m)=>Li(m,i),r1=(i,m,p,y)=>({parent:i,children:m,element:p,index:y}),Cd=i=>te(i).bind(m=>{const p=ya(m);return a1(p,i).map(y=>r1(m,p,i,y))}),a1=(i,m)=>ro(i,Ot(Vo,m)),r0=(i,m,p)=>Po(i,m,p).isSome(),Gi=i=>Js(i)==="img"?1:Jm(i).fold(()=>ya(i).length,m=>m.length),qi=i=>Jm(i).filter(m=>m.trim().length!==0||m.indexOf(Xa)>-1).isSome(),jo=i=>Jb(i)&&Lc(i,"contenteditable")==="false",a0=["img","br"],Rs=i=>qi(i)||Mo(a0,Js(i))||jo(i),of=i=>xa(i,Rs),cr=i=>Ki(i,Rs),Ki=(i,m)=>{const p=y=>{const E=ya(y);for(let D=E.length-1;D>=0;D--){const $=E[D];if(m($))return se.some($);const z=p($);if(z.isSome())return z}return se.none()};return p(i)},Du={create:(i,m,p,y)=>({start:i,soffset:m,finish:p,foffset:y})},yh=qr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),c1=(i,m,p,y)=>i.fold(m,p,y),l1=i=>i.fold(Ye,Ye,Ye),t2=yh.before,vc=yh.on,gi=yh.after,lr={before:t2,on:vc,after:gi,cata:c1,getStart:l1},Hr=qr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Ch=i=>Hr.exact(i.start,i.soffset,i.finish,i.foffset),dg=i=>i.match({domRange:m=>vt.fromDom(m.startContainer),relative:(m,p)=>lr.getStart(m),exact:(m,p,y,E)=>m}),xh=Hr.domRange,c0=Hr.relative,Hl=Hr.exact,IS=i=>{const m=dg(i);return jp(m)},w=Du.create,k={domRange:xh,relative:c0,exact:Hl,exactFromRange:Ch,getWin:IS,range:w},F=(i,m,p)=>se.from(i.caretPositionFromPoint?.(m,p)).bind(y=>{if(y.offsetNode===null)return se.none();const E=i.createRange();return E.setStart(y.offsetNode,y.offset),E.collapse(),se.some(E)}),q=(i,m,p)=>se.from(i.caretRangeFromPoint?.(m,p)),me=(i,m,p)=>i.caretPositionFromPoint?F(i,m,p):i.caretRangeFromPoint?q(i,m,p):se.none(),Ne=(i,m,p)=>{const y=i.document;return me(y,m,p).map(E=>Du.create(vt.fromDom(E.startContainer),E.startOffset,vt.fromDom(E.endContainer),E.endOffset))},gt=(i,m)=>{const p=Js(i);return p==="input"?lr.after(i):Mo(["br","img"],p)?m===0?lr.before(i):lr.after(i):lr.on(i,m)},Zt=(i,m)=>{const p=i.fold(lr.before,gt,lr.after),y=m.fold(lr.before,gt,lr.after);return k.relative(p,y)},Dn=(i,m,p,y)=>{const E=gt(i,m),D=gt(p,y);return k.relative(E,D)},Vn=i=>se.from(i.getSelection()),rs=(i,m)=>{Vn(i).each(p=>{p.removeAllRanges(),p.addRange(m)})},Es=(i,m,p,y,E)=>{const D=$c(i,m,p,y,E);rs(i,D)},ir=(i,m,p,y,E,D)=>{m.collapse(p.dom,y),m.extend(E.dom,D)},zc=(i,m)=>Eu(i,m).match({ltr:(p,y,E,D)=>{Es(i,p,y,E,D)},rtl:(p,y,E,D)=>{Vn(i).each($=>{if($.setBaseAndExtent)$.setBaseAndExtent(p.dom,y,E.dom,D);else if($.extend)try{ir(i,$,p,y,E,D)}catch{Es(i,E,D,p,y)}else Es(i,E,D,p,y)})}}),hi=(i,m,p,y,E)=>{const D=Dn(m,p,y,E);zc(i,D)},Ru=(i,m,p)=>{const y=Zt(m,p);zc(i,y)},zl=i=>{if(i.rangeCount>0){const m=i.getRangeAt(0),p=i.getRangeAt(i.rangeCount-1);return se.some(Du.create(vt.fromDom(m.startContainer),m.startOffset,vt.fromDom(p.endContainer),p.endOffset))}else return se.none()},i1=i=>{if(i.anchorNode===null||i.focusNode===null)return zl(i);{const m=vt.fromDom(i.anchorNode),p=vt.fromDom(i.focusNode);return sg(m,i.anchorOffset,p,i.focusOffset)?se.some(Du.create(m,i.anchorOffset,p,i.focusOffset)):zl(i)}},sf=(i,m,p=!0)=>{const E=(p?pa:oi)(i,m);rs(i,E)},mg=i=>Vn(i).filter(m=>m.rangeCount>0).bind(i1),fg=i=>mg(i).map(m=>k.exact(m.start,m.soffset,m.finish,m.foffset)),gg=(i,m)=>{const p=at(i,m);return tg(p)},rf=(i,m,p)=>Ne(i,m,p),Sh=i=>{Vn(i).each(m=>m.removeAllRanges())},n2={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},o2=(()=>{const i="[0-9]+",p="[eE]"+("[+-]?"+i),y="\\.",E=z=>`(?:${z})?`,$=`[+-]?(?:${["Infinity",i+y+E(i)+E(p),y+i+E(p),i+E(p)].join("|")})`;return new RegExp(`^(${$})(.*)$`)})(),vo=(i,m)=>st(m,p=>st(n2[p],y=>i===y)),zs=(i,m)=>se.from(o2.exec(i)).bind(y=>{const E=Number(y[1]),D=y[2];return vo(D,m)?se.some({value:E,unit:D}):se.none()}),qs=i=>he(i,U(0)),wa=(i,m,p,y,E)=>E(i.slice(0,m)).concat(y).concat(E(i.slice(p))),wh=i=>(m,p,y,E)=>{if(i(y)){const D=Math.max(E,m[p]-Math.abs(y)),$=Math.abs(D-m[p]);return y>=0?$:-$}else return y},hg=wh(i=>i<0),Eh=wh(X),Th=()=>{const i=(z,K,ce,Ce,Ge)=>{const kt=hg(z,K,Ce,Ge);return wa(z,K,ce+1,[kt,0],qs)},m=(z,K,ce,Ce)=>{const Ge=(100+ce)/100,kt=Math.max(Ce,(z[K]+ce)/Ge);return he(z,(wt,Gt)=>(Gt===K?kt:wt/Ge)-wt)},p=(z,K,ce,Ce,Ge,kt)=>kt?m(z,K,Ce,Ge):i(z,K,ce,Ce,Ge);return{resizeTable:(z,K)=>z(K),clampTableDelta:hg,calcLeftEdgeDeltas:p,calcMiddleDeltas:(z,K,ce,Ce,Ge,kt,wt)=>p(z,ce,Ce,Ge,kt,wt),calcRightEdgeDeltas:(z,K,ce,Ce,Ge,kt)=>{if(kt)return m(z,ce,Ce,Ge);{const wt=hg(z,ce,Ce,Ge);return qs(z.slice(0,ce)).concat([wt])}},calcRedestributedWidths:(z,K,ce,Ce)=>{if(Ce){const kt=(K+ce)/K,wt=he(z,Gt=>Gt/kt);return{delta:kt*100-100,newSizes:wt}}else return{delta:ce,newSizes:z}}}},FS=()=>{const i=($,z,K,ce,Ce)=>{const Ge=ce>=0?K:z,kt=Eh($,Ge,ce,Ce);return wa($,z,K+1,[kt,-kt],qs)};return{resizeTable:($,z,K)=>{K&&$(z)},clampTableDelta:($,z,K,ce,Ce)=>{if(Ce){if(K>=0)return K;{const Ge=ye($,(kt,wt)=>kt+wt-ce,0);return Math.max(-Ge,K)}}else return hg($,z,K,ce)},calcLeftEdgeDeltas:i,calcMiddleDeltas:($,z,K,ce,Ce,Ge)=>i($,K,ce,Ce,Ge),calcRightEdgeDeltas:($,z,K,ce,Ce,Ge)=>{if(Ge)return qs($);{const kt=ce/$.length;return he($,U(kt))}},calcRedestributedWidths:($,z,K,ce)=>({delta:0,newSizes:$})}},am=(i,m,p=0)=>Ca(i,m).map(y=>parseInt(y,10)).getOr(p),u1=(i,m)=>am(i,m,1),af=i=>Ic("col")(i)?am(i,"span",1)>1:u1(i,"colspan")>1,Lk=i=>u1(i,"rowspan")>1,Nr=(i,m)=>parseInt(hd(i,m),10),Er=U(10),cf=U(10),cm=(i,m)=>s2(i,m,X),s2=(i,m,p)=>oo(ya(i),y=>ba(y,m)?p(y)?[y]:[]:s2(y,m,p)),Fa=(i,m,p=jt)=>{if(p(m))return se.none();if(Mo(i,Js(m)))return se.some(m);const y=E=>ba(E,"table")||p(E);return bc(m,i.join(","),y)},r2=(i,m)=>Fa(["td","th"],i,m),lf=i=>cm(i,"th,td"),l0=i=>ba(i,"colgroup")?Sa(i,"col"):oo(dl(i),m=>Sa(m,"col")),Vl=(i,m)=>ar(i,"table",m),a2=i=>cm(i,"tr"),dl=i=>Vl(i).fold(U([]),m=>Sa(m,"colgroup")),er=Ic("th"),i0=i=>ao(i,m=>er(m.element)),kh=(i,m)=>i&&m?"sectionCells":i?"section":"cells",LS=i=>{const m=i.section==="thead",p=kn(c2(i.cells),"th");return i.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:kh(m,p)}:{type:"body"}},c2=i=>{const m=fn(i,p=>er(p.element));return m.length===0?se.some("td"):m.length===i.length?se.some("th"):se.none()},HS=i=>{const m=he(i,E=>LS(E).type),p=Mo(m,"header"),y=Mo(m,"footer");if(!p&&!y)return se.some("body");{const E=Mo(m,"body");return p&&!E&&!y?se.some("header"):!p&&!E&&y?se.some("footer"):se.none()}},zS=i=>rt(i.all,m=>{const p=LS(m);return p.type==="header"?se.from(p.subType):se.none()}),u0=(i,m)=>he(i,p=>{if(Js(p)==="colgroup"){const y=he(l0(p),E=>{const D=am(E,"span",1);return dc(E,1,D)});return id(p,y,"colgroup")}else{const y=he(lf(p),E=>{const D=am(E,"rowspan",1),$=am(E,"colspan",1);return dc(E,D,$)});return id(p,y,m(p))}}),Ah=i=>te(i).map(m=>{const p=Js(m);return Al(p)?p:"tbody"}).getOr("tbody"),d0=i=>{const m=a2(i),y=[...dl(i),...m];return u0(y,Ah)},pt=(i,m)=>u0(i,()=>m),Vc="data-snooker-locked-cols",Hk=i=>Ca(i,Vc).bind(m=>se.from(m.match(/\d+/g))).map(m=>Lt(m,X)),yc=i=>{const m=ye(Os(i).rows,(y,E)=>(de(E.cells,(D,$)=>{D.isLocked&&(y[$]=!0)}),y),{}),p=ha(m,(y,E)=>parseInt(E,10));return po(p)},pi=(i,m)=>i+","+m,m0=(i,m,p)=>se.from(i.access[pi(m,p)]),zk=(i,m,p)=>{const y=uf(i,E=>p(m,E.element));return y.length>0?se.some(y[0]):se.none()},uf=(i,m)=>{const p=oo(i.all,y=>y.cells);return fn(p,m)},Vk=i=>{const m={};let p=0;return de(i.cells,y=>{const E=y.colspan;Wo(E,D=>{const $=p+D;m[$]=fh(y.element,E,$)}),p+=E}),m},Uc=i=>{const m={},p=[],E=xe(i).map(wt=>wt.element).bind(Vl).bind(Hk).getOr({});let D=0,$=0,z=0;const{pass:K,fail:ce}=cn(i,wt=>wt.section==="colgroup");de(ce,wt=>{const Gt=[];de(wt.cells,Fe=>{let qe=0;for(;m[pi(z,qe)]!==void 0;)qe++;const dn=$s(E,qe.toString()),Bn=_l(Fe.element,Fe.rowspan,Fe.colspan,z,qe,dn);for(let Bt=0;Bt<Fe.colspan;Bt++)for(let $o=0;$o<Fe.rowspan;$o++){const Io=z+$o,Rn=qe+Bt,vr=pi(Io,Rn);m[vr]=Bn,$=Math.max($,Rn+1)}Gt.push(Bn)}),D++,p.push(id(wt.element,Gt,wt.section)),z++});const{columns:Ce,colgroups:Ge}=We(K).map(wt=>{const Gt=Vk(wt);return{colgroups:[Jd(wt.element,xo(Gt))],columns:Gt}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:zo(D,$),access:m,all:p,columns:Ce,colgroups:Ge}},zn={fromTable:i=>{const m=d0(i);return Uc(m)},generate:Uc,getAt:m0,findItem:zk,filterItems:uf,justCells:i=>oo(i.all,m=>m.cells),justColumns:i=>xo(i.columns),hasColumns:i=>ze(i.columns).length>0,getColumnAt:(i,m)=>se.from(i.columns[m])},lm=(i,m,p)=>Br(p(i.element,m),!0,i.isLocked),_h=(i,m)=>i.section!==m?nl(i.element,i.cells,m,i.isNew):i,Vs=()=>({transformRow:_h,transformCell:(i,m,p)=>{const y=p(i.element,m),E=Js(y)!=="td"?Xp(y,"td"):y;return Br(E,i.isNew,i.isLocked)}}),vi=()=>({transformRow:_h,transformCell:lm}),d1=()=>({transformRow:(i,m)=>_h(i,m==="thead"?"tbody":m),transformCell:lm}),im={getTableSectionType:(i,m)=>{const p=zn.fromTable(i);switch(zS(p).getOr(m)){case"section":return Vs();case"sectionCells":return vi();case"cells":return d1()}},section:Vs,sectionCells:vi,cells:d1,fallback:()=>({transformRow:Ye,transformCell:lm})},Oh=(i,m=X)=>{const p=i.grid,y=Wo(p.columns,Ye),E=Wo(p.rows,Ye);return he(y,D=>i2(()=>oo(E,ce=>zn.getAt(i,ce,D).filter(Ce=>Ce.column===D).toArray()),ce=>ce.colspan===1&&m(ce.element),()=>zn.getAt(i,0,D)))},i2=(i,m,p)=>{const y=i();return P(y,m).orThunk(()=>se.from(y[0]).orThunk(p)).map($=>$.element)},u2=i=>{const m=i.grid,p=Wo(m.rows,Ye),y=Wo(m.columns,Ye);return he(p,E=>i2(()=>oo(y,K=>zn.getAt(i,E,K).filter(ce=>ce.row===E).fold(U([]),ce=>[ce])),K=>K.rowspan===1,()=>zn.getAt(i,E,0)))},yi=(i,m)=>{if(m<0||m>=i.length-1)return se.none();const p=i[m].fold(()=>{const E=dr(i.slice(0,m));return rt(E,(D,$)=>D.map(z=>({value:z,delta:$+1})))},E=>se.some({value:E,delta:0})),y=i[m+1].fold(()=>{const E=i.slice(m+1);return rt(E,(D,$)=>D.map(z=>({value:z,delta:$+1})))},E=>se.some({value:E,delta:1}));return p.bind(E=>y.map(D=>{const $=D.delta+E.delta;return Math.abs(D.value-E.value)/$}))},m1=(i,m)=>({row:i,y:m}),f1=(i,m)=>({col:i,x:m}),Uk=i=>Kn(i).left+ws(i),d2=i=>Kn(i).left,g1=(i,m)=>f1(i,d2(m)),m2=(i,m)=>f1(i,Uk(m)),f0=i=>Kn(i).top,jk=(i,m)=>m1(i,f0(m)),Wk=(i,m)=>m1(i,f0(m)+n0(m)),f2=(i,m,p)=>{if(p.length===0)return[];const y=he(p.slice(1),(D,$)=>D.map(z=>i($,z))),E=p[p.length-1].map(D=>m(p.length-1,D));return y.concat([E])},Zk=i=>-i,h1={delta:Ye,positions:i=>f2(jk,Wk,i),edge:f0},on=pd({delta:Ye,edge:d2,positions:i=>f2(g1,m2,i)},{delta:Zk,edge:Uk,positions:i=>f2(m2,g1,i)}),tr={delta:(i,m)=>on(m).delta(i,m),positions:(i,m)=>on(m).positions(i,m),edge:i=>on(i).edge(i)},Dh=/(\d+(\.\d+)?)%/,US=/(\d+(\.\d+)?)px|em/,pg=Ic("col"),Rh=Ic("tr"),g2=(i,m,p)=>{const y=fc(i).getOrThunk(()=>Jp(og(i)));return m(i)/p(y)*100},bg=(i,m)=>{ea(i,"width",m+"px")},jS=(i,m)=>{ea(i,"width",m+"%")},xd=(i,m)=>{ea(i,"height",m+"px")},WS=i=>{di(i,"height")},h2=i=>lg(i)+"px",Ls=(i,m,p,y)=>{const E=Vl(i).map(D=>{const $=p(D);return Math.floor(m/100*$)}).getOr(m);return y(i,E),E},Ci=(i,m,p,y)=>{const E=parseFloat(i);return cd(i,"%")&&Js(m)!=="table"?Ls(m,E,p,y):E},Cc=i=>{const m=h2(i);return m?Ci(m,i,Hc,xd):Hc(i)},Nh=(i,m,p)=>{const y=p(i),E=u1(i,m);return y/E},xc=(i,m)=>cl(i,m).orThunk(()=>Ca(i,m).map(p=>p+"px")),vg=i=>xc(i,"width"),na=i=>xc(i,"height"),Sc=i=>g2(i,gn,ta),g0=i=>pg(i)?Math.round(gn(i)):hs(i),Ze=i=>Rh(i)?Hc(i):Nh(i,"rowspan",Cc),jc=i=>vg(i).bind(p=>zs(p,["fixed","relative","empty"])),p1=(i,m,p)=>{ea(i,"width",m+p)},Ks=i=>gn(i)+"px",Yi=i=>Hc(i)+"px",gl=i=>g2(i,gn,ta)+"%",Gk=i=>vg(i).exists(m=>Dh.test(m)),Sd=i=>vg(i).exists(m=>US.test(m)),ZS=i=>vg(i).isNone(),Wc=U(Dh),Lo=Ic("col"),Nu=i=>vg(i).getOrThunk(()=>g0(i)+"px"),Mh=i=>na(i).getOrThunk(()=>Ze(i)+"px"),Ys=i=>he(zn.justColumns(i),m=>se.from(m.element)),p2=i=>{const m=rl().browser,p=m.isChromium()||m.isFirefox();return Lo(i)?p:!0},b2=(i,m,p,y,E,D)=>i.filter(y).fold(()=>D(yi(p,m)),$=>E($)),Xi=(i,m,p,y)=>{const E=Oh(i),D=zn.hasColumns(i)?Ys(i):E,$=[se.some(tr.edge(m))].concat(he(tr.positions(E,m),K=>K.map(ce=>ce.x))),z=oe(af);return he(D,(K,ce)=>b2(K,ce,$,z,Ce=>{if(p2(Ce))return p(Ce);{const Ge=ad(E[ce],Ye);return b2(Ge,ce,$,z,kt=>y(se.some(Math.round(gn(kt)))),y)}},y))},h0=i=>i.map(m=>m+"px").getOr(""),Zc=(i,m)=>Xi(i,m,Nu,h0),qk=(i,m,p)=>Xi(i,m,Sc,y=>y.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),we=(i,m,p)=>Xi(i,m,g0,y=>y.getOrThunk(p.minCellWidth)),Ul=(i,m,p,y)=>{const E=u2(i),D=he(i.all,z=>se.some(z.element)),$=[se.some(h1.edge(m))].concat(he(h1.positions(E,m),z=>z.map(K=>K.y)));return he(D,(z,K)=>b2(z,K,$,X,p,y))},b1=(i,m)=>Ul(i,m,Ze,p=>p.getOrThunk(cf)),Us=(i,m)=>Ul(i,m,Mh,h0),wc=(i,m)=>()=>ln(i)?m(i):parseFloat(cl(i,"width").getOr("0")),Vr=i=>{const m=wc(i,gn),p=U(0);return{width:m,pixelWidth:m,getWidths:(E,D)=>we(E,i,D),getCellDelta:p,singleColumnWidth:U([0]),minCellWidth:p,setElementWidth:Xe,adjustTableWidth:Xe,isRelative:!0,label:"none"}},ls=i=>{const m=wc(i,K=>parseFloat(gl(K))),p=wc(i,gn);return{width:m,pixelWidth:p,getWidths:(K,ce)=>qk(K,i,ce),getCellDelta:K=>K/p()*100,singleColumnWidth:(K,ce)=>[100-K],minCellWidth:()=>Er()/p()*100,setElementWidth:jS,adjustTableWidth:K=>{const ce=m(),Ce=K/100*ce,Ge=ce+Ce;jS(i,Ge)},isRelative:!0,label:"percent"}},GS=i=>{const m=wc(i,gn);return{width:m,pixelWidth:m,getWidths:($,z)=>we($,i,z),getCellDelta:Ye,singleColumnWidth:($,z)=>[Math.max(Er(),$+z)-$],minCellWidth:Er,setElementWidth:bg,adjustTableWidth:$=>{const z=m()+$;bg(i,z)},isRelative:!1,label:"pixel"}},df=(i,m)=>Wc().exec(m)!==null?ls(i):GS(i),Ph={getTableSize:i=>vg(i).fold(()=>Vr(i),p=>df(i,p)),pixelSize:GS,percentageSize:ls,noneSize:Vr},v1=(i,m,p,y)=>{p===y?Do(i,m):hr(i,m,p)},v2=(i,m,p)=>{We(Sa(i,m)).fold(()=>Fs(i,p),y=>ii(y,p))},y2=(i,m)=>{const p=Hs(i,m).getOrThunk(()=>{const y=vt.fromTag(m,og(i).dom);return m==="thead"?v2(i,"caption,colgroup",y):m==="colgroup"?v2(i,"caption",y):Eo(i,y),y});return nc(p),p},ff=(i,m)=>{const p=[],y=[],E=wt=>he(wt,Gt=>{Gt.isNew&&p.push(Gt.element);const Fe=Gt.element;return nc(Fe),de(Gt.cells,qe=>{qe.isNew&&y.push(qe.element),v1(qe.element,"colspan",qe.colspan,1),v1(qe.element,"rowspan",qe.rowspan,1),Eo(Fe,qe.element)}),Fe}),D=wt=>oo(wt,Gt=>he(Gt.cells,Fe=>(v1(Fe.element,"span",Fe.colspan,1),Fe.element))),$=(wt,Gt)=>{const Fe=y2(i,Gt),dn=(Gt==="colgroup"?D:E)(wt);Pl(Fe,dn)},z=wt=>{Hs(i,wt).each(Qr)},K=(wt,Gt)=>{wt.length>0?$(wt,Gt):z(Gt)},ce=[],Ce=[],Ge=[],kt=[];return de(m,wt=>{switch(wt.section){case"thead":ce.push(wt);break;case"tbody":Ce.push(wt);break;case"tfoot":Ge.push(wt);break;case"colgroup":kt.push(wt);break}}),K(kt,"colgroup"),K(ce,"thead"),K(Ce,"tbody"),K(Ge,"tfoot"),{newRows:p,newCells:y}},Bh=i=>he(i,m=>{const p=$l(m.element);return de(m.cells,y=>{const E=Fr(y.element);v1(E,"colspan",y.colspan,1),v1(E,"rowspan",y.rowspan,1),Eo(p,E)}),p}),qS=(i,m)=>he(i,p=>hn(p,m)),C2=(i,m)=>i[m],Kk=(i,m)=>{if(i.length===0)return 0;const p=i[0];return ro(i,E=>!m(p.element,E.element)).getOr(i.length)},La=(i,m,p,y)=>{const E=C2(i,m),D=E.section==="colgroup",$=Kk(E.cells.slice(p),y),z=D?1:Kk(qS(i.slice(m),p),y);return{colspan:$,rowspan:z}},hl=(i,m)=>{const p=he(i,E=>he(E.cells,jt)),y=(E,D,$,z)=>{for(let K=E;K<E+$;K++)for(let ce=D;ce<D+z;ce++)p[K][ce]=!0};return he(i,(E,D)=>{const $=oo(E.cells,(z,K)=>{if(p[D][K]===!1){const ce=La(i,D,K,m);return y(D,K,ce.rowspan,ce.colspan),[Qs(z.element,ce.rowspan,ce.colspan,z.isNew)]}else return[]});return Ia(E.element,$,E.section,E.isNew)})},ur=(i,m,p)=>{const y=[];de(i.colgroups,E=>{const D=[];for(let $=0;$<i.grid.columns;$++){const z=zn.getColumnAt(i,$).map(K=>Br(K.element,p,!1)).getOrThunk(()=>Br(m.colGap(),!0,!1));D.push(z)}y.push(nl(E.element,D,"colgroup",p))});for(let E=0;E<i.grid.rows;E++){const D=[];for(let K=0;K<i.grid.columns;K++){const ce=zn.getAt(i,E,K).map(Ce=>Br(Ce.element,p,Ce.isLocked)).getOrThunk(()=>Br(m.gap(),!0,!1));D.push(ce)}const $=i.all[E],z=nl($.element,D,$.section,p);y.push(z)}return y},gf=(i,m)=>ur(i,m,!1),y1=i=>hl(i,Vo),Gc=(i,m)=>rt(i.all,p=>P(p.cells,y=>Vo(m,y.element))),$h=(i,m,p)=>{const y=he(m.selection,D=>r2(D).bind($=>Gc(i,$)).filter(p)),E=Go(y);return Cu(E.length>0,E)},Mr=(i,m,p,y,E,D,$,z,K)=>{const ce=zn.fromTable(D),Ce=se.from(K?.section).getOrThunk(im.fallback);return m(ce,$).map(kt=>{const wt=gf(ce,z),Gt=i(wt,kt,Vo,E(z),Ce),Fe=yc(Gt.grid),qe=y1(Gt.grid);return{info:kt,grid:qe,cursor:Gt.cursor,lockedColumns:Fe}}).bind(kt=>{const wt=ff(D,kt.grid),Gt=se.from(K?.sizing).getOrThunk(()=>Ph.getTableSize(D)),Fe=se.from(K?.resize).getOrThunk(FS);return p(D,kt.grid,kt.info,{sizing:Gt,resize:Fe,section:Ce}),y(D),Do(D,Vc),kt.lockedColumns.length>0&&hr(D,Vc,kt.lockedColumns.join(",")),se.some({cursor:kt.cursor,newRows:wt.newRows,newCells:wt.newCells})})},p0=(i,m)=>r2(m.element).bind(p=>Gc(i,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),jl=(i,m)=>$h(i,m,X).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),Qi=(i,m)=>m.mergable,x2=(i,m)=>m.unmergable,oa=(i,m)=>$h(i,m,X),Ih=(i,m)=>$h(i,m,p=>!p.isLocked),Mu=(i,m)=>Gc(i,m).exists(p=>!p.isLocked),yg=(i,m)=>ao(m,p=>Mu(i,p)),Cg=(i,m)=>Qi(i,m).filter(p=>yg(i,p.cells)),Yk=(i,m)=>x2(i,m).filter(p=>yg(i,p)),um={...qr.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},C1=(i,m)=>i.length===0?um.none():i.length===1?um.only(0):m===0?um.left(0,1):m===i.length-1?um.right(m-1,m):m>0&&m<i.length-1?um.middle(m-1,m,m+1):um.none(),is=(i,m,p,y,E)=>{const D=i.slice(0),$=C1(i,m),z=U(he(D,U(0))),K=kt=>y.singleColumnWidth(D[kt],p),ce=(kt,wt)=>E.calcLeftEdgeDeltas(D,kt,wt,p,y.minCellWidth(),y.isRelative),Ce=(kt,wt,Gt)=>E.calcMiddleDeltas(D,kt,wt,Gt,p,y.minCellWidth(),y.isRelative),Ge=(kt,wt)=>E.calcRightEdgeDeltas(D,kt,wt,p,y.minCellWidth(),y.isRelative);return $.fold(z,K,ce,Ce,Ge)},KS=(i,m,p)=>{let y=0;for(let E=i;E<m;E++)y+=p[E]!==void 0?p[E]:0;return y},dm=(i,m)=>{const p=zn.justCells(i);return he(p,y=>{const E=KS(y.column,y.column+y.colspan,m);return{element:y.element,width:E,colspan:y.colspan}})},Fh=(i,m)=>{const p=zn.justColumns(i);return he(p,(y,E)=>({element:y.element,width:m[E],colspan:y.colspan}))},v0=(i,m)=>he(i.all,(p,y)=>({element:p.element,height:m[y]})),mm=i=>Fn(i,(m,p)=>m+p,0),Ea=(i,m)=>zn.hasColumns(i)?Fh(i,m):dm(i,m),xg=(i,m,p)=>{const y=Ea(i,m);de(y,E=>{p.setElementWidth(E.element,E.width)})},Lh=(i,m,p,y,E)=>{const D=zn.fromTable(i),$=E.getCellDelta(m),z=E.getWidths(D,E),K=p===D.grid.columns-1,ce=y.clampTableDelta(z,p,$,E.minCellWidth(),K),Ce=is(z,p,ce,E,y),Ge=he(Ce,(kt,wt)=>kt+z[wt]);xg(D,Ge,E),y.resizeTable(E.adjustTableWidth,ce,K)},y0=(i,m,p)=>{const y=zn.fromTable(i),E=b1(y,i),D=he(E,(K,ce)=>p===ce?Math.max(m+K,cf()):K),$=v0(y,D);de($,K=>{xd(K.element,K.height)}),de(zn.justCells(y),K=>{WS(K.element)});const z=mm(D);xd(i,z)},C0=(i,m,p,y,E)=>{const D=zn.generate(m),$=y.getWidths(D,y),z=y.pixelWidth(),{newSizes:K,delta:ce}=E.calcRedestributedWidths($,z,p.pixelDelta,y.isRelative);xg(D,K,y),y.adjustTableWidth(ce)},x0=(i,m,p,y)=>{const E=zn.generate(m),D=y.getWidths(E,y);xg(E,D,y)},x1=(i,m)=>{af(i)||jc(i).each(y=>{const E=y.value/2;p1(i,E,y.unit),p1(m,E,y.unit)})},YS=(i,m,p)=>{const y=am(i,m,1);p===1||y<=1?Do(i,m):hr(i,m,Math.min(p,y))},S2=(i,m)=>p=>{const y=p.column+p.colspan-1,E=p.column;return y>=i&&E<m},w2=(i,m,p)=>{if(zn.hasColumns(i)){const y=fn(zn.justColumns(i),S2(m,p)),E=he(y,$=>{const z=Fr($.element);return YS(z,"span",p-m),z}),D=vt.fromTag("colgroup");return Pl(D,E),[D]}else return[]},Hh=(i,m,p)=>he(i.all,y=>{const E=fn(y.cells,S2(m,p)),D=he(E,z=>{const K=Fr(z.element);return YS(K,"colspan",p-m),K}),$=vt.fromTag("tr");return Pl($,D),$}),Pu=(i,m)=>{const p=zn.fromTable(i);return Ih(p,m).map(E=>{const D=E[E.length-1],$=E[0].column,z=D.column+D.colspan,K=w2(p,$,z),ce=Hh(p,$,z);return[...K,...ce]})},xi=(i,m,p)=>{const y=zn.fromTable(i);return oa(y,m).bind(D=>{const $=ur(y,p,!1),K=Os($).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),ce=oo(K,Ge=>{const kt=fn(Ge.cells,wt=>!wt.isLocked);return kt.length>0?[{...Ge,cells:kt}]:[]}),Ce=y1(ce);return Cu(Ce.length>0,Ce)}).map(D=>Bh(D))},fm=(i,m,p,y,E,D)=>({minRow:i,minCol:m,maxRow:p,maxCol:y,allCells:E,selectedCells:D}),XS=(i,m)=>{const p=i.grid.columns;let E=i.grid.rows,D=p,$=0,z=0;const K=[],ce=[];return qn(i.access,Ce=>{if(K.push(Ce),m(Ce)){ce.push(Ce);const Ge=Ce.row,kt=Ge+Ce.rowspan-1,wt=Ce.column,Gt=wt+Ce.colspan-1;Ge<E?E=Ge:kt>$&&($=kt),wt<D?D=wt:Gt>z&&(z=Gt)}}),fm(E,D,$,z,K,ce)},S0=(i,m,p)=>{const y=i[p].element,E=vt.fromTag("td");Eo(E,vt.fromTag("br")),(m?Eo:Fs)(y,E)},E2=(i,m,p,y)=>{const E=fn(i,z=>z.section!=="colgroup"),D=m.grid.columns,$=m.grid.rows;for(let z=0;z<$;z++){let K=!1;for(let ce=0;ce<D;ce++)z<p.minRow||z>p.maxRow||ce<p.minCol||ce>p.maxCol||(zn.getAt(m,z,ce).filter(y).isNone()?S0(E,K,z):K=!0)}},QS=(i,m,p,y)=>{qn(p.columns,$=>{($.column<m.minCol||$.column>m.maxCol)&&Qr($.element)});const E=fn(cm(i,"tr"),$=>$.dom.childElementCount===0);de(E,Qr),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&de(cm(i,"th,td"),$=>{Do($,"rowspan"),Do($,"colspan")}),Do(i,Vc),Do(i,"data-snooker-col-series"),Ph.getTableSize(i).adjustTableWidth(y)},T2=(i,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const E=we(m,i,p),D=ye(E,(ce,Ce)=>ce+Ce,0),K=ye(E.slice(y.minCol,y.maxCol+1),(ce,Ce)=>ce+Ce,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(K)},w0=(i,m)=>{const p=kt=>ba(kt.element,m),y=Fr(i),E=d0(y),D=Ph.getTableSize(i),$=zn.generate(E),z=XS($,p),K="th:not("+m+"),td:not("+m+")",ce=s2(y,"th,td",kt=>ba(kt,K));de(ce,Qr),E2(E,$,z,p);const Ce=zn.fromTable(i),Ge=T2(i,Ce,D,z);return QS(y,z,$,Ge),y},E0=Ic("col"),T0=Ic("colgroup"),Bu=i=>Js(i)==="tr"||T0(i),S1=i=>{const m=am(i,"colspan",1),p=am(i,"rowspan",1);return{element:i,colspan:m,rowspan:p}},zh=(i,m=S1)=>{const p=z=>E0(z.element)?i.col(z):i.cell(z),y=z=>T0(z.element)?i.colgroup(z):i.row(z),E=z=>{if(Bu(z))return y({element:z});{const K=z,ce=p(m(K));return D=se.some({item:K,replacement:ce}),ce}};let D=se.none();return{getOrInit:(z,K)=>D.fold(()=>E(z),ce=>K(z,ce.item)?ce.replacement:E(z))}},Sg=i=>m=>{const p=[],y=($,z)=>P(p,K=>z(K.item,$)),E=$=>{const z=i==="td"?{scope:null}:{},K=m.replace($,i,z);return p.push({item:$,sub:K}),K};return{replaceOrInit:($,z)=>{if(Bu($)||E0($))return $;{const K=$;return y(K,z).fold(()=>E(K),ce=>z($,ce.item)?ce.sub:E(K))}}}},JS=i=>Ca(i,"scope").map(m=>m.substr(0,3)),Ec={modification:zh,transform:Sg,merging:i=>({unmerge:y=>{const E=JS(y);return E.each(D=>hr(y,"scope",D)),()=>{const D=i.cell({element:y,colspan:1,rowspan:1});return di(D,"width"),di(y,"width"),E.each($=>hr(D,"scope",$)),D}},merge:y=>{const E=()=>{const D=Go(he(y,JS));if(D.length===0)return se.none();{const $=D[0],z=["row","col"];return st(D,ce=>ce!==$&&Mo(z,ce))?se.none():se.from($)}};return di(y[0],"width"),E().fold(()=>Do(y[0],"scope"),D=>hr(y[0],"scope",D+"group")),U(y[0])}})},Xk=(i,m)=>{const p=i.slice(0,m[m.length-1].row+1),y=y1(p);return oo(y,E=>{const D=E.cells.slice(0,m[m.length-1].column+1);return he(D,$=>$.element)})},k2=(i,m)=>{const p=i.slice(m[0].row+m[0].rowspan-1,i.length),y=y1(p);return oo(y,E=>{const D=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return he(D,$=>$.element)})},A2=(i,m,p)=>{const y=zn.fromTable(i);return oa(y,m).map(D=>{const $=ur(y,p,!1),{rows:z}=Os($),K=Xk(z,D),ce=k2(z,D);return{upOrLeftCells:K,downOrRightCells:ce}})},tw={only:(i,m)=>{const p=Ky(i)?Km(i):i;return{parent:U(p),view:U(i),dragContainer:U(p),origin:U(xs(0,0)),isResizable:m}},detached:(i,m,p)=>{const y=()=>Kn(m);return{parent:U(m),view:U(i),dragContainer:U(m),origin:y,isResizable:p}},body:(i,m)=>({parent:U(i),view:U(i),dragContainer:U(i),origin:()=>Kn(i),isResizable:m})},w1=qr.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),_2=(i,m,p)=>{const y=p.substring(0,p.length-i.length),E=parseFloat(y);return y===E.toString()?m(E):w1.invalid(p)},lo={...w1,from:i=>cd(i,"%")?_2("%",w1.percent,i):cd(i,"px")?_2("px",w1.pixels,i):w1.invalid(i)},A0=(i,m)=>he(i,p=>lo.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),yo=(i,m,p)=>{const y=p/m;return he(i,E=>lo.from(E).fold(()=>E,$=>$*y+"px",$=>$/100*p+"px"))},pl=(i,m)=>{const p=i.fold(()=>U(""),y=>{const E=y/m;return U(E+"px")},()=>{const y=100/m;return U(y+"%")});return Wo(m,p)},hf=(i,m,p)=>i.fold(()=>m,y=>yo(m,p,y),y=>A0(m,p)),E1=(i,m,p)=>{const y=lo.from(p),E=ao(i,D=>D==="0px")?pl(y,i.length):hf(y,i,m);return Qk(E)},Ro=(i,m)=>i.length===0?m:Fn(i,(p,y)=>lo.from(y).fold(U(0),Ye,Ye)+p,0),ow=(i,m)=>{const p=Math.floor(i);return{value:p+m,remainder:i-p}},sw=(i,m)=>lo.from(i).fold(U(i),p=>p+m+"px",p=>p+m+"%"),Qk=i=>{if(i.length===0)return i;const m=Fn(i,(y,E)=>{const D=lo.from(E).fold(()=>({value:E,remainder:0}),$=>ow($,"px"),$=>({value:$+"%",remainder:0}));return{output:[D.value].concat(y.output),remainder:y.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([sw(p[p.length-1],Math.round(m.remainder))])},Eg=lo.from,T1=(i,m,p)=>{de(m,y=>{const E=i.slice(y.column,y.colspan+y.column),D=Ro(E,Er());ea(y.element,"width",D+p)})},rw=(i,m,p)=>{de(m,(y,E)=>{const D=Ro([i[E]],Er());ea(y.element,"width",D+p)})},Jk=(i,m,p)=>{de(p,y=>{di(y.element,"height")}),de(m,(y,E)=>{ea(y.element,"height",i[E])})},e3=i=>Eg(i).fold(U("px"),U("px"),U("%")),aw=(i,m,p)=>{const y=zn.fromTable(i),E=y.all,D=zn.justCells(y),$=zn.justColumns(y);m.each(z=>{const K=e3(z),ce=gn(i),Ce=Zc(y,i),Ge=E1(Ce,ce,z);zn.hasColumns(y)?rw(Ge,$,K):T1(Ge,D,K),ea(i,"width",z)}),p.each(z=>{const K=Hc(i),ce=Us(y,i),Ce=E1(ce,K,z);Jk(Ce,E,D),ea(i,"height",z)})},cw=Gk,t3=Sd,n3=ZS;var Tg=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],bl=()=>{const i=ce=>vt.fromDom(ce.dom.cloneNode(!1)),m=ce=>Ml(ce).dom,p=ce=>Gs(ce)?Js(ce)==="body"?!0:Mo(Tg,Js(ce)):!1,y=ce=>Gs(ce)?Mo(["br","img","hr","input"],Js(ce)):!1,E=ce=>Gs(ce)&&Lc(ce,"contenteditable")==="false",D=(ce,Ce)=>ce.dom.compareDocumentPosition(Ce.dom),$=(ce,Ce)=>{const Ge=al(ce);ui(Ce,Ge)},z=ce=>{const Ce=Js(ce);return Mo(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Ce)},K=ce=>Gs(ce)?Ca(ce,"lang"):se.none();return{up:U({selector:bc,closest:ar,predicate:Po,all:md}),down:U({selector:Zi,predicate:yd}),styles:U({get:hd,getRaw:cl,set:ea,remove:di}),attrs:U({get:Lc,set:hr,remove:Do,copyTo:$}),insert:U({before:li,after:ii,afterAll:gr,append:Eo,appendAll:Pl,prepend:Fs,wrap:Xy}),remove:U({unwrap:Ir,remove:Qr}),create:U({nu:vt.fromTag,clone:i,text:vt.fromText}),query:U({comparePosition:D,prevSibling:Wp,nextSibling:Ym}),property:U({children:ya,name:Js,parent:te,document:m,isText:sm,isComment:BS,isElement:Gs,isSpecial:z,getLanguage:K,getText:Wi,setText:Au,isBoundary:p,isEmptyTag:y,isNonEditable:E}),eq:Vo,is:B}};const Ur=(i,m)=>({item:i,mode:m}),pf=(i,m,p,y=Ji)=>i.property().parent(m).map(E=>Ur(E,y)),Ji=(i,m,p,y=wd)=>p.sibling(i,m).map(E=>Ur(E,y)),wd=(i,m,p,y=wd)=>{const E=i.property().children(m);return p.first(E).map($=>Ur($,y))},Uh=[{current:pf,next:Ji,fallback:se.none()},{current:Ji,next:wd,fallback:se.some(pf)},{current:wd,next:wd,fallback:se.some(Ji)}],jh=(i,m,p,y,E=Uh)=>P(E,$=>$.current===p).bind($=>$.current(i,m,y,$.next).orThunk(()=>$.fallback.bind(z=>jh(i,m,z,y)))),O0={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?se.some(p[p.length-1]):se.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?se.some(p[0]):se.none()})},O2=(i,m,p,y,E,D)=>jh(i,m,y,E).bind(z=>D(z.item)?se.none():p(z.item)?se.some(z.item):O2(i,z.item,p,z.mode,E,D)),D2=(i,m,p,y)=>O2(i,m,p,Ji,O0.left(),y),k1=(i,m,p,y)=>O2(i,m,p,Ji,O0.right(),y),gm=(i,m)=>({element:i,offset:m}),D0=(i,m,p)=>i.property().isText(m)&&i.property().getText(m).trim().length===0||i.property().isComment(m)?p(m).bind(y=>D0(i,y,p).orThunk(()=>se.some(y))):se.none(),A1=(i,m)=>i.property().isText(m)?i.property().getText(m).length:i.property().children(m).length,R0=(i,m)=>{const p=D0(i,m,i.query().prevSibling).getOr(m);if(i.property().isText(p))return gm(p,A1(i,p));const y=i.property().children(p);return y.length>0?R0(i,y[y.length-1]):gm(p,A1(i,p))},lw=R0,Ed=bl(),N0=i=>lw(Ed,i),iw=i=>m=>i.property().children(m).length===0,s3=(i,m,p)=>uw(i,m,iw(i),p),r3=(i,m,p)=>R2(i,m,iw(i),p),uw=D2,R2=k1,Td=bl(),dw=(i,m)=>s3(Td,i,m),eu=(i,m)=>r3(Td,i,m),oc=(i,m,p)=>uw(Td,i,m,p),Si=(i,m,p)=>R2(Td,i,m,p),Tc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],M0=(i,m)=>{const p=i.property().name(m);return Mo(["ol","ul"],p)},kg=(i,m)=>{const p=i.property().name(m);return Mo(Tc,p)},P0=(i,m)=>Mo(["br","img","hr","input"],i.property().name(m)),N2=(i,m,p,y)=>{const E=p[0],D=p.slice(1);return y(i,m,E,D)},a3=(i,m,p)=>p.length>0?N2(i,m,p,bf):se.none(),bf=(i,m,p,y)=>{const E=m(i,p);return Fn(y,(D,$)=>{const z=m(i,$);return vf(i,D,z)},E)},vf=(i,m,p)=>m.bind(y=>p.filter(Ot(i.eq,y))),M2=(i,m)=>Ot(i.eq,m),jr=(i,m,p,y=jt)=>{const E=[m].concat(i.up().all(m)),D=[p].concat(i.up().all(p)),$=Ce=>ro(Ce,y).fold(()=>Ce,kt=>Ce.slice(0,kt+1)),z=$(E),K=$(D),ce=P(z,Ce=>st(K,M2(i,Ce)));return{firstpath:z,secondpath:K,shared:ce}},_1=a3,qc=jr,B0=bl(),es=(i,m)=>_1(B0,(p,y)=>i(y),m),$u=(i,m,p)=>qc(B0,i,m,p),hm=bl(),Iu=i=>kg(hm,i),Wl=i=>M0(hm,i),$0=i=>P0(hm,i),mw=i=>{const m=Ic("br"),p=K=>ao(K,ce=>m(ce)||sm(ce)&&Wi(ce).trim().length===0),y=K=>Js(K)==="li"||Po(K,Wl).isSome(),E=K=>Ym(K).map(ce=>Iu(ce)?!0:$0(ce)?Js(ce)!=="img":!1).getOr(!1),D=K=>cr(K).bind(ce=>{const Ce=E(ce);return te(ce).map(Ge=>Ce===!0||y(Ge)||m(ce)||Iu(Ge)&&!Vo(K,Ge)?[]:[vt.fromTag("br")])}).getOr([]),z=(()=>{const K=oo(i,ce=>{const Ce=ya(ce);return p(Ce)?[]:Ce.concat(D(ce))});return K.length===0?[vt.fromTag("br")]:K})();nc(i[0]),Pl(i[0],z)},pm=i=>{Do(i,"width"),Do(i,"height")},Ag=i=>{const m=gl(i);aw(i,se.some(m),se.none()),pm(i)},P2=i=>{const m=Ks(i);aw(i,se.some(m),se.none()),pm(i)},vl=i=>{const m=Yi(i);aw(i,se.none(),se.some(m)),pm(i)},yf=i=>{di(i,"width");const m=l0(i),p=m.length>0?m:lf(i);de(p,y=>{di(y,"width"),pm(y)}),pm(i)},Ta={scope:["row","col"]},tu=i=>()=>{const m=vt.fromTag("td",i.dom);return Eo(m,vt.fromTag("br",i.dom)),m},I0=i=>()=>vt.fromTag("col",i.dom),_g=i=>()=>vt.fromTag("colgroup",i.dom),Cf=i=>()=>vt.fromTag("tr",i.dom),O1=(i,m,p)=>{const y=gd(i,m);return qn(p,(E,D)=>{E===null?Do(y,D):hr(y,D,E)}),y},B2=i=>i,F0=(i,m,p)=>of(i).map(E=>{const D=p.join(","),$=Bo(E,D,z=>Vo(z,i));return Fn($,(z,K)=>{const ce=$l(K);return Eo(z,ce),ce},m)}).getOr(m),Og=(i,m)=>{qn(Ta,(p,y)=>Ca(i,y).filter(E=>Mo(p,E)).each(E=>hr(m,y,E)))},xf=(i,m,p)=>{const y=($,z)=>{ag($.element,z),di(z,"height"),$.colspan!==1&&di(z,"width")},E=$=>{const z=vt.fromTag(Js($.element),m.dom),K=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ce=K.length>0?F0($.element,z,K):z;return Eo(ce,vt.fromTag("br")),y($,z),Og($.element,z),i($.element,z),z};return{col:$=>{const z=vt.fromTag(Js($.element),m.dom);return y($,z),i($.element,z),z},colgroup:_g(m),row:Cf(m),cell:E,replace:O1,colGap:I0(m),gap:tu(m)}},$2=i=>({col:I0(i),colgroup:_g(i),row:Cf(i),cell:tu(i),replace:B2,colGap:I0(i),gap:tu(i)}),D1=i=>zn.fromTable(i).grid,I2=(i,m,p,y)=>{const E=Os(i).rows;if(E.length===0)return i;for(let D=m.startRow;D<=m.finishRow;D++)for(let $=m.startCol;$<=m.finishCol;$++){const z=E[D],K=hn(z,$).isLocked;ti(z,$,Br(y(),!1,K))}return i},fw=(i,m,p,y)=>{const E=Os(i).rows;let D=!0;for(let $=0;$<E.length;$++)for(let z=0;z<Yr(E[0]);z++){const K=E[$],ce=hn(K,z),Ce=ce.element,Ge=p(Ce,m);Ge&&!D?ti(K,z,Br(y(),!0,ce.isLocked)):Ge&&(D=!1)}return i},Wr=(i,m)=>ye(i,(p,y)=>st(p,E=>m(E.element,y.element))?p:p.concat([y]),[]),Sf=(i,m,p,y)=>(m>0&&m<i[0].cells.length&&de(i,E=>{const D=E.cells[m-1];let $=0;const z=y();for(;E.cells.length>m+$&&p(D.element,E.cells[m+$].element);)ti(E,m+$,Br(z,!0,E.cells[m+$].isLocked)),$++}),i),wf=(i,m,p,y)=>{const E=Os(i).rows;if(m>0&&m<E.length){const D=E[m-1].cells,$=Wr(D,p);de($,z=>{let K=se.none();for(let ce=m;ce<E.length;ce++)for(let Ce=0;Ce<Yr(E[0]);Ce++){const Ge=E[ce],kt=hn(Ge,Ce);p(kt.element,z.element)&&(K.isNone()&&(K=se.some(y())),K.each(Gt=>{ti(Ge,Ce,Br(Gt,!0,kt.isLocked))}))}})}return i},gw=(i,m,p)=>{if(i.row>=m.length||i.column>Yr(m[0]))return uc.error("invalid start address out of table bounds, row: "+i.row+", column: "+i.column);const y=m.slice(i.row),E=y[0].cells.slice(i.column),D=Yr(p[0]),$=p.length;return uc.value({rowDelta:y.length-$,colDelta:E.length-D})},L0=(i,m)=>{const p=Yr(i[0]),y=Yr(m[0]);return{rowDelta:0,colDelta:p-y}},F2=(i,m)=>{const p=i.length,y=m.length;return{rowDelta:p-y,colDelta:0}},R1=(i,m,p,y)=>{const E=m.section==="colgroup"?p.col:p.cell;return Wo(i,D=>Br(E(),!0,y(D)))},H0=(i,m,p,y)=>{const E=i[i.length-1];return i.concat(Wo(m,()=>{const D=E.section==="colgroup"?p.colgroup:p.row,$=em(E,D,Ye),z=R1($.cells.length,$,p,K=>ms(y,K.toString()));return Zm($,z)}))},hw=(i,m,p,y)=>he(i,E=>{const D=R1(m,E,p,jt);return Pc(E,y,D)}),c3=(i,m,p)=>he(i,y=>ye(p,(E,D)=>{const $=R1(1,y,m,X)[0];return Ol(E,D,$)},y)),N1=(i,m,p)=>{const y=m.colDelta<0?hw:Ye,E=m.rowDelta<0?H0:Ye,D=yc(i),$=Yr(i[0]),z=st(D,Ce=>Ce===$-1),K=y(i,Math.abs(m.colDelta),p,z?$-1:$),ce=yc(K);return E(K,Math.abs(m.rowDelta),p,Lt(ce,X))},Pr=(i,m,p,y)=>{const E=hn(i[m],p),D=Ot(y,E.element),$=i[m];return i.length>1&&Yr($)>1&&(p>0&&D(Kr($,p-1))||p<$.cells.length-1&&D(Kr($,p+1))||m>0&&D(Kr(i[m-1],p))||m<i.length-1&&D(Kr(i[m+1],p)))},Tr=(i,m,p,y,E,D)=>{const $=i.row,z=i.column,K=p.length,ce=Yr(p[0]),Ce=$+K,Ge=z+ce+D.length,kt=Lt(D,X);for(let wt=$;wt<Ce;wt++){let Gt=0;for(let Fe=z;Fe<Ge;Fe++){if(kt[Fe]){Gt++;continue}Pr(m,wt,Fe,E)&&fw(m,Kr(m[wt],Fe),E,y.cell);const qe=Fe-z-Gt,dn=hn(p[wt-$],qe),Bn=dn.element,Bt=y.replace(Bn);ti(m[wt],Fe,Br(Bt,!0,dn.isLocked))}}return m},ka=(i,m,p)=>{const y=Yr(m[0]),E=Os(m).cols.length+i.row,D=Wo(y-i.column,z=>z+i.column),$=P(D,z=>ao(p,K=>K!==z)).getOr(y-1);return{row:E,column:$}},da=(i,m,p)=>fn(p,y=>y>=i.column&&y<=Yr(m[0])+i.column),Ns=(i,m,p,y,E)=>{const D=yc(m),$=ka(i,m,D),z=Os(p).rows,K=da($,z,D);return gw($,m,z).map(Ce=>{const Ge={...Ce,colDelta:Ce.colDelta-K.length},kt=N1(m,Ge,y),wt=yc(kt),Gt=da($,z,wt);return Tr($,kt,z,y,E,Gt)})},kr=(i,m,p,y,E)=>{Sf(m,i,E,y.cell);const D=F2(p,m),$=N1(p,D,y),z=F2(m,$),K=N1(m,z,y);return he(K,(ce,Ce)=>Pc(ce,i,$[Ce].cells))},Wh=(i,m,p,y,E)=>{wf(m,i,E,y.cell);const D=yc(m),$=L0(m,p),z={...$,colDelta:$.colDelta-D.length},K=N1(m,z,y),{cols:ce,rows:Ce}=Os(K),Ge=yc(K),kt=L0(p,m),wt={...kt,colDelta:kt.colDelta+Ge.length},Gt=c3(p,y,Ge),Fe=N1(Gt,wt,y);return[...ce,...Ce.slice(0,i),...Fe,...Ce.slice(i,Ce.length)]},L2=(i,m,p,y)=>em(i,E=>y(E,p),m),H2=(i,m,p,y,E)=>{const{rows:D,cols:$}=Os(i),z=D.slice(0,m),K=D.slice(m),ce=L2(D[p],(Ce,Ge)=>m>0&&m<D.length&&y(Kr(D[m-1],Ge),Kr(D[m],Ge))?hn(D[m],Ge):Br(E(Ce.element,y),!0,Ce.isLocked),y,E);return[...$,...z,ce,...K]},pw=(i,m,p,y,E,D,$)=>{if(p==="colgroup"||!y){const z=hn(i,E);return Br($(z.element,D),!0,!1)}else return hn(i,m)},z0=(i,m,p,y,E)=>he(i,D=>{const $=m>0&&m<Yr(D)&&y(Kr(D,m-1),Kr(D,m)),z=pw(D,m,D.section,$,p,y,E);return Ol(D,m,z)}),z2=(i,m)=>oo(i,p=>{const y=p.cells,E=Fn(m,(D,$)=>$>=0&&$<D.length?D.slice(0,$).concat(D.slice($+1)):D,y);return E.length>0?[nl(p.element,E,p.section,p.isNew)]:[]}),V2=(i,m,p)=>{const{rows:y,cols:E}=Os(i);return[...E,...y.slice(0,m),...y.slice(p+1)]},V0=(i,m,p,y)=>Kr(i[m],p)!==void 0&&m>0&&y(Kr(i[m-1],p),Kr(i[m],p)),U2=(i,m,p)=>m>0&&p(Kr(i,m-1),Kr(i,m)),Zh=(i,m,p,y)=>V0(i,m,p,y)||U2(i[m],p,y),bw=(i,m)=>ao(m,Ye)&&i0(i.cells)?X:(y,E,D)=>!(Js(y.element)==="th"&&m[D]),M1=(i,m)=>ao(m,Ye)&&i0(i)?X:(y,E,D)=>!(Js(y.element)==="th"&&m[E]),Fu=(i,m,p,y)=>{const E=$=>$==="row"?Lk(m):af(m),D=$=>E($)?`${$}group`:$;return i?er(m)?D(p):null:y&&er(m)?D(p==="row"?"col":"row"):null},U0=(i,m)=>(p,y,E)=>se.some(Fu(i,p.element,"col",m[E])),P1=(i,m)=>(p,y)=>se.some(Fu(i,p.element,"row",m[y])),Gh=(i,m,p)=>Br(p(i.element,m),!0,i.isLocked),Dg=(i,m,p,y,E,D,$)=>{const z=K=>st(m,ce=>p(K.element,ce.element));return he(i,(K,ce)=>_s(K,(Ce,Ge)=>{if(z(Ce)){const kt=$(Ce,ce,Ge)?E(Ce,p,y):Ce;return D(kt,ce,Ge).each(wt=>{tc(kt.element,{scope:se.from(wt)})}),kt}else return Ce}))},B1=(i,m,p)=>oo(i,(y,E)=>Zh(i,E,m,p)?[]:[hn(y,m)]),j0=(i,m,p)=>{const y=i[m];return oo(y.cells,(E,D)=>Zh(i,m,D,p)?[]:[E])},$1=(i,m,p,y,E)=>{const D=Os(i).rows,$=oo(m,Ce=>B1(D,Ce,y)),z=he(D,Ce=>i0(Ce.cells)),K=M1($,z),ce=P1(p,z);return Dg(i,$,y,E,Gh,ce,K)},W0=(i,m,p,y,E,D,$)=>{const{cols:z,rows:K}=Os(i),ce=K[m[0]],Ce=oo(m,qe=>j0(K,qe,E)),Ge=he(ce.cells,(qe,dn)=>i0(B1(K,dn,E))),kt=[...K];de(m,qe=>{kt[qe]=$.transformRow(K[qe],p)});const wt=[...z,...kt],Gt=bw(ce,Ge),Fe=U0(y,Ge);return Dg(wt,Ce,E,D,$.transformCell,Fe,Gt)},Rg=(i,m,p,y)=>{const E=Os(i).rows,D=he(m,$=>hn(E[$.row],$.column));return Dg(i,D,p,y,Gh,se.none,X)},kc=i=>ye(i,(p,y)=>st(p,D=>D.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Ha=i=>ig(i,!0),qh=i=>{lf(i).length===0&&Qr(i)},Re=(i,m)=>({grid:i,cursor:m}),I1=i=>rt(i,m=>rt(m.cells,p=>{const y=p.element;return Cu(Ha(y),y)})),l3=(i,m,p)=>{const y=Os(i).rows;return se.from(y[m]?.cells[p]?.element).filter(Ha).orThunk(()=>I1(y))},Ac=(i,m,p)=>{const y=l3(i,m,p);return Re(i,y)},Kh=i=>ye(i,(p,y)=>st(p,D=>D.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),Lu=(i,m,p,y)=>{const E=m[0].row,D=Kh(m),$=Fn(D,(z,K)=>({grid:H2(z.grid,E,K.row+z.delta,p,y.getOrInit),delta:z.delta+1}),{grid:i,delta:0}).grid;return Ac($,E,m[0].column)},j2=(i,m,p,y)=>{const E=Kh(m),D=E[E.length-1],$=D.row+D.rowspan,z=Fn(E,(K,ce)=>H2(K,$,ce.row,p,y.getOrInit),i);return Ac(z,$,m[0].column)},W2=(i,m,p,y)=>{const E=m.details,D=kc(E),$=D[0].column,z=Fn(D,(K,ce)=>({grid:z0(K.grid,$,ce.column+K.delta,p,y.getOrInit),delta:K.delta+1}),{grid:i,delta:0}).grid;return Ac(z,E[0].row,$)},Ng=(i,m,p,y)=>{const E=m.details,D=E[E.length-1],$=D.column+D.colspan,z=kc(E),K=Fn(z,(ce,Ce)=>z0(ce,$,Ce.column,p,y.getOrInit),i);return Ac(K,E[0].row,$)},F1=(i,m,p,y)=>{const E=kc(m),D=he(E,z=>z.column),$=$1(i,D,!0,p,y.replaceOrInit);return Ac($,m[0].row,m[0].column)},bm=(i,m,p,y)=>{const E=Rg(i,m,p,y.replaceOrInit);return Ac(E,m[0].row,m[0].column)},Z0=(i,m,p,y)=>{const E=kc(m),D=he(E,z=>z.column),$=$1(i,D,!1,p,y.replaceOrInit);return Ac($,m[0].row,m[0].column)},i3=(i,m,p,y)=>{const E=Rg(i,m,p,y.replaceOrInit);return Ac(E,m[0].row,m[0].column)},za=(i,m)=>(p,y,E,D,$)=>{const z=Kh(y),K=he(z,Ce=>Ce.row),ce=W0(p,K,i,m,E,D.replaceOrInit,$);return Ac(ce,y[0].row,y[0].column)},Hu=za("thead",!0),yl=za("tbody",!1),u3=za("tfoot",!1),Yh=(i,m,p,y)=>{const E=kc(m.details),D=z2(i,he(E,z=>z.column)),$=D.length>0?D[0].cells.length-1:0;return Ac(D,E[0].row,Math.min(E[0].column,$))},vw=(i,m,p,y)=>{const E=Kh(m),D=V2(i,E[0].row,E[E.length-1].row),$=Math.max(Os(D).rows.length-1,0);return Ac(D,Math.min(m[0].row,$),m[0].column)},G0=(i,m,p,y)=>{const E=m.cells;mw(E);const D=I2(i,m.bounds,p,y.merge(E));return Re(D,se.from(E[0]))},d3=(i,m,p,y)=>{const D=Fn(m,($,z)=>fw($,z,p,y.unmerge(z)),i);return Re(D,se.from(m[0]))},yw=(i,m,p,y)=>{const D=((K,ce)=>{const Ce=zn.fromTable(K);return ur(Ce,ce,!0)})(m.clipboard,m.generators),$=ld(m.row,m.column);return Ns($,i,D,m.generators,p).fold(()=>Re(i,se.some(m.element)),K=>Ac(K,m.row,m.column))},Wn=(i,m,p)=>{const y=pt(i,p.section),E=zn.generate(y);return ur(E,m,!0)},tn=(i,m,p,y)=>{const E=Os(i).rows,D=m.cells[0].column,$=E[m.cells[0].row],z=Wn(m.clipboard,m.generators,$),K=kr(D,i,z,m.generators,p);return Ac(K,m.cells[0].row,m.cells[0].column)},Xh=(i,m,p,y)=>{const E=Os(i).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,$=E[m.cells[0].row],z=Wn(m.clipboard,m.generators,$),K=kr(D,i,z,m.generators,p);return Ac(K,m.cells[0].row,D)},q0=(i,m,p,y)=>{const E=Os(i).rows,D=m.cells[0].row,$=E[D],z=Wn(m.clipboard,m.generators,$),K=Wh(D,i,z,m.generators,p);return Ac(K,m.cells[0].row,m.cells[0].column)},K0=(i,m,p,y)=>{const E=Os(i).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,$=E[m.cells[0].row],z=Wn(m.clipboard,m.generators,$),K=Wh(D,i,z,m.generators,p);return Ac(K,D,m.cells[0].column)},m3=(i,m)=>{const p=zn.fromTable(i);return oa(p,m).bind(E=>{const D=E[E.length-1],$=E[0].column,z=D.column+D.colspan,K=Ln(he(p.all,ce=>fn(ce.cells,Ce=>Ce.column>=$&&Ce.column<z)));return c2(K)}).getOr("")},Z2=(i,m)=>{const p=zn.fromTable(i);return oa(p,m).bind(c2).getOr("")},ks=(i,m)=>{const p=zn.fromTable(i);return oa(p,m).bind(E=>{const D=E[E.length-1],$=E[0].row,z=D.row+D.rowspan,K=p.all.slice($,z);return HS(K)}).getOr("")},Y0=(i,m,p,y)=>x0(i,m,p,y.sizing),X0=(i,m,p,y)=>C0(i,m,p,y.sizing,y.resize),G2=(i,m)=>st(m,p=>p.column===0&&p.isLocked),Ie=(i,m)=>st(m,p=>p.column+p.colspan>=i.grid.columns&&p.isLocked),Qh=(i,m)=>{const p=Oh(i),y=kc(m);return ye(y,(E,D)=>{const z=p[D.column].map(ws).getOr(0);return E+z},0)},Mg=i=>(m,p)=>oa(m,p).filter(y=>!(i?G2:Ie)(m,y)).map(y=>({details:y,pixelDelta:Qh(m,y)})),kd=(i,m)=>Ih(i,m).map(p=>({details:p,pixelDelta:-Qh(i,p)})),nu=i=>(m,p)=>jl(m,p).filter(y=>!(i?G2:Ie)(m,y.cells)),Ad=Ec.transform("th"),Jh=Ec.transform("td"),Pg=(i,m,p,y)=>Mr(Lu,oa,Xe,Xe,Ec.modification,i,m,p,y),f3=(i,m,p,y)=>Mr(j2,oa,Xe,Xe,Ec.modification,i,m,p,y),ep=(i,m,p,y)=>Mr(W2,Mg(!0),X0,Xe,Ec.modification,i,m,p,y),ps=(i,m,p,y)=>Mr(Ng,Mg(!1),X0,Xe,Ec.modification,i,m,p,y),ou=(i,m,p,y)=>Mr(Yh,kd,X0,qh,Ec.modification,i,m,p,y),q2=(i,m,p,y)=>Mr(vw,oa,Xe,qh,Ec.modification,i,m,p,y),Ef=(i,m,p,y)=>Mr(F1,Ih,Xe,Xe,Ad,i,m,p,y),zu=(i,m,p,y)=>Mr(Z0,Ih,Xe,Xe,Jh,i,m,p,y),Va=(i,m,p,y)=>Mr(Hu,oa,Xe,Xe,Ad,i,m,p,y),Cw=(i,m,p,y)=>Mr(yl,oa,Xe,Xe,Jh,i,m,p,y),K2=(i,m,p,y)=>Mr(u3,oa,Xe,Xe,Jh,i,m,p,y),xw=(i,m,p,y)=>Mr(bm,Ih,Xe,Xe,Ad,i,m,p,y),g3=(i,m,p,y)=>Mr(i3,Ih,Xe,Xe,Jh,i,m,p,y),h3=(i,m,p,y)=>Mr(G0,Cg,Y0,Xe,Ec.merging,i,m,p,y),Y2=(i,m,p,y)=>Mr(d3,Yk,Y0,Xe,Ec.merging,i,m,p,y),Sw=(i,m,p,y)=>Mr(yw,p0,Y0,Xe,Ec.modification,i,m,p,y),nt=(i,m,p,y)=>Mr(tn,nu(!0),Xe,Xe,Ec.modification,i,m,p,y),X2=(i,m,p,y)=>Mr(Xh,nu(!1),Xe,Xe,Ec.modification,i,m,p,y),ma=(i,m,p,y)=>Mr(q0,jl,Xe,Xe,Ec.modification,i,m,p,y),Q2=(i,m,p,y)=>Mr(K0,jl,Xe,Xe,Ec.modification,i,m,p,y),J2=m3,eC=Z2,p3=ks,xn=(i,m)=>{const p=m.column,y=m.column+m.colspan-1,E=m.row,D=m.row+m.rowspan-1;return p<=i.finishCol&&y>=i.startCol&&E<=i.finishRow&&D>=i.startRow},ww=(i,m)=>m.column>=i.startCol&&m.column+m.colspan-1<=i.finishCol&&m.row>=i.startRow&&m.row+m.rowspan-1<=i.finishRow,Ew=(i,m)=>{let p=!0;const y=Ot(ww,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&zn.getAt(i,E,D).exists(y);return p?se.some(m):se.none()},b3=(i,m)=>$r(Math.min(i.row,m.row),Math.min(i.column,m.column),Math.max(i.row+i.rowspan-1,m.row+m.rowspan-1),Math.max(i.column+i.colspan-1,m.column+m.colspan-1)),v3=(i,m,p)=>{const y=zn.findItem(i,m,Vo),E=zn.findItem(i,p,Vo);return y.bind(D=>E.map($=>b3(D,$)))},Tw=(i,m,p)=>v3(i,m,p).bind(y=>Ew(i,y)),v7=(i,m,p,y)=>zn.findItem(i,m,Vo).bind(E=>{const D=p>0?E.row+E.rowspan-1:E.row,$=y>0?E.column+E.colspan-1:E.column;return zn.getAt(i,D+p,$+y).map(K=>K.element)}),s5=(i,m,p)=>v3(i,m,p).map(y=>{const E=zn.filterItems(i,Ot(xn,y));return he(E,D=>D.element)}),kw=(i,m)=>{const p=(y,E)=>dd(E,y);return zn.findItem(i,m,p).map(y=>y.element)},y3=(i,m,p)=>Vl(i).bind(y=>{const E=wi(y);return v7(E,i,m,p)}),En=(i,m,p)=>{const y=wi(i);return s5(y,m,p)},tC=(i,m,p,y,E)=>{const D=wi(i),$=Vo(i,p)?se.some(m):kw(D,m),z=Vo(i,E)?se.some(y):kw(D,y);return $.bind(K=>z.bind(ce=>s5(D,K,ce)))},vm=(i,m,p)=>{const y=wi(i);return Tw(y,m,p)},wi=zn.fromTable,Q0={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},_c=()=>vt.fromTag("th"),tp=()=>vt.fromTag("td"),L1=()=>vt.fromTag("col"),J0=(i,m,p,y)=>{const E=vt.fromTag("tr");for(let D=0;D<i;D++){const $=y<m||D<p?_c():tp();D<p&&hr($,"scope","row"),y<m&&hr($,"scope","col"),Eo($,vt.fromTag("br")),Eo(E,$)}return E},np=i=>{const m=vt.fromTag("colgroup");return Wo(i,()=>Eo(m,L1())),m},op=(i,m,p,y)=>Wo(i,E=>J0(m,p,y,E)),_d=(i,m,p,y,E,D=Q0)=>{const $=vt.fromTag("table"),z=E!=="cells";gs($,D.styles),ui($,D.attributes),D.colGroups&&Eo($,np(m));const K=Math.min(i,p);if(z&&p>0){const wt=vt.fromTag("thead");Eo($,wt);const Fe=op(p,m,E==="sectionCells"?K:0,y);Pl(wt,Fe)}const ce=vt.fromTag("tbody");Eo($,ce);const Ce=z?i-K:i,kt=op(Ce,m,z?0:p,y);return Pl(ce,kt),$},Ar=i=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=fn(m,$=>$!==D)},trigger:(...D)=>{const $={};de(i,(z,K)=>{$[z]=D[K]}),de(m,z=>{z($)})}}},ym=i=>{const m=Fo(i,y=>({bind:y.bind,unbind:y.unbind})),p=Fo(i,y=>y.trigger);return{registry:m,trigger:p}},Aw=Pt(["compare","extract","mutate","sink"]),nC=Pt(["element","start","stop","destroy"]),_w=Pt(["forceDrop","drop","move","delayDrop"]),C3=()=>{let i=se.none();const m=()=>{i=se.none()},p=(D,$)=>{const z=i.map(K=>D.compare(K,$));return i=se.some($),z},y=(D,$)=>{$.extract(D).each(K=>{p($,K).each(Ce=>{E.trigger.move(Ce)})})},E=ym({move:Ar(["info"])});return{onEvent:y,reset:m,events:E.registry}},io=()=>{const i=ym({move:Ar(["info"])});return{onEvent:Xe,reset:Xe,events:i.registry}},su=()=>{const i=io(),m=C3();let p=i;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=i},isOn:()=>p===m,onEvent:(z,K)=>{p.onEvent(z,K)},events:m.events}},Tf=(i,m,p)=>{let y=!1;const E=ym({start:Ar([]),stop:Ar([])}),D=su(),$=()=>{Gt.stop(),D.isOn()&&(D.off(),E.trigger.stop())},z=xu($,200),K=qe=>{Gt.start(qe),D.on(),E.trigger.start()},ce=qe=>{z.cancel(),D.onEvent(qe,m)};D.events.move.bind(qe=>{m.mutate(i,qe.info)});const Ce=()=>{y=!0},Ge=()=>{y=!1},kt=()=>y,wt=qe=>(...dn)=>{y&&qe.apply(null,dn)},Gt=m.sink(_w({forceDrop:$,drop:wt($),move:wt(ce),delayDrop:wt(z.throttle)}),p),Fe=()=>{Gt.destroy()};return{element:Gt.element,go:K,on:Ce,off:Ge,isActive:kt,destroy:Fe,events:E.registry}},sp=Zo("ephox-dragster").resolve,go=i=>{const m={layerClass:sp("blocker"),...i},p=vt.fromTag("div");return hr(p,"role","presentation"),hr(p,"data-mce-bogus","all"),gs(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),mi(p,sp("blocker")),mi(p,m.layerClass),{element:U(p),destroy:()=>{Qr(p)}}};var H1=Aw({compare:(i,m)=>xs(m.left-i.left,m.top-i.top),extract:i=>se.some(xs(i.x,i.y)),sink:(i,m)=>{const p=go(m),y=ku(p.element(),"mousedown",i.forceDrop),E=ku(p.element(),"mouseup",i.drop),D=ku(p.element(),"mousemove",i.move),$=ku(p.element(),"mouseout",i.delayDrop),z=()=>{p.destroy(),E.unbind(),D.unbind(),$.unbind(),y.unbind()},K=Ce=>{Eo(Ce,p.element())},ce=()=>{Qr(p.element())};return nC({element:p.element,start:K,stop:ce,destroy:z})},mutate:(i,m)=>{i.mutate(m.left,m.top)}});const w3=(i,m={})=>{const p=m.mode??H1;return Tf(i,p,m)},z1=Zo("ephox-snooker").resolve,T3=()=>{const i=ym({drag:Ar(["xDelta","yDelta"])});return{mutate:(p,y)=>{i.trigger.drag(p,y)},events:i.registry}},V1=()=>{const i=ym({drag:Ar(["xDelta","yDelta","target"])});let m=se.none();const p=T3();return p.events.drag.bind(D=>{m.each($=>{i.trigger.drag(D.xDelta,D.yDelta,$)})}),{assign:D=>{m=se.some(D)},get:()=>m,mutate:p.mutate,events:i.registry}},Ow=(i,m,p,y,E)=>{const D=vt.fromTag("div");return gs(D,{position:"absolute",left:m-y/2+"px",top:p+"px",height:E+"px",width:y+"px"}),ui(D,{"data-mce-bogus":"all","data-column":i,role:"presentation"}),D},k3=(i,m,p,y,E)=>{const D=vt.fromTag("div");return gs(D,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:y+"px"}),ui(D,{"data-mce-bogus":"all","data-row":i,role:"presentation"}),D},ev=z1("resizer-bar"),oC=z1("resizer-rows"),sC=z1("resizer-cols"),Dw=7,A3=(i,m)=>oo(i.all,(p,y)=>m(p.element)?[y]:[]),Rw=(i,m)=>{const p=[];return Wo(i.grid.columns,y=>{zn.getColumnAt(i,y).map(D=>D.element).forall(m)&&p.push(y)}),fn(p,y=>{const E=zn.filterItems(i,D=>D.column===y);return ao(E,D=>m(D.element))})},rC=i=>{const m=Zi(i.parent(),"."+ev);de(m,Qr)},Nw=(i,m,p)=>{const y=i.origin();de(m,E=>{E.each(D=>{const $=p(y,D);mi($,ev),Eo(i.parent(),$)})})},So=(i,m,p,y)=>{Nw(i,m,(E,D)=>{const $=Ow(D.col,D.x-E.left,p.top-E.top,Dw,y);return mi($,sC),$})},Mw=(i,m,p,y)=>{Nw(i,m,(E,D)=>{const $=k3(D.row,p.left-E.left,D.y-E.top,y,Dw);return mi($,oC),$})},aC=(i,m,p,y,E)=>{const D=Kn(p),$=m.isResizable,z=y.length>0?h1.positions(y,p):[],K=z.length>0?A3(i,$):[],ce=fn(z,(wt,Gt)=>st(K,Fe=>Gt===Fe));Mw(m,ce,D,ws(p));const Ce=E.length>0?tr.positions(E,p):[],Ge=Ce.length>0?Rw(i,$):[],kt=fn(Ce,(wt,Gt)=>st(Ge,Fe=>Gt===Fe));So(m,kt,D,n0(p))},tv=(i,m)=>{if(rC(i),i.isResizable(m)){const p=zn.fromTable(m),y=u2(p),E=Oh(p);aC(p,i,m,y,E)}},Cm=(i,m)=>{const p=Zi(i.parent(),"."+ev);de(p,m)},cC=i=>{Cm(i,m=>{ea(m,"display","none")})},_3=i=>{Cm(i,m=>{ea(m,"display","block")})},Pw=i=>fi(i,oC),rp=i=>fi(i,sC),Bw=z1("resizer-bar-dragging"),U1=i=>{const m=V1(),p=w3(m,{});let y=se.none();const E=(Fe,qe)=>se.from(Lc(Fe,qe));m.events.drag.bind(Fe=>{E(Fe.target,"data-row").each(qe=>{const dn=Nr(Fe.target,"top");ea(Fe.target,"top",dn+Fe.yDelta+"px")}),E(Fe.target,"data-column").each(qe=>{const dn=Nr(Fe.target,"left");ea(Fe.target,"left",dn+Fe.xDelta+"px")})});const D=(Fe,qe)=>{const dn=Nr(Fe,qe),Bn=am(Fe,"data-initial-"+qe,0);return dn-Bn};p.events.stop.bind(()=>{m.get().each(Fe=>{y.each(qe=>{E(Fe,"data-row").each(dn=>{const Bn=D(Fe,"top");Do(Fe,"data-initial-top"),Gt.trigger.adjustHeight(qe,Bn,parseInt(dn,10))}),E(Fe,"data-column").each(dn=>{const Bn=D(Fe,"left");Do(Fe,"data-initial-left"),Gt.trigger.adjustWidth(qe,Bn,parseInt(dn,10))}),tv(i,qe)})})});const $=(Fe,qe)=>{Gt.trigger.startAdjust(),m.assign(Fe),hr(Fe,"data-initial-"+qe,Nr(Fe,qe)),mi(Fe,Bw),ea(Fe,"opacity","0.2"),p.go(i.dragContainer())},z=ku(i.parent(),"mousedown",Fe=>{Pw(Fe.target)&&$(Fe.target,"top"),rp(Fe.target)&&$(Fe.target,"left")}),K=Fe=>Vo(Fe,i.view()),ce=Fe=>ar(Fe,"table",K).filter(ig),Ce=Fe=>fi(Fe,"ephox-snooker-resizer-bar")||fi(Fe,"ephox-dragster-blocker"),Ge=ku(i.view(),"mouseover",Fe=>{ce(Fe.target).fold(()=>{ln(Fe.target)&&!Ce(Fe.target)&&rC(i)},qe=>{p.isActive()&&(y=se.some(qe),tv(i,qe))})}),kt=()=>{z.unbind(),Ge.unbind(),p.destroy(),rC(i)},wt=Fe=>{tv(i,Fe)},Gt=ym({adjustHeight:Ar(["table","delta","row"]),adjustWidth:Ar(["table","delta","column"]),startAdjust:Ar([])});return{destroy:kt,refresh:wt,on:p.on,off:p.off,hideBars:Ot(cC,i),showBars:Ot(_3,i),events:Gt.registry}},lC={create:(i,m,p)=>{const y=h1,E=tr,D=U1(i),$=ym({beforeResize:Ar(["table","type"]),afterResize:Ar(["table","type"]),startDrag:Ar([])});return D.events.adjustHeight.bind(z=>{const K=z.table;$.trigger.beforeResize(K,"row");const ce=y.delta(z.delta,K);y0(K,ce,z.row),$.trigger.afterResize(K,"row")}),D.events.startAdjust.bind(z=>{$.trigger.startDrag()}),D.events.adjustWidth.bind(z=>{const K=z.table;$.trigger.beforeResize(K,"col");const ce=E.delta(z.delta,K),Ce=p(K);Lh(K,ce,z.column,m,Ce),$.trigger.afterResize(K,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:$.registry}}},kf=i=>m=>m.options.get(i),$w="100%",Iw=i=>{const m=i.dom,p=m.getParent(i.selection.getStart(),m.isBlock)??i.getBody();return ta(vt.fromDom(p))+"px"},Fw=(i,m)=>Z1(i)||!iC(i)?m:Od(i)?{...m,width:Iw(i)}:{...m,width:$w},Lw=(i,m)=>Z1(i)||iC(i)?m:Od(i)?{...m,width:Iw(i)}:{...m,width:$w},l5=i=>{const m=i.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=Mo(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=Mo(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},Hw=i=>se.from(i.options.get("table_clone_elements")),nv=i=>{const m=i.options.get("object_resizing");return Mo(m.split(","),"table")},ov=kf("table_header_type"),W1=kf("table_column_resizing"),sv=i=>W1(i)==="preservetable",rv=i=>W1(i)==="resizetable",Rt=kf("table_sizing_mode"),Af=i=>Rt(i)==="relative",Od=i=>Rt(i)==="fixed",Z1=i=>Rt(i)==="responsive",zw=kf("table_resize_bars"),iC=kf("table_style_by_css"),uC=kf("table_merge_content_on_paste"),Vw=i=>{const m=i.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Lw(i,p)},Uw=i=>{const m=i.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Fw(i,p)},jw=kf("table_use_colgroups"),av=i=>vt.fromDom(i.getBody()),_r=i=>m=>Vo(m,av(i)),ru=i=>{Do(i,"data-mce-style");const m=p=>Do(p,"data-mce-style");de(lf(i),m),de(l0(i),m),de(a2(i),m)},cv=i=>vt.fromDom(i.selection.getStart()),Ww=i=>i.getBoundingClientRect().width,Zw=i=>i.getBoundingClientRect().height,Gw=i=>(m,p)=>{const y=m.dom.getStyle(p,i)||m.dom.getAttrib(p,i);return se.from(y).filter(or)},lv=Gw("width"),dC=Gw("height"),qw=i=>/^(\d+(\.\d+)?)%$/.test(i),Kw=i=>/^(\d+(\.\d+)?)px$/.test(i),G1=i=>t1(i,Ic("table")).exists(ig),mC=i=>bc(i,"table"),iv=(i,m,p)=>{const y=E=>D=>p!==void 0&&p(D)||Vo(D,E);return Vo(i,m)?se.some({boxes:se.some([i]),start:i,finish:m}):mC(i).bind(E=>mC(m).bind(D=>{if(Vo(E,D))return se.some({boxes:En(E,i,m),start:i,finish:m});if(dd(E,D)){const $=Bo(m,"td,th",y(E)),z=$.length>0?$[$.length-1]:m;return se.some({boxes:tC(E,i,E,m,D),start:i,finish:z})}else if(dd(D,E)){const $=Bo(i,"td,th",y(D)),z=$.length>0?$[$.length-1]:i;return se.some({boxes:tC(D,i,E,m,D),start:i,finish:z})}else return $u(i,m).shared.bind($=>ar($,"table",p).bind(z=>{const K=Bo(m,"td,th",y(z)),ce=K.length>0?K[K.length-1]:m,Ce=Bo(i,"td,th",y(z)),Ge=Ce.length>0?Ce[Ce.length-1]:i;return se.some({boxes:tC(z,i,E,m,D),start:Ge,finish:ce})}))}))},fC=(i,m)=>{const p=Zi(i,m);return p.length>0?se.some(p):se.none()},O3=(i,m)=>P(i,p=>ba(p,m)),Yw=(i,m,p)=>Ou(i,m).bind(y=>Ou(i,p).bind(E=>es(mC,[y,E]).map(D=>({first:y,last:E,table:D})))),Xw=(i,m)=>bc(i,"table").bind(p=>Ou(p,m).bind(y=>iv(y,i).bind(E=>E.boxes.map(D=>({boxes:D,start:E.start,finish:E.finish}))))),uv=(i,m,p,y,E)=>O3(i,E).bind(D=>y3(D,m,p).bind($=>Xw($,y))),Bg=(i,m)=>fC(i,m),Qw=(i,m,p)=>Yw(i,m,p).bind(y=>{const E=K=>Vo(i,K),D="thead,tfoot,tbody,table",$=bc(y.first,D,E),z=bc(y.last,D,E);return $.bind(K=>z.bind(ce=>Vo(K,ce)?vm(y.table,y.first,y.last):se.none()))}),Jw=Ye,dv=i=>{const m=(y,E)=>Ca(y,E).exists(D=>parseInt(D,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return i.length>0&&ao(i,p)?se.some(i):se.none()},D3=(i,m,p)=>m.length<=1?se.none():Qw(i,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),$g={create:(i,m)=>({selection:i,kill:m})},gC=(i,m,p,y)=>{switch(i.tag){case"none":return m();case"single":return y(i.element);case"multiple":return p(i.elements)}},N3=()=>({tag:"none"}),M3=i=>({tag:"multiple",elements:i}),eE=i=>({tag:"single",element:i}),P3=(i,m,p)=>({get:()=>Bg(i(),p).fold(()=>m().fold(N3,eE),M3)}),mv={create:(i,m,p,y)=>({start:lr.on(i,m),finish:lr.on(p,y)})},pC=(i,m)=>{const p=at(i,m);return Du.create(vt.fromDom(p.startContainer),p.startOffset,vt.fromDom(p.endContainer),p.endOffset)},Dd=mv.create,tE=(i,m,p,y,E,D,$)=>Vo(p,E)&&y===D?se.none():ar(p,"td,th",m).bind(z=>ar(E,"td,th",m).bind(K=>fv(i,m,z,K,$))),fv=(i,m,p,y,E)=>Vo(p,y)?se.none():iv(p,y,m).bind(D=>{const $=D.boxes.getOr([]);return $.length>1?(E(i,$,D.start,D.finish),se.some($g.create(se.some(Dd(p,0,p,Gi(p))),!0))):se.none()}),B3=(i,m,p,y,E)=>{const D=$=>(E.clearBeforeUpdate(p),E.selectRange(p,$.boxes,$.start,$.finish),$.boxes);return uv(y,i,m,E.firstSelectedSelector,E.lastSelectedSelector).map(D)},_f=qr.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),$3=(i,m,p)=>{const y=i.getRect(m),E=i.getRect(p);return E.right>y.left&&E.left<y.right},I3=i=>ar(i,"tr"),ap={..._f,verify:(i,m,p,y,E,D,$)=>ar(y,"td,th",$).bind(z=>ar(m,"td,th",$).map(K=>Vo(z,K)?Vo(y,z)&&Gi(z)===E?D(K):_f.none("in same cell"):es(I3,[z,K]).fold(()=>$3(i,K,z)?_f.success():D(K),ce=>D(K)))).getOr(_f.none("default")),cata:(i,m,p,y,E)=>i.fold(m,p,y,E)},q1=Ic("br"),bC=(i,m,p)=>m(i,p).bind(y=>sm(y)&&Wi(y).trim().length===0?bC(y,m,p):se.some(y)),F3=(i,m,p)=>p.traverse(m).orThunk(()=>bC(m,p.gather,i)).map(p.relative),L3=(i,m)=>gc(i,m).filter(q1).orThunk(()=>gc(i,m-1).filter(q1)),gv=(i,m,p,y)=>L3(m,p).bind(E=>y.traverse(E).fold(()=>bC(E,y.gather,i).map(y.relative),D=>Cd(D).map($=>lr.on($.parent,$.index)))),nE=(i,m,p,y)=>(q1(m)?F3(i,m,y):gv(i,m,p,y)).map(D=>({start:D,finish:D})),oE=i=>ap.cata(i,m=>se.none(),()=>se.none(),m=>se.some(gm(m,0)),m=>se.some(gm(m,Gi(m)))),K1=(i,m)=>({left:i.left,top:i.top+m,right:i.right,bottom:i.bottom+m}),hv=(i,m)=>({left:i.left,top:i.top-m,right:i.right,bottom:i.bottom-m}),vC=(i,m,p)=>({left:i.left+m,top:i.top+p,right:i.right+m,bottom:i.bottom+p}),Y1=i=>i.top,yC=i=>i.bottom,H3=(i,m,p)=>p>=0&&p<Gi(m)?i.getRangedRect(m,p,m,p+1):p>0?i.getRangedRect(m,p-1,m,p):se.none(),X1=i=>({left:i.left,top:i.top,right:i.right,bottom:i.bottom}),sE=(i,m)=>se.some(i.getRect(m)),pv=(i,m,p)=>Gs(m)?sE(i,m).map(X1):sm(m)?H3(i,m,p).map(X1):se.none(),bv=(i,m)=>Gs(m)?sE(i,m).map(X1):sm(m)?i.getRangedRect(m,0,m,Gi(m)).map(X1):se.none(),Ig=5,z3=100,Rd=qr.generate([{none:[]},{retry:["caret"]}]),V3=(i,m)=>i.left<m.left||Math.abs(m.right-i.left)<1||i.left>m.right,rE=(i,m,p)=>t1(m,Iu).fold(jt,y=>bv(i,y).exists(E=>V3(p,E))),U3=(i,m,p,y,E)=>{const D=K1(E,Ig);return Math.abs(p.bottom-y.bottom)<1||p.top>E.bottom?Rd.retry(D):p.top===E.bottom?Rd.retry(K1(E,1)):rE(i,m,E)?Rd.retry(vC(D,Ig,0)):Rd.none()},vv={point:Y1,adjuster:(i,m,p,y,E)=>{const D=hv(E,Ig);return Math.abs(p.top-y.top)<1||p.bottom<E.top?Rd.retry(D):p.bottom===E.top?Rd.retry(hv(E,1)):rE(i,m,E)?Rd.retry(vC(D,Ig,0)):Rd.none()},move:hv,gather:dw},j3={point:yC,adjuster:U3,move:K1,gather:eu},W3=(i,m,p)=>i.elementFromPoint(m,p).filter(y=>Js(y)==="table").isSome(),Z3=(i,m,p,y,E)=>CC(i,m,p,m.move(y,Ig),E),CC=(i,m,p,y,E)=>E===0?se.some(y):W3(i,y.left,m.point(y))?Z3(i,m,p,y,E-1):i.situsFromPoint(y.left,m.point(y)).bind(D=>D.start.fold(se.none,$=>bv(i,$).bind(z=>m.adjuster(i,$,z,p,y).fold(se.none,K=>CC(i,m,p,K,E-1))).orThunk(()=>se.some(y)),se.none)),G3=(i,m,p)=>i.point(m)>p.getInnerHeight()?se.some(i.point(m)-p.getInnerHeight()):i.point(m)<0?se.some(-i.point(m)):se.none(),aE=(i,m,p)=>{const y=i.move(p,Ig),E=CC(m,i,p,y,z3).getOr(y);return G3(i,E,m).fold(()=>m.situsFromPoint(E.left,i.point(E)),D=>(m.scrollBy(0,D),m.situsFromPoint(E.left,i.point(E)-D)))},xC={tryUp:Ot(aE,vv),tryDown:Ot(aE,j3),getJumpSize:U(Ig)},q3=20,K3=(i,m,p)=>i.getSelection().bind(y=>nE(m,y.finish,y.foffset,p).fold(()=>se.some(gm(y.finish,y.foffset)),E=>{const D=i.fromSitus(E),$=ap.verify(i,y.finish,y.foffset,D.finish,D.foffset,p.failure,m);return oE($)})),SC=(i,m,p,y,E,D)=>D===0?se.none():Q1(i,m,p,y,E).bind($=>{const z=i.fromSitus($),K=ap.verify(i,p,y,z.finish,z.foffset,E.failure,m);return ap.cata(K,()=>se.none(),()=>se.some($),ce=>Vo(p,ce)&&y===0?cE(i,p,y,hv,E):SC(i,m,ce,0,E,D-1),ce=>Vo(p,ce)&&y===Gi(ce)?cE(i,p,y,K1,E):SC(i,m,ce,Gi(ce),E,D-1))}),cE=(i,m,p,y,E)=>pv(i,m,p).bind(D=>Xt(i,E,y(D,xC.getJumpSize()))),Xt=(i,m,p)=>{const y=rl().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(i,p):se.none()},Q1=(i,m,p,y,E)=>pv(i,p,y).bind(D=>Xt(i,E,D)),lE=(i,m,p)=>K3(i,m,p).bind(y=>SC(i,m,y.element,y.offset,p,q3).map(i.fromSitus)),Y3=(i,m)=>r0(i,p=>te(p).exists(y=>Vo(y,m))),wC=(i,m,p,y,E)=>ar(y,"td,th",m).bind(D=>ar(D,"table",m).bind($=>Y3(E,$)?lE(i,m,p).bind(z=>ar(z.finish,"td,th",m).map(K=>({start:D,finish:K,range:z}))):se.none())),J1=(i,m,p,y,E,D)=>D(y,m).orThunk(()=>wC(i,m,p,y,E).map($=>{const z=$.range;return $g.create(se.some(Dd(z.start,z.soffset,z.finish,z.foffset)),!0)})),yv=(i,m)=>ar(i,"tr",m).bind(p=>ar(p,"table",m).bind(y=>{const E=Zi(y,"tr");return Vo(p,E[0])?oc(y,D=>cr(D).isSome(),m).map(D=>{const $=Gi(D);return $g.create(se.some(Dd(D,$,D,$)),!0)}):se.none()})),eb=(i,m)=>ar(i,"tr",m).bind(p=>ar(p,"table",m).bind(y=>{const E=Zi(y,"tr");return Vo(p,E[E.length-1])?Si(y,D=>of(D).isSome(),m).map(D=>$g.create(se.some(Dd(D,0,D,0)),!0)):se.none()})),cp=(i,m,p,y,E,D,$)=>wC(i,p,y,E,D).bind(z=>fv(m,p,z.start,z.finish,$)),EC=(i,m)=>ar(i,"td,th",m),TC=i=>fc(i).exists(ig),iE=(i,m,p,y)=>{const E=Dr(),D=E.clear,$=Ce=>{E.on(Ge=>{y.clearBeforeUpdate(m),EC(Ce.target,p).each(kt=>{iv(Ge,kt,p).each(wt=>{const Gt=wt.boxes.getOr([]);if(Gt.length===1){const Fe=Gt[0],qe=ug(Fe)==="false",dn=kn(nf(Ce.target),Fe,Vo);qe&&dn&&y.selectRange(m,Gt,Fe,Fe)}else Gt.length>1&&(y.selectRange(m,Gt,wt.start,wt.finish),i.selectContents(kt))})})})};return{clearstate:D,mousedown:Ce=>{y.clear(m),EC(Ce.target,p).filter(TC).each(E.set)},mouseover:Ce=>{$(Ce)},mouseup:Ce=>{$(Ce),D()}}},kC={traverse:Ym,gather:eu,relative:lr.before,retry:xC.tryDown,failure:ap.failedDown},uE={traverse:Wp,gather:dw,relative:lr.before,retry:xC.tryUp,failure:ap.failedUp},lp=i=>m=>m===i,xm=lp(38),ip=lp(40),Sm=i=>i>=37&&i<=40,wm={isBackward:lp(37),isForward:lp(39)},dE={isBackward:lp(39),isForward:lp(37)},tb=i=>({elementFromPoint:(qe,dn)=>vt.fromPoint(vt.fromDom(i.document),qe,dn),getRect:qe=>qe.dom.getBoundingClientRect(),getRangedRect:(qe,dn,Bn,Bt)=>{const $o=k.exact(qe,dn,Bn,Bt);return gg(i,$o)},getSelection:()=>fg(i).map(qe=>pC(i,qe)),fromSitus:qe=>{const dn=k.relative(qe.start,qe.finish);return pC(i,dn)},situsFromPoint:(qe,dn)=>rf(i,qe,dn).map(Bn=>mv.create(Bn.start,Bn.soffset,Bn.finish,Bn.foffset)),clearSelection:()=>{Sh(i)},collapseSelection:(qe=!1)=>{fg(i).each(dn=>dn.fold(Bn=>Bn.collapse(qe),(Bn,Bt)=>{const $o=qe?Bn:Bt;Ru(i,$o,$o)},(Bn,Bt,$o,Io)=>{const Rn=qe?Bn:$o,vr=qe?Bt:Io;hi(i,Rn,vr,Rn,vr)}))},setSelection:qe=>{hi(i,qe.start,qe.soffset,qe.finish,qe.foffset)},setRelativeSelection:(qe,dn)=>{Ru(i,qe,dn)},selectNode:qe=>{sf(i,qe,!1)},selectContents:qe=>{sf(i,qe)},getInnerHeight:()=>i.innerHeight,getScrollY:()=>Ko(vt.fromDom(i.document)).top,scrollBy:(qe,dn)=>{pc(qe,dn,vt.fromDom(i.document))}}),au=(i,m)=>({rows:i,cols:m}),mE=(i,m,p,y)=>{const E=tb(i),D=iE(E,m,p,y);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},fE=i=>t1(i,Jb).exists(ig),AC=(i,m)=>fE(i)||fE(m),_C=(i,m,p,y)=>{const E=tb(i),D=()=>(y.clear(m),se.none());return{keydown:(K,ce,Ce,Ge,kt,wt)=>{const Gt=K.raw,Fe=Gt.which,qe=Gt.shiftKey===!0;return fC(m,y.selectedSelector).fold(()=>(Sm(Fe)&&!qe&&y.clearBeforeUpdate(m),Sm(Fe)&&qe&&!AC(ce,Ge)?se.none:ip(Fe)&&qe?Ot(cp,E,m,p,kC,Ge,ce,y.selectRange):xm(Fe)&&qe?Ot(cp,E,m,p,uE,Ge,ce,y.selectRange):ip(Fe)?Ot(J1,E,p,kC,Ge,ce,eb):xm(Fe)?Ot(J1,E,p,uE,Ge,ce,yv):se.none),Bn=>{const Bt=$o=>()=>rt($o,Rn=>B3(Rn.rows,Rn.cols,m,Bn,y)).fold(()=>Yw(m,y.firstSelectedSelector,y.lastSelectedSelector).map(Rn=>{const vr=ip(Fe)||wt.isForward(Fe)?lr.after:lr.before;return E.setRelativeSelection(lr.on(Rn.first,0),vr(Rn.table)),y.clear(m),$g.create(se.none(),!0)}),Rn=>se.some($g.create(se.none(),!0)));return Sm(Fe)&&qe&&!AC(ce,Ge)?se.none:ip(Fe)&&qe?Bt([au(1,0)]):xm(Fe)&&qe?Bt([au(-1,0)]):wt.isBackward(Fe)&&qe?Bt([au(0,-1),au(-1,0)]):wt.isForward(Fe)&&qe?Bt([au(0,1),au(1,0)]):Sm(Fe)&&!qe?D:se.none})()},keyup:(K,ce,Ce,Ge,kt)=>fC(m,y.selectedSelector).fold(()=>{const wt=K.raw,Gt=wt.which;return wt.shiftKey===!0&&Sm(Gt)&&AC(ce,Ge)?tE(m,p,ce,Ce,Ge,kt,y.selectRange):se.none()},se.none)}},gE=(i,m,p,y)=>{const E=tb(i);return(D,$)=>{y.clearBeforeUpdate(m),iv(D,$,p).each(z=>{const K=z.boxes.getOr([]);y.selectRange(m,K,z.start,z.finish),E.selectContents($),E.collapseSelection()})}},pE={byClass:i=>{const m=s1(i.selected),p=s0([i.selected,i.lastSelected,i.firstSelected]),y=D=>{const $=Zi(D,i.selectedSelector);de($,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(D,$,z,K)=>{y(D),de($,m),mi(z,i.firstSelected),mi(K,i.lastSelected)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}},byAttr:(i,m,p)=>{const y=K=>{Do(K,i.selected),Do(K,i.firstSelected),Do(K,i.lastSelected)},E=K=>{hr(K,i.selected,"1")},D=K=>{$(K),p()},$=K=>{const ce=Zi(K,`${i.selectedSelector},${i.firstSelectedSelector},${i.lastSelectedSelector}`);de(ce,y)};return{clearBeforeUpdate:$,clear:D,selectRange:(K,ce,Ce,Ge)=>{D(K),de(ce,E),hr(Ce,i.firstSelected,"1"),hr(Ge,i.lastSelected,"1"),m(ce,Ce,Ge)},selectedSelector:i.selectedSelector,firstSelectedSelector:i.firstSelectedSelector,lastSelectedSelector:i.lastSelectedSelector}}},Fg="data-mce-selected",OC="td["+Fg+"],th["+Fg+"]",bE="["+Fg+"]",DC="data-mce-first-selected",RC="td["+DC+"],th["+DC+"]",NC="data-mce-last-selected",Q3="td["+NC+"],th["+NC+"]",Lg=bE,Hg={selected:Fg,selectedSelector:OC,firstSelected:DC,firstSelectedSelector:RC,lastSelected:NC,lastSelectedSelector:Q3},Cv=(i,m,p)=>({element:p,mergable:D3(m,i,Hg),unmergable:dv(i),selection:Jw(i)}),xv=(i,m,p)=>({element:i,clipboard:m,generators:p}),vE=(i,m,p,y)=>({selection:Jw(i),clipboard:p,generators:y}),J3=i=>Vl(i).bind(m=>Bg(m,Hg.firstSelectedSelector)).fold(U(i),m=>m[0]),yE=i=>(m,p)=>{const y=Js(m),E=y==="col"||y==="colgroup"?J3(m):m;return ar(E,i,p)},An=yE("th,td,caption"),Sv=yE("th,td"),Zl=i=>Lr(i.model.table.getSelectedCells()),nb=i=>fn(Zl(i),m=>ba(m,Hg.selectedSelector)),eA=i=>Vl(i[0]).map(m=>{const p=w0(m,Lg);return ru(p),[p]}),wv=(i,m)=>he(m,p=>i.selection.serializer.serialize(p.dom,{})).join(""),tA=(i,m)=>{const p=i.getDoc(),y=qp(vt.fromDom(i.getBody())),E=vt.fromTag("div",p);hr(E,"data-mce-bogus","all"),gs(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const D=Vi(y);Pl(E,m),Eo(D,E);const $=E.dom.innerText;return Qr(E),$},MC=(i,m)=>{i.on("BeforeGetContent",p=>{const y=E=>{p.preventDefault(),eA(E).each(D=>{const $=p.format==="text"?tA(i,D):wv(i,D);p.content=$})};if(p.selection===!0){const E=nb(i);E.length>=1&&y(E)}}),i.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Zl(i);xe(y).each(E=>{Vl(E).each(D=>{const $=fn(hh(p.content),K=>Js(K)!=="meta"),z=Ic("table");if(uC(i)&&$.length===1&&z($[0])){p.preventDefault();const K=vt.fromDom(i.getDoc()),ce=$2(K),Ce=xv(E,$[0],ce);m.pasteCells(D,Ce).each(()=>{i.focus()})}})})}})},PC=(i,m)=>i.dispatch("NewRow",{node:m}),ob=(i,m)=>i.dispatch("NewCell",{node:m}),Vu=(i,m,p)=>{i.dispatch("TableModified",{...p,table:m})},up=(i,m,p,y,E)=>{i.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:E})},nA=i=>{i.dispatch("TableSelectionClear")},zg=(i,m,p,y,E)=>{i.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:E})},sb=(i,m,p,y,E)=>{i.dispatch("ObjectResized",{target:m,width:p,height:y,origin:E})},Ev={structure:!1,style:!0},Zr={structure:!0,style:!1},oA={structure:!0,style:!0},BC=(i,m)=>Af(i)?Ph.percentageSize(m):Od(i)?Ph.pixelSize(m):Ph.getTableSize(m),Of=(i,m,p)=>{const y=Aa=>Js(av(Aa))==="table",E=Aa=>!y(i)||D1(Aa).rows>1,D=Aa=>!y(i)||D1(Aa).columns>1,$=Hw(i),z=rv(i)?Xe:x1,K=Aa=>{switch(ov(i)){case"section":return im.section();case"sectionCells":return im.sectionCells();case"cells":return im.cells();default:return im.getTableSectionType(Aa,"section")}},ce=(Aa,Nv)=>Nv.cursor.fold(()=>{const lb=lf(Aa);return xe(lb).filter(ln).map(Tm=>{p.clearSelectedCells(Aa.dom);const rc=i.dom.createRng();return rc.selectNode(Tm.dom),i.selection.setRng(rc),hr(Tm,"data-mce-selected","1"),rc})},lb=>{const Tm=N0(lb),rc=i.dom.createRng();return rc.setStart(Tm.element.dom,Tm.offset),rc.setEnd(Tm.element.dom,Tm.offset),i.selection.setRng(rc),p.clearSelectedCells(Aa.dom),se.some(rc)}),Ce=(Aa,Nv,lb,Tm)=>(rc,iA,kE=!1)=>{ru(rc);const Ft=vt.fromDom(i.getDoc()),Kc=xf(lb,Ft,$),uA={sizing:BC(i,rc),resize:rv(i)?Th():FS(),section:K(rc)};return Nv(rc)?Aa(rc,iA,Kc,uA).bind(Mv=>{m.refresh(rc.dom),de(Mv.newRows,Ug=>{PC(i,Ug.dom)}),de(Mv.newCells,Ug=>{ob(i,Ug.dom)});const AE=ce(rc,Mv);return ln(rc)&&(ru(rc),kE||Vu(i,rc.dom,Tm)),AE.map(Ug=>({rng:Ug,effect:Tm}))}):se.none()},Ge=Ce(q2,E,Xe,Zr),kt=Ce(ou,D,Xe,Zr),wt=Ce(Pg,X,Xe,Zr),Gt=Ce(f3,X,Xe,Zr),Fe=Ce(ep,X,z,Zr),qe=Ce(ps,X,z,Zr),dn=Ce(h3,X,Xe,Zr),Bn=Ce(Y2,X,Xe,Zr),Bt=Ce(nt,X,Xe,Zr),$o=Ce(X2,X,Xe,Zr),Io=Ce(ma,X,Xe,Zr),Rn=Ce(Q2,X,Xe,Zr),vr=Ce(Sw,X,Xe,oA),Ei=Ce(xw,X,Xe,Zr),Em=Ce(g3,X,Xe,Zr),Nf=Ce(Ef,X,Xe,Zr),Vg=Ce(zu,X,Xe,Zr),Yo=Ce(Va,X,Xe,Zr),Oc=Ce(Cw,X,Xe,Zr),Xs=Ce(K2,X,Xe,Zr);return{deleteRow:Ge,deleteColumn:kt,insertRowsBefore:wt,insertRowsAfter:Gt,insertColumnsBefore:Fe,insertColumnsAfter:qe,mergeCells:dn,unmergeCells:Bn,pasteColsBefore:Bt,pasteColsAfter:$o,pasteRowsBefore:Io,pasteRowsAfter:Rn,pasteCells:vr,makeCellsHeader:Ei,unmakeCellsHeader:Em,makeColumnsHeader:Nf,unmakeColumnsHeader:Vg,makeRowsHeader:Yo,makeRowsBody:Oc,makeRowsFooter:Xs,getTableRowType:p3,getTableCellType:eC,getTableColType:J2}},Nd=(i,m)=>{i.selection.select(m.dom,!0),i.selection.collapse(!0)},$C=(i,m)=>{Ou(m,"td,th").each(Ot(Nd,i))},CE=(i,m)=>{de(Zi(m,"tr"),p=>{PC(i,p.dom),de(Zi(p,"th,td"),y=>{ob(i,y.dom)})})},sA=i=>nn(i)&&i.indexOf("%")!==-1,Tv=(i,m,p,y,E)=>{const D=Uw(i),$={styles:D,attributes:Vw(i),colGroups:jw(i)};return i.undoManager.ignore(()=>{const z=_d(p,m,E,y,ov(i),$);hr(z,"data-mce-id","__mce");const K=t0(z);i.insertContent(K),i.addVisual()}),Ou(av(i),'table[data-mce-id="__mce"]').map(z=>(Od(i)?P2(z):Z1(i)?yf(z):(Af(i)||sA(D.width))&&Ag(z),ru(z),Do(z,"data-mce-id"),CE(i,z),$C(i,z),z.dom)).getOrNull()},rb=(i,m,p,y={})=>{const E=D=>un(D)&&D>0;if(E(m)&&E(p)){const D=y.headerRows||0,$=y.headerColumns||0;return Tv(i,p,m,$,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Df=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const kv="x-tinymce/dom-table-",Av=kv+"rows",Rf=kv+"columns",ab=i=>{const m=Df.FakeClipboardItem(i);Df.write([m])},IC=i=>{const m=Df.read()??[];return rt(m,p=>se.from(p.getType(i)))},_v=i=>{IC(i).isSome()&&Df.clear()},Uu=i=>{i.fold(Md,m=>ab({[Av]:m}))},xE=()=>IC(Av),Md=()=>_v(Av),FC=i=>{i.fold(dp,m=>ab({[Rf]:m}))},Ov=()=>IC(Rf),dp=()=>_v(Rf),cb=i=>An(cv(i),_r(i)).filter(G1),Dv=i=>Sv(cv(i),_r(i)).filter(G1),rA=(i,m)=>{const p=_r(i),y=()=>cb(i).each(qe=>{Vl(qe,p).filter(oe(p)).each(dn=>{const Bn=vt.fromText("");if(ii(dn,Bn),Qr(dn),i.dom.isEmpty(i.getBody()))i.setContent(""),i.selection.setCursorLocation();else{const Bt=i.dom.createRng();Bt.setStart(Bn.dom,0),Bt.setEnd(Bn.dom,0),i.selection.setRng(Bt),i.nodeChanged()}})}),E=qe=>cb(i).each(dn=>{Z1(i)||Od(i)||Af(i)||Vl(dn,p).each(Bt=>{qe==="relative"&&!cw(Bt)?Ag(Bt):qe==="fixed"&&!t3(Bt)?P2(Bt):qe==="responsive"&&!n3(Bt)&&yf(Bt),ru(Bt),Vu(i,Bt.dom,Zr)})}),D=qe=>Vl(qe,p),$=qe=>Dv(i).bind(dn=>D(dn).map(Bn=>qe(Bn,dn))),z=(qe,dn)=>{$(Bn=>{i.formatter.toggle("tableclass",{value:dn},Bn.dom),Vu(i,Bn.dom,Ev)})},K=(qe,dn)=>{$(Bn=>{const Bt=Zl(i),Io=ao(Bt,Rn=>i.formatter.match("tablecellclass",{value:dn},Rn.dom))?i.formatter.remove:i.formatter.apply;de(Bt,Rn=>Io("tablecellclass",{value:dn},Rn.dom)),Vu(i,Bn.dom,Ev)})},ce=()=>{cb(i).each(qe=>{Vl(qe,p).each(dn=>{Hs(dn,"caption").fold(()=>{const Bn=vt.fromTag("caption");Eo(Bn,vt.fromText("Caption")),Yy(dn,Bn,0),i.selection.setCursorLocation(Bn.dom,0)},Bn=>{Ic("caption")(qe)&&ai("td",dn).each(Bt=>i.selection.setCursorLocation(Bt.dom,0)),Qr(Bn)}),Vu(i,dn.dom,Zr)})})},Ce=qe=>{i.focus()},Ge=(qe,dn=!1)=>$((Bn,Bt)=>{const $o=Cv(Zl(i),Bn,Bt);qe(Bn,$o,dn).each(Ce)}),kt=()=>$((qe,dn)=>{const Bn=Cv(Zl(i),qe,dn),Bt=xf(Xe,vt.fromDom(i.getDoc()),se.none());return xi(qe,Bn,Bt)}),wt=()=>$((qe,dn)=>{const Bn=Cv(Zl(i),qe,dn);return Pu(qe,Bn)}),Gt=(qe,dn)=>dn().each(Bn=>{const Bt=he(Bn,$o=>Fr($o));$(($o,Io)=>{const Rn=$2(vt.fromDom(i.getDoc())),vr=vE(Zl(i),Io,Bt,Rn);qe($o,vr).each(Ce)})}),Fe=qe=>(dn,Bn)=>Ka(Bn,"type").each(Bt=>{Ge(qe(Bt),Bn.no_events)});qn({mceTableSplitCells:()=>Ge(m.unmergeCells),mceTableMergeCells:()=>Ge(m.mergeCells),mceTableInsertRowBefore:()=>Ge(m.insertRowsBefore),mceTableInsertRowAfter:()=>Ge(m.insertRowsAfter),mceTableInsertColBefore:()=>Ge(m.insertColumnsBefore),mceTableInsertColAfter:()=>Ge(m.insertColumnsAfter),mceTableDeleteCol:()=>Ge(m.deleteColumn),mceTableDeleteRow:()=>Ge(m.deleteRow),mceTableCutCol:()=>wt().each(qe=>{FC(qe),Ge(m.deleteColumn)}),mceTableCutRow:()=>kt().each(qe=>{Uu(qe),Ge(m.deleteRow)}),mceTableCopyCol:()=>wt().each(qe=>FC(qe)),mceTableCopyRow:()=>kt().each(qe=>Uu(qe)),mceTablePasteColBefore:()=>Gt(m.pasteColsBefore,Ov),mceTablePasteColAfter:()=>Gt(m.pasteColsAfter,Ov),mceTablePasteRowBefore:()=>Gt(m.pasteRowsBefore,xE),mceTablePasteRowAfter:()=>Gt(m.pasteRowsAfter,xE),mceTableDelete:y,mceTableCellToggleClass:K,mceTableToggleClass:z,mceTableToggleCaption:ce,mceTableSizingMode:(qe,dn)=>E(dn),mceTableCellType:Fe(qe=>qe==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:Fe(qe=>qe==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:Fe(qe=>{switch(qe){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(qe,dn)=>i.addCommand(dn,qe)),i.addCommand("mceInsertTable",(qe,dn)=>{rb(i,dn.rows,dn.columns,dn.options)}),i.addCommand("mceTableApplyCellStyle",(qe,dn)=>{const Bn=Io=>"tablecell"+Io.toLowerCase().replace("-","");if(!De(dn))return;const Bt=fn(Zl(i),G1);if(Bt.length===0)return;const $o=jm(dn,(Io,Rn)=>i.formatter.has(Bn(Rn))&&nn(Io));yu($o)||(qn($o,(Io,Rn)=>{const vr=Bn(Rn);de(Bt,Ei=>{Io===""?i.formatter.remove(vr,{value:null},Ei.dom,!0):i.formatter.apply(vr,{value:Io},Ei.dom)})}),D(Bt[0]).each(Io=>Vu(i,Io.dom,Ev)))})},SE=(i,m)=>{const p=_r(i),y=E=>Sv(cv(i)).bind(D=>Vl(D,p).map($=>{const z=Cv(Zl(i),$,D);return E($,z)})).getOr("");qn({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(E,D)=>i.addQueryValueHandler(D,E))},Rv=i=>!fi(vt.fromDom(i.target),"ephox-snooker-resizer-bar"),aA=(i,m)=>{const p=P3(()=>vt.fromDom(i.getBody()),()=>Sv(cv(i),_r(i)),Hg.selectedSelector),y=(K,ce,Ce)=>{Vl(ce).each(kt=>{const wt=he(K,Bn=>Bn.dom),Gt=Hw(i),Fe=xf(Xe,vt.fromDom(i.getDoc()),Gt),qe=Zl(i),dn=A2(kt,{selection:qe},Fe).map(Bn=>Fo(Bn,Bt=>he(Bt,$o=>$o.dom))).getOrUndefined();up(i,wt,ce.dom,Ce.dom,dn)})},E=()=>nA(i),D=pE.byAttr(Hg,y,E);return i.on("init",K=>{const ce=i.getWin(),Ce=av(i),Ge=_r(i),kt=()=>{const Yo=i.selection,Oc=vt.fromDom(Yo.getStart()),Xs=vt.fromDom(Yo.getEnd());es(Vl,[Oc,Xs]).fold(()=>D.clear(Ce),Xe)},wt=mE(ce,Ce,Ge,D),Gt=_C(ce,Ce,Ge,D),Fe=gE(ce,Ce,Ge,D),qe=Yo=>Yo.raw.shiftKey===!0;i.on("TableSelectorChange",Yo=>Fe(Yo.start,Yo.finish));const dn=(Yo,Oc)=>{qe(Yo)&&(Oc.kill&&Yo.kill(),Oc.selection.each(Xs=>{const Wu=k.relative(Xs.start,Xs.finish),sc=at(ce,Wu);i.selection.setRng(sc)}))},Bn=Yo=>{const Oc=fr(Yo);if(Oc.raw.shiftKey&&Sm(Oc.raw.which)){const Xs=i.selection.getRng(),Wu=vt.fromDom(Xs.startContainer),sc=vt.fromDom(Xs.endContainer);Gt.keyup(Oc,Wu,Xs.startOffset,sc,Xs.endOffset).each(ql=>{dn(Oc,ql)})}},Bt=Yo=>{const Oc=fr(Yo);m.hide();const Xs=i.selection.getRng(),Wu=vt.fromDom(Xs.startContainer),sc=vt.fromDom(Xs.endContainer),ql=pd(wm,dE)(vt.fromDom(i.selection.getStart()));Gt.keydown(Oc,Wu,Xs.startOffset,sc,Xs.endOffset,ql).each(Aa=>{dn(Oc,Aa)}),m.show()},$o=Yo=>Yo.button===0,Io=Yo=>Yo.buttons===void 0?!0:(Yo.buttons&1)!==0,Rn=Yo=>{wt.clearstate()},vr=Yo=>{$o(Yo)&&Rv(Yo)&&wt.mousedown(fr(Yo))},Ei=Yo=>{Io(Yo)&&Rv(Yo)&&wt.mouseover(fr(Yo))},Em=Yo=>{$o(Yo)&&Rv(Yo)&&wt.mouseup(fr(Yo))},Vg=(()=>{const Yo=Ws(vt.fromDom(Ce)),Oc=Ws(0);return{touchEnd:Wu=>{const sc=vt.fromDom(Wu.target);if(Ic("td")(sc)||Ic("th")(sc)){const ql=Yo.get(),Aa=Oc.get();Vo(ql,sc)&&Wu.timeStamp-Aa<300&&(Wu.preventDefault(),Fe(sc,sc))}Yo.set(sc),Oc.set(Wu.timeStamp)}}})();i.on("dragstart",Rn),i.on("mousedown",vr),i.on("mouseover",Ei),i.on("mouseup",Em),i.on("touchend",Vg.touchEnd),i.on("keyup",Bn),i.on("keydown",Bt),i.on("NodeChange",kt)}),i.on("PreInit",()=>{i.serializer.addTempAttr(Hg.firstSelected),i.serializer.addTempAttr(Hg.lastSelected)}),{getSelectedCells:()=>gC(p.get(),U([]),K=>he(K,ce=>ce.dom),K=>[K.dom]),clearSelectedCells:K=>D.clear(vt.fromDom(K))}},LC=(i,m)=>{const p=vt.fromDom(i.getBody());return tw.body(p,m)},ju=i=>Cn(i)&&i.nodeName==="TABLE",HC="bar-",cA=i=>Lc(i,"data-mce-resize")!=="false",wE=i=>{const m=zn.fromTable(i);zn.hasColumns(m)||de(lf(i),p=>{const y=hd(p,"width");ea(p,"width",y),Do(p,"width")})},EE=i=>Bi(i,"corner-"),TE=i=>Qd(i,"corner-"),lA=i=>{const m=Dr(),p=Dr(),y=Dr();let E,D,$,z;const K=Bt=>BC(i,Bt),ce=()=>sv(i)?FS():Th(),Ce=Bt=>D1(Bt).columns,Ge=Bt=>D1(Bt).rows,kt=(Bt,$o,Io,Rn)=>{const vr=TE($o),Ei=cd(vr,"e"),Em=Bi(vr,"n");if(D===""&&Ag(Bt),z===""&&vl(Bt),Io!==E&&D!==""){ea(Bt,"width",D);const Nf=ce(),Vg=K(Bt),Yo=sv(i)||Ei?Ce(Bt)-1:0;Lh(Bt,Io-E,Yo,Nf,Vg)}else if(qw(D)){const Nf=parseFloat(D.replace("%","")),Vg=Io*Nf/E;ea(Bt,"width",Vg+"%")}if(Kw(D)&&wE(Bt),Rn!==$&&z!==""){ea(Bt,"height",z);const Nf=Em?0:Ge(Bt)-1;y0(Bt,Rn-$,Nf)}},wt=()=>{p.on(Bt=>{Bt.destroy()})};i.on("init",()=>{const Bt=LC(i,cA);if(y.set(Bt),nv(i)&&zw(i)){const $o=ce(),Io=lC.create(Bt,$o,K);i.mode.isReadOnly()||Io.on(),Io.events.startDrag.bind(Rn=>{m.set(i.selection.getRng())}),Io.events.beforeResize.bind(Rn=>{const vr=Rn.table.dom;zg(i,vr,Ww(vr),Zw(vr),HC+Rn.type)}),Io.events.afterResize.bind(Rn=>{const vr=Rn.table,Ei=vr.dom;ru(vr),m.on(Em=>{i.selection.setRng(Em),i.focus()}),sb(i,Ei,Ww(Ei),Zw(Ei),HC+Rn.type),i.undoManager.add()}),p.set(Io)}}),i.on("ObjectResizeStart",Bt=>{const $o=Bt.target;if(ju($o)&&!i.mode.isReadOnly()){const Io=vt.fromDom($o);de(i.dom.select(".mce-clonedresizable"),Rn=>{i.dom.addClass(Rn,"mce-"+W1(i)+"-columns")}),!t3(Io)&&Od(i)?P2(Io):!cw(Io)&&Af(i)&&Ag(Io),n3(Io)&&Bi(Bt.origin,HC)&&Ag(Io),E=Bt.width,D=Z1(i)?"":lv(i,$o).getOr(""),$=Bt.height,z=dC(i,$o).getOr("")}}),i.on("ObjectResized",Bt=>{const $o=Bt.target;if(ju($o)){const Io=vt.fromDom($o),Rn=Bt.origin;EE(Rn)&&kt(Io,Rn,Bt.width,Bt.height),ru(Io),Vu(i,Io.dom,Ev)}});const Gt=()=>{p.on(Bt=>{Bt.on(),Bt.showBars()})},Fe=()=>{p.on(Bt=>{Bt.off(),Bt.hideBars()})};return i.on("DisabledStateChange",Bt=>{Bt.state?Fe():Gt()}),i.on("SwitchMode",()=>{i.mode.isReadOnly()?Fe():Gt()}),i.on("dragstart dragend",Bt=>{Bt.type==="dragstart"?Fe():Gt()}),i.on("remove",()=>{wt()}),{refresh:Bt=>{p.on($o=>$o.refreshBars(vt.fromDom(Bt)))},hide:()=>{p.on(Bt=>Bt.hideBars())},show:()=>{p.on(Bt=>Bt.showBars())}}},Ss=i=>{l5(i);const m=lA(i),p=aA(i,m),y=Of(i,m,p);return rA(i,y),SE(i,y),MC(i,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Gl=i=>({table:Ss(i)});var mp=()=>{V.add("dom",Gl)};mp()}()),tX}var oX;function dJ(){return oX||(oX=1,uJ()),eX}dJ();var sX={},rX={},aX;function mJ(){return aX||(aX=1,function(){var V=tinymce.util.Tools.resolve("tinymce.PluginManager");const ue=We=>({backspaceDelete:rt=>{We.execCommand("mceListBackspaceDelete",!1,rt)}}),ut=We=>We==null,ot=We=>!ut(We),Nt=We=>()=>We,ft=(We,rt)=>We===rt,nn=Nt(!1);class De{tag;value;static singletonNone=new De(!1);constructor(rt,ze){this.tag=rt,this.value=ze}static some(rt){return new De(!0,rt)}static none(){return De.singletonNone}fold(rt,ze){return this.tag?ze(this.value):rt()}isSome(){return this.tag}isNone(){return!this.tag}map(rt){return this.tag?De.some(rt(this.value)):De.none()}bind(rt){return this.tag?rt(this.value):De.none()}exists(rt){return this.tag&&rt(this.value)}forall(rt){return!this.tag||rt(this.value)}filter(rt){return!this.tag||rt(this.value)?this:De.none()}getOr(rt){return this.tag?this.value:rt}or(rt){return this.tag?this:rt}getOrThunk(rt){return this.tag?this.value:rt()}orThunk(rt){return this.tag?this:rt()}getOrDie(rt){if(this.tag)return this.value;throw new Error(rt??"Called getOrDie on None")}static from(rt){return ot(rt)?De.some(rt):De.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(rt){this.tag&&rt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const et=Array.prototype.slice,Tt=(We,rt)=>{for(let ze=0,no=We.length;ze<no;ze++){const qn=We[ze];if(rt(qn,ze))return!0}return!1},$n=(We,rt)=>{const ze=We.length,no=new Array(ze);for(let qn=0;qn<ze;qn++){const Fo=We[qn];no[qn]=rt(Fo,qn)}return no},Mt=(We,rt)=>{for(let ze=0,no=We.length;ze<no;ze++){const qn=We[ze];rt(qn,ze)}},vn=(We,rt,ze)=>(Mt(We,(no,qn)=>{ze=rt(ze,no,qn)}),ze),Cn=(We,rt,ze)=>{for(let no=0,qn=We.length;no<qn;no++){const Fo=We[no];if(rt(Fo,no))return De.some(Fo);if(ze(Fo,no))break}return De.none()},pn=(We,rt)=>Cn(We,rt,nn),un=We=>{const rt=et.call(We,0);return rt.reverse(),rt},Xe=(We,rt,ze=ft)=>We.exists(no=>ze(no,rt)),lt=(We=>rt=>rt.replace(We,""))(/^\s+|\s+$/g),U=We=>We.length>0,Ye=We=>!U(We),On=We=>{const rt=un(lt(We).split("")),ze=$n(rt,(no,qn)=>{const Fo=no.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,qn)*Fo});return vn(ze,(no,qn)=>no+qn,0)},Ot=We=>{if(We--,We<0)return"";{const rt=We%26,ze=Math.floor(We/26),no=Ot(ze),qn=String.fromCharCode(65+rt);return no+qn}},oe=We=>/^[A-Z]+$/.test(We),Yt=We=>/^[a-z]+$/.test(We),Gn=We=>/^[0-9]+$/.test(We),jt=We=>Gn(We)?2:oe(We)?0:Yt(We)?1:Ye(We)?3:4,X=We=>{switch(jt(We)){case 2:return De.some({listStyleType:De.none(),start:We});case 0:return De.some({listStyleType:De.some("upper-alpha"),start:On(We).toString()});case 1:return De.some({listStyleType:De.some("lower-alpha"),start:On(We).toString()});case 3:return De.some({listStyleType:De.none(),start:""});case 4:return De.none()}},se=We=>{const rt=parseInt(We.start,10);return Xe(We.listStyleType,"upper-alpha")?Ot(rt):Xe(We.listStyleType,"lower-alpha")?Ot(rt).toLowerCase():We.start},an=(We=>rt=>rt.options.get(We))("forced_root_block"),St=We=>/\btox\-/.test(We.className),A=We=>rt=>ot(rt)&&We.test(rt.nodeName),Mo=We=>rt=>ot(rt)&&rt.nodeName.toLowerCase()===We,st=A(/^(OL|UL|DL)$/),Wo=A(/^(TH|TD)$/),he=A(/^(LI|DT|DD)$/),de=(We,rt)=>Cn(We,st,Wo).exists(ze=>ze.nodeName===rt&&!St(ze)),bt=(We,rt)=>{const ze=We.selection.getNode();return rt({parents:We.dom.getParents(ze),element:ze}),We.on("NodeChange",rt),()=>We.off("NodeChange",rt)},cn=(We,rt)=>rt!==null&&!We.dom.isEditable(rt),fn=(We,rt)=>{const ze=We.dom.getParent(rt,"ol,ul,dl");return cn(We,ze)||!We.selection.isEditable()},Fn=Mo("ol"),ye=["OL","UL","DL"],He=ye.join(","),P=(We,rt)=>{const ze=rt||We.selection.getStart(!0);return We.dom.getParent(ze,He,ro(We,ze))},ro=(We,rt)=>{const ze=We.dom.getParents(rt,We.dom.isBlock),no=Fo=>Fo.nodeName.toLowerCase()!==an(We);return pn(ze,Fo=>no(Fo)&&Ln(We.schema,Fo)).getOr(We.getBody())},Ln=(We,rt)=>!st(rt)&&!he(rt)&&Tt(ye,ze=>We.isValidChild(rt.nodeName,ze)),oo=We=>{const rt=P(We);!Fn(rt)||fn(We,rt)||We.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:se({start:We.dom.getAttrib(rt,"start","1"),listStyleType:De.from(We.dom.getStyle(rt,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:ze=>{const no=ze.getData();X(no.start).each(qn=>{We.execCommand("mceListUpdate",!1,{attrs:{start:qn.start==="1"?"":qn.start},styles:{"list-style-type":qn.listStyleType.getOr("")}})}),ze.close()}})},ao=We=>{We.addCommand("mceListProps",()=>{oo(We)})},dr=(We,rt)=>ze=>{const no=qn=>{ze.setActive(de(qn.parents,rt)),ze.setEnabled(!fn(We,qn.element)&&We.selection.isEditable())};return ze.setEnabled(We.selection.isEditable()),bt(We,no)},Lt=We=>{const rt=ze=>()=>We.execCommand(ze);We.hasPlugin("advlist")||(We.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:rt("InsertOrderedList"),onSetup:dr(We,"OL")}),We.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:rt("InsertUnorderedList"),onSetup:dr(We,"UL")}))},po=(We,rt)=>ze=>bt(We,qn=>ze.setEnabled(de(qn.parents,rt)&&!fn(We,qn.element))),en=We=>{const rt={text:"List properties...",icon:"ordered-list",onAction:()=>We.execCommand("mceListProps"),onSetup:po(We,"OL")};We.ui.registry.addMenuItem("listprops",rt),We.ui.registry.addContextMenu("lists",{update:ze=>{const no=P(We,ze);return Fn(no)?["listprops"]:[]}})};var xe=()=>{V.add("lists",We=>(ao(We),Lt(We),en(We),ue(We)))};xe()}()),rX}var cX;function fJ(){return cX||(cX=1,mJ()),sX}fJ();var lX={},iX={},uX;function gJ(){return uX||(uX=1,function(){var V=tinymce.util.Tools.resolve("tinymce.PluginManager");const ue=(I,ee,fe)=>fe(I,ee.prototype)?!0:I.constructor?.name===ee.name,ut=I=>{const ee=typeof I;return I===null?"null":ee==="object"&&Array.isArray(I)?"array":ee==="object"&&ue(I,String,(fe,_e)=>_e.isPrototypeOf(fe))?"string":ee},ot=I=>ee=>ut(ee)===I,Nt=I=>ee=>typeof ee===I,ft=I=>ee=>I===ee,nn=ot("string"),De=ot("object"),et=ot("array"),Tt=ft(null),$n=Nt("boolean"),Mt=I=>I==null,vn=I=>!Mt(I),Cn=Nt("function"),pn=(I,ee)=>{if(et(I)){for(let fe=0,_e=I.length;fe<_e;++fe)if(!ee(I[fe]))return!1;return!0}return!1},un=()=>{},Xe=I=>()=>I,In=I=>I,lt=(I,ee)=>I===ee;class U{tag;value;static singletonNone=new U(!1);constructor(ee,fe){this.tag=ee,this.value=fe}static some(ee){return new U(!0,ee)}static none(){return U.singletonNone}fold(ee,fe){return this.tag?fe(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?U.some(ee(this.value)):U.none()}bind(ee){return this.tag?ee(this.value):U.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:U.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return vn(ee)?U.some(ee):U.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Ye=Array.prototype.indexOf,On=Array.prototype.push,Ot=(I,ee)=>Ye.call(I,ee),oe=(I,ee)=>Ot(I,ee)>-1,Yt=(I,ee)=>{const fe=I.length,_e=new Array(fe);for(let it=0;it<fe;it++){const It=I[it];_e[it]=ee(It,it)}return _e},Gn=(I,ee)=>{for(let fe=0,_e=I.length;fe<_e;fe++){const it=I[fe];ee(it,fe)}},jt=(I,ee,fe)=>(Gn(I,(_e,it)=>{fe=ee(fe,_e,it)}),fe),X=I=>{const ee=[];for(let fe=0,_e=I.length;fe<_e;++fe){if(!et(I[fe]))throw new Error("Arr.flatten item "+fe+" was not an array, input: "+I);On.apply(ee,I[fe])}return ee},se=(I,ee)=>X(Yt(I,ee)),os=(I,ee)=>ee>=0&&ee<I.length?U.some(I[ee]):U.none(),an=I=>os(I,0),St=(I,ee)=>{for(let fe=0;fe<I.length;fe++){const _e=ee(I[fe],fe);if(_e.isSome())return _e}return U.none()},A=Object.keys,Mo=Object.hasOwnProperty,st=(I,ee)=>{const fe=A(I);for(let _e=0,it=fe.length;_e<it;_e++){const It=fe[_e],Mn=I[It];ee(Mn,It)}},Wo=I=>(ee,fe)=>{I[fe]=ee},he=(I,ee,fe,_e)=>{st(I,(it,It)=>{(ee(it,It)?fe:_e)(it,It)})},de=(I,ee)=>{const fe={};return he(I,ee,Wo(fe),un),fe},bt=(I,ee)=>Mo.call(I,ee),cn=(I,ee)=>bt(I,ee)&&I[ee]!==void 0&&I[ee]!==null,fn=I=>{let ee=I;return{get:()=>ee,set:it=>{ee=it}}},Fn=(I,ee,fe=lt)=>I.exists(_e=>fe(_e,ee)),ye=I=>{const ee=[],fe=_e=>{ee.push(_e)};for(let _e=0;_e<I.length;_e++)I[_e].each(fe);return ee},He=(I,ee)=>I?U.some(ee):U.none(),P=I=>{const ee=fn(U.none()),fe=()=>ee.get().each(I);return{clear:()=>{fe(),ee.set(U.none())},isSet:()=>ee.get().isSome(),get:()=>ee.get(),set:wo=>{fe(),ee.set(U.some(wo))}}},ro=()=>{const I=P(un);return{...I,on:fe=>I.get().each(fe)}},Ln=(I,ee)=>I.substring(ee),oo=(I,ee,fe)=>ee===""||I.length>=ee.length&&I.substr(fe,fe+ee.length)===ee,ao=(I,ee)=>dr(I,ee)?Ln(I,ee.length):I,dr=(I,ee)=>oo(I,ee,0),Lt=I=>ee=>ee.options.get(I),po=I=>{const ee=I.options.register;ee("link_assume_external_targets",{processor:fe=>{const _e=nn(fe)||$n(fe);return _e?fe===!0?{value:1,valid:_e}:fe==="http"||fe==="https"?{value:fe,valid:_e}:{value:0,valid:_e}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),ee("link_context_toolbar",{processor:"boolean",default:!1}),ee("link_list",{processor:fe=>nn(fe)||Cn(fe)||pn(fe,De)}),ee("link_default_target",{processor:"string"}),ee("link_default_protocol",{processor:"string",default:"https"}),ee("link_target_list",{processor:fe=>$n(fe)||pn(fe,De),default:!0}),ee("link_rel_list",{processor:"object[]",default:[]}),ee("link_class_list",{processor:"object[]",default:[]}),ee("link_title",{processor:"boolean",default:!0}),ee("allow_unsafe_link_target",{processor:"boolean",default:!1}),ee("link_quicklink",{processor:"boolean",default:!1}),ee("link_attributes_postprocess",{processor:"function"}),ee("files_upload_handler",{processor:"function"}),ee("link_uploadtab",{processor:"boolean",default:!0})},en=Lt("link_assume_external_targets"),xe=Lt("link_context_toolbar"),We=Lt("link_list"),rt=Lt("link_default_target"),ze=Lt("link_default_protocol"),no=Lt("link_target_list"),qn=Lt("link_rel_list"),Fo=Lt("link_class_list"),el=Lt("link_title"),Oo=Lt("allow_unsafe_link_target"),Jl=Lt("link_quicklink"),jm=Lt("link_attributes_postprocess"),ha=Lt("files_upload_handler"),xo=Lt("link_uploadtab"),Ka=Lt("documents_file_types"),ms=I=>vn(I.options.get("files_upload_handler")),$s=I=>vn(I.options.get("documents_file_types"));var yu=tinymce.util.Tools.resolve("tinymce.util.URI"),kl=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),qr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ws=I=>vn(I)&&I.nodeName.toLowerCase()==="a",mr=I=>Ws(I)&&!!Ya(I),as=(I,ee)=>{if(I.collapsed)return[];{const fe=I.cloneContents(),_e=fe.firstChild,it=new kl(_e,fe),It=[];let Mn=_e;do ee(Mn)&&It.push(Mn);while(Mn=it.next());return It}},lc=I=>/^\w+:/i.test(I),Ya=I=>I.getAttribute("data-mce-href")??I.getAttribute("href")??"",Vt=(I,ee)=>{const fe=["noopener"],_e=I?I.split(/\s+/):[],it=co=>qr.trim(co.sort().join(" ")),It=co=>(co=Mn(co),co.length>0?co.concat(fe):fe),Mn=co=>co.filter(va=>qr.inArray(fe,va)===-1),wo=ee?It(_e):Mn(_e);return wo.length>0?it(wo):""},mo=I=>I.replace(/\uFEFF/g,""),Un=(I,ee)=>(ee=ee||Pt(I.selection.getRng())[0]||I.selection.getNode(),Ba(ee)?U.from(I.dom.select("a[href]",ee)[0]):U.from(I.dom.getParent(ee,"a[href]"))),ic=(I,ee)=>Un(I,ee).isSome(),Pa=(I,ee)=>{const fe=ee.fold(()=>I.getContent({format:"text"}),_e=>_e.innerText||_e.textContent||"");return mo(fe)},Pt=I=>as(I,mr),Mi=I=>qr.grep(I,mr),cs=I=>Mi(I).length>0,Pi=I=>Pt(I).length>0,uc=I=>{const ee=I.schema.getTextInlineElements(),fe=It=>It.nodeType===1&&!Ws(It)&&!bt(ee,It.nodeName.toLowerCase());if(Un(I).exists(It=>It.hasAttribute("data-mce-block")))return!1;const it=I.selection.getRng();return it.collapsed?!0:as(it,fe).length===0},Ba=I=>vn(I)&&I.nodeName==="FIGURE"&&/\bimage\b/i.test(I.className),Zo=I=>new Promise((ee,fe)=>{const _e=new FileReader;_e.onload=()=>{ee(_e.result)},_e.onerror=()=>{fe(new Error(_e.error?.message??"Failed to convert blob to a data url"))},_e.readAsDataURL(I)}),kn=I=>jt(["title","rel","class","target"],(fe,_e)=>(I[_e].each(it=>{fe[_e]=it.length>0?it:null}),fe),{href:I.href}),Go=(I,ee)=>(ee==="http"||ee==="https")&&!lc(I)?ee+"://"+I:I,ad=(I,ee)=>{const fe={...ee};if(qn(I).length===0&&!Oo(I)){const _e=Vt(fe.rel,fe.target==="_blank");fe.rel=_e||null}return U.from(fe.target).isNone()&&no(I)===!1&&(fe.target=rt(I)),fe.href=Go(fe.href,en(I)),fe},Cu=(I,ee,fe,_e)=>{fe.each(It=>{bt(ee,"innerText")?ee.innerText=It:ee.textContent=It}),I.dom.setAttribs(ee,_e);const it=I.dom.createRng();it.setStartAfter(ee),it.setEndAfter(ee),I.selection.setRng(it)},tl=(I,ee,fe,_e)=>{const it=I.dom;Ba(ee)?cd(it,ee,_e):fe.fold(()=>{I.execCommand("mceInsertLink",!1,_e);const It=I.selection.getEnd(),Mn=it.createRng();Mn.setStartAfter(It),Mn.setEndAfter(It),I.selection.setRng(Mn)},It=>{I.insertContent(it.createHTML("a",_e,it.encode(It)))})},Wt=(I,ee,fe)=>{const _e=I.selection.getNode(),it=Un(I,_e),It=ad(I,kn(fe)),Mn=jm(I);vn(Mn)&&Mn(It),I.undoManager.transact(()=>{fe.href===ee.href&&ee.attach(),it.fold(()=>{tl(I,_e,fe.text,It)},wo=>{I.focus(),Cu(I,wo,fe.text,It)})})},$a=I=>{const ee=I.dom,fe=I.selection,_e=fe.getBookmark(),it=fe.getRng().cloneRange(),It=ee.getParent(it.startContainer,"a[href]",I.getBody()),Mn=ee.getParent(it.endContainer,"a[href]",I.getBody());It&&it.setStartBefore(It),Mn&&it.setEndAfter(Mn),fe.setRng(it),I.execCommand("unlink"),fe.moveToBookmark(_e)},Dr=I=>{I.undoManager.transact(()=>{const ee=I.selection.getNode();Ba(ee)?Bi(I,ee):$a(I),I.focus()})},Wm=I=>{const{class:ee,href:fe,rel:_e,target:it,text:It,title:Mn}=I;return de({class:ee.getOrNull(),href:fe,rel:_e.getOrNull(),target:it.getOrNull(),text:It.getOrNull(),title:Mn.getOrNull()},(wo,co)=>Tt(wo)===!1)},Sr=(I,ee)=>{const fe=I.options.get,_e={allow_html_data_urls:fe("allow_html_data_urls"),allow_script_urls:fe("allow_script_urls"),allow_svg_data_urls:fe("allow_svg_data_urls")},it=ee.href;return{...ee,href:yu.isDomSafe(it,"a",_e)?it:""}},Qd=(I,ee,fe)=>{const _e=Sr(I,fe);I.hasPlugin("rtc",!0)?I.execCommand("createlink",!1,Wm(_e)):Wt(I,ee,_e)},ss=I=>{I.hasPlugin("rtc",!0)?I.execCommand("unlink"):Dr(I)},Bi=(I,ee)=>{const fe=I.dom.select("img",ee)[0];if(fe){const _e=I.dom.getParents(fe,"a[href]",ee)[0];_e&&(_e.parentNode?.insertBefore(fe,_e),I.dom.remove(_e))}},cd=(I,ee,fe)=>{const _e=I.select("img",ee)[0];if(_e){const it=I.create("a",fe);_e.parentNode?.insertBefore(it,_e),it.appendChild(_e)}},ei=I=>nn(I.value)?I.value:"",Mc=I=>nn(I.text)?I.text:nn(I.title)?I.title:"",or=(I,ee)=>{const fe=[];return qr.each(I,_e=>{const it=Mc(_e);if(_e.menu!==void 0){const It=or(_e.menu,ee);fe.push({text:it,items:It})}else{const It=ee(_e);fe.push({text:it,value:It})}}),fe},$i=(I=ei)=>ee=>U.from(ee).map(fe=>or(fe,I)),Xa={sanitize:I=>$i(ei)(I),sanitizeWith:$i,createUi:(I,ee)=>fe=>({name:I,type:"listbox",label:ee,items:fe}),getValue:ei},Su=I=>cn(I,"items"),Al=(I,ee)=>St(ee,fe=>Su(fe)?Al(I,fe.items):He(fe.value===I,fe)),zo=(I,ee,fe,_e)=>{const it=_e[ee],It=I.length>0;return it!==void 0?Al(it,fe).map(Mn=>({url:{value:Mn.value,meta:{text:It?I:Mn.text,attach:un}},text:It?I:Mn.text})):U.none()},ld=(I,ee)=>ee==="link"?I.link:ee==="anchor"?I.anchor:U.none(),Qs={init:(I,ee)=>{const fe={text:I.text,title:I.title},_e=co=>He(fe.title.length<=0,U.from(co.meta?.title).getOr("")),it=co=>He(fe.text.length<=0,U.from(co.meta?.text).getOr(co.value)),It=co=>{const va=it(co.url),Zs=_e(co.url);return va.isSome()||Zs.isSome()?U.some({...va.map(Tu=>({text:Tu})).getOr({}),...Zs.map(Tu=>({title:Tu})).getOr({})}):U.none()},Mn=(co,va)=>{const Zs=ld(ee,va).getOr([]);return zo(fe.text,va,Zs,co)};return{onChange:(co,va)=>{const Zs=va.name;return Zs==="url"?It(co()):oe(["anchor","link"],Zs)?Mn(co(),Zs):((Zs==="text"||Zs==="title")&&(fe[Zs]=co()[Zs]),U.none())}}},getDelta:zo};var _l=tinymce.util.Tools.resolve("tinymce.util.Delay");const id=(I,ee,fe)=>{const _e=I.selection.getRng();_l.setEditorTimeout(I,()=>{I.windowManager.confirm(ee,it=>{I.selection.setRng(_e),fe(it)})})},Ia=I=>{const ee=I.href;return ee.indexOf("@")>0&&ee.indexOf("/")===-1&&ee.indexOf("mailto:")===-1?U.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:_e=>({..._e,href:"mailto:"+ee})}):U.none()},Br=(I,ee)=>fe=>{const _e=fe.href;return I===1&&!lc(_e)||I===0&&/^\s*www(\.|\d\.)/i.test(_e)?U.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${ee}:// prefix?`,preprocess:It=>({...It,href:ee+"://"+_e})}):U.none()},$r={preprocess:(I,ee)=>St([Ia,Br(en(I),ze(I))],fe=>fe(ee)).fold(()=>Promise.resolve(ee),fe=>new Promise(_e=>{id(I,fe.message,it=>{_e(it?fe.preprocess(ee):ee)})}))},Jd={getAnchors:I=>{const ee=I.dom.select("a:not([href])"),fe=se(ee,_e=>{const it=_e.name||_e.id;return it?[{text:it,value:"#"+it}]:[]});return fe.length>0?U.some([{text:"None",value:""}].concat(fe)):U.none()}},Ol={getClasses:I=>{const ee=Fo(I);return ee.length>0?Xa.sanitize(ee):U.none()}},ti=I=>{try{return U.some(JSON.parse(I))}catch{return U.none()}},_s={getLinks:I=>{const ee=_e=>I.convertURL(_e.value||_e.url||"","href"),fe=We(I);return new Promise(_e=>{nn(fe)?fetch(fe).then(it=>it.ok?it.text().then(ti):Promise.reject()).then(_e,()=>_e(U.none())):Cn(fe)?fe(it=>_e(U.some(it))):_e(U.from(fe))}).then(_e=>_e.bind(Xa.sanitizeWith(ee)).map(it=>it.length>0?[{text:"None",value:""}].concat(it):it))}},Kr={getRels:(I,ee)=>{const fe=qn(I);if(fe.length>0){const _e=Fn(ee,"_blank"),it=Oo(I)===!1,It=wo=>Vt(Xa.getValue(wo),_e);return(it?Xa.sanitizeWith(It):Xa.sanitize)(fe)}return U.none()}},Yr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],em={getTargets:I=>{const ee=no(I);return et(ee)?Xa.sanitize(ee).orThunk(()=>U.some(Yr)):ee===!1?U.none():U.some(Yr)}},Ii=(I,ee,fe)=>{const _e=I.getAttrib(ee,fe);return _e!==null&&_e.length>0?U.some(_e):U.none()},fs=(I,ee)=>{const fe=I.dom,it=uc(I)?U.some(Pa(I.selection,ee)):U.none(),It=ee.bind(Zs=>U.from(fe.getAttrib(Zs,"href"))),Mn=ee.bind(Zs=>U.from(fe.getAttrib(Zs,"target"))),wo=ee.bind(Zs=>Ii(fe,Zs,"rel")),co=ee.bind(Zs=>Ii(fe,Zs,"class")),va=ee.bind(Zs=>Ii(fe,Zs,"title"));return{url:It,text:it,title:va,target:Mn,rel:wo,linkClass:co}},ol={collect:(I,ee)=>_s.getLinks(I).then(fe=>{const _e=ms(I)&&$s(I)&&xo(I),it=fs(I,ee);return{anchor:it,catalogs:{targets:em.getTargets(I),rels:Kr.getRels(I,it.target),classes:Ol.getClasses(I),anchor:Jd.getAnchors(I),link:fe},hasUploadPanel:_e,optNode:ee,flags:{titleEnabled:el(I)}}})},vt={makeTab:I=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput",buttonLabel:"Browse for a file",dropAreaLabel:"Drop a file here",allowedFileTypes:I.map(fe=>fe.mimeType).join(","),allowedFileExtensions:X(I.map(fe=>fe.extensions))}]})},oi=(I,ee)=>fe=>{const _e=fe.getData();if(!_e.url.value){ss(I),fe.close();return}const it=wo=>U.from(_e[wo]).filter(co=>!Fn(ee.anchor[wo],co)),It={href:_e.url.value,text:it("text"),target:it("target"),rel:it("rel"),class:it("linkClass"),title:it("title")},Mn={href:_e.url.value,attach:_e.url.meta!==void 0&&_e.url.meta.attach?_e.url.meta.attach:un};$r.preprocess(I,It).then(wo=>{Qd(I,Mn,wo)}),fe.close()},pa=I=>(ee,fe)=>ha(I)(ee,fe),Bc=I=>U.from(I.split(",")[1]).getOr(""),Is=(I,ee)=>{const fe=ee.getData();ee.block("Uploading file"),an(fe.fileinput).fold(()=>{ee.unblock()},_e=>{const it=URL.createObjectURL(_e),It=({url:wo,fileName:co})=>{ee.setData({text:co,title:co,url:{value:wo,meta:{}}}),ee.showTab("general"),ee.focus("url")},Mn=()=>{ee.unblock(),URL.revokeObjectURL(it)};Zo(_e).then(wo=>{const co=I.getExistingBlobInfo(Bc(wo),_e.type),va=co&&co.filename()===_e.name?co:I.createBlobCache(_e,it,wo);return I.addToBlobCache(va),I.uploadFile(va,In)}).then(wo=>{It(wo),Mn()}).catch(wo=>{Mn(),I.alertErr(wo,()=>{ee.focus("fileinput")})})})},eg=I=>(ee,fe,_e)=>I.editorUpload.blobCache.create({blob:ee,blobUri:fe,name:ee.name?.replace(/\.[^\.]+$/,""),filename:ee.name,base64:_e.split(",")[1]}),Qa=I=>ee=>{I.editorUpload.blobCache.add(ee)},$c=I=>(ee,fe)=>I.editorUpload.blobCache.getByData(ee,fe),Gm=I=>(ee,fe)=>{I.windowManager.alert(ee,fe)},tg=I=>{const ee=Un(I);return ol.collect(I,ee)},si=(I,ee)=>{const fe=I.anchor,_e=fe.url.getOr("");return{url:{value:_e,meta:{original:{value:_e}}},text:fe.text.getOr(""),title:fe.title.getOr(""),anchor:_e,link:_e,rel:fe.rel.getOr(""),target:fe.target.or(ee).getOr(""),linkClass:fe.linkClass.getOr(""),fileinput:[]}},ng=(I,ee,fe,_e,it,It)=>{const Mn=X([I,ee,fe,ye([_e.anchor.map(Xa.createUi("anchor","Anchors")),_e.rels.map(Xa.createUi("rel","Rel")),_e.targets.map(Xa.createUi("target","Open link in...")),_e.link.map(Xa.createUi("link","Link list")),_e.classes.map(Xa.createUi("linkClass","Class"))])]);return it?{type:"tabpanel",tabs:X([[{title:"General",name:"general",items:Mn}],[vt.makeTab(It)]])}:{type:"panel",items:Mn}},wu=(I,ee,fe)=>{const _e=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],it=I.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),It=I.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Mn=U.from(rt(fe)),wo=si(I,Mn),co=I.catalogs,va=Qs.init(wo,co),Zs=ng(_e,it,It,co,I.hasUploadPanel,Ka(fe)),Tu={addToBlobCache:Qa(fe),createBlobCache:eg(fe),alertErr:Gm(fe),uploadFile:pa(fe),getExistingBlobInfo:$c(fe)};return{title:"Insert/Edit Link",size:"normal",body:Zs,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:wo,onChange:(qm,{name:nm})=>{nm==="fileinput"?Is(Tu,qm):va.onChange(qm.getData,{name:nm}).each(Rl=>{qm.setData(Rl)})},onSubmit:ee}},ri=I=>{tg(I).then(fe=>{const _e=oi(I,fe);return wu(fe,_e,I)}).then(fe=>{I.windowManager.open(fe)})},Eu=I=>{I.addCommand("mceLink",(ee,fe)=>{fe?.dialog===!0||!Jl(I)?ri(I):I.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},at=I=>{I.addShortcut("Meta+K","",()=>{I.execCommand("mceLink")})};var Fi=tinymce.util.Tools.resolve("tinymce.util.VK");const tm=(I,ee)=>{document.body.appendChild(I),I.dispatchEvent(ee),document.body.removeChild(I)},sl=I=>{const ee=document.createElement("a");ee.target="_blank",ee.href=I,ee.rel="noreferrer noopener";const fe=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(fe),tm(ee,fe)},mc=I=>I.altKey===!0&&I.shiftKey===!1&&I.ctrlKey===!1&&I.metaKey===!1,ud=(I,ee)=>{if(ee){const fe=Ya(ee);if(/^#/.test(fe)){const _e=I.dom.select(`${fe},[name="${ao(fe,"#")}"]`);_e.length&&I.selection.scrollIntoView(_e[0],!0)}else sl(ee.href)}},ba=I=>{const ee=I.selection.getRng(),fe=ee.startContainer;return mr(fe)&&ee.startContainer===ee.endContainer&&I.dom.select("img",fe).length===1},Dl=(I,ee)=>{const fe=Mi(I.dom.getParents(ee));return He(fe.length===1,fe[0])},Li=I=>{const ee=Pt(I.selection.getRng());return He(ee.length>0,ee[0]).or(Dl(I,I.selection.getNode()))},ai=I=>I.selection.isCollapsed()||ba(I)?Dl(I,I.selection.getStart()):Li(I),Vo=I=>{const ee=ro(),fe=()=>ee.get().or(ai(I)),_e=()=>fe().each(it=>ud(I,it));return I.on("contextmenu",it=>{Dl(I,it.target).each(ee.set)}),I.on("SelectionChange",()=>{ee.isSet()||ai(I).each(ee.set)}),I.on("click",it=>{ee.clear();const It=Mi(I.dom.getParents(it.target));It.length===1&&Fi.metaKeyPressed(it)&&(it.preventDefault(),ud(I,It[0]))}),I.on("keydown",it=>{ee.clear(),!it.isDefaultPrevented()&&it.keyCode===13&&mc(it)&&fe().each(It=>{it.preventDefault(),ud(I,It)})}),{gotoSelectedLink:_e}},dd=I=>()=>{I.execCommand("mceLink",!1,{dialog:!0})},B=(I,ee)=>(I.on("NodeChange",ee),()=>I.off("NodeChange",ee)),G=I=>ee=>{const fe=()=>{ee.setActive(!I.mode.isReadOnly()&&ic(I,I.selection.getNode())),ee.setEnabled(I.selection.isEditable())};return fe(),B(I,fe)},re=I=>ee=>{const fe=()=>{ee.setEnabled(I.selection.isEditable())};return fe(),B(I,fe)},Pe=I=>ee=>{const fe=It=>cs(It)||Pi(I.selection.getRng()),_e=I.dom.getParents(I.selection.getStart()),it=It=>{ee.setEnabled(fe(It)&&I.selection.isEditable())};return it(_e),B(I,It=>it(It.parents))},Ht=(I,ee)=>{I.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:dd(I),onSetup:G(I)}),I.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ee.gotoSelectedLink,onSetup:Pe(I)}),I.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>ss(I),onSetup:Pe(I)})},Jn=(I,ee)=>{I.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ee.gotoSelectedLink,onSetup:Pe(I)}),I.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:dd(I),onSetup:re(I)}),I.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>ss(I),onSetup:Pe(I)})},Uo=I=>{const ee="link unlink openlink",fe="link";I.ui.registry.addContextMenu("link",{update:_e=>I.dom.isEditable(_e)?cs(I.dom.getParents(_e,"a"))?ee:fe:""})},wr=(I,ee)=>{const fe=It=>{It.selection.collapse(!1)},_e=It=>{const Mn=I.selection.getNode();return It.setEnabled(ic(I,Mn)&&I.selection.isEditable()),un},it=It=>{const Mn=Un(I),wo=uc(I);if(Mn.isNone()&&wo){const co=Pa(I.selection,Mn);return He(co.length===0,It)}else return U.none()};I.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:G(I)},label:"Link",predicate:It=>xe(I)&&ic(I,It),initValue:()=>Un(I).fold(Xe(""),Ya),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:It=>{const Mn=I.selection.getNode();return It.setActive(ic(I,Mn)),G(I)(It)},onAction:It=>{const Mn=It.getValue(),wo=it(Mn);Qd(I,{href:Mn,attach:un},{href:Mn,text:wo,title:U.none(),rel:U.none(),target:U.from(rt(I)),class:U.none()}),fe(I),It.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:_e,onAction:It=>{ss(I),It.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:_e,onAction:It=>{ee.gotoSelectedLink(),It.hide()}}]})},Xr=I=>{const ee=Vo(I);Ht(I,ee),Jn(I,ee),Uo(I),wr(I,ee)};var Ja=()=>{V.add("link",I=>{po(I),Eu(I),Xr(I),at(I)})};Ja()}()),iX}var dX;function hJ(){return dX||(dX=1,gJ()),lX}hJ();var mX={},fX={},gX;function pJ(){return gX||(gX=1,function(){var V=tinymce.util.Tools.resolve("tinymce.PluginManager");const ue=Object.getPrototypeOf,ut=(B,G,re)=>re(B,G.prototype)?!0:B.constructor?.name===G.name,ot=B=>{const G=typeof B;return B===null?"null":G==="object"&&Array.isArray(B)?"array":G==="object"&&ut(B,String,(re,Pe)=>Pe.isPrototypeOf(re))?"string":G},Nt=B=>G=>ot(G)===B,ft=B=>G=>typeof G===B,nn=B=>G=>B===G,De=(B,G)=>Tt(B)&&ut(B,G,(re,Pe)=>ue(re)===Pe),et=Nt("string"),Tt=Nt("object"),$n=B=>De(B,Object),Mt=Nt("array"),vn=nn(null),Cn=ft("boolean"),pn=B=>B==null,un=B=>!pn(B),Xe=ft("function"),In=ft("number"),lt=(B,G)=>{if(Mt(B)){for(let re=0,Pe=B.length;re<Pe;++re)if(!G(B[re]))return!1;return!0}return!1},U=()=>{};class Ye{tag;value;static singletonNone=new Ye(!1);constructor(G,re){this.tag=G,this.value=re}static some(G){return new Ye(!0,G)}static none(){return Ye.singletonNone}fold(G,re){return this.tag?re(this.value):G()}isSome(){return this.tag}isNone(){return!this.tag}map(G){return this.tag?Ye.some(G(this.value)):Ye.none()}bind(G){return this.tag?G(this.value):Ye.none()}exists(G){return this.tag&&G(this.value)}forall(G){return!this.tag||G(this.value)}filter(G){return!this.tag||G(this.value)?this:Ye.none()}getOr(G){return this.tag?this.value:G}or(G){return this.tag?this:G}getOrThunk(G){return this.tag?this.value:G()}orThunk(G){return this.tag?this:G()}getOrDie(G){if(this.tag)return this.value;throw new Error(G??"Called getOrDie on None")}static from(G){return un(G)?Ye.some(G):Ye.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(G){this.tag&&G(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const On=Array.prototype.push,Ot=B=>{const G=[];for(let re=0,Pe=B.length;re<Pe;++re){if(!Mt(B[re]))throw new Error("Arr.flatten item "+re+" was not an array, input: "+B);On.apply(G,B[re])}return G},oe=(B,G)=>G>=0&&G<B.length?Ye.some(B[G]):Ye.none(),Yt=B=>oe(B,0),Gn=(B,G)=>{for(let re=0;re<B.length;re++){const Pe=G(B[re],re);if(Pe.isSome())return Pe}return Ye.none()},jt=Object.keys,X=Object.hasOwnProperty,se=(B,G)=>{const re=jt(B);for(let Pe=0,Ht=re.length;Pe<Ht;Pe++){const Jn=re[Pe],Uo=B[Jn];G(Uo,Jn)}},os=B=>(G,re)=>{B[re]=G},an=(B,G,re,Pe)=>{se(B,(Ht,Jn)=>{(G(Ht,Jn)?re:Pe)(Ht,Jn)})},St=(B,G)=>{const re={};return an(B,G,os(re),U),re},A=(B,G)=>X.call(B,G),Mo=(B,G)=>A(B,G)&&B[G]!==void 0&&B[G]!==null,he=(B=>(...G)=>{if(G.length===0)throw new Error("Can't merge zero objects");const re={};for(let Pe=0;Pe<G.length;Pe++){const Ht=G[Pe];for(const Jn in Ht)A(Ht,Jn)&&(re[Jn]=B(re[Jn],Ht[Jn]))}return re})((B,G)=>$n(B)&&$n(G)?he(B,G):G),de=B=>B.length>0,bt=(B,G)=>{const Pe=(G||document).createElement("div");if(Pe.innerHTML=B,!Pe.hasChildNodes()||Pe.childNodes.length>1){const Ht="HTML does not have a single root node";throw console.error(Ht,B),new Error(Ht)}return Fn(Pe.childNodes[0])},cn=(B,G)=>{const Pe=(G||document).createElement(B);return Fn(Pe)},fn=(B,G)=>{const Pe=(G||document).createTextNode(B);return Fn(Pe)},Fn=B=>{if(B==null)throw new Error("Node cannot be null or undefined");return{dom:B}},He={fromHtml:bt,fromTag:cn,fromText:fn,fromDom:Fn,fromPoint:(B,G,re)=>Ye.from(B.dom.elementFromPoint(G,re)).map(Fn)},P=(B,G,re)=>{if(et(re)||Cn(re)||In(re))B.setAttribute(G,re+"");else throw console.error("Invalid call to Attribute.set. Key ",G,":: Value ",re,":: Element ",B),new Error("Attribute value was not simple")},ro=(B,G,re)=>{P(B.dom,G,re)},Ln=(B,G)=>{B.dom.removeAttribute(G)};var oo=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ao=tinymce.util.Tools.resolve("tinymce.util.URI");const dr=B=>G=>G.options.get(B),Lt=B=>{const G=B.options.register;G("image_dimensions",{processor:"boolean",default:!0}),G("image_advtab",{processor:"boolean",default:!1}),G("image_uploadtab",{processor:"boolean",default:!0}),G("image_prepend_url",{processor:"string",default:""}),G("image_class_list",{processor:"object[]"}),G("image_description",{processor:"boolean",default:!0}),G("image_title",{processor:"boolean",default:!1}),G("image_caption",{processor:"boolean",default:!1}),G("image_list",{processor:re=>{const Pe=re===!1||et(re)||lt(re,Tt)||Xe(re);return Pe?{value:re,valid:Pe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},po=dr("image_dimensions"),en=dr("image_advtab"),xe=dr("image_uploadtab"),We=dr("image_prepend_url"),rt=dr("image_class_list"),ze=dr("image_description"),no=dr("image_title"),qn=dr("image_caption"),Fo=dr("image_list"),el=dr("a11y_advanced_options"),Oo=dr("automatic_uploads"),Jl=B=>de(B.options.get("images_upload_url")),jm=B=>un(B.options.get("images_upload_handler")),ha=(B,G)=>Math.max(parseInt(B,10),parseInt(G,10)),xo=B=>new Promise(G=>{const re=document.createElement("img"),Pe=Jn=>{re.parentNode&&re.parentNode.removeChild(re),G(Jn)};re.addEventListener("load",()=>{const Jn=ha(re.width,re.clientWidth),Uo=ha(re.height,re.clientHeight),wr={width:Jn,height:Uo};Pe(Promise.resolve(wr))}),re.addEventListener("error",()=>{Pe(Promise.reject(`Failed to get image dimensions for: ${B}`))});const Ht=re.style;Ht.visibility="hidden",Ht.position="fixed",Ht.bottom=Ht.left="0px",Ht.width=Ht.height="auto",document.body.appendChild(re),re.src=B}),Ka=B=>(B&&(B=B.replace(/px$/,"")),B),ms=B=>(B.length>0&&/^[0-9]+$/.test(B)&&(B+="px"),B),$s=B=>{if(B.margin){const G=String(B.margin).split(" ");switch(G.length){case 1:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[0],B["margin-bottom"]=B["margin-bottom"]||G[0],B["margin-left"]=B["margin-left"]||G[0];break;case 2:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[1],B["margin-bottom"]=B["margin-bottom"]||G[0],B["margin-left"]=B["margin-left"]||G[1];break;case 3:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[1],B["margin-bottom"]=B["margin-bottom"]||G[2],B["margin-left"]=B["margin-left"]||G[1];break;case 4:B["margin-top"]=B["margin-top"]||G[0],B["margin-right"]=B["margin-right"]||G[1],B["margin-bottom"]=B["margin-bottom"]||G[2],B["margin-left"]=B["margin-left"]||G[3]}delete B.margin}return B},yu=(B,G)=>{const re=Fo(B);et(re)?fetch(re).then(Pe=>{Pe.ok&&Pe.json().then(G)}):Xe(re)?re(G):G(re)},kl=(B,G,re)=>{const Pe=()=>{re.onload=re.onerror=null,B.selection&&(B.selection.select(re),B.nodeChanged())};re.onload=()=>{!G.width&&!G.height&&po(B)&&B.dom.setAttribs(re,{width:String(re.clientWidth),height:String(re.clientHeight)}),Pe()},re.onerror=Pe},qr=B=>new Promise((G,re)=>{const Pe=new FileReader;Pe.onload=()=>{G(Pe.result)},Pe.onerror=()=>{re(Pe.error?.message)},Pe.readAsDataURL(B)}),Ws=B=>B.nodeName==="IMG"&&(B.hasAttribute("data-mce-object")||B.hasAttribute("data-mce-placeholder")),mr=(B,G)=>{const re=B.options.get;return ao.isDomSafe(G,"img",{allow_html_data_urls:re("allow_html_data_urls"),allow_script_urls:re("allow_script_urls"),allow_svg_data_urls:re("allow_svg_data_urls")})},as=oo.DOM,lc=B=>B.style.marginLeft&&B.style.marginRight&&B.style.marginLeft===B.style.marginRight?Ka(B.style.marginLeft):"",Ya=B=>B.style.marginTop&&B.style.marginBottom&&B.style.marginTop===B.style.marginBottom?Ka(B.style.marginTop):"",Vt=B=>B.style.borderWidth?Ka(B.style.borderWidth):"",mo=(B,G)=>B.hasAttribute(G)?B.getAttribute(G)??"":"",Un=B=>B.parentNode!==null&&B.parentNode.nodeName==="FIGURE",ic=(B,G,re)=>{re===""||re===null?B.removeAttribute(G):B.setAttribute(G,re)},Pa=B=>{const G=as.create("figure",{class:"image"});as.insertAfter(G,B),G.appendChild(B),G.appendChild(as.create("figcaption",{contentEditable:"true"},"Caption")),G.contentEditable="false"},Pt=B=>{const G=B.parentNode;un(G)&&(as.insertAfter(B,G),as.remove(G))},Mi=B=>{Un(B)?Pt(B):Pa(B)},cs=(B,G)=>{const re=B.getAttribute("style"),Pe=G(re!==null?re:"");Pe.length>0?(B.setAttribute("style",Pe),B.setAttribute("data-mce-style",Pe)):B.removeAttribute("style")},Pi=(B,G)=>(re,Pe,Ht)=>{const Jn=re.style;Jn[Pe]?(Jn[Pe]=ms(Ht),cs(re,G)):ic(re,Pe,Ht)},uc=(B,G)=>B.style[G]?Ka(B.style[G]):mo(B,G),Ba=(B,G)=>{const re=ms(G);B.style.marginLeft=re,B.style.marginRight=re},Zo=(B,G)=>{const re=ms(G);B.style.marginTop=re,B.style.marginBottom=re},kn=(B,G)=>{const re=ms(G);B.style.borderWidth=re},Go=(B,G)=>{B.style.borderStyle=G},ad=B=>B.style.borderStyle??"",Cu=B=>un(B)&&B.nodeName==="FIGURE",tl=B=>B.nodeName==="IMG",Wt=B=>{const G=as.getAttrib(B,"alt"),re=as.getAttrib(B,"role");return B.hasAttribute("alt")&&G.length===0||re==="presentation"||re==="none"},$a=B=>Wt(B)?"":mo(B,"alt"),Dr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Wm=(B,G)=>{const re=document.createElement("img");return ic(re,"style",G.style),(lc(re)||G.hspace!=="")&&Ba(re,G.hspace),(Ya(re)||G.vspace!=="")&&Zo(re,G.vspace),(Vt(re)||G.border!=="")&&kn(re,G.border),(ad(re)||G.borderStyle!=="")&&Go(re,G.borderStyle),B(re.getAttribute("style")??"")},Sr=(B,G)=>{const re=document.createElement("img");if(Mc(B,{...G,caption:!1},re),Bi(re,G.alt,G.isDecorative),G.caption){const Pe=as.create("figure",{class:"image"});return Pe.appendChild(re),Pe.appendChild(as.create("figcaption",{contentEditable:"true"},"Caption")),Pe.contentEditable="false",Pe}else return re},Qd=(B,G)=>({src:mo(G,"src"),alt:$a(G),title:mo(G,"title"),width:uc(G,"width"),height:uc(G,"height"),class:mo(G,"class"),style:B(mo(G,"style")),caption:Un(G),hspace:lc(G),vspace:Ya(G),border:Vt(G),borderStyle:ad(G),isDecorative:Wt(G)}),ss=(B,G,re,Pe,Ht)=>{re[Pe]!==G[Pe]&&Ht(B,Pe,String(re[Pe]))},Bi=(B,G,re)=>{if(re){as.setAttrib(B,"role","presentation");const Pe=He.fromDom(B);ro(Pe,"alt","")}else{if(vn(G)){const Pe=He.fromDom(B);Ln(Pe,"alt")}else{const Pe=He.fromDom(B);ro(Pe,"alt",G)}as.getAttrib(B,"role")==="presentation"&&as.setAttrib(B,"role","")}},cd=(B,G,re)=>{(re.alt!==G.alt||re.isDecorative!==G.isDecorative)&&Bi(B,re.alt,re.isDecorative)},ei=(B,G)=>(re,Pe,Ht)=>{B(re,Ht),cs(re,G)},Mc=(B,G,re)=>{const Pe=Qd(B,re);ss(re,Pe,G,"caption",(Ht,Jn,Uo)=>Mi(Ht)),ss(re,Pe,G,"src",ic),ss(re,Pe,G,"title",ic),ss(re,Pe,G,"width",Pi("width",B)),ss(re,Pe,G,"height",Pi("height",B)),ss(re,Pe,G,"class",ic),ss(re,Pe,G,"style",ei((Ht,Jn)=>ic(Ht,"style",Jn),B)),ss(re,Pe,G,"hspace",ei(Ba,B)),ss(re,Pe,G,"vspace",ei(Zo,B)),ss(re,Pe,G,"border",ei(kn,B)),ss(re,Pe,G,"borderStyle",ei(Go,B)),cd(re,Pe,G)},or=(B,G)=>{const re=B.dom.styles.parse(G),Pe=$s(re),Ht=B.dom.styles.parse(B.dom.styles.serialize(Pe));return B.dom.styles.serialize(Ht)},$i=B=>{const G=B.selection.getNode(),re=B.dom.getParent(G,"figure.image");return re?B.dom.select("img",re)[0]:G&&(G.nodeName!=="IMG"||Ws(G))?null:G},xu=(B,G)=>{const re=B.dom,Pe=St(B.schema.getTextBlockElements(),(Jn,Uo)=>!B.schema.isValidChild(Uo,"figure")),Ht=re.getParent(G.parentNode,Jn=>Mo(Pe,Jn.nodeName),B.getBody());return Ht?re.split(Ht,G)??G:G},Ct=B=>{const G=$i(B);return G?Qd(re=>or(B,re),G):Dr()},Xa=(B,G)=>{const re=Sr(Ht=>or(B,Ht),G);B.dom.setAttrib(re,"data-mce-id","__mcenew"),B.focus(),B.insertContent(re.outerHTML);const Pe=B.dom.select('*[data-mce-id="__mcenew"]')[0];if(B.dom.setAttrib(Pe,"data-mce-id",null),Cu(Pe)){const Ht=xu(B,Pe);B.selection.select(Ht)}else B.selection.select(Pe)},Su=(B,G)=>{B.dom.setAttrib(G,"src",G.getAttribute("src"))},Al=(B,G)=>{if(G){const re=B.dom.is(G.parentNode,"figure.image")?G.parentNode:G;B.dom.remove(re),B.focus(),B.nodeChanged(),B.dom.isEmpty(B.getBody())&&(B.setContent(""),B.selection.setCursorLocation())}},zo=(B,G)=>{const re=$i(B);if(re)if(Mc(Pe=>or(B,Pe),G,re),Su(B,re),Cu(re.parentNode)){B.dom.setStyle(re,"float","");const Pe=re.parentNode;xu(B,Pe),B.selection.select(re.parentNode)}else B.selection.select(re),kl(B,G,re)},ld=(B,G)=>{const re=G.src;return{...G,src:mr(B,re)?re:""}},dc=(B,G)=>{const re=$i(B);if(re){const Ht={...Qd(Uo=>or(B,Uo),re),...G},Jn=ld(B,Ht);Ht.src?zo(B,Jn):Al(B,re)}else G.src&&Xa(B,{...Dr(),...G})};var Qs=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),_l=tinymce.util.Tools.resolve("tinymce.util.Tools");const id=B=>et(B.value)?B.value:"",Ia=B=>et(B.text)?B.text:et(B.title)?B.title:"",Br=(B,G)=>{const re=[];return _l.each(B,Pe=>{const Ht=Ia(Pe);if(Pe.menu!==void 0){const Jn=Br(Pe.menu,G);re.push({text:Ht,items:Jn})}else{const Jn=G(Pe);re.push({text:Ht,value:Jn})}}),re},nl=(B=id)=>G=>G?Ye.from(G).map(re=>Br(re,B)):Ye.none(),$r=B=>nl(id)(B),fh=B=>A(B,"items"),Jd=(B,G)=>Gn(B,re=>fh(re)?Jd(re.items,G):re.value===G?Ye.some(re):Ye.none()),Ol={sanitizer:nl,sanitize:$r,findEntry:(B,G)=>B.bind(re=>Jd(re,G))},Zm={makeTab:B=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},_s=B=>{const G=Ol.sanitizer(Mn=>B.convertURL(Mn.value||Mn.url||"","src")),re=new Promise(Mn=>{yu(B,wo=>{Mn(G(wo).map(co=>Ot([[{text:"None",value:""}],co])))})}),Pe=Ol.sanitize(rt(B)),Ht=en(B),Jn=xe(B),Uo=Jl(B),wr=jm(B),Xr=Ct(B),Ja=ze(B),I=no(B),ee=po(B),fe=qn(B),_e=el(B),it=Oo(B),It=Ye.some(We(B)).filter(Mn=>et(Mn)&&Mn.length>0);return re.then(Mn=>({image:Xr,imageList:Mn,classList:Pe,hasAdvTab:Ht,hasUploadTab:Jn,hasUploadUrl:Uo,hasUploadHandler:wr,hasDescription:Ja,hasImageTitle:I,hasDimensions:ee,hasImageCaption:fe,prependURL:It,hasAccessibilityOptions:_e,automaticUploads:it}))},hn=B=>{const G={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},re=B.imageList.map(I=>({name:"images",type:"listbox",label:"Image list",items:I})),Pe={name:"alt",type:"input",label:"Alternative description",enabled:!(B.hasAccessibilityOptions&&B.image.isDecorative)},Ht={name:"title",type:"input",label:"Image title"},Jn={name:"dimensions",type:"sizeinput"},Uo={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},wr=B.classList.map(I=>({name:"classes",type:"listbox",label:"Class",items:I})),Xr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Ja=I=>I?{type:"grid",columns:2}:{type:"panel"};return Ot([[G],re.toArray(),B.hasAccessibilityOptions&&B.hasDescription?[Uo]:[],B.hasDescription?[Pe]:[],B.hasImageTitle?[Ht]:[],B.hasDimensions?[Jn]:[],[{...Ja(B.classList.isSome()&&B.hasImageCaption),items:Ot([wr.toArray(),B.hasImageCaption?[Xr]:[]])}]])},Yr={makeTab:B=>({title:"General",name:"general",items:hn(B)}),makeItems:hn},em={makeTab:B=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Ii=B=>({prevImage:Ol.findEntry(B.imageList,B.image.src),prevAlt:B.image.alt,open:!0}),fs=B=>({src:{value:B.src,meta:{}},images:B.src,alt:B.alt,title:B.title,dimensions:{width:B.width,height:B.height},classes:B.class,caption:B.caption,style:B.style,vspace:B.vspace,border:B.border,hspace:B.hspace,borderstyle:B.borderStyle,fileinput:[],isDecorative:B.isDecorative}),ni=(B,G)=>({src:B.src.value,alt:(B.alt===null||B.alt.length===0)&&G?null:B.alt,title:B.title,width:B.dimensions.width,height:B.dimensions.height,class:B.classes,style:B.style,caption:B.caption,hspace:B.hspace,vspace:B.vspace,border:B.border,borderStyle:B.borderstyle,isDecorative:B.isDecorative}),ol=(B,G)=>/^(?:[a-zA-Z]+:)?\/\//.test(G)?Ye.none():B.prependURL.bind(re=>G.substring(0,re.length)!==re?Ye.some(re+G):Ye.none()),Jf=(B,G)=>{const re=G.getData();ol(B,re.src.value).each(Pe=>{G.setData({src:{value:Pe,meta:re.src.meta}})})},vt=(B,G,re)=>{B.hasDescription&&et(re.alt)&&(G.alt=re.alt),B.hasAccessibilityOptions&&(G.isDecorative=re.isDecorative||G.isDecorative||!1),B.hasImageTitle&&et(re.title)&&(G.title=re.title),B.hasDimensions&&(et(re.width)&&(G.dimensions.width=re.width),et(re.height)&&(G.dimensions.height=re.height)),et(re.class)&&Ol.findEntry(B.classList,re.class).each(Pe=>{G.classes=Pe.value}),B.hasImageCaption&&Cn(re.caption)&&(G.caption=re.caption),B.hasAdvTab&&(et(re.style)&&(G.style=re.style),et(re.vspace)&&(G.vspace=re.vspace),et(re.border)&&(G.border=re.border),et(re.hspace)&&(G.hspace=re.hspace),et(re.borderstyle)&&(G.borderstyle=re.borderstyle))},oi=(B,G)=>{const re=G.getData(),Pe=re.src.meta;if(Pe!==void 0){const Ht=he({},re);vt(B,Ht,Pe),G.setData(Ht)}},pa=(B,G,re,Pe)=>{const Ht=Pe.getData(),Jn=Ht.src.value,Uo=Ht.src.meta||{};!Uo.width&&!Uo.height&&G.hasDimensions&&(de(Jn)?B.imageSize(Jn).then(wr=>{re.open&&Pe.setData({dimensions:wr})}).catch(wr=>console.error(wr)):Pe.setData({dimensions:{width:"",height:""}}))},Bc=(B,G,re)=>{const Pe=re.getData(),Ht=Ol.findEntry(B.imageList,Pe.src.value);G.prevImage=Ht,re.setData({images:Ht.map(Jn=>Jn.value).getOr("")})},Is=(B,G,re,Pe)=>{Jf(G,Pe),oi(G,Pe),pa(B,G,re,Pe),Bc(G,re,Pe)},eg=(B,G,re,Pe)=>{const Ht=Pe.getData(),Jn=Ol.findEntry(G.imageList,Ht.images);Jn.each(Uo=>{Ht.alt===""||re.prevImage.map(Xr=>Xr.text===Ht.alt).getOr(!1)?Uo.value===""?Pe.setData({src:Uo,alt:re.prevAlt}):Pe.setData({src:Uo,alt:Uo.text}):Pe.setData({src:Uo})}),re.prevImage=Jn,Is(B,G,re,Pe)},Qa=(B,G,re,Pe)=>{const Ht=Pe.getData();Pe.block("Uploading image"),Yt(Ht.fileinput).fold(()=>{Pe.unblock()},Jn=>{const Uo=URL.createObjectURL(Jn),wr=()=>{Pe.unblock(),URL.revokeObjectURL(Uo)},Xr=Ja=>{Pe.setData({src:{value:Ja,meta:{}}}),Pe.showTab("general"),Is(B,G,re,Pe),Pe.focus("src")};qr(Jn).then(Ja=>{const I=B.createBlobCache(Jn,Uo,Ja);G.automaticUploads?B.uploadImage(I).then(ee=>{Xr(ee.url),wr()}).catch(ee=>{wr(),B.alertErr(ee,()=>{Pe.focus("fileinput")})}):(B.addToBlobCache(I),Xr(I.blobUri()),Pe.unblock())})})},$c=(B,G,re)=>(Pe,Ht)=>{Ht.name==="src"?Is(B,G,re,Pe):Ht.name==="images"?eg(B,G,re,Pe):Ht.name==="alt"?re.prevAlt=Pe.getData().alt:Ht.name==="fileinput"?Qa(B,G,re,Pe):Ht.name==="isDecorative"&&Pe.setEnabled("alt",!Pe.getData().isDecorative)},Gm=B=>()=>{B.open=!1},tg=B=>B.hasAdvTab||B.hasUploadUrl||B.hasUploadHandler?{type:"tabpanel",tabs:Ot([[Yr.makeTab(B)],B.hasAdvTab?[Zm.makeTab(B)]:[],B.hasUploadTab&&(B.hasUploadUrl||B.hasUploadHandler)?[em.makeTab(B)]:[]])}:{type:"panel",items:Yr.makeItems(B)},si=(B,G,re)=>Pe=>{const Ht=he(fs(G.image),Pe.getData()),Jn={...Ht,style:Wm(re.normalizeCss,ni(Ht,!1))};B.execCommand("mceUpdateImage",!1,ni(Jn,G.hasAccessibilityOptions)),B.editorUpload.uploadImagesAuto(),Pe.close()},ng=B=>G=>mr(B,G)?xo(B.documentBaseURI.toAbsolute(G)).then(re=>({width:String(re.width),height:String(re.height)})):Promise.resolve({width:"",height:""}),wu=B=>(G,re,Pe)=>B.editorUpload.blobCache.create({blob:G,blobUri:re,name:G.name?.replace(/\.[^\.]+$/,""),filename:G.name,base64:Pe.split(",")[1]}),ri=B=>G=>{B.editorUpload.blobCache.add(G)},Eu=B=>(G,re)=>{B.windowManager.alert(G,re)},at=B=>G=>or(B,G),Fi=B=>G=>B.dom.parseStyle(G),tm=B=>(G,re)=>B.dom.serializeStyle(G,re),sl=B=>G=>Qs(B).upload([G],!1).then(re=>re.length===0?Promise.reject("Failed to upload image"):re[0].status===!1?Promise.reject(re[0].error?.message):re[0]),mc=B=>{const G={imageSize:ng(B),addToBlobCache:ri(B),createBlobCache:wu(B),alertErr:Eu(B),normalizeCss:at(B),parseStyle:Fi(B),serializeStyle:tm(B),uploadImage:sl(B)};return{open:()=>{_s(B).then(Pe=>{const Ht=Ii(Pe);return{title:"Insert/Edit Image",size:"normal",body:tg(Pe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:fs(Pe.image),onSubmit:si(B,Pe,G),onChange:$c(G,Pe,Ht),onClose:Gm(Ht)}}).then(B.windowManager.open)}}},ud=B=>{B.addCommand("mceImage",mc(B).open),B.addCommand("mceUpdateImage",(G,re)=>{B.undoManager.transact(()=>dc(B,re))})},ba=B=>{const G=B.attr("class");return un(G)&&/\bimage\b/.test(G)},Dl=B=>G=>{let re=G.length;const Pe=Ht=>{Ht.attr("contenteditable",B?"true":null)};for(;re--;){const Ht=G[re];ba(Ht)&&(Ht.attr("contenteditable",B?"false":null),_l.each(Ht.getAll("figcaption"),Pe))}},Li=B=>{B.on("PreInit",()=>{B.parser.addNodeFilter("figure",Dl(!0)),B.serializer.addNodeFilter("figure",Dl(!1))})},ai=B=>G=>{const re=()=>{G.setEnabled(B.selection.isEditable())};return B.on("NodeChange",re),re(),()=>{B.off("NodeChange",re)}},Vo=B=>{B.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:mc(B).open,onSetup:G=>{G.setActive(un($i(B)));const re=B.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",G.setActive).unbind,Pe=ai(B)(G);return()=>{re(),Pe()}}}),B.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:mc(B).open,onSetup:ai(B)}),B.ui.registry.addContextMenu("image",{update:G=>B.selection.isEditable()&&(Cu(G)||tl(G)&&!Ws(G))?["image"]:[]})};var dd=()=>{V.add("image",B=>{Lt(B),Li(B),Vo(B),ud(B)})};dd()}()),fX}var hX;function bJ(){return hX||(hX=1,pJ()),mX}bJ();var pX={},bX={},vX;function vJ(){return vX||(vX=1,function(){var V=tinymce.util.Tools.resolve("tinymce.PluginManager");const ue=(w,k,F)=>F(w,k.prototype)?!0:w.constructor?.name===k.name,ut=w=>{const k=typeof w;return w===null?"null":k==="object"&&Array.isArray(w)?"array":k==="object"&&ue(w,String,(F,q)=>q.isPrototypeOf(F))?"string":k},ot=w=>k=>ut(k)===w,Nt=w=>k=>typeof k===w,ft=w=>k=>w===k,nn=ot("string"),De=ot("array"),et=Nt("boolean"),Tt=ft(void 0),$n=w=>w==null,Mt=w=>!$n(w),vn=Nt("function"),Cn=Nt("number"),pn=()=>{},un=(w,k)=>F=>w(k(F)),Xe=w=>()=>w,In=w=>w,lt=(w,k)=>w===k;function U(w,...k){return(...F)=>{const q=k.concat(F);return w.apply(null,q)}}const Ye=w=>{w()},On=Xe(!1),Ot=Xe(!0);class oe{tag;value;static singletonNone=new oe(!1);constructor(k,F){this.tag=k,this.value=F}static some(k){return new oe(!0,k)}static none(){return oe.singletonNone}fold(k,F){return this.tag?F(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?oe.some(k(this.value)):oe.none()}bind(k){return this.tag?k(this.value):oe.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:oe.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return Mt(k)?oe.some(k):oe.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Yt=Array.prototype.indexOf,Gn=Array.prototype.push,jt=(w,k)=>Yt.call(w,k),X=(w,k)=>jt(w,k)>-1,se=(w,k)=>{for(let F=0,q=w.length;F<q;F++){const me=w[F];if(k(me,F))return!0}return!1},os=(w,k)=>{const F=[];for(let q=0;q<w;q++)F.push(k(q));return F},an=(w,k)=>{const F=w.length,q=new Array(F);for(let me=0;me<F;me++){const Ne=w[me];q[me]=k(Ne,me)}return q},St=(w,k)=>{for(let F=0,q=w.length;F<q;F++){const me=w[F];k(me,F)}},A=(w,k)=>{for(let F=w.length-1;F>=0;F--){const q=w[F];k(q,F)}},Mo=(w,k)=>{const F=[],q=[];for(let me=0,Ne=w.length;me<Ne;me++){const gt=w[me];(k(gt,me)?F:q).push(gt)}return{pass:F,fail:q}},st=(w,k)=>{const F=[];for(let q=0,me=w.length;q<me;q++){const Ne=w[q];k(Ne,q)&&F.push(Ne)}return F},Wo=(w,k,F)=>(A(w,(q,me)=>{F=k(F,q,me)}),F),he=(w,k,F)=>(St(w,(q,me)=>{F=k(F,q,me)}),F),de=(w,k,F)=>{for(let q=0,me=w.length;q<me;q++){const Ne=w[q];if(k(Ne,q))return oe.some(Ne);if(F(Ne,q))break}return oe.none()},bt=(w,k)=>de(w,k,On),cn=w=>{const k=[];for(let F=0,q=w.length;F<q;++F){if(!De(w[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+w);Gn.apply(k,w[F])}return k},fn=(w,k)=>cn(an(w,k)),Fn=(w,k)=>{for(let F=0,q=w.length;F<q;++F){const me=w[F];if(k(me,F)!==!0)return!1}return!0},ye=(w,k)=>{const F={};for(let q=0,me=w.length;q<me;q++){const Ne=w[q];F[String(Ne)]=k(Ne,q)}return F},He=(w,k)=>k>=0&&k<w.length?oe.some(w[k]):oe.none(),P=w=>He(w,0),ro=w=>He(w,w.length-1),Ln=(w,k)=>{for(let F=0;F<w.length;F++){const q=k(w[F],F);if(q.isSome())return q}return oe.none()},oo=Object.keys,ao=Object.hasOwnProperty,dr=(w,k)=>{const F=oo(w);for(let q=0,me=F.length;q<me;q++){const Ne=F[q],gt=w[Ne];k(gt,Ne)}},Lt=w=>(k,F)=>{w[F]=k},po=(w,k,F,q)=>{dr(w,(me,Ne)=>{(k(me,Ne)?F:q)(me,Ne)})},en=(w,k)=>{const F={};return po(w,k,Lt(F),pn),F},xe=(w,k)=>{const F=[];return dr(w,(q,me)=>{F.push(k(q,me))}),F},We=w=>xe(w,In),rt=w=>oo(w).length,ze=(w,k)=>no(w,k)?oe.from(w[k]):oe.none(),no=(w,k)=>ao.call(w,k),qn=(w,k)=>no(w,k)&&w[k]!==void 0&&w[k]!==null,Fo=w=>{for(const k in w)if(ao.call(w,k))return!1;return!0},el=w=>{let k=w;return{get:()=>k,set:me=>{k=me}}},Oo=(w,k,F=lt)=>w.exists(q=>F(q,k)),Jl=w=>{const k=[],F=q=>{k.push(q)};for(let q=0;q<w.length;q++)w[q].each(F);return k},jm=(w,k,F)=>w.isSome()&&k.isSome()?oe.some(F(w.getOrDie(),k.getOrDie())):oe.none(),ha=w=>w.bind(In),xo=(w,k)=>w?oe.some(k):oe.none(),Ka=w=>{const k=el(oe.none()),F=()=>k.get().each(w);return{clear:()=>{F(),k.set(oe.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:Zt=>{F(),k.set(oe.some(Zt))}}},ms=()=>Ka(w=>w.unbind()),$s=(w,k)=>w.substring(k),yu=(w,k,F)=>k===""||w.length>=k.length&&w.substr(F,F+k.length)===k,kl=(w,k)=>qr(w,k)?$s(w,k.length):w,qr=(w,k)=>yu(w,k,0),mr=(w=>k=>k.replace(w,""))(/^\s+|\s+$/g),as=w=>w.length>0,lc=w=>!as(w),Ya=(w,k=10)=>{const F=parseInt(w,k);return isNaN(F)?oe.none():oe.some(F)},Vt=w=>{const k=parseFloat(w);return isNaN(k)?oe.none():oe.some(k)},mo=w=>{let k=!1,F;return(...q)=>(k||(k=!0,F=w.apply(null,q)),F)},Un=(w,k)=>{const q=(k||document).createElement("div");if(q.innerHTML=w,!q.hasChildNodes()||q.childNodes.length>1){const me="HTML does not have a single root node";throw console.error(me,w),new Error(me)}return Pt(q.childNodes[0])},ic=(w,k)=>{const q=(k||document).createElement(w);return Pt(q)},Pa=(w,k)=>{const q=(k||document).createTextNode(w);return Pt(q)},Pt=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},cs={fromHtml:Un,fromTag:ic,fromText:Pa,fromDom:Pt,fromPoint:(w,k,F)=>oe.from(w.dom.elementFromPoint(k,F)).map(Pt)},Pi=8,uc=9,Ba=11,Zo=1,kn=3,Go=(w,k)=>{const F=w.dom;if(F.nodeType!==Zo)return!1;{const q=F;if(q.matches!==void 0)return q.matches(k);if(q.msMatchesSelector!==void 0)return q.msMatchesSelector(k);if(q.webkitMatchesSelector!==void 0)return q.webkitMatchesSelector(k);if(q.mozMatchesSelector!==void 0)return q.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},ad=w=>w.nodeType!==Zo&&w.nodeType!==uc&&w.nodeType!==Ba||w.childElementCount===0,Cu=(w,k)=>{const F=k===void 0?document:k.dom;return ad(F)?[]:an(F.querySelectorAll(w),cs.fromDom)},tl=(w,k)=>{const F=k===void 0?document:k.dom;return ad(F)?oe.none():oe.from(F.querySelector(w)).map(cs.fromDom)},Wt=(w,k)=>w.dom===k.dom,$a=Go,Dr=w=>w.dom.nodeName.toLowerCase(),Wm=w=>w.dom.nodeType,Sr=w=>k=>Wm(k)===w,Qd=w=>Wm(w)===Pi||Dr(w)==="#comment",ss=Sr(Zo),Bi=Sr(kn),cd=Sr(uc),ei=Sr(Ba),Mc=w=>k=>ss(k)&&Dr(k)===w,or=w=>cs.fromDom(w.dom.ownerDocument),$i=w=>cd(w)?w:or(w),xu=w=>oe.from(w.dom.parentNode).map(cs.fromDom),Ct=(w,k)=>{const F=vn(k)?k:On;let q=w.dom;const me=[];for(;q.parentNode!==null&&q.parentNode!==void 0;){const Ne=q.parentNode,gt=cs.fromDom(Ne);if(me.push(gt),F(gt)===!0)break;q=Ne}return me},Xa=w=>oe.from(w.dom.previousSibling).map(cs.fromDom),Su=w=>oe.from(w.dom.nextSibling).map(cs.fromDom),Al=w=>an(w.dom.childNodes,cs.fromDom),zo=(w,k)=>{const F=w.dom.childNodes;return oe.from(F[k]).map(cs.fromDom)},ld=w=>zo(w,0),dc=w=>ei(w)&&Mt(w.dom.host),Qs=w=>cs.fromDom(w.dom.getRootNode()),_l=w=>{const k=Qs(w);return dc(k)?oe.some(k):oe.none()},id=w=>cs.fromDom(w.dom.host),Ia=(w,k)=>{xu(w).each(q=>{q.dom.insertBefore(k.dom,w.dom)})},Br=(w,k)=>{Su(w).fold(()=>{xu(w).each(me=>{$r(me,k)})},q=>{Ia(q,k)})},nl=(w,k)=>{ld(w).fold(()=>{$r(w,k)},q=>{w.dom.insertBefore(k.dom,q.dom)})},$r=(w,k)=>{w.dom.appendChild(k.dom)},fh=(w,k)=>{Ia(w,k),$r(k,w)},Jd=(w,k)=>{St(k,(F,q)=>{const me=q===0?w:k[q-1];Br(me,F)})},Pc=(w,k)=>{St(k,F=>{$r(w,F)})},Ol=(w,k,F)=>{if(nn(F)||et(F)||Cn(F))w.setAttribute(k,F+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",F,":: Element ",w),new Error("Attribute value was not simple")},ti=(w,k,F)=>{Ol(w.dom,k,F)},Zm=(w,k)=>{const F=w.dom;dr(k,(q,me)=>{Ol(F,me,q)})},_s=(w,k)=>{const F=w.dom.getAttribute(k);return F===null?void 0:F},hn=(w,k)=>oe.from(_s(w,k)),Kr=(w,k)=>{w.dom.removeAttribute(k)},Yr=w=>he(w.dom.attributes,(k,F)=>(k[F.name]=F.value,k),{}),Os=w=>{const k=w.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},em=w=>{const k=Al(w);k.length>0&&Jd(w,k),Os(w)},Ii=w=>an(w,cs.fromDom),fs=w=>w.style!==void 0&&vn(w.style.getPropertyValue),ni=w=>{const k=Bi(w)?w.dom.parentNode:w.dom;if(k==null||k.ownerDocument===null)return!1;const F=k.ownerDocument;return _l(cs.fromDom(k)).fold(()=>F.body.contains(k),un(ni,id))},ol=(w,k,F)=>{if(!nn(F))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",F,":: Element ",w),new Error("CSS value must be a string: "+F);fs(w)&&w.style.setProperty(k,F)},Jf=(w,k)=>{fs(w)&&w.style.removeProperty(k)},vt=(w,k,F)=>{const q=w.dom;ol(q,k,F)},oi=(w,k)=>{const F=w.dom,me=window.getComputedStyle(F).getPropertyValue(k);return me===""&&!ni(w)?pa(F,k):me},pa=(w,k)=>fs(w)?w.style.getPropertyValue(k):"",Bc=(w,k)=>{const F=w.dom,q=pa(F,k);return oe.from(q).filter(me=>me.length>0)},Is=(w,k)=>{const F=w.dom;Jf(F,k),Oo(hn(w,"style").map(mr),"")&&Kr(w,"style")},eg=(w,k)=>Vt(w).getOr(k),Qa=(w,k,F)=>eg(oi(w,k),F),$c=(w,k,F,q)=>{const me=Qa(w,`padding-${F}`,0),Ne=Qa(w,`padding-${q}`,0),gt=Qa(w,`border-${F}-width`,0),Zt=Qa(w,`border-${q}-width`,0);return k-me-Ne-gt-Zt},Gm=(w,k)=>{const F=w.dom,q=F.getBoundingClientRect().width||F.offsetWidth;return $c(w,q,"left","right")},si=w=>Gm(w),wu=((w,k)=>{const F=Ne=>{if(!w(Ne))throw new Error("Can only get "+k+" value of a "+k+" node");return q(Ne).getOr("")},q=Ne=>w(Ne)?oe.from(Ne.dom.nodeValue):oe.none();return{get:F,getOption:q,set:(Ne,gt)=>{if(!w(Ne))throw new Error("Can only set raw "+k+" value of a "+k+" node");Ne.dom.nodeValue=gt}}})(Bi,"text"),ri=w=>wu.get(w),Eu=(w,k)=>wu.set(w,k);var at=(w,k,F,q,me)=>w(F,q)?oe.some(F):vn(me)&&me(F)?oe.none():k(F,q,me);const Fi=(w,k,F)=>{let q=w.dom;const me=vn(F)?F:On;for(;q.parentNode;){q=q.parentNode;const Ne=cs.fromDom(q);if(k(Ne))return oe.some(Ne);if(me(Ne))break}return oe.none()},tm=(w,k,F)=>at((me,Ne)=>Ne(me),Fi,w,k,F),sl=(w,k)=>{const F=me=>k(cs.fromDom(me));return bt(w.dom.childNodes,F).map(cs.fromDom)},mc=(w,k,F)=>Fi(w,q=>Go(q,k),F),ud=(w,k)=>sl(w,F=>Go(F,k)),ba=(w,k)=>tl(k,w),Dl=(w,k,F)=>at((me,Ne)=>Go(me,Ne),mc,w,k,F),Li=w=>Dl(w,"[contenteditable]"),ai=(w,k=!1)=>ni(w)?w.dom.isContentEditable:Li(w).fold(Xe(k),F=>Vo(F)==="true"),Vo=w=>w.dom.contentEditable,dd=(w,k)=>st(Al(w),k),B=(w,k)=>{let F=[];return St(Al(w),q=>{k(q)&&(F=F.concat([q])),F=F.concat(B(q,k))}),F},G=(w,k)=>dd(w,F=>Go(F,k)),re=(w,k)=>Cu(k,w),Pe=(w,k)=>ud(w,k).isSome(),Ht=w=>w.nodeName.toLowerCase(),Jn=w=>cs.fromDom(w.getBody()),Uo=w=>k=>Wt(k,Jn(w)),wr=w=>w?w.replace(/px$/,""):"",Xr=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,Ja=w=>cs.fromDom(w.selection.getStart()),I=w=>cs.fromDom(w.selection.getEnd()),ee=w=>tm(w,Mc("table")).forall(ai),fe=["tfoot","thead","tbody","colgroup"],_e=w=>X(fe,w),it=(w,k)=>({rows:w,columns:k}),It=(w,k,F)=>({element:w,rowspan:k,colspan:F}),Mn=(w,k,F,q,me,Ne)=>({element:w,rowspan:k,colspan:F,row:q,column:me,isLocked:Ne}),wo=(w,k,F)=>({element:w,cells:k,section:F}),co=(w,k,F,q)=>({startRow:w,startCol:k,finishRow:F,finishCol:q}),va=(w,k,F)=>({element:w,colspan:k,column:F}),Zs=(w,k)=>({element:w,columns:k}),Tu=(w,k,F=0)=>hn(w,k).map(q=>parseInt(q,10)).getOr(F),qm=(w,k)=>nm(w,k,Ot),nm=(w,k,F)=>fn(Al(w),q=>Go(q,k)?F(q)?[q]:[]:nm(q,k,F)),Rl=(w,k,F=On)=>{if(F(k))return oe.none();if(X(w,Dr(k)))return oe.some(k);const q=me=>Go(me,"table")||F(me);return mc(k,w.join(","),q)},Kb=(w,k)=>Rl(["td","th"],w,k),Yb=w=>qm(w,"th,td"),Lp=w=>Go(w,"colgroup")?G(w,"col"):fn(Qb(w),k=>G(k,"col")),Nl=(w,k)=>Dl(w,"table",k),Xb=w=>qm(w,"tr"),Qb=w=>Nl(w).fold(Xe([]),k=>G(k,"colgroup")),Uy=Mc("th"),Hi=(w,k)=>w&&k?"sectionCells":w?"section":"cells",jy=w=>{const k=w.section==="thead",F=Oo(Wy(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:k||F?{type:"header",subType:Hi(k,F)}:{type:"body"}},Wy=w=>{const k=st(w,F=>Uy(F.element));return k.length===0?oe.some("td"):k.length===w.length?oe.some("th"):oe.none()},Hp=w=>{const k=an(w,me=>jy(me).type),F=X(k,"header"),q=X(k,"footer");if(!F&&!q)return oe.some("body");{const me=X(k,"body");return F&&!me&&!q?oe.some("header"):!F&&!me&&q?oe.some("footer"):oe.none()}},zp=(w,k)=>an(w,F=>{if(Dr(F)==="colgroup"){const q=an(Lp(F),me=>{const Ne=Tu(me,"span",1);return It(me,1,Ne)});return wo(F,q,"colgroup")}else{const q=an(Yb(F),me=>{const Ne=Tu(me,"rowspan",1),gt=Tu(me,"colspan",1);return It(me,Ne,gt)});return wo(F,q,k(F))}}),MS=w=>xu(w).map(k=>{const F=Dr(k);return _e(F)?F:"tbody"}).getOr("tbody"),Zy=w=>{const k=Xb(w),q=[...Qb(w),...k];return zp(q,MS)},Vp="data-snooker-locked-cols",zi=w=>hn(w,Vp).bind(k=>oe.from(k.match(/\d+/g))).map(k=>ye(k,Ot)),rl=(w,k)=>w+","+k,om=(w,k,F)=>oe.from(w.access[rl(k,F)]),Gy=(w,k,F)=>{const q=fo(w,me=>F(k,me.element));return q.length>0?oe.some(q[0]):oe.none()},fo=(w,k)=>{const F=fn(w.all,q=>q.cells);return st(F,k)},qy=w=>{const k={};let F=0;return St(w.cells,q=>{const me=q.colspan;os(me,Ne=>{const gt=F+Ne;k[gt]=va(q.element,me,gt)}),F+=me}),k},gh=w=>{const k={},F=[],me=P(w).map(zc=>zc.element).bind(Nl).bind(zi).getOr({});let Ne=0,gt=0,Zt=0;const{pass:Dn,fail:Vn}=Mo(w,zc=>zc.section==="colgroup");St(Vn,zc=>{const hi=[];St(zc.cells,Ru=>{let zl=0;for(;k[rl(Zt,zl)]!==void 0;)zl++;const i1=qn(me,zl.toString()),sf=Mn(Ru.element,Ru.rowspan,Ru.colspan,Zt,zl,i1);for(let mg=0;mg<Ru.colspan;mg++)for(let fg=0;fg<Ru.rowspan;fg++){const gg=Zt+fg,rf=zl+mg,Sh=rl(gg,rf);k[Sh]=sf,gt=Math.max(gt,rf+1)}hi.push(sf)}),Ne++,F.push(wo(zc.element,hi,zc.section)),Zt++});const{columns:rs,colgroups:Es}=ro(Dn).map(zc=>{const hi=qy(zc);return{colgroups:[Zs(zc.element,We(hi))],columns:hi}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:it(Ne,gt),access:k,all:F,columns:rs,colgroups:Es}},Gs={fromTable:w=>{const k=Zy(w);return gh(k)},generate:gh,getAt:om,findItem:Gy,filterItems:fo,justCells:w=>fn(w.all,k=>k.cells),justColumns:w=>We(w.columns),hasColumns:w=>oo(w.columns).length>0,getColumnAt:(w,k)=>oe.from(w.columns[k])},sm=(w,k)=>Ln(w.all,F=>bt(F.cells,q=>Wt(k,q.element))),Ky=(w,k,F)=>{const q=an(k.selection,Ne=>Kb(Ne).bind(gt=>sm(w,gt)).filter(F)),me=Jl(q);return xo(me.length>0,me)},Je=(w,k)=>k.mergable,Ic=(w,k)=>k.unmergable,og=(w,k)=>Ky(w,k,Ot),Ml=(w,k)=>sm(w,k).exists(F=>!F.isLocked),Km=(w,k)=>Fn(k,F=>Ml(w,F)),jp=(w,k)=>Je(w,k).filter(F=>Km(w,F.cells)),te=(w,k)=>Ic(w,k).filter(F=>Km(w,F));var fc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],md=()=>{const w=Vn=>cs.fromDom(Vn.dom.cloneNode(!1)),k=Vn=>$i(Vn).dom,F=Vn=>ss(Vn)?Dr(Vn)==="body"?!0:X(fc,Dr(Vn)):!1,q=Vn=>ss(Vn)?X(["br","img","hr","input"],Dr(Vn)):!1,me=Vn=>ss(Vn)&&_s(Vn,"contenteditable")==="false",Ne=(Vn,rs)=>Vn.dom.compareDocumentPosition(rs.dom),gt=(Vn,rs)=>{const Es=Yr(Vn);Zm(rs,Es)},Zt=Vn=>{const rs=Dr(Vn);return X(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],rs)},Dn=Vn=>ss(Vn)?hn(Vn,"lang"):oe.none();return{up:Xe({selector:mc,closest:Dl,predicate:Fi,all:Ct}),down:Xe({selector:re,predicate:B}),styles:Xe({get:oi,getRaw:Bc,set:vt,remove:Is}),attrs:Xe({get:_s,set:ti,remove:Kr,copyTo:gt}),insert:Xe({before:Ia,after:Br,afterAll:Jd,append:$r,appendAll:Pc,prepend:nl,wrap:fh}),remove:Xe({unwrap:em,remove:Os}),create:Xe({nu:cs.fromTag,clone:w,text:cs.fromText}),query:Xe({comparePosition:Ne,prevSibling:Xa,nextSibling:Su}),property:Xe({children:Al,name:Dr,parent:xu,document:k,isText:Bi,isComment:Qd,isElement:ss,isSpecial:Zt,getLanguage:Dn,getText:ri,setText:Eu,isBoundary:F,isEmptyTag:q,isNonEditable:me}),eq:Wt,is:$a}};const Wp=(w,k,F,q)=>{const me=F[0],Ne=F.slice(1);return q(w,k,me,Ne)},Ym=(w,k,F)=>F.length>0?Wp(w,k,F,ya):oe.none(),ya=(w,k,F,q)=>{const me=k(w,F);return Wo(q,(Ne,gt)=>{const Zt=k(w,gt);return gc(w,Ne,Zt)},me)},gc=(w,k,F)=>k.bind(q=>F.filter(U(w.eq,q))),Zp=Ym,Gp=md(),sg=(w,k)=>Zp(Gp,(F,q)=>w(q),k),qp=(w,k)=>{const F=Gs.fromTable(w);return og(F,k).bind(me=>{const Ne=me[me.length-1],gt=me[0].row,Zt=Ne.row+Ne.rowspan,Dn=F.all.slice(gt,Zt);return Hp(Dn)}).getOr("")},Vi=(w,k)=>k.column>=w.startCol&&k.column+k.colspan-1<=w.finishCol&&k.row>=w.startRow&&k.row+k.rowspan-1<=w.finishRow,rg=(w,k)=>{let F=!0;const q=U(Vi,k);for(let me=k.startRow;me<=k.finishRow;me++)for(let Ne=k.startCol;Ne<=k.finishCol;Ne++)F=F&&Gs.getAt(w,me,Ne).exists(q);return F?oe.some(k):oe.none()},Kp=(w,k)=>co(Math.min(w.row,k.row),Math.min(w.column,k.column),Math.max(w.row+w.rowspan-1,k.row+k.rowspan-1),Math.max(w.column+w.colspan-1,k.column+k.colspan-1)),Fc=(w,k,F)=>{const q=Gs.findItem(w,k,Wt),me=Gs.findItem(w,F,Wt);return q.bind(Ne=>me.map(gt=>Kp(Ne,gt)))},Yp=(w,k,F)=>Fc(w,k,F).bind(q=>rg(w,q)),ci=(w,k,F)=>{const q=fd(w);return Yp(q,k,F)},fd=Gs.fromTable;var Qn=tinymce.util.Tools.resolve("tinymce.util.Tools");const ec=(w,k,F)=>{const q=w.select("td,th",k);let me;for(let Ne=0;Ne<q.length;Ne++){const gt=w.getStyle(q[Ne],F);if(Tt(me)&&(me=gt),me!==gt)return""}return me},Xm=(w,k,F)=>{Qn.each("left center right".split(" "),q=>{q!==F&&w.formatter.remove("align"+q,{},k)}),F&&w.formatter.apply("align"+F,{},k)},e0=(w,k,F)=>{Qn.each("top middle bottom".split(" "),q=>{q!==F&&w.formatter.remove("valign"+q,{},k)}),F&&w.formatter.apply("valign"+F,{},k)},Hn=(w,k,F)=>{w.dispatch("TableModified",{...F,table:k})};var ku=tinymce.util.Tools.resolve("tinymce.Env");const fr="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",li=os(5,w=>{const k=`${w+1}px`;return{title:k,value:k}}),ii=an(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),Fs="100%",Eo=w=>{const k=w.dom,F=k.getParent(w.selection.getStart(),k.isBlock)??w.getBody();return si(cs.fromDom(F))+"px"},Yy=(w,k)=>Xp(w)||!nc(w)?k:gd(w)?{...k,width:Eo(w)}:{...k,width:Fs},Xy=(w,k)=>Xp(w)||nc(w)?k:gd(w)?{...k,width:Eo(w)}:{...k,width:Fs},gr=w=>k=>k.options.get(w),Pl=w=>{const k=w.options.register;k("table_border_widths",{processor:"object[]",default:li}),k("table_border_styles",{processor:"object[]",default:ii}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!ku.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:fr}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},Bl=gr("table_sizing_mode"),hr=gr("table_border_widths"),ui=gr("table_border_styles"),tc=gr("table_cell_advtab"),Lc=gr("table_row_advtab"),Ca=gr("table_advtab"),Do=gr("table_appearance_options"),al=gr("table_grid"),nc=gr("table_style_by_css"),Qr=gr("table_cell_class_list"),Ir=gr("table_row_class_list"),Ds=gr("table_class_list"),$l=gr("table_toolbar"),Fr=gr("table_background_color_map"),sr=gr("table_border_color_map"),gd=w=>Bl(w)==="fixed",Xp=w=>Bl(w)==="responsive",hh=w=>{const k=w.options,F=k.get("table_default_styles");return k.isSet("table_default_styles")?F:Yy(w,F)},Lr=w=>{const k=w.options,F=k.get("table_default_attributes");return k.isSet("table_default_attributes")?F:Xy(w,F)},Qp=w=>mc(w,"table"),t0=(w,k)=>{const F=re(w,k);return F.length>0?oe.some(F):oe.none()},rm=(w,k,F)=>ba(w,k).bind(q=>ba(w,F).bind(me=>sg(Qp,[q,me]).map(Ne=>({first:q,last:me,table:Ne})))),ln=(w,k)=>t0(w,k),Jp=(w,k,F)=>rm(w,k,F).bind(q=>{const me=Dn=>Wt(w,Dn),Ne="thead,tfoot,tbody,table",gt=mc(q.first,Ne,me),Zt=mc(q.last,Ne,me);return gt.bind(Dn=>Zt.bind(Vn=>Wt(Dn,Vn)?ci(q.table,q.first,q.last):oe.none()))}),Rr=In,Jr=w=>{const k=(q,me)=>hn(q,me).exists(Ne=>parseInt(Ne,10)>1),F=q=>k(q,"rowspan")||k(q,"colspan");return w.length>0&&Fn(w,F)?oe.some(w):oe.none()},ea=(w,k,F)=>k.length<=1?oe.none():Jp(w,F.firstSelectedSelector,F.lastSelectedSelector).map(q=>({bounds:q,cells:k})),gs="data-mce-selected",hd="data-mce-first-selected",ph="td["+hd+"],th["+hd+"]",cl="data-mce-last-selected",di="td["+cl+"],th["+cl+"]",ag={selected:gs,firstSelectedSelector:ph,lastSelectedSelector:di},bh=w=>Nl(w).bind(k=>ln(k,ag.firstSelectedSelector)).fold(Xe(w),k=>k[0]),cg=w=>(k,F)=>{const q=Dr(k),me=q==="col"||q==="colgroup"?bh(k):k;return Dl(me,w,F)},Ui=cg("th,td,caption"),Il=cg("th,td"),e1=w=>Ii(w.model.table.getSelectedCells()),la=(w,k)=>{const F=Il(w),q=F.bind(me=>Nl(me)).map(me=>Xb(me));return jm(F,q,(me,Ne)=>st(Ne,gt=>se(Ii(gt.dom.cells),Zt=>_s(Zt,k)==="1"||Wt(Zt,me)))).getOr([])},ll=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],ji=w=>({value:lg(w)}),bo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Hc=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,n0=w=>bo.test(w)||Hc.test(w),lg=w=>kl(w,"#").toUpperCase(),il=w=>n0(w)?oe.some({value:lg(w)}):oe.none(),gn=w=>{const k=w.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},ws=w=>{const k=gn(w.red)+gn(w.green)+gn(w.blue);return ji(k)},ta=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,hs=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ul=(w,k,F,q)=>({red:w,green:k,blue:F,alpha:q}),xs=(w,k,F,q)=>{const me=parseInt(w,10),Ne=parseInt(k,10),gt=parseInt(F,10),Zt=parseFloat(q);return ul(me,Ne,gt,Zt)},rr=w=>{const k=ta.exec(w);if(k!==null)return oe.some(xs(k[1],k[2],k[3],"1"));const F=hs.exec(w);return F!==null?oe.some(xs(F[1],F[2],F[3],F[4])):oe.none()},Qm=w=>il(w).orThunk(()=>rr(w).map(ws)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const F=k.getContext("2d");F.clearRect(0,0,k.width,k.height),F.fillStyle="#FFFFFF",F.fillStyle=w,F.fillRect(0,0,1,1);const q=F.getImageData(0,0,1,1).data,me=q[0],Ne=q[1],gt=q[2],Zt=q[3];return ws(ul(me,Ne,gt,Zt))}),Kn=w=>rr(w).map(ws).map(k=>"#"+k.value).getOr(w),Fl=(w,k,F)=>q=>{const me=ms(),Ne=lc(F),gt=()=>{const Zt=e1(w),Dn=Vn=>w.formatter.match(k,{value:F},Vn.dom,Ne);Ne?(q.setActive(!se(Zt,Dn)),me.set(w.formatter.formatChanged(k,Vn=>q.setActive(!Vn),!0))):(q.setActive(Fn(Zt,Dn)),me.set(w.formatter.formatChanged(k,q.setActive,!1,{value:F})))};return w.initialized?gt():w.on("init",gt),me.clear},Ko=w=>qn(w,"menu"),pc=w=>an(w,k=>{const F=k.text||k.title||"";return Ko(k)?{text:F,items:pc(k.menu)}:{text:F,value:k.value}}),pr=w=>w.length?oe.some(pc([{text:"Select...",value:"mce-no-match"},...w])):oe.none(),br=(w,k,F,q)=>an(k,me=>{const Ne=me.text||me.title;return Ko(me)?{type:"nestedmenuitem",text:Ne,getSubmenuItems:()=>br(w,me.menu,F,q)}:{text:Ne,type:"togglemenuitem",onAction:()=>q(me.value),onSetup:Fl(w,F,me.value)}}),Wi=(w,k)=>F=>{w.execCommand("mceTableApplyCellStyle",!1,{[k]:F})},Jm=w=>fn(w,k=>Ko(k)?[{...k,menu:Jm(k.menu)}]:as(k.value)?[k]:[]),Au=(w,k,F,q)=>me=>me(br(w,k,F,q)),pd=(w,k,F)=>{const q=an(k,me=>({text:me.title,value:"#"+Qm(me.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:q.length>0?q:void 0,allowCustomColors:!1},onAction:me=>{const Ne=me.value==="remove"?"":me.value;w.execCommand("mceTableApplyCellStyle",!1,{[F]:Ne})}}]},bd=w=>()=>{const F=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:F})},ia=w=>()=>{const F=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:F})},_u=w=>pr(Qr(w)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),Qy=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ll}],vd=w=>Qy.concat(_u(w).toArray()),Po=(w,k)=>{const q=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(pc(ui(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(q):q}},ef={normal:(w,k)=>{const F=w.dom;return{setAttrib:(gt,Zt)=>{F.setAttrib(k,gt,Zt)},setStyle:(gt,Zt)=>{F.setStyle(k,gt,Zt)},setFormat:(gt,Zt)=>{Zt===""?w.formatter.remove(gt,{value:null},k,!0):w.formatter.apply(gt,{value:Zt},k)}}}},xa=w=>qr(w,"rgb")?Kn(w):w,bc=w=>{const k=cs.fromDom(w);return{borderwidth:Bc(k,"border-width").getOr(""),borderstyle:Bc(k,"border-style").getOr(""),bordercolor:Bc(k,"border-color").map(xa).getOr(""),backgroundcolor:Bc(k,"background-color").map(xa).getOr("")}},Hs=w=>{const k=w[0],F=w.slice(1);return St(F,q=>{St(oo(k),me=>{dr(q,(Ne,gt)=>{const Zt=k[me];Zt!==""&&me===gt&&Zt!==Ne&&(k[me]=me==="class"?"mce-no-match":"")})})}),k},Ou=(w,k,F,q)=>bt(w,me=>!Tt(F.formatter.matchNode(q,k+me))).getOr(""),ar=U(Ou,["left","center","right"],"align"),tf=U(Ou,["top","middle","bottom"],"valign"),vh=(w,k)=>{const F=hh(w),q=Lr(w),me=()=>({borderstyle:ze(F,"border-style").getOr(""),bordercolor:xa(ze(F,"border-color").getOr("")),backgroundcolor:xa(ze(F,"background-color").getOr(""))}),Ne={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},gt=()=>{const rs=F["border-width"];return nc(w)&&rs?{border:rs}:ze(q,"border").fold(()=>({}),Es=>({border:Es}))},Zt=k?me():{},Dn=()=>{const rs=ze(F,"border-spacing").or(ze(q,"cellspacing")).fold(()=>({}),ir=>({cellspacing:ir})),Es=ze(F,"border-padding").or(ze(q,"cellpadding")).fold(()=>({}),ir=>({cellpadding:ir}));return{...rs,...Es}};return{...Ne,...F,...q,...Zt,...gt(),...Dn()}},n1=w=>Nl(cs.fromDom(w)).map(k=>{const F={selection:Ii(w.cells)};return qp(k,F)}).getOr(""),$S=(w,k,F)=>{const q=(Zt,Dn)=>{const Vn=Bc(cs.fromDom(Dn),"border-width");return nc(w)&&Vn.isSome()?Vn.getOr(""):Zt.getAttrib(Dn,"border")||ec(w.dom,Dn,"border-width")||ec(w.dom,Dn,"border")||""},me=w.dom,Ne=nc(w)?me.getStyle(k,"border-spacing")||me.getAttrib(k,"cellspacing"):me.getAttrib(k,"cellspacing")||me.getStyle(k,"border-spacing"),gt=nc(w)?ec(me,k,"padding")||me.getAttrib(k,"cellpadding"):me.getAttrib(k,"cellpadding")||ec(me,k,"padding");return{width:me.getStyle(k,"width")||me.getAttrib(k,"width"),height:me.getStyle(k,"height")||me.getAttrib(k,"height"),cellspacing:Ne??"",cellpadding:gt??"",border:q(me,k),caption:!!me.select("caption",k)[0],class:me.getAttrib(k,"class",""),align:ar(w,k),...F?bc(k):{}}},mi=(w,k,F)=>{const q=w.dom;return{height:q.getStyle(k,"height")||q.getAttrib(k,"height"),class:q.getAttrib(k,"class",""),type:n1(k),align:ar(w,k),...F?bc(k):{}}},Jy=(w,k,F,q)=>{const me=w.dom,Ne=q.getOr(k);return{width:((Zt,Dn)=>me.getStyle(Zt,Dn)||me.getAttrib(Zt,Dn))(Ne,"width"),scope:me.getAttrib(k,"scope"),celltype:Ht(k),class:me.getAttrib(k,"class",""),halign:ar(w,k),valign:tf(w,k),...F?bc(k):{}}},o1=(w,k)=>{const F=Gs.fromTable(w),q=Gs.justCells(F),me=st(q,Ne=>se(k,gt=>Wt(Ne.element,gt)));return an(me,Ne=>({element:Ne.element.dom,column:Gs.getColumnAt(F,Ne.column).map(gt=>gt.element.dom)}))},fi=(w,k,F,q)=>{q("scope")&&w.setAttrib("scope",F.scope),q("class")&&F.class!=="mce-no-match"&&w.setAttrib("class",F.class),q("width")&&k.setStyle("width",Xr(F.width))},o0=(w,k,F)=>{F("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",k.backgroundcolor),F("bordercolor")&&w.setFormat("tablecellbordercolor",k.bordercolor),F("borderstyle")&&w.setFormat("tablecellborderstyle",k.borderstyle),F("borderwidth")&&w.setFormat("tablecellborderwidth",Xr(k.borderwidth))},nf=(w,k,F,q)=>{const me=k.length===1;St(k,Ne=>{const gt=Ne.element,Zt=me?Ot:q,Dn=ef.normal(w,gt),Vn=Ne.column.map(rs=>ef.normal(w,rs)).getOr(Dn);fi(Dn,Vn,F,Zt),tc(w)&&o0(Dn,F,Zt),q("halign")&&Xm(w,gt,F.halign),q("valign")&&e0(w,gt,F.valign)})},ig=(w,k)=>{w.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},ug=(w,k,F,q)=>{const me=en(q,(Ne,gt)=>F[gt]!==Ne);rt(me)>0&&k.length>=1&&Nl(k[0]).each(Ne=>{const gt=o1(Ne,k),Zt=rt(en(me,(Vn,rs)=>rs!=="scope"&&rs!=="celltype"))>0,Dn=no(me,"celltype");(Zt||no(me,"scope"))&&nf(w,gt,q,U(no,me)),Dn&&ig(w,q),Hn(w,Ne.dom,{structure:Dn,style:Zt})})},s1=(w,k,F,q)=>{const me=q.getData();q.close(),w.undoManager.transact(()=>{ug(w,k,F,me),w.focus()})},s0=(w,k)=>{const F=Nl(k[0]).map(q=>an(o1(q,k),me=>Jy(w,me.element,tc(w),me.column)));return Hs(F.getOrDie())},Ll=w=>{const k=e1(w);if(k.length===0)return;const F=s0(w,k),q={type:"tabpanel",tabs:[{title:"General",name:"general",items:vd(w)},Po(w,"cell")]},me={type:"panel",items:[{type:"grid",columns:2,items:vd(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:tc(w)?q:me,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:U(s1,w,k,F)})},e2=w=>pr(Ir(w)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),yd=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Bo=w=>yd.concat(e2(w).toArray()),Sa=(w,k,F)=>{F("class")&&k.class!=="mce-no-match"&&w.setAttrib("class",k.class),F("height")&&w.setStyle("height",Xr(k.height))},Zi=(w,k,F)=>{F("backgroundcolor")&&w.setStyle("background-color",k.backgroundcolor),F("bordercolor")&&w.setStyle("border-color",k.bordercolor),F("borderstyle")&&w.setStyle("border-style",k.borderstyle)},r1=(w,k,F,q)=>{const Ne=k.length===1?Ot:q;St(k,gt=>{const Zt=G(cs.fromDom(gt),"td,th"),Dn=ef.normal(w,gt);Sa(Dn,F,Ne),Lc(w)&&Zi(Dn,F,Ne),q("height")&&St(Zt,Vn=>{w.dom.setStyle(Vn.dom,"height",null)}),q("align")&&Xm(w,gt,F.align)})},Cd=(w,k)=>{w.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},a1=(w,k,F,q)=>{const me=en(q,(Ne,gt)=>F[gt]!==Ne);if(rt(me)>0){const Ne=no(me,"type"),gt=Ne?rt(me)>1:!0;gt&&r1(w,k,q,U(no,me)),Ne&&Cd(w,q),Nl(cs.fromDom(k[0])).each(Zt=>Hn(w,Zt.dom,{structure:Ne,style:gt}))}},r0=(w,k,F,q)=>{const me=q.getData();q.close(),w.undoManager.transact(()=>{a1(w,k,F,me),w.focus()})},Gi=w=>{const k=la(Ja(w),ag.selected);if(k.length===0)return;const F=an(k,gt=>mi(w,gt.dom,Lc(w))),q=Hs(F),me={type:"tabpanel",tabs:[{title:"General",name:"general",items:Bo(w)},Po(w,"row")]},Ne={type:"panel",items:[{type:"grid",columns:2,items:Bo(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Lc(w)?me:Ne,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:q,onSubmit:U(r0,w,an(k,gt=>gt.dom),q)})},qi=(w,k,F)=>{const q=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],me=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Ne=Do(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],gt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Zt=k.length>0?[{name:"class",type:"listbox",label:"Class",items:k}]:[];return q.concat(me).concat(Ne).concat(gt).concat(Zt)},jo=(w,k,F,q)=>{if(k.tagName==="TD"||k.tagName==="TH")nn(F)&&Mt(q)?w.setStyle(k,F,q):w.setStyles(k,F);else if(k.children)for(let me=0;me<k.children.length;me++)jo(w,k.children[me],F,q)},a0=(w,k,F,q)=>{const me=w.dom,Ne={},gt={},Zt=nc(w),Dn=Ca(w),Vn=parseFloat(F.border)===0;if(!Tt(F.class)&&F.class!=="mce-no-match"&&(Ne.class=F.class),gt.height=Xr(F.height),Zt?gt.width=Xr(F.width):me.getAttrib(k,"width")&&(Ne.width=wr(F.width)),Zt?(Vn?(Ne.border=0,gt["border-width"]=""):(gt["border-width"]=Xr(F.border),Ne.border=1),gt["border-spacing"]=Xr(F.cellspacing)):(Ne.border=Vn?0:F.border,Ne.cellpadding=F.cellpadding,Ne.cellspacing=F.cellspacing),Zt&&k.children){const rs={};if(Vn?rs["border-width"]="":q.border&&(rs["border-width"]=Xr(F.border)),q.cellpadding&&(rs.padding=Xr(F.cellpadding)),Dn&&q.bordercolor&&(rs["border-color"]=F.bordercolor),!Fo(rs))for(let Es=0;Es<k.children.length;Es++)jo(me,k.children[Es],rs)}if(Dn){const rs=F;gt["background-color"]=rs.backgroundcolor,gt["border-color"]=rs.bordercolor,gt["border-style"]=rs.borderstyle}me.setStyles(k,{...hh(w),...gt}),me.setAttribs(k,{...Lr(w),...Ne})},Rs=(w,k,F,q)=>{const me=w.dom,Ne=q.getData(),gt=en(Ne,(Zt,Dn)=>F[Dn]!==Zt);q.close(),w.undoManager.transact(()=>{if(!k){const Zt=Ya(Ne.cols).getOr(1),Dn=Ya(Ne.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:Dn,columns:Zt}),k=Il(Ja(w),Uo(w)).bind(Vn=>Nl(Vn,Uo(w))).map(Vn=>Vn.dom).getOrDie()}if(rt(gt)>0){const Zt={border:no(gt,"border"),bordercolor:no(gt,"bordercolor"),cellpadding:no(gt,"cellpadding")};a0(w,k,Ne,Zt);const Dn=me.select("caption",k)[0];(Dn&&!Ne.caption||!Dn&&Ne.caption)&&w.execCommand("mceTableToggleCaption"),Xm(w,k,Ne.align)}if(w.focus(),w.addVisual(),rt(gt)>0){const Zt=no(gt,"caption"),Dn=Zt?rt(gt)>1:!0;Hn(w,k,{structure:Zt,style:Dn})}})},of=(w,k)=>{const F=w.dom;let q,me=vh(w,Ca(w));k?(me.cols="1",me.rows="1",Ca(w)&&(me.borderstyle="",me.bordercolor="",me.backgroundcolor="")):(q=F.getParent(w.selection.getStart(),"table",w.getBody()),q?me=$S(w,q,Ca(w)):Ca(w)&&(me.borderstyle="",me.bordercolor="",me.backgroundcolor=""));const Ne=pr(Ds(w));Ne.isSome()&&me.class&&(me.class=me.class.replace(/\s*mce\-item\-table\s*/g,""));const gt={type:"grid",columns:2,items:qi(w,Ne.getOr([]),k)},Zt=()=>({type:"panel",items:[gt]}),Dn=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[gt]},Po(w,"table")]}),Vn=Ca(w)?Dn():Zt();w.windowManager.open({title:"Table Properties",size:"normal",body:Vn,onSubmit:U(Rs,w,q,me),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:me})},cr=w=>{const k=F=>{ee(Ja(w))&&F()};dr({mceTableProps:U(of,w,!1),mceTableRowProps:U(Gi,w),mceTableCellProps:U(Ll,w),mceInsertTableDialog:U(of,w,!0)},(F,q)=>w.addCommand(q,()=>k(F)))},Ki=w=>({element:w,mergable:oe.none(),unmergable:oe.none(),selection:[w]}),ua=(w,k,F)=>({element:F,mergable:ea(k,w,ag),unmergable:Jr(w),selection:Rr(w)}),Du=w=>{const k=el(oe.none()),F=el([]);let q=oe.none();const me=Mc("caption"),Ne=vo=>q.forall(zs=>!zs[vo]),gt=()=>Ui(Ja(w),Uo(w)),Zt=()=>Ui(I(w),Uo(w)),Dn=()=>gt().bind(vo=>ha(jm(Nl(vo),Zt().bind(Nl),(zs,qs)=>Wt(zs,qs)?me(vo)?oe.some(Ki(vo)):oe.some(ua(e1(w),zs,vo)):oe.none()))),Vn=vo=>Nl(vo.element).map(qs=>{const wa=Gs.fromTable(qs),wh=og(wa,vo).getOr([]),hg=he(wh,(Eh,Th)=>(Th.isLocked&&(Eh.onAny=!0,Th.column===0?Eh.onFirst=!0:Th.column+Th.colspan>=wa.grid.columns&&(Eh.onLast=!0)),Eh),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:jp(wa,vo).isSome(),unmergeable:te(wa,vo).isSome(),locked:hg}}),rs=()=>{k.set(mo(Dn)()),q=k.get().bind(Vn),St(F.get(),Ye)},Es=vo=>(vo(),F.set(F.get().concat([vo])),()=>{F.set(st(F.get(),zs=>zs!==vo))}),ir=(vo,zs)=>Es(()=>k.get().fold(()=>{vo.setEnabled(!1)},qs=>{vo.setEnabled(!zs(qs)&&w.selection.isEditable())})),zc=(vo,zs,qs)=>Es(()=>k.get().fold(()=>{vo.setEnabled(!1),vo.setActive(!1)},wa=>{vo.setEnabled(!zs(wa)&&w.selection.isEditable()),vo.setActive(qs(wa))})),hi=vo=>q.exists(zs=>zs.locked[vo]),Ru=vo=>ir(vo,zs=>!1),zl=vo=>ir(vo,zs=>me(zs.element)),i1=vo=>zs=>ir(zs,qs=>me(qs.element)||hi(vo)),sf=vo=>zs=>ir(zs,qs=>me(qs.element)||vo().isNone()),mg=(vo,zs)=>qs=>ir(qs,wa=>me(wa.element)||vo().isNone()||hi(zs)),fg=vo=>ir(vo,zs=>Ne("mergeable")),gg=vo=>ir(vo,zs=>Ne("unmergeable")),rf=vo=>zc(vo,On,zs=>Nl(zs.element,Uo(w)).exists(wa=>Pe(wa,"caption"))),Sh=(vo,zs)=>qs=>zc(qs,wa=>me(wa.element),()=>w.queryCommandValue(vo)===zs),n2=Sh("mceTableRowType","header"),o2=Sh("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",rs),{onSetupTable:Ru,onSetupCellOrRow:zl,onSetupColumn:i1,onSetupPasteable:sf,onSetupPasteableColumn:mg,onSetupMergeable:fg,onSetupUnmergeable:gg,resetTargets:rs,onSetupTableWithCaption:rf,onSetupTableRowHeaders:n2,onSetupTableColumnHeaders:o2,targets:k.get}};var yh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const c1="x-tinymce/dom-table-",l1=c1+"rows",t2=c1+"columns",vc=w=>{const k=yh.read()??[];return Ln(k,F=>oe.from(F.getType(w)))},gi=()=>vc(l1),lr=()=>vc(t2),Hr=w=>k=>{const F=()=>{k.setEnabled(w.selection.isEditable())};return w.on("NodeChange",F),F(),()=>{w.off("NodeChange",F)}},Ch=(w,k)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Hr(w),fetch:Zt=>Zt("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=Zt=>()=>w.execCommand(Zt),q=(Zt,Dn)=>{w.queryCommandSupported(Dn.command)&&w.ui.registry.addButton(Zt,{...Dn,onAction:vn(Dn.onAction)?Dn.onAction:F(Dn.command)})},me=(Zt,Dn)=>{w.queryCommandSupported(Dn.command)&&w.ui.registry.addToggleButton(Zt,{...Dn,onAction:vn(Dn.onAction)?Dn.onAction:F(Dn.command)})};q("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),q("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),q("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),q("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),q("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),q("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),q("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),q("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),q("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),q("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),q("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),q("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),q("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),q("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),q("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(gi)}),q("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(gi)}),q("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),q("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),q("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(lr,"onFirst")}),q("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(lr,"onLast")}),q("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Hr(w)});const Ne=Jm(Ds(w));Ne.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Au(w,Ne,"tableclass",Zt=>w.execCommand("mceTableToggleClass",!1,Zt)),onSetup:k.onSetupTable});const gt=Jm(Qr(w));gt.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Au(w,gt,"tablecellclass",Zt=>w.execCommand("mceTableCellToggleClass",!1,Zt)),onSetup:k.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Au(w,ll,"tablecellverticalalign",Wi(w,"vertical-align")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Au(w,hr(w),"tablecellborderwidth",Wi(w,"border-width")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Au(w,ui(w),"tablecellborderstyle",Wi(w,"border-style")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Zt=>Zt(pd(w,Fr(w),"background-color")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Zt=>Zt(pd(w,sr(w),"border-color")),onSetup:k.onSetupCellOrRow})),me("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),me("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:bd(w),onSetup:k.onSetupTableRowHeaders}),me("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ia(w),onSetup:k.onSetupTableColumnHeaders})},dg=w=>{const k=q=>w.dom.is(q,"table")&&w.getBody().contains(q)&&w.dom.isEditable(q.parentNode),F=$l(w);F.length>0&&w.ui.registry.addContextToolbar("table",{predicate:k,items:F,scope:"node",position:"node"})},xh=w=>k=>{const F=()=>{k.setEnabled(w.selection.isEditable())};return w.on("NodeChange",F),F(),()=>{w.off("NodeChange",F)}},c0=(w,k)=>{const F=Es=>()=>w.execCommand(Es),q=(Es,ir)=>w.queryCommandSupported(ir.command)?(w.ui.registry.addMenuItem(Es,{...ir,onAction:vn(ir.onAction)?ir.onAction:F(ir.command)}),!0):!1,me=(Es,ir)=>{w.queryCommandSupported(ir.command)&&w.ui.registry.addToggleMenuItem(Es,{...ir,onAction:vn(ir.onAction)?ir.onAction:F(ir.command)})},Ne=Es=>{w.execCommand("mceInsertTable",!1,{rows:Es.numRows,columns:Es.numColumns})},gt=[q("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),q("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),q("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),q("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),q("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),q("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),q("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(gi)}),q("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(gi)})],Zt=[q("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),q("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),q("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),q("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),q("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),q("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(lr,"onFirst")}),q("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(lr,"onLast")})],Dn=[q("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),q("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),q("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];al(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Ne}],onSetup:xh(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:xh(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:xh(w)}),q("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),q("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),X(gt,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Xe("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),X(Zt,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Xe("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),X(Dn,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Xe("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(Xe(""),Es=>Dr(Es.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Vn=Jm(Ds(w));Vn.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>br(w,Vn,"tableclass",Es=>w.execCommand("mceTableToggleClass",!1,Es)),onSetup:k.onSetupTable});const rs=Jm(Qr(w));rs.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>br(w,rs,"tablecellclass",Es=>w.execCommand("mceTableCellToggleClass",!1,Es)),onSetup:k.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>br(w,ll,"tablecellverticalalign",Wi(w,"vertical-align")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>br(w,hr(w),"tablecellborderwidth",Wi(w,"border-width")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>br(w,ui(w),"tablecellborderstyle",Wi(w,"border-style")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>pd(w,Fr(w),"background-color"),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>pd(w,sr(w),"border-color"),onSetup:k.onSetupCellOrRow})),me("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),me("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:bd(w),onSetup:k.onSetupTableRowHeaders}),me("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ia(w),onSetup:k.onSetupTableRowHeaders})},Hl=w=>{const k=Du(w);Pl(w),cr(w),c0(w,k),Ch(w,k),dg(w)};var IS=()=>{V.add("table",Hl)};IS()}()),bX}var yX;function yJ(){return yX||(yX=1,vJ()),pX}yJ();var CX={},xX={},SX;function CJ(){return SX||(SX=1,function(){var V=tinymce.util.Tools.resolve("tinymce.PluginManager");const ue=(De,et)=>{De.focus(),De.undoManager.transact(()=>{De.setContent(et)}),De.selection.setCursorLocation(),De.nodeChanged()},ut=De=>De.getContent({source_view:!0}),ot=De=>{const et=ut(De);De.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:et},onSubmit:Tt=>{ue(De,Tt.getData().code),Tt.close()}})},Nt=De=>{De.addCommand("mceCodeEditor",()=>{ot(De)})},ft=De=>{const et=()=>De.execCommand("mceCodeEditor");De.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:et}),De.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:et})};var nn=()=>{V.add("code",De=>(Nt(De),ft(De),{}))};nn()}()),xX}var wX;function xJ(){return wX||(wX=1,CJ()),CX}xJ();const SJ=_o.lazy(()=>import("@tinymce/tinymce-react").then(V=>({default:V.Editor})));function wJ({value:V,onChange:ue,disabled:ut=!1}){const ot=_o.useMemo(()=>({height:500,menubar:!1,statusbar:!1,branding:!1,promotion:!1,plugins:["lists","link","image","table","code"],toolbar:"undo redo | bold italic underline | bullist numlist | table | link image | code",table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",content_style:`
        body {
          font-family: Inter, system-ui, sans-serif;
          font-size: 14px;
        }
      `}),[]);return ie.jsx(_o.Suspense,{fallback:ie.jsx("div",{className:"p-3 text-sm text-gray-400 border rounded-lg",children:"Loading editor…"}),children:ie.jsx(SJ,{licenseKey:"gpl",value:V,disabled:ut,onEditorChange:ue,init:ot})})}function Fk({field:V,formik:ue,methods:ut={},sqlOpsUrls:ot,refid:Nt,module_refid:ft="menuManager.main",optionsOverride:nn,setFieldOptions:De}){const{setHighlightedIndex:et,executeFieldMethod:Tt,handleFileUpload:$n,handleKeyDown:Mt,handleToggle:vn,setSearch:Cn,setOpen:pn,setIsFocused:un,handleInputChange:Xe,handleSelect:In,handlePersist:lt,optionCount:U,baseInputClasses:Ye,focusClasses:On,labelClasses:Ot,search:oe,highlightedIndex:Yt,options:Gn,isDisabled:jt,key:X,filteredOptions:se,open:os,listRef:an,detailsRef:St,isFocused:A}=eJ({field:V,formik:ue,methods:ut,sqlOpsUrls:ot,refid:Nt,module_refid:ft,...nn&&{optionsOverride:nn},...De&&{setFieldOptions:De}}),Mo=st=>st.icon?ie.jsx("i",{className:st.icon}):null;switch(V.type){case"suggest":case"autosuggest":case"autocomplete":{const he=ue.values[X]??"",de=oe!==""?oe:g7(Gn,he)??String(he??"");return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsx("input",{className:`${Ye} ${On}`,value:de,placeholder:V.placeholder||"Type to search...",onChange:Xe,onBlur:()=>{setTimeout(()=>pn(!1),150)},onKeyDown:bt=>{if(bt.key==="Enter"){if(bt.preventDefault(),se[Yt]){const[cn]=se[Yt];ue.setFieldValue(X,cn),lt(cn,V,ft)}else oe.trim()&&(ue.setFieldValue(X,oe.trim()),lt(oe.trim(),V,ft));pn(!1);return}Mt(bt,!0)},disabled:jt}),os&&!jt&&ie.jsx("div",{ref:an,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:se.length>0?se.map(([bt,cn],fn)=>ie.jsx("div",{id:`${X}-${bt}`,"data-index":fn,className:`px-3 py-2 cursor-pointer text-sm
                  ${Yt===fn?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>In(bt),children:cn},bt)):ie.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:`Press "ENTER" to ADD "${de}" `})}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]})}case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(V.multiple===!0){const he=ue.values[X];return ie.jsx(UY,{field:V,isDisabled:jt,handleToggle:vn,detailsRef:St,handleKeyDown:Mt,valueArray:he,labelClasses:Ot,listRef:an,search:oe,filteredOptions:se,highlightedIndex:Yt,setSearch:Cn,formik:ue,executeFieldMethod:Tt,setHighlightedIndex:et,handlePersist:lt,module_refid:ft,options:Gn})}return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("details",{className:`relative w-full ${jt?"opacity-70":""}`,onToggle:vn,ref:St,onKeyDown:he=>{jt||Mt(he,!0)},children:[ie.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${jt?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}
  `,children:[ie.jsx("span",{className:"text-sm text-gray-700",children:ue.values[X]?g7(Gn,ue.values[X])??"Select option":`Select ${V.label}`}),ie.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!jt&&ie.jsxs("div",{ref:an,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[V.search&&ie.jsx("div",{className:"sticky top-0 bg-white p-1",children:ie.jsx("input",{type:"text",value:oe,onChange:he=>{Cn(he.target.value),et(0)},onKeyDown:he=>Mt(he,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),se.length>0&&ie.jsx("div",{onClick:he=>{he.preventDefault(),he.stopPropagation(),ue.setFieldValue(X,""),lt("",V,ft),St.current?.removeAttribute("open"),Cn("")},className:"px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm hover:bg-gray-50",children:"Clear selection"}),se.length>0?se.map(([he,de],bt)=>ie.jsx("div",{id:`${X}-${he}`,"data-index":bt,onClick:cn=>{cn.preventDefault(),cn.stopPropagation(),ue.setFieldValue(X,he),lt(he,V,ft),St.current?.removeAttribute("open"),Cn(""),et(0),Tt("onChange",V,`${X}-${he}`)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${ue.values[X]===he?"bg-indigo-50 text-indigo-600 font-medium":Yt===bt?"bg-gray-100":"hover:bg-gray-50"}`,children:de},he)):ie.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(ue.errors[X])})]})}case"richtextarea":return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsx(wJ,{value:ue.values[X]??"",disabled:jt,onChange:he=>{ue.setFieldValue(X,he),lt(he,V,ft),Tt("onChange",V,X)}}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]});case"textarea":return ie.jsx(ie.Fragment,{children:ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative",children:[ie.jsx("textarea",{id:X,className:`${Ye} ${On} min-h-[120px] resize-none`,onFocus:()=>un(!0),name:X,value:ue.values[X],onBlur:ue.handleBlur,onChange:he=>{ue.setFieldValue(X,he.target.value),lt(he.target.value,V,ft),Tt("onChange",V,`${X}`)},placeholder:V.placeholder,disabled:jt}),ie.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]})});case"select":if(V.multiple===!0){const he=ue.values[X];return ie.jsx(UY,{field:V,isDisabled:jt,handleToggle:vn,detailsRef:St,handleKeyDown:Mt,valueArray:he,labelClasses:Ot,listRef:an,search:oe,filteredOptions:se,highlightedIndex:Yt,setSearch:Cn,formik:ue,executeFieldMethod:Tt,setHighlightedIndex:et,handlePersist:lt,module_refid:ft,options:Gn})}return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative",children:[ie.jsxs("select",{className:`${Ye} ${On} appearance-none ${jt?"":"cursor-pointer"} pr-12`,onFocus:()=>un(!0),name:X,id:X,value:ue.values[X],onBlur:ue.handleBlur,onChange:he=>{ue.setFieldValue(X,he.target.value),lt(he.target.value,V,ft),Tt("onChange",V,`${X}`)},disabled:jt,children:[ie.jsx("option",{value:"",disabled:!0,children:V?.["no-option"]||`Please select ${V.label}`}),!$Y(Gn)&&Object.entries(Gn).map(([he,de])=>ie.jsx("option",{value:he,className:"py-2",children:de},he)),$Y(Gn)&&Object.entries(Gn).map(([he,de])=>ie.jsx("optgroup",{label:he,children:Object.entries(de).map(([bt,cn])=>ie.jsx("option",{value:bt,children:cn},bt))},he))]}),ie.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:ie.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]});case"radioList":case"radio":return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsx("div",{className:`flex ${U>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(Gn||{}).map(([he,de])=>ie.jsxs("label",{htmlFor:`${X}-${he}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[ie.jsx("input",{id:`${X}-${he}`,type:"radio",name:X,checked:ue.values[X]===he,value:he,onChange:bt=>{ue.setFieldValue(X,bt.target.value),lt(bt.target.value,V,ft),Tt("onChange",V,`${X}-${he}`)},onBlur:ue.handleBlur,disabled:jt,className:`h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500
                    ${jt?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":""}
                    `}),de]},he))}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(ue.errors[X])})]});case"checkbox":{const he=ue.values[X];return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(Gn||{}).map(([de,bt])=>ie.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[ie.jsx("input",{id:`${X}-${de}`,type:"checkbox",checked:he.includes(de),onChange:cn=>{const fn=cn.target.checked?[...he,de]:he.filter(Fn=>Fn!==de);ue.setFieldValue(X,fn),lt(fn,V,ft),Tt("onChange",V,`${X}-${de}`)},onBlur:ue.handleBlur,disabled:jt,className:`h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500
                    ${jt?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":""}
                    `}),bt]},de))}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(ue.errors[X])})]})}case"tags":{const he=ue.values[X],de=oe.trim(),bt=Array.isArray(Gn)?Gn:Object.entries(Gn||{}).map(([ye,He])=>({value:ye,label:He})),cn=ye=>{if(!jt&&ye&&!he.includes(ye)){let He=[...he,ye];ue.setFieldValue(X,He),lt(He,V,ft),Cn("")}},fn=ye=>{let He=he.filter(P=>P!==ye);ue.setFieldValue(X,He),lt(He,V,ft)},Fn=ye=>bt.find(He=>He.value===ye)?.label??ye;return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:`${Ye} 
            flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center
            ${jt?"pointer-events-none opacity-70":""}
            `,onClick:()=>!jt&&document.getElementById(`${X}-input`)?.focus(),children:[he.map(ye=>ie.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[ie.jsx("span",{className:"text-indigo-700",children:Fn(ye)}),ie.jsx("button",{type:"button",onClick:He=>{He.stopPropagation(),jt||fn(ye)},onMouseDown:He=>He.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"×"})]},ye)),ie.jsx("input",{id:`${X}-input`,type:"text",value:oe,onChange:ye=>Cn(ye.target.value),onKeyDown:ye=>{(ye.key==="Enter"||ye.key===",")&&(ye.preventDefault(),cn(de))},placeholder:he.length===0?V.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:jt})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]})}case"photo":case"avatar":return ie.jsx(jY,{formik:ue,field:V,sqlOpsUrls:ot,module_refid:ft});case"attachment":case"file":const st=V.multiple===!0,Wo=Array.isArray(ue.values[X])?ue.values[X]:ue.values[X]?[ue.values[X]]:[];return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative mb-1",children:[V.icon&&ie.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:Mo(V)}),ie.jsx("input",{id:X,type:"file",className:`${Ye} ${On} ${V.icon?"pl-9":""} `,onFocus:()=>un(!0),name:X,multiple:st,onChange:he=>{const de=he.currentTarget.files;de&&$n(de),Tt("onChange",V,`${X}`)},onBlur:ue.handleBlur,placeholder:V.placeholder,disabled:jt}),ie.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Wo.map(he=>{const de=he?.split("/").pop();return ie.jsx(oJ,{sqlOpsUrls:ot,filePath:he},de)}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]});case"json":return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative",children:[ie.jsx("textarea",{id:X,name:X,value:ue.values[X],onChange:he=>{ue.setFieldValue(X,he.target.value),lt(he.target.value,V,ft),Tt("onChange",V,`${X}`)},onBlur:ue.handleBlur,placeholder:V.placeholder||"Enter valid JSON",disabled:jt,className:`${Ye} ${On} min-h-[200px] font-mono text-sm resize-y`}),ie.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]});case"date":return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative",children:[ie.jsx("div",{className:"absolute z-10 right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:ie.jsx("i",{className:"fa-solid fa-calendar"})}),ie.jsx("input",{id:X,type:"date",name:X,min:V.min,max:V.max,value:ue.values[X],onChange:he=>{ue.setFieldValue(X,he.target.value),lt(he.target.value,V,ft),Tt("onChange",V,`${X}`)},onBlur:ue.handleBlur,placeholder:V.placeholder,disabled:jt,className:`${Ye} ${On} ${V.icon?"pl-9":""}`}),ie.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]});case"number":return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative",children:[V.icon&&ie.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:Mo(V)}),ie.jsx("input",{id:X,type:"number",className:`${Ye} ${On} ${V.icon?"pl-9":""} `,onFocus:()=>un(!0),name:X,value:ue.values[X],onBlur:ue.handleBlur,onChange:he=>{ue.setFieldValue(X,he.target.value),lt(he.target.value,V,ft),Tt("onChange",V,`${X}`)},step:V.step,placeholder:V.placeholder,disabled:jt,min:V.min??1,max:V.max}),ie.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]});default:return ie.jsxs("div",{className:"relative",children:[ie.jsxs("label",{className:Ot,children:[V.label,V.required&&ie.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),ie.jsxs("div",{className:"relative",children:[V.icon&&ie.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:Mo(V)}),ie.jsx("input",{id:X,type:V.type||"text",className:`${Ye} ${On} ${V.icon?"pl-9":""} `,onFocus:()=>un(!0),name:X,value:ue.values[X],onBlur:ue.handleBlur,onChange:he=>{ue.setFieldValue(X,he.target.value),lt(he.target.value,V,ft),Tt("onChange",V,`${X}`)},step:V.step,placeholder:V.placeholder,disabled:jt,minLength:V.minlength,maxLength:V.maxlength}),ie.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),ue.touched[X]&&ue.errors[X]&&ie.jsx("span",{className:"text-xs text-red-500",children:String(ue.errors[X])})]})}}function EX({title:V,children:ue,isFirst:ut}){const[ot,Nt]=_o.useState(ut);return ie.jsx("div",{className:"group relative mt-1",children:ie.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[ie.jsxs("button",{onClick:()=>Nt(!ot),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${ot?"bg-action":"bg-gray-300"}`}),ie.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:V})]}),ie.jsxs("div",{className:`relative transition-all duration-300 ${ot?"rotate-180":""}`,children:[ie.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${ot?"bg-action opacity-30":"bg-transparent opacity-0"}`}),ie.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:ie.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),ie.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden  ${ot?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:ie.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white overflow-auto mb-5",children:ie.jsx("div",{className:"space-y-5 pt-4",children:ue})})})]})})}function n5({fields:V,formik:ue,methods:ut={},sqlOpsUrls:ot,refid:Nt,module_refid:ft,fieldOptions:nn,setFieldOptions:De}){return ie.jsx("div",{className:"bg-white min-h-3/10 overflow-auto",children:ie.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[ie.jsx("div",{className:"lg:col-span-2 flex flex-col ",children:ie.jsx("div",{className:"relative w-42 h-42 ",children:V?.filter(et=>et.type==="avatar").map(et=>ie.jsx(jY,{formik:ue,field:et,sqlOpsUrls:ot,module_refid:ft}))})}),ie.jsx("div",{className:"lg:col-span-10 min-h-0 max-h-40  overflow-y-auto custom-scrollbar",children:ie.jsx("div",{className:"grid grid-cols-12 gap-2",children:V?.map((et,Tt)=>et.type==="avatar"?null:ie.jsx("div",{className:`transition-colors duration-200 col-span-12 md:col-span-6 ${Pk[Bk(Number(et.width))]||"lg:col-span-4"}`,children:ie.jsx(Fk,{refid:Nt,module_refid:ft,sqlOpsUrls:ot,field:et,formik:ue,methods:ut,setFieldOptions:De,...nn?.[et.name]?{optionsOverride:nn[et.name]}:{}},et?.name||Tt)},et.name))})})]})})}function EJ({title:V,groupedFields:ue,data:ut,onSubmit:ot=$n=>{},onCancel:Nt=()=>{},methods:ft={},components:nn={},sqlOpsUrls:De,refid:et,module_refid:Tt}){const{common:$n=[],...Mt}=ue,[vn,Cn]=_o.useState({}),pn=(lt,U)=>{Cn(Ye=>({...Ye,[lt]:U}))},{initialValues:un,validationSchema:Xe}=_o.useMemo(()=>{const lt={},U={};return Object.values(ue).flat().forEach(Ye=>{Mk([Ye],lt,U,ut,Tt,De?.operation)}),{initialValues:lt,validationSchema:U}},[ue,ut,Tt,De?.operation]),In=QN.useFormik({initialValues:un,enableReinitialize:!0,validationSchema:Ni.object().shape(Xe),onSubmit:lt=>{ot(lt)}});return ie.jsx("div",{className:"relative z-10 max-w-full  m-4",children:ie.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:ie.jsxs("form",{onSubmit:In.handleSubmit,className:"p-4 mx-auto",children:[ie.jsxs("div",{className:"space-y-2",children:[$n.length>0&&ie.jsx(EX,{title:"Common",isFirst:!0,children:ie.jsx(n5,{refid:et,module_refid:Tt,sqlOpsUrls:De,fields:$n,formik:In,methods:ft,setFieldOptions:pn,fieldOptions:vn})}),Mt&&Object.entries(Mt).map(([lt,U],Ye)=>ie.jsx(EX,{title:lt,isFirst:Ye===0&&$n.length===0,children:ie.jsx("div",{className:"grid grid-cols-12 gap-4",children:U.map((On,Ot)=>e5(On.hidden)||On.type==="geolocation"?null:ie.jsx("div",{className:`col-span-12 md:col-span-6 ${Pk[Bk(Number(On.width))]||"lg:col-span-4"}`,children:ie.jsx(Fk,{refid:et,module_refid:Tt,sqlOpsUrls:De,components:nn,field:On,formik:In,methods:ft,setFieldOptions:pn,...vn[On.name]?{optionsOverride:vn[On.name]}:{}},On.name)},On?.name??`field-${Ot}`))})},lt))]}),ie.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[ie.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),ie.jsxs("div",{className:"space-x-3",children:[ie.jsx("button",{type:"button",onClick:Nt,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),ie.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function TJ({title:V,groupedFields:ue,data:ut,onSubmit:ot=Mt=>{},onCancel:Nt=()=>{},methods:ft={},components:nn={},sqlOpsUrls:De,widget:et,refid:Tt,module_refid:$n}){const{common:Mt=[],...vn}=ue,Cn=Object.keys(vn),[pn,un]=_o.useState(0),[Xe,In]=_o.useState({}),lt=(X,se)=>{In(os=>({...os,[X]:se}))},{initialValues:U,validationSchema:Ye,stepperSchemas:On}=_o.useMemo(()=>{const X={},se={},os={};return et?Object.entries(ue).forEach(([an,St])=>{const A={};Mk(St,X,A,ut,$n,De?.operation),os[an]=A}):Object.entries(ue).forEach(([an,St])=>{Mk(St,X,se,ut,$n,De?.operation)}),{initialValues:X,validationSchema:se,stepperSchemas:os}},[ue,ut,et,$n,De?.operation]),Ot=Cn[pn]??null,oe=et&&Ot?On[Ot]??{}:Ye,Yt=QN.useFormik({initialValues:U,enableReinitialize:!0,validationSchema:Ni.object().shape(oe),onSubmit:X=>{et?(pn<Cn.length-1&&un(se=>se+1),pn===Cn.length-1&&ot(X)):ot(X)}}),Gn=async X=>{if(X.preventDefault(),!et){const se=await Yt.validateForm();if(Object.keys(se).length>0){alert("Please fill all required fields before submitting."),Yt.setTouched(Object.keys(se).reduce((os,an)=>({...os,[an]:!0}),{}));return}}Yt.handleSubmit(X)},jt=()=>{un(X=>X>0?X-1:X)};return ie.jsx("div",{className:" max-w-full  m-4",children:ie.jsxs("form",{onSubmit:Gn,className:"w-full mx-auto",children:[ie.jsx("div",{className:"relative",children:ie.jsxs("div",{className:"relative  rounded-t-lg px-1 pt-1  shadow-inner",children:[Mt.length>0&&ie.jsx("div",{className:"p-3",children:ie.jsx(n5,{refid:Tt,module_refid:$n,sqlOpsUrls:De,fields:Mt,formik:Yt,methods:ft,setFieldOptions:lt,fieldOptions:Xe})}),ie.jsx("nav",{className:"relative flex bg-gray-100",children:Cn.map((X,se)=>ie.jsx("button",{type:"button",onClick:()=>un(se),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${pn===se?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:ie.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:X})},X))})]})}),ie.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[ie.jsx("div",{className:"grid grid-cols-12 gap-4",children:Ot&&vn[Ot]?.map((X,se)=>e5(X.hidden)||X.type==="geolocation"?null:ie.jsx("div",{className:`col-span-12  ${Pk[Bk(Number(X.width))]||"lg:col-span-4"}`,children:ie.jsx(Fk,{refid:Tt,module_refid:$n,sqlOpsUrls:De,field:X,formik:Yt,methods:ft,components:nn,setFieldOptions:lt,...Xe[X.name]?{optionsOverride:Xe[X.name]}:{}},X.name)},X?.name??`field-${se}`))}),ie.jsxs("div",{className:`mt-8 flex ${pn>0?"justify-between":"justify-end"} space-x-3`,children:[pn>0&&ie.jsx("button",{onClick:jt,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),ie.jsxs("div",{className:"space-x-3",children:[ie.jsx("button",{onClick:Nt,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),ie.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:et?"Next":"Save"})]})]}),ie.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:ie.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[ie.jsxs("div",{className:"flex items-center",children:[ie.jsxs("span",{children:["Tab ",pn+1," of ",Cn.length]}),ie.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),ie.jsx("div",{className:"flex gap-1",children:Cn.map((X,se)=>ie.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${se===pn?"bg-action w-6":"bg-gray-300"}`},se))})]})})]},Cn[pn])]})})}function kJ({title:V,fields:ue,data:ut,onSubmit:ot=Tt=>{},onCancel:Nt=()=>{},methods:ft={},sqlOpsUrls:nn,refid:De,module_refid:et}){const Tt=ZQ(ue,nn?.operation),[$n,Mt]=_o.useState({}),vn=(lt,U)=>{Mt(Ye=>({...Ye,[lt]:U}))},{commonFields:Cn,otherFields:pn}=_o.useMemo(()=>Tt.reduce((lt,U)=>(U.group==="common"?lt.commonFields.push(U):lt.otherFields.push(U),lt),{commonFields:[],otherFields:[]}),[Tt]),{initialValues:un,validationSchema:Xe}=_o.useMemo(()=>{const lt={},U={};return Tt.forEach(Ye=>{Mk([Ye],lt,U,ut,et,nn?.operation)}),{initialValues:lt,validationSchema:U}},[Tt,ut]),In=QN.useFormik({initialValues:un,enableReinitialize:!0,validationSchema:Ni.object().shape(Xe),onSubmit:lt=>{ot(lt)}});return ie.jsx(ie.Fragment,{children:ie.jsx("div",{className:"relative z-10 max-w-full  m-4",children:ie.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:ie.jsxs("form",{onSubmit:In.handleSubmit,className:"p-4  mx-auto",children:[Cn.length>0&&ie.jsx(n5,{refid:De,module_refid:et,sqlOpsUrls:nn,fields:Cn,formik:In,methods:ft,setFieldOptions:vn,fieldOptions:$n}),ie.jsx("div",{className:"grid grid-cols-12 gap-4",children:pn.map((lt,U)=>e5(lt.hidden)||lt.type==="geolocation"?null:ie.jsx("div",{className:`col-span-12 md:col-span-6 ${Pk[Bk(Number(lt.width))]||"lg:col-span-4"}`,children:ie.jsx(Fk,{refid:De,module_refid:et,sqlOpsUrls:nn,field:lt,formik:In,methods:ft,setFieldOptions:vn,...$n[lt.name]?{optionsOverride:$n[lt.name]}:{}})},lt?.name??`field-${U}`))}),ie.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[ie.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),ie.jsxs("div",{className:"space-x-3",children:[ie.jsx("button",{type:"button",onClick:Nt,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),ie.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})})}function TX({title:V,children:ue}){return ie.jsx("div",{className:"group relative mt-1",children:ie.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[ie.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:ie.jsxs("div",{className:"flex items-center space-x-3",children:[ie.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),ie.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:V})]})}),ie.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:ie.jsx("div",{className:"px-4 pb-4 bg-gradient-to-br from-gray-50/50 to-white",children:ie.jsx("div",{className:"space-y-5 pt-4",children:ue})})})]})})}function AJ({title:V,groupedFields:ue,data:ut,onSubmit:ot=$n=>{},onCancel:Nt=()=>{},methods:ft={},components:nn={},sqlOpsUrls:De,refid:et,module_refid:Tt}){const{common:$n=[],...Mt}=ue,[vn,Cn]=_o.useState({}),pn=(lt,U)=>{Cn(Ye=>({...Ye,[lt]:U}))},{initialValues:un,validationSchema:Xe}=_o.useMemo(()=>{const lt={},U={};return Object.values(ue).flat().forEach(Ye=>{Mk([Ye],lt,U,ut,Tt,De?.operation)}),{initialValues:lt,validationSchema:U}},[ue,ut,Tt,De?.operation]),In=QN.useFormik({initialValues:un,enableReinitialize:!0,validationSchema:Ni.object().shape(Xe),onSubmit:lt=>{ot(lt)}});return ie.jsx("div",{className:"relative z-10 max-w-full  m-4",children:ie.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:ie.jsxs("form",{onSubmit:In.handleSubmit,className:"p-4 mx-auto",children:[ie.jsxs("div",{className:"space-y-2",children:[$n.length>0&&ie.jsx(TX,{title:"Common",children:ie.jsx(n5,{refid:et,module_refid:Tt,sqlOpsUrls:De,fields:$n,formik:In,methods:ft,setFieldOptions:pn,fieldOptions:vn})}),Mt&&Object.entries(Mt).map(([lt,U],Ye)=>ie.jsx(TX,{title:lt,children:ie.jsx("div",{className:"grid grid-cols-12 gap-4",children:U.map((On,Ot)=>e5(On.hidden)||On.type==="geolocation"?null:ie.jsx("div",{className:`col-span-12 md:col-span-6 ${Pk[Bk(Number(On.width))]||"lg:col-span-4"}`,children:ie.jsx(Fk,{refid:et,module_refid:Tt,sqlOpsUrls:De,components:nn,field:On,formik:In,methods:ft,setFieldOptions:pn,...vn[On.name]?{optionsOverride:vn[On.name]}:{}},On.name)},On?.name??`field-${Ot}`))})},lt))]}),ie.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[ie.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),ie.jsxs("div",{className:"space-x-3",children:[ie.jsx("button",{type:"button",onClick:Nt,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),ie.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function _J({formJson:V,methods:ue={},userid:ut=null,onCancel:ot=()=>{},components:Nt={},callback:ft=()=>{},initialvalues:nn={}}){let De=zQ(V);const et=V.endPoints,Tt=V?.source?.refid,$n=VQ(V?.fields??{},et?.operation),[Mt,vn]=_o.useState(nn),Cn=_o.useMemo(()=>WQ(V.fields),[V.fields]);_o.useEffect(()=>{let Xe=!0;return(async()=>{const lt=V?.source??{};if(!lt?.type){Xe&&vn({});return}if(lt.type==="method"){const U=lt.method,Ye=U?ue[U]:void 0;if(Ye)try{const On=await Promise.resolve(Ye());Xe&&vn(On??{})}catch(On){console.error("Method execution failed:",On),Xe&&vn({})}else Xe&&vn({})}if(lt.type==="api"&&et?.operation!=="create")try{const U=await Ri({method:lt.method||"GET",url:lt.url??"",data:lt.body??{},params:lt.params??{},headers:lt.headers??{}});Xe&&vn(U.data??{})}catch(U){console.error("API fetch failed:",U),Xe&&vn({})}if(lt.type==="sql"&&lt.refid&&lt.refid!=="0"&&et?.operation!=="create"||et?.operation!=="create"&&lt.dbopsid){if(!et){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const U=await JQ.fetch(et,{source:{...lt,table:lt.table,columns:lt.columns,where:Fp(lt.where,{refid:Tt})},fields:BY(V.fields,et.operation)},lt?.dbopsid,V?.module_refid);Xe&&vn(U)}catch(U){console.error("API fetch failed:",U)}}})(),()=>{Xe=!1}},[ut,V?.source?.type||"",V?.source?.method||"",V?.source?.url||"",JSON.stringify(V?.source?.params??{}),JSON.stringify(V?.source?.body??{}),JSON.stringify(V?.source?.headers??{})]);const pn=async Xe=>{const In=V?.source??{};let lt=null;if(Cn.length>0)try{lt=await jQ()}catch(Ye){console.error("catch fetchGeolocation",Ye),lt=null}const U={...Xe,...Object.fromEntries(Cn.map(Ye=>[Ye,lt]))};if(In.type==="method"){const Ye=In.method,On=Ye?ue[Ye]:void 0;if(On)try{const Ot=await Promise.resolve(On(U));if(ft?.(Ot),ue?.handleActions){let oe=et?.operation==="update"?Tt:Ot?.data?.refid;const Yt=V?.gotolink?.replace("{hashid}",String(oe));ue.handleActions(Yt)}}catch(Ot){ft?.(Ot),console.error("Method execution failed:",Ot)}}if(In.type==="api"){if(!et){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const Ye=await Ri({method:In.method||"POST",url:et.baseURL+In.endpoint,data:U??{},headers:{Authorization:`Bearer ${et?.accessToken}`}});if(ft?.(Ye),ue?.handleActions){let On=et.operation==="update"?Tt:Ye?.data?.refid;const Ot=V?.gotolink?.replace("{hashid}",String(On));ue.handleActions(Ot)}}catch(Ye){ft?.(Ye),console.error("API fetch failed:",Ye)}}if(In.type==="sql"){const Ye=V.endPoints;if(!Ye){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let On=!1,Ot;In?.dbopsid&&(On=!0,Ot=In?.dbopsid);const oe=await Ri({method:"GET",url:Ye.baseURL+Ye.dbopsGetHash,headers:{Authorization:`Bearer ${Ye?.accessToken}`}});if(!On){let Gn={...In};In.where&&(Gn={...In,where:Fp(In.where,{refid:Tt})}),Ot=(await Ri({method:"POST",url:Ye.baseURL+Ye.dbopsGetRefId,data:{operation:Ye.operation,source:Gn,fields:BY(V.fields,Ye.operation),forcefill:V.forcefill,datahash:oe.data.refhash,srcid:V?.module_refid},headers:{Authorization:`Bearer ${Ye?.accessToken}`}}))?.data.refid}const Yt=await Ri({method:"POST",url:Ye.baseURL+Ye[Ye.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:Ot,fields:U,datahash:oe.data.refhash},headers:{Authorization:`Bearer ${Ye?.accessToken}`}});if(ft?.(Yt),ue?.handleActions){let Gn=Ye.operation==="update"?Tt:Yt?.data?.refid;const jt=V?.gotolink?.replace("{hashid}",String(Gn));ue.handleActions(jt)}}catch(On){ft?.(On),console.error("API fetch failed:",On)}}},un={accordion:ie.jsx(EJ,{title:V?.title??"",groupedFields:$n,data:Mt,onSubmit:pn,onCancel:ot,methods:ue,components:Nt,sqlOpsUrls:et,refid:Tt,module_refid:V?.module_refid}),cards:ie.jsx(AJ,{title:V?.title??"",groupedFields:$n,data:Mt,onSubmit:pn,onCancel:ot,methods:ue,components:Nt,sqlOpsUrls:et,refid:Tt,module_refid:V?.module_refid}),tab:ie.jsx(TJ,{title:V?.title??"",groupedFields:$n,data:Mt,onSubmit:pn,onCancel:ot,methods:ue,components:Nt,widget:V?.widget,sqlOpsUrls:et,refid:Tt,module_refid:V?.module_refid}),simple:ie.jsx(kJ,{title:V?.title??"",fields:V.fields,data:Mt,onSubmit:pn,onCancel:ot,methods:ue,components:Nt,sqlOpsUrls:et,refid:Tt,module_refid:V?.module_refid})};return ie.jsx("div",{className:"relative",children:un[De]})}mh.LogiksForm=_J,Object.defineProperty(mh,Symbol.toStringTag,{value:"Module"})});
