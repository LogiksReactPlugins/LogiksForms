(function(G,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],E):(G=typeof globalThis<"u"?globalThis:G||self,E(G.LogiksForm={},G.React,G.axios,G.Yup,G.formik))})(this,function(G,E,B,xe,ee){"use strict";function ge(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const n=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,n.get?n:{enumerable:!0,get:()=>e[o]})}}return r.default=e,Object.freeze(r)}const L=ge(xe);var te={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function fe(){if(he)return Q;he=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(n,u,i){var O=null;if(i!==void 0&&(O=""+i),u.key!==void 0&&(O=""+u.key),"key"in u){i={};for(var w in u)w!=="key"&&(i[w]=u[w])}else i=u;return u=i.ref,{$$typeof:e,type:n,key:O,ref:u!==void 0?u:null,props:i}}return Q.Fragment=r,Q.jsx=o,Q.jsxs=o,Q}var X={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function ye(){return me||(me=1,process.env.NODE_ENV!=="production"&&function(){function e(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case c:return"Fragment";case N:return"Profiler";case g:return"StrictMode";case A:return"Suspense";case I:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(typeof s.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),s.$$typeof){case F:return"Portal";case $:return(s.displayName||"Context")+".Provider";case m:return(s._context.displayName||"Context")+".Consumer";case a:var h=s.render;return s=s.displayName,s||(s=h.displayName||h.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case M:return h=s.displayName||null,h!==null?h:e(s.type)||"Memo";case f:h=s._payload,s=s._init;try{return e(s(h))}catch{}}return null}function r(s){return""+s}function o(s){try{r(s);var h=!1}catch{h=!0}if(h){h=console;var C=h.error,_=typeof Symbol=="function"&&Symbol.toStringTag&&s[Symbol.toStringTag]||s.constructor.name||"Object";return C.call(h,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",_),r(s)}}function n(s){if(s===c)return"<>";if(typeof s=="object"&&s!==null&&s.$$typeof===f)return"<...>";try{var h=e(s);return h?"<"+h+">":"<...>"}catch{return"<...>"}}function u(){var s=D.A;return s===null?null:s.getOwner()}function i(){return Error("react-stack-top-frame")}function O(s){if(W.call(s,"key")){var h=Object.getOwnPropertyDescriptor(s,"key").get;if(h&&h.isReactWarning)return!1}return s.key!==void 0}function w(s,h){function C(){b||(b=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",h))}C.isReactWarning=!0,Object.defineProperty(s,"key",{get:C,configurable:!0})}function d(){var s=e(this.type);return v[s]||(v[s]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),s=this.props.ref,s!==void 0?s:null}function x(s,h,C,_,z,K,ce,de){return C=K.ref,s={$$typeof:T,type:s,key:h,props:K,_owner:z},(C!==void 0?C:null)!==null?Object.defineProperty(s,"ref",{enumerable:!1,get:d}):Object.defineProperty(s,"ref",{enumerable:!1,value:null}),s._store={},Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(s,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(s,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ce}),Object.defineProperty(s,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:de}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s}function y(s,h,C,_,z,K,ce,de){var q=h.children;if(q!==void 0)if(_)if(l(q)){for(_=0;_<q.length;_++)j(q[_]);Object.freeze&&Object.freeze(q)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else j(q);if(W.call(h,"key")){q=e(s);var H=Object.keys(h).filter(function(Le){return Le!=="key"});_=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",Y[q+_]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,_,q,H,q),Y[q+_]=!0)}if(q=null,C!==void 0&&(o(C),q=""+C),O(h)&&(o(h.key),q=""+h.key),"key"in h){C={};for(var ue in h)ue!=="key"&&(C[ue]=h[ue])}else C=h;return q&&w(C,typeof s=="function"?s.displayName||s.name||"Unknown":s),x(s,q,K,z,u(),C,ce,de)}function j(s){typeof s=="object"&&s!==null&&s.$$typeof===T&&s._store&&(s._store.validated=1)}var p=E,T=Symbol.for("react.transitional.element"),F=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),$=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),V=Symbol.for("react.client.reference"),D=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=Object.prototype.hasOwnProperty,l=Array.isArray,S=console.createTask?console.createTask:function(){return null};p={"react-stack-bottom-frame":function(s){return s()}};var b,v={},k=p["react-stack-bottom-frame"].bind(p,i)(),R=S(n(i)),Y={};X.Fragment=c,X.jsx=function(s,h,C,_,z){var K=1e4>D.recentlyCreatedOwnerStacks++;return y(s,h,C,!1,_,z,K?Error("react-stack-top-frame"):k,K?S(n(s)):R)},X.jsxs=function(s,h,C,_,z){var K=1e4>D.recentlyCreatedOwnerStacks++;return y(s,h,C,!0,_,z,K?Error("react-stack-top-frame"):k,K?S(n(s)):R)}}()),X}var pe;function ve(){return pe||(pe=1,process.env.NODE_ENV==="production"?te.exports=fe():te.exports=ye()),te.exports}var t=ve();function je(e){return e.template==="accordion"?"accordion":e.template==="simple"?"simple":e.template==="cards"?"cards":Object.values(e.fields||{}).some(n=>n.group)?"tab":"simple"}function Ne(e){const r={},o="General";return Object.entries(e).forEach(([n,u])=>{const i=u.group||o;r[i]||(r[i]=[]);let O={...u,name:n};r[i].push(O)}),r}function we(e){const r={};return Object.keys(e).forEach(o=>{r[o]={label:o,required:e[o].required??!1}}),r}const Z=(e,r,o)=>{e.forEach(n=>{const u=n?.name;if(!u)return;n?.default!==void 0&&n?.default!==null?r[u]=n.default:n?.type==="checkbox"?r[u]=n?.multiple===!0?[]:!1:n?.type==="tags"?r[u]=[]:u==="blocked"||u==="blacklist"?r[u]="false":r[u]=n?.default??"";let i;n?.type==="checkbox"?i=n?.multiple===!0?L.array().of(L.string()):L.boolean():n?.type==="tags"?i=L.array().of(L.string()):n?.type==="email"?i=L.string().email("Invalid email format"):n?.type==="number"?i=L.number().typeError("Must be a number"):n?.type==="date"?i=L.date().typeError("Invalid date format"):n?.type==="json"?i=L.string().test("is-json","Invalid JSON format",O=>{if(!O)return!0;try{return JSON.parse(O),!0}catch{return!1}}):i=L.string(),n?.required&&(i=i.required(n?.placeholder||n?.error_message||`${n?.label||u} is required`)),n?.validate?.regex&&typeof n.validate.regex=="string"&&(i=i.matches(new RegExp(n?.validate?.regex),n?.error_message||"Invalid input format")),n?.validate&&Object.entries(n.validate).forEach(([O,w])=>{switch(O){case"email":w&&(i=i.email("Invalid email format"));break;case"mobile":i=i.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":i=i.matches(new RegExp(w),`Must match pattern: ${w}`);break;case"date":i=L.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((d,x)=>{if(typeof x=="string"){const y=x.replace(/-/g,"/"),[j,p,T]=y.split("/");if(j&&p&&T)return new Date(`${T}-${p}-${j}`)}return d});break;case"time":i=i.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":i=i.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":i=L.number().typeError("Must be numeric");break;case"float":case"decimal":i=L.number().typeError("Must be a decimal").transform((d,x)=>{if(x==null||x==="")return;const y=Number(x);if(isNaN(y))return d;if(typeof d=="number"&&!isNaN(d)){const j=Number(d);return Number.isInteger(j)?Number(y.toFixed(j)):y}return y});break;case"alphanumeric":i=i.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":i=i.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":i=i.transform(d=>d&&d.toUpperCase());break;case"lower":i=i.transform(d=>d&&d.toLowerCase());break;case"length-min":{const d=Number(w);isNaN(d)||(i=i.min(d,`Minimum length is ${d}`));break}case"length-max":{const d=Number(w);isNaN(d)||(i=i.max(d,`Maximum length is ${d}`));break}}}),o[u]=i})},re={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function se(e){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(e)?e:6}const ae=e=>e===!0||e==="true",U=(e,r)=>typeof e=="string"?e.replace(/#(\w+)#/g,(o,n)=>r[n]!==void 0?String(r[n]):o):Array.isArray(e)?e.map(o=>U(o,r)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([o,n])=>[U(o,r),U(n,r)])):e,oe=(e,r,o,n)=>{const u=Array.isArray(o?.data?.data)?o.data.data:Array.isArray(o?.data)?o.data:o;if(!Array.isArray(u)||u.length===0)return{};const i=n??(u[0]&&typeof u[0]=="object"&&"category"in u[0]?"category":void 0);if(!i){const w={};return u.forEach(d=>{d[e]!=null&&d[r]!=null&&(w[d[e]]=d[r])}),w}const O={};return u.forEach(w=>{const d=w[i]??"Others",x=w[e],y=w[r];x==null||y==null||(O[d]||(O[d]={}),O[d][x]=y)}),O},Se=(e,r)=>{if(!e||r==null)return;if(typeof Object.values(e)[0]=="string")return e[r];for(const n of Object.values(e))if(r in n)return n[r]},Ee=e=>e?typeof Object.values(e)[0]=="string"?Object.entries(e):Object.values(e).flatMap(o=>Object.entries(o)):[],be=e=>{if(!e||typeof e!="object")return!1;const r=Object.values(e)[0];return typeof r=="object"&&r!==null};async function Oe(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const e=await new Promise((n,u)=>{navigator.geolocation.getCurrentPosition(n,u,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:r,longitude:o}=e.coords;return`${r},${o}`}catch(e){if(!(e instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(e.code){case e.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case e.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case e.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const Te=e=>Object.entries(e??{}).filter(([,r])=>r.type==="geolocation").map(([r])=>r);function ne({field:e,formik:r,methods:o={},sqlOpsUrls:n,refid:u,optionsOverride:i,setFieldOptions:O}){const[w,d]=E.useState(!1),[x,y]=E.useState(i??e.options??{}),[j,p]=E.useState(""),[T,F]=E.useState(0),c=E.useRef(null),g=E.useRef(null),[N,m]=E.useState(!1),$=l=>{l.currentTarget.open||p("")};E.useEffect(()=>{i&&y(i)},[i]),E.useEffect(()=>{const l=S=>{g.current&&!g.current.contains(S.target)&&(g.current.open=!1,p(""))};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[]);const a=e.name;E.useEffect(()=>{let l=!0;return(async()=>{if(e?.options){y(e.options);return}const b=e?.source??{};if(b.type==="method"){const v=b.method,k=v?o[v]:void 0;if(k)try{const R=await Promise.resolve(k());l&&y(R??{})}catch(R){console.error("Method execution failed:",R),l&&y({})}else l&&y({})}if(b.type==="api"&&b.url)try{const v=await B({method:b.method||"GET",url:b.url,data:b.body??{},params:b.params??{},headers:b.headers??{}}),k=e.valueKey||"value",R=e.labelKey||"title",Y=oe(k,R,v,e.groupKey);l&&y(Y)}catch(v){console.error("API execution failed:",v),l&&y({})}if(e.table||e.type==="dataSelector"){if(!n){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let v;if(e.type==="dataSelector")v={table:"do_lists",cols:"title,value",where:{groupid:e.groupid??""}};else{if(!e.table||!e.columns){console.error("Invalid SQL field config",e);return}v={table:e.table,cols:e.columns}}e.where&&e.type!=="dataSelector"&&(v.where=u?U(e.where,{refid:u}):e.where);const k=await B({method:"POST",url:n.baseURL+n.registerQuery,data:{query:v},headers:{Authorization:`Bearer ${n?.accessToken}`}}),R=await B({method:"POST",url:n.baseURL+n.runQuery,data:{queryid:k.data.queryid,filter:{}},headers:{Authorization:`Bearer ${n?.accessToken}`}}),Y=e.valueKey||"value",s=e.labelKey||"title",h=oe(Y,s,R,e.groupKey);l&&y(h)}catch(v){console.error("API fetch failed:",v)}}})(),()=>{l=!1}},[e.options,e.source,e.table,e.columns,e.where,u]);const A=`
    w-full px-4 py-2 rounded-lg border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0
  `,I=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,M=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,f=l=>l.icon?t.jsx("i",{className:l.icon}):null,P=E.useMemo(()=>Ee(x),[x]),V=P.length,D=E.useMemo(()=>j?P.filter(([,l])=>l.toLowerCase().includes(j.toLowerCase())):P,[j,P]),W=(l,S)=>{if(g.current?.open===!0||N===!0)if(l.key==="ArrowDown")l.preventDefault(),F(b=>b+1<D.length?b+1:0);else if(l.key==="ArrowUp")l.preventDefault(),F(b=>b-1>=0?b-1:D.length-1);else if(l.key==="Enter"){l.preventDefault();const[b]=D[T]||[];b&&r.setFieldValue(e.name,S?b:[...r.values[e.name],b]),g.current&&(g.current.open=!1)}else l.key==="Escape"&&(g.current.open=!1,p(""),m(!1))};switch(E.useEffect(()=>{c.current?.querySelector(`[data-index="${T}"]`)?.scrollIntoView({block:"nearest"})},[T]),E.useEffect(()=>{T>=D.length&&F(0)},[D,T]),E.useEffect(()=>{const l=e.autocomplete,S=e.ajaxchain,b=l||S;if(!b||b==="off")return;const v=r.values[e.name];if(!v)return;(async()=>{try{const R=b.src,Y=U(R.where??{},{refid:v});if(R.table&&n){const s=await B({method:"POST",url:n.baseURL+n.registerQuery,data:{query:{...R,table:R.table,cols:R.columns,where:Y}},headers:{Authorization:`Bearer ${n?.accessToken}`}}),{data:h}=await B({method:"POST",url:n.baseURL+n.runQuery,data:{queryid:s.data.queryid,filter:{}},headers:{Authorization:`Bearer ${n?.accessToken}`}});if(l){const C=b.target.split(",").map(z=>z.trim()),_=Array.isArray(h?.data)?h?.data[0]:h?.data;if(!_)return;C.forEach(z=>{_[z]!==void 0&&r.setFieldValue(z,_[z])})}if(S){const C=e.valueKey||"value",_=e.labelKey||"title",z=oe(C,_,h,e.groupKey);O?.(S.target,z)}}}catch(R){console.error("Autocomplete fetch failed",R)}})()},[r.values[e.name]]),e.type){case"autocomplete":{const l=b=>{const v=b.target.value;p(v),r.setFieldValue(a,v),m(!0)},S=(b,v)=>{v.preventDefault(),v.stopPropagation(),r.setFieldValue(a,b),m(!1)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{className:`${A} ${I}`,value:r.values[a],placeholder:e.placeholder||"Type to search...",onChange:l,onFocus:()=>m(!0),onBlur:()=>setTimeout(()=>m(!1),150),onKeyDown:b=>W(b,!0)}),N&&t.jsx("div",{ref:c,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:D.length>0?D.map(([b,v],k)=>t.jsx("div",{"data-index":k,className:`px-3 py-2 cursor-pointer text-sm 
    ${T===k?"bg-gray-100":"hover:bg-gray-100"}
  `,onMouseDown:R=>S(b,R),children:v},k)):t.jsxs("div",{className:"px-3 py-2 text-sm text-gray-400 cursor-pointer",children:['No matches — select to keep "',j,'"']})}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"textarea":return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{className:`${A} ${I} min-h-[120px] resize-none`,onFocus:()=>d(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${w?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})});case"select":case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":return V>10?t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:g,onKeyDown:l=>W(l,!0),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[a]?Se(x,r.values[a])??"Select option":`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:c,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:j,onChange:l=>{p(l.target.value),F(0)},onKeyDown:l=>W(l,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),D.length>0?D.map(([l,S],b)=>t.jsx("div",{"data-index":b,onClick:v=>{v.preventDefault(),v.stopPropagation(),r.setFieldValue(a,l),g.current?.removeAttribute("open"),p(""),F(0)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[a]===l?"bg-indigo-50 text-indigo-600 font-medium":T===b?"bg-gray-100":"hover:bg-gray-50"}`,children:S},l)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]}):t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:`${A} ${I} appearance-none cursor-pointer pr-12`,onFocus:()=>d(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,disabled:e.disabled,children:[t.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Please select an option"}),!be(x)&&Object.entries(x).map(([l,S])=>t.jsx("option",{value:l,className:"py-2",children:S},l)),be(x)&&Object.entries(x).map(([l,S])=>t.jsx("optgroup",{label:l,children:Object.entries(S).map(([b,v])=>t.jsx("option",{value:b,children:v},b))},l))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"radioList":case"radio":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`flex ${V>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(x||{}).map(([l,S])=>t.jsxs("label",{htmlFor:`${a}-${l}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${a}-${l}`,type:"radio",name:a,checked:r.values[a]===l,value:l,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},l))}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]});case"checkbox":{if(V===1){const[l,S]=Object.entries(x||{})[0]||[a,e.label];return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"flex  space-x-2",children:[t.jsx("input",{id:a,type:"checkbox",name:a,checked:r.values[a]||!1,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),t.jsx("label",{htmlFor:a,className:"text-sm font-medium text-gray-700 cursor-pointer",children:S})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}return V>1&&V<=5?t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(x||{}).map(([l,S])=>t.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",name:a,value:l,checked:Array.isArray(r.values[a])?r.values[a]?.includes(l):!1,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},l))}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]}):V>5?t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:g,onKeyDown:l=>W(l,!1),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[a]?.length>0?r.values[a].join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:c,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:j,onChange:l=>{p(l.target.value),F(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0`})}),D.length>0?D.map(([l,S],b)=>t.jsxs("label",{htmlFor:`${a}-${l}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${r.values[a]===l?"bg-indigo-50 text-indigo-600 font-medium":T===b?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${a}-${l}`,type:"checkbox",name:a,value:l,checked:Array.isArray(r.values[a])?r.values[a]?.includes(l):!1,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},l)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]}):null}case"tags":{const l=Array.isArray(r.values[a])?r.values[a]:[],S=Array.isArray(x)?x:Object.entries(x||{}).map(([s,h])=>({value:s,label:h})),b=s=>{s&&!l.includes(s)&&r.setFieldValue(a,[...l,s])},v=s=>{(s.key==="Enter"||s.key===",")&&(s.preventDefault(),b(j),p(""))},k=s=>{r.setFieldValue(a,l.filter(h=>h!==s))},R=s=>S.find(h=>h.value===s)?.label||s,Y=()=>t.jsxs("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.59 13.41L11 3.83a2 2 0 00-2.83 0L2.41 9.59a2 2 0 000 2.82l9.59 9.59a2 2 0 002.83 0l6.75-6.75a2 2 0 000-2.83z"}),t.jsx("circle",{cx:"7.5",cy:"7.5",r:"1.5"})]});return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:`${A} flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center`,onClick:()=>!e.disabled&&document.getElementById(`${a}-input`)?.focus(),children:[l.map(s=>t.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[t.jsx("span",{className:"flex items-center justify-center",children:t.jsx(Y,{})}),t.jsx("span",{className:"text-indigo-700",children:R(s)}),t.jsx("button",{type:"button","aria-label":`Remove ${R(s)}`,onClick:h=>{h.stopPropagation(),e.disabled||k(s)},onMouseDown:h=>h.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"×"})]},s)),t.jsx("input",{id:`${a}-input`,type:"text",value:j,onChange:s=>p(s.target.value),onKeyDown:v,placeholder:l.length===0?e.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:e.disabled})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"file":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:f(e)}),t.jsx("input",{type:e.type||"text",className:`${A} ${I} ${e.icon?"pl-9":""} `,onFocus:()=>d(!0),name:a,onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${w?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"json":{let l=r.values[a];if(typeof l=="object"&&l!==null){const v=JSON.stringify(l,null,2);r.setFieldValue(a,v,!1),l=v}const S=l||"",b=v=>{r.setFieldValue(a,v.target.value)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:`${a}-json`,name:a,value:S,onChange:b,onBlur:r.handleBlur,placeholder:e.placeholder||"Enter valid JSON",disabled:e.disabled,className:`${A} ${I} min-h-[200px] font-mono text-sm resize-y`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${w?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}default:return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:M,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:f(e)}),t.jsx("input",{type:e.type||"text",className:`${A} ${I} ${e.icon?"pl-9":""} `,onFocus:()=>d(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${w?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}}function $e({title:e,children:r,isFirst:o}){const[n,u]=E.useState(o);return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[t.jsxs("button",{onClick:()=>u(!n),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${n?"bg-action":"bg-gray-300"}`}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]}),t.jsxs("div",{className:`relative transition-all duration-300 ${n?"rotate-180":""}`,children:[t.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${n?"bg-action opacity-30":"bg-transparent opacity-0"}`}),t.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${n?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Ae({title:e,groupedFields:r,data:o,onSubmit:n=x=>{},onCancel:u=()=>{},methods:i={},components:O={},sqlOpsUrls:w={},refid:d}){const[x,y]=E.useState({}),j=(c,g)=>{y(N=>({...N,[c]:g}))},p={},T={};Object.entries(r).forEach(([c,g])=>{Z(g,p,T)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(c=>{c in p&&(c==="tags"&&typeof o[c]=="string"?p[c]=o[c].split(","):p[c]=o[c]?o[c]:"")});const F=ee.useFormik({initialValues:p,enableReinitialize:!0,validationSchema:L.object().shape(T),onSubmit:c=>{n(c)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:F.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([c,g],N)=>t.jsx($e,{title:c,isFirst:N===0,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:g.map((m,$)=>ae(m.hidden)||m.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(m.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:d,sqlOpsUrls:w,components:O,field:m,formik:F,methods:i,setFieldOptions:j,...x[m.name]?{optionsOverride:x[m.name]}:{}},m.name)},m?.name??`field-${$}`))})},c))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:u,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function Ce({title:e,groupedFields:r,data:o,onSubmit:n=y=>{},onCancel:u=()=>{},methods:i={},components:O={},sqlOpsUrls:w={},widget:d,refid:x}){const y=Object.keys(r),[j,p]=E.useState(0),[T,F]=E.useState({}),c=(f,P)=>{F(V=>({...V,[f]:P}))},g={},N={},m={};d?Object.entries(r).forEach(([f,P])=>{const V={};Z(P,N,V),g[f]=V}):Object.entries(r).forEach(([f,P])=>{Z(P,N,m)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(f=>{f in N&&(f==="tags"&&typeof o[f]=="string"?N[f]=o[f].split(","):N[f]=o[f]?o[f]:"")});const $=y[j]??null,a=$&&g[$]?g[$]:{},A=ee.useFormik({initialValues:N,enableReinitialize:!0,validationSchema:L.object().shape(d?a:m),onSubmit:f=>{d?(j<y.length-1&&p(P=>P+1),j===y.length-1&&n(f)):n(f)}}),I=async f=>{if(f.preventDefault(),!d){const P=await A.validateForm();if(Object.keys(P).length>0){alert("Please fill all required fields before submitting."),A.setTouched(Object.keys(P).reduce((V,D)=>({...V,[D]:!0}),{}));return}}A.handleSubmit(f)},M=()=>{p(f=>f>0?f-1:f)};return t.jsxs("div",{className:" max-w-full  m-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:t.jsx("nav",{className:"relative flex",children:y.map((f,P)=>t.jsx("button",{type:"button",onClick:()=>p(P),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${j===P?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:f})},f))})})}),t.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[t.jsxs("form",{onSubmit:I,className:"w-full mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:$&&r[$]?.map((f,P)=>ae(f.hidden)||f.type==="geolocation"?null:t.jsx("div",{className:`col-span-12  ${re[se(Number(f.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:x,sqlOpsUrls:w,field:f,formik:A,methods:i,components:O,setFieldOptions:c,...T[f.name]?{optionsOverride:T[f.name]}:{}},f.name)},f?.name??`field-${P}`))}),t.jsxs("div",{className:`mt-8 flex ${j>0?"justify-between":"justify-end"} space-x-3`,children:[j>0&&t.jsx("button",{onClick:M,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:u,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:d?"Next":"Save"})]})]})]}),t.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{children:["Tab ",j+1," of ",y.length]}),t.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),t.jsx("div",{className:"flex gap-1",children:y.map((f,P)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${P===j?"bg-action w-6":"bg-gray-300"}`},P))})]})})]},y[j])]})}function Pe({title:e,groupedFields:r,data:o,onSubmit:n=d=>{},onCancel:u=()=>{},methods:i={},sqlOpsUrls:O={},refid:w}){const d=Object.values(r).flat(),[x,y]=E.useState({}),j=(c,g)=>{y(N=>({...N,[c]:g}))},p={},T={};Object.entries(r).forEach(([c,g])=>{Z(g,p,T)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(c=>{c in p&&(c==="tags"&&typeof o[c]=="string"?p[c]=o[c].split(","):p[c]=o[c]?o[c]:"")});const F=ee.useFormik({initialValues:p,enableReinitialize:!0,validationSchema:L.object().shape(T),onSubmit:c=>{n(c)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:F.handleSubmit,className:"p-4  mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:d.map((c,g)=>ae(c.hidden)||c.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(c.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:w,sqlOpsUrls:O,field:c,formik:F,methods:i,setFieldOptions:j,...x[c.name]?{optionsOverride:x[c.name]}:{}})},c?.name??`field-${g}`))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:u,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function Fe({title:e,children:r}){return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[t.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]})}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Re({title:e,groupedFields:r,data:o,onSubmit:n=x=>{},onCancel:u=()=>{},methods:i={},components:O={},sqlOpsUrls:w={},refid:d}){const[x,y]=E.useState({}),j=(c,g)=>{y(N=>({...N,[c]:g}))},p={},T={};Object.entries(r).forEach(([c,g])=>{Z(g,p,T)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(c=>{c in p&&(c==="tags"&&typeof o[c]=="string"?p[c]=o[c].split(","):p[c]=o[c]?o[c]:"")});const F=ee.useFormik({initialValues:p,enableReinitialize:!0,validationSchema:L.object().shape(T),onSubmit:c=>{n(c)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:F.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([c,g],N)=>t.jsx(Fe,{title:c,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:g.map((m,$)=>ae(m.hidden)||m.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(m.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:d,sqlOpsUrls:w,components:O,field:m,formik:F,methods:i,setFieldOptions:j,...x[m.name]?{optionsOverride:x[m.name]}:{}},m.name)},m?.name??`field-${$}`))})},c))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:u,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const J=e=>({Authorization:`Bearer ${e.accessToken}`}),le=async e=>(await B.get(e.baseURL+e.dbopsGetHash,{headers:J(e)})).data.refhash,ie=async(e,r)=>(await B.post(e.baseURL+e.dbopsGetRefId,r,{headers:J(e)})).data.refid,_e={async fetch(e,r){const o=await le(e),n=await ie(e,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:o}),u=await B.post(e.baseURL+e.dbopsFetch,{refid:n,datahash:o},{headers:J(e)});return u.data?.data??u.data},async create(e,r){const o=await le(e),n=await ie(e,{operation:"create",source:r.source,fields:r.values,datahash:o});return(await B.post(e.baseURL+e.dbopsCreate,{refid:n,fields:r.values,datahash:o},{headers:J(e)})).data},async update(e,r){const o=await le(e),n=await ie(e,{operation:"update",source:r.source,fields:r.values,datahash:o});return(await B.post(e.baseURL+e.dbopsUpdate,{refid:n,fields:r.values,datahash:o},{headers:J(e)})).data}};function Ie({formJson:e={title:"",fields:{},source:{}},methods:r={},userid:o=null,onCancel:n=()=>{},components:u={},callback:i=()=>{},initialvalues:O={}}){const w=je(e),d=e.endPoints,x=e?.source?.refid,y=Ne(e?.fields??{}),[j,p]=E.useState(O),T=E.useMemo(()=>Te(e.fields),[e.fields]);E.useEffect(()=>{let g=!0;return(async()=>{const m=e?.source??{};if(!m?.type){g&&p({});return}if(m.type==="method"){const $=m.method,a=$?r[$]:void 0;if(a)try{const A=await Promise.resolve(a());g&&p(A??{})}catch(A){console.error("Method execution failed:",A),g&&p({})}else g&&p({})}if(m.type==="api"&&d?.operation!=="create")try{const $=await B({method:m.method||"GET",url:m.url??"",data:m.body??{},params:m.params??{},headers:m.headers??{}});g&&p($.data??{})}catch($){console.error("API fetch failed:",$),g&&p({})}if(m.type==="sql"&&m.refid&&m.refid!="0"&&d?.operation!=="create"){if(!d){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const $=await _e.fetch(d,{source:{...m,table:m.table,columns:m.columns,where:U(m.where,{refid:x})},fields:we(e.fields)});g&&p($)}catch($){console.error("API fetch failed:",$)}}})(),()=>{g=!1}},[o,e?.source?.type||"",e?.source?.method||"",e?.source?.url||"",JSON.stringify(e?.source?.params??{}),JSON.stringify(e?.source?.body??{}),JSON.stringify(e?.source?.headers??{})]);const F=async g=>{const N=e?.source??{};let m=null;if(T.length>0)try{m=await Oe()}catch(a){console.log("catch fetchGeolocation",a),m=null}const $={...g,...Object.fromEntries(T.map(a=>[a,m]))};if(N.type==="method"){const a=N.method,A=a?r[a]:void 0;if(A)try{const I=await Promise.resolve(A($));i?.(I)}catch(I){i?.(I),console.error("Method execution failed:",I)}}if(N.type==="api")try{const a=await B({method:N.method||"POST",url:N.url,data:$??{},params:N.params??{},headers:N.headers??{}});i?.(a)}catch(a){i?.(a),console.error("API fetch failed:",a)}if(N.type==="sql"){const a=e.endPoints;if(!a){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const A=await B({method:"GET",url:a.baseURL+a.dbopsGetHash,headers:{Authorization:`Bearer ${a?.accessToken}`}});let I={...N};N.where&&(I={...N,where:U(N.where,{refid:x})});const M=await B({method:"POST",url:a.baseURL+a.dbopsGetRefId,data:{operation:a.operation,source:I,fields:e.fields,forcefill:e.forcefill,datahash:A.data.refhash},headers:{Authorization:`Bearer ${a?.accessToken}`}}),f=await B({method:"POST",url:a.baseURL+a[a.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:M.data.refid,fields:$,datahash:A.data.refhash},headers:{Authorization:`Bearer ${a?.accessToken}`}});i?.(f)}catch(A){i?.(A),console.error("API fetch failed:",A)}}},c={accordion:t.jsx(Ae,{title:e?.title??"",groupedFields:y,data:j,onSubmit:F,onCancel:n,methods:r,components:u,sqlOpsUrls:d,refid:x}),cards:t.jsx(Re,{title:e?.title??"",groupedFields:y,data:j,onSubmit:F,onCancel:n,methods:r,components:u,sqlOpsUrls:d,refid:x}),tab:t.jsx(Ce,{title:e?.title??"",groupedFields:y,data:j,onSubmit:F,onCancel:n,methods:r,components:u,widget:e?.widget,sqlOpsUrls:d,refid:x}),simple:t.jsx(Pe,{title:e?.title??"",groupedFields:y,data:j,onSubmit:F,onCancel:n,methods:r,components:u,sqlOpsUrls:d,refid:x})};return t.jsx("div",{className:"relative",children:c[w]??c.simple})}G.LogiksForm=Ie,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
