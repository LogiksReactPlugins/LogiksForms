(function(W,F){typeof exports=="object"&&typeof module<"u"?F(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],F):(W=typeof globalThis<"u"?globalThis:W||self,F(W.LogiksForm={},W.React,W.axios,W.Yup,W.formik))})(this,function(W,F,V,je,se){"use strict";function we(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const i in e)if(i!=="default"){const o=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:()=>e[i]})}}return r.default=e,Object.freeze(r)}const D=we(je);var ne={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe;function Ne(){if(xe)return J;xe=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(o,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var c in l)c!=="key"&&(h[c]=l[c])}else h=l;return l=h.ref,{$$typeof:e,type:o,key:d,ref:l!==void 0?l:null,props:h}}return J.Fragment=r,J.jsx=i,J.jsxs=i,J}var ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ge;function Se(){return ge||(ge=1,process.env.NODE_ENV!=="production"&&function(){function e(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===C?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case _:return"Fragment";case j:return"Profiler";case b:return"StrictMode";case y:return"Suspense";case z:return"SuspenseList";case S:return"Activity"}if(typeof a=="object")switch(typeof a.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),a.$$typeof){case P:return"Portal";case N:return(a.displayName||"Context")+".Provider";case E:return(a._context.displayName||"Context")+".Consumer";case O:var n=a.render;return a=a.displayName,a||(a=n.displayName||n.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case s:return n=a.displayName||null,n!==null?n:e(a.type)||"Memo";case q:n=a._payload,a=a._init;try{return e(a(n))}catch{}}return null}function r(a){return""+a}function i(a){try{r(a);var n=!1}catch{n=!0}if(n){n=console;var m=n.error,u=typeof Symbol=="function"&&Symbol.toStringTag&&a[Symbol.toStringTag]||a.constructor.name||"Object";return m.call(n,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",u),r(a)}}function o(a){if(a===_)return"<>";if(typeof a=="object"&&a!==null&&a.$$typeof===q)return"<...>";try{var n=e(a);return n?"<"+n+">":"<...>"}catch{return"<...>"}}function l(){var a=K.A;return a===null?null:a.getOwner()}function h(){return Error("react-stack-top-frame")}function d(a){if(G.call(a,"key")){var n=Object.getOwnPropertyDescriptor(a,"key").get;if(n&&n.isReactWarning)return!1}return a.key!==void 0}function c(a,n){function m(){H||(H=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",n))}m.isReactWarning=!0,Object.defineProperty(a,"key",{get:m,configurable:!0})}function x(){var a=e(this.type);return de[a]||(de[a]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),a=this.props.ref,a!==void 0?a:null}function A(a,n,m,u,p,w,v,k){return m=w.ref,a={$$typeof:I,type:a,key:n,props:w,_owner:p},(m!==void 0?m:null)!==null?Object.defineProperty(a,"ref",{enumerable:!1,get:x}):Object.defineProperty(a,"ref",{enumerable:!1,value:null}),a._store={},Object.defineProperty(a._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(a,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(a,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:v}),Object.defineProperty(a,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:k}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a}function g(a,n,m,u,p,w,v,k){var R=n.children;if(R!==void 0)if(u)if(Q(R)){for(u=0;u<R.length;u++)T(R[u]);Object.freeze&&Object.freeze(R)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else T(R);if(G.call(n,"key")){R=e(a);var Y=Object.keys(n).filter(function(pe){return pe!=="key"});u=0<Y.length?"{key: someKey, "+Y.join(": ..., ")+": ...}":"{key: someKey}",L[R+u]||(Y=0<Y.length?"{"+Y.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,u,R,Y,R),L[R+u]=!0)}if(R=null,m!==void 0&&(i(m),R=""+m),d(n)&&(i(n.key),R=""+n.key),"key"in n){m={};for(var ae in n)ae!=="key"&&(m[ae]=n[ae])}else m=n;return R&&c(m,typeof a=="function"?a.displayName||a.name||"Unknown":a),A(a,R,w,p,l(),m,v,k)}function T(a){typeof a=="object"&&a!==null&&a.$$typeof===I&&a._store&&(a._store.validated=1)}var f=F,I=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),s=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),C=Symbol.for("react.client.reference"),K=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=Object.prototype.hasOwnProperty,Q=Array.isArray,M=console.createTask?console.createTask:function(){return null};f={"react-stack-bottom-frame":function(a){return a()}};var H,de={},B=f["react-stack-bottom-frame"].bind(f,h)(),$=M(o(h)),L={};ee.Fragment=_,ee.jsx=function(a,n,m,u,p){var w=1e4>K.recentlyCreatedOwnerStacks++;return g(a,n,m,!1,u,p,w?Error("react-stack-top-frame"):B,w?M(o(a)):$)},ee.jsxs=function(a,n,m,u,p){var w=1e4>K.recentlyCreatedOwnerStacks++;return g(a,n,m,!0,u,p,w?Error("react-stack-top-frame"):B,w?M(o(a)):$)}}()),ee}var be;function $e(){return be||(be=1,process.env.NODE_ENV==="production"?ne.exports=Ne():ne.exports=Se()),ne.exports}var t=$e();function Ae(e){return e.template==="accordion"?"accordion":e.template==="simple"?"simple":e.template==="cards"?"cards":Object.values(e.fields||{}).some(o=>o.group)?"tab":"simple"}function Ee(e,r="create",i="Info"){const o={};let l=!1;if(Object.values(e).forEach(d=>{d.group&&(l=!0)}),!l)return{};const h=[];return Object.entries(e).forEach(([d,c])=>{if(c.vmode==="edit"&&r==="create")return;const x={...c,name:d};if(c.group){const A=c.group;o[A]||(o[A]=[]),o[A].push(x)}else h.push(x)}),h.length>0?{[i]:h,...o}:o}function ye(e,r="create"){const i={};return Object.keys(e).forEach(o=>{e[o].vmode==="edit"&&r==="create"||(i[o]={label:o,required:e[o].required??!1})}),i}const te=(e,r,i,o)=>{e.forEach(l=>{const h=l?.name;if(!h)return;let d=o?.[h];d==null&&(d=l.default),l.multiple===!0||l.type==="checkbox"||l.type==="tags"?r[h]=Array.isArray(d)?d:typeof d=="string"?d.split(",").map(x=>x.trim()).filter(Boolean):[]:l.type==="json"?r[h]=typeof d=="object"&&d!==null?JSON.stringify(d,null,2):d??"":l.type==="date"?r[h]=typeof d=="string"?d.slice(0,10):"":l.type==="time"?typeof d=="string"?d.includes("T")?r[h]=d.slice(11,16):r[h]=d.slice(0,5):r[h]="":h==="blocked"||h==="blacklist"?r[h]=String(d??"false"):r[h]=d??"";let c;l.type==="file"?c=l.multiple?D.array().of(D.mixed()):D.mixed():l.multiple===!0||l.type==="checkbox"||l.type==="tags"?c=D.array().of(D.string()):l.type==="email"?c=D.string().email("Invalid email"):l.type==="number"?c=D.number().typeError("Must be a number"):l.type==="json"?c=D.string().test("json","Invalid JSON",x=>{if(!x)return!0;try{return JSON.parse(x),!0}catch{return!1}}):c=D.string(),l.required&&(c=c.required(l.error_message||`${l.label||h} is required`)),l?.validate?.regex&&typeof l.validate.regex=="string"&&(c=c.matches(new RegExp(l?.validate?.regex),l?.error_message||"Invalid input format")),l?.validate&&Object.entries(l.validate).forEach(([x,A])=>{switch(x){case"email":A&&(c=c.email("Invalid email format"));break;case"mobile":c=c.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":c=c.matches(new RegExp(A),`Must match pattern: ${A}`);break;case"date":c=D.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((g,T)=>{if(typeof T=="string"){const f=T.replace(/-/g,"/"),[I,P,_]=f.split("/");if(I&&P&&_)return new Date(`${_}-${P}-${I}`)}return g});break;case"time":c=c.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":c=c.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":c=D.number().typeError("Must be numeric");break;case"float":case"decimal":c=D.number().typeError("Must be a decimal").transform((g,T)=>{if(T==null||T==="")return;const f=Number(T);if(isNaN(f))return g;if(typeof g=="number"&&!isNaN(g)){const I=Number(g);return Number.isInteger(I)?Number(f.toFixed(I)):f}return f});break;case"alphanumeric":c=c.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":c=c.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":c=c.transform(g=>g&&g.toUpperCase());break;case"lower":c=c.transform(g=>g&&g.toLowerCase());break;case"length-min":{const g=Number(A);isNaN(g)||(c=c.min(g,`Minimum length is ${g}`));break}case"length-max":{const g=Number(A);isNaN(g)||(c=c.max(g,`Maximum length is ${g}`));break}}}),i[h]=c})},oe={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function le(e){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(e)?e:6}const ie=e=>e===!0||e==="true",U=(e,r)=>typeof e=="string"?e.replace(/#(\w+)#/g,(i,o)=>r[o]!==void 0?String(r[o]):i):Array.isArray(e)?e.map(i=>U(i,r)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([i,o])=>[U(i,r),U(o,r)])):e,X=(e,r,i,o)=>{if(!Array.isArray(i)||i.length===0)return{};const l=o??(i[0]&&typeof i[0]=="object"&&"category"in i[0]?"category":void 0);if(!l){const d={};return i.forEach(c=>{const x=c[e],A=c[r];x!=null&&A!=null&&(d[String(x)]=String(A))}),d}const h={};return i.forEach(d=>{const c=d[l]??"Others",x=d[e],A=d[r];x==null||A==null||(h[c]||(h[c]={}),h[c][String(x)]=String(A))}),h},fe=(e,r)=>{if(!e||r==null)return;const i=String(r);if(typeof Object.values(e)[0]=="string")return e[i];for(const l of Object.values(e))if(i in l)return l[i]},Oe=e=>{if(!e)return[];if(Array.isArray(e))return e.map(o=>[String(o.value),String(o.title??o.label??o.value)]);const r=Object.values(e);return r.length?typeof r[0]=="string"?Object.entries(e).map(([o,l])=>[String(o),l]):Object.values(e).flatMap(o=>Object.entries(o).map(([l,h])=>[String(l),h])):[]},ve=e=>{if(!e||typeof e!="object")return!1;const r=Object.values(e)[0];return typeof r=="object"&&r!==null&&!Array.isArray(r)};async function Te(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const e=await new Promise((o,l)=>{navigator.geolocation.getCurrentPosition(o,l,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:r,longitude:i}=e.coords;return`${r},${i}`}catch(e){if(!(e instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(e.code){case e.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case e.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case e.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const Ce=e=>Object.entries(e??{}).filter(([,r])=>r.type==="geolocation").map(([r])=>r);function Fe(e,r="create"){return Object.entries(e).filter(([,i])=>!(i.vmode==="edit"&&r==="create")).map(([i,o])=>({...o,name:i}))}async function ce(e,r,i,o=void 0,l=void 0,h={}){try{let d=i;return d||(d=(await V({method:"POST",url:e.baseURL+e.registerQuery,data:{query:r??{},srcid:l},headers:{Authorization:`Bearer ${e?.accessToken}`}})).data.queryid),await V({method:"POST",url:e.baseURL+e.runQuery,data:{queryid:d,filter:h,refid:o,page:0,limit:1e4},headers:{Authorization:`Bearer ${e?.accessToken}`}})}catch(d){throw d}}function Ie(e){return typeof e=="object"&&e!==null&&typeof e.target=="string"&&typeof e.src=="object"&&e.src!==null&&typeof e.src.table=="string"}function Pe(e){return e.split(",").map(r=>r.trim()).map(r=>{const i=r.match(/^(.+?)\s+as\s+.+$/i);return i?i[1]?.trim():r}).filter(r=>!!r)}const Z=e=>{const r={};for(const[i,o]of Object.entries(e)){const l=i.includes(".")?i.split(".").pop():i;if(l in r){console.warn(`Duplicate key after normalization: ${l}`);continue}r[l]=o}return r};function ue({field:e,formik:r,methods:i={},sqlOpsUrls:o,refid:l,module_refid:h,optionsOverride:d,setFieldOptions:c}){const[x,A]=F.useState(!1),[g,T]=F.useState(d??e.options??{}),[f,I]=F.useState(""),[P,_]=F.useState(0),b=F.useRef(null),j=F.useRef(null),[E,N]=F.useState(!1),O=F.useRef(f),y=e.disabled===!0;F.useEffect(()=>{O.current=f},[f]);const z=$=>{if(y){$.preventDefault(),j.current?.removeAttribute("open");return}$.currentTarget.open||I("")};F.useEffect(()=>{d&&Object.keys(d).length!==0&&T(d)},[d]),F.useEffect(()=>{const $=L=>{j.current&&!j.current.contains(L.target)&&(j.current.open=!1,I(""))};return document.addEventListener("mousedown",$),()=>{document.removeEventListener("mousedown",$)}},[]);const s=e.name;F.useEffect(()=>{let $=!0;return(async()=>{let a=e.valueKey??"value",n=e.labelKey??"title";if(e?.options){if(typeof e.options=="object"&&!Array.isArray(e.options)){const v=Object.values(e.options);if(v.length&&typeof v[0]=="string"){T(e.options);return}}const p=(Array.isArray(e.options)?e.options:[e.options]).map(Z),w=X(a,n,p,e.groupKey);T(w);return}const m=e?.source??{};if(e.type==="dataMethod"){const u=e.method,p=u?i[u]:void 0;if(p)try{const w=await Promise.resolve(p()),v=Array.isArray(w?.data?.data)?w.data.data:Array.isArray(w?.data)?w.data:w,k=Array.isArray(v)?v.map(Z):[],R=X(a,n,k,e.groupKey);$&&T(R)}catch(w){console.error("Method execution failed:",w),$&&T({})}else $&&T({})}if(m.type==="api"&&m.url)try{const u=await V({method:m.method||"GET",url:m.url,data:m.body??{},params:m.params??{},headers:m.headers??{}}),p=Array.isArray(u?.data?.data)?u.data.data:Array.isArray(u?.data)?u.data:u,w=Array.isArray(p)?p.map(Z):[],v=X(a,n,w,e.groupKey);$&&T(v)}catch(u){console.error("API execution failed:",u),$&&T({})}if(e.table||e.type==="dataSelector"||e.queryid){if(!o){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let u;if(e.type==="dataSelector")u={table:"do_lists",cols:"title,value",where:{groupid:e.groupid??""}};else if(!e.queryid){if(!e.table||!e.columns){console.error("Invalid SQL field config",e);return}u={table:e.table,cols:e.columns,where:e.where?l?U(e.where,{refid:l}):e.where:void 0}}const p=await ce(o,u,e?.queryid,void 0,h),w=Array.isArray(p?.data?.data)?p.data.data:Array.isArray(p?.data)?p.data:p,v=Array.isArray(w)?w.map(Z):[],k=X(a,n,v,e.groupKey);$&&T(k)}catch(u){console.error("API fetch failed:",u)}}})(),()=>{$=!1}},[e.options,e.source,e.table,e.columns,e.where,l]);const q=`
  w-full px-4 py-2 rounded-lg border transition-all duration-300
  backdrop-blur-sm text-gray-800 placeholder-gray-400
  focus:outline-none focus:ring-0

  ${y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 hover:border-gray-400 focus:border-indigo-500 focus:shadow-md"}
`,S=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,C=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,K=$=>$.icon?t.jsx("i",{className:$.icon}):null,G=F.useMemo(()=>Oe(g),[g]),Q=G.length,M=F.useMemo(()=>e.search||!f?G:G.filter(([,$])=>$.toLowerCase().includes(f.toLowerCase())),[e.search,f,G]),H=($,L)=>{if(j.current?.open===!0||E===!0)if($.key==="ArrowDown")$.preventDefault(),_(a=>a+1<M.length?a+1:0);else if($.key==="ArrowUp")$.preventDefault(),_(a=>a-1>=0?a-1:M.length-1);else if($.key==="Enter"){$.preventDefault();const[a]=M[P]||[];a&&r.setFieldValue(e.name,L?a:[...r.values[e.name],a]),j.current&&(j.current.open=!1)}else $.key==="Escape"&&(j.current.open=!1,I(""),N(!1))};F.useEffect(()=>{b.current?.querySelector(`[data-index="${P}"]`)?.scrollIntoView({block:"nearest"})},[P]),F.useEffect(()=>{P>=M.length&&_(0)},[M,P]),F.useEffect(()=>{const $=e.autocomplete,L=e.ajaxchain;if(!$&&!L)return;const a=r.values[e.name];if(!a)return;const n=Array.isArray(L)?L:L?[L]:[];(async()=>{try{if(Ie($)){const u=$.src;if(!u||!o)return;const p=U(u.where??{},{refid:a}),w={...u,table:u.table,cols:u.columns,where:p},{data:v}=await ce(o,w,e?.queryid,void 0,h),k=Array.isArray(v?.data)?v.data[0]:v?.data;k&&$.target.split(",").map(R=>R.trim()).forEach(R=>{k[R]!==void 0&&r.setFieldValue(R,k[R])})}for(const u of n){const p=u.src;if(!u||typeof u!="object"||!p||typeof p!="object"||!o)continue;let w;if(!p.queryid){if(!p.table||!p.columns)throw new Error("SQL query requires field.table");const Be=U(p?.where??{},{refid:a});w={...p,table:p.table,cols:p.columns,where:Be}}const{data:v}=await ce(o,w,p?.queryid,a,h);let k=e.valueKey??"value",R=e.labelKey??"title";const Y=Array.isArray(v?.data?.data)?v.data.data:Array.isArray(v?.data)?v.data:v,ae=Array.isArray(Y)?Y.map(Z):[],pe=X(k,R,ae,e.groupKey);c?.(u.target,pe)}}catch(u){console.error("Autocomplete / AjaxChain fetch failed",u)}})()},[r.values[e.name]]),F.useEffect(()=>{if(!e.search||!f.trim()||!e.table||!o)return;const $=Pe(e.columns??""),L=new AbortController,a=setTimeout(async()=>{try{let n;if(!e.queryid){if(!e.table||!e.cols)throw new Error("SQL query requires field.table");const Y=l?U(e.where??{},{refid:l}):e.where;n={...e,table:e.table,cols:e.columns||e.cols,where:Y}}let m={};Array.isArray($)&&$.forEach(Y=>{m[Y]=[f,"LIKE"]});let u=e.valueKey??"value",p=e.labelKey??"title";const{data:w}=await ce(o,n,e?.queryid,void 0,h,m),v=Array.isArray(w?.data?.data)?w.data.data:Array.isArray(w?.data)?w.data:w,k=Array.isArray(v)?v.map(Z):[],R=X(u,p,k,e.groupKey);T(R)}catch(n){if(V.isCancel(n))return;console.error("Search fetch failed",n)}},500);return()=>{clearTimeout(a),L.abort()}},[f,l]);const de=async $=>{if($.length===0){console.error("No file");return}const L=o?.baseURL+o?.uploadURL;if(!L){console.error("No Upload URL ");return}const a=e.multiple===!0;try{const n=await Promise.all(Array.from($).map(async m=>{const u=new FormData;return u.append("file",m),(await V({method:"POST",url:L,data:u,headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${o?.accessToken}`}})).data}));r.setFieldValue(s,a?n.map(m=>m.path):n[0]?.path)}catch(n){console.error("File upload failed",n),r.setFieldError(s,"File upload failed")}},B=async($,L,a)=>{const n=L[$];if(!n)return;const m=i?.[n];if(typeof m!="function"){console.error(`Method "${String(n)}" not found`);return}try{await Promise.resolve(m(a))}catch(u){console.error(`Method "${String(n)}" failed`,u)}};switch(e.type){case"autocomplete":{const a=r.values[s]??"",n=f!==""?f:fe(g,a)??String(a??""),m=p=>{if(y)return;const w=p.target.value;I(w),_(0),w.trim()?N(!0):(N(!1),r.setFieldValue(s,""))},u=p=>{r.setFieldValue(s,p),I(""),N(!1),B("onChange",e,`${s}-${p}`)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{className:`${q} ${S}`,value:n,placeholder:e.placeholder||"Type to search...",onChange:m,onBlur:()=>{setTimeout(()=>N(!1),150)},onKeyDown:p=>{if(p.key==="Enter"){if(p.preventDefault(),M[P]){const[w]=M[P];r.setFieldValue(s,w)}else f.trim()&&r.setFieldValue(s,f.trim());N(!1);return}H(p,!0)},disabled:y}),E&&!y&&t.jsx("div",{ref:b,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:M.length>0?M.map(([p,w],v)=>t.jsx("div",{id:`${s}-${p}`,"data-index":v,className:`px-3 py-2 cursor-pointer text-sm
                  ${P===v?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>u(p),children:w},p)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:`No matches press enter to add "${n}" `})}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(e.multiple===!0){const a=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:`relative w-full ${y?"opacity-70":""}`,onToggle:z,ref:j,onKeyDown:n=>{y||H(n,!1)},children:[t.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}`,children:[t.jsx("span",{className:"text-sm text-gray-700",children:a?.length>0?a.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!y&&t.jsxs("div",{ref:b,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:f,onChange:n=>{I(n.target.value),_(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),M.length>0?M.map(([n,m],u)=>t.jsxs("label",{htmlFor:`${s}-${n}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${a?.includes(n)?"bg-indigo-50 text-indigo-600 font-medium":P===u?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${s}-${n}`,type:"checkbox",checked:a?.includes(n),onChange:p=>{const w=p.target.checked?[...a,n]:a?.filter(v=>v!==n);r.setFieldValue(s,w),B("onChange",e,`${s}-${n}`)},onBlur:r.handleBlur,disabled:y,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),m]},n)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:`relative w-full ${y?"opacity-70":""}`,onToggle:z,ref:j,onKeyDown:a=>{y||H(a,!0)},children:[t.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}
  `,children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[s]?fe(g,r.values[s])??"Select option":`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!y&&t.jsxs("div",{ref:b,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:f,onChange:a=>{I(a.target.value),_(0)},onKeyDown:a=>H(a,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),M.length>0&&t.jsx("div",{onClick:a=>{a.preventDefault(),a.stopPropagation(),r.setFieldValue(s,""),j.current?.removeAttribute("open"),I("")},className:"px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm hover:bg-gray-50",children:"Clear selection"}),M.length>0?M.map(([a,n],m)=>t.jsx("div",{id:`${s}-${a}`,"data-index":m,onClick:u=>{u.preventDefault(),u.stopPropagation(),r.setFieldValue(s,a),j.current?.removeAttribute("open"),I(""),_(0),B("onChange",e,`${s}-${a}`)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[s]===a?"bg-indigo-50 text-indigo-600 font-medium":P===m?"bg-gray-100":"hover:bg-gray-50"}`,children:n},a)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}case"textarea":return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:s,className:`${q} ${S} min-h-[120px] resize-none`,onFocus:()=>A(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:a=>{r.setFieldValue(s,a.target.value),B("onChange",e,`${s}`)},placeholder:e.placeholder,disabled:y}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${x?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})});case"select":if(e.multiple===!0){const a=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:`relative w-full ${y?" opacity-70":""}`,onToggle:z,ref:j,onKeyDown:n=>{y||H(n,!1)},children:[t.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}
  `,children:[t.jsx("span",{className:"text-sm text-gray-700",children:a?.length>0?a.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!y&&t.jsxs("div",{ref:b,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:f,onChange:n=>{y||(I(n.target.value),_(0))},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),M.length>0?M.map(([n,m],u)=>t.jsxs("label",{htmlFor:`${s}-${n}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${a?.includes(n)?"bg-indigo-50 text-indigo-600 font-medium":P===u?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${s}-${n}`,type:"checkbox",checked:a?.includes(n),onChange:p=>{const w=p.target.checked?[...a,n]:a?.filter(v=>v!==n);r.setFieldValue(s,w),B("onChange",e,`${s}-${n}`)},onBlur:r.handleBlur,disabled:y,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),m]},n)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:`${q} ${S} appearance-none ${y?"":"cursor-pointer"} pr-12`,onFocus:()=>A(!0),name:s,id:s,value:r.values[s],onBlur:r.handleBlur,onChange:a=>{r.setFieldValue(s,a.target.value===""?"":a.target.value),B("onChange",e,`${s}`)},disabled:y,children:[t.jsx("option",{value:"",disabled:!0,children:e?.["no-option"]||`Please select ${e.label}`}),!ve(g)&&Object.entries(g).map(([a,n])=>t.jsx("option",{value:a,className:"py-2",children:n},a)),ve(g)&&Object.entries(g).map(([a,n])=>t.jsx("optgroup",{label:a,children:Object.entries(n).map(([m,u])=>t.jsx("option",{value:m,children:u},m))},a))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"radioList":case"radio":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`flex ${Q>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(g||{}).map(([a,n])=>t.jsxs("label",{htmlFor:`${s}-${a}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${s}-${a}`,type:"radio",name:s,checked:r.values[s]===a,value:a,onChange:m=>{r.setFieldValue(s,m.target.value===""?"":m.target.value),B("onChange",e,`${s}-${a}`)},onBlur:r.handleBlur,disabled:y,className:`h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500
                    ${y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":""}
                    `}),n]},a))}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]});case"checkbox":{const a=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(g||{}).map(([n,m])=>t.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${s}-${n}`,type:"checkbox",checked:a.includes(n),onChange:u=>{const p=u.target.checked?[...a,n]:a.filter(w=>w!==n);r.setFieldValue(s,p),B("onChange",e,`${s}-${n}`)},onBlur:r.handleBlur,disabled:y,className:`h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500
                    ${y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":""}
                    `}),m]},n))}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}case"tags":{const a=r.values[s],n=f.trim(),m=Array.isArray(g)?g:Object.entries(g||{}).map(([v,k])=>({value:v,label:k})),u=v=>{y||v&&!a.includes(v)&&(r.setFieldValue(s,[...a,v]),I(""))},p=v=>{r.setFieldValue(s,a.filter(k=>k!==v))},w=v=>m.find(k=>k.value===v)?.label??v;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:`${q} 
            flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center
            ${y?"pointer-events-none opacity-70":""}
            `,onClick:()=>!y&&document.getElementById(`${s}-input`)?.focus(),children:[a.map(v=>t.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[t.jsx("span",{className:"text-indigo-700",children:w(v)}),t.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),y||p(v)},onMouseDown:k=>k.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"Ã—"})]},v)),t.jsx("input",{id:`${s}-input`,type:"text",value:f,onChange:v=>I(v.target.value),onKeyDown:v=>{(v.key==="Enter"||v.key===",")&&(v.preventDefault(),u(n))},placeholder:a.length===0?e.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:y})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}case"attachment":case"photo":case"avatar":case"file":const $=e.multiple===!0,L=Array.isArray(r.values[s])?r.values[s]:r.values[s]?[r.values[s]]:[];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:K(e)}),t.jsx("input",{id:s,type:"file",className:`${q} ${S} ${e.icon?"pl-9":""} `,onFocus:()=>A(!0),name:s,multiple:$,onChange:a=>{const n=a.currentTarget.files;n&&de(n),B("onChange",e,`${s}`)},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:y}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${x?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),L.map(a=>{const n=a?.split("/").pop();return n?t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:"text-sm",children:n})},a):null}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"json":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:s,name:s,value:r.values[s],onChange:a=>{r.setFieldValue(s,a.target.value),B("onChange",e,`${s}`)},onBlur:r.handleBlur,placeholder:e.placeholder||"Enter valid JSON",disabled:y,className:`${q} ${S} min-h-[200px] font-mono text-sm resize-y`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${x?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"date":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:K(e)}),t.jsx("input",{id:s,type:"date",name:s,min:e.min,max:e.max,value:r.values[s],onChange:a=>{r.setFieldValue(s,a.target.value),B("onChange",e,`${s}`)},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:y,className:`${q} ${S} ${e.icon?"pl-9":""}`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${x?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"number":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:K(e)}),t.jsx("input",{id:s,type:e.type||"text",className:`${q} ${S} ${e.icon?"pl-9":""} `,onFocus:()=>A(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:a=>{r.setFieldValue(s,a.target.value),B("onChange",e,`${s}`)},step:e.step,placeholder:e.placeholder,disabled:y,min:e.min??1,max:e.max}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${x?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});default:return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:C,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:K(e)}),t.jsx("input",{id:s,type:e.type||"text",className:`${q} ${S} ${e.icon?"pl-9":""} `,onFocus:()=>A(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:a=>{r.setFieldValue(s,a.target.value),B("onChange",e,`${s}`)},step:e.step,placeholder:e.placeholder,disabled:y,minLength:e.minlength,maxLength:e.maxlength}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${x?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}}function _e({title:e,children:r,isFirst:i}){const[o,l]=F.useState(i);return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[t.jsxs("button",{onClick:()=>l(!o),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${o?"bg-action":"bg-gray-300"}`}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]}),t.jsxs("div",{className:`relative transition-all duration-300 ${o?"rotate-180":""}`,children:[t.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${o?"bg-action opacity-30":"bg-transparent opacity-0"}`}),t.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden  ${o?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white overflow-auto mb-5",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Re({title:e,groupedFields:r,data:i,onSubmit:o=g=>{},onCancel:l=()=>{},methods:h={},components:d={},sqlOpsUrls:c={},refid:x,module_refid:A}){const[g,T]=F.useState({}),f=(b,j)=>{T(E=>({...E,[b]:j}))},{initialValues:I,validationSchema:P}=F.useMemo(()=>{const b={},j={};return Object.values(r).flat().forEach(E=>{te([E],b,j,i)}),{initialValues:b,validationSchema:j}},[r,i]),_=se.useFormik({initialValues:I,enableReinitialize:!0,validationSchema:D.object().shape(P),onSubmit:b=>{o(b)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:_.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([b,j],E)=>t.jsx(_e,{title:b,isFirst:E===0,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:j.map((N,O)=>ie(N.hidden)||N.type==="geolocation"||N.vmode==="edit"&&c.operation==="create"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${oe[le(Number(N.width))]||"lg:col-span-4"}`,children:t.jsx(ue,{refid:x,module_refid:A,sqlOpsUrls:c,components:d,field:N,formik:_,methods:h,setFieldOptions:f,...g[N.name]?{optionsOverride:g[N.name]}:{}},N.name)},N?.name??`field-${O}`))})},b))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function ke({title:e,groupedFields:r,data:i,onSubmit:o=T=>{},onCancel:l=()=>{},methods:h={},components:d={},sqlOpsUrls:c={},widget:x,refid:A,module_refid:g}){const T=Object.keys(r),[f,I]=F.useState(0),[P,_]=F.useState({}),b=(S,C)=>{_(K=>({...K,[S]:C}))},{initialValues:j,validationSchema:E,stepperSchemas:N}=F.useMemo(()=>{const S={},C={},K={};return x?Object.entries(r).forEach(([G,Q])=>{const M={};te(Q,S,M,i),K[G]=M}):Object.entries(r).forEach(([G,Q])=>{te(Q,S,C,i)}),{initialValues:S,validationSchema:C,stepperSchemas:K}},[r,i,x]),O=T[f]??null,y=x&&O?N[O]??{}:E,z=se.useFormik({initialValues:j,enableReinitialize:!0,validationSchema:D.object().shape(y),onSubmit:S=>{x?(f<T.length-1&&I(C=>C+1),f===T.length-1&&o(S)):o(S)}}),s=async S=>{if(S.preventDefault(),!x){const C=await z.validateForm();if(Object.keys(C).length>0){alert("Please fill all required fields before submitting."),z.setTouched(Object.keys(C).reduce((K,G)=>({...K,[G]:!0}),{}));return}}z.handleSubmit(S)},q=()=>{I(S=>S>0?S-1:S)};return t.jsxs("div",{className:" max-w-full  m-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:t.jsx("nav",{className:"relative flex",children:T.map((S,C)=>t.jsx("button",{type:"button",onClick:()=>I(C),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${f===C?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:S})},S))})})}),t.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[t.jsxs("form",{onSubmit:s,className:"w-full mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:O&&r[O]?.map((S,C)=>ie(S.hidden)||S.type==="geolocation"||S.vmode==="edit"&&c.operation==="create"?null:t.jsx("div",{className:`col-span-12  ${oe[le(Number(S.width))]||"lg:col-span-4"}`,children:t.jsx(ue,{refid:A,module_refid:g,sqlOpsUrls:c,field:S,formik:z,methods:h,components:d,setFieldOptions:b,...P[S.name]?{optionsOverride:P[S.name]}:{}},S.name)},S?.name??`field-${C}`))}),t.jsxs("div",{className:`mt-8 flex ${f>0?"justify-between":"justify-end"} space-x-3`,children:[f>0&&t.jsx("button",{onClick:q,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:l,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:x?"Next":"Save"})]})]})]}),t.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{children:["Tab ",f+1," of ",T.length]}),t.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),t.jsx("div",{className:"flex gap-1",children:T.map((S,C)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${C===f?"bg-action w-6":"bg-gray-300"}`},C))})]})})]},T[f])]})}function Me({title:e,fields:r,data:i,onSubmit:o=A=>{},onCancel:l=()=>{},methods:h={},sqlOpsUrls:d={},refid:c,module_refid:x}){const A=Fe(r,d.operation),[g,T]=F.useState({}),f=(b,j)=>{T(E=>({...E,[b]:j}))},{initialValues:I,validationSchema:P}=F.useMemo(()=>{const b={},j={};return A.forEach(E=>{te([E],b,j,i)}),{initialValues:b,validationSchema:j}},[A,i]),_=se.useFormik({initialValues:I,enableReinitialize:!0,validationSchema:D.object().shape(P),onSubmit:b=>{o(b)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:_.handleSubmit,className:"p-4  mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:A.map((b,j)=>ie(b.hidden)||b.type==="geolocation"||b.vmode==="edit"&&d.operation==="create"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${oe[le(Number(b.width))]||"lg:col-span-4"}`,children:t.jsx(ue,{refid:c,module_refid:x,sqlOpsUrls:d,field:b,formik:_,methods:h,setFieldOptions:f,...g[b.name]?{optionsOverride:g[b.name]}:{}})},b?.name??`field-${j}`))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function Le({title:e,children:r}){return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[t.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]})}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function ze({title:e,groupedFields:r,data:i,onSubmit:o=g=>{},onCancel:l=()=>{},methods:h={},components:d={},sqlOpsUrls:c={},refid:x,module_refid:A}){const[g,T]=F.useState({}),f=(b,j)=>{T(E=>({...E,[b]:j}))},{initialValues:I,validationSchema:P}=F.useMemo(()=>{const b={},j={};return Object.values(r).flat().forEach(E=>{te([E],b,j,i)}),{initialValues:b,validationSchema:j}},[r,i]),_=se.useFormik({initialValues:I,enableReinitialize:!0,validationSchema:D.object().shape(P),onSubmit:b=>{o(b)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:_.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([b,j],E)=>t.jsx(Le,{title:b,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:j.map((N,O)=>ie(N.hidden)||N.type==="geolocation"||N.vmode==="edit"&&c.operation==="create"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${oe[le(Number(N.width))]||"lg:col-span-4"}`,children:t.jsx(ue,{refid:x,module_refid:A,sqlOpsUrls:c,components:d,field:N,formik:_,methods:h,setFieldOptions:f,...g[N.name]?{optionsOverride:g[N.name]}:{}},N.name)},N?.name??`field-${O}`))})},b))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:l,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const re=e=>({Authorization:`Bearer ${e.accessToken}`}),he=async e=>(await V.get(e.baseURL+e.dbopsGetHash,{headers:re(e)})).data.refhash,me=async(e,r)=>(await V.post(e.baseURL+e.dbopsGetRefId,r,{headers:re(e)})).data.refid,qe={async fetch(e,r,i,o){const l=await he(e);let h=!1,d;i&&(h=!0,d=i),h||(d=await me(e,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:l,srcid:o}));const c=await V.post(e.baseURL+e.dbopsFetch,{refid:d,datahash:l},{headers:re(e)});return c.data?.data??c.data},async create(e,r,i){const o=await he(e),l=await me(e,{operation:"create",source:r.source,fields:r.values,datahash:o,srcid:i});return(await V.post(e.baseURL+e.dbopsCreate,{refid:l,fields:r.values,datahash:o},{headers:re(e)})).data},async update(e,r,i){const o=await he(e),l=await me(e,{operation:"update",source:r.source,fields:r.values,datahash:o,srcid:i});return(await V.post(e.baseURL+e.dbopsUpdate,{refid:l,fields:r.values,datahash:o},{headers:re(e)})).data}};function De({formJson:e={title:"",fields:{},source:{}},methods:r={},userid:i=null,onCancel:o=()=>{},components:l={},callback:h=()=>{},initialvalues:d={}}){let c=Ae(e);const x=e.endPoints,A=e?.source?.refid,g=Ee(e?.fields??{},x?.operation),[T,f]=F.useState(d),I=F.useMemo(()=>Ce(e.fields),[e.fields]);F.useEffect(()=>{let b=!0;return(async()=>{const E=e?.source??{};if(!E?.type){b&&f({});return}if(E.type==="method"){const N=E.method,O=N?r[N]:void 0;if(O)try{const y=await Promise.resolve(O());b&&f(y??{})}catch(y){console.error("Method execution failed:",y),b&&f({})}else b&&f({})}if(E.type==="api"&&x?.operation!=="create")try{const N=await V({method:E.method||"GET",url:E.url??"",data:E.body??{},params:E.params??{},headers:E.headers??{}});b&&f(N.data??{})}catch(N){console.error("API fetch failed:",N),b&&f({})}if(E.type==="sql"&&E.refid&&E.refid!=="0"&&x?.operation!=="create"||x?.operation!=="create"&&E.dbopsid){if(!x){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const N=await qe.fetch(x,{source:{...E,table:E.table,columns:E.columns,where:U(E.where,{refid:A})},fields:ye(e.fields,x.operation)},E?.dbopsid,e?.module_refid);b&&f(N)}catch(N){console.error("API fetch failed:",N)}}})(),()=>{b=!1}},[i,e?.source?.type||"",e?.source?.method||"",e?.source?.url||"",JSON.stringify(e?.source?.params??{}),JSON.stringify(e?.source?.body??{}),JSON.stringify(e?.source?.headers??{})]);const P=async b=>{const j=e?.source??{};let E=null;if(I.length>0)try{E=await Te()}catch(O){console.error("catch fetchGeolocation",O),E=null}const N={...b,...Object.fromEntries(I.map(O=>[O,E]))};if(j.type==="method"){const O=j.method,y=O?r[O]:void 0;if(y)try{const z=await Promise.resolve(y(N));if(h?.(z),r?.handleActions){let s=x?.operation==="update"?A:z?.data?.refid;const q=e?.gotolink?.replace("{hashid}",String(s));r.handleActions(q)}}catch(z){h?.(z),console.error("Method execution failed:",z)}}if(j.type==="api"){if(!x){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const O=await V({method:j.method||"POST",url:x.baseURL+j.endpoint,data:N??{},headers:{Authorization:`Bearer ${x?.accessToken}`}});if(h?.(O),r?.handleActions){let y=x.operation==="update"?A:O?.data?.refid;const z=e?.gotolink?.replace("{hashid}",String(y));r.handleActions(z)}}catch(O){h?.(O),console.error("API fetch failed:",O)}}if(j.type==="sql"){const O=e.endPoints;if(!O){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let y=!1,z;j?.dbopsid&&(y=!0,z=j?.dbopsid);const s=await V({method:"GET",url:O.baseURL+O.dbopsGetHash,headers:{Authorization:`Bearer ${O?.accessToken}`}});if(!y){let S={...j};j.where&&(S={...j,where:U(j.where,{refid:A})}),z=(await V({method:"POST",url:O.baseURL+O.dbopsGetRefId,data:{operation:O.operation,source:S,fields:ye(e.fields,O.operation),forcefill:e.forcefill,datahash:s.data.refhash,srcid:e?.module_refid},headers:{Authorization:`Bearer ${O?.accessToken}`}}))?.data.refid}const q=await V({method:"POST",url:O.baseURL+O[O.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:z,fields:N,datahash:s.data.refhash},headers:{Authorization:`Bearer ${O?.accessToken}`}});if(h?.(q),r?.handleActions){let S=O.operation==="update"?A:q?.data?.refid;const C=e?.gotolink?.replace("{hashid}",String(S));r.handleActions(C)}}catch(y){h?.(y),console.error("API fetch failed:",y)}}},_={accordion:t.jsx(Re,{title:e?.title??"",groupedFields:g,data:T,onSubmit:P,onCancel:o,methods:r,components:l,sqlOpsUrls:x,refid:A,module_refid:e?.module_refid}),cards:t.jsx(ze,{title:e?.title??"",groupedFields:g,data:T,onSubmit:P,onCancel:o,methods:r,components:l,sqlOpsUrls:x,refid:A,module_refid:e?.module_refid}),tab:t.jsx(ke,{title:e?.title??"",groupedFields:g,data:T,onSubmit:P,onCancel:o,methods:r,components:l,widget:e?.widget,sqlOpsUrls:x,refid:A,module_refid:e?.module_refid}),simple:t.jsx(Me,{title:e?.title??"",fields:e.fields,data:T,onSubmit:P,onCancel:o,methods:r,components:l,sqlOpsUrls:x,refid:A,module_refid:e?.module_refid})};return t.jsx("div",{className:"relative",children:_[c]??_.simple})}W.LogiksForm=De,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
