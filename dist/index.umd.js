(function(G,O){typeof exports=="object"&&typeof module<"u"?O(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],O):(G=typeof globalThis<"u"?globalThis:G||self,O(G.LogiksForm={},G.React,G.axios,G.Yup,G.formik))})(this,function(G,O,V,ve,ne){"use strict";function je(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const c in e)if(c!=="default"){const l=Object.getOwnPropertyDescriptor(e,c);Object.defineProperty(r,c,l.get?l:{enumerable:!0,get:()=>e[c]})}}return r.default=e,Object.freeze(r)}const D=je(ve);var oe={exports:{}},J={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe;function Ne(){if(pe)return J;pe=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function c(l,i,m){var f=null;if(m!==void 0&&(f=""+m),i.key!==void 0&&(f=""+i.key),"key"in i){m={};for(var d in i)d!=="key"&&(m[d]=i[d])}else m=i;return i=m.ref,{$$typeof:e,type:l,key:f,ref:i!==void 0?i:null,props:m}}return J.Fragment=r,J.jsx=c,J.jsxs=c,J}var ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xe;function we(){return xe||(xe=1,process.env.NODE_ENV!=="production"&&function(){function e(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===L?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case v:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case a:return"Suspense";case R:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(typeof s.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),s.$$typeof){case I:return"Portal";case _:return(s.displayName||"Context")+".Provider";case j:return(s._context.displayName||"Context")+".Consumer";case $:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case q:return o=s.displayName||null,o!==null?o:e(s.type)||"Memo";case N:o=s._payload,s=s._init;try{return e(s(o))}catch{}}return null}function r(s){return""+s}function c(s){try{r(s);var o=!1}catch{o=!0}if(o){o=console;var h=o.error,x=typeof Symbol=="function"&&Symbol.toStringTag&&s[Symbol.toStringTag]||s.constructor.name||"Object";return h.call(o,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",x),r(s)}}function l(s){if(s===v)return"<>";if(typeof s=="object"&&s!==null&&s.$$typeof===N)return"<...>";try{var o=e(s);return o?"<"+o+">":"<...>"}catch{return"<...>"}}function i(){var s=Y.A;return s===null?null:s.getOwner()}function m(){return Error("react-stack-top-frame")}function f(s){if(k.call(s,"key")){var o=Object.getOwnPropertyDescriptor(s,"key").get;if(o&&o.isReactWarning)return!1}return s.key!==void 0}function d(s,o){function h(){B||(B=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",o))}h.isReactWarning=!0,Object.defineProperty(s,"key",{get:h,configurable:!0})}function b(){var s=e(this.type);return A[s]||(A[s]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),s=this.props.ref,s!==void 0?s:null}function g(s,o,h,x,p,F,K,U){return h=F.ref,s={$$typeof:C,type:s,key:o,props:F,_owner:p},(h!==void 0?h:null)!==null?Object.defineProperty(s,"ref",{enumerable:!1,get:b}):Object.defineProperty(s,"ref",{enumerable:!1,value:null}),s._store={},Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(s,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(s,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:K}),Object.defineProperty(s,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:U}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s}function y(s,o,h,x,p,F,K,U){var z=o.children;if(z!==void 0)if(x)if(W(z)){for(x=0;x<z.length;x++)w(z[x]);Object.freeze&&Object.freeze(z)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else w(z);if(k.call(o,"key")){z=e(s);var Q=Object.keys(o).filter(function(De){return De!=="key"});x=0<Q.length?"{key: someKey, "+Q.join(": ..., ")+": ...}":"{key: someKey}",u[z+x]||(Q=0<Q.length?"{"+Q.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,x,z,Q,z),u[z+x]=!0)}if(z=null,h!==void 0&&(c(h),z=""+h),f(o)&&(c(o.key),z=""+o.key),"key"in o){h={};for(var se in o)se!=="key"&&(h[se]=o[se])}else h=o;return z&&d(h,typeof s=="function"?s.displayName||s.name||"Unknown":s),g(s,z,F,p,i(),h,K,U)}function w(s){typeof s=="object"&&s!==null&&s.$$typeof===C&&s._store&&(s._store.validated=1)}var E=O,C=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),j=Symbol.for("react.consumer"),_=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.client.reference"),Y=E.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k=Object.prototype.hasOwnProperty,W=Array.isArray,ae=console.createTask?console.createTask:function(){return null};E={"react-stack-bottom-frame":function(s){return s()}};var B,A={},M=E["react-stack-bottom-frame"].bind(E,m)(),n=ae(l(m)),u={};ee.Fragment=v,ee.jsx=function(s,o,h,x,p){var F=1e4>Y.recentlyCreatedOwnerStacks++;return y(s,o,h,!1,x,p,F?Error("react-stack-top-frame"):M,F?ae(l(s)):n)},ee.jsxs=function(s,o,h,x,p){var F=1e4>Y.recentlyCreatedOwnerStacks++;return y(s,o,h,!0,x,p,F?Error("react-stack-top-frame"):M,F?ae(l(s)):n)}}()),ee}var be;function Se(){return be||(be=1,process.env.NODE_ENV==="production"?oe.exports=Ne():oe.exports=we()),oe.exports}var t=Se();function Ae(e){return e.template==="accordion"?"accordion":e.template==="simple"?"simple":e.template==="cards"?"cards":Object.values(e.fields||{}).some(l=>l.group)?"tab":"simple"}function Ee(e,r="create",c="Info"){const l={};let i=!1;if(Object.values(e).forEach(f=>{f.group&&(i=!0)}),!i)return{};const m=[];return Object.entries(e).forEach(([f,d])=>{if(d.vmode==="edit"&&r==="create")return;const b={...d,name:f};if(d.group){const g=d.group;l[g]||(l[g]=[]),l[g].push(b)}else m.push(b)}),m.length>0?{[c]:m,...l}:l}function ge(e,r="create"){const c={};return Object.keys(e).forEach(l=>{e[l].vmode==="edit"&&r==="create"||(c[l]={label:l,required:e[l].required??!1})}),c}const te=(e,r,c,l)=>{e.forEach(i=>{const m=i?.name;if(!m)return;let f=l?.[m];f==null&&(f=i.default),i.multiple===!0||i.type==="checkbox"||i.type==="tags"?r[m]=Array.isArray(f)?f:typeof f=="string"?f.split(",").map(b=>b.trim()).filter(Boolean):[]:i.type==="json"?r[m]=typeof f=="object"&&f!==null?JSON.stringify(f,null,2):f??"":i.type==="date"?r[m]=typeof f=="string"?f.slice(0,10):"":i.type==="time"?typeof f=="string"?f.includes("T")?r[m]=f.slice(11,16):r[m]=f.slice(0,5):r[m]="":m==="blocked"||m==="blacklist"?r[m]=String(f??"false"):r[m]=f??"";let d;i.type==="file"?d=i.multiple?D.array().of(D.mixed()):D.mixed():i.multiple===!0||i.type==="checkbox"||i.type==="tags"?d=D.array().of(D.string()):i.type==="email"?d=D.string().email("Invalid email"):i.type==="number"?d=D.number().typeError("Must be a number"):i.type==="json"?d=D.string().test("json","Invalid JSON",b=>{if(!b)return!0;try{return JSON.parse(b),!0}catch{return!1}}):d=D.string(),i.required&&(d=d.required(i.error_message||`${i.label||m} is required`)),i?.validate?.regex&&typeof i.validate.regex=="string"&&(d=d.matches(new RegExp(i?.validate?.regex),i?.error_message||"Invalid input format")),i?.validate&&Object.entries(i.validate).forEach(([b,g])=>{switch(b){case"email":g&&(d=d.email("Invalid email format"));break;case"mobile":d=d.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":d=d.matches(new RegExp(g),`Must match pattern: ${g}`);break;case"date":d=D.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((y,w)=>{if(typeof w=="string"){const E=w.replace(/-/g,"/"),[C,I,v]=E.split("/");if(C&&I&&v)return new Date(`${v}-${I}-${C}`)}return y});break;case"time":d=d.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":d=d.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":d=D.number().typeError("Must be numeric");break;case"float":case"decimal":d=D.number().typeError("Must be a decimal").transform((y,w)=>{if(w==null||w==="")return;const E=Number(w);if(isNaN(E))return y;if(typeof y=="number"&&!isNaN(y)){const C=Number(y);return Number.isInteger(C)?Number(E.toFixed(C)):E}return E});break;case"alphanumeric":d=d.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":d=d.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":d=d.transform(y=>y&&y.toUpperCase());break;case"lower":d=d.transform(y=>y&&y.toLowerCase());break;case"length-min":{const y=Number(g);isNaN(y)||(d=d.min(y,`Minimum length is ${y}`));break}case"length-max":{const y=Number(g);isNaN(y)||(d=d.max(y,`Maximum length is ${y}`));break}}}),c[m]=d})},le={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function ie(e){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(e)?e:6}const ce=e=>e===!0||e==="true",H=(e,r)=>typeof e=="string"?e.replace(/#(\w+)#/g,(c,l)=>r[l]!==void 0?String(r[l]):c):Array.isArray(e)?e.map(c=>H(c,r)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([c,l])=>[H(c,r),H(l,r)])):e,X=(e,r,c,l)=>{if(!Array.isArray(c)||c.length===0)return{};const i=l??(c[0]&&typeof c[0]=="object"&&"category"in c[0]?"category":void 0);if(!i){const f={};return c.forEach(d=>{const b=d[e],g=d[r];b!=null&&g!=null&&(f[String(b)]=String(g))}),f}const m={};return c.forEach(f=>{const d=f[i]??"Others",b=f[e],g=f[r];b==null||g==null||(m[d]||(m[d]={}),m[d][String(b)]=String(g))}),m},ye=(e,r)=>{if(!e||r==null)return;const c=String(r);if(typeof Object.values(e)[0]=="string")return e[c];for(const i of Object.values(e))if(c in i)return i[c]},$e=e=>{if(!e)return[];if(Array.isArray(e))return e.map(l=>[String(l.value),String(l.title??l.label??l.value)]);const r=Object.values(e);return r.length?typeof r[0]=="string"?Object.entries(e).map(([l,i])=>[String(l),i]):Object.values(e).flatMap(l=>Object.entries(l).map(([i,m])=>[String(i),m])):[]},fe=e=>{if(!e||typeof e!="object")return!1;const r=Object.values(e)[0];return typeof r=="object"&&r!==null&&!Array.isArray(r)};async function Oe(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const e=await new Promise((l,i)=>{navigator.geolocation.getCurrentPosition(l,i,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:r,longitude:c}=e.coords;return`${r},${c}`}catch(e){if(!(e instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(e.code){case e.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case e.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case e.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const Te=e=>Object.entries(e??{}).filter(([,r])=>r.type==="geolocation").map(([r])=>r);function Ce(e,r="create"){return Object.entries(e).filter(([,c])=>!(c.vmode==="edit"&&r==="create")).map(([c,l])=>({...l,name:c}))}async function ue(e,r,c,l=void 0,i={}){try{let m=c;return m||(m=(await V({method:"POST",url:e.baseURL+e.registerQuery,data:{query:r??{}},headers:{Authorization:`Bearer ${e?.accessToken}`}})).data.queryid),await V({method:"POST",url:e.baseURL+e.runQuery,data:{queryid:m,filter:i,refid:l,page:0,limit:1e4},headers:{Authorization:`Bearer ${e?.accessToken}`}})}catch(m){throw m}}function Fe(e){return typeof e=="object"&&e!==null&&typeof e.target=="string"&&typeof e.src=="object"&&e.src!==null&&typeof e.src.table=="string"}function Ie(e){return e.split(",").map(r=>r.trim()).map(r=>{const c=r.match(/^(.+?)\s+as\s+.+$/i);return c?c[1]?.trim():r}).filter(r=>!!r)}const Z=e=>{const r={};for(const[c,l]of Object.entries(e)){const i=c.includes(".")?c.split(".").pop():c;if(i in r){console.warn(`Duplicate key after normalization: ${i}`);continue}r[i]=l}return r};function de({field:e,formik:r,methods:c={},sqlOpsUrls:l,refid:i,optionsOverride:m,setFieldOptions:f}){const[d,b]=O.useState(!1),[g,y]=O.useState(m??e.options??{}),[w,E]=O.useState(""),[C,I]=O.useState(0),v=O.useRef(null),S=O.useRef(null),[T,j]=O.useState(!1),_=O.useRef(w);O.useEffect(()=>{_.current=w},[w]);const $=A=>{A.currentTarget.open||E("")};O.useEffect(()=>{m&&Object.keys(m).length!==0&&y(m)},[m]),O.useEffect(()=>{const A=M=>{S.current&&!S.current.contains(M.target)&&(S.current.open=!1,E(""))};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[]);const a=e.name;O.useEffect(()=>{let A=!0;return(async()=>{let n=e.valueKey??"value",u=e.labelKey??"title";if(e?.options){if(typeof e.options=="object"&&!Array.isArray(e.options)){const p=Object.values(e.options);if(p.length&&typeof p[0]=="string"){y(e.options);return}}const h=(Array.isArray(e.options)?e.options:[e.options]).map(Z),x=X(n,u,h,e.groupKey);y(x);return}const s=e?.source??{};if(e.type==="dataMethod"){const o=e.method,h=o?c[o]:void 0;if(h)try{const x=await Promise.resolve(h()),p=Array.isArray(x?.data?.data)?x.data.data:Array.isArray(x?.data)?x.data:x,F=Array.isArray(p)?p.map(Z):[],K=X(n,u,F,e.groupKey);A&&y(K)}catch(x){console.error("Method execution failed:",x),A&&y({})}else A&&y({})}if(s.type==="api"&&s.url)try{const o=await V({method:s.method||"GET",url:s.url,data:s.body??{},params:s.params??{},headers:s.headers??{}}),h=Array.isArray(o?.data?.data)?o.data.data:Array.isArray(o?.data)?o.data:o,x=Array.isArray(h)?h.map(Z):[],p=X(n,u,x,e.groupKey);A&&y(p)}catch(o){console.error("API execution failed:",o),A&&y({})}if(e.table||e.type==="dataSelector"||e.queryid){if(!l){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let o;if(e.type==="dataSelector")o={table:"do_lists",cols:"title,value",where:{groupid:e.groupid??""}};else if(!e.queryid){if(!e.table||!e.columns){console.error("Invalid SQL field config",e);return}o={table:e.table,cols:e.columns,where:e.where?i?H(e.where,{refid:i}):e.where:void 0}}const h=await ue(l,o,e?.queryid),x=Array.isArray(h?.data?.data)?h.data.data:Array.isArray(h?.data)?h.data:h,p=Array.isArray(x)?x.map(Z):[],F=X(n,u,p,e.groupKey);A&&y(F)}catch(o){console.error("API fetch failed:",o)}}})(),()=>{A=!1}},[e.options,e.source,e.table,e.columns,e.where,i]);const R=`
    w-full px-4 py-2 rounded-lg border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0
  `,q=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,N=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,P=A=>A.icon?t.jsx("i",{className:A.icon}):null,L=O.useMemo(()=>$e(g),[g]);console.log("flatOptions",L);const Y=L.length,k=O.useMemo(()=>e.search||!w?L:L.filter(([,A])=>A.toLowerCase().includes(w.toLowerCase())),[e.search,w,L]),W=(A,M)=>{if(S.current?.open===!0||T===!0)if(A.key==="ArrowDown")A.preventDefault(),I(n=>n+1<k.length?n+1:0);else if(A.key==="ArrowUp")A.preventDefault(),I(n=>n-1>=0?n-1:k.length-1);else if(A.key==="Enter"){A.preventDefault();const[n]=k[C]||[];n&&r.setFieldValue(e.name,M?n:[...r.values[e.name],n]),S.current&&(S.current.open=!1)}else A.key==="Escape"&&(S.current.open=!1,E(""),j(!1))};O.useEffect(()=>{v.current?.querySelector(`[data-index="${C}"]`)?.scrollIntoView({block:"nearest"})},[C]),O.useEffect(()=>{C>=k.length&&I(0)},[k,C]),O.useEffect(()=>{const A=e.autocomplete,M=e.ajaxchain;if(!A&&!M)return;const n=r.values[e.name];if(!n)return;const u=Array.isArray(M)?M:M?[M]:[];(async()=>{try{if(Fe(A)){const o=A.src;if(!o||!l)return;const h=H(o.where??{},{refid:n}),x={...o,table:o.table,cols:o.columns,where:h},{data:p}=await ue(l,x,e?.queryid),F=Array.isArray(p?.data)?p.data[0]:p?.data;F&&A.target.split(",").map(K=>K.trim()).forEach(K=>{F[K]!==void 0&&r.setFieldValue(K,F[K])})}for(const o of u){const h=o.src;if(!o||typeof o!="object"||!h||typeof h!="object"||!l)continue;let x;if(!h.queryid){if(!h.table||!h.columns)throw new Error("SQL query requires field.table");const se=H(h?.where??{},{refid:n});x={...h,table:h.table,cols:h.columns,where:se}}const{data:p}=await ue(l,x,h?.queryid,n);let F=e.valueKey??"value",K=e.labelKey??"title";const U=Array.isArray(p?.data?.data)?p.data.data:Array.isArray(p?.data)?p.data:p,z=Array.isArray(U)?U.map(Z):[],Q=X(F,K,z,e.groupKey);f?.(o.target,Q)}}catch(o){console.error("Autocomplete / AjaxChain fetch failed",o)}})()},[r.values[e.name]]),O.useEffect(()=>{if(!e.search||!w.trim()||!e.table||!l)return;const A=Ie(e.columns??""),M=new AbortController,n=setTimeout(async()=>{try{let u;if(!e.queryid){if(!e.table||!e.cols)throw new Error("SQL query requires field.table");const U=i?H(e.where??{},{refid:i}):e.where;u={...e,table:e.table,cols:e.columns||e.cols,where:U}}let s={};Array.isArray(A)&&A.forEach(U=>{s[U]=[w,"LIKE"]});let o=e.valueKey??"value",h=e.labelKey??"title";const{data:x}=await ue(l,u,e?.queryid,void 0,s),p=Array.isArray(x?.data?.data)?x.data.data:Array.isArray(x?.data)?x.data:x,F=Array.isArray(p)?p.map(Z):[],K=X(o,h,F,e.groupKey);y(K)}catch(u){if(V.isCancel(u))return;console.error("Search fetch failed",u)}},500);return()=>{clearTimeout(n),M.abort()}},[w,i]);const ae=async A=>{if(A.length===0){console.error("No file");return}const M=l?.baseURL+l?.uploadURL;if(!M){console.error("No Upload URL ");return}const n=e.multiple===!0;try{const u=await Promise.all(Array.from(A).map(async s=>{const o=new FormData;return o.append("file",s),(await V({method:"POST",url:M,data:o,headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${l?.accessToken}`}})).data}));r.setFieldValue(a,n?u.map(s=>s.path):u[0]?.path)}catch(u){console.error("File upload failed",u),r.setFieldError(a,"File upload failed")}};console.log("options",g);const B=async(A,M,n)=>{const u=M[A];if(!u)return;const s=c?.[u];if(typeof s!="function"){console.error(`Method "${String(u)}" not found`);return}try{await Promise.resolve(s(n))}catch(o){console.error(`Method "${String(u)}" failed`,o)}};switch(e.type){case"autocomplete":{const n=r.values[a]??"",u=w!==""?w:ye(g,n)??String(n??""),s=h=>{const x=h.target.value;E(x),I(0),x.trim()?j(!0):(j(!1),r.setFieldValue(a,""))},o=h=>{r.setFieldValue(a,h),E(""),j(!1),B("onChange",e,`${a}-${h}`)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{className:`${R} ${q}`,value:u,placeholder:e.placeholder||"Type to search...",onChange:s,onBlur:()=>{setTimeout(()=>j(!1),150)},onKeyDown:h=>{if(h.key==="Enter"){if(h.preventDefault(),k[C]){const[x]=k[C];r.setFieldValue(a,x)}else w.trim()&&r.setFieldValue(a,w.trim());j(!1);return}W(h,!0)},disabled:e.disabled}),T&&t.jsx("div",{ref:v,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:k.length>0?k.map(([h,x],p)=>t.jsx("div",{id:`${a}-${h}`,"data-index":p,className:`px-3 py-2 cursor-pointer text-sm
                  ${C===p?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>o(h),children:x},h)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:`No matches press enter to add "${u}" `})}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(e.multiple===!0){const n=r.values[a];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:S,onKeyDown:u=>W(u,!1),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:n?.length>0?n.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:v,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:w,onChange:u=>{E(u.target.value),I(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),k.length>0?k.map(([u,s],o)=>t.jsxs("label",{htmlFor:`${a}-${u}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${n?.includes(u)?"bg-indigo-50 text-indigo-600 font-medium":C===o?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${a}-${u}`,type:"checkbox",checked:n?.includes(u),onChange:h=>{const x=h.target.checked?[...n,u]:n?.filter(p=>p!==u);r.setFieldValue(a,x),B("onChange",e,`${a}-${u}`)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s]},u)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:S,onKeyDown:n=>W(n,!0),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[a]?ye(g,r.values[a])??"Select option":`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:v,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:w,onChange:n=>{E(n.target.value),I(0)},onKeyDown:n=>W(n,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),k.length>0&&t.jsx("div",{onClick:n=>{n.preventDefault(),n.stopPropagation(),r.setFieldValue(a,""),S.current?.removeAttribute("open"),E("")},className:"px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm hover:bg-gray-50",children:"Clear selection"}),k.length>0?k.map(([n,u],s)=>t.jsx("div",{id:`${a}-${n}`,"data-index":s,onClick:o=>{o.preventDefault(),o.stopPropagation(),r.setFieldValue(a,n),S.current?.removeAttribute("open"),E(""),I(0),B("onChange",e,`${a}-${n}`)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[a]===n?"bg-indigo-50 text-indigo-600 font-medium":C===s?"bg-gray-100":"hover:bg-gray-50"}`,children:u},n)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}case"textarea":return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:a,className:`${R} ${q} min-h-[120px] resize-none`,onFocus:()=>b(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:n=>{r.setFieldValue(a,n.target.value),B("onChange",e,`${a}`)},placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${d?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})});case"select":if(e.multiple===!0){const n=r.values[a];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:S,onKeyDown:u=>W(u,!1),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:n?.length>0?n.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:v,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:w,onChange:u=>{E(u.target.value),I(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),k.length>0?k.map(([u,s],o)=>t.jsxs("label",{htmlFor:`${a}-${u}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${n?.includes(u)?"bg-indigo-50 text-indigo-600 font-medium":C===o?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${a}-${u}`,type:"checkbox",checked:n?.includes(u),onChange:h=>{const x=h.target.checked?[...n,u]:n?.filter(p=>p!==u);r.setFieldValue(a,x),B("onChange",e,`${a}-${u}`)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s]},u)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:`${R} ${q} appearance-none cursor-pointer pr-12`,onFocus:()=>b(!0),name:a,id:a,value:r.values[a],onBlur:r.handleBlur,onChange:n=>{r.setFieldValue(a,n.target.value===""?"":n.target.value),B("onChange",e,`${a}`)},disabled:e.disabled,children:[t.jsx("option",{value:"",disabled:!0,children:e?.["no-option"]||`Please select ${e.label}`}),!fe(g)&&Object.entries(g).map(([n,u])=>t.jsx("option",{value:n,className:"py-2",children:u},n)),fe(g)&&Object.entries(g).map(([n,u])=>t.jsx("optgroup",{label:n,children:Object.entries(u).map(([s,o])=>t.jsx("option",{value:s,children:o},s))},n))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"radioList":case"radio":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`flex ${Y>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(g||{}).map(([n,u])=>t.jsxs("label",{htmlFor:`${a}-${n}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${a}-${n}`,type:"radio",name:a,checked:r.values[a]===n,value:n,onChange:s=>{r.setFieldValue(a,s.target.value===""?"":s.target.value),B("onChange",e,`${a}-${n}`)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),u]},n))}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]});case"checkbox":{const n=r.values[a];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(g||{}).map(([u,s])=>t.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${a}-${u}`,type:"checkbox",checked:n.includes(u),onChange:o=>{const h=o.target.checked?[...n,u]:n.filter(x=>x!==u);r.setFieldValue(a,h),B("onChange",e,`${a}-${u}`)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),s]},u))}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}case"tags":{const n=r.values[a],u=w.trim(),s=Array.isArray(g)?g:Object.entries(g||{}).map(([p,F])=>({value:p,label:F})),o=p=>{p&&!n.includes(p)&&(r.setFieldValue(a,[...n,p]),E(""))},h=p=>{r.setFieldValue(a,n.filter(F=>F!==p))},x=p=>s.find(F=>F.value===p)?.label??p;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:`${R} flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center`,onClick:()=>!e.disabled&&document.getElementById(`${a}-input`)?.focus(),children:[n.map(p=>t.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[t.jsx("span",{className:"text-indigo-700",children:x(p)}),t.jsx("button",{type:"button",onClick:F=>{F.stopPropagation(),e.disabled||h(p)},onMouseDown:F=>F.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"Ã—"})]},p)),t.jsx("input",{id:`${a}-input`,type:"text",value:w,onChange:p=>E(p.target.value),onKeyDown:p=>{(p.key==="Enter"||p.key===",")&&(p.preventDefault(),o(u))},placeholder:n.length===0?e.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:e.disabled})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"attachment":case"photo":case"avatar":case"file":const A=e.multiple===!0,M=Array.isArray(r.values[a])?r.values[a]:r.values[a]?[r.values[a]]:[];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:P(e)}),t.jsx("input",{id:a,type:"file",className:`${R} ${q} ${e.icon?"pl-9":""} `,onFocus:()=>b(!0),name:a,multiple:A,onChange:n=>{const u=n.currentTarget.files;u&&ae(u),B("onChange",e,`${a}`)},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${d?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),M.map(n=>{const u=n?.split("/").pop();return u?t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:"text-sm",children:u})},n):null}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"json":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:a,name:a,value:r.values[a],onChange:n=>{r.setFieldValue(a,n.target.value),B("onChange",e,`${a}`)},onBlur:r.handleBlur,placeholder:e.placeholder||"Enter valid JSON",disabled:e.disabled,className:`${R} ${q} min-h-[200px] font-mono text-sm resize-y`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${d?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"date":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:P(e)}),t.jsx("input",{id:a,type:"date",name:a,min:e.min,max:e.max,value:r.values[a],onChange:n=>{r.setFieldValue(a,n.target.value),B("onChange",e,`${a}`)},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled,className:`${R} ${q} ${e.icon?"pl-9":""}`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${d?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"number":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:P(e)}),t.jsx("input",{id:a,type:e.type||"text",className:`${R} ${q} ${e.icon?"pl-9":""} `,onFocus:()=>b(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:n=>{r.setFieldValue(a,n.target.value),B("onChange",e,`${a}`)},placeholder:e.placeholder,disabled:e.disabled,min:e.min,max:e.max}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${d?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});default:return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:N,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:P(e)}),t.jsx("input",{id:a,type:e.type||"text",className:`${R} ${q} ${e.icon?"pl-9":""} `,onFocus:()=>b(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:n=>{r.setFieldValue(a,n.target.value),B("onChange",e,`${a}`)},placeholder:e.placeholder,disabled:e.disabled,minLength:e.minlength,maxLength:e.maxlength}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${d?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}}function Pe({title:e,children:r,isFirst:c}){const[l,i]=O.useState(c);return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[t.jsxs("button",{onClick:()=>i(!l),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${l?"bg-action":"bg-gray-300"}`}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]}),t.jsxs("div",{className:`relative transition-all duration-300 ${l?"rotate-180":""}`,children:[t.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${l?"bg-action opacity-30":"bg-transparent opacity-0"}`}),t.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden  ${l?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white overflow-auto mb-5",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function _e({title:e,groupedFields:r,data:c,onSubmit:l=g=>{},onCancel:i=()=>{},methods:m={},components:f={},sqlOpsUrls:d={},refid:b}){const[g,y]=O.useState({}),w=(v,S)=>{y(T=>({...T,[v]:S}))},{initialValues:E,validationSchema:C}=O.useMemo(()=>{const v={},S={};return Object.values(r).flat().forEach(T=>{te([T],v,S,c)}),{initialValues:v,validationSchema:S}},[r,c]),I=ne.useFormik({initialValues:E,enableReinitialize:!0,validationSchema:D.object().shape(C),onSubmit:v=>{l(v)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:I.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([v,S],T)=>t.jsx(Pe,{title:v,isFirst:T===0,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:S.map((j,_)=>ce(j.hidden)||j.type==="geolocation"||j.vmode==="edit"&&d.operation==="create"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${le[ie(Number(j.width))]||"lg:col-span-4"}`,children:t.jsx(de,{refid:b,sqlOpsUrls:d,components:f,field:j,formik:I,methods:m,setFieldOptions:w,...g[j.name]?{optionsOverride:g[j.name]}:{}},j.name)},j?.name??`field-${_}`))})},v))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:i,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function Re({title:e,groupedFields:r,data:c,onSubmit:l=y=>{},onCancel:i=()=>{},methods:m={},components:f={},sqlOpsUrls:d={},widget:b,refid:g}){const y=Object.keys(r),[w,E]=O.useState(0),[C,I]=O.useState({}),v=(N,P)=>{I(L=>({...L,[N]:P}))},{initialValues:S,validationSchema:T,stepperSchemas:j}=O.useMemo(()=>{const N={},P={},L={};return b?Object.entries(r).forEach(([Y,k])=>{const W={};te(k,N,W,c),L[Y]=W}):Object.entries(r).forEach(([Y,k])=>{te(k,N,P,c)}),{initialValues:N,validationSchema:P,stepperSchemas:L}},[r,c,b]),_=y[w]??null,$=b&&_?j[_]??{}:T,a=ne.useFormik({initialValues:S,enableReinitialize:!0,validationSchema:D.object().shape($),onSubmit:N=>{b?(w<y.length-1&&E(P=>P+1),w===y.length-1&&l(N)):l(N)}}),R=async N=>{if(N.preventDefault(),!b){const P=await a.validateForm();if(Object.keys(P).length>0){alert("Please fill all required fields before submitting."),a.setTouched(Object.keys(P).reduce((L,Y)=>({...L,[Y]:!0}),{}));return}}a.handleSubmit(N)},q=()=>{E(N=>N>0?N-1:N)};return t.jsxs("div",{className:" max-w-full  m-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:t.jsx("nav",{className:"relative flex",children:y.map((N,P)=>t.jsx("button",{type:"button",onClick:()=>E(P),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${w===P?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:N})},N))})})}),t.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[t.jsxs("form",{onSubmit:R,className:"w-full mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:_&&r[_]?.map((N,P)=>ce(N.hidden)||N.type==="geolocation"||N.vmode==="edit"&&d.operation==="create"?null:t.jsx("div",{className:`col-span-12  ${le[ie(Number(N.width))]||"lg:col-span-4"}`,children:t.jsx(de,{refid:g,sqlOpsUrls:d,field:N,formik:a,methods:m,components:f,setFieldOptions:v,...C[N.name]?{optionsOverride:C[N.name]}:{}},N.name)},N?.name??`field-${P}`))}),t.jsxs("div",{className:`mt-8 flex ${w>0?"justify-between":"justify-end"} space-x-3`,children:[w>0&&t.jsx("button",{onClick:q,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:i,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:b?"Next":"Save"})]})]})]}),t.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{children:["Tab ",w+1," of ",y.length]}),t.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),t.jsx("div",{className:"flex gap-1",children:y.map((N,P)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${P===w?"bg-action w-6":"bg-gray-300"}`},P))})]})})]},y[w])]})}function ke({title:e,fields:r,data:c,onSubmit:l=b=>{},onCancel:i=()=>{},methods:m={},sqlOpsUrls:f={},refid:d}){const b=Ce(r,f.operation),[g,y]=O.useState({}),w=(v,S)=>{y(T=>({...T,[v]:S}))},{initialValues:E,validationSchema:C}=O.useMemo(()=>{const v={},S={};return b.forEach(T=>{te([T],v,S,c)}),{initialValues:v,validationSchema:S}},[b,c]),I=ne.useFormik({initialValues:E,enableReinitialize:!0,validationSchema:D.object().shape(C),onSubmit:v=>{l(v)}});return console.log("formik.values",I.values),t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:I.handleSubmit,className:"p-4  mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:b.map((v,S)=>ce(v.hidden)||v.type==="geolocation"||v.vmode==="edit"&&f.operation==="create"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${le[ie(Number(v.width))]||"lg:col-span-4"}`,children:t.jsx(de,{refid:d,sqlOpsUrls:f,field:v,formik:I,methods:m,setFieldOptions:w,...g[v.name]?{optionsOverride:g[v.name]}:{}})},v?.name??`field-${S}`))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:i,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function Me({title:e,children:r}){return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[t.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]})}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Le({title:e,groupedFields:r,data:c,onSubmit:l=g=>{},onCancel:i=()=>{},methods:m={},components:f={},sqlOpsUrls:d={},refid:b}){const[g,y]=O.useState({}),w=(v,S)=>{y(T=>({...T,[v]:S}))},{initialValues:E,validationSchema:C}=O.useMemo(()=>{const v={},S={};return Object.values(r).flat().forEach(T=>{te([T],v,S,c)}),{initialValues:v,validationSchema:S}},[r,c]),I=ne.useFormik({initialValues:E,enableReinitialize:!0,validationSchema:D.object().shape(C),onSubmit:v=>{l(v)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:I.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([v,S],T)=>t.jsx(Me,{title:v,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:S.map((j,_)=>ce(j.hidden)||j.type==="geolocation"||j.vmode==="edit"&&d.operation==="create"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${le[ie(Number(j.width))]||"lg:col-span-4"}`,children:t.jsx(de,{refid:b,sqlOpsUrls:d,components:f,field:j,formik:I,methods:m,setFieldOptions:w,...g[j.name]?{optionsOverride:g[j.name]}:{}},j.name)},j?.name??`field-${_}`))})},v))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:i,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const re=e=>({Authorization:`Bearer ${e.accessToken}`}),he=async e=>(await V.get(e.baseURL+e.dbopsGetHash,{headers:re(e)})).data.refhash,me=async(e,r)=>(await V.post(e.baseURL+e.dbopsGetRefId,r,{headers:re(e)})).data.refid,ze={async fetch(e,r,c){const l=await he(e);let i=!1,m;c&&(i=!0,m=c),console.log("skipquery,dbopsid",i,c),i||(m=await me(e,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:l}));const f=await V.post(e.baseURL+e.dbopsFetch,{refid:m,datahash:l},{headers:re(e)});return f.data?.data??f.data},async create(e,r){const c=await he(e),l=await me(e,{operation:"create",source:r.source,fields:r.values,datahash:c});return(await V.post(e.baseURL+e.dbopsCreate,{refid:l,fields:r.values,datahash:c},{headers:re(e)})).data},async update(e,r){const c=await he(e),l=await me(e,{operation:"update",source:r.source,fields:r.values,datahash:c});return(await V.post(e.baseURL+e.dbopsUpdate,{refid:l,fields:r.values,datahash:c},{headers:re(e)})).data}};function qe({formJson:e={title:"",fields:{},source:{}},methods:r={},userid:c=null,onCancel:l=()=>{},components:i={},callback:m=()=>{},initialvalues:f={}}){let d=Ae(e);const b=e.endPoints,g=e?.source?.refid,y=Ee(e?.fields??{},b?.operation),[w,E]=O.useState(f),C=O.useMemo(()=>Te(e.fields),[e.fields]);O.useEffect(()=>{let S=!0;return(async()=>{const j=e?.source??{};if(!j?.type){S&&E({});return}if(j.type==="method"){const _=j.method,$=_?r[_]:void 0;if($)try{const a=await Promise.resolve($());S&&E(a??{})}catch(a){console.error("Method execution failed:",a),S&&E({})}else S&&E({})}if(j.type==="api"&&b?.operation!=="create")try{const _=await V({method:j.method||"GET",url:j.url??"",data:j.body??{},params:j.params??{},headers:j.headers??{}});S&&E(_.data??{})}catch(_){console.error("API fetch failed:",_),S&&E({})}if(j.type==="sql"&&j.refid&&j.refid!=="0"&&b?.operation!=="create"||b?.operation!=="create"&&j.dbopsid){if(!b){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const _=await ze.fetch(b,{source:{...j,table:j.table,columns:j.columns,where:H(j.where,{refid:g})},fields:ge(e.fields,b.operation)},j?.dbopsid);S&&E(_)}catch(_){console.error("API fetch failed:",_)}}})(),()=>{S=!1}},[c,e?.source?.type||"",e?.source?.method||"",e?.source?.url||"",JSON.stringify(e?.source?.params??{}),JSON.stringify(e?.source?.body??{}),JSON.stringify(e?.source?.headers??{})]);const I=async S=>{const T=e?.source??{};let j=null;if(C.length>0)try{j=await Oe()}catch($){console.log("catch fetchGeolocation",$),j=null}const _={...S,...Object.fromEntries(C.map($=>[$,j]))};if(T.type==="method"){const $=T.method,a=$?r[$]:void 0;if(a)try{const R=await Promise.resolve(a(_));if(m?.(R),r?.handleActions){let q=b?.operation==="update"?g:R?.data?.refid;const N=e?.gotolink?.replace("{hashid}",String(q));r.handleActions(N)}}catch(R){m?.(R),console.error("Method execution failed:",R)}}if(T.type==="api"){if(!b){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const $=await V({method:T.method||"POST",url:b.baseURL+T.endpoint,data:_??{},headers:{Authorization:`Bearer ${b?.accessToken}`}});if(m?.($),r?.handleActions){let a=b.operation==="update"?g:$?.data?.refid;const R=e?.gotolink?.replace("{hashid}",String(a));r.handleActions(R)}}catch($){m?.($),console.error("API fetch failed:",$)}}if(T.type==="sql"){const $=e.endPoints;if(!$){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let a=!1,R;T?.dbopsid&&(a=!0,R=T?.dbopsid);const q=await V({method:"GET",url:$.baseURL+$.dbopsGetHash,headers:{Authorization:`Bearer ${$?.accessToken}`}});if(!a){let P={...T};T.where&&(P={...T,where:H(T.where,{refid:g})}),R=(await V({method:"POST",url:$.baseURL+$.dbopsGetRefId,data:{operation:$.operation,source:P,fields:ge(e.fields,$.operation),forcefill:e.forcefill,datahash:q.data.refhash},headers:{Authorization:`Bearer ${$?.accessToken}`}}))?.data.refid}const N=await V({method:"POST",url:$.baseURL+$[$.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:R,fields:_,datahash:q.data.refhash},headers:{Authorization:`Bearer ${$?.accessToken}`}});if(console.log("res",N),m?.(N),r?.handleActions){let P=$.operation==="update"?g:N?.data?.refid;const L=e?.gotolink?.replace("{hashid}",String(P));r.handleActions(L)}}catch(a){m?.(a),console.error("API fetch failed:",a)}}},v={accordion:t.jsx(_e,{title:e?.title??"",groupedFields:y,data:w,onSubmit:I,onCancel:l,methods:r,components:i,sqlOpsUrls:b,refid:g}),cards:t.jsx(Le,{title:e?.title??"",groupedFields:y,data:w,onSubmit:I,onCancel:l,methods:r,components:i,sqlOpsUrls:b,refid:g}),tab:t.jsx(Re,{title:e?.title??"",groupedFields:y,data:w,onSubmit:I,onCancel:l,methods:r,components:i,widget:e?.widget,sqlOpsUrls:b,refid:g}),simple:t.jsx(ke,{title:e?.title??"",fields:e.fields,data:w,onSubmit:I,onCancel:l,methods:r,components:i,sqlOpsUrls:b,refid:g})};return t.jsx("div",{className:"relative",children:v[d]??v.simple})}G.LogiksForm=qe,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
