(function(Y,S){typeof exports=="object"&&typeof module<"u"?S(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],S):(Y=typeof globalThis<"u"?globalThis:Y||self,S(Y.LogiksForm={},Y.React,Y.axios,Y.Yup,Y.formik))})(this,function(Y,S,B,fe,ee){"use strict";function ye(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const u=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,u.get?u:{enumerable:!0,get:()=>e[n]})}}return r.default=e,Object.freeze(r)}const D=ye(fe);var te={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function ve(){if(he)return Q;he=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(u,o,x){var j=null;if(x!==void 0&&(j=""+x),o.key!==void 0&&(j=""+o.key),"key"in o){x={};for(var l in o)l!=="key"&&(x[l]=o[l])}else x=o;return o=x.ref,{$$typeof:e,type:u,key:j,ref:o!==void 0?o:null,props:x}}return Q.Fragment=r,Q.jsx=n,Q.jsxs=n,Q}var X={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function je(){return me||(me=1,process.env.NODE_ENV!=="production"&&function(){function e(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===G?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case p:return"Fragment";case E:return"Profiler";case g:return"StrictMode";case a:return"Suspense";case k:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(typeof s.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),s.$$typeof){case P:return"Portal";case F:return(s.displayName||"Context")+".Provider";case b:return(s._context.displayName||"Context")+".Consumer";case T:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case V:return i=s.displayName||null,i!==null?i:e(s.type)||"Memo";case f:i=s._payload,s=s._init;try{return e(s(i))}catch{}}return null}function r(s){return""+s}function n(s){try{r(s);var i=!1}catch{i=!0}if(i){i=console;var w=i.error,I=typeof Symbol=="function"&&Symbol.toStringTag&&s[Symbol.toStringTag]||s.constructor.name||"Object";return w.call(i,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",I),r(s)}}function u(s){if(s===p)return"<>";if(typeof s=="object"&&s!==null&&s.$$typeof===f)return"<...>";try{var i=e(s);return i?"<"+i+">":"<...>"}catch{return"<...>"}}function o(){var s=U.A;return s===null?null:s.getOwner()}function x(){return Error("react-stack-top-frame")}function j(s){if(M.call(s,"key")){var i=Object.getOwnPropertyDescriptor(s,"key").get;if(i&&i.isReactWarning)return!1}return s.key!==void 0}function l(s,i){function w(){h||(h=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",i))}w.isReactWarning=!0,Object.defineProperty(s,"key",{get:w,configurable:!0})}function m(){var s=e(this.type);return c[s]||(c[s]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),s=this.props.ref,s!==void 0?s:null}function y(s,i,w,I,z,L,ce,ue){return w=L.ref,s={$$typeof:C,type:s,key:i,props:L,_owner:z},(w!==void 0?w:null)!==null?Object.defineProperty(s,"ref",{enumerable:!1,get:m}):Object.defineProperty(s,"ref",{enumerable:!1,value:null}),s._store={},Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(s,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(s,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ce}),Object.defineProperty(s,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s}function d(s,i,w,I,z,L,ce,ue){var q=i.children;if(q!==void 0)if(I)if(K(q)){for(I=0;I<q.length;I++)v(q[I]);Object.freeze&&Object.freeze(q)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else v(q);if(M.call(i,"key")){q=e(s);var H=Object.keys(i).filter(function(Le){return Le!=="key"});I=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",A[q+I]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,I,q,H,q),A[q+I]=!0)}if(q=null,w!==void 0&&(n(w),q=""+w),j(i)&&(n(i.key),q=""+i.key),"key"in i){w={};for(var de in i)de!=="key"&&(w[de]=i[de])}else w=i;return q&&l(w,typeof s=="function"?s.displayName||s.name||"Unknown":s),y(s,q,L,z,o(),w,ce,ue)}function v(s){typeof s=="object"&&s!==null&&s.$$typeof===C&&s._store&&(s._store.validated=1)}var N=S,C=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),F=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),G=Symbol.for("react.client.reference"),U=N.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.prototype.hasOwnProperty,K=Array.isArray,O=console.createTask?console.createTask:function(){return null};N={"react-stack-bottom-frame":function(s){return s()}};var h,c={},$=N["react-stack-bottom-frame"].bind(N,x)(),_=O(u(x)),A={};X.Fragment=p,X.jsx=function(s,i,w,I,z){var L=1e4>U.recentlyCreatedOwnerStacks++;return d(s,i,w,!1,I,z,L?Error("react-stack-top-frame"):$,L?O(u(s)):_)},X.jsxs=function(s,i,w,I,z){var L=1e4>U.recentlyCreatedOwnerStacks++;return d(s,i,w,!0,I,z,L?Error("react-stack-top-frame"):$,L?O(u(s)):_)}}()),X}var pe;function Ne(){return pe||(pe=1,process.env.NODE_ENV==="production"?te.exports=ve():te.exports=je()),te.exports}var t=Ne();function we(e){return e.template==="accordion"?"accordion":e.template==="simple"?"simple":e.template==="cards"?"cards":Object.values(e.fields||{}).some(u=>u.group)?"tab":"simple"}function Se(e,r="Info"){const n={};let u=!1;if(Object.values(e).forEach(x=>{x.group&&(u=!0)}),!u)return{};const o=[];return Object.entries(e).forEach(([x,j])=>{const l={...j,name:x};if(j.group){const m=j.group;n[m]||(n[m]=[]),n[m].push(l)}else o.push(l)}),o.length>0?{[r]:o,...n}:n}function Ee(e){const r={};return Object.keys(e).forEach(n=>{r[n]={label:n,required:e[n].required??!1}}),r}const Z=(e,r,n,u)=>{e.forEach(o=>{const x=o?.name;if(!x)return;let j=u?.[x];j==null&&(j=o.default),o.multiple===!0||o.type==="checkbox"||o.type==="tags"?r[x]=Array.isArray(j)?j:typeof j=="string"?j.split(",").map(m=>m.trim()).filter(Boolean):[]:o.type==="json"?r[x]=typeof j=="object"&&j!==null?JSON.stringify(j,null,2):j??"":o.type==="date"?r[x]=typeof j=="string"?j.slice(0,10):"":x==="blocked"||x==="blacklist"?r[x]=String(j??"false"):r[x]=j??"";let l;o.type==="file"?l=o.multiple?D.array().of(D.mixed()):D.mixed():o.multiple===!0||o.type==="checkbox"||o.type==="tags"?l=D.array().of(D.string()):o.type==="email"?l=D.string().email("Invalid email"):o.type==="number"?l=D.number().typeError("Must be a number"):o.type==="date"?l=D.string().matches(/^\d{4}-\d{2}-\d{2}$/,"Invalid date"):o.type==="json"?l=D.string().test("json","Invalid JSON",m=>{if(!m)return!0;try{return JSON.parse(m),!0}catch{return!1}}):l=D.string(),o.required&&(l=l.required(o.error_message||`${o.label||x} is required`)),o?.validate?.regex&&typeof o.validate.regex=="string"&&(l=l.matches(new RegExp(o?.validate?.regex),o?.error_message||"Invalid input format")),o?.validate&&Object.entries(o.validate).forEach(([m,y])=>{switch(m){case"email":y&&(l=l.email("Invalid email format"));break;case"mobile":l=l.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":l=l.matches(new RegExp(y),`Must match pattern: ${y}`);break;case"date":l=D.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((d,v)=>{if(typeof v=="string"){const N=v.replace(/-/g,"/"),[C,P,p]=N.split("/");if(C&&P&&p)return new Date(`${p}-${P}-${C}`)}return d});break;case"time":l=l.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":l=l.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":l=D.number().typeError("Must be numeric");break;case"float":case"decimal":l=D.number().typeError("Must be a decimal").transform((d,v)=>{if(v==null||v==="")return;const N=Number(v);if(isNaN(N))return d;if(typeof d=="number"&&!isNaN(d)){const C=Number(d);return Number.isInteger(C)?Number(N.toFixed(C)):N}return N});break;case"alphanumeric":l=l.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":l=l.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":l=l.transform(d=>d&&d.toUpperCase());break;case"lower":l=l.transform(d=>d&&d.toLowerCase());break;case"length-min":{const d=Number(y);isNaN(d)||(l=l.min(d,`Minimum length is ${d}`));break}case"length-max":{const d=Number(y);isNaN(d)||(l=l.max(d,`Maximum length is ${d}`));break}}}),n[x]=l})},re={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function se(e){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(e)?e:6}const ae=e=>e===!0||e==="true",W=(e,r)=>typeof e=="string"?e.replace(/#(\w+)#/g,(n,u)=>r[u]!==void 0?String(r[u]):n):Array.isArray(e)?e.map(n=>W(n,r)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([n,u])=>[W(n,r),W(u,r)])):e,oe=(e,r,n,u)=>{const o=Array.isArray(n?.data?.data)?n.data.data:Array.isArray(n?.data)?n.data:n;if(!Array.isArray(o)||o.length===0)return{};const x=u??(o[0]&&typeof o[0]=="object"&&"category"in o[0]?"category":void 0);if(!x){const l={};return o.forEach(m=>{m[e]!=null&&m[r]!=null&&(l[m[e]]=m[r])}),l}const j={};return o.forEach(l=>{const m=l[x]??"Others",y=l[e],d=l[r];y==null||d==null||(j[m]||(j[m]={}),j[m][y]=d)}),j},xe=(e,r)=>{if(!e||r==null)return;if(typeof Object.values(e)[0]=="string")return e[r];for(const u of Object.values(e))if(r in u)return u[r]},Oe=e=>e?typeof Object.values(e)[0]=="string"?Object.entries(e):Object.values(e).flatMap(n=>Object.entries(n)):[],be=e=>{if(!e||typeof e!="object")return!1;const r=Object.values(e)[0];return typeof r=="object"&&r!==null};async function Te(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const e=await new Promise((u,o)=>{navigator.geolocation.getCurrentPosition(u,o,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:r,longitude:n}=e.coords;return`${r},${n}`}catch(e){if(!(e instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(e.code){case e.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case e.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case e.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const $e=e=>Object.entries(e??{}).filter(([,r])=>r.type==="geolocation").map(([r])=>r);function Ae(e){return Object.entries(e).map(([r,n])=>({...n,name:r}))}async function ge(e,r){try{const n=await B({method:"POST",url:e.baseURL+e.registerQuery,data:{query:r},headers:{Authorization:`Bearer ${e?.accessToken}`}});return await B({method:"POST",url:e.baseURL+e.runQuery,data:{queryid:n.data.queryid,filter:{}},headers:{Authorization:`Bearer ${e?.accessToken}`}})}catch(n){throw n}}function ne({field:e,formik:r,methods:n={},sqlOpsUrls:u,refid:o,optionsOverride:x,setFieldOptions:j}){const[l,m]=S.useState(!1),[y,d]=S.useState(x??e.options??{}),[v,N]=S.useState(""),[C,P]=S.useState(0),p=S.useRef(null),g=S.useRef(null),[E,b]=S.useState(!1),F=S.useRef(v);S.useEffect(()=>{F.current=v},[v]);const T=O=>{O.currentTarget.open||N("")};S.useEffect(()=>{x&&d(x)},[x]),S.useEffect(()=>{const O=h=>{g.current&&!g.current.contains(h.target)&&(g.current.open=!1,N(""))};return document.addEventListener("mousedown",O),()=>{document.removeEventListener("mousedown",O)}},[]);const a=e.name;S.useEffect(()=>{let O=!0;return(async()=>{if(e?.options){d(e.options);return}const c=e?.source??{};if(c.type==="method"){const $=c.method,_=$?n[$]:void 0;if(_)try{const A=await Promise.resolve(_());O&&d(A??{})}catch(A){console.error("Method execution failed:",A),O&&d({})}else O&&d({})}if(c.type==="api"&&c.url)try{const $=await B({method:c.method||"GET",url:c.url,data:c.body??{},params:c.params??{},headers:c.headers??{}}),_=e.valueKey||"value",A=e.labelKey||"title",s=oe(_,A,$,e.groupKey);O&&d(s)}catch($){console.error("API execution failed:",$),O&&d({})}if(e.table||e.type==="dataSelector"){if(!u){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let $;if(e.type==="dataSelector")$={table:"do_lists",cols:"title,value",where:{groupid:e.groupid??""}};else{if(!e.table||!e.columns){console.error("Invalid SQL field config",e);return}$={...e,table:e.table,cols:e.columns}}e.where&&e.type!=="dataSelector"&&($.where=o?W(e.where,{refid:o}):e.where);const _=await ge(u,$);console.log("resssssssssssssssssssssssssss",_);const A=e.valueKey||"value",s=e.labelKey||"title",i=oe(A,s,_,e.groupKey);O&&d(i)}catch($){console.error("API fetch failed:",$)}}})(),()=>{O=!1}},[e.options,e.source,e.table,e.columns,e.where,o]);const k=`
    w-full px-4 py-2 rounded-lg border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0
  `,V=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,f=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,R=O=>O.icon?t.jsx("i",{className:O.icon}):null,G=S.useMemo(()=>Oe(y),[y]),U=G.length,M=S.useMemo(()=>v?G.filter(([,O])=>O.toLowerCase().includes(v.toLowerCase())):G,[v,G]),K=(O,h)=>{if(g.current?.open===!0||E===!0)if(O.key==="ArrowDown")O.preventDefault(),P(c=>c+1<M.length?c+1:0);else if(O.key==="ArrowUp")O.preventDefault(),P(c=>c-1>=0?c-1:M.length-1);else if(O.key==="Enter"){O.preventDefault();const[c]=M[C]||[];c&&r.setFieldValue(e.name,h?c:[...r.values[e.name],c]),g.current&&(g.current.open=!1)}else O.key==="Escape"&&(g.current.open=!1,N(""),b(!1))};switch(S.useEffect(()=>{p.current?.querySelector(`[data-index="${C}"]`)?.scrollIntoView({block:"nearest"})},[C]),S.useEffect(()=>{C>=M.length&&P(0)},[M,C]),S.useEffect(()=>{const O=e.autocomplete,h=e.ajaxchain,c=O||h;if(!c||c==="off")return;const $=r.values[e.name];if(!$)return;(async()=>{try{const A=c.src,s=W(A.where??{},{refid:$});if(A.table&&u){let i={...A,table:A.table,cols:A.columns,where:s};const{data:w}=await ge(u,i);if(O){const I=c.target.split(",").map(L=>L.trim()),z=Array.isArray(w?.data)?w?.data[0]:w?.data;if(!z)return;I.forEach(L=>{z[L]!==void 0&&r.setFieldValue(L,z[L])})}if(h){const I=e.valueKey||"value",z=e.labelKey||"title",L=oe(I,z,w,e.groupKey);j?.(h.target,L)}}}catch(A){console.error("Autocomplete fetch failed",A)}})()},[r.values[e.name]]),e.type){case"autocomplete":{const h=r.values[a]??"",c=E?v:xe(y,h)??"",$=A=>{N(A.target.value),b(!0),P(0)},_=A=>{r.setFieldValue(a,A),N(""),b(!1)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{className:`${k} ${V}`,value:c,placeholder:e.placeholder||"Type to search...",onChange:$,onFocus:()=>b(!0),onBlur:()=>setTimeout(()=>b(!1),150),onKeyDown:A=>K(A,!0),disabled:e.disabled}),E&&t.jsx("div",{ref:p,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:M.length>0?M.map(([A,s],i)=>t.jsx("div",{"data-index":i,className:`px-3 py-2 cursor-pointer text-sm
                  ${C===i?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>_(A),children:s},A)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:"No matches"})}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"textarea":return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{className:`${k} ${V} min-h-[120px] resize-none`,onFocus:()=>m(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})});case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(e.multiple===!0){const h=r.values[a];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:T,ref:g,onKeyDown:c=>K(c,!1),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:h?.length>0?h.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:p,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:v,onChange:c=>{N(c.target.value),P(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),M.length>0?M.map(([c,$],_)=>t.jsxs("label",{htmlFor:`${a}-${c}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${h?.includes(c)?"bg-indigo-50 text-indigo-600 font-medium":C===_?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${a}-${c}`,type:"checkbox",checked:h?.includes(c),onChange:A=>{const s=A.target.checked?[...h,c]:h?.filter(i=>i!==c);r.setFieldValue(a,s)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),$]},c)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}return a==="category"&&console.log("formik.values[key]",r.values[a]),t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:T,ref:g,onKeyDown:h=>K(h,!0),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[a]?xe(y,r.values[a])??"Select option":`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:p,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:v,onChange:h=>{N(h.target.value),P(0)},onKeyDown:h=>K(h,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),M.length>0?M.map(([h,c],$)=>t.jsx("div",{"data-index":$,onClick:_=>{_.preventDefault(),_.stopPropagation(),r.setFieldValue(a,h),g.current?.removeAttribute("open"),N(""),P(0)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[a]===h?"bg-indigo-50 text-indigo-600 font-medium":C===$?"bg-gray-100":"hover:bg-gray-50"}`,children:c},h)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}case"select":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:`${k} ${V} appearance-none cursor-pointer pr-12`,onFocus:()=>m(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,disabled:e.disabled,children:[t.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Please select an option"}),!be(y)&&Object.entries(y).map(([h,c])=>t.jsx("option",{value:h,className:"py-2",children:c},h)),be(y)&&Object.entries(y).map(([h,c])=>t.jsx("optgroup",{label:h,children:Object.entries(c).map(([$,_])=>t.jsx("option",{value:$,children:_},$))},h))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"radioList":case"radio":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`flex ${U>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(y||{}).map(([h,c])=>t.jsxs("label",{htmlFor:`${a}-${h}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${a}-${h}`,type:"radio",name:a,checked:r.values[a]===h,value:h,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),c]},h))}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]});case"checkbox":{const h=r.values[a];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(y||{}).map(([c,$])=>t.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:h.includes(c),onChange:_=>{const A=_.target.checked?[...h,c]:h.filter(s=>s!==c);r.setFieldValue(a,A)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),$]},c))}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}case"tags":{const h=r.values[a],c=v.trim(),$=Array.isArray(y)?y:Object.entries(y||{}).map(([i,w])=>({value:i,label:w})),_=i=>{i&&!h.includes(i)&&(r.setFieldValue(a,[...h,i]),N(""))},A=i=>{r.setFieldValue(a,h.filter(w=>w!==i))},s=i=>$.find(w=>w.value===i)?.label??i;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:`${k} flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center`,onClick:()=>!e.disabled&&document.getElementById(`${a}-input`)?.focus(),children:[h.map(i=>t.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[t.jsx("span",{className:"text-indigo-700",children:s(i)}),t.jsx("button",{type:"button",onClick:w=>{w.stopPropagation(),e.disabled||A(i)},onMouseDown:w=>w.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"Ã—"})]},i)),t.jsx("input",{id:`${a}-input`,type:"text",value:v,onChange:i=>N(i.target.value),onKeyDown:i=>{(i.key==="Enter"||i.key===",")&&(i.preventDefault(),_(c))},placeholder:h.length===0?e.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:e.disabled})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"file":const O=e.multiple===!0;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:e.type||"text",className:`${k} ${V} ${e.icon?"pl-9":""} `,onFocus:()=>m(!0),name:a,multiple:O,onChange:h=>{const c=h.currentTarget.files;c&&r.setFieldValue(a,O?Array.from(c):c[0])},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"json":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:`${a}-json`,name:a,value:r.values[a],onChange:h=>r.setFieldValue(a,h.target.value),onBlur:r.handleBlur,placeholder:e.placeholder||"Enter valid JSON",disabled:e.disabled,className:`${k} ${V} min-h-[200px] font-mono text-sm resize-y`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"date":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:"date",name:a,value:r.values[a],onChange:r.handleChange,onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled,className:`${k} ${V} ${e.icon?"pl-9":""}`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});default:return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:f,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:e.type||"text",className:`${k} ${V} ${e.icon?"pl-9":""} `,onFocus:()=>m(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${l?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}}function Ce({title:e,children:r,isFirst:n}){const[u,o]=S.useState(n);return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[t.jsxs("button",{onClick:()=>o(!u),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${u?"bg-action":"bg-gray-300"}`}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]}),t.jsxs("div",{className:`relative transition-all duration-300 ${u?"rotate-180":""}`,children:[t.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${u?"bg-action opacity-30":"bg-transparent opacity-0"}`}),t.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${u?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Pe({title:e,groupedFields:r,data:n,onSubmit:u=y=>{},onCancel:o=()=>{},methods:x={},components:j={},sqlOpsUrls:l={},refid:m}){const[y,d]=S.useState({}),v=(p,g)=>{d(E=>({...E,[p]:g}))},{initialValues:N,validationSchema:C}=S.useMemo(()=>{const p={},g={};return Object.values(r).flat().forEach(E=>{Z([E],p,g,n)}),{initialValues:p,validationSchema:g}},[r,n]),P=ee.useFormik({initialValues:N,enableReinitialize:!0,validationSchema:D.object().shape(C),onSubmit:p=>{u(p)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:P.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([p,g],E)=>t.jsx(Ce,{title:p,isFirst:E===0,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:g.map((b,F)=>ae(b.hidden)||b.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(b.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:m,sqlOpsUrls:l,components:j,field:b,formik:P,methods:x,setFieldOptions:v,...y[b.name]?{optionsOverride:y[b.name]}:{}},b.name)},b?.name??`field-${F}`))})},p))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function Fe({title:e,groupedFields:r,data:n,onSubmit:u=d=>{},onCancel:o=()=>{},methods:x={},components:j={},sqlOpsUrls:l={},widget:m,refid:y}){const d=Object.keys(r),[v,N]=S.useState(0),[C,P]=S.useState({});console.log("groupNames",d);const p=(f,R)=>{P(G=>({...G,[f]:R}))},{initialValues:g,validationSchema:E,stepperSchemas:b}=S.useMemo(()=>{const f={},R={},G={};return m?Object.entries(r).forEach(([U,M])=>{const K={};Z(M,f,K,n),G[U]=K}):Object.entries(r).forEach(([U,M])=>{Z(M,f,R,n)}),{initialValues:f,validationSchema:R,stepperSchemas:G}},[r,n,m]),F=d[v]??null,T=m&&F?b[F]??{}:E,a=ee.useFormik({initialValues:g,enableReinitialize:!0,validationSchema:D.object().shape(T),onSubmit:f=>{m?(v<d.length-1&&N(R=>R+1),v===d.length-1&&u(f)):u(f)}}),k=async f=>{if(f.preventDefault(),!m){const R=await a.validateForm();if(Object.keys(R).length>0){alert("Please fill all required fields before submitting."),a.setTouched(Object.keys(R).reduce((G,U)=>({...G,[U]:!0}),{}));return}}a.handleSubmit(f)},V=()=>{N(f=>f>0?f-1:f)};return t.jsxs("div",{className:" max-w-full  m-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:t.jsx("nav",{className:"relative flex",children:d.map((f,R)=>t.jsx("button",{type:"button",onClick:()=>N(R),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${v===R?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:f})},f))})})}),t.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[t.jsxs("form",{onSubmit:k,className:"w-full mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:F&&r[F]?.map((f,R)=>ae(f.hidden)||f.type==="geolocation"?null:t.jsx("div",{className:`col-span-12  ${re[se(Number(f.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:y,sqlOpsUrls:l,field:f,formik:a,methods:x,components:j,setFieldOptions:p,...C[f.name]?{optionsOverride:C[f.name]}:{}},f.name)},f?.name??`field-${R}`))}),t.jsxs("div",{className:`mt-8 flex ${v>0?"justify-between":"justify-end"} space-x-3`,children:[v>0&&t.jsx("button",{onClick:V,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:o,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:m?"Next":"Save"})]})]})]}),t.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{children:["Tab ",v+1," of ",d.length]}),t.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),t.jsx("div",{className:"flex gap-1",children:d.map((f,R)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${R===v?"bg-action w-6":"bg-gray-300"}`},R))})]})})]},d[v])]})}function _e({title:e,fields:r,data:n,onSubmit:u=m=>{},onCancel:o=()=>{},methods:x={},sqlOpsUrls:j={},refid:l}){const m=Ae(r),[y,d]=S.useState({}),v=(p,g)=>{d(E=>({...E,[p]:g}))},{initialValues:N,validationSchema:C}=S.useMemo(()=>{const p={},g={};return m.forEach(E=>{Z([E],p,g,n)}),{initialValues:p,validationSchema:g}},[m,n]),P=ee.useFormik({initialValues:N,enableReinitialize:!0,validationSchema:D.object().shape(C),onSubmit:p=>{u(p)}});return S.useEffect(()=>{P.validateForm()},[]),t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:P.handleSubmit,className:"p-4  mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:m.map((p,g)=>ae(p.hidden)||p.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(p.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:l,sqlOpsUrls:j,field:p,formik:P,methods:x,setFieldOptions:v,...y[p.name]?{optionsOverride:y[p.name]}:{}})},p?.name??`field-${g}`))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function Re({title:e,children:r}){return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[t.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]})}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function ke({title:e,groupedFields:r,data:n,onSubmit:u=y=>{},onCancel:o=()=>{},methods:x={},components:j={},sqlOpsUrls:l={},refid:m}){const[y,d]=S.useState({}),v=(p,g)=>{d(E=>({...E,[p]:g}))},{initialValues:N,validationSchema:C}=S.useMemo(()=>{const p={},g={};return Object.values(r).flat().forEach(E=>{Z([E],p,g,n)}),{initialValues:p,validationSchema:g}},[r,n]),P=ee.useFormik({initialValues:N,enableReinitialize:!0,validationSchema:D.object().shape(C),onSubmit:p=>{u(p)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:P.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([p,g],E)=>t.jsx(Re,{title:p,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:g.map((b,F)=>ae(b.hidden)||b.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(b.width))]||"lg:col-span-4"}`,children:t.jsx(ne,{refid:m,sqlOpsUrls:l,components:j,field:b,formik:P,methods:x,setFieldOptions:v,...y[b.name]?{optionsOverride:y[b.name]}:{}},b.name)},b?.name??`field-${F}`))})},p))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:o,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const J=e=>({Authorization:`Bearer ${e.accessToken}`}),le=async e=>(await B.get(e.baseURL+e.dbopsGetHash,{headers:J(e)})).data.refhash,ie=async(e,r)=>(await B.post(e.baseURL+e.dbopsGetRefId,r,{headers:J(e)})).data.refid,Ie={async fetch(e,r){const n=await le(e),u=await ie(e,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:n}),o=await B.post(e.baseURL+e.dbopsFetch,{refid:u,datahash:n},{headers:J(e)});return o.data?.data??o.data},async create(e,r){const n=await le(e),u=await ie(e,{operation:"create",source:r.source,fields:r.values,datahash:n});return(await B.post(e.baseURL+e.dbopsCreate,{refid:u,fields:r.values,datahash:n},{headers:J(e)})).data},async update(e,r){const n=await le(e),u=await ie(e,{operation:"update",source:r.source,fields:r.values,datahash:n});return(await B.post(e.baseURL+e.dbopsUpdate,{refid:u,fields:r.values,datahash:n},{headers:J(e)})).data}};function Me({formJson:e={title:"",fields:{},source:{}},methods:r={},userid:n=null,onCancel:u=()=>{},components:o={},callback:x=()=>{},initialvalues:j={}}){let l=we(e);const m=e.endPoints,y=e?.source?.refid,d=Se(e?.fields??{}),[v,N]=S.useState(j),C=S.useMemo(()=>$e(e.fields),[e.fields]);S.useEffect(()=>{let g=!0;return(async()=>{const b=e?.source??{};if(!b?.type){g&&N({});return}if(b.type==="method"){const F=b.method,T=F?r[F]:void 0;if(T)try{const a=await Promise.resolve(T());g&&N(a??{})}catch(a){console.error("Method execution failed:",a),g&&N({})}else g&&N({})}if(b.type==="api"&&m?.operation!=="create")try{const F=await B({method:b.method||"GET",url:b.url??"",data:b.body??{},params:b.params??{},headers:b.headers??{}});g&&N(F.data??{})}catch(F){console.error("API fetch failed:",F),g&&N({})}if(b.type==="sql"&&b.refid&&b.refid!="0"&&m?.operation!=="create"){if(!m){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const F=await Ie.fetch(m,{source:{...b,table:b.table,columns:b.columns,where:W(b.where,{refid:y})},fields:Ee(e.fields)});g&&N(F)}catch(F){console.error("API fetch failed:",F)}}})(),()=>{g=!1}},[n,e?.source?.type||"",e?.source?.method||"",e?.source?.url||"",JSON.stringify(e?.source?.params??{}),JSON.stringify(e?.source?.body??{}),JSON.stringify(e?.source?.headers??{})]);const P=async g=>{const E=e?.source??{};let b=null;if(C.length>0)try{b=await Te()}catch(T){console.log("catch fetchGeolocation",T),b=null}const F={...g,...Object.fromEntries(C.map(T=>[T,b]))};if(E.type==="method"){const T=E.method,a=T?r[T]:void 0;if(a)try{const k=await Promise.resolve(a(F));x?.(k)}catch(k){x?.(k),console.error("Method execution failed:",k)}}if(E.type==="api")try{const T=await B({method:E.method||"POST",url:E.url,data:F??{},params:E.params??{},headers:E.headers??{}});x?.(T)}catch(T){x?.(T),console.error("API fetch failed:",T)}if(E.type==="sql"){const T=e.endPoints;if(!T){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const a=await B({method:"GET",url:T.baseURL+T.dbopsGetHash,headers:{Authorization:`Bearer ${T?.accessToken}`}});let k={...E};E.where&&(k={...E,where:W(E.where,{refid:y})});const V=await B({method:"POST",url:T.baseURL+T.dbopsGetRefId,data:{operation:T.operation,source:k,fields:e.fields,forcefill:e.forcefill,datahash:a.data.refhash},headers:{Authorization:`Bearer ${T?.accessToken}`}}),f=await B({method:"POST",url:T.baseURL+T[T.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:V.data.refid,fields:F,datahash:a.data.refhash},headers:{Authorization:`Bearer ${T?.accessToken}`}});x?.(f)}catch(a){x?.(a),console.error("API fetch failed:",a)}}},p={accordion:t.jsx(Pe,{title:e?.title??"",groupedFields:d,data:v,onSubmit:P,onCancel:u,methods:r,components:o,sqlOpsUrls:m,refid:y}),cards:t.jsx(ke,{title:e?.title??"",groupedFields:d,data:v,onSubmit:P,onCancel:u,methods:r,components:o,sqlOpsUrls:m,refid:y}),tab:t.jsx(Fe,{title:e?.title??"",groupedFields:d,data:v,onSubmit:P,onCancel:u,methods:r,components:o,widget:e?.widget,sqlOpsUrls:m,refid:y}),simple:t.jsx(_e,{title:e?.title??"",fields:e.fields,data:v,onSubmit:P,onCancel:u,methods:r,components:o,sqlOpsUrls:m,refid:y})};return t.jsx("div",{className:"relative",children:p[l]??p.simple})}Y.LogiksForm=Me,Object.defineProperty(Y,Symbol.toStringTag,{value:"Module"})});
