(function(K,O){typeof exports=="object"&&typeof module<"u"?O(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],O):(K=typeof globalThis<"u"?globalThis:K||self,O(K.LogiksForm={},K.React,K.axios,K.Yup,K.formik))})(this,function(K,O,z,fe,te){"use strict";function ye(e){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const o in e)if(o!=="default"){const l=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>e[o]})}}return r.default=e,Object.freeze(r)}const L=ye(fe);var re={exports:{}},H={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function ve(){if(me)return H;me=1;var e=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(l,n,b){var v=null;if(b!==void 0&&(v=""+b),n.key!==void 0&&(v=""+n.key),"key"in n){b={};for(var c in n)c!=="key"&&(b[c]=n[c])}else b=n;return n=b.ref,{$$typeof:e,type:l,key:v,ref:n!==void 0?n:null,props:b}}return H.Fragment=r,H.jsx=o,H.jsxs=o,H}var Q={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pe;function je(){return pe||(pe=1,process.env.NODE_ENV!=="production"&&function(){function e(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===q?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case A:return"Profiler";case y:return"StrictMode";case s:return"Suspense";case k:return"SuspenseList";case R:return"Activity"}if(typeof a=="object")switch(typeof a.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),a.$$typeof){case P:return"Portal";case _:return(a.displayName||"Context")+".Provider";case f:return(a._context.displayName||"Context")+".Consumer";case $:var i=a.render;return a=a.displayName,a||(a=i.displayName||i.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case V:return i=a.displayName||null,i!==null?i:e(a.type)||"Memo";case j:i=a._payload,a=a._init;try{return e(a(i))}catch{}}return null}function r(a){return""+a}function o(a){try{r(a);var i=!1}catch{i=!0}if(i){i=console;var h=i.error,T=typeof Symbol=="function"&&Symbol.toStringTag&&a[Symbol.toStringTag]||a.constructor.name||"Object";return h.call(i,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",T),r(a)}}function l(a){if(a===x)return"<>";if(typeof a=="object"&&a!==null&&a.$$typeof===j)return"<...>";try{var i=e(a);return i?"<"+i+">":"<...>"}catch{return"<...>"}}function n(){var a=G.A;return a===null?null:a.getOwner()}function b(){return Error("react-stack-top-frame")}function v(a){if(I.call(a,"key")){var i=Object.getOwnPropertyDescriptor(a,"key").get;if(i&&i.isReactWarning)return!1}return a.key!==void 0}function c(a,i){function h(){S||(S=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",i))}h.isReactWarning=!0,Object.defineProperty(a,"key",{get:h,configurable:!0})}function p(){var a=e(this.type);return u[a]||(u[a]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),a=this.props.ref,a!==void 0?a:null}function N(a,i,h,T,B,M,ue,de){return h=M.ref,a={$$typeof:C,type:a,key:i,props:M,_owner:B},(h!==void 0?h:null)!==null?Object.defineProperty(a,"ref",{enumerable:!1,get:p}):Object.defineProperty(a,"ref",{enumerable:!1,value:null}),a._store={},Object.defineProperty(a._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(a,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(a,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.defineProperty(a,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:de}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a}function m(a,i,h,T,B,M,ue,de){var D=i.children;if(D!==void 0)if(T)if(U(D)){for(T=0;T<D.length;T++)g(D[T]);Object.freeze&&Object.freeze(D)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else g(D);if(I.call(i,"key")){D=e(a);var W=Object.keys(i).filter(function(ze){return ze!=="key"});T=0<W.length?"{key: someKey, "+W.join(": ..., ")+": ...}":"{key: someKey}",F[D+T]||(W=0<W.length?"{"+W.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,T,D,W,D),F[D+T]=!0)}if(D=null,h!==void 0&&(o(h),D=""+h),v(i)&&(o(i.key),D=""+i.key),"key"in i){h={};for(var he in i)he!=="key"&&(h[he]=i[he])}else h=i;return D&&c(h,typeof a=="function"?a.displayName||a.name||"Unknown":a),N(a,D,M,B,n(),h,ue,de)}function g(a){typeof a=="object"&&a!==null&&a.$$typeof===C&&a._store&&(a._store.validated=1)}var w=O,C=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),_=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),s=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),q=Symbol.for("react.client.reference"),G=w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,I=Object.prototype.hasOwnProperty,U=Array.isArray,ee=console.createTask?console.createTask:function(){return null};w={"react-stack-bottom-frame":function(a){return a()}};var S,u={},d=w["react-stack-bottom-frame"].bind(w,b)(),E=ee(l(b)),F={};Q.Fragment=x,Q.jsx=function(a,i,h,T,B){var M=1e4>G.recentlyCreatedOwnerStacks++;return m(a,i,h,!1,T,B,M?Error("react-stack-top-frame"):d,M?ee(l(a)):E)},Q.jsxs=function(a,i,h,T,B){var M=1e4>G.recentlyCreatedOwnerStacks++;return m(a,i,h,!0,T,B,M?Error("react-stack-top-frame"):d,M?ee(l(a)):E)}}()),Q}var be;function Ne(){return be||(be=1,process.env.NODE_ENV==="production"?re.exports=ve():re.exports=je()),re.exports}var t=Ne();function we(e){return e.template==="accordion"?"accordion":e.template==="simple"?"simple":e.template==="cards"?"cards":Object.values(e.fields||{}).some(l=>l.group)?"tab":"simple"}function Se(e,r="Info"){const o={};let l=!1;if(Object.values(e).forEach(b=>{b.group&&(l=!0)}),!l)return{};const n=[];return Object.entries(e).forEach(([b,v])=>{const c={...v,name:b};if(v.group){const p=v.group;o[p]||(o[p]=[]),o[p].push(c)}else n.push(c)}),n.length>0?{[r]:n,...o}:o}function Ee(e){const r={};return Object.keys(e).forEach(o=>{r[o]={label:o,required:e[o].required??!1}}),r}const X=(e,r,o,l)=>{e.forEach(n=>{const b=n?.name;if(!b)return;let v=l?.[b];v==null&&(v=n.default),n.multiple===!0||n.type==="checkbox"||n.type==="tags"?r[b]=Array.isArray(v)?v:typeof v=="string"?v.split(",").map(p=>p.trim()).filter(Boolean):[]:n.type==="json"?r[b]=typeof v=="object"&&v!==null?JSON.stringify(v,null,2):v??"":n.type==="date"?r[b]=typeof v=="string"?v.slice(0,10):"":n.type==="time"?typeof v=="string"?v.includes("T")?r[b]=v.slice(11,16):r[b]=v.slice(0,5):r[b]="":b==="blocked"||b==="blacklist"?r[b]=String(v??"false"):r[b]=v??"";let c;n.type==="file"?c=n.multiple?L.array().of(L.mixed()):L.mixed():n.multiple===!0||n.type==="checkbox"||n.type==="tags"?c=L.array().of(L.string()):n.type==="email"?c=L.string().email("Invalid email"):n.type==="number"?c=L.number().typeError("Must be a number"):n.type==="json"?c=L.string().test("json","Invalid JSON",p=>{if(!p)return!0;try{return JSON.parse(p),!0}catch{return!1}}):c=L.string(),n.required&&(c=c.required(n.error_message||`${n.label||b} is required`)),n?.validate?.regex&&typeof n.validate.regex=="string"&&(c=c.matches(new RegExp(n?.validate?.regex),n?.error_message||"Invalid input format")),n?.validate&&Object.entries(n.validate).forEach(([p,N])=>{switch(p){case"email":N&&(c=c.email("Invalid email format"));break;case"mobile":c=c.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":c=c.matches(new RegExp(N),`Must match pattern: ${N}`);break;case"date":c=L.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((m,g)=>{if(typeof g=="string"){const w=g.replace(/-/g,"/"),[C,P,x]=w.split("/");if(C&&P&&x)return new Date(`${x}-${P}-${C}`)}return m});break;case"time":c=c.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":c=c.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":c=L.number().typeError("Must be numeric");break;case"float":case"decimal":c=L.number().typeError("Must be a decimal").transform((m,g)=>{if(g==null||g==="")return;const w=Number(g);if(isNaN(w))return m;if(typeof m=="number"&&!isNaN(m)){const C=Number(m);return Number.isInteger(C)?Number(w.toFixed(C)):w}return w});break;case"alphanumeric":c=c.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":c=c.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":c=c.transform(m=>m&&m.toUpperCase());break;case"lower":c=c.transform(m=>m&&m.toLowerCase());break;case"length-min":{const m=Number(N);isNaN(m)||(c=c.min(m,`Minimum length is ${m}`));break}case"length-max":{const m=Number(N);isNaN(m)||(c=c.max(m,`Maximum length is ${m}`));break}}}),o[b]=c})},ae={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function se(e){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(e)?e:6}const ne=e=>e===!0||e==="true",Y=(e,r)=>typeof e=="string"?e.replace(/#(\w+)#/g,(o,l)=>r[l]!==void 0?String(r[l]):o):Array.isArray(e)?e.map(o=>Y(o,r)):e&&typeof e=="object"?Object.fromEntries(Object.entries(e).map(([o,l])=>[Y(o,r),Y(l,r)])):e,Z=(e,r,o,l)=>{const n=Array.isArray(o?.data?.data)?o.data.data:Array.isArray(o?.data)?o.data:o;if(!Array.isArray(n)||n.length===0)return{};const b=l??(n[0]&&typeof n[0]=="object"&&"category"in n[0]?"category":void 0);if(!b){const c={};return n.forEach(p=>{p[e]!=null&&p[r]!=null&&(c[p[e]]=p[r])}),c}const v={};return n.forEach(c=>{const p=c[b]??"Others",N=c[e],m=c[r];N==null||m==null||(v[p]||(v[p]={}),v[p][N]=m)}),v},xe=(e,r)=>{if(!e||r==null)return;if(typeof Object.values(e)[0]=="string")return e[r];for(const l of Object.values(e))if(r in l)return l[r]},Oe=e=>e?typeof Object.values(e)[0]=="string"?Object.entries(e):Object.values(e).flatMap(o=>Object.entries(o)):[],ge=e=>{if(!e||typeof e!="object")return!1;const r=Object.values(e)[0];return typeof r=="object"&&r!==null};async function Te(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const e=await new Promise((l,n)=>{navigator.geolocation.getCurrentPosition(l,n,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:r,longitude:o}=e.coords;return`${r},${o}`}catch(e){if(!(e instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(e.code){case e.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case e.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case e.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const $e=e=>Object.entries(e??{}).filter(([,r])=>r.type==="geolocation").map(([r])=>r);function Ae(e){return Object.entries(e).map(([r,o])=>({...o,name:r}))}async function oe(e,r,o={}){try{const l=await z({method:"POST",url:e.baseURL+e.registerQuery,data:{query:r},headers:{Authorization:`Bearer ${e?.accessToken}`}});return await z({method:"POST",url:e.baseURL+e.runQuery,data:{queryid:l.data.queryid,filter:o},headers:{Authorization:`Bearer ${e?.accessToken}`}})}catch(l){throw l}}function Ce(e){return typeof e=="object"&&e!==null&&typeof e.target=="string"&&typeof e.src=="object"&&e.src!==null&&typeof e.src.table=="string"}function Fe(e){return e.split(",").map(r=>r.trim()).map(r=>{const o=r.match(/^(.+?)\s+as\s+.+$/i);return o?o[1]?.trim():r}).filter(r=>!!r)}function le({field:e,formik:r,methods:o={},sqlOpsUrls:l,refid:n,optionsOverride:b,setFieldOptions:v}){const[c,p]=O.useState(!1),[N,m]=O.useState(b??e.options??{}),[g,w]=O.useState(""),[C,P]=O.useState(0),x=O.useRef(null),y=O.useRef(null),[A,f]=O.useState(!1),_=O.useRef(g);O.useEffect(()=>{_.current=g},[g]);const $=S=>{S.currentTarget.open||w("")};O.useEffect(()=>{b&&m(b)},[b]),O.useEffect(()=>{const S=u=>{y.current&&!y.current.contains(u.target)&&(y.current.open=!1,w(""))};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}},[]);const s=e.name;O.useEffect(()=>{let S=!0;return(async()=>{if(e?.options){m(e.options);return}const d=e?.source??{};if(e.type==="dataMethod"){const E=e.method,F=E?o[E]:void 0;if(F)try{const a=await Promise.resolve(F()),i=e.valueKey||"value",h=e.labelKey||"title",T=Z(i,h,a,e.groupKey);S&&m(T)}catch(a){console.error("Method execution failed:",a),S&&m({})}else S&&m({})}if(d.type==="api"&&d.url)try{const E=await z({method:d.method||"GET",url:d.url,data:d.body??{},params:d.params??{},headers:d.headers??{}}),F=e.valueKey||"value",a=e.labelKey||"title",i=Z(F,a,E,e.groupKey);S&&m(i)}catch(E){console.error("API execution failed:",E),S&&m({})}if(e.table||e.type==="dataSelector"){if(!l){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let E;if(e.type==="dataSelector")E={table:"do_lists",cols:"title,value",where:{groupid:e.groupid??""}};else{if(!e.table||!e.columns){console.error("Invalid SQL field config",e);return}E={...e,table:e.table,cols:e.columns}}e.where&&e.type!=="dataSelector"&&(E.where=n?Y(e.where,{refid:n}):e.where);const F=await oe(l,E),a=e.valueKey||"value",i=e.labelKey||"title",h=Z(a,i,F,e.groupKey);S&&m(h)}catch(E){console.error("API fetch failed:",E)}}})(),()=>{S=!1}},[e.options,e.source,e.table,e.columns,e.where,n]);const k=`
    w-full px-4 py-2 rounded-lg border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0
  `,V=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,j=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,R=S=>S.icon?t.jsx("i",{className:S.icon}):null,q=O.useMemo(()=>Oe(N),[N]),G=q.length,I=O.useMemo(()=>e.search||!g?q:q.filter(([,S])=>S.toLowerCase().includes(g.toLowerCase())),[e.search,g,q]),U=(S,u)=>{if(y.current?.open===!0||A===!0)if(S.key==="ArrowDown")S.preventDefault(),P(d=>d+1<I.length?d+1:0);else if(S.key==="ArrowUp")S.preventDefault(),P(d=>d-1>=0?d-1:I.length-1);else if(S.key==="Enter"){S.preventDefault();const[d]=I[C]||[];d&&r.setFieldValue(e.name,u?d:[...r.values[e.name],d]),y.current&&(y.current.open=!1)}else S.key==="Escape"&&(y.current.open=!1,w(""),f(!1))};O.useEffect(()=>{x.current?.querySelector(`[data-index="${C}"]`)?.scrollIntoView({block:"nearest"})},[C]),O.useEffect(()=>{C>=I.length&&P(0)},[I,C]),O.useEffect(()=>{const S=e.autocomplete,u=e.ajaxchain;if(!S&&!u)return;const d=r.values[e.name];if(!d)return;const E=Array.isArray(u)?u:u?[u]:[];(async()=>{try{if(Ce(S)){const a=S.src;if(!a||!l)return;const i=Y(a.where??{},{refid:d}),h={...a,table:a.table,cols:a.columns,where:i},{data:T}=await oe(l,h),B=Array.isArray(T?.data)?T.data[0]:T?.data;B&&S.target.split(",").map(M=>M.trim()).forEach(M=>{B[M]!==void 0&&r.setFieldValue(M,B[M])})}for(const a of E){const i=a.src;if(!a||typeof a!="object"||!i||typeof i!="object"||!l)continue;const h=Y(i?.where??{},{refid:d}),T={...i,table:i.table,cols:i.columns,where:h},{data:B}=await oe(l,T),M=Z(e.valueKey||"value",e.labelKey||"title",B,e.groupKey);v?.(a.target,M)}}catch(a){console.error("Autocomplete / AjaxChain fetch failed",a)}})()},[r.values[e.name]]),O.useEffect(()=>{if(!e.search||!g.trim()||!e.table||!l)return;const S=Fe(e.columns??""),u=new AbortController,d=setTimeout(async()=>{try{const E=n?Y(e.where??{},{refid:n}):e.where,F={...e,table:e.table,cols:e.columns||e.cols,where:E};let a={};Array.isArray(S)&&S.forEach(T=>{a[T]=[g,"LIKE"]});const{data:i}=await oe(l,F,a),h=Z(e.valueKey||"value",e.labelKey||"title",i,e.groupKey);m(h)}catch(E){if(z.isCancel(E))return;console.error("Search fetch failed",E)}},500);return()=>{clearTimeout(d),u.abort()}},[g,n]);const ee=async S=>{if(S.length===0){console.error("No file");return}const u=l?.baseURL+l?.uploadURL;if(!u){console.error("No Upload URL ");return}const d=e.multiple===!0;try{const E=await Promise.all(Array.from(S).map(async F=>{const a=new FormData;return a.append("file",F),(await z({method:"POST",url:u,data:a,headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${l?.accessToken}`}})).data}));r.setFieldValue(s,d?E.map(F=>F.path):E[0]?.path)}catch(E){console.error("File upload failed",E),r.setFieldError(s,"File upload failed")}};switch(e.type){case"autocomplete":{const u=r.values[s]??"",d=g!==""?g:xe(N,u)??String(u??""),E=a=>{const i=a.target.value;w(i),P(0),i.trim()?f(!0):(f(!1),r.setFieldValue(s,""))},F=a=>{r.setFieldValue(s,a),w(""),f(!1)};return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("input",{className:`${k} ${V}`,value:d,placeholder:e.placeholder||"Type to search...",onChange:E,onFocus:()=>{const a=String(r.values[s]??"");w(a)},onBlur:()=>{setTimeout(()=>f(!1),150)},onKeyDown:a=>{if(a.key==="Enter"){if(a.preventDefault(),I[C]){const[i]=I[C];r.setFieldValue(s,i)}else g.trim()&&r.setFieldValue(s,g.trim());f(!1);return}U(a,!0)},disabled:e.disabled}),A&&t.jsx("div",{ref:x,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:I.length>0?I.map(([a,i],h)=>t.jsx("div",{"data-index":h,className:`px-3 py-2 cursor-pointer text-sm
                  ${C===h?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>F(a),children:i},a)):t.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:`No matches press enter to add "${d}" `})}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(e.multiple===!0){const u=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:y,onKeyDown:d=>U(d,!1),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:u?.length>0?u.join(", "):`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:x,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:g,onChange:d=>{w(d.target.value),P(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),I.length>0?I.map(([d,E],F)=>t.jsxs("label",{htmlFor:`${s}-${d}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${u?.includes(d)?"bg-indigo-50 text-indigo-600 font-medium":C===F?"bg-gray-100":"hover:bg-gray-50"}`,children:[t.jsx("input",{id:`${s}-${d}`,type:"checkbox",checked:u?.includes(d),onChange:a=>{const i=a.target.checked?[...u,d]:u?.filter(h=>h!==d);r.setFieldValue(s,i)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),E]},d)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("details",{className:"relative w-full",onToggle:$,ref:y,onKeyDown:u=>U(u,!0),children:[t.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-gray-700",children:r.values[s]?xe(N,r.values[s])??"Select option":`Select ${e.label}`}),t.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),t.jsxs("div",{ref:x,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.search&&t.jsx("div",{className:"sticky top-0 bg-white p-1",children:t.jsx("input",{type:"text",value:g,onChange:u=>{w(u.target.value),P(0)},onKeyDown:u=>U(u,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),I.length>0&&t.jsx("div",{onClick:u=>{u.preventDefault(),u.stopPropagation(),r.setFieldValue(s,""),y.current?.removeAttribute("open"),w("")},className:"px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm hover:bg-gray-50",children:"Clear selection"}),I.length>0?I.map(([u,d],E)=>t.jsx("div",{"data-index":E,onClick:F=>{F.preventDefault(),F.stopPropagation(),r.setFieldValue(s,u),y.current?.removeAttribute("open"),w(""),P(0)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[s]===u?"bg-indigo-50 text-indigo-600 font-medium":C===E?"bg-gray-100":"hover:bg-gray-50"}`,children:d},u)):t.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}case"textarea":return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{className:`${k} ${V} min-h-[120px] resize-none`,onFocus:()=>p(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${c?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})});case"select":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("select",{className:`${k} ${V} appearance-none cursor-pointer pr-12`,onFocus:()=>p(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:r.handleChange,disabled:e.disabled,children:[t.jsx("option",{value:"",disabled:!0,children:e.placeholder||"Please select an option"}),!ge(N)&&Object.entries(N).map(([u,d])=>t.jsx("option",{value:u,className:"py-2",children:d},u)),ge(N)&&Object.entries(N).map(([u,d])=>t.jsx("optgroup",{label:u,children:Object.entries(d).map(([E,F])=>t.jsx("option",{value:E,children:F},E))},u))]}),t.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"radioList":case"radio":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:`flex ${G>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(N||{}).map(([u,d])=>t.jsxs("label",{htmlFor:`${s}-${u}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{id:`${s}-${u}`,type:"radio",name:s,checked:r.values[s]===u,value:u,onChange:r.handleChange,onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),d]},u))}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]});case"checkbox":{const u=r.values[s];return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(N||{}).map(([d,E])=>t.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:u.includes(d),onChange:F=>{const a=F.target.checked?[...u,d]:u.filter(i=>i!==d);r.setFieldValue(s,a)},onBlur:r.handleBlur,disabled:e.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),E]},d))}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[s])})]})}case"tags":{const u=r.values[s],d=g.trim(),E=Array.isArray(N)?N:Object.entries(N||{}).map(([h,T])=>({value:h,label:T})),F=h=>{h&&!u.includes(h)&&(r.setFieldValue(s,[...u,h]),w(""))},a=h=>{r.setFieldValue(s,u.filter(T=>T!==h))},i=h=>E.find(T=>T.value===h)?.label??h;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:`${k} flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center`,onClick:()=>!e.disabled&&document.getElementById(`${s}-input`)?.focus(),children:[u.map(h=>t.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[t.jsx("span",{className:"text-indigo-700",children:i(h)}),t.jsx("button",{type:"button",onClick:T=>{T.stopPropagation(),e.disabled||a(h)},onMouseDown:T=>T.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"Ã—"})]},h)),t.jsx("input",{id:`${s}-input`,type:"text",value:g,onChange:h=>w(h.target.value),onKeyDown:h=>{(h.key==="Enter"||h.key===",")&&(h.preventDefault(),F(d))},placeholder:u.length===0?e.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:e.disabled})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}case"attachment":case"photo":case"avatar":case"file":const S=e.multiple===!0;return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:"file",className:`${k} ${V} ${e.icon?"pl-9":""} `,onFocus:()=>p(!0),name:s,multiple:S,onChange:u=>{const d=u.currentTarget.files;d&&ee(d)},onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${c?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.values[s]?.split("/").pop()&&t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:"text-sm ",children:String(r.values[s]?.split("/").pop())})}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"json":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{id:`${s}-json`,name:s,value:r.values[s],onChange:u=>r.setFieldValue(s,u.target.value),onBlur:r.handleBlur,placeholder:e.placeholder||"Enter valid JSON",disabled:e.disabled,className:`${k} ${V} min-h-[200px] font-mono text-sm resize-y`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${c?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});case"date":return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:"date",name:s,value:r.values[s],onChange:r.handleChange,onBlur:r.handleBlur,placeholder:e.placeholder,disabled:e.disabled,className:`${k} ${V} ${e.icon?"pl-9":""}`}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${c?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]});default:return t.jsxs("div",{className:"relative",children:[t.jsxs("label",{className:j,children:[e.label,e.required&&t.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[e.icon&&t.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:R(e)}),t.jsx("input",{type:e.type||"text",className:`${k} ${V} ${e.icon?"pl-9":""} `,onFocus:()=>p(!0),name:s,value:r.values[s],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:e.placeholder,disabled:e.disabled}),t.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${c?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[s]&&r.errors[s]&&t.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[s])})]})}}function Pe({title:e,children:r,isFirst:o}){const[l,n]=O.useState(o);return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[t.jsxs("button",{onClick:()=>n(!l),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${l?"bg-action":"bg-gray-300"}`}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]}),t.jsxs("div",{className:`relative transition-all duration-300 ${l?"rotate-180":""}`,children:[t.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${l?"bg-action opacity-30":"bg-transparent opacity-0"}`}),t.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${l?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function _e({title:e,groupedFields:r,data:o,onSubmit:l=N=>{},onCancel:n=()=>{},methods:b={},components:v={},sqlOpsUrls:c={},refid:p}){const[N,m]=O.useState({}),g=(x,y)=>{m(A=>({...A,[x]:y}))},{initialValues:w,validationSchema:C}=O.useMemo(()=>{const x={},y={};return Object.values(r).flat().forEach(A=>{X([A],x,y,o)}),{initialValues:x,validationSchema:y}},[r,o]),P=te.useFormik({initialValues:w,enableReinitialize:!0,validationSchema:L.object().shape(C),onSubmit:x=>{l(x)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:P.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([x,y],A)=>t.jsx(Pe,{title:x,isFirst:A===0,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:y.map((f,_)=>ne(f.hidden)||f.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${ae[se(Number(f.width))]||"lg:col-span-4"}`,children:t.jsx(le,{refid:p,sqlOpsUrls:c,components:v,field:f,formik:P,methods:b,setFieldOptions:g,...N[f.name]?{optionsOverride:N[f.name]}:{}},f.name)},f?.name??`field-${_}`))})},x))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function Re({title:e,groupedFields:r,data:o,onSubmit:l=m=>{},onCancel:n=()=>{},methods:b={},components:v={},sqlOpsUrls:c={},widget:p,refid:N}){const m=Object.keys(r),[g,w]=O.useState(0),[C,P]=O.useState({}),x=(j,R)=>{P(q=>({...q,[j]:R}))},{initialValues:y,validationSchema:A,stepperSchemas:f}=O.useMemo(()=>{const j={},R={},q={};return p?Object.entries(r).forEach(([G,I])=>{const U={};X(I,j,U,o),q[G]=U}):Object.entries(r).forEach(([G,I])=>{X(I,j,R,o)}),{initialValues:j,validationSchema:R,stepperSchemas:q}},[r,o,p]),_=m[g]??null,$=p&&_?f[_]??{}:A,s=te.useFormik({initialValues:y,enableReinitialize:!0,validationSchema:L.object().shape($),onSubmit:j=>{p?(g<m.length-1&&w(R=>R+1),g===m.length-1&&l(j)):l(j)}}),k=async j=>{if(j.preventDefault(),!p){const R=await s.validateForm();if(Object.keys(R).length>0){alert("Please fill all required fields before submitting."),s.setTouched(Object.keys(R).reduce((q,G)=>({...q,[G]:!0}),{}));return}}s.handleSubmit(j)},V=()=>{w(j=>j>0?j-1:j)};return t.jsxs("div",{className:" max-w-full  m-4",children:[t.jsx("div",{className:"relative",children:t.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:t.jsx("nav",{className:"relative flex",children:m.map((j,R)=>t.jsx("button",{type:"button",onClick:()=>w(R),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${g===R?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:t.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:j})},j))})})}),t.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[t.jsxs("form",{onSubmit:k,className:"w-full mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:_&&r[_]?.map((j,R)=>ne(j.hidden)||j.type==="geolocation"?null:t.jsx("div",{className:`col-span-12  ${ae[se(Number(j.width))]||"lg:col-span-4"}`,children:t.jsx(le,{refid:N,sqlOpsUrls:c,field:j,formik:s,methods:b,components:v,setFieldOptions:x,...C[j.name]?{optionsOverride:C[j.name]}:{}},j.name)},j?.name??`field-${R}`))}),t.jsxs("div",{className:`mt-8 flex ${g>0?"justify-between":"justify-end"} space-x-3`,children:[g>0&&t.jsx("button",{onClick:V,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{onClick:n,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:p?"Next":"Save"})]})]})]}),t.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsxs("span",{children:["Tab ",g+1," of ",m.length]}),t.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),t.jsx("div",{className:"flex gap-1",children:m.map((j,R)=>t.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${R===g?"bg-action w-6":"bg-gray-300"}`},R))})]})})]},m[g])]})}function Ie({title:e,fields:r,data:o,onSubmit:l=p=>{},onCancel:n=()=>{},methods:b={},sqlOpsUrls:v={},refid:c}){const p=Ae(r),[N,m]=O.useState({}),g=(x,y)=>{m(A=>({...A,[x]:y}))},{initialValues:w,validationSchema:C}=O.useMemo(()=>{const x={},y={};return p.forEach(A=>{X([A],x,y,o)}),{initialValues:x,validationSchema:y}},[p,o]),P=te.useFormik({initialValues:w,enableReinitialize:!0,validationSchema:L.object().shape(C),onSubmit:x=>{l(x)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:P.handleSubmit,className:"p-4  mx-auto",children:[t.jsx("div",{className:"grid grid-cols-12 gap-4",children:p.map((x,y)=>ne(x.hidden)||x.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${ae[se(Number(x.width))]||"lg:col-span-4"}`,children:t.jsx(le,{refid:c,sqlOpsUrls:v,field:x,formik:P,methods:b,setFieldOptions:g,...N[x.name]?{optionsOverride:N[x.name]}:{}})},x?.name??`field-${y}`))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function ke({title:e,children:r}){return t.jsx("div",{className:"group relative mt-1",children:t.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[t.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:t.jsxs("div",{className:"flex items-center space-x-3",children:[t.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),t.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:e})]})}),t.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:t.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:t.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Me({title:e,groupedFields:r,data:o,onSubmit:l=N=>{},onCancel:n=()=>{},methods:b={},components:v={},sqlOpsUrls:c={},refid:p}){const[N,m]=O.useState({}),g=(x,y)=>{m(A=>({...A,[x]:y}))},{initialValues:w,validationSchema:C}=O.useMemo(()=>{const x={},y={};return Object.values(r).flat().forEach(A=>{X([A],x,y,o)}),{initialValues:x,validationSchema:y}},[r,o]),P=te.useFormik({initialValues:w,enableReinitialize:!0,validationSchema:L.object().shape(C),onSubmit:x=>{l(x)}});return t.jsx("div",{className:"relative z-10 max-w-full  m-4",children:t.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:t.jsxs("form",{onSubmit:P.handleSubmit,className:"p-4 mx-auto",children:[t.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([x,y],A)=>t.jsx(ke,{title:x,children:t.jsx("div",{className:"grid grid-cols-12 gap-4",children:y.map((f,_)=>ne(f.hidden)||f.type==="geolocation"?null:t.jsx("div",{className:`col-span-12 md:col-span-6 ${ae[se(Number(f.width))]||"lg:col-span-4"}`,children:t.jsx(le,{refid:p,sqlOpsUrls:c,components:v,field:f,formik:P,methods:b,setFieldOptions:g,...N[f.name]?{optionsOverride:N[f.name]}:{}},f.name)},f?.name??`field-${_}`))})},x))}),t.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[t.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),t.jsxs("div",{className:"space-x-3",children:[t.jsx("button",{type:"button",onClick:n,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),t.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const J=e=>({Authorization:`Bearer ${e.accessToken}`}),ie=async e=>(await z.get(e.baseURL+e.dbopsGetHash,{headers:J(e)})).data.refhash,ce=async(e,r)=>(await z.post(e.baseURL+e.dbopsGetRefId,r,{headers:J(e)})).data.refid,Le={async fetch(e,r){const o=await ie(e),l=await ce(e,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:o}),n=await z.post(e.baseURL+e.dbopsFetch,{refid:l,datahash:o},{headers:J(e)});return n.data?.data??n.data},async create(e,r){const o=await ie(e),l=await ce(e,{operation:"create",source:r.source,fields:r.values,datahash:o});return(await z.post(e.baseURL+e.dbopsCreate,{refid:l,fields:r.values,datahash:o},{headers:J(e)})).data},async update(e,r){const o=await ie(e),l=await ce(e,{operation:"update",source:r.source,fields:r.values,datahash:o});return(await z.post(e.baseURL+e.dbopsUpdate,{refid:l,fields:r.values,datahash:o},{headers:J(e)})).data}};function De({formJson:e={title:"",fields:{},source:{}},methods:r={},userid:o=null,onCancel:l=()=>{},components:n={},callback:b=()=>{},initialvalues:v={}}){let c=we(e);const p=e.endPoints,N=e?.source?.refid,m=Se(e?.fields??{}),[g,w]=O.useState(v),C=O.useMemo(()=>$e(e.fields),[e.fields]);O.useEffect(()=>{let y=!0;return(async()=>{const f=e?.source??{};if(!f?.type){y&&w({});return}if(f.type==="method"){const _=f.method,$=_?r[_]:void 0;if($)try{const s=await Promise.resolve($());y&&w(s??{})}catch(s){console.error("Method execution failed:",s),y&&w({})}else y&&w({})}if(f.type==="api"&&p?.operation!=="create")try{const _=await z({method:f.method||"GET",url:f.url??"",data:f.body??{},params:f.params??{},headers:f.headers??{}});y&&w(_.data??{})}catch(_){console.error("API fetch failed:",_),y&&w({})}if(f.type==="sql"&&f.refid&&f.refid!="0"&&p?.operation!=="create"){if(!p){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const _=await Le.fetch(p,{source:{...f,table:f.table,columns:f.columns,where:Y(f.where,{refid:N})},fields:Ee(e.fields)});y&&w(_)}catch(_){console.error("API fetch failed:",_)}}})(),()=>{y=!1}},[o,e?.source?.type||"",e?.source?.method||"",e?.source?.url||"",JSON.stringify(e?.source?.params??{}),JSON.stringify(e?.source?.body??{}),JSON.stringify(e?.source?.headers??{})]);const P=async y=>{const A=e?.source??{};let f=null;if(C.length>0)try{f=await Te()}catch($){console.log("catch fetchGeolocation",$),f=null}const _={...y,...Object.fromEntries(C.map($=>[$,f]))};if(A.type==="method"){const $=A.method,s=$?r[$]:void 0;if(s)try{const k=await Promise.resolve(s(_));b?.(k)}catch(k){b?.(k),console.error("Method execution failed:",k)}}if(A.type==="api"){if(!p){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const $=await z({method:A.method||"POST",url:p.baseURL+A.endpoint,data:_??{},headers:{Authorization:`Bearer ${p?.accessToken}`}});b?.($)}catch($){b?.($),console.error("API fetch failed:",$)}}if(A.type==="sql"){const $=e.endPoints;if(!$){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const s=await z({method:"GET",url:$.baseURL+$.dbopsGetHash,headers:{Authorization:`Bearer ${$?.accessToken}`}});let k={...A};A.where&&(k={...A,where:Y(A.where,{refid:N})});const V=await z({method:"POST",url:$.baseURL+$.dbopsGetRefId,data:{operation:$.operation,source:k,fields:e.fields,forcefill:e.forcefill,datahash:s.data.refhash},headers:{Authorization:`Bearer ${$?.accessToken}`}}),j=await z({method:"POST",url:$.baseURL+$[$.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:V.data.refid,fields:_,datahash:s.data.refhash},headers:{Authorization:`Bearer ${$?.accessToken}`}});b?.(j)}catch(s){b?.(s),console.error("API fetch failed:",s)}}},x={accordion:t.jsx(_e,{title:e?.title??"",groupedFields:m,data:g,onSubmit:P,onCancel:l,methods:r,components:n,sqlOpsUrls:p,refid:N}),cards:t.jsx(Me,{title:e?.title??"",groupedFields:m,data:g,onSubmit:P,onCancel:l,methods:r,components:n,sqlOpsUrls:p,refid:N}),tab:t.jsx(Re,{title:e?.title??"",groupedFields:m,data:g,onSubmit:P,onCancel:l,methods:r,components:n,widget:e?.widget,sqlOpsUrls:p,refid:N}),simple:t.jsx(Ie,{title:e?.title??"",fields:e.fields,data:g,onSubmit:P,onCancel:l,methods:r,components:n,sqlOpsUrls:p,refid:N})};return t.jsx("div",{className:"relative",children:x[c]??x.simple})}K.LogiksForm=De,Object.defineProperty(K,Symbol.toStringTag,{value:"Module"})});
