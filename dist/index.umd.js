(function(B,$){typeof exports=="object"&&typeof module<"u"?$(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],$):(B=typeof globalThis<"u"?globalThis:B||self,$(B.LogiksForm={},B.React,B.axios,B.Yup,B.formik))})(this,function(B,$,k,be,ee){"use strict";function ge(t){const r=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const o in t)if(o!=="default"){const l=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(r,o,l.get?l:{enumerable:!0,get:()=>t[o]})}}return r.default=t,Object.freeze(r)}const P=ge(be);var te={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function fe(){if(he)return Q;he=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(l,d,i){var O=null;if(i!==void 0&&(O=""+i),d.key!==void 0&&(O=""+d.key),"key"in d){i={};for(var A in d)A!=="key"&&(i[A]=d[A])}else i=d;return d=i.ref,{$$typeof:t,type:l,key:O,ref:d!==void 0?d:null,props:i}}return Q.Fragment=r,Q.jsx=o,Q.jsxs=o,Q}var X={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function ye(){return me||(me=1,process.env.NODE_ENV!=="production"&&function(){function t(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===z?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case u:return"Fragment";case c:return"Profiler";case h:return"StrictMode";case a:return"Suspense";case V:return"SuspenseList";case C:return"Activity"}if(typeof s=="object")switch(typeof s.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),s.$$typeof){case R:return"Portal";case E:return(s.displayName||"Context")+".Provider";case b:return(s._context.displayName||"Context")+".Consumer";case q:var m=s.render;return s=s.displayName,s||(s=m.displayName||m.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Y:return m=s.displayName||null,m!==null?m:t(s.type)||"Memo";case x:m=s._payload,s=s._init;try{return t(s(m))}catch{}}return null}function r(s){return""+s}function o(s){try{r(s);var m=!1}catch{m=!0}if(m){m=console;var T=m.error,_=typeof Symbol=="function"&&Symbol.toStringTag&&s[Symbol.toStringTag]||s.constructor.name||"Object";return T.call(m,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",_),r(s)}}function l(s){if(s===u)return"<>";if(typeof s=="object"&&s!==null&&s.$$typeof===x)return"<...>";try{var m=t(s);return m?"<"+m+">":"<...>"}catch{return"<...>"}}function d(){var s=D.A;return s===null?null:s.getOwner()}function i(){return Error("react-stack-top-frame")}function O(s){if(U.call(s,"key")){var m=Object.getOwnPropertyDescriptor(s,"key").get;if(m&&m.isReactWarning)return!1}return s.key!==void 0}function A(s,m){function T(){g||(g=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",m))}T.isReactWarning=!0,Object.defineProperty(s,"key",{get:T,configurable:!0})}function p(){var s=t(this.type);return w[s]||(w[s]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),s=this.props.ref,s!==void 0?s:null}function N(s,m,T,_,L,W,ce,de){return T=W.ref,s={$$typeof:j,type:s,key:m,props:W,_owner:L},(T!==void 0?T:null)!==null?Object.defineProperty(s,"ref",{enumerable:!1,get:p}):Object.defineProperty(s,"ref",{enumerable:!1,value:null}),s._store={},Object.defineProperty(s._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(s,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(s,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ce}),Object.defineProperty(s,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:de}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s}function f(s,m,T,_,L,W,ce,de){var M=m.children;if(M!==void 0)if(_)if(n(M)){for(_=0;_<M.length;_++)v(M[_]);Object.freeze&&Object.freeze(M)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else v(M);if(U.call(m,"key")){M=t(s);var H=Object.keys(m).filter(function(Re){return Re!=="key"});_=0<H.length?"{key: someKey, "+H.join(": ..., ")+": ...}":"{key: someKey}",K[M+_]||(H=0<H.length?"{"+H.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,_,M,H,M),K[M+_]=!0)}if(M=null,T!==void 0&&(o(T),M=""+T),O(m)&&(o(m.key),M=""+m.key),"key"in m){T={};for(var ue in m)ue!=="key"&&(T[ue]=m[ue])}else T=m;return M&&A(T,typeof s=="function"?s.displayName||s.name||"Unknown":s),N(s,M,W,L,d(),T,ce,de)}function v(s){typeof s=="object"&&s!==null&&s.$$typeof===j&&s._store&&(s._store.validated=1)}var y=$,j=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),E=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),a=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),z=Symbol.for("react.client.reference"),D=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=Object.prototype.hasOwnProperty,n=Array.isArray,S=console.createTask?console.createTask:function(){return null};y={"react-stack-bottom-frame":function(s){return s()}};var g,w={},I=y["react-stack-bottom-frame"].bind(y,i)(),F=S(l(i)),K={};X.Fragment=u,X.jsx=function(s,m,T,_,L){var W=1e4>D.recentlyCreatedOwnerStacks++;return f(s,m,T,!1,_,L,W?Error("react-stack-top-frame"):I,W?S(l(s)):F)},X.jsxs=function(s,m,T,_,L){var W=1e4>D.recentlyCreatedOwnerStacks++;return f(s,m,T,!0,_,L,W?Error("react-stack-top-frame"):I,W?S(l(s)):F)}}()),X}var pe;function ve(){return pe||(pe=1,process.env.NODE_ENV==="production"?te.exports=fe():te.exports=ye()),te.exports}var e=ve();function je(t){return t.template==="accordion"?"accordion":t.template==="simple"?"simple":t.template==="cards"?"cards":Object.values(t.fields||{}).some(l=>l.group)?"tab":"simple"}function Ne(t){const r={},o="General";return Object.entries(t).forEach(([l,d])=>{const i=d.group||o;r[i]||(r[i]=[]);let O={...d,name:l};r[i].push(O)}),r}function we(t){const r={};return Object.keys(t).forEach(o=>{r[o]={label:o,required:t[o].required??!1}}),r}const Z=(t,r,o)=>{t.forEach(l=>{const d=l?.name;if(!d)return;l?.default!==void 0&&l?.default!==null?r[d]=l.default:l?.type==="checkbox"?r[d]=l?.multiple===!0?[]:!1:l?.type==="tags"?r[d]=[]:d==="blocked"||d==="blacklist"?r[d]="false":r[d]=l?.default??"";let i;l?.type==="checkbox"?i=l?.multiple===!0?P.array().of(P.string()):P.boolean():l?.type==="tags"?i=P.array().of(P.string()):l?.type==="email"?i=P.string().email("Invalid email format"):l?.type==="number"?i=P.number().typeError("Must be a number"):l?.type==="date"?i=P.date().typeError("Invalid date format"):l?.type==="json"?i=P.string().test("is-json","Invalid JSON format",O=>{if(!O)return!0;try{return JSON.parse(O),!0}catch{return!1}}):i=P.string(),l?.required&&(i=i.required(l?.placeholder||l?.error_message||`${l?.label||d} is required`)),l?.validate?.regex&&typeof l.validate.regex=="string"&&(i=i.matches(new RegExp(l?.validate?.regex),l?.error_message||"Invalid input format")),l?.validate&&Object.entries(l.validate).forEach(([O,A])=>{switch(O){case"email":A&&(i=i.email("Invalid email format"));break;case"mobile":i=i.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":i=i.matches(new RegExp(A),`Must match pattern: ${A}`);break;case"date":i=P.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((p,N)=>{if(typeof N=="string"){const f=N.replace(/-/g,"/"),[v,y,j]=f.split("/");if(v&&y&&j)return new Date(`${j}-${y}-${v}`)}return p});break;case"time":i=i.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":i=i.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":i=P.number().typeError("Must be numeric");break;case"float":case"decimal":i=P.number().typeError("Must be a decimal").transform((p,N)=>{if(N==null||N==="")return;const f=Number(N);if(isNaN(f))return p;if(typeof p=="number"&&!isNaN(p)){const v=Number(p);return Number.isInteger(v)?Number(f.toFixed(v)):f}return f});break;case"alphanumeric":i=i.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":i=i.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":i=i.transform(p=>p&&p.toUpperCase());break;case"lower":i=i.transform(p=>p&&p.toLowerCase());break;case"length-min":{const p=Number(A);isNaN(p)||(i=i.min(p,`Minimum length is ${p}`));break}case"length-max":{const p=Number(A);isNaN(p)||(i=i.max(p,`Maximum length is ${p}`));break}}}),o[d]=i})},re={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function se(t){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(t)?t:6}const ae=t=>t===!0||t==="true",G=(t,r)=>(console.log("input",t,r),typeof t=="string"?t.replace(/#(\w+)#/g,(o,l)=>r[l]!==void 0?String(r[l]):o):Array.isArray(t)?t.map(o=>G(o,r)):t&&typeof t=="object"?Object.fromEntries(Object.entries(t).map(([o,l])=>[G(o,r),G(l,r)])):t),oe=(t,r,o)=>{const l=Array.isArray(o.data?.data)?o.data.data:Array.isArray(o.data)?o.data:[],d={};return l.forEach(i=>{d[i[t]]=i[r]}),d};function ne({field:t,formik:r,methods:o={},components:l,sqlOpsUrls:d,refid:i,optionsOverride:O,setFieldOptions:A}){const[p,N]=$.useState(!1),[f,v]=$.useState(O??t.options??{}),[y,j]=$.useState(""),[R,u]=$.useState(0),h=$.useRef(null),c=$.useRef(null),[b,E]=$.useState(!1),q=n=>{n.currentTarget.open||j("")};$.useEffect(()=>{O&&v(O)},[O]),$.useEffect(()=>{const n=S=>{c.current&&!c.current.contains(S.target)&&(c.current.open=!1,j(""))};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[]);const a=t.name;$.useEffect(()=>{let n=!0;return(async()=>{if(t?.options){v(t.options);return}const g=t?.source??{};if(g.type==="method"){const w=g.method,I=w?o[w]:void 0;if(I)try{const F=await Promise.resolve(I());n&&v(F??{})}catch(F){console.error("Method execution failed:",F),n&&v({})}else n&&v({})}if(g.type==="api"&&g.url)try{const w=await k({method:g.method||"GET",url:g.url,data:g.body??{},params:g.params??{},headers:g.headers??{}}),I=t.valueKey||"value",F=t.labelKey||"title",K=oe(I,F,w);n&&v(K)}catch(w){console.error("API execution failed:",w),n&&v({})}if(t.table||t.type==="dataSelector"){if(!d){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let w;if(t.type==="dataSelector")w={table:"do_lists",cols:"title,value",where:{groupid:t.groupid??""}};else{if(!t.table||!t.columns){console.error("Invalid SQL field config",t);return}w={table:t.table,cols:t.columns}}t.where&&t.type!=="dataSelector"&&(w.where=i?G(t.where,{refid:i}):t.where);const I=await k({method:"POST",url:d.baseURL+d.registerQuery,data:{query:w},headers:{Authorization:`Bearer ${d?.accessToken}`}}),F=await k({method:"POST",url:d.baseURL+d.runQuery,data:{queryid:I.data.queryid,filter:{}},headers:{Authorization:`Bearer ${d?.accessToken}`}}),K=t.valueKey||"value",s=t.labelKey||"title",m=oe(K,s,F);n&&v(m)}catch(w){console.error("API fetch failed:",w)}}})(),()=>{n=!1}},[t.options,t?.source?.type||"",t?.source?.method||"",t?.source?.url||"",JSON.stringify(t?.source?.params??{}),JSON.stringify(t?.source?.body??{}),JSON.stringify(t?.source?.headers??{})]);const V=`
    w-full px-4 py-2 rounded-lg border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0
  `,Y=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,x=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,C=n=>n.icon?e.jsx("i",{className:n.icon}):null,z=Object.keys(f||{}).length,D=$.useMemo(()=>Object.entries(f||{}).filter(([,n])=>y?n.toLowerCase().includes(y.toLowerCase()):!0),[y,f]),U=(n,S)=>{if(c.current?.open===!0||b===!0)if(n.key==="ArrowDown")n.preventDefault(),u(g=>g+1<D.length?g+1:0);else if(n.key==="ArrowUp")n.preventDefault(),u(g=>g-1>=0?g-1:D.length-1);else if(n.key==="Enter"){n.preventDefault();const[g]=D[R]||[];g&&r.setFieldValue(t.name,S?g:[...r.values[t.name],g]),c.current&&(c.current.open=!1)}else n.key==="Escape"&&(c.current.open=!1,j(""),E(!1))};switch($.useEffect(()=>{h.current?.querySelector(`[data-index="${R}"]`)?.scrollIntoView({block:"nearest"})},[R]),$.useEffect(()=>{const n=t.autocomplete,S=t.ajaxchain,g=n||S;if(!g||g==="off")return;const w=r.values[t.name];if(!w)return;(async()=>{try{const F=g.src,K=G(F.where??{},{refid:w});if(F.table&&d){const s=await k({method:"POST",url:d.baseURL+d.registerQuery,data:{query:{table:F.table,cols:F.columns,where:K}},headers:{Authorization:`Bearer ${d?.accessToken}`}}),{data:m}=await k({method:"POST",url:d.baseURL+d.runQuery,data:{queryid:s.data.queryid,filter:{}},headers:{Authorization:`Bearer ${d?.accessToken}`}});if(n){const T=g.target.split(",").map(L=>L.trim()),_=Array.isArray(m?.data)?m?.data[0]:m?.data;if(!_)return;T.forEach(L=>{_[L]!==void 0&&r.setFieldValue(L,_[L])})}if(S){const T=t.valueKey||"value",_=t.labelKey||"title",L=oe(T,_,m);A?.(S.target,L)}}}catch(F){console.error("Autocomplete fetch failed",F)}})()},[r.values[t.name]]),t.type){case"autocomplete":{const n=g=>{const w=g.target.value;j(w),r.setFieldValue(a,w),E(!0)},S=(g,w)=>{r.setFieldValue(a,g),E(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{className:`${V} ${Y}`,value:r.values[a],placeholder:t.placeholder||"Type to search...",onChange:n,onFocus:()=>E(!0),onBlur:()=>setTimeout(()=>E(!1),150),onKeyDown:g=>U(g,!0)}),b&&e.jsx("div",{ref:h,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:D.length>0?D.map(([g,w],I)=>e.jsx("div",{"data-index":I,className:`px-3 py-2 cursor-pointer text-sm 
    ${R===I?"bg-gray-100":"hover:bg-gray-100"}
  `,onMouseDown:()=>S(g),children:w},I)):e.jsxs("div",{className:"px-3 py-2 text-sm text-gray-400 cursor-pointer",children:['No matches — select to keep "',y,'"']})}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"textarea":return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{className:`${V} ${Y} min-h-[120px] resize-none`,onFocus:()=>N(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:t.placeholder,disabled:t.disabled}),e.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${p?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})});case"select":case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":return z>10?e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("details",{className:"relative w-full",onToggle:q,ref:c,onKeyDown:n=>U(n,!0),children:[e.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-700",children:r.values[a]?f[r.values[a]]||"Select option":`Select ${t.label}`}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{ref:h,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.jsx("div",{className:"sticky top-0 bg-white p-1",children:e.jsx("input",{type:"text",value:y,onChange:n=>{j(n.target.value),u(0)},onKeyDown:n=>U(n,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),D.length>0?D.map(([n,S],g)=>e.jsx("div",{"data-index":g,onClick:()=>{r.setFieldValue(a,n),c.current?.removeAttribute("open"),j(""),u(0)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${r.values[a]===n?"bg-indigo-50 text-indigo-600 font-medium":R===g?"bg-gray-100":"hover:bg-gray-50"}`,children:S},n)):e.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]}):e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:`${V} ${Y} appearance-none cursor-pointer pr-12`,onFocus:()=>N(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,disabled:t.disabled,children:[e.jsx("option",{value:"",disabled:!0,children:t.placeholder}),Object.entries(f||{}).map(([n,S])=>e.jsx("option",{value:n,className:"py-2",children:S},n))]}),e.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:e.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"radioList":case"radio":return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:`flex ${z>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(f||{}).map(([n,S])=>e.jsxs("label",{htmlFor:`${a}-${n}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[e.jsx("input",{id:`${a}-${n}`,type:"radio",name:a,checked:r.values[a]===n,value:n,onChange:r.handleChange,onBlur:r.handleBlur,disabled:t.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},n))}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]});case"component":return l?.[a];case"checkbox":{if(z===1){const[n,S]=Object.entries(f||{})[0]||[a,t.label];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex  space-x-2",children:[e.jsx("input",{id:a,type:"checkbox",name:a,checked:r.values[a]||!1,onChange:r.handleChange,onBlur:r.handleBlur,disabled:t.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),e.jsx("label",{htmlFor:a,className:"text-sm font-medium text-gray-700 cursor-pointer",children:S})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]})}return z>1&&z<=5?e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(f||{}).map(([n,S])=>e.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:a,value:n,checked:Array.isArray(r.values[a])?r.values[a]?.includes(n):!1,onChange:r.handleChange,onBlur:r.handleBlur,disabled:t.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},n))}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]}):z>5?e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("details",{className:"relative w-full",onToggle:q,ref:c,onKeyDown:n=>U(n,!1),children:[e.jsxs("summary",{className:"cursor-pointer select-none border border-gray-300 rounded-lg px-3 py-2 bg-white flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-700",children:r.values[a]?.length>0?r.values[a].join(", "):`Select ${t.label}`}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsxs("div",{ref:h,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[e.jsx("div",{className:"sticky top-0 bg-white p-1",children:e.jsx("input",{type:"text",value:y,onChange:n=>{j(n.target.value),u(0)},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
    bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
    focus:outline-none focus:ring-0`})}),D.length>0?D.map(([n,S],g)=>e.jsxs("label",{htmlFor:`${a}-${n}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${r.values[a]===n?"bg-indigo-50 text-indigo-600 font-medium":R===g?"bg-gray-100":"hover:bg-gray-50"}`,children:[e.jsx("input",{id:`${a}-${n}`,type:"checkbox",name:a,value:n,checked:Array.isArray(r.values[a])?r.values[a]?.includes(n):!1,onChange:r.handleChange,onBlur:r.handleBlur,disabled:t.disabled,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),S]},n)):e.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(r.errors[a])})]}):null}case"tags":{const n=Array.isArray(r.values[a])?r.values[a]:[],S=Array.isArray(f)?f:Object.entries(f||{}).map(([s,m])=>({value:s,label:m})),g=s=>{s&&!n.includes(s)&&r.setFieldValue(a,[...n,s])},w=s=>{(s.key==="Enter"||s.key===",")&&(s.preventDefault(),g(y),j(""))},I=s=>{r.setFieldValue(a,n.filter(m=>m!==s))},F=s=>S.find(m=>m.value===s)?.label||s,K=()=>e.jsxs("svg",{className:"w-4 h-4 inline-block mr-1",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.59 13.41L11 3.83a2 2 0 00-2.83 0L2.41 9.59a2 2 0 000 2.82l9.59 9.59a2 2 0 002.83 0l6.75-6.75a2 2 0 000-2.83z"}),e.jsx("circle",{cx:"7.5",cy:"7.5",r:"1.5"})]});return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:`${V} flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center`,onClick:()=>!t.disabled&&document.getElementById(`${a}-input`)?.focus(),children:[n.map(s=>e.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[e.jsx("span",{className:"flex items-center justify-center",children:e.jsx(K,{})}),e.jsx("span",{className:"text-indigo-700",children:F(s)}),e.jsx("button",{type:"button","aria-label":`Remove ${F(s)}`,onClick:m=>{m.stopPropagation(),t.disabled||I(s)},onMouseDown:m=>m.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"×"})]},s)),e.jsx("input",{id:`${a}-input`,type:"text",value:y,onChange:s=>j(s.target.value),onKeyDown:w,placeholder:n.length===0?t.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:t.disabled})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}case"file":return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[t.icon&&e.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:C(t)}),e.jsx("input",{type:t.type||"text",className:`${V} ${Y} ${t.icon?"pl-9":""} `,onFocus:()=>N(!0),name:a,onBlur:r.handleBlur,onChange:r.handleChange,placeholder:t.placeholder,disabled:t.disabled}),e.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${p?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]});case"json":{let n=r.values[a];if(typeof n=="object"&&n!==null){const w=JSON.stringify(n,null,2);r.setFieldValue(a,w,!1),n=w}const S=n||"",g=w=>{r.setFieldValue(a,w.target.value)};return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{id:`${a}-json`,name:a,value:S,onChange:g,onBlur:r.handleBlur,placeholder:t.placeholder||"Enter valid JSON",disabled:t.disabled,className:`${V} ${Y} min-h-[200px] font-mono text-sm resize-y`}),e.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${p?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}default:return e.jsxs("div",{className:"relative",children:[e.jsxs("label",{className:x,children:[t.label,t.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative",children:[t.icon&&e.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:C(t)}),e.jsx("input",{type:t.type||"text",className:`${V} ${Y} ${t.icon?"pl-9":""} `,onFocus:()=>N(!0),name:a,value:r.values[a],onBlur:r.handleBlur,onChange:r.handleChange,placeholder:t.placeholder,disabled:t.disabled}),e.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${p?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),r.touched[a]&&r.errors[a]&&e.jsx("span",{className:"text-xs text-red-500",children:String(r.errors[a])})]})}}function Se({title:t,children:r,isFirst:o}){const[l,d]=$.useState(o);return e.jsx("div",{className:"group relative mt-1",children:e.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[e.jsxs("button",{onClick:()=>d(!l),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${l?"bg-action":"bg-gray-300"}`}),e.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:t})]}),e.jsxs("div",{className:`relative transition-all duration-300 ${l?"rotate-180":""}`,children:[e.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${l?"bg-action opacity-30":"bg-transparent opacity-0"}`}),e.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden ${l?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:e.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Ee({title:t,groupedFields:r,data:o,onSubmit:l=N=>{},onCancel:d=()=>{},methods:i={},components:O={},sqlOpsUrls:A={},refid:p}){const[N,f]=$.useState({}),v=(u,h)=>{f(c=>({...c,[u]:h}))},y={},j={};Object.entries(r).forEach(([u,h])=>{Z(h,y,j)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(u=>{u in y&&(u==="tags"&&typeof o[u]=="string"?y[u]=o[u].split(","):y[u]=o[u]?o[u]:"")});const R=ee.useFormik({initialValues:y,enableReinitialize:!0,validationSchema:P.object().shape(j),onSubmit:u=>{l(u)}});return e.jsx("div",{className:"relative z-10 max-w-full  m-4",children:e.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:e.jsxs("form",{onSubmit:R.handleSubmit,className:"p-4 mx-auto",children:[e.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([u,h],c)=>e.jsx(Se,{title:u,isFirst:c===0,children:e.jsx("div",{className:"grid grid-cols-12 gap-4",children:h.map((b,E)=>ae(b.hidden)?null:e.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(b.width))]||"lg:col-span-4"}`,children:e.jsx(ne,{refid:p,sqlOpsUrls:A,components:O,field:b,formik:R,methods:i,setFieldOptions:v,...N[b.name]?{optionsOverride:N[b.name]}:{}},b.name)},b?.name??`field-${E}`))})},u))}),e.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function Oe({title:t,groupedFields:r,data:o,onSubmit:l=f=>{},onCancel:d=()=>{},methods:i={},components:O={},sqlOpsUrls:A={},widget:p,refid:N}){const f=Object.keys(r),[v,y]=$.useState(0),[j,R]=$.useState({}),u=(x,C)=>{R(z=>({...z,[x]:C}))},h={},c={},b={};p?Object.entries(r).forEach(([x,C])=>{const z={};Z(C,c,z),h[x]=z}):Object.entries(r).forEach(([x,C])=>{Z(C,c,b)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(x=>{x in c&&(x==="tags"&&typeof o[x]=="string"?c[x]=o[x].split(","):c[x]=o[x]?o[x]:"")});const E=f[v]??null,q=E&&h[E]?h[E]:{},a=ee.useFormik({initialValues:c,enableReinitialize:!0,validationSchema:P.object().shape(p?q:b),onSubmit:x=>{p?(v<f.length-1&&y(C=>C+1),v===f.length-1&&l(x)):l(x)}}),V=async x=>{if(x.preventDefault(),!p){const C=await a.validateForm();if(Object.keys(C).length>0){alert("Please fill all required fields before submitting."),a.setTouched(Object.keys(C).reduce((z,D)=>({...z,[D]:!0}),{}));return}}a.handleSubmit(x)},Y=()=>{y(x=>x>0?x-1:x)};return e.jsxs("div",{className:" max-w-full  m-4",children:[e.jsx("div",{className:"relative",children:e.jsx("div",{className:"relative bg-gray-100 rounded-t-lg px-1 pt-1  shadow-inner",children:e.jsx("nav",{className:"relative flex",children:f.map((x,C)=>e.jsx("button",{type:"button",onClick:()=>y(C),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${v===C?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:e.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:x})},x))})})}),e.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[e.jsxs("form",{onSubmit:V,className:"w-full mx-auto",children:[e.jsx("div",{className:"grid grid-cols-12 gap-4",children:E&&r[E]?.map((x,C)=>ae(x.hidden)?null:e.jsx("div",{className:`col-span-12  ${re[se(Number(x.width))]||"lg:col-span-4"}`,children:e.jsx(ne,{refid:N,sqlOpsUrls:A,field:x,formik:a,methods:i,components:O,setFieldOptions:u,...j[x.name]?{optionsOverride:j[x.name]}:{}},x.name)},x?.name??`field-${C}`))}),e.jsxs("div",{className:`mt-8 flex ${v>0?"justify-between":"justify-end"} space-x-3`,children:[v>0&&e.jsx("button",{onClick:Y,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{onClick:d,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:p?"Next":"Save"})]})]})]}),e.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{children:["Tab ",v+1," of ",f.length]}),e.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),e.jsx("div",{className:"flex gap-1",children:f.map((x,C)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${C===v?"bg-action w-6":"bg-gray-300"}`},C))})]})})]},f[v])]})}function Te({title:t,groupedFields:r,data:o,onSubmit:l=N=>{},onCancel:d=()=>{},methods:i={},components:O={},sqlOpsUrls:A={},refid:p}){const N=Object.values(r).flat(),[f,v]=$.useState({}),y=(h,c)=>{v(b=>({...b,[h]:c}))},j={},R={};Object.entries(r).forEach(([h,c])=>{Z(c,j,R)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(h=>{h in j&&(h==="tags"&&typeof o[h]=="string"?j[h]=o[h].split(","):j[h]=o[h]?o[h]:"")});const u=ee.useFormik({initialValues:j,enableReinitialize:!0,validationSchema:P.object().shape(R),onSubmit:h=>{l(h)}});return e.jsx("div",{className:"relative z-10 max-w-full  m-4",children:e.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:e.jsxs("form",{onSubmit:u.handleSubmit,className:"p-4  mx-auto",children:[e.jsx("div",{className:"grid grid-cols-12 gap-4",children:N.map((h,c)=>ae(h.hidden)?null:e.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(h.width))]||"lg:col-span-4"}`,children:e.jsx(ne,{refid:p,sqlOpsUrls:A,components:O,field:h,formik:u,methods:i,setFieldOptions:y,...f[h.name]?{optionsOverride:f[h.name]}:{}},h.name)},h?.name??`field-${c}`))}),e.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[e.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})}function $e({title:t,children:r}){return e.jsx("div",{className:"group relative mt-1",children:e.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[e.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),e.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:t})]})}),e.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:e.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white",children:e.jsx("div",{className:"space-y-5 pt-4",children:r})})})]})})}function Ae({title:t,groupedFields:r,data:o,onSubmit:l=N=>{},onCancel:d=()=>{},methods:i={},components:O={},sqlOpsUrls:A={},refid:p}){const[N,f]=$.useState({}),v=(u,h)=>{f(c=>({...c,[u]:h}))},y={},j={};Object.entries(r).forEach(([u,h])=>{Z(h,y,j)}),o&&Object.keys(o).length>0&&Object.keys(o).forEach(u=>{u in y&&(u==="tags"&&typeof o[u]=="string"?y[u]=o[u].split(","):y[u]=o[u]?o[u]:"")});const R=ee.useFormik({initialValues:y,enableReinitialize:!0,validationSchema:P.object().shape(j),onSubmit:u=>{l(u)}});return e.jsx("div",{className:"relative z-10 max-w-full  m-4",children:e.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:e.jsxs("form",{onSubmit:R.handleSubmit,className:"p-4 mx-auto",children:[e.jsx("div",{className:"space-y-2",children:r&&Object.entries(r).map(([u,h],c)=>e.jsx($e,{title:u,children:e.jsx("div",{className:"grid grid-cols-12 gap-4",children:h.map((b,E)=>ae(b.hidden)?null:e.jsx("div",{className:`col-span-12 md:col-span-6 ${re[se(Number(b.width))]||"lg:col-span-4"}`,children:e.jsx(ne,{refid:p,sqlOpsUrls:A,components:O,field:b,formik:R,methods:i,setFieldOptions:v,...N[b.name]?{optionsOverride:N[b.name]}:{}},b.name)},b?.name??`field-${E}`))})},u))}),e.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[e.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),e.jsxs("div",{className:"space-x-3",children:[e.jsx("button",{type:"button",onClick:d,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}const J=t=>({Authorization:`Bearer ${t.accessToken}`}),le=async t=>(await k.get(t.baseURL+t.dbopsGetHash,{headers:J(t)})).data.refhash,ie=async(t,r)=>(await k.post(t.baseURL+t.dbopsGetRefId,r,{headers:J(t)})).data.refid,Ce={async fetch(t,r){const o=await le(t),l=await ie(t,{operation:"fetch",source:r.source,fields:r.fields??{},datahash:o}),d=await k.post(t.baseURL+t.dbopsFetch,{refid:l,datahash:o},{headers:J(t)});return d.data?.data??d.data},async create(t,r){const o=await le(t),l=await ie(t,{operation:"create",source:r.source,fields:r.values,datahash:o});return(await k.post(t.baseURL+t.dbopsCreate,{refid:l,fields:r.values,datahash:o},{headers:J(t)})).data},async update(t,r){const o=await le(t),l=await ie(t,{operation:"update",source:r.source,fields:r.values,datahash:o});return(await k.post(t.baseURL+t.dbopsUpdate,{refid:l,fields:r.values,datahash:o},{headers:J(t)})).data}};function xe({formJson:t={title:"",fields:{},source:{}},methods:r={},userid:o=null,onCancel:l=()=>{},components:d={},callback:i=()=>{},initialvalues:O={}}){const A=je(t),p=t.endPoints,N=t?.source?.refid,f=Ne(t?.fields??{}),[v,y]=$.useState(O);$.useEffect(()=>{let u=!0;return(async()=>{const c=t?.source??{};if(!c?.type){u&&y({});return}if(c.type==="method"){const b=c.method,E=b?r[b]:void 0;if(E)try{const q=await Promise.resolve(E());u&&y(q??{})}catch(q){console.error("Method execution failed:",q),u&&y({})}else u&&y({})}if(c.type==="api"&&p?.operation!=="create")try{const b=await k({method:c.method||"GET",url:c.url??"",data:c.body??{},params:c.params??{},headers:c.headers??{}});u&&y(b.data??{})}catch(b){console.error("API fetch failed:",b),u&&y({})}if(c.type==="sql"&&c.refid&&c.refid!="0"&&p?.operation!=="create"){if(!p){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const b=await Ce.fetch(p,{source:{...c,table:c.table,columns:c.columns,where:G(c.where,{refid:N})},fields:we(t.fields)});u&&y(b)}catch(b){console.error("API fetch failed:",b)}}})(),()=>{u=!1}},[o,t?.source?.type||"",t?.source?.method||"",t?.source?.url||"",JSON.stringify(t?.source?.params??{}),JSON.stringify(t?.source?.body??{}),JSON.stringify(t?.source?.headers??{})]);const j=async u=>{const h=t?.source??{};if(h.type==="method"){const c=h.method,b=c?r[c]:void 0;if(b)try{const E=await Promise.resolve(b(u));i?.(E)}catch(E){i?.(E),console.error("Method execution failed:",E)}}if(h.type==="api")try{const c=await k({method:h.method||"POST",url:h.url,data:u??{},params:h.params??{},headers:h.headers??{}});i?.(c)}catch(c){i?.(c),console.error("API fetch failed:",c)}if(h.type==="sql"){const c=t.endPoints;if(!c){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const b=await k({method:"GET",url:c.baseURL+c.dbopsGetHash,headers:{Authorization:`Bearer ${c?.accessToken}`}});let E={...h};h.where&&(E={...h,where:G(h.where,{refid:N})});const q=await k({method:"POST",url:c.baseURL+c.dbopsGetRefId,data:{operation:c.operation,source:E,fields:t.fields,forcefill:t.forcefill,datahash:b.data.refhash},headers:{Authorization:`Bearer ${c?.accessToken}`}}),a=await k({method:"POST",url:c.baseURL+c[c.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:q.data.refid,fields:u,datahash:b.data.refhash},headers:{Authorization:`Bearer ${c?.accessToken}`}});i?.(a)}catch(b){i?.(b),console.error("API fetch failed:",b)}}},R={accordion:e.jsx(Ee,{title:t?.title??"",groupedFields:f,data:v,onSubmit:j,onCancel:l,methods:r,components:d,sqlOpsUrls:p,refid:N}),cards:e.jsx(Ae,{title:t?.title??"",groupedFields:f,data:v,onSubmit:j,onCancel:l,methods:r,components:d,sqlOpsUrls:p,refid:N}),tab:e.jsx(Oe,{title:t?.title??"",groupedFields:f,data:v,onSubmit:j,onCancel:l,methods:r,components:d,widget:t?.widget,sqlOpsUrls:p,refid:N}),simple:e.jsx(Te,{title:t?.title??"",groupedFields:f,data:v,onSubmit:j,onCancel:l,methods:r,components:d,sqlOpsUrls:p,refid:N})};return e.jsx("div",{className:"relative",children:R[A]??R.simple})}B.LogiksForm=xe,B.default=xe,Object.defineProperties(B,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
