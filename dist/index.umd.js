(function(hh,To){typeof exports=="object"&&typeof module<"u"?To(exports,require("react"),require("axios"),require("yup"),require("formik")):typeof define=="function"&&define.amd?define(["exports","react","axios","yup","formik"],To):(hh=typeof globalThis<"u"?globalThis:hh||self,To(hh.LogiksForm={},hh.React,hh.axios,hh.Yup,hh.formik))})(this,function(hh,To,Pl,yJ,n5){"use strict";function YY(B){const Y=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(B){for(const we in B)if(we!=="default"){const xe=Object.getOwnPropertyDescriptor(B,we);Object.defineProperty(Y,we,xe.get?xe:{enumerable:!0,get:()=>B[we]})}}return Y.default=B,Object.freeze(Y)}const o5=YY(To),Bl=YY(yJ);var s5={exports:{}},Bk={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XY;function CJ(){if(XY)return Bk;XY=1;var B=Symbol.for("react.transitional.element"),Y=Symbol.for("react.fragment");function we(xe,Ne,Ee){var Ce=null;if(Ee!==void 0&&(Ce=""+Ee),Ne.key!==void 0&&(Ce=""+Ne.key),"key"in Ne){Ee={};for(var de in Ne)de!=="key"&&(Ee[de]=Ne[de])}else Ee=Ne;return Ne=Ee.ref,{$$typeof:B,type:xe,key:Ce,ref:Ne!==void 0?Ne:null,props:Ee}}return Bk.Fragment=Y,Bk.jsx=we,Bk.jsxs=we,Bk}var $k={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QY;function xJ(){return QY||(QY=1,process.env.NODE_ENV!=="production"&&function(){function B(re){if(re==null)return null;if(typeof re=="function")return re.$$typeof===Yt?null:re.displayName||re.name||null;if(typeof re=="string")return re;switch(re){case Dt:return"Fragment";case En:return"Profiler";case qe:return"StrictMode";case ut:return"Suspense";case At:return"SuspenseList";case Wn:return"Activity"}if(typeof re=="object")switch(typeof re.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),re.$$typeof){case jt:return"Portal";case V:return(re.displayName||"Context")+".Provider";case ft:return(re._context.displayName||"Context")+".Consumer";case Ye:var ae=re.render;return re=re.displayName,re||(re=ae.displayName||ae.name||"",re=re!==""?"ForwardRef("+re+")":"ForwardRef"),re;case se:return ae=re.displayName||null,ae!==null?ae:B(re.type)||"Memo";case nn:ae=re._payload,re=re._init;try{return B(re(ae))}catch{}}return null}function Y(re){return""+re}function we(re){try{Y(re);var ae=!1}catch{ae=!0}if(ae){ae=console;var tt=ae.error,St=typeof Symbol=="function"&&Symbol.toStringTag&&re[Symbol.toStringTag]||re.constructor.name||"Object";return tt.call(ae,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",St),Y(re)}}function xe(re){if(re===Dt)return"<>";if(typeof re=="object"&&re!==null&&re.$$typeof===nn)return"<...>";try{var ae=B(re);return ae?"<"+ae+">":"<...>"}catch{return"<...>"}}function Ne(){var re=X.A;return re===null?null:re.getOwner()}function Ee(){return Error("react-stack-top-frame")}function Ce(re){if(ce.call(re,"key")){var ae=Object.getOwnPropertyDescriptor(re,"key").get;if(ae&&ae.isReactWarning)return!1}return re.key!==void 0}function de(re,ae){function tt(){_t||(_t=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",ae))}tt.isReactWarning=!0,Object.defineProperty(re,"key",{get:tt,configurable:!0})}function Oe(){var re=B(this.type);return A[re]||(A[re]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),re=this.props.ref,re!==void 0?re:null}function Ze(re,ae,tt,St,wt,on,pe,Te){return tt=on.ref,re={$$typeof:Ut,type:re,key:ae,props:on,_owner:wt},(tt!==void 0?tt:null)!==null?Object.defineProperty(re,"ref",{enumerable:!1,get:Oe}):Object.defineProperty(re,"ref",{enumerable:!1,value:null}),re._store={},Object.defineProperty(re._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(re,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(re,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:pe}),Object.defineProperty(re,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Te}),Object.freeze&&(Object.freeze(re.props),Object.freeze(re)),re}function Ct(re,ae,tt,St,wt,on,pe,Te){var M=ae.children;if(M!==void 0)if(St)if(Uo(M)){for(St=0;St<M.length;St++)Ke(M[St]);Object.freeze&&Object.freeze(M)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ke(M);if(ce.call(ae,"key")){M=B(re);var wn=Object.keys(ae).filter(function(Un){return Un!=="key"});St=0<wn.length?"{key: someKey, "+wn.join(": ..., ")+": ...}":"{key: someKey}",Ro[M+St]||(wn=0<wn.length?"{"+wn.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,St,M,wn,M),Ro[M+St]=!0)}if(M=null,tt!==void 0&&(we(tt),M=""+tt),Ce(ae)&&(we(ae.key),M=""+ae.key),"key"in ae){tt={};for(var sn in ae)sn!=="key"&&(tt[sn]=ae[sn])}else tt=ae;return M&&de(tt,typeof re=="function"?re.displayName||re.name||"Unknown":re),Ze(re,M,on,wt,Ne(),tt,pe,Te)}function Ke(re){typeof re=="object"&&re!==null&&re.$$typeof===Ut&&re._store&&(re._store.validated=1)}var Ot=To,Ut=Symbol.for("react.transitional.element"),jt=Symbol.for("react.portal"),Dt=Symbol.for("react.fragment"),qe=Symbol.for("react.strict_mode"),En=Symbol.for("react.profiler"),ft=Symbol.for("react.consumer"),V=Symbol.for("react.context"),Ye=Symbol.for("react.forward_ref"),ut=Symbol.for("react.suspense"),At=Symbol.for("react.suspense_list"),se=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),Wn=Symbol.for("react.activity"),Yt=Symbol.for("react.client.reference"),X=Ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=Object.prototype.hasOwnProperty,Uo=Array.isArray,dn=console.createTask?console.createTask:function(){return null};Ot={"react-stack-bottom-frame":function(re){return re()}};var _t,A={},co=Ot["react-stack-bottom-frame"].bind(Ot,Ee)(),it=dn(xe(Ee)),Ro={};$k.Fragment=Dt,$k.jsx=function(re,ae,tt,St,wt){var on=1e4>X.recentlyCreatedOwnerStacks++;return Ct(re,ae,tt,!1,St,wt,on?Error("react-stack-top-frame"):co,on?dn(xe(re)):it)},$k.jsxs=function(re,ae,tt,St,wt){var on=1e4>X.recentlyCreatedOwnerStacks++;return Ct(re,ae,tt,!0,St,wt,on?Error("react-stack-top-frame"):co,on?dn(xe(re)):it)}}()),$k}var JY;function SJ(){return JY||(JY=1,process.env.NODE_ENV==="production"?s5.exports=CJ():s5.exports=xJ()),s5.exports}var fe=SJ();const wJ=["jpg","jpeg","png","gif","svg","webp"],EJ=["mp4","webm","ogg"],TJ=["txt","json","csv"],kJ=["pdf"];function AJ(B){return B.template==="accordion"?"accordion":B.template==="simple"?"simple":B.template==="cards"?"cards":Object.values(B.fields||{}).some(xe=>xe.group)?"tab":"simple"}function _J(B,Y="create",we="Info"){const xe={};let Ne=!1;if(Object.values(B).forEach(Ce=>{Ce.group&&(Ne=!0)}),!Ne)return{};const Ee=[];return Object.entries(B).forEach(([Ce,de])=>{if(de.vmode==="edit"&&Y==="create")return;const Oe={...de,name:Ce};if(de.group){const Ze=de.group;xe[Ze]||(xe[Ze]=[]),xe[Ze].push(Oe)}else Ee.push(Oe)}),Ee.length>0?{[we]:Ee,...xe}:xe}function eX(B,Y="create"){const we={};return Object.keys(B).forEach(xe=>{B[xe].vmode==="edit"&&Y==="create"||(we[xe]={label:xe,required:B[xe].required??!1})}),we}const Ik=(B,Y,we,xe,Ne,Ee)=>{const Ce=Ee==="create"&&Ne?sX(Ne):{};B.forEach(de=>{const Oe=de?.name;if(!Oe)return;let Ze=xe?.[Oe];const Ct=Ee==="create"&&Ne?oX(de):null;Ee==="create"&&Ct&&Ce[Ct]!==void 0&&Ze==null&&(Ze=Ce[Ct]),Ze==null&&(Ze=de.default),de.multiple===!0||de.type==="checkbox"||de.type==="tags"?Y[Oe]=Array.isArray(Ze)?Ze:typeof Ze=="string"?Ze.split(",").map(Ot=>Ot.trim()).filter(Boolean):[]:de.type==="json"?Y[Oe]=typeof Ze=="object"&&Ze!==null?JSON.stringify(Ze,null,2):Ze??"":de.type==="date"?Y[Oe]=typeof Ze=="string"?Ze.slice(0,10):"":de.type==="time"?typeof Ze=="string"?Ze.includes("T")?Y[Oe]=Ze.slice(11,16):Y[Oe]=Ze.slice(0,5):Y[Oe]="":Oe==="blocked"||Oe==="blacklist"?Y[Oe]=String(Ze??"false"):Y[Oe]=Ze??"";let Ke;de.type==="file"?Ke=de.multiple?Bl.array().of(Bl.mixed()):Bl.mixed():de.multiple===!0||de.type==="checkbox"||de.type==="tags"?Ke=Bl.array().of(Bl.string()):de.type==="email"?Ke=Bl.string().email("Invalid email"):de.type==="number"?Ke=Bl.number().typeError("Must be a number"):de.type==="json"?Ke=Bl.string().test("json","Invalid JSON",Ot=>{if(!Ot)return!0;try{return JSON.parse(Ot),!0}catch{return!1}}):Ke=Bl.string(),de.required&&(Ke=Ke.required(de.error_message||`${de.label||Oe} is required`)),de?.validate?.regex&&typeof de.validate.regex=="string"&&(Ke=Ke.matches(new RegExp(de?.validate?.regex),de?.error_message||"Invalid input format")),de?.validate&&Object.entries(de.validate).forEach(([Ot,Ut])=>{switch(Ot){case"email":Ut&&(Ke=Ke.email("Invalid email format"));break;case"mobile":Ke=Ke.matches(/^[1-9][0-9]*$/,"Invalid mobile number format");break;case"regex":Ke=Ke.matches(new RegExp(Ut),`Must match pattern: ${Ut}`);break;case"date":Ke=Bl.date().typeError("Invalid date format (expected dd/MM/yyyy or dd-MM-yyyy)").transform((jt,Dt)=>{if(typeof Dt=="string"){const qe=Dt.replace(/-/g,"/"),[En,ft,V]=qe.split("/");if(En&&ft&&V)return new Date(`${V}-${ft}-${En}`)}return jt});break;case"time":Ke=Ke.matches(/^([0-1][0-9]|2[0-3])[:\-]([0-5][0-9])$/,"Invalid time format (HH:MM)");break;case"timesec":Ke=Ke.matches(/^([0-1][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])$/,"Invalid time format (HH:MM:SS)");break;case"number":case"numeric":Ke=Bl.number().typeError("Must be numeric");break;case"float":case"decimal":Ke=Bl.number().typeError("Must be a decimal").transform((jt,Dt)=>{if(Dt==null||Dt==="")return;const qe=Number(Dt);if(isNaN(qe))return jt;if(typeof jt=="number"&&!isNaN(jt)){const En=Number(jt);return Number.isInteger(En)?Number(qe.toFixed(En)):qe}return qe});break;case"alphanumeric":Ke=Ke.matches(/^[a-z0-9]+$/i,"Must be alphanumeric");break;case"alpha":Ke=Ke.matches(/^[a-zA-Z]+$/,"Must contain only letters");break;case"upper":Ke=Ke.transform(jt=>jt&&jt.toUpperCase());break;case"lower":Ke=Ke.transform(jt=>jt&&jt.toLowerCase());break;case"length-min":{const jt=Number(Ut);isNaN(jt)||(Ke=Ke.min(jt,`Minimum length is ${jt}`));break}case"length-max":{const jt=Number(Ut);isNaN(jt)||(Ke=Ke.max(jt,`Maximum length is ${jt}`));break}}}),we[Oe]=Ke})},Lk={12:"lg:col-span-12",11:"lg:col-span-11",10:"lg:col-span-10",9:"lg:col-span-9",8:"lg:col-span-8",7:"lg:col-span-7",6:"lg:col-span-6",5:"lg:col-span-5",4:"lg:col-span-4",3:"lg:col-span-3",2:"lg:col-span-2",1:"lg:col-span-1"};function Fk(B){return[1,2,3,4,5,6,7,8,9,10,11,12].includes(B)?B:6}const r5=B=>B===!0||B==="true",zp=(B,Y)=>typeof B=="string"?B.replace(/#(\w+)#/g,(we,xe)=>Y[xe]!==void 0?String(Y[xe]):we):Array.isArray(B)?B.map(we=>zp(we,Y)):B&&typeof B=="object"?Object.fromEntries(Object.entries(B).map(([we,xe])=>[zp(we,Y),zp(xe,Y)])):B,PS=(B,Y,we,xe)=>{if(!Array.isArray(we)||we.length===0)return{};const Ne=xe??(we[0]&&typeof we[0]=="object"&&"category"in we[0]?"category":void 0);if(!Ne){const Ce={};return we.forEach(de=>{const Oe=de[B],Ze=de[Y];Oe!=null&&Ze!=null&&(Ce[String(Oe)]=String(Ze))}),Ce}const Ee={};return we.forEach(Ce=>{const de=Ce[Ne]??"Others",Oe=Ce[B],Ze=Ce[Y];Oe==null||Ze==null||(Ee[de]||(Ee[de]={}),Ee[de][String(Oe)]=String(Ze))}),Ee},x7=(B,Y)=>{if(!B||Y==null)return;const we=String(Y);if(typeof Object.values(B)[0]=="string")return B[we];for(const Ne of Object.values(B))if(we in Ne)return Ne[we]},OJ=B=>{if(!B)return[];if(Array.isArray(B))return B.map(xe=>[String(xe.value),String(xe.title??xe.label??xe.value)]);const Y=Object.values(B);return Y.length?typeof Y[0]=="string"?Object.entries(B).map(([xe,Ne])=>[String(xe),Ne]):Object.values(B).flatMap(xe=>Object.entries(xe).map(([Ne,Ee])=>[String(Ne),Ee])):[]},tX=B=>{if(!B||typeof B!="object")return!1;const Y=Object.values(B)[0];return typeof Y=="object"&&Y!==null&&!Array.isArray(Y)};async function DJ(){if(!("geolocation"in navigator))throw new Error("Geolocation is not supported by this browser. You cannot access this portal.");try{const B=await new Promise((xe,Ne)=>{navigator.geolocation.getCurrentPosition(xe,Ne,{enableHighAccuracy:!1,timeout:3e4,maximumAge:12e4})}),{latitude:Y,longitude:we}=B.coords;return`${Y},${we}`}catch(B){if(!(B instanceof GeolocationPositionError))throw new Error("Failed to get your location.");switch(B.code){case B.PERMISSION_DENIED:throw new Error("Please allow location access in browser settings.");case B.POSITION_UNAVAILABLE:throw new Error("Unable to detect your location. Try connecting to Wi-Fi.");case B.TIMEOUT:throw new Error("Your device took too long to fetch GPS position.");default:throw new Error("Failed to get your location.")}}}const RJ=B=>Object.entries(B??{}).filter(([,Y])=>Y.type==="geolocation").map(([Y])=>Y);function NJ(B,Y="create"){return Object.entries(B).filter(([,we])=>!(we.vmode==="edit"&&Y==="create")).map(([we,xe])=>({...xe,name:we}))}function Hk(B,Y,we){const xe=oX(Y);xe&&we&&$J(we,xe,B)}function MJ(B){return typeof B=="object"&&B!==null&&typeof B.target=="string"&&typeof B.src=="object"&&B.src!==null&&typeof B.src.table=="string"}function PJ(B){return B.split(",").map(Y=>Y.trim()).map(Y=>{const we=Y.match(/^(.+?)\s+as\s+.+$/i);return we?we[1]?.trim():Y}).filter(Y=>!!Y)}const BS=B=>{if(B==null||typeof B!="object")return{value:B,title:B};const Y={};for(const[we,xe]of Object.entries(B)){const Ne=we.includes(".")?we.split(".").pop():we;if(Ne in Y){console.warn(`Duplicate key after normalization: ${Ne}`);continue}Y[Ne]=xe}return Y},BJ="__form_persist__",nX=B=>`${BJ}:${B}`;function oX(B){return B.persistent?B.persistent===!0?B.name:typeof B.persistent=="string"?B.persistent:null:null}function sX(B){try{return JSON.parse(localStorage.getItem(nX(B))||"{}")}catch{return{}}}function $J(B,Y,we){const xe=sX(B);localStorage.setItem(nX(B),JSON.stringify({...xe,[Y]:we}))}function IJ(B=""){return B.split(".").pop()?.toLowerCase()??""}function LJ(B){return wJ.includes(B)?"image":EJ.includes(B)?"video":kJ.includes(B)?"pdf":TJ.includes(B)?"text":"other"}const rX={image:"fa fa-file-image",pdf:"fa fa-file-pdf",video:"fa fa-file-video",text:"fa fa-file-lines",other:"fa fa-file"},zk=B=>({Authorization:`Bearer ${B.accessToken}`}),S7=async B=>(await Pl.get(B.baseURL+B.dbopsGetHash,{headers:zk(B)})).data.refhash,w7=async(B,Y)=>(await Pl.post(B.baseURL+B.dbopsGetRefId,Y,{headers:zk(B)})).data.refid,FJ={async fetch(B,Y,we,xe){const Ne=await S7(B);let Ee=!1,Ce;we&&(Ee=!0,Ce=we),Ee||(Ce=await w7(B,{operation:"fetch",source:Y.source,fields:Y.fields??{},datahash:Ne,srcid:xe}));const de=await Pl.post(B.baseURL+B.dbopsFetch,{refid:Ce,datahash:Ne},{headers:zk(B)});return de.data?.data??de.data},async create(B,Y,we){const xe=await S7(B),Ne=await w7(B,{operation:"create",source:Y.source,fields:Y.values,datahash:xe,srcid:we});return(await Pl.post(B.baseURL+B.dbopsCreate,{refid:Ne,fields:Y.values,datahash:xe},{headers:zk(B)})).data},async update(B,Y,we){const xe=await S7(B),Ne=await w7(B,{operation:"update",source:Y.source,fields:Y.values,datahash:xe,srcid:we});return(await Pl.post(B.baseURL+B.dbopsUpdate,{refid:Ne,fields:Y.values,datahash:xe},{headers:zk(B)})).data}};async function a5(B,Y,we,xe=void 0,Ne=void 0,Ee={}){try{let Ce=we;return Ce||(Ce=(await Pl({method:"POST",url:B.baseURL+B.registerQuery,data:{query:Y??{},srcid:Ne},headers:{Authorization:`Bearer ${B?.accessToken}`}})).data.queryid),await Pl({method:"POST",url:B.baseURL+B.runQuery,data:{queryid:Ce,filter:Ee,refid:xe,page:0,limit:1e4},headers:{Authorization:`Bearer ${B?.accessToken}`}})}catch(Ce){throw Ce}}async function aX(B,Y){let we=Y.previewPath??"/api/files/preview";const xe=await Pl.get(`${Y.baseURL}${we}?uri=${encodeURIComponent(B)}`,{responseType:"blob",headers:{Authorization:`Bearer ${Y?.accessToken}`}});return URL.createObjectURL(xe.data)}async function cX(B,Y){if(!B?.uploadURL)throw new Error("Upload URL missing");const we=B.baseURL+B.uploadURL;return Promise.all(Array.from(Y).map(async xe=>{const Ne=new FormData;return Ne.append("file",xe),(await Pl.post(we,Ne,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${B.accessToken}`}})).data}))}function HJ({field:B,formik:Y,methods:we={},sqlOpsUrls:xe,refid:Ne,module_refid:Ee="menuManager.main",optionsOverride:Ce,setFieldOptions:de}){const[Oe,Ze]=To.useState(!1),[Ct,Ke]=To.useState(Ce??B.options??{});To.useRef(null);const Ot=To.useRef(null),[Ut,jt]=To.useState(""),[Dt,qe]=To.useState(0),En=To.useRef(null),ft=To.useRef(null),[V,Ye]=To.useState(!1),ut=To.useRef(Ut),At=B.disabled===!0;To.useEffect(()=>{ut.current=Ut},[Ut]);const se=ae=>{if(At){ae.preventDefault(),ft.current?.removeAttribute("open");return}ae.currentTarget.open||jt("")};To.useEffect(()=>{Ce&&Object.keys(Ce).length!==0&&Ke(Ce)},[Ce]),To.useEffect(()=>{const ae=tt=>{ft.current&&!ft.current.contains(tt.target)&&(ft.current.open=!1,jt(""))};return document.addEventListener("mousedown",ae),()=>{document.removeEventListener("mousedown",ae)}},[]);const nn=B.name;To.useEffect(()=>{let ae=!0;return(async()=>{let St=B.valueKey??"value",wt=B.labelKey??"title";if(B?.options){if(typeof B.options=="object"&&!Array.isArray(B.options)){const wn=Object.values(B.options);if(wn.length&&typeof wn[0]=="string"){Ke(B.options);return}}const Te=(Array.isArray(B.options)?B.options:[B.options]).map(BS),M=PS(St,wt,Te,B.groupKey);Ke(M);return}const on=B?.source??{};if(B.type==="dataMethod"){const pe=B.method,Te=pe?we[pe]:void 0;if(Te)try{const M=await Te(),wn=Array.isArray(M?.data?.data)?M.data.data:Array.isArray(M?.data)?M.data:M;if(typeof wn=="object"&&!Array.isArray(wn)){const Tt=Object.values(wn);if(Tt.length&&typeof Tt[0]=="string"){Ke(wn);return}}const sn=Array.isArray(wn)?wn.map(BS):[],Un=PS(St,wt,sn,B.groupKey);ae&&Ke(Un)}catch(M){console.error("Method execution failed:",M),ae&&Ke({})}else ae&&Ke({})}if(on.type==="api"&&on.url)try{const pe=await Pl({method:on.method||"GET",url:on.url,data:on.body??{},params:on.params??{},headers:on.headers??{}}),Te=Array.isArray(pe?.data?.data)?pe.data.data:Array.isArray(pe?.data)?pe.data:pe;if(typeof Te=="object"&&!Array.isArray(Te)){const sn=Object.values(Te);if(sn.length&&typeof sn[0]=="string"){Ke(Te);return}}const M=Array.isArray(Te)?Te.map(BS):[],wn=PS(St,wt,M,B.groupKey);ae&&Ke(wn)}catch(pe){console.error("API execution failed:",pe),ae&&Ke({})}if(B.table||B.type==="dataSelector"||B.queryid){if(!xe){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let pe;if(B.type==="dataSelector")pe={table:"do_lists",cols:"title,value",where:{groupid:B.groupid??""}};else if(!B.queryid){if(!B.table||!B.columns){console.error("Invalid SQL field config",B);return}pe={table:B.table,cols:B.columns,where:B.where?Ne?zp(B.where,{refid:Ne}):B.where:void 0}}const Te=await a5(xe,pe,B?.queryid,void 0,Ee),M=Array.isArray(Te?.data?.data)?Te.data.data:Array.isArray(Te?.data)?Te.data:Te;if(typeof M=="object"&&!Array.isArray(M)){const Un=Object.values(M);if(Un.length&&typeof Un[0]=="string"){Ke(M);return}}const wn=Array.isArray(M)?M.map(BS):[],sn=PS(St,wt,wn,B.groupKey);ae&&Ke(sn)}catch(pe){console.error("API fetch failed:",pe)}}})(),()=>{ae=!1}},[B.options,B.source,B.table,B.columns,B.where,Ne,B.queryid,B.groupKey,B.valueKey,B.labelKey]);const Wn=`
  w-full px-4 py-2 rounded-lg border transition-all duration-300
  backdrop-blur-sm text-gray-800 placeholder-gray-400
  focus:outline-none focus:ring-0

  ${At?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 hover:border-gray-400 focus:border-indigo-500 focus:shadow-md"}
`,Yt=`
    border-gradient-to-r 
    focus:border-gray-400 focus:shadow-lg focus:shadow-gray-100/50
  `,X=`
    block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700
  `,ce=To.useMemo(()=>OJ(Ct),[Ct]),Uo=ce.length,dn=To.useMemo(()=>B.search||!Ut?ce:ce.filter(([,ae])=>ae.toLowerCase().includes(Ut.toLowerCase())),[B.search,Ut,ce]),_t=(ae,tt)=>{if(ft.current?.open===!0||V===!0)if(ae.key==="ArrowDown")ae.preventDefault(),qe(St=>St+1<dn.length?St+1:0);else if(ae.key==="ArrowUp")ae.preventDefault(),qe(St=>St-1>=0?St-1:dn.length-1);else if(ae.key==="Enter"){ae.preventDefault();const[St]=dn[Dt]||[];if(St){let wt=tt?St:[...Y.values[B.name],St];Y.setFieldValue(B.name,wt),Hk(wt,B,Ee)}ft.current&&(ft.current.open=!1)}else ae.key==="Escape"&&(ft.current.open=!1,jt(""),Ye(!1))};To.useEffect(()=>{En.current?.querySelector(`[data-index="${Dt}"]`)?.scrollIntoView({block:"nearest"})},[Dt]),To.useEffect(()=>{Dt>=dn.length&&qe(0)},[dn,Dt]),To.useEffect(()=>{const ae=B.autocomplete,tt=B.ajaxchain;if(!ae&&!tt)return;const St=Y.values[B.name];if(!St)return;const wt=Array.isArray(tt)?tt:tt?[tt]:[];(async()=>{try{if(MJ(ae)){const pe=ae.src;if(!pe||!xe)return;const Te=zp(pe.where??{},{refid:St}),M={...pe,table:pe.table,cols:pe.columns,where:Te},{data:wn}=await a5(xe,M,B?.queryid,void 0,Ee),sn=Array.isArray(wn?.data)?wn.data[0]:wn?.data;sn&&ae.target.split(",").map(Un=>Un.trim()).forEach(Un=>{sn[Un]!==void 0&&Y.setFieldValue(Un,sn[Un])})}for(const pe of wt){const Te=pe.src;if(!pe||typeof pe!="object"||!Te||typeof Te!="object"||!xe)continue;let M;if(!Te.queryid){if(!Te.table||!Te.columns)throw new Error("SQL query requires field.table");const io=zp(Te?.where??{},{refid:St});M={...Te,table:Te.table,cols:Te.columns,where:io}}const{data:wn}=await a5(xe,M,Te?.queryid,St,Ee);let sn=B.valueKey??"value",Un=B.labelKey??"title";const Tt=Array.isArray(wn?.data?.data)?wn.data.data:Array.isArray(wn?.data)?wn.data:wn,rs=Array.isArray(Tt)?Tt.map(BS):[],Wt=PS(sn,Un,rs,B.groupKey);de?.(pe.target,Wt)}}catch(pe){console.error("Autocomplete / AjaxChain fetch failed",pe)}})()},[Y.values[B.name]]),To.useEffect(()=>{if(!B.search||!Ut.trim()||!B.table||!xe)return;const ae=PJ(B.columns??""),tt=new AbortController,St=setTimeout(async()=>{try{let wt;if(!B.queryid){if(!B.table||!B.cols)throw new Error("SQL query requires field.table");const Tt=Ne?zp(B.where??{},{refid:Ne}):B.where;wt={...B,table:B.table,cols:B.columns||B.cols,where:Tt}}let on={};Array.isArray(ae)&&ae.forEach(Tt=>{on[Tt]=[Ut,"LIKE"]});let pe=B.valueKey??"value",Te=B.labelKey??"title";const{data:M}=await a5(xe,wt,B?.queryid,void 0,Ee,on),wn=Array.isArray(M?.data?.data)?M.data.data:Array.isArray(M?.data)?M.data:M,sn=Array.isArray(wn)?wn.map(BS):[],Un=PS(pe,Te,sn,B.groupKey);Ke(Un)}catch(wt){if(Pl.isCancel(wt))return;console.error("Search fetch failed",wt)}},500);return()=>{clearTimeout(St),tt.abort()}},[Ut,Ne]);const A=async ae=>{if(ae.length===0){console.error("No file");return}try{const tt=await cX(xe,ae),St=B.multiple?tt.map(wt=>wt.path):tt[0]?.path;Y.setFieldValue(nn,St),Hk(St,B,Ee)}catch(tt){console.error("File upload failed",tt),Y.setFieldError(nn,"File upload failed")}},co=async(ae,tt,St)=>{const wt=tt[ae];if(!wt)return;const on=we?.[wt];if(typeof on!="function"){console.error(`Method "${String(wt)}" not found`);return}try{await Promise.resolve(on(St))}catch(pe){console.error(`Method "${String(wt)}" failed`,pe)}},it=ae=>{if(At)return;const tt=ae.target.value;jt(tt),qe(0),tt.trim()?Ye(!0):(Ye(!1),Y.setFieldValue(nn,""))},Ro=ae=>{Y.setFieldValue(nn,ae),Hk(ae,B,Ee),jt(""),Ye(!1),co("onChange",B,`${nn}-${ae}`)};function re(ae){const tt=ae.currentTarget.files;tt&&A(tt)}return{setHighlightedIndex:qe,executeFieldMethod:co,handleFileUpload:A,handleKeyDown:_t,handleToggle:se,setSearch:jt,setOpen:Ye,setIsFocused:Ze,handleInputChange:it,handleSelect:Ro,handlePersist:Hk,handleFileChange:re,optionCount:Uo,baseInputClasses:Wn,focusClasses:Yt,labelClasses:X,search:Ut,highlightedIndex:Dt,options:Ct,isDisabled:At,key:nn,filteredOptions:dn,open:V,listRef:En,inputRef:Ot,detailsRef:ft,isFocused:Oe}}const zJ=({fileUrl:B,category:Y})=>B?Y==="image"?fe.jsx("img",{src:B,className:"max-h-[80vh] mx-auto"}):Y==="pdf"||Y==="text"?fe.jsx("iframe",{src:B,className:"w-full h-[80vh]"}):Y==="video"?fe.jsx("video",{controls:!0,className:"w-full max-h-[80vh]",children:fe.jsx("source",{src:B})}):fe.jsxs("div",{className:"text-center p-4",children:[fe.jsx("p",{children:"Preview not available"}),fe.jsx("a",{href:B,download:!0,className:"text-blue-600 underline",children:"Download file"})]}):null;function VJ(B){const Y=rX[B]??rX.other;return fe.jsx("i",{className:`${Y} text-2xl text-gray-600`})}const UJ=({filePath:B,sqlOpsUrls:Y})=>{const[we,xe]=To.useState(null),[Ne,Ee]=To.useState(!1),Ce=IJ(B),de=LJ(Ce);To.useEffect(()=>{if(!Y||de!=="image"&&!Ne)return;let Ze=!0,Ct=null;return aX(B,Y).then(Ke=>{Ze&&(Ct=Ke,xe(Ke))}),()=>{Ze=!1,Ct&&URL.revokeObjectURL(Ct)}},[de,Ne,B,Y]);let Oe=B.split("/").pop();return fe.jsxs(fe.Fragment,{children:[de==="image"&&we?fe.jsx("img",{src:we,alt:Oe,title:"Click to preview",onClick:()=>Ee(!0),className:"h-16 w-16 object-cover rounded  cursor-pointer hover:opacity-90"}):fe.jsxs("div",{role:"button",tabIndex:0,onClick:()=>Ee(!0),onKeyDown:Ze=>Ze.key==="Enter"&&Ee(!0),className:"inline-flex cursor-pointer items-center gap-1",title:"Click to preview",children:[VJ(de),fe.jsx("span",{className:"text-sm",children:Oe})]}),Ne&&fe.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center",children:fe.jsxs("div",{className:"bg-white rounded-lg p-4 max-w-5xl w-full",children:[fe.jsx("button",{className:"float-right text-sm",onClick:()=>Ee(!1),children:"✕"}),we?fe.jsx(zJ,{fileUrl:we,category:de}):fe.jsx("div",{className:"text-center p-8",children:"Loading preview…"})]})})]})};function iX({field:B,isDisabled:Y,handleToggle:we,detailsRef:xe,handleKeyDown:Ne,valueArray:Ee,labelClasses:Ce,listRef:de,search:Oe,filteredOptions:Ze,highlightedIndex:Ct,setSearch:Ke,formik:Ot,setHighlightedIndex:Ut,executeFieldMethod:jt,handlePersist:Dt,module_refid:qe,options:En}){const ft=B.name;return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:Ce,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("details",{className:`relative w-full ${Y?" opacity-70":""}`,onToggle:we,ref:xe,onKeyDown:V=>{Y||Ne(V,!1)},children:[fe.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${Y?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}
  `,children:[fe.jsx("span",{className:"text-sm text-gray-700",children:Ee?.length>0?Ee.map(V=>x7(En,V)??V).join(", "):`Select ${B.label}`}),fe.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!Y&&fe.jsxs("div",{ref:de,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[B.search&&fe.jsx("div",{className:"sticky top-0 bg-white p-1",children:fe.jsx("input",{type:"text",value:Oe,onChange:V=>{Y||(Ke(V.target.value),Ut(0))},placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                focus:outline-none focus:ring-0`})}),Ze.length>0?Ze.map(([V,Ye],ut)=>fe.jsxs("label",{htmlFor:`${ft}-${V}`,className:`flex items-center gap-x-2 px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm
                        ${Ee?.includes(V)?"bg-indigo-50 text-indigo-600 font-medium":Ct===ut?"bg-gray-100":"hover:bg-gray-50"}`,children:[fe.jsx("input",{id:`${ft}-${V}`,type:"checkbox",checked:Ee?.includes(V),onChange:At=>{const se=At.target.checked?[...Ee,V]:Ee?.filter(nn=>nn!==V);Ot.setFieldValue(ft,se),Dt(se,B,qe),jt("onChange",B,`${ft}-${V}`)},onBlur:Ot.handleBlur,disabled:Y,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),Ye]},V)):fe.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),Ot.touched[ft]&&Ot.errors[ft]&&fe.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(Ot.errors[ft])})]})}function jJ({filePath:B,field_name:Y,sqlOpsUrls:we}){const[xe,Ne]=To.useState(null);return To.useEffect(()=>{if(!open||!we)return;let Ee=!0,Ce=null;return aX(B,we).then(de=>{Ee&&(Ce=de,Ne(de))}),()=>{Ee=!1,Ce&&URL.revokeObjectURL(Ce)}},[open,B,we]),xe?fe.jsx("img",{alt:Y,title:Y,src:xe,className:"h-24 w-24 object-cover rounded border border-dashed  cursor-pointer hover:opacity-90"}):null}function lX({formik:B,field:Y,sqlOpsUrls:we,module_refid:xe}){let Ne=Y?.name;const Ee=To.useRef(null),Ce=async de=>{const Oe=de.currentTarget.files;if(!(!Oe||Oe.length===0))try{const Ze=await cX(we,Oe),Ct=Y.multiple?Ze.map(Ke=>Ke.path):Ze[0]?.path;B.setFieldValue(Ne,Ct),Hk(Ct,Y,xe)}catch(Ze){console.error("File upload failed",Ze),B.setFieldError(Ne,"File upload failed")}};return fe.jsxs("div",{children:[fe.jsx("label",{className:"block text-sm font-semibold mb-1  transition-all duration-300 text-gray-700",children:Y.label}),fe.jsx("input",{ref:Ee,type:"file",accept:"image/*",className:"hidden",onChange:Ce}),fe.jsx("div",{onClick:()=>Ee.current?.click(),children:B.values[Ne]?fe.jsx(jJ,{field_name:Ne,filePath:B.values[Ne],sqlOpsUrls:we}):fe.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:fe.jsx("i",{className:"fa-solid fa-user"})})})]})}var E7={exports:{}},uX;function WJ(){return uX||(uX=1,function(B){(function(){var Y=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},we=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},xe=function(e,t){var o=Array.prototype.slice.call(e);return o.sort(t)},Ne=function(e,t){return Ee(function(o,r){return e.eq(t(o),t(r))})},Ee=function(e){return{eq:e}},Ce=Ee(function(e,t){return e===t}),de=Ce,Oe=function(e){return Ee(function(t,o){if(t.length!==o.length)return!1;for(var r=t.length,c=0;c<r;c++)if(!e.eq(t[c],o[c]))return!1;return!0})},Ze=function(e,t){return Ne(Oe(e),function(o){return xe(o,t)})},Ct=function(e){return Ee(function(t,o){var r=Object.keys(t),c=Object.keys(o);if(!Ze(de).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(t[b],o[b]))return!1}return!0})},Ke=Ee(function(e,t){if(e===t)return!0;var o=Y(e),r=Y(t);return o!==r?!1:we(o)?e===t:o==="array"?Oe(Ke).eq(e,t):o==="object"?Ct(Ke).eq(e,t):!1});const Ot=Object.getPrototypeOf,Ut=(e,t,o)=>o(e,t.prototype)?!0:e.constructor?.name===t.name,jt=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&Ut(e,String,(o,r)=>r.isPrototypeOf(o))?"string":t},Dt=e=>t=>jt(t)===e,qe=e=>t=>typeof t===e,En=e=>t=>e===t,ft=(e,t)=>Ye(e)&&Ut(e,t,(o,r)=>Ot(o)===r),V=Dt("string"),Ye=Dt("object"),ut=e=>ft(e,Object),At=Dt("array"),se=En(null),nn=qe("boolean"),Wn=En(void 0),Yt=e=>e==null,X=e=>!Yt(e),ce=qe("function"),Uo=qe("number"),dn=(e,t)=>{if(At(e)){for(let o=0,r=e.length;o<r;++o)if(!t(e[o]))return!1;return!0}return!1},_t=()=>{},A=(e,t)=>(...o)=>e(t.apply(null,o)),co=(e,t)=>o=>e(t(o)),it=e=>()=>e,Ro=e=>e,re=(e,t)=>e===t;function ae(e,...t){return(...o)=>{const r=t.concat(o);return e.apply(null,r)}}const tt=e=>t=>!e(t),St=e=>()=>{throw new Error(e)},wt=e=>e(),on=e=>{e()},pe=it(!1),Te=it(!0);class M{tag;value;static singletonNone=new M(!1);constructor(t,o){this.tag=t,this.value=o}static some(t){return new M(!0,t)}static none(){return M.singletonNone}fold(t,o){return this.tag?o(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?M.some(t(this.value)):M.none()}bind(t){return this.tag?t(this.value):M.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:M.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return X(t)?M.some(t):M.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const wn=Array.prototype.slice,sn=Array.prototype.indexOf,Un=Array.prototype.push,Tt=(e,t)=>sn.call(e,t),rs=(e,t)=>{const o=Tt(e,t);return o===-1?M.none():M.some(o)},Wt=(e,t)=>Tt(e,t)>-1,io=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return!0}return!1},hn=(e,t)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=t(u,c)}return r},Ae=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];t(c,o)}},nt=(e,t)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];t(r,o)}},gt=(e,t)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(t(f,c)?o:r).push(f)}return{pass:o,fail:r}},Xe=(e,t)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];t(u,r)&&o.push(u)}return o},ao=(e,t)=>{if(e.length===0)return[];{let o=t(e[0]);const r=[];let c=[];for(let u=0,f=e.length;u<f;u++){const b=e[u],v=t(b);v!==o&&(r.push(c),c=[]),o=v,c.push(b)}return c.length!==0&&r.push(c),r}},Qn=(e,t,o)=>(nt(e,(r,c)=>{o=t(o,r,c)}),o),Ho=(e,t,o)=>(Ae(e,(r,c)=>{o=t(o,r,c)}),o),oi=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(t(u,r))return M.some(u);if(o(u,r))break}return M.none()},No=(e,t)=>oi(e,t,pe),nl=(e,t)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(t(c,o))return M.some(o)}return M.none()},Gm=(e,t)=>{for(let o=e.length-1;o>=0;o--)if(t(e[o],o))return M.some(o);return M.none()},va=e=>{const t=[];for(let o=0,r=e.length;o<r;++o){if(!At(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Un.apply(t,e[o])}return t},wo=(e,t)=>va(hn(e,t)),Qa=(e,t)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(t(c,o)!==!0)return!1}return!0},gs=e=>{const t=wn.call(e,0);return t.reverse(),t},Ls=(e,t)=>Xe(e,o=>!Wt(t,o)),Su=(e,t)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=t(u,r)}return o},Oi=(e,t)=>{const o=wn.call(e,0);return o.sort(t),o},Xr=(e,t)=>t>=0&&t<e.length?M.some(e[t]):M.none(),Gs=e=>Xr(e,0),hr=e=>Xr(e,e.length-1),is=ce(Array.from)?Array.from:e=>wn.call(e),dc=(e,t)=>{for(let o=0;o<e.length;o++){const r=t(e[o],o);if(r.isSome())return r}return M.none()},Ja=(e,t)=>{const o=[],r=ce(t)?c=>io(o,u=>t(u,c)):c=>Wt(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},en=Object.keys,ho=Object.hasOwnProperty,qn=(e,t)=>{const o=en(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];t(f,u)}},mc=(e,t)=>Ia(e,(o,r)=>({k:r,v:t(o,r)})),Ia=(e,t)=>{const o={};return qn(e,(r,c)=>{const u=t(r,c);o[u.k]=u.v}),o},Zt=e=>(t,o)=>{e[o]=t},$l=(e,t,o,r)=>{qn(e,(c,u)=>{(t(c,u)?o:r)(c,u)})},ls=(e,t)=>{const o={},r={};return $l(e,t,Zt(o),Zt(r)),{t:o,f:r}},Il=(e,t)=>{const o={};return $l(e,t,Zt(o),_t),o},fc=(e,t)=>{const o=[];return qn(e,(r,c)=>{o.push(t(r,c))}),o},La=e=>fc(e,Ro),qo=(e,t)=>Pn(e,t)?M.from(e[t]):M.none(),Pn=(e,t)=>ho.call(e,t),Ko=(e,t)=>Pn(e,t)&&e[t]!==void 0&&e[t]!==null,ld=(e,t,o=Ke)=>Ct(o).eq(e,t),si={generate:e=>{if(!At(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],o={};return Ae(e,(r,c)=>{const u=en(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!At(b))throw new Error("case arguments must be an array");t.push(f),o[f]=(...v)=>{const S=v.length;if(S!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+S);return{fold:(...R)=>{if(R.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+R.length);return R[c].apply(null,v)},match:R=>{const P=en(R);if(t.length!==P.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+P.join(","));if(!Qa(t,ee=>Wt(P,ee)))throw new Error("Not all branches were specified when using match. Specified: "+P.join(", ")+`
Required: `+t.join(", "));return R[f].apply(null,v)},log:R=>{console.log(R,{constructors:t,constructor:f,params:v})}}}}),o}},rn=e=>{let t=e;return{get:()=>t,set:c=>{t=c}}},Fa=e=>{const t=u=>u(e),o=it(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Te,isError:pe,map:u=>Tr.value(u(e)),mapError:r,bind:t,exists:t,forall:t,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>M.some(e)};return c},Mr=e=>{const t=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:pe,isError:Te,map:t,mapError:r=>Tr.error(r(e)),bind:t,exists:pe,forall:Te,getOr:Ro,or:Ro,getOrThunk:wt,orThunk:wt,getOrDie:St(String(e)),each:_t,toOptional:M.none};return o},Tr={value:Fa,error:Mr,fromOption:(e,t)=>e.fold(()=>Mr(t),Fa)},tm=typeof window<"u"?window:Function("return this;")(),as=()=>{const e=window.crypto.getRandomValues(new Uint8Array(16));return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e},Ll=()=>{const e=as(),t=(o,r)=>{let c="";for(let u=o;u<=r;++u){const f=e[u].toString(16).padStart(2,"0");c+=f}return c};return`${t(0,3)}-${t(4,5)}-${t(6,7)}-${t(8,9)}-${t(10,15)}`},ud=(e,t,o)=>Math.min(Math.max(e,t),o),ol=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let $c=0;const rr=e=>{const o=new Date().getTime(),r=Math.floor(ol()*1e9);return $c++,e+"_"+r+$c+String(o)},Fl=()=>window.isSecureContext?window.crypto.randomUUID():Ll(),Eu=(e,t)=>t,Mt=(e,t)=>ut(e)&&ut(t)?Tu(e,t):t,ec=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<t.length;r++){const c=t[r];for(const u in c)Pn(c,u)&&(o[u]=e(o[u],c[u]))}return o},Tu=ec(Mt),Di=ec(Eu),jo=(e,t,o=re)=>e.exists(r=>o(r,t)),dd=(e,t,o=re)=>er(e,t,o).getOr(e.isNone()&&t.isNone()),gc=e=>{const t=[],o=r=>{t.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return t},er=(e,t,o)=>e.isSome()&&t.isSome()?M.some(o(e.getOrDie(),t.getOrDie())):M.none(),Ri=(e,t,o,r)=>e.isSome()&&t.isSome()&&o.isSome()?M.some(r(e.getOrDie(),t.getOrDie(),o.getOrDie())):M.none(),md=e=>e.bind(Ro),Ha=(e,t)=>e?M.some(t):M.none(),Lr=(e,t)=>{let o=t??tm;for(let r=0;r<e.length&&o!==void 0&&o!==null;++r)o=o[e[r]];return o},ri=(e,t)=>{const o=e.split(".");return Lr(o,t)};si.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Fr=e=>{const t=[],o=[];return Ae(e,r=>{r.fold(c=>{t.push(c)},c=>{o.push(c)})}),{errors:t,values:o}},ph=e=>{const t=rn(M.none()),o=()=>t.get().each(e);return{clear:()=>{o(),t.set(M.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(M.some(b))}}},nm=e=>{const t=rn(M.none()),o=()=>t.get().each(b=>clearInterval(b));return{clear:()=>{o(),t.set(M.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:b=>{o(),t.set(M.some(setInterval(b,e)))}}},Ic=()=>{const e=ph(_t);return{...e,on:o=>e.get().each(o)}},Ni=(e,t)=>e.substring(t),sl=(e,t,o)=>t===""||e.length>=t.length&&e.substr(o,o+t.length)===t,Km=(e,t)=>kn(e,t)?Ni(e,t.length):e,Ds=(e,t,o=0,r)=>{const c=e.indexOf(t,o);return c!==-1?Wn(r)?!0:c+t.length<=r:!1},kn=(e,t)=>sl(e,t,0),Qr=(e,t)=>sl(e,t,e.length-t.length),Jr=e=>t=>t.replace(e,""),Rs=Jr(/^\s+|\s+$/g),om=Jr(/^\s+/g),Hl=Jr(/\s+$/g),hs=e=>e.length>0,rl=e=>!hs(e),ai=(e,t)=>t<=0?"":new Array(t+1).join(e),ng=(e,t=10)=>{const o=parseInt(e,t);return isNaN(o)?M.none():M.some(o)},Rt=(e,t)=>{let o=null;return{cancel:()=>{se(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{se(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},t))}}},al=(e,t)=>{let o=null;const r=()=>{se(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},t)}}},ya=e=>{let t=!1,o;return(...r)=>(t||(t=!0,o=e.apply(null,r)),o)},Lc="\uFEFF",Fs=" ",og="…",tc=e=>e===Lc,Fc=e=>e.replace(/\uFEFF/g,""),Ym=e=>{const t={};return Ae(e,o=>{t[o]={}}),en(t)},sg=e=>e.length!==void 0,cl=Array.isArray,rg=e=>{if(cl(e))return e;{const t=[];for(let o=0,r=e.length;o<r;o++)t[o]=e[o];return t}},ku=(e,t,o)=>{if(!e)return!1;if(o=o||e,sg(e)){for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(Pn(e,r)&&t.call(o,e[r],r,e)===!1)return!1;return!0},il=(e,t)=>{const o=[];return ku(e,(r,c)=>{o.push(t(r,c,e))}),o},Au=(e,t)=>{const o=[];return ku(e,(r,c)=>{(!t||t(r,c,e))&&o.push(r)}),o},ht=(e,t)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===t)return o}return-1},zl=(e,t,o,r)=>{let c=Wn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=t.call(r,c,e[u],u);return c},sm=(e,t,o)=>{for(let r=0,c=e.length;r<c;r++)if(t.call(o,e[r],r,e))return r;return-1},ci=e=>e[e.length-1],hc=(e,t,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),v=c||!u&&f&&r("(min-device-width:768px)"),S=u||f&&!v,O=t.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,R=!S&&!v&&!O;return{isiPad:it(c),isiPhone:it(u),isTablet:it(v),isPhone:it(S),isTouch:it(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:it(O),isDesktop:it(R)}},fd=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(t))return r}},Ca=(e,t)=>{const o=fd(e,t);if(!o)return{major:0,minor:0};const r=c=>Number(t.replace(o,"$"+c));return ll(r(1),r(2))},Mi=(e,t)=>{const o=String(t).toLowerCase();return e.length===0?Vl():Ca(e,o)},Vl=()=>ll(0,0),ll=(e,t)=>({major:e,minor:t}),Wo={nu:ll,detect:Mi,unknown:Vl},gd=(e,t)=>dc(t.brands,o=>{const r=o.brand.toLowerCase();return No(e,c=>r===c.brand?.toLowerCase()).map(c=>({current:c.name,version:Wo.nu(parseInt(o.version,10),0)}))}),$=(e,t)=>{const o=String(t).toLowerCase();return No(e,r=>r.search(o))},G=(e,t)=>$(e,t).map(o=>{const r=Wo.detect(o.versionRegexes,t);return{current:o.name,version:r}}),ie=(e,t)=>$(e,t).map(o=>{const r=Wo.detect(o.versionRegexes,t);return{current:o.name,version:r}}),ze=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Qt=e=>t=>Ds(t,e),oo=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Ds(e,"edge/")&&Ds(e,"chrome")&&Ds(e,"safari")&&Ds(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ze],search:e=>Ds(e,"chrome")&&!Ds(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Ds(e,"msie")||Ds(e,"trident")},{name:"Opera",versionRegexes:[ze,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Qt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Qt("firefox")},{name:"Safari",versionRegexes:[ze,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Ds(e,"safari")||Ds(e,"mobile/"))&&Ds(e,"applewebkit")}],Zo=[{name:"Windows",search:Qt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Ds(e,"iphone")||Ds(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Qt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Qt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Qt("linux"),versionRegexes:[]},{name:"Solaris",search:Qt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Qt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Qt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kr={browsers:it(oo),oses:it(Zo)},ea="Edge",nc="Chromium",L="IE",te="Opera",he="Firefox",$e="Safari",bt=()=>Kt({current:void 0,version:Wo.unknown()}),Kt=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isEdge:r(ea),isChromium:r(nc),isIE:r(L),isOpera:r(te),isFirefox:r(he),isSafari:r($e)}},Hn={unknown:bt,nu:Kt},ko="Windows",uo="iOS",xa="Android",qs="Linux",_u="macOS",Xm="Solaris",rm="FreeBSD",Pi="ChromeOS",Qb=()=>Jb({current:void 0,version:Wo.unknown()}),Jb=e=>{const t=e.current,o=e.version,r=c=>()=>t===c;return{current:t,version:o,isWindows:r(ko),isiOS:r(uo),isAndroid:r(xa),isMacOS:r(_u),isLinux:r(qs),isSolaris:r(Xm),isFreeBSD:r(rm),isChromeOS:r(Pi)}},Vp={unknown:Qb,nu:Jb},e0={detect:(e,t,o)=>{const r=kr.browsers(),c=kr.oses(),u=t.bind(v=>gd(r,v)).orThunk(()=>G(r,e)).fold(Hn.unknown,Hn.nu),f=ie(c,e).fold(Vp.unknown,Vp.nu),b=hc(f,u,e,o);return{browser:u,os:f,deviceType:b}}},t0=e=>window.matchMedia(e).matches;let Zy=ya(()=>e0.detect(window.navigator.userAgent,M.from(window.navigator.userAgentData),t0));const Ul=()=>Zy(),Gy=(e,t)=>ri(e,t),qy=(e,t)=>{const o=Gy(e,t);if(o==null)throw new Error(e+" not available on this browser");return o},Up=Object.getPrototypeOf,jp=e=>qy("HTMLElement",e),IS=e=>{const t=ri("ownerDocument.defaultView",e);return Ye(e)&&(jp(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Up(e).constructor.name))},Ky=window.navigator.userAgent,Wp=Ul(),jl=Wp.browser,ii=Wp.os,am=Wp.deviceType,Yy=Ky.indexOf("Windows Phone")!==-1,po={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:jl.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!jl.isIE(),windowsPhone:Yy,browser:{current:jl.current,version:jl.version,isChromium:jl.isChromium,isEdge:jl.isEdge,isFirefox:jl.isFirefox,isIE:jl.isIE,isOpera:jl.isOpera,isSafari:jl.isSafari},os:{current:ii.current,version:ii.version,isAndroid:ii.isAndroid,isChromeOS:ii.isChromeOS,isFreeBSD:ii.isFreeBSD,isiOS:ii.isiOS,isLinux:ii.isLinux,isMacOS:ii.isMacOS,isSolaris:ii.isSolaris,isWindows:ii.isWindows},deviceType:{isDesktop:am.isDesktop,isiPad:am.isiPad,isiPhone:am.isiPhone,isPhone:am.isPhone,isTablet:am.isTablet,isTouch:am.isTouch,isWebView:am.isWebView}},Xy=/^\s*|\s*$/g,bh=e=>Yt(e)?"":(""+e).replace(Xy,""),tr=(e,t)=>t?t==="array"&&cl(e)?!0:typeof e===t:e!==void 0,LS=(e,t,o={})=>{const r=V(e)?e.split(t||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Zp=Pn,FS=(e,...t)=>{for(let o=0;o<t.length;o++){const r=t[o];for(const c in r)if(Pn(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},n0=function(e,t,o,r){r=r||this,e&&(o&&(e=e[o]),ku(e,(c,u)=>t.call(r,c,u,o)===!1?!1:(n0(c,t,o,r),!0)))},lt={trim:bh,isArray:cl,is:tr,toArray:rg,makeMap:LS,each:ku,map:il,grep:Au,inArray:ht,hasOwn:Zp,extend:FS,walk:n0,resolve:(e,t=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(t=t[o[r]],!!t);r++);return t},explode:(e,t)=>At(e)?e:e===""?[]:il(e.split(t||","),bh),_addCacheSuffix:e=>{const t=po.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},Hc=(e,t)=>{const r=(t||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Qm(r.childNodes[0])},ag=(e,t)=>{const r=(t||document).createElement(e);return Qm(r)},$i=(e,t)=>{const r=(t||document).createTextNode(e);return Qm(r)},Qm=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ne={fromHtml:Hc,fromTag:ag,fromText:$i,fromDom:Qm,fromPoint:(e,t,o)=>M.from(e.dom.elementFromPoint(t,o)).map(Qm)},pc=(e,t)=>{t.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},hd=(e,t)=>{t.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},qp=(e,t,o)=>{const r=e.document.createRange();return pc(r,t),hd(r,o),r},Jm=(e,t,o,r,c)=>{const u=e.document.createRange();return u.setStart(t.dom,o),u.setEnd(r.dom,c),u},Sa=si.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bc=(e,t,o)=>t(ne.fromDom(o.startContainer),o.startOffset,ne.fromDom(o.endContainer),o.endOffset),Kp=(e,t)=>t.match({domRange:o=>({ltr:it(o),rtl:M.none}),relative:(o,r)=>({ltr:ya(()=>qp(e,o,r)),rtl:ya(()=>M.some(qp(e,r,o)))}),exact:(o,r,c,u)=>({ltr:ya(()=>Jm(e,o,r,c,u)),rtl:ya(()=>M.some(Jm(e,c,u,o,r)))})}),Yp=(e,t)=>{const o=t.ltr();return o.collapsed?t.rtl().filter(c=>c.collapsed===!1).map(c=>Sa.rtl(ne.fromDom(c.endContainer),c.endOffset,ne.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>bc(e,Sa.ltr,o)):bc(e,Sa.ltr,o)},cg=(e,t)=>{const o=Kp(e,t);return Yp(e,o)};Sa.ltr,Sa.rtl;const vc=8,Xp=9,Wl=11,ig=1,Qp=3,zc=(e,t)=>{const o=e.dom;if(o.nodeType!==ig)return!1;{const r=o;if(r.matches!==void 0)return r.matches(t);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(t);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(t);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},Jp=e=>e.nodeType!==ig&&e.nodeType!==Xp&&e.nodeType!==Wl||e.childElementCount===0,ul=(e,t)=>{const o=t===void 0?document:t.dom;return Jp(o)?[]:hn(o.querySelectorAll(e),ne.fromDom)},pd=(e,t)=>{const o=t===void 0?document:t.dom;return Jp(o)?M.none():M.from(o.querySelector(e)).map(ne.fromDom)},no=(e,t)=>e.dom===t.dom,oc=(e,t)=>{const o=e.dom,r=t.dom;return o===r?!1:o.contains(r)},ef=zc,o0=(e,t)=>{const o=[],r=u=>(o.push(u),t(u));let c=t(e);do c=c.bind(r);while(c.isSome());return o},jn=e=>e.dom.nodeName.toLowerCase(),Ou=e=>e.dom.nodeType,pr=e=>t=>Ou(t)===e,dl=e=>Ou(e)===vc||jn(e)==="#comment",ml=e=>Hs(e)&&IS(e.dom),Hs=pr(ig),Ao=pr(Qp),Jy=pr(Xp),e2=pr(Wl),br=e=>t=>Hs(t)&&jn(t)===e,Ii=e=>ne.fromDom(e.dom.ownerDocument),Li=e=>Jy(e)?e:Ii(e),vr=e=>ne.fromDom(Li(e).dom.documentElement),fl=e=>ne.fromDom(Li(e).dom.defaultView),sc=e=>M.from(e.dom.parentNode).map(ne.fromDom),Vc=e=>M.from(e.dom.parentElement).map(ne.fromDom),wa=(e,t)=>{const o=ce(t)?t:pe;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ne.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Mo=e=>{const t=o=>Xe(o,r=>!no(e,r));return sc(e).map(Ns).map(t).getOr([])},li=e=>M.from(e.dom.previousSibling).map(ne.fromDom),rc=e=>M.from(e.dom.nextSibling).map(ne.fromDom),ta=e=>gs(o0(e,li)),Hr=e=>o0(e,rc),Ns=e=>hn(e.dom.childNodes,ne.fromDom),Fi=(e,t)=>{const o=e.dom.childNodes;return M.from(o[t]).map(ne.fromDom)},zr=e=>Fi(e,0),ar=e=>Fi(e,e.dom.childNodes.length-1),bd=e=>e.dom.childNodes.length,e1=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return ne.fromDom(t)},vh=e=>e2(e)&&X(e.dom.host),Vr=e=>ne.fromDom(e.dom.getRootNode()),t1=e=>vh(e)?e:e1(Li(e)),s0=e=>vh(e)?e:ne.fromDom(Li(e).dom.body),im=e=>{const t=Vr(e);return vh(t)?M.some(t):M.none()},Cn=e=>ne.fromDom(e.dom.host),n1=e=>{if(X(e.target)){const t=ne.fromDom(e.target);if(Hs(t)&&Pr(t)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return Gs(o)}}return M.from(e.target)},Pr=e=>X(e.dom.shadowRoot),na=(e,t,o,r,c,u,f)=>({target:e,x:t,y:o,stop:r,prevent:c,kill:u,raw:f}),oa=e=>{const t=ne.fromDom(n1(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=A(r,o);return na(t,e.clientX,e.clientY,o,r,c,e)},ps=(e,t)=>o=>{e(o)&&t(oa(o))},vd=(e,t,o,r,c)=>{const u=ps(o,r);return e.dom.addEventListener(t,u,c),{unbind:ae(ui,e,t,u,c)}},yh=(e,t,o,r)=>vd(e,t,o,r,!1),ui=(e,t,o,r)=>{e.dom.removeEventListener(t,o,r)},gl=Te,lg=(e,t,o)=>yh(e,t,gl,o),Ch=()=>ne.fromDom(document),ug=(e,t=!1)=>e.dom.focus({preventScroll:t}),Zl=e=>{const t=Vr(e).dom;return e.dom===t.activeElement},Hi=(e=Ch())=>M.from(e.dom.activeElement).map(ne.fromDom),o1=e=>Hi(Vr(e)).filter(t=>e.dom.contains(t.dom)),da=(e,t)=>{sc(e).each(r=>{r.dom.insertBefore(t.dom,e.dom)})},di=(e,t)=>{rc(e).fold(()=>{sc(e).each(c=>{yo(c,t)})},r=>{da(r,t)})},Gl=(e,t)=>{zr(e).fold(()=>{yo(e,t)},r=>{e.dom.insertBefore(t.dom,r.dom)})},yo=(e,t)=>{e.dom.appendChild(t.dom)},Uc=(e,t)=>{da(e,t),yo(t,e)},r0=(e,t)=>{Ae(t,o=>{da(e,o)})},dg=(e,t)=>{Ae(t,(o,r)=>{const c=r===0?e:t[r-1];di(c,o)})},mi=(e,t)=>{Ae(t,o=>{yo(e,o)})},Tn=(e,t,o)=>{if(V(o)||nn(o)||Uo(o))e.setAttribute(t,o+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},Ts=(e,t,o)=>{Tn(e.dom,t,o)},sa=(e,t)=>{const o=e.dom;qn(t,(r,c)=>{Tn(o,c,r)})},bs=(e,t)=>{const o=e.dom.getAttribute(t);return o===null?void 0:o},fi=(e,t)=>M.from(bs(e,t)),ws=(e,t)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(t):!1},cr=(e,t)=>{e.dom.removeAttribute(t)},tf=e=>{const t=e.dom.attributes;return t==null||t.length===0},Jn=e=>Ho(e.dom.attributes,(t,o)=>(t[o.name]=o.value,t),{}),zi=e=>{e.dom.textContent="",Ae(Ns(e),t=>{Xo(t)})},Xo=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},yc=e=>{const t=Ns(e);t.length>0&&dg(e,t),Xo(e)},yr=(e,t)=>ne.fromDom(e.dom.cloneNode(t)),Cr=e=>yr(e,!1),ql=e=>yr(e,!0),nf=(e,t)=>{const o=ne.fromTag(t),r=Jn(e);return sa(o,r),o},Du=(e,t)=>{const o=nf(e,t);di(e,o);const r=Ns(e);return mi(o,r),Xo(e),o},yd=(e,t)=>{const r=(t||document).createElement("div");return r.innerHTML=e,Ns(ne.fromDom(r))},Cd=e=>hn(e,ne.fromDom),ma=e=>e.dom.innerHTML,Ru=(e,t)=>{const r=Ii(e).dom,c=ne.fromDom(r.createDocumentFragment()),u=yd(t,r);mi(c,u),zi(e),yo(e,c)},t2=e=>{const t=ne.fromTag("div"),o=ne.fromDom(e.dom.cloneNode(!0));return yo(t,o),ma(t)},xd=e=>e.style!==void 0&&ce(e.style.getPropertyValue),$o=e=>{const t=Ao(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const o=t.ownerDocument;return im(ne.fromDom(t)).fold(()=>o.body.contains(t),co($o,Cn))},s1=(e,t,o)=>{if(!V(o))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);xd(e)&&e.style.setProperty(t,o)},of=(e,t)=>{xd(e)&&e.style.removeProperty(t)},Ea=(e,t,o)=>{const r=e.dom;s1(r,t,o)},Cc=(e,t)=>{const o=e.dom;qn(t,(r,c)=>{s1(o,c,r)})},Vs=(e,t)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(t);return c===""&&!$o(e)?Nu(o,t):c},Nu=(e,t)=>xd(e)?e.style.getPropertyValue(t):"",ir=(e,t)=>{const o=e.dom,r=Nu(o,t);return M.from(r).filter(c=>c.length>0)},sf=e=>{const t={},o=e.dom;if(xd(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);t[c]=o.style[c]}return t},xh=(e,t)=>{const o=e.dom;of(o,t),jo(fi(e,"style").map(Rs),"")&&cr(e,"style")},r1=e=>e.dom.offsetWidth,hl=((e,t)=>{const o=(b,v)=>{if(!Uo(v)&&!v.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+v);const S=b.dom;xd(S)&&(S.style[e]=v+"px")},r=b=>{const v=t(b);if(v<=0||v===null){const S=Vs(b,e);return parseFloat(S)||0}return v},c=r,u=(b,v)=>Ho(v,(S,O)=>{const R=Vs(b,O),P=R===void 0?0:parseInt(R,10);return isNaN(P)?S:S+P},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,v,S)=>{const O=u(b,S);return v>O?v-O:0}}})("height",e=>{const t=e.dom;return $o(e)?t.getBoundingClientRect().height:t.offsetHeight}),n2=e=>hl.get(e),a1=(e,t)=>({left:e,top:t,translate:(r,c)=>a1(e+r,t+c)}),pl=a1,a0=e=>{const t=e.getBoundingClientRect();return pl(t.left,t.top)},rf=(e,t)=>e!==void 0?e:t!==void 0?t:0,mg=e=>{const t=e.dom.ownerDocument,o=t.body,r=t.defaultView,c=t.documentElement;if(o===e.dom)return pl(o.offsetLeft,o.offsetTop);const u=rf(r?.pageYOffset,c.scrollTop),f=rf(r?.pageXOffset,c.scrollLeft),b=rf(c.clientTop,o.clientTop),v=rf(c.clientLeft,o.clientLeft);return fg(e).translate(f-v,u-b)},fg=e=>{const t=e.dom,r=t.ownerDocument.body;return r===t?pl(r.offsetLeft,r.offsetTop):$o(e)?a0(t):pl(0,0)},c1=e=>{const t=e!==void 0?e.dom:document,o=t.body.scrollLeft||t.documentElement.scrollLeft,r=t.body.scrollTop||t.documentElement.scrollTop;return pl(o,r)},c0=(e,t,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,t)},Vi=(e,t)=>{Ul().browser.isSafari()&&ce(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},o2=(e,t)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+t+" value of a "+t+" node");return r(u).getOr("")},r=u=>e(u)?M.from(u.dom.nodeValue):M.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+t+" value of a "+t+" node");u.dom.nodeValue=f}}},Sd=(e,t)=>{const r=document.createDocumentFragment();return Ae(e,c=>{r.appendChild(c.dom)}),ne.fromDom(r)},Io=o2(Ao,"text"),Ta=e=>Io.get(e),Kl=e=>Io.getOption(e),i1=(e,t)=>Io.set(e,t),wd=(e,t)=>{const o=bs(e,t);return o===void 0||o===""?[]:o.split(" ")},l1=(e,t,o)=>{const c=wd(e,t).concat([o]);return Ts(e,t,c.join(" ")),!0},i0=(e,t,o)=>{const r=Xe(wd(e,t),c=>c!==o);return r.length>0?Ts(e,t,r.join(" ")):cr(e,t),!1};var Yl=(e,t,o,r,c)=>e(o,r)?M.some(o):ce(c)&&c(o)?M.none():t(o,r,c);const Xl=(e,t,o)=>{let r=e.dom;const c=ce(o)?o:pe;for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r);if(t(u))return M.some(u);if(c(u))break}return M.none()},Go=(e,t,o)=>Yl((c,u)=>u(c),Xl,e,t,o),l0=(e,t)=>{const o=e.dom;return o.parentNode?Ms(ne.fromDom(o.parentNode),r=>!no(e,r)&&t(r)):M.none()},Ms=(e,t)=>{const o=c=>t(ne.fromDom(c));return No(e.dom.childNodes,o).map(ne.fromDom)},af=(e,t)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ne.fromDom(r.childNodes[c]);if(t(u))return M.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return M.none()};return o(e.dom)},lr=(e,t,o)=>Xl(e,r=>zc(r,t),o),Ql=(e,t)=>pd(t,e),fa=(e,t,o)=>Yl((c,u)=>zc(c,u),lr,e,t,o),Mu=e=>e.dom.classList!==void 0,Sh=e=>wd(e,"class"),u1=(e,t)=>l1(e,"class",t),d1=(e,t)=>i0(e,"class",t),s2=(e,t)=>Wt(Sh(e),t)?d1(e,t):u1(e,t),xc=(e,t)=>{Mu(e)?e.dom.classList.add(t):u1(e,t)},bl=e=>{(Mu(e)?e.dom.classList:Sh(e)).length===0&&cr(e,"class")},ur=(e,t)=>{Mu(e)?e.dom.classList.remove(t):d1(e,t),bl(e)},Ur=(e,t)=>{const o=Mu(e)?e.dom.classList.toggle(t):s2(e,t);return bl(e),o},wh=(e,t)=>Mu(e)&&e.dom.classList.contains(t),gg=(e,t)=>{Ae(t,o=>{xc(e,o)})},Eh=(e,t)=>{Ae(t,o=>{ur(e,o)})},u0=e=>fa(e,"[contenteditable]"),Ui=(e,t=!1)=>$o(e)?e.dom.isContentEditable:u0(e).fold(it(t),o=>zS(o)==="true"),zS=e=>e.dom.contentEditable,w=(e,t)=>{e.dom.contentEditable=t?"true":"false"},k=(e,t,o)=>Xe(wa(e,o),t),F=(e,t)=>Xe(Ns(e),t),q=(e,t)=>{let o=[];return Ae(Ns(e),r=>{t(r)&&(o=o.concat([r])),o=o.concat(q(r,t))}),o},ge=(e,t,o)=>k(e,r=>zc(r,t),o),Fe=(e,t)=>ul(t,e),xt=(e,t,o)=>Xl(e,t,o).isSome(),an=(e,t)=>l0(e,t).isSome(),In=(e,t)=>af(e,t).isSome(),Gn=(e,t)=>xt(e,ae(no,t)),cs=(e,t,o)=>lr(e,t,o).isSome(),ks=(e,t,o)=>fa(e,t,o).isSome(),dr=e=>ce(e)?e:pe,jc=(e,t,o)=>{let r=e.dom;const c=dr(o);for(;r.parentNode;){r=r.parentNode;const u=ne.fromDom(r),f=t(u);if(f.isSome())return f;if(c(u))break}return M.none()},vl=(e,t,o)=>{const r=t(e),c=dr(o);return r.orThunk(()=>c(e)?M.none():jc(e,t,c))},Pu=e=>Kl(e).filter(t=>t.trim().length!==0||t.indexOf(Fs)>-1).isSome(),ji=e=>ml(e)&&bs(e,"contenteditable")==="false",m1=["img","br"],cf=e=>Pu(e)||Wt(m1,jn(e))||ji(e),hg=e=>af(e,cf),bg={create:(e,t,o,r)=>({start:e,soffset:t,finish:o,foffset:r})},lf=si.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Th=(e,t,o,r)=>e.fold(t,o,r),r2=e=>e.fold(Ro,Ro,Ro),a2=lf.before,Co=lf.on,Us=lf.after,Ys={before:a2,on:Co,after:Us,cata:Th,getStart:r2},ka=si.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),kh=e=>ka.exact(e.start,e.soffset,e.finish,e.foffset),vg=e=>e.match({domRange:t=>ne.fromDom(t.startContainer),relative:(t,o)=>Ys.getStart(t),exact:(t,o,r,c)=>t}),Ah=ka.domRange,_h=ka.relative,VS=ka.exact,lm=e=>{const t=vg(e);return fl(t)},f1=bg.create,uf={domRange:Ah,relative:_h,exact:VS,exactFromRange:kh,getWin:lm,range:f1},Uk=(e,t,o)=>M.from(e.caretPositionFromPoint?.(t,o)).bind(r=>{if(r.offsetNode===null)return M.none();const c=e.createRange();return c.setStart(r.offsetNode,r.offset),c.collapse(),M.some(c)}),Br=(e,t,o)=>M.from(e.caretRangeFromPoint?.(t,o)),Ar=(e,t,o)=>e.caretPositionFromPoint?Uk(e,t,o):e.caretRangeFromPoint?Br(e,t,o):M.none(),df=(e,t,o)=>{const r=e.document;return Ar(r,t,o).map(c=>bg.create(ne.fromDom(c.startContainer),c.startOffset,ne.fromDom(c.endContainer),c.endOffset))},um=(e,t)=>{const o=jn(e);return o==="input"?Ys.after(e):Wt(["br","img"],o)?t===0?Ys.before(e):Ys.after(e):Ys.on(e,t)},c2=(e,t)=>{const o=e.fold(Ys.before,um,Ys.after),r=t.fold(Ys.before,um,Ys.after);return uf.relative(o,r)},za=(e,t,o,r)=>{const c=um(e,t),u=um(o,r);return uf.relative(c,u)},i2=e=>e.match({domRange:t=>{const o=ne.fromDom(t.startContainer),r=ne.fromDom(t.endContainer);return za(o,t.startOffset,r,t.endOffset)},relative:c2,exact:za}),mf=e=>{const t=uf.getWin(e).dom,o=(c,u,f,b)=>Jm(t,c,u,f,b),r=i2(e);return cg(t,r).match({ltr:o,rtl:o})},d0=(e,t,o)=>df(e,t,o),Wi=e=>{const t=e===void 0?window:e;return Ul().browser.isFirefox()?M.none():M.from(t.visualViewport)},l2=(e,t,o,r)=>({x:e,y:t,width:o,height:r,right:e+o,bottom:t+r}),gi=e=>{const t=e===void 0?window:e,o=t.document,r=c1(ne.fromDom(o));return Wi(t).fold(()=>{const c=t.document.documentElement,u=c.clientWidth,f=c.clientHeight;return l2(r.left,r.top,u,f)},c=>l2(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))};class nr{rootNode;node;constructor(t,o){this.node=t,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,o,r,c){if(t){if(!c&&t[o])return t[o];if(t!==this.rootNode){let u=t[r];if(u)return u;for(let f=t.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(t,o){if(t){const r=t.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=t.parentNode;if(c&&c!==this.rootNode)return c}}}const m0=/^[ \t\r\n]*$/,Oh=e=>m0.test(e),US=e=>{for(const t of e)if(!tc(t))return!1;return!0},u2=e=>" \f	\v".indexOf(e)!==-1,jS=e=>e===`
`||e==="\r",WS=(e,t)=>t<e.length&&t>=0?jS(e[t]):!1,f0=(e,t=4,o=!0,r=!0)=>{const c=ai(" ",t),u=e.replace(/\t/g,c);return Ho(u,(b,v)=>u2(v)||v===Fs?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||WS(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+Fs}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:jS(v),str:b.str+v},{pcIsSpace:!1,str:""}).str},Dh=e=>t=>!!t&&t.nodeType===e,g0=e=>!!e&&!Object.getPrototypeOf(e),kt=Dh(1),Wc=e=>kt(e)&&ml(ne.fromDom(e)),jk=e=>kt(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Sc=e=>{const t=e.toLowerCase();return o=>X(o)&&o.nodeName.toLowerCase()===t},yl=e=>{const t=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return Wt(t,r)}return!1}},h0=(e,t)=>{const o=t.toLowerCase().split(" ");return r=>{if(kt(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},Wk=e=>t=>kt(t)&&t.hasAttribute(e),ff=e=>kt(e)&&e.hasAttribute("data-mce-bogus"),Zk=e=>kt(e)&&e.getAttribute("data-mce-bogus")==="all",Zc=e=>kt(e)&&e.tagName==="TABLE",ZS=e=>t=>!!(Wc(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),Cl=yl(["textarea","input"]),dt=Dh(3),d2=Dh(4),jr=Dh(7),Zn=Dh(8),dm=Dh(9),Rh=Dh(11),js=Sc("br"),xl=Sc("img"),g1=Sc("a"),hi=ZS("true"),As=ZS("false"),mm=e=>Wc(e)&&e.isContentEditable&&X(e.parentElement)&&!e.parentElement.isContentEditable,Nh=yl(["td","th"]),m2=yl(["td","th","caption"]),f2=Sc("template"),Sl=yl(["video","audio","object","embed"]),h1=Sc("li"),p1=Sc("details"),Gk=Sc("summary"),g2="uc-video",b1=e=>e.nodeName.toLowerCase()===g2,h2={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},p0=(e,t,o)=>{const r=ne.fromDom(t),c=ne.fromDom(e),u=o.getWhitespaceElements();return xt(c,b=>Pn(u,jn(b)),ae(no,r))},qk=e=>kt(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Kk=(e,t)=>kt(e)&&Pn(t.getNonEmptyElements(),e.nodeName),p2=Wk("data-mce-bookmark"),Yk=e=>Vc(ne.fromDom(e)).exists(t=>!Ui(t)),v1=(e,t,o)=>Oh(e.data)&&!p0(e,t,o),u5=(e,t,o,r)=>dt(e)&&!v1(e,t,o)&&(!r.includeZwsp||!US(e.data)),pi=(e,t,o,r)=>ce(r.isContent)&&r.isContent(t)||Kk(t,e)||p2(t)||qk(t)||u5(t,o,e,r)||As(t)||hi(t)&&Yk(t),bn=(e,t,o)=>{const r={...h2,...o};if(r.checkRootAsContent&&pi(e,t,t,r))return!1;let c=t.firstChild,u=0;if(!c)return!0;const f=new nr(c,t);do{if(r.skipBogus&&kt(c)){const b=c.getAttribute("data-mce-bogus");if(b){c=f.next(b==="all");continue}}if(Zn(c)){c=f.next(!0);continue}if(js(c)){u++,c=f.next();continue}if(pi(e,c,t,r))return!1;c=f.next()}while(c);return u<=1},or=(e,t,o)=>bn(e,t.dom,{checkRootAsContent:!0,...o}),Mh=(e,t,o)=>pi(e,t,t,{includeZwsp:h2.includeZwsp,...o}),GS=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},yg=e=>GS(e)!=="html",Ph=e=>yg(e.nodeName),b2=e=>GS(e.nodeName),Cg=["svg","math"],qS=()=>{const e=Ic(),t=()=>e.get().map(b2).getOr("html");return{track:c=>(Ph(c)?e.set(c):e.get().exists(u=>!u.contains(c))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},Ed="data-mce-block",KS=e=>Xe(en(e),t=>!/[A-Z]/.test(t)),v2=e=>hn(KS(e),t=>{const o=CSS.escape(t);return`${o}:`+hn(Cg,r=>`not(${r} ${o})`).join(":")}).join(","),zs=(e,t)=>X(t.querySelector(e))?(t.setAttribute(Ed,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Ed),!1),wl=(e,t)=>{const o=v2(e.getTransparentElements()),r=v2(e.getBlockElements());return Xe(t.querySelectorAll(o),c=>zs(r,c))},wc=(e,t,o)=>{const r=o?"lastChild":"firstChild";for(let c=t[r];c;c=c[r])if(bn(e,c,{checkRootAsContent:!0})){c.parentNode?.removeChild(c);return}},Bh=(e,t,o)=>{const r=document.createRange(),c=t.parentNode;if(c){r.setStartBefore(t),r.setEndBefore(o);const u=r.extractContents();wc(e,u,!0),r.setStartAfter(o),r.setEndAfter(t);const f=r.extractContents();wc(e,f,!1),bn(e,u,{checkRootAsContent:!0})||c.insertBefore(u,t),bn(e,o,{checkRootAsContent:!0})||c.insertBefore(o,t),bn(e,f,{checkRootAsContent:!0})||c.insertBefore(f,t),c.removeChild(t)}},Ec=(e,t,o)=>{const r=e.getBlockElements(),c=ne.fromDom(t),u=b=>jn(b)in r,f=b=>no(b,c);Ae(Cd(o),b=>{Xl(b,u,f).each(v=>{const S=F(b,O=>u(O)&&!e.isValidChild(jn(v),jn(O)));if(S.length>0){const O=Vc(v);Ae(S,R=>{Xl(R,u,f).each(P=>{Bh(e,P.dom,R.dom)})}),O.each(R=>wl(e,R.dom))}})})},xg=(e,t,o)=>{Ae([...o,...Xs(e,t)?[t]:[]],r=>Ae(Fe(ne.fromDom(r),r.nodeName.toLowerCase()),c=>{Jl(e,c.dom)&&yc(c)}))},ra=(e,t)=>{const o=wl(e,t);Ec(e,t,o),xg(e,t,o)},Tc=(e,t)=>{if(y1(e,t)){const o=v2(e.getBlockElements());zs(o,t)}},b0=(e,t,o)=>{const r=u=>no(u,ne.fromDom(t)),c=wa(ne.fromDom(o),r);Xr(c,c.length-2).filter(Hs).fold(()=>ra(e,t),u=>ra(e,u.dom))},ot=e=>e.hasAttribute(Ed),Gc=(e,t)=>Pn(e.getTransparentElements(),t),y1=(e,t)=>kt(t)&&Gc(e,t.nodeName),Xs=(e,t)=>y1(e,t)&&ot(t),Jl=(e,t)=>y1(e,t)&&!ot(t),bi=(e,t)=>t.type===1&&Gc(e,t.name)&&V(t.attr(Ed)),Xk=Ul().browser,Td=e=>No(e,Hs),YS=e=>Xk.isFirefox()&&jn(e)==="table"?Td(Ns(e)).filter(t=>jn(t)==="caption").bind(t=>Td(Hr(t)).map(o=>{const r=o.dom.offsetTop,c=t.dom.offsetTop,u=t.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,qc=(e,t)=>e.children&&Wt(e.children,t),zo=(e,t,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,t){if(o===e&&t.getBoundingClientRect&&Vs(ne.fromDom(e),"position")==="static"){const b=t.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=t;for(;f&&f!==o&&f.nodeType&&!qc(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=t.parentNode;f&&f!==o&&f.nodeType&&!qc(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=YS(ne.fromDom(t))}return{x:r,y:c}},Bu=(e,t)=>{const o=t.crossOrigin;return t.contentCssCors?"anonymous":ce(o)?o(e):void 0},$h=(e,t={})=>{let o=0;const r={},c=ne.fromDom(e),u=Li(c),f=ye=>{t.referrerPolicy=ye},b=ye=>{t.contentCssCors=ye},v=ye=>{t.crossOrigin=ye},S=ye=>{yo(t1(c),ye)},O=ye=>{const Se=t1(c);Ql(Se,"#"+ye).each(Xo)},R=ye=>qo(r,ye).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),P=ye=>new Promise((Se,Ve)=>{let et;const Pt=lt._addCacheSuffix(ye),un=R(Pt);r[Pt]=un,un.count++;const He=(Rn,go)=>{Ae(Rn,on),un.status=go,un.passed=[],un.failed=[],et&&(et.onload=null,et.onerror=null,et=null)},Me=()=>He(un.passed,2),Ue=()=>He(un.failed,3);if(Se&&un.passed.push(Se),Ve&&un.failed.push(Ve),un.status===1)return;if(un.status===2){Me();return}if(un.status===3){Ue();return}un.status=1;const Nt=ne.fromTag("link",u.dom);sa(Nt,{rel:"stylesheet",type:"text/css",id:un.id});const Dn=Bu(ye,t);Dn!==void 0&&Ts(Nt,"crossOrigin",Dn),t.referrerPolicy&&Ts(Nt,"referrerpolicy",t.referrerPolicy),et=Nt.dom,et.onload=Me,et.onerror=Ue,S(Nt),Ts(Nt,"href",Pt)}),z=(ye,Se)=>{const Ve=R(ye);r[ye]=Ve,Ve.count++;const et=ne.fromTag("style",u.dom);sa(et,{rel:"stylesheet",type:"text/css",id:Ve.id,"data-mce-key":ye}),et.dom.innerHTML=Se,S(et)},ee=ye=>Promise.allSettled(hn(ye,Ve=>P(Ve).then(it(Ve)))).then(Ve=>{const et=gt(Ve,Pt=>Pt.status==="fulfilled");return et.fail.length>0?Promise.reject(hn(et.fail,Pt=>Pt.reason)):hn(et.pass,Pt=>Pt.value)}),W=ye=>{const Se=lt._addCacheSuffix(ye);qo(r,Se).each(Ve=>{--Ve.count===0&&(delete r[Se],O(Ve.id))})};return{load:P,loadRawCss:z,loadAll:ee,unload:W,unloadRawCss:ye=>{qo(r,ye).each(Se=>{--Se.count===0&&(delete r[ye],O(Se.id))})},unloadAll:ye=>{Ae(ye,Se=>{W(Se)})},_setReferrerPolicy:f,_setContentCssCors:b,_setCrossOrigin:v}},y2=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=Vr(o).dom;return M.from(e.get(u)).getOrThunk(()=>{const f=$h(u,r);return e.set(u,f),f})}}})(),C2=e=>e.nodeName.toLowerCase()==="span",eu=(e,t)=>X(e)&&(Mh(t,e)||t.isInline(e.nodeName.toLowerCase())),v0=(e,t,o)=>{const r=new nr(e,t).prev(!1),c=new nr(e,t).next(!1),u=Wn(r)||eu(r,o),f=Wn(c)||eu(c,o);return u&&f},Kc=e=>C2(e)&&e.getAttribute("data-mce-type")==="bookmark",Qk=(e,t,o)=>dt(e)&&e.data.length>0&&v0(e,t,o),De=e=>kt(e)?e.childNodes.length>0:!1,Zi=e=>Rh(e)||dm(e),C1=(e,t,o,r)=>{const c=r||t;if(kt(t)&&Kc(t))return t;const u=t.childNodes;for(let f=u.length-1;f>=0;f--)C1(e,u[f],o,c);if(kt(t)){const f=t.childNodes;f.length===1&&Kc(f[0])&&t.parentNode?.insertBefore(f[0],t)}return!Zi(t)&&!Mh(o,t)&&!De(t)&&!Qk(t,c,o)&&e.remove(t),t},Ws=lt.makeMap,kc=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,us=/[<>&\"\']/g,XS=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,gf={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},hf={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Ih={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},x1=e=>{const t=ne.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},x2=(e,t)=>{const o={};if(e){const r=e.split(",");t=t||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],t));if(!hf[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},S2=x2("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),pf=(e,t)=>e.replace(t?kc:Wr,o=>hf[o]||o),Lh=e=>(""+e).replace(us,t=>hf[t]||t),QS=(e,t)=>e.replace(t?kc:Wr,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":hf[o]||"&#"+o.charCodeAt(0)+";"),w2=(e,t,o)=>{const r=o||S2;return e.replace(t?kc:Wr,c=>hf[c]||r[c]||c)},vi={encodeRaw:pf,encodeAllRaw:Lh,encodeNumeric:QS,encodeNamed:w2,getEncodeFunc:(e,t)=>{const o=x2(t)||S2,r=(f,b)=>f.replace(b?kc:Wr,v=>hf[v]!==void 0?hf[v]:o[v]!==void 0?o[v]:v.length>1?"&#"+((v.charCodeAt(0)-55296)*1024+(v.charCodeAt(1)-56320)+65536)+";":"&#"+v.charCodeAt(0)+";"),c=(f,b)=>w2(f,b,o),u=Ws(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?t?c:w2:u.numeric?QS:pf},decode:e=>e.replace(XS,(t,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):gf[o]||String.fromCharCode(o)):Ih[t]||S2[t]||x1(t))},mr=(e,t)=>(e=lt.trim(e),e?e.split(t||" "):[]),bf=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),S1=e=>Ye(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",Yc=e=>{const t=o=>At(o)?hn(o,t):S1(o)?new RegExp(o.source,o.flags):Ye(o)?mc(o,t):o;return t(e)},Fh=e=>{const t=/^(~)?(.+)$/;return wo(mr(e,","),o=>{const r=t.exec(o);if(r){const u=r[1]==="~"?"span":"div",f=r[2];return[{cloneName:u,name:f}]}else return[]})},$r=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),y0=e=>{let t,o;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",o+=" audio canvas command data datalist mark meter output picture progress template time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(o=[o,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const r=[t,o].join(" ");return{blockContent:t,phrasingContent:o,flowContent:r}},Gi=e=>{const{blockContent:t,phrasingContent:o,flowContent:r}=y0(e),c=u=>Object.freeze(u.split(" "));return Object.freeze({blockContent:c(t),phrasingContent:c(o),flowContent:c(r)})},tu={html4:ya(()=>Gi("html4")),html5:ya(()=>Gi("html5")),"html5-strict":ya(()=>Gi("html5-strict"))},E2=(e,t)=>{const{blockContent:o,phrasingContent:r,flowContent:c}=tu[e]();return t==="blocks"?M.some(o):t==="phrasing"?M.some(r):t==="flow"?M.some(c):M.none()},aa=e=>{const t=$r(e),{phrasingContent:o,flowContent:r}=y0(e),c={},u=(v,S,O)=>{c[v]={attributes:Su(S,it({})),attributesOrder:S,children:Su(O,it({}))}},f=(v,S="",O="")=>{const R=mr(O),P=mr(v);let z=P.length;const ee=[...t,...mr(S)];for(;z--;)u(P[z],ee.slice(),R)},b=(v,S)=>{const O=mr(v),R=mr(S);let P=O.length;for(;P--;){const z=c[O[P]];for(let ee=0,W=R.length;ee<W;ee++)z.attributes[R[ee]]={},z.attributesOrder.push(R[ee])}};return e!=="html5-strict"&&(Ae(mr("acronym applet basefont big font strike tt"),O=>{f(O,"",o)}),Ae(mr("center dir isindex noframes"),O=>{f(O,"",r)})),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset property"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",r),f("dd div","",r),f("address dt caption","",e==="html4"?o:r),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),f("blockquote","cite",r),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",r),f("dl","","dt dd"),f("a","href target rel media hreflang type",e==="html4"?o:r),f("q","cite",o),f("ins del","cite datetime",r),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",r),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[r,"param"].join(" ")),f("param","name value"),f("map","name",[r,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",r),f("th","colspan rowspan headers scope abbr",r),f("form","accept-charset action autocomplete enctype method name novalidate target",r),f("fieldset","disabled form name",[r,"legend"].join(" ")),f("label","form for",o),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?r:o),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[r,"li"].join(" ")),f("noscript","",r),e!=="html4"&&(f("wbr"),f("ruby","",[o,"rt rp"].join(" ")),f("figcaption","",r),f("mark rt rp bdi","",o),f("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),f("canvas","width height",r),f("data","value",o),f("video","src crossorigin poster preload autoplay mediagroup loop controlslist disablepictureinpicture disableremoteplayback playsinline muted controls width height buffered",[r,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[r,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[o,"option"].join(" ")),f("article section nav aside main header footer","",r),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[r,"figcaption"].join(" ")),f("time","datetime",o),f("dialog","open",r),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",o),f("progress","value max",o),f("meter","value min max low high optimum",o),f("details","open",[r,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&Ae([c.video,c.audio],v=>{delete v.children.audio,delete v.children.video}),Ae(mr("a form meter progress dfn"),v=>{c[v]&&delete c[v].children[v]}),delete c.caption.children.table,delete c.script,c},Hh=e=>e==="-"?"remove":"add",$u=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return M.from(t.exec(e)).map(o=>({preset:o[1]==="@",name:o[2]}))},Sg=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return wo(mr(e,","),o=>{const r=t.exec(o);if(r){const c=r[1],u=c?Hh(c):"replace",f=r[2],b=wo(mr(r[3],"|"),v=>$u(v).toArray());return[{operation:u,name:f,validChildren:b}]}else return[]})},wg=(e,t)=>{const o=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,r=/[*?+]/,{attributes:c,attributesOrder:u}=t;return Ae(mr(e,"|"),f=>{const b=o.exec(f);if(b){const v={},S=b[1],O=b[2].replace(/[\\:]:/g,":"),R=b[3],P=b[4];if(S==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(O),v.required=!0),S==="-"){delete c[O],u.splice(lt.inArray(u,O),1);return}if(R&&(R==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:O,value:P}),v.defaultValue=P):R==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:O,value:P}),v.forcedValue=P):R==="<"&&(v.validValues=lt.makeMap(P,"?"))),r.test(O)){const z=v;t.attributePatterns=t.attributePatterns||[],z.pattern=bf(O),t.attributePatterns.push(z)}else c[O]||u.push(O),c[O]=v}})},e3=(e,t)=>{qn(e.attributes,(o,r)=>{t.attributes[r]=o}),t.attributesOrder.push(...e.attributesOrder)},C0=(e,t)=>{const o=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return wo(mr(t,","),r=>{const c=o.exec(r);if(c){const u=c[1],f=c[2],b=c[3],v=c[4],S=c[5],O={attributes:{},attributesOrder:[]};if(e.each(R=>e3(R,O)),u==="#"?O.paddEmpty=!0:u==="-"&&(O.removeEmpty=!0),v==="!"&&(O.removeEmptyAttrs=!0),S&&wg(S,O),b&&(O.outputName=f),f==="@")if(e.isNone())e=M.some(O);else return[];return[b?{name:f,element:O,aliasName:b}:{name:f,element:O}]}else return[]})},fm={},w1=lt.makeMap,ds=lt.each,JS=lt.extend,gm=lt.explode,zh=(e,t={})=>{const o=w1(e," ",w1(e.toUpperCase()," "));return JS(o,t)},x0=e=>zh("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),hm=(e,t)=>{if(e){const o={};return V(e)&&(e={"*":e}),ds(e,(r,c)=>{o[c]=o[c.toUpperCase()]=t==="map"?w1(r,/[, ]/):gm(r,/[, ]/)}),o}else return},Aa=(e={})=>{const t={},o={};let r=[];const c={},u={},f={},b=(An,vo,Nr)=>{const Os=e[An];if(Os)return w1(Os,/[, ]/,w1(Os.toUpperCase(),/[, ]/));{let ss=fm[An];return ss||(ss=zh(vo,Nr),fm[An]=ss),ss}},v=e.schema??"html5",S=aa(v);e.verify_html===!1&&(e.valid_elements="*[*]");const O=hm(e.valid_styles),R=hm(e.invalid_styles,"map"),P=hm(e.valid_classes,"map"),z=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ee=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),W=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),J=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),be="td th iframe video audio object script code",ye=b("non_empty_elements",be+" pre svg textarea summary",W),Se=b("move_caret_before_on_enter_elements",be+" table",W),Ve="h1 h2 h3 h4 h5 h6",et=b("text_block_elements",Ve+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Pt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing colgroup col",et),un=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),He=b("transparent_elements","a ins del canvas map"),Me=b("wrap_block_elements","pre "+Ve);ds("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),An=>{u[An]=new RegExp("</"+An+"[^>]*>","gi")});const Ue=An=>{const vo=M.from(t["@"]),Nr=/[*?+]/;Ae(C0(vo,An??""),({name:Os,element:ss,aliasName:Er})=>{if(Er&&(t[Er]=ss),Nr.test(Os)){const Ml=ss;Ml.pattern=bf(Os),r.push(Ml)}else t[Os]=ss})},Nt=An=>{r=[],Ae(en(t),vo=>{delete t[vo]}),Ue(An)},Dn=(An,vo)=>{delete fm.text_block_elements,delete fm.block_elements;const Nr=vo.extends?!ni(vo.extends):!1,Os=vo.extends;if(o[An]=Os?o[Os]:{},c[An]=Os??An,ye[An.toUpperCase()]={},ye[An]={},Nr||(Pt[An.toUpperCase()]={},Pt[An]={}),Os&&!t[An]&&t[Os]){const ss=Yc(t[Os]);delete ss.removeEmptyAttrs,delete ss.removeEmpty,t[An]=ss}else t[An]={attributesOrder:[],attributes:{}};if(At(vo.attributes)){const ss=Ml=>{Er.attributesOrder.push(Ml),Er.attributes[Ml]={}},Er=t[An]??{};delete Er.attributesDefault,delete Er.attributesForced,delete Er.attributePatterns,delete Er.attributesRequired,Er.attributesOrder=[],Er.attributes={},Ae(vo.attributes,Ml=>{const Ai=$r(v);$u(Ml).each(({preset:id,name:fh})=>{id?fh==="global"&&Ae(Ai,ss):ss(fh)})}),t[An]=Er}if(nn(vo.padEmpty)){const ss=t[An]??{};ss.paddEmpty=vo.padEmpty,t[An]=ss}if(At(vo.children)){const ss={},Er=Ai=>{ss[Ai]={}},Ml=Ai=>{E2(v,Ai).each(id=>{Ae(id,Er)})};Ae(vo.children,Ai=>{$u(Ai).each(({preset:id,name:fh})=>{id?Ml(fh):Er(fh)})}),o[An]=ss}Os&&qn(o,(ss,Er)=>{ss[Os]&&(o[Er]=ss=JS({},o[Er]),ss[An]=ss[Os])})},Rn=An=>{Ae(Fh(An??""),({name:vo,cloneName:Nr})=>{Dn(vo,{extends:Nr})})},go=(An,vo)=>{f[An]=vo},Yo=An=>{Ye(An)?qn(An,(vo,Nr)=>{const Os=vo.componentUrl;V(Os)&&go(Nr,Os),Dn(Nr,vo)}):V(An)&&Rn(An)},Ss=An=>{Ae(Sg(An??""),({operation:vo,name:Nr,validChildren:Os})=>{const ss=vo==="replace"?{"#comment":{}}:o[Nr],Er=Ai=>{vo==="remove"?delete ss[Ai]:ss[Ai]={}},Ml=Ai=>{E2(v,Ai).each(id=>{Ae(id,Er)})};Ae(Os,({preset:Ai,name:id})=>{Ai?Ml(id):Er(id)}),o[Nr]=ss})},Is=An=>{const vo=t[An];if(vo)return vo;let Nr=r.length;for(;Nr--;){const Os=r[Nr];if(Os.pattern.test(An))return Os}},Ba=()=>{e.valid_elements?(Nt(e.valid_elements),ds(S,(An,vo)=>{o[vo]=An.children})):(ds(S,(An,vo)=>{t[vo]={attributes:An.attributes,attributesOrder:An.attributesOrder},o[vo]=An.children}),ds(mr("strong/b em/i"),An=>{const vo=mr(An,"/");t[vo[1]].outputName=vo[0]}),ds(un,(An,vo)=>{t[vo]&&(e.padd_empty_block_inline_children&&(t[vo].paddInEmptyBlock=!0),t[vo].removeEmpty=!0)}),ds(mr("ol ul blockquote a table tbody"),An=>{t[An]&&(t[An].removeEmpty=!0)}),ds(mr("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),An=>{t[An]&&(t[An].paddEmpty=!0)}),ds(mr("span"),An=>{t[An].removeEmptyAttrs=!0})),delete t.svg,Yo(e.custom_elements),Ss(e.valid_children),Ue(e.extended_valid_elements),Ss("+ol[ul|ol],+ul[ul|ol]"),ds({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(An,vo)=>{t[vo]&&(t[vo].parentsRequired=mr(An))}),e.invalid_elements&&ds(gm(e.invalid_elements),An=>{t[An]&&delete t[An]}),Is("span")||Ue("span[!data-mce-type|*]")},Rl=it(O),Lt=it(R),vn=it(P),Vo=it(J),Do=it(Pt),Xa=it(et),Ge=it(un),vt=it(Object.seal(W)),qt=it(ee),ro=it(ye),Xn=it(Se),ts=it(z),Nl=it(He),Jd=it(Me),cd=it(Object.seal(u)),yu=(An,vo)=>{const Nr=o[An.toLowerCase()];return!!(Nr&&Nr[vo.toLowerCase()])},Hp=(An,vo)=>{const Nr=Is(An);if(Nr)if(vo){if(Nr.attributes[vo])return!0;const Os=Nr.attributePatterns;if(Os){let ss=Os.length;for(;ss--;)if(Os[ss].pattern.test(vo))return!0}}else return!0;return!1},ni=An=>Pn(Do(),An),tl=An=>!kn(An,"#")&&Hp(An)&&!ni(An),mh=An=>Pn(Jd(),An)||tl(An),Uy=it(c),Ok=it(f);return Ba(),{type:v,children:o,elements:t,getValidStyles:Rl,getValidClasses:vn,getBlockElements:Do,getInvalidStyles:Lt,getVoidElements:vt,getTextBlockElements:Xa,getTextInlineElements:Ge,getBoolAttrs:Vo,getElementRule:Is,getSelfClosingElements:qt,getNonEmptyElements:ro,getMoveCaretBeforeOnEnterElements:Xn,getWhitespaceElements:ts,getTransparentElements:Nl,getSpecialElements:cd,getComponentUrls:Ok,isValidChild:yu,isValid:Hp,isBlock:ni,isInline:tl,isWrapper:mh,getCustomElements:Uy,addValidElements:Ue,setValidElements:Nt,addCustomElements:Yo,addValidChildren:Ss}},Eg=e=>({value:Vh(e)}),Vh=e=>Km(e,"#").toUpperCase(),S0=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},w0=e=>{const t=S0(e.red)+S0(e.green)+S0(e.blue);return Eg(t)},E0=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,E1=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ew=(e,t,o,r)=>({red:e,green:t,blue:o,alpha:r}),T2=(e,t,o,r)=>{const c=parseInt(e,10),u=parseInt(t,10),f=parseInt(o,10),b=parseFloat(r);return ew(c,u,f,b)},k2=e=>E0.test(e)?"rgb":E1.test(e)?"rgba":"other",Uh=e=>{const t=E0.exec(e);if(t!==null)return M.some(T2(t[1],t[2],t[3],"1"));const o=E1.exec(e);return o!==null?M.some(T2(o[1],o[2],o[3],o[4])):M.none()},Iu=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,El=e=>Uh(e).map(w0).map(t=>"#"+t.value).getOr(e),pm=(e={},t)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const v=Lc;t&&(f=t.getValidStyles(),b=t.getInvalidStyles());const S=(`\\" \\' \\; \\: ; : `+v).split(" ");for(let R=0;R<S.length;R++)u[S[R]]=v+R,u[v+R]=S[R];const O={parse:R=>{const P={};let z=!1;const ee=e.url_converter,W=e.url_converter_scope||O,J=(He,Me,Ue)=>{const Nt=P[He+"-top"+Me];if(!Nt)return;const Dn=P[He+"-right"+Me];if(!Dn)return;const Rn=P[He+"-bottom"+Me];if(!Rn)return;const go=P[He+"-left"+Me];if(!go)return;const Yo=[Nt,Dn,Rn,go];let Ss=Yo.length-1;for(;Ss--&&Yo[Ss]===Yo[Ss+1];);Ss>-1&&Ue||(P[He+Me]=Ss===-1?Yo[0]:Yo.join(" "),delete P[He+"-top"+Me],delete P[He+"-right"+Me],delete P[He+"-bottom"+Me],delete P[He+"-left"+Me])},be=He=>{const Me=P[He];if(!Me)return;const Ue=Me.indexOf(",")>-1?[Me]:Me.split(" ");let Nt=Ue.length;for(;Nt--;)if(Ue[Nt]!==Ue[0])return!1;return P[He]=Ue[0],!0},ye=(He,Me,Ue,Nt)=>{be(Me)&&be(Ue)&&be(Nt)&&(P[He]=P[Me]+" "+P[Ue]+" "+P[Nt],delete P[Me],delete P[Ue],delete P[Nt])},Se=He=>(z=!0,u[He]),Ve=(He,Me)=>(z&&(He=He.replace(/\uFEFF[0-9]/g,Ue=>u[Ue])),Me||(He=He.replace(/\\([\'\";:])/g,"$1")),He),et=He=>String.fromCharCode(parseInt(He.slice(1),16)),Pt=He=>He.replace(/\\[0-9a-f]+/gi,et),un=(He,Me,Ue,Nt,Dn,Rn)=>{if(Dn=Dn||Rn,Dn)return Dn=Ve(Dn),"'"+Dn.replace(/\'/g,"\\'")+"'";if(Me=Ve(Me||Ue||Nt||""),!e.allow_script_urls){const go=Me.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(go)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(go))return""}return ee&&(Me=ee.call(W,Me,"style")),"url('"+Me.replace(/\'/g,"\\'")+"')"};if(R){R=R.replace(/[\u0000-\u001F]/g,""),R=R.replace(/\\[\"\';:\uFEFF]/g,Se).replace(/\"[^\"]+\"|\'[^\']+\'/g,Me=>Me.replace(/[;:]/g,Se));let He;for(;He=r.exec(R);){r.lastIndex=He.index+He[0].length;let Me=He[1].replace(c,"").toLowerCase(),Ue=He[2].replace(c,"");if(Me&&Ue){if(Me=Pt(Me),Ue=Pt(Ue),Me.indexOf(v)!==-1||Me.indexOf('"')!==-1||!e.allow_script_urls&&(Me==="behavior"||/expression\s*\(|\/\*|\*\//.test(Ue)))continue;Me==="font-weight"&&Ue==="700"?Ue="bold":(Me==="color"||Me==="background-color")&&(Ue=Ue.toLowerCase()),k2(Ue)==="rgb"&&Uh(Ue).each(Nt=>{Ue=El(Iu(Nt)).toLowerCase()}),Ue=Ue.replace(o,un),P[Me]=z?Ve(Ue,!0):Ue}}J("border","",!0),J("border","-width"),J("border","-color"),J("border","-style"),J("padding",""),J("margin",""),ye("border","border-width","border-style","border-color"),P.border==="medium none"&&delete P.border,P["border-image"]==="none"&&delete P["border-image"]}return P},serialize:(R,P)=>{let z="";const ee=(J,be)=>{const ye=be[J];if(ye)for(let Se=0,Ve=ye.length;Se<Ve;Se++){const et=ye[Se],Pt=R[et];Pt&&(z+=(z.length>0?" ":"")+et+": "+Pt+";")}},W=(J,be)=>{if(!b||!be)return!0;let ye=b["*"];return ye&&ye[J]?!1:(ye=b[be],!(ye&&ye[J]))};return P&&f?(ee("*",f),ee(P,f)):qn(R,(J,be)=>{J&&W(be,P)&&(z+=(z.length>0?" ":"")+be+": "+J+";")}),z}};return O},tw={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},T0=e=>e instanceof Event||ce(e.initEvent),A2=e=>e.isDefaultPrevented===Te||e.isDefaultPrevented===pe,nw=e=>Yt(e.preventDefault)||T0(e),_2=(e,t)=>{const o=t??{};for(const r in e)Pn(tw,r)||(o[r]=e[r]);return X(e.composedPath)&&(o.composedPath=()=>e.composedPath()),X(e.getModifierState)&&(o.getModifierState=r=>e.getModifierState(r)),X(e.getTargetRanges)&&(o.getTargetRanges=()=>e.getTargetRanges()),o},k0=(e,t,o,r)=>{const c=_2(t,r);return c.type=e,Yt(c.target)&&(c.target=c.srcElement??o),nw(t)&&(c.preventDefault=()=>{c.defaultPrevented=!0,c.isDefaultPrevented=Te,ce(t.preventDefault)&&t.preventDefault()},c.stopPropagation=()=>{c.cancelBubble=!0,c.isPropagationStopped=Te,ce(t.stopPropagation)&&t.stopPropagation()},c.stopImmediatePropagation=()=>{c.isImmediatePropagationStopped=Te,c.stopPropagation()},A2(c)||(c.isDefaultPrevented=c.defaultPrevented===!0?Te:pe,c.isPropagationStopped=c.cancelBubble===!0?Te:pe,c.isImmediatePropagationStopped=pe)),c},A0="mce-data-",_0=/^(?:mouse|contextmenu)|click/,Lu=(e,t,o,r)=>{e.addEventListener(t,o,r||!1)},T1=(e,t,o,r)=>{e.removeEventListener(t,o,r||!1)},jh=e=>X(e)&&_0.test(e.type),Tg=(e,t)=>{const o=k0(e.type,e,document,t);if(jh(e)&&Wn(e.pageX)&&!Wn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},ow=(e,t,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){t(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{T1(e,"DOMContentLoaded",f),T1(e,"load",f),o.domLoaded||(o.domLoaded=!0,t(c)),e=null};u()?f():Lu(e,"DOMContentLoaded",f),o.domLoaded||Lu(e,"load",f)};class Wh{static Event=new Wh;domLoaded=!1;events={};expando;hasFocusIn;count=1;constructor(){this.expando=A0+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,o,r,c){const u=this;let f;const b=window,v=P=>{u.executeHandlers(Tg(P||b.event),S)};if(!t||dt(t)||Zn(t))return r;let S;t[u.expando]?S=t[u.expando]:(S=u.count++,t[u.expando]=S,u.events[S]={}),c=c||t;const O=o.split(" ");let R=O.length;for(;R--;){let P=O[R],z=v,ee=!1,W=!1;if(P==="DOMContentLoaded"&&(P="ready"),u.domLoaded&&P==="ready"&&t.readyState==="complete"){r.call(c,Tg({type:P}));continue}!u.hasFocusIn&&(P==="focusin"||P==="focusout")&&(ee=!0,W=P==="focusin"?"focus":"blur",z=J=>{const be=Tg(J||b.event);be.type=be.type==="focus"?"focusin":"focusout",u.executeHandlers(be,S)}),f=u.events[S][P],f?P==="ready"&&u.domLoaded?r(Tg({type:P})):f.push({func:r,scope:c}):(u.events[S][P]=f=[{func:r,scope:c}],f.fakeName=W,f.capture=ee,f.nativeHandler=z,P==="ready"?ow(t,z,u):Lu(t,W||P,z,ee))}return t=f=null,r}unbind(t,o,r){if(!t||dt(t)||Zn(t))return this;const c=t[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const v=f[b],S=u[v];if(S){if(r){let O=S.length;for(;O--;)if(S[O].func===r){const R=S.nativeHandler,P=S.fakeName,z=S.capture,ee=S.slice(0,O).concat(S.slice(O+1));ee.nativeHandler=R,ee.fakeName=P,ee.capture=z,u[v]=ee}}(!r||S.length===0)&&(delete u[v],T1(t,S.fakeName||v,S.nativeHandler,S.capture))}}}else qn(u,(f,b)=>{T1(t,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(Pn(u,f))return this;delete this.events[c];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,o,r){return this.dispatch(t,o,r)}dispatch(t,o,r){if(!t||dt(t)||Zn(t))return this;const c=Tg({type:o,target:t},r);do{const u=t[this.expando];u&&this.executeHandlers(c,u),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!c.isPropagationStopped());return this}clean(t){if(!t||dt(t)||Zn(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const o=t.getElementsByTagName("*");let r=o.length;for(;r--;)t=o[r],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,o){const r=this.events[o],c=r&&r[t.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}const Ac=lt.each,t3=lt.grep,O2="data-mce-style",D2=lt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),O0=(e,t,o)=>{Yt(o)||o===""?cr(e,t):Ts(e,t,o)},sw=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),kg=(e,t)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;t&&dt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},rw=(e,t)=>{const o=bs(t,"style"),r=e.serialize(e.parse(o),jn(t));O0(t,O2,r)},k1=(e,t)=>Uo(e)?Pn(D2,t)?e+"":e+"px":e,R2=(e,t,o)=>{const r=sw(t);Yt(o)||o===""?xh(e,r):Ea(e,r,k1(o,r))},aw=(e,t,o)=>{const r=t.keep_values,c={set:(f,b,v)=>{const S=ne.fromDom(f);ce(t.url_converter)&&X(b)&&(b=t.url_converter.call(t.url_converter_scope||o(),String(b),v,f));const O="data-mce-"+v;O0(S,O,b),O0(S,v,b)},get:(f,b)=>{const v=ne.fromDom(f);return bs(v,"data-mce-"+b)||bs(v,b)}},u={style:{set:(f,b)=>{const v=ne.fromDom(f);r&&O0(v,O2,b),cr(v,"style"),V(b)&&Cc(v,e.parse(b))},get:f=>{const b=ne.fromDom(f),v=bs(b,O2)||bs(b,"style");return e.serialize(e.parse(v),jn(b))}}};return r&&(u.href=u.src=c),u},mo=(e,t={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,v=y2.forElement(ne.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy,crossOrigin:_e=>{const Pe=t.crossOrigin;if(ce(Pe))return Pe(_e,"stylesheet")}}),S=[],O=t.schema?t.schema:Aa({}),R=pm({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),P=t.ownEvents?new Wh:Wh.Event,z=O.getBlockElements(),ee=_e=>V(_e)?Pn(z,_e):kt(_e)&&(Pn(z,_e.nodeName)||Xs(O,_e)),W=_e=>_e&&e&&V(_e)?e.getElementById(_e):_e,J=_e=>{const Pe=W(_e);return X(Pe)?ne.fromDom(Pe):null},be=(_e,Pe,Ht="")=>{let yt;const Mn=J(_e);if(X(Mn)&&Hs(Mn)){const Bo=C7[Pe];Bo&&Bo.get?yt=Bo.get(Mn.dom,Pe):yt=bs(Mn,Pe)}return X(yt)?yt:Ht},ye=_e=>{const Pe=W(_e);return Yt(Pe)?[]:Pe.attributes},Se=(_e,Pe,Ht)=>{vn(_e,yt=>{if(kt(yt)){const Mn=ne.fromDom(yt),Bo=Ht===""?null:Ht,Yr=bs(Mn,Pe),gh=C7[Pe];gh&&gh.set?gh.set(Mn.dom,Bo,Pe):O0(Mn,Pe,Bo),Yr!==Bo&&t.onSetAttrib&&t.onSetAttrib({attrElm:Mn.dom,attrName:Pe,attrValue:Bo})}})},Ve=(_e,Pe)=>_e.cloneNode(Pe),et=()=>t.root_element||e.body,Pt=_e=>{const Pe=gi(_e);return{x:Pe.x,y:Pe.y,w:Pe.width,h:Pe.height}},un=(_e,Pe)=>zo(e.body,W(_e),Pe),He=(_e,Pe,Ht)=>{vn(_e,yt=>{const Mn=ne.fromDom(yt);R2(Mn,Pe,Ht),t.update_styles&&rw(R,Mn)})},Me=(_e,Pe)=>{vn(_e,Ht=>{const yt=ne.fromDom(Ht);qn(Pe,(Mn,Bo)=>{R2(yt,Bo,Mn)}),t.update_styles&&rw(R,yt)})},Ue=(_e,Pe,Ht)=>{const yt=W(_e);if(!(Yt(yt)||!Wc(yt)&&!jk(yt)))return Ht?Vs(ne.fromDom(yt),sw(Pe)):(Pe=Pe.replace(/-(\D)/g,(Mn,Bo)=>Bo.toUpperCase()),Pe==="float"&&(Pe="cssFloat"),yt.style?yt.style[Pe]:void 0)},Nt=_e=>{const Pe=W(_e);if(!Pe)return{w:0,h:0};let Ht=Ue(Pe,"width"),yt=Ue(Pe,"height");return(!Ht||Ht.indexOf("px")===-1)&&(Ht="0"),(!yt||yt.indexOf("px")===-1)&&(yt="0"),{w:parseInt(Ht,10)||Pe.offsetWidth||Pe.clientWidth,h:parseInt(yt,10)||Pe.offsetHeight||Pe.clientHeight}},Dn=_e=>{const Pe=W(_e),Ht=un(Pe),yt=Nt(Pe);return{x:Ht.x,y:Ht.y,w:yt.w,h:yt.h}},Rn=(_e,Pe)=>{if(!_e)return!1;const Ht=At(_e)?_e:[_e];return io(Ht,yt=>zc(ne.fromDom(yt),Pe))},go=(_e,Pe,Ht,yt)=>{const Mn=[];let Bo=W(_e);yt=yt===void 0;const Yr=Ht||(et().nodeName!=="BODY"?et().parentNode:null);if(V(Pe))if(Pe==="*")Pe=kt;else{const gh=Pe;Pe=tg=>Rn(tg,gh)}for(;Bo&&!(Bo===Yr||Yt(Bo.nodeType)||dm(Bo)||Rh(Bo));){if(!Pe||Pe(Bo))if(yt)Mn.push(Bo);else return[Bo];Bo=Bo.parentNode}return yt?Mn:null},Yo=(_e,Pe,Ht)=>{const yt=go(_e,Pe,Ht,!1);return yt&&yt.length>0?yt[0]:null},Ss=(_e,Pe,Ht)=>{let yt=Pe;if(_e){V(Pe)&&(yt=Mn=>Rn(Mn,Pe));for(let Mn=_e[Ht];Mn;Mn=Mn[Ht])if(ce(yt)&&yt(Mn))return Mn}return null},Is=(_e,Pe)=>Ss(_e,Pe,"nextSibling"),Ba=(_e,Pe)=>Ss(_e,Pe,"previousSibling"),Rl=_e=>ce(_e.querySelectorAll),Lt=(_e,Pe)=>{const Ht=W(Pe)??t.root_element??e;return Rl(Ht)?is(Ht.querySelectorAll(_e)):[]},vn=function(_e,Pe,Ht){const yt=Ht??this;if(At(_e)){const Mn=[];return Ac(_e,(Bo,Yr)=>{const gh=W(Bo);gh&&Mn.push(Pe.call(yt,gh,Yr))}),Mn}else{const Mn=W(_e);return Mn?Pe.call(yt,Mn):!1}},Vo=(_e,Pe)=>{vn(_e,Ht=>{qn(Pe,(yt,Mn)=>{Se(Ht,Mn,yt)})})},Do=(_e,Pe)=>{vn(_e,Ht=>{const yt=ne.fromDom(Ht);Ru(yt,Pe)})},Xa=(_e,Pe,Ht,yt,Mn)=>vn(_e,Bo=>{const Yr=V(Pe)?e.createElement(Pe):Pe;return X(Ht)&&Vo(Yr,Ht),yt&&(!V(yt)&&yt.nodeType?Yr.appendChild(yt):V(yt)&&Do(Yr,yt)),Mn?Yr:Bo.appendChild(Yr)}),Ge=(_e,Pe,Ht)=>Xa(e.createElement(_e),_e,Pe,Ht,!0),vt=vi.decode,qt=vi.encodeAllRaw,ro=(_e,Pe,Ht="")=>{let yt="<"+_e;for(const Mn in Pe)Ko(Pe,Mn)&&(yt+=" "+Mn+'="'+qt(Pe[Mn])+'"');return rl(Ht)&&Pn(O.getVoidElements(),_e)?yt+" />":yt+">"+Ht+"</"+_e+">"},Xn=_e=>{const Pe=e.createElement("div"),Ht=e.createDocumentFragment();Ht.appendChild(Pe),_e&&(Pe.innerHTML=_e);let yt;for(;yt=Pe.firstChild;)Ht.appendChild(yt);return Ht.removeChild(Pe),Ht},ts=(_e,Pe)=>vn(_e,Ht=>{const yt=ne.fromDom(Ht);return Pe&&Ae(Ns(yt),Mn=>{Ao(Mn)&&Mn.dom.length===0?Xo(Mn):da(yt,Mn)}),Xo(yt),yt.dom}),Nl=_e=>vn(_e,Pe=>{const Ht=Pe.attributes;for(let yt=Ht.length-1;yt>=0;yt--)Pe.removeAttributeNode(Ht.item(yt))}),Jd=_e=>R.parse(_e),cd=(_e,Pe)=>R.serialize(_e,Pe),yu=_e=>{if(Wy!==mo.DOM&&e===document){if(o[_e])return;o[_e]=!0}let Pe=e.getElementById("mceDefaultStyles");if(!Pe){Pe=e.createElement("style"),Pe.id="mceDefaultStyles",Pe.type="text/css";const Ht=e.head;Ht.firstChild?Ht.insertBefore(Pe,Ht.firstChild):Ht.appendChild(Pe)}Pe.styleSheet?Pe.styleSheet.cssText+=_e:Pe.appendChild(e.createTextNode(_e))},Hp=_e=>{_e||(_e=""),Ae(_e.split(","),Pe=>{c[Pe]=!0,v.load(Pe).catch(_t)})},ni=(_e,Pe,Ht)=>{vn(_e,yt=>{if(kt(yt)){const Mn=ne.fromDom(yt),Bo=Pe.split(" ");Ae(Bo,Yr=>{X(Ht)?(Ht?xc:ur)(Mn,Yr):Ur(Mn,Yr)})}})},tl=(_e,Pe)=>{ni(_e,Pe,!0)},mh=(_e,Pe)=>{ni(_e,Pe,!1)},Uy=(_e,Pe)=>{const Ht=J(_e),yt=Pe.split(" ");return X(Ht)&&Qa(yt,Mn=>wh(Ht,Mn))},Ok=_e=>{vn(_e,Pe=>xh(ne.fromDom(Pe),"display"))},An=_e=>{vn(_e,Pe=>Ea(ne.fromDom(Pe),"display","none"))},vo=_e=>{const Pe=J(_e);return X(Pe)&&jo(ir(Pe,"display"),"none")},Nr=_e=>(_e||"mce_")+u++,Os=_e=>{const Pe=J(_e);return X(Pe)?kt(Pe.dom)?Pe.dom.outerHTML:t2(Pe):""},ss=(_e,Pe)=>{vn(_e,Ht=>{kt(Ht)&&(Ht.outerHTML=Pe)})},Er=(_e,Pe)=>{const Ht=W(Pe);return vn(_e,yt=>{const Mn=Ht?.parentNode,Bo=Ht?.nextSibling;return Mn&&(Bo?Mn.insertBefore(yt,Bo):Mn.appendChild(yt)),yt})},Ml=(_e,Pe,Ht)=>vn(Pe,yt=>{const Mn=At(Pe)?_e.cloneNode(!0):_e;return Ht&&Ac(t3(yt.childNodes),Bo=>{Mn.appendChild(Bo)}),yt.parentNode?.replaceChild(Mn,yt),yt}),Ai=(_e,Pe)=>{if(_e.nodeName!==Pe.toUpperCase()){const Ht=Ge(Pe);return Ac(ye(_e),yt=>{Se(Ht,yt.nodeName,be(_e,yt.nodeName))}),Ml(Ht,_e,!0),Ht}else return _e},id=(_e,Pe)=>{let Ht=_e;for(;Ht;){let yt=Pe;for(;yt&&Ht!==yt;)yt=yt.parentNode;if(Ht===yt)break;Ht=Ht.parentNode}return!Ht&&_e.ownerDocument?_e.ownerDocument.documentElement:Ht},fh=(_e,Pe,Ht)=>ut(Pe)?bn(O,_e,{...Ht,isContent:Mn=>{const Bo=Mn.nodeName.toLowerCase();return!!Pe[Bo]}}):bn(O,_e,Ht),Dk=()=>e.createRange(),Rk=(_e,Pe,Ht)=>{let yt=Dk(),Mn,Bo;if(_e&&Pe&&_e.parentNode&&Pe.parentNode){const Yr=_e.parentNode;return yt.setStart(Yr,kg(_e)),yt.setEnd(Pe.parentNode,kg(Pe)),Mn=yt.extractContents(),yt=Dk(),yt.setStart(Pe.parentNode,kg(Pe)+1),yt.setEnd(Yr,kg(_e)+1),Bo=yt.extractContents(),Yr.insertBefore(C1(Wy,Mn,O),_e),Ht?Yr.insertBefore(Ht,_e):Yr.insertBefore(Pe,_e),Yr.insertBefore(C1(Wy,Bo,O),_e),ts(_e),Ht||Pe}else return},MS=(_e,Pe,Ht,yt)=>{if(At(_e)){let Mn=_e.length;const Bo=[];for(;Mn--;)Bo[Mn]=MS(_e[Mn],Pe,Ht,yt);return Bo}else return t.collect&&(_e===e||_e===r)&&S.push([_e,Pe,Ht,yt]),P.bind(_e,Pe,Ht,yt||Wy)},eg=(_e,Pe,Ht)=>{if(At(_e)){let yt=_e.length;const Mn=[];for(;yt--;)Mn[yt]=eg(_e[yt],Pe,Ht);return Mn}else{if(S.length>0&&(_e===e||_e===r)){let yt=S.length;for(;yt--;){const[Mn,Bo,Yr]=S[yt];_e===Mn&&(!Pe||Pe===Bo)&&(!Ht||Ht===Yr)&&P.unbind(Mn,Bo,Yr)}}return P.unbind(_e,Pe,Ht)}},jy=(_e,Pe,Ht)=>P.dispatch(_e,Pe,Ht),QN=(_e,Pe,Ht)=>P.dispatch(_e,Pe,Ht),Nk=_e=>{if(_e&&Wc(_e)){const Pe=_e.getAttribute("data-mce-contenteditable");return Pe&&Pe!=="inherit"?Pe:_e.contentEditable!=="inherit"?_e.contentEditable:null}else return null},Wy={doc:e,settings:t,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:v,boundEvents:S,styles:R,schema:O,events:P,isBlock:ee,root:null,clone:Ve,getRoot:et,getViewPort:Pt,getRect:Dn,getSize:Nt,getParent:Yo,getParents:go,get:W,getNext:Is,getPrev:Ba,select:Lt,is:Rn,add:Xa,create:Ge,createHTML:ro,createFragment:Xn,remove:ts,setStyle:He,getStyle:Ue,setStyles:Me,removeAllAttribs:Nl,setAttrib:Se,setAttribs:Vo,getAttrib:be,getPos:un,parseStyle:Jd,serializeStyle:cd,addStyle:yu,loadCSS:Hp,addClass:tl,removeClass:mh,hasClass:Uy,toggleClass:ni,show:Ok,hide:An,isHidden:vo,uniqueId:Nr,setHTML:Do,getOuterHTML:Os,setOuterHTML:ss,decode:vt,encode:qt,insertAfter:Er,replace:Ml,rename:Ai,findCommonAncestor:id,run:vn,getAttribs:ye,isEmpty:fh,createRng:Dk,nodeIndex:kg,split:Rk,bind:MS,unbind:eg,fire:QN,dispatch:jy,getContentEditable:Nk,getContentEditableParent:_e=>{const Pe=et();let Ht=null;for(let yt=_e;yt&&yt!==Pe&&(Ht=Nk(yt),Ht===null);yt=yt.parentNode);return Ht},isEditable:_e=>{if(X(_e)){const Pe=kt(_e)?_e:_e.parentElement;return X(Pe)&&Wc(Pe)&&Ui(ne.fromDom(Pe))}else return!1},destroy:()=>{if(S.length>0){let _e=S.length;for(;_e--;){const[Pe,Ht,yt]=S[_e];P.unbind(Pe,Ht,yt)}}qn(c,(_e,Pe)=>{v.unload(Pe),delete c[Pe]})},isChildOf:(_e,Pe)=>_e===Pe||Pe.contains(_e),dumpRng:_e=>"startContainer: "+_e.startContainer.nodeName+", startOffset: "+_e.startOffset+", endContainer: "+_e.endContainer.nodeName+", endOffset: "+_e.endOffset},C7=aw(R,t,it(Wy));return Wy};mo.DOM=mo(document),mo.nodeIndex=kg;const D0=mo.DOM,xo=0,yi=1,vf=2,A1=3;class Po{static ScriptLoader=new Po;settings;states={};queue=[];scriptLoadedCallbacks={};queueLoadedCallbacks=[];loading=!1;constructor(t={}){this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}_setCrossOrigin(t){this.settings.crossOrigin=t}loadScript(t){return new Promise((o,r)=>{const c=D0,u=document;let f;const b=()=>{c.remove(O),f&&(f.onerror=f.onload=f=null)},v=()=>{b(),o()},S=()=>{b(),r("Failed to load script: "+t)},O=c.uniqueId();f=u.createElement("script"),f.id=O,f.type="text/javascript",f.src=lt._addCacheSuffix(t),this.settings.referrerPolicy&&c.setAttrib(f,"referrerpolicy",this.settings.referrerPolicy);const R=this.settings.crossOrigin;if(ce(R)){const P=R(t);P!==void 0&&c.setAttrib(f,"crossorigin",P)}f.onload=v,f.onerror=S,(u.head||u.body).appendChild(f)})}isDone(t){return this.states[t]===vf}markDone(t){this.states[t]=vf}add(t){const o=this;return o.queue.push(t),o.states[t]===void 0&&(o.states[t]=xo),new Promise((c,u)=>{o.scriptLoadedCallbacks[t]||(o.scriptLoadedCallbacks[t]=[]),o.scriptLoadedCallbacks[t].push({resolve:c,reject:u})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const o=this,r=(v,S)=>{qo(o.scriptLoadedCallbacks,S).each(O=>{Ae(O,R=>R[v](S))}),delete o.scriptLoadedCallbacks[S]},c=v=>{const S=Xe(v,O=>O.status==="rejected");return S.length>0?Promise.reject(wo(S,({reason:O})=>At(O)?O:[O])):Promise.resolve()},u=v=>Promise.allSettled(hn(v,S=>o.states[S]===vf?(r("resolve",S),Promise.resolve()):o.states[S]===A1?(r("reject",S),Promise.reject(S)):(o.states[S]=yi,o.loadScript(S).then(()=>{o.states[S]=vf,r("resolve",S);const O=o.queue;return O.length>0?(o.queue=[],u(O).then(c)):Promise.resolve()},()=>(o.states[S]=A1,r("reject",S),Promise.reject(S)))))),f=v=>(o.loading=!0,u(v).then(S=>{o.loading=!1;const O=o.queueLoadedCallbacks.shift();return M.from(O).each(on),c(S)})),b=Ym(t);return o.loading?new Promise((v,S)=>{o.queueLoadedCallbacks.push(()=>{f(b).then(v,S)})}):f(b)}getScriptAttributes(t){const o={};this.settings.referrerPolicy&&(o.referrerpolicy=this.settings.referrerPolicy);const r=this.settings.crossOrigin;if(ce(r)){const c=r(t);V(c)&&(o.crossorigin=c)}return o}}const cw=(e,t)=>{const o=e.indexOf(t);return o!==-1&&e.indexOf(t,o+1)>o},iw=e=>Ye(e)&&Pn(e,"raw"),n3=e=>At(e)&&e.length>1,Ag={},_1=rn("en"),lw=()=>qo(Ag,_1.get()),Ci={getData:()=>mc(Ag,e=>({...e})),setCode:e=>{e&&_1.set(e)},getCode:()=>_1.get(),add:(e,t)=>{let o=Ag[e];o||(Ag[e]=o={});const r=hn(en(t),c=>c.toLowerCase());qn(t,(c,u)=>{const f=u.toLowerCase();f!==u&&cw(r,f)?(Pn(t,f)||(o[f]=c),o[u]=c):o[f]=c})},translate:e=>{const t=lw().getOr({}),o=b=>ce(b)?Object.prototype.toString.call(b):r(b)?"":""+b,r=b=>b===""||b===null||b===void 0,c=b=>{const v=o(b);return Pn(t,v)?o(t[v]):qo(t,v.toLowerCase()).map(o).getOr(v)},u=b=>b.replace(/{context:\w+}$/,""),f=b=>b.replaceAll("...",og);if(r(e))return"";if(iw(e))return f(o(e.raw));if(n3(e)){const b=e.slice(1),v=c(e[0]).replace(/\{([0-9]+)\}/g,(S,O)=>Pn(b,O)?o(b[O]):S);return f(u(v))}return f(u(c(e)))},isRtl:()=>lw().bind(e=>qo(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Pn(Ag,e)},Zr=()=>{const e=[],t={},o={},r=[],c=(W,J)=>{const be=Xe(r,ye=>ye.name===W&&ye.state===J);Ae(be,ye=>ye.resolve())},u=W=>Pn(t,W),f=W=>Pn(o,W),b=W=>{if(o[W])return o[W].instance},v=(W,J)=>{const be=Ci.getCode(),ye=","+(J||"")+",";!be||J&&ye.indexOf(","+be+",")===-1||Po.ScriptLoader.add(t[W]+"/langs/"+be+".js")},S=(W,J)=>{Zr.languageLoad!==!1&&(u(W)?v(W,J):ee(W,"loaded").then(()=>v(W,J)))},O=(W,J)=>(e.push(J),o[W]={instance:J},c(W,"added"),J),R=W=>{delete t[W],delete o[W]},P=(W,J)=>V(J)?V(W)?{prefix:"",resource:J,suffix:""}:{prefix:W.prefix,resource:J,suffix:W.suffix}:J,z=(W,J)=>{if(t[W])return Promise.resolve();let be=V(J)?J:J.prefix+J.resource+J.suffix;be.indexOf("/")!==0&&be.indexOf("://")===-1&&(be=Zr.baseURL+"/"+be),t[W]=be.substring(0,be.lastIndexOf("/"));const ye=()=>(c(W,"loaded"),Promise.resolve());return o[W]?ye():Po.ScriptLoader.add(be).then(ye)},ee=(W,J="added")=>J==="added"&&f(W)||J==="loaded"&&u(W)?Promise.resolve():new Promise(be=>{r.push({name:W,state:J,resolve:be})});return{items:e,urls:t,lookup:o,get:b,requireLangPack:S,add:O,remove:R,createUrl:P,load:z,waitFor:ee}};Zr.languageLoad=!0,Zr.baseURL="",Zr.PluginManager=Zr(),Zr.ThemeManager=Zr(),Zr.ModelManager=Zr();const yf=it("mce-annotation"),nu=it("data-mce-annotation"),kd=it("data-mce-annotation-uid"),Zh=it("data-mce-annotation-active"),Gh=it("data-mce-annotation-classes"),R0=it("data-mce-annotation-attrs"),c3=e=>t=>no(t,e),N0=(e,t)=>{const o=e.selection.getRng(),r=ne.fromDom(o.startContainer),c=ne.fromDom(e.getBody()),u=t.fold(()=>"."+yf(),v=>`[${nu()}="${v}"]`),f=Fi(r,o.startOffset).getOr(r);return fa(f,u,c3(c)).bind(v=>fi(v,`${kd()}`).bind(S=>fi(v,`${nu()}`).map(O=>{const R=O1(e,S);return{uid:S,name:O,elements:R}})))},N2=e=>Hs(e)&&wh(e,yf()),M2=(e,t)=>ws(e,"data-mce-bogus")||cs(e,'[data-mce-bogus="all"]',c3(t)),O1=(e,t)=>{const o=ne.fromDom(e.getBody()),r=Fe(o,`[${kd()}="${t}"]`);return Xe(r,c=>!M2(c,o))},bm=(e,t)=>{const o=ne.fromDom(e.getBody()),r=Fe(o,`[${nu()}="${t}"]`),c={};return Ae(r,u=>{if(!M2(u,o)){const f=bs(u,kd()),b=qo(c,f).getOr([]);c[f]=b.concat([u])}}),c},M0=(e,t)=>{const o=rn({}),r=()=>({listeners:[],previous:Ic()}),c=(R,P)=>{u(R,z=>(P(z),z))},u=(R,P)=>{const z=o.get(),ee=qo(z,R).getOrThunk(r),W=P(ee);z[R]=W,o.set(z)},f=(R,P,z)=>{c(R,ee=>{Ae(ee.listeners,W=>W(!0,R,{uid:P,nodes:hn(z,J=>J.dom)}))})},b=R=>{c(R,P=>{Ae(P.listeners,z=>z(!1,R))})},v=(R,P)=>{Ae(O1(e,R),z=>{P?Ts(z,Zh(),"true"):cr(z,Zh())})},S=al(()=>{const R=Oi(t.getNames());Ae(R,P=>{u(P,z=>{const ee=z.previous.get();return N0(e,M.some(P)).fold(()=>{ee.each(W=>{b(P),z.previous.clear(),v(W,!1)})},({uid:W,name:J,elements:be})=>{jo(ee,W)||(ee.each(ye=>v(ye,!1)),f(J,W,be),z.previous.set(W),v(W,!0))}),{previous:z.previous,listeners:z.listeners}})})},30);return e.on("remove",()=>{S.cancel()}),e.on("NodeChange",()=>{S.throttle()}),{addListener:(R,P)=>{u(R,z=>({previous:z.previous,listeners:z.listeners.concat([P])}))}}},D1=(e,t)=>{const o=nu(),r=u=>M.from(u.attr(o)).bind(t.lookup),c=u=>{u.attr(kd(),null),u.attr(nu(),null),u.attr(Zh(),null);const f=M.from(u.attr(R0())).map(O=>O.split(",")).getOr([]),b=M.from(u.attr(Gh())).map(O=>O.split(",")).getOr([]);Ae(f,O=>u.attr(O,null));const v=u.attr("class")?.split(" ")??[],S=Ls(v,[yf()].concat(b));u.attr("class",S.length>0?S.join(" "):null),u.attr(Gh(),null),u.attr(R0(),null)};e.serializer.addTempAttr(Zh()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},P0=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>qo(e,c).map(u=>u.settings),getNames:()=>en(e)}},mw=(e,t,o=pe)=>{const r=new nr(e,t),c=u=>{let f;do f=r[u]();while(f&&!dt(f)&&!o(f));return M.from(f).filter(dt)};return{current:()=>M.from(r.current()).filter(dt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},Ad=(e,t)=>{const o=t||(f=>e.isBlock(f)||js(f)||As(f)),r=(f,b,v,S)=>{if(dt(f)){const O=S(f,b,f.data);if(O!==-1)return M.some({container:f,offset:O})}return v().bind(O=>r(O.container,O.offset,v,S))};return{backwards:(f,b,v,S)=>{const O=mw(f,S??e.getRoot(),o);return r(f,b,()=>O.prev().map(R=>({container:R,offset:R.length})),v).getOrNull()},forwards:(f,b,v,S)=>{const O=mw(f,S??e.getRoot(),o);return r(f,b,()=>O.next().map(R=>({container:R,offset:0})),v).getOrNull()}}},B0=["td","th"],fw=["thead","tbody","tfoot"],i3=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],l3=["li","dd","dt"],gw=["ul","ol","dl"],P2=["pre","script","textarea","style"],_d=e=>{let t;return o=>(t=t||Su(e,Te),Pn(t,jn(o)))},hw=e=>jn(e)==="table",ou=e=>Hs(e)&&jn(e)==="br",ac=_d(i3),Tl=_d(gw),_c=_d(l3),$0=_d(fw),Og=_d(B0),I0=_d(P2),B2=e=>{const t=[];let o=e.dom;for(;o;)t.push(ne.fromDom(o)),o=o.lastChild;return t},u3=e=>{const t=Fe(e,"br"),o=Xe(B2(e).slice(-1),ou);t.length===o.length&&Ae(o,Xo)},Cf=()=>{const e=ne.fromTag("br");return Ts(e,"data-mce-bogus","1"),e},xf=e=>{zi(e),yo(e,Cf())},$2=(e,t)=>{ar(e).each(o=>{li(o).each(r=>{t.isBlock(jn(e))&&ou(o)&&t.isBlock(jn(r))&&Xo(o)})})},Gr=Lc,R1=tc,Xc=Fc,L0=e=>e.insertContent(Gr,{preserve_zwsp:!0}),ns=kt,Fu=dt,vm=e=>(Fu(e)&&(e=e.parentNode),ns(e)&&e.hasAttribute("data-mce-caret")),Hu=e=>Fu(e)&&R1(e.data),qi=e=>vm(e)||Hu(e),F0=e=>e.firstChild!==e.lastChild||!js(e.firstChild),pw=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(Gr),c=e.parentNode;if(t){const u=e.previousSibling;if(Fu(u)){if(qi(u))return u;if(Sf(u))return u.splitText(u.data.length-1)}c?.insertBefore(r,e)}else{const u=e.nextSibling;if(Fu(u)){if(qi(u))return u;if(xi(u))return u.splitText(1),u}e.nextSibling?c?.insertBefore(r,e.nextSibling):c?.appendChild(r)}return r},ym=e=>{const t=e.container();return dt(t)?t.data.charAt(e.offset())===Gr||e.isAtStart()&&Hu(t.previousSibling):!1},Dg=e=>{const t=e.container();return dt(t)?t.data.charAt(e.offset()-1)===Gr||e.isAtEnd()&&Hu(t.nextSibling):!1},I2=(e,t,o)=>{const c=(t.ownerDocument??document).createElement(e);c.setAttribute("data-mce-caret",o?"before":"after"),c.setAttribute("data-mce-bogus","all"),c.appendChild(Cf().dom);const u=t.parentNode;return o?u?.insertBefore(c,t):t.nextSibling?u?.insertBefore(c,t.nextSibling):u?.appendChild(c),c},xi=e=>Fu(e)&&e.data[0]===Gr,Sf=e=>Fu(e)&&e.data[e.data.length-1]===Gr,_a=e=>{const t=e.getElementsByTagName("br"),o=t[t.length-1];ff(o)&&o.parentNode?.removeChild(o)},su=e=>e&&e.hasAttribute("data-mce-caret")?(_a(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,H0=e=>vm(e.startContainer),Rg=Math.round,wf=e=>e?{left:Rg(e.left),top:Rg(e.top),bottom:Rg(e.bottom),right:Rg(e.right),width:Rg(e.width),height:Rg(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},N1=(e,t)=>(e=wf(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),L2=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,z0=(e,t,o)=>e>=0&&e<=Math.min(t.height,o.height)/2,Ng=(e,t)=>{const o=Math.min(t.height/2,e.height/2);return e.bottom-o<t.top?!0:e.top>t.bottom?!1:z0(t.top-e.bottom,e,t)},Ef=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:z0(t.bottom-e.top,e,t),F2=(e,t,o)=>t>=e.left&&t<=e.right&&o>=e.top&&o<=e.bottom,M1=e=>Ho(e,(t,o)=>t.fold(()=>M.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return M.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),M.none()),H2=(e,t,o)=>{const r=Math.max(Math.min(t,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((t-r)*(t-r)+(o-c)*(o-c))},bw=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),qr=e=>{const t=e.startContainer,o=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===o+1?t.childNodes[o]:null},Tf=(e,t)=>{if(kt(e)&&e.hasChildNodes()){const o=e.childNodes,r=ud(t,0,o.length-1);return o[r]}else return e},kf=(e,t)=>{if(!(t<0&&kt(e)&&e.hasChildNodes()))return Tf(e,t)},vw=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),V0=e=>V(e)&&e.charCodeAt(0)>=768&&vw.test(e),z2=(...e)=>t=>{for(let o=0;o<e.length;o++)if(e[o](t))return!0;return!1},P1=(...e)=>t=>{for(let o=0;o<e.length;o++)if(!e[o](t))return!1;return!0},U0=hi,yw=As,d3=js,B1=dt,Ir=yl(["script","style","textarea"]),_r=yl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Oa=yl(["table"]),ga=qi,Ps=e=>ga(e)?!1:B1(e)?!Ir(e.parentNode):_r(e)||d3(e)||Oa(e)||qh(e),Or=e=>kt(e)&&e.getAttribute("unselectable")==="true",qh=e=>!Or(e)&&yw(e),V2=(e,t)=>{for(let o=e.parentNode;o&&o!==t;o=o.parentNode){if(qh(o))return!1;if(U0(o))return!0}return!0},U2=e=>qh(e)?!Ho(is(e.getElementsByTagName("*")),(t,o)=>t||U0(o),!1):!1,Cw=e=>_r(e)||U2(e),j0=(e,t)=>Ps(e)&&V2(e,t),j2=kt,W2=Ps,W0=h0("display","block table"),Z2=h0("float","left right"),Kh=P1(j2,W2,tt(Z2)),xw=tt(h0("white-space","pre pre-line pre-wrap")),$1=dt,zu=js,Z0=mo.nodeIndex,I1=kf,Yh=e=>e?e.createRange():mo.DOM.createRng(),Mg=e=>V(e)&&/[\r\n\t ]/.test(e),L1=e=>!!e.setStart&&!!e.setEnd,G0=e=>{const t=e.startContainer,o=e.startOffset;if(Mg(e.toString())&&xw(t.parentNode)&&dt(t)){const r=t.data;if(Mg(r[o-1])||Mg(r[o+1]))return!0}return!1},F1=e=>{const t=e.ownerDocument,o=Yh(t),r=t.createTextNode(Fs),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=wf(o.getBoundingClientRect());return c.removeChild(r),u},q0=e=>{const t=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(t===o&&dt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),Oc(u)}else return null},Pg=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,Oc=e=>{let t;const o=e.getClientRects();return o.length>0?t=wf(o[0]):t=wf(e.getBoundingClientRect()),!L1(e)&&zu(e)&&Pg(t)?F1(e):Pg(t)&&L1(e)?q0(e)??t:t},Ua=(e,t)=>{const o=N1(e,t);return o.width=1,o.right=o.left+1,o},Xh=e=>{const t=[],o=f=>{f.height!==0&&(t.length>0&&L2(f,t[t.length-1])||t.push(f))},r=(f,b)=>{const v=Yh(f.ownerDocument);if(b<f.data.length){if(V0(f.data[b]))return;if(V0(f.data[b-1])&&(v.setStart(f,b),v.setEnd(f,b+1),!G0(v))){o(Ua(Oc(v),!1));return}}b>0&&(v.setStart(f,b-1),v.setEnd(f,b),G0(v)||o(Ua(Oc(v),!1))),b<f.data.length&&(v.setStart(f,b),v.setEnd(f,b+1),G0(v)||o(Ua(Oc(v),!0)))},c=e.container(),u=e.offset();if($1(c))return r(c,u),t;if(j2(c))if(e.isAtEnd()){const f=I1(c,u);$1(f)&&r(f,f.data.length),Kh(f)&&!zu(f)&&o(Ua(Oc(f),!1))}else{const f=I1(c,u);if($1(f)&&r(f,0),Kh(f)&&e.isAtEnd())return o(Ua(Oc(f),!1)),t;const b=I1(e.container(),e.offset()-1);Kh(b)&&!zu(b)&&(W0(b)||W0(f)||!Kh(f))&&o(Ua(Oc(b),!1)),Kh(f)&&o(Ua(Oc(f),!0))}return t},Le=(e,t,o)=>{const r=()=>($1(e),t===0),c=()=>$1(e)?t>=e.data.length:t>=e.childNodes.length,u=()=>{const O=Yh(e.ownerDocument);return O.setStart(e,t),O.setEnd(e,t),O},f=()=>(o||(o=Xh(Le(e,t))),o),b=()=>f().length>0,v=O=>O&&e===O.container()&&t===O.offset(),S=O=>I1(e,O?t-1:t);return{container:it(e),offset:it(t),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:v,getNode:S}};Le.fromRangeStart=e=>Le(e.startContainer,e.startOffset),Le.fromRangeEnd=e=>Le(e.endContainer,e.endOffset),Le.after=e=>Le(e.parentNode,Z0(e)+1),Le.before=e=>Le(e.parentNode,Z0(e)),Le.isAbove=(e,t)=>er(Gs(t.getClientRects()),hr(e.getClientRects()),Ng).getOr(!1),Le.isBelow=(e,t)=>er(hr(t.getClientRects()),Gs(e.getClientRects()),Ef).getOr(!1),Le.isAtStart=e=>e?e.isAtStart():!1,Le.isAtEnd=e=>e?e.isAtEnd():!1,Le.isTextPosition=e=>e?dt(e.container()):!1,Le.isElementPosition=e=>!Le.isTextPosition(e);const H1=(e,t)=>{dt(t)&&t.data.length===0&&e.remove(t)},m3=(e,t,o)=>{t.insertNode(o),H1(e,o.previousSibling),H1(e,o.nextSibling)},Dc=(e,t,o)=>{const r=M.from(o.firstChild),c=M.from(o.lastChild);t.insertNode(o),r.each(u=>H1(e,u.previousSibling)),c.each(u=>H1(e,u.nextSibling))},Qh=(e,t,o)=>{Rh(o)?Dc(e,t,o):m3(e,t,o)},Vu=dt,G2=ff,q2=mo.nodeIndex,Bg=e=>{const t=e.parentNode;return G2(t)?Bg(t):t},z1=e=>e?zl(e.childNodes,(t,o)=>(G2(o)&&o.nodeName!=="BR"?t=t.concat(z1(o)):t.push(o),t),[]):[],Cm=(e,t)=>{let o=e;for(;(o=o.previousSibling)&&Vu(o);)t+=o.data.length;return t},K0=e=>t=>e===t,f3=e=>{let t,o;t=z1(Bg(e)),o=sm(t,K0(e),e),t=t.slice(0,o+1);const r=zl(t,(c,u,f)=>(Vu(u)&&Vu(t[f-1])&&c++,c),0);return t=Au(t,yl([e.nodeName])),o=sm(t,K0(e),e),o-r},ja=e=>(Vu(e)?"text()":e.nodeName.toLowerCase())+"["+f3(e)+"]",Uu=(e,t,o)=>{const r=[];for(let c=t.parentNode;c&&c!==e;c=c.parentNode)r.push(c);return r},Si=(e,t)=>{let o=[],r=t.container(),c=t.offset(),u;if(Vu(r))u=Cm(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(ja(r));let f=Uu(e,r);return f=Au(f,tt(ff)),o=o.concat(il(f,b=>ja(b))),o.reverse().join("/")+","+u},g3=(e,t,o)=>{let r=z1(e);return r=Au(r,(c,u)=>!Vu(c)||!Vu(r[u-1])),r=Au(r,yl([t])),r[o]},Jh=(e,t)=>{let o=e,r=0;for(;Vu(o);){const c=o.data.length;if(t>=r&&t<=r+c){e=o,t=t-r;break}if(!Vu(o.nextSibling)){e=o,t=c;break}r+=c,o=o.nextSibling}return Vu(e)&&t>e.data.length&&(t=e.data.length),Le(e,t)},Sw=(e,t)=>{if(!t)return null;const o=t.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=zl(r,(f,b)=>{const v=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return v?(v[1]==="text()"&&(v[1]="#text"),g3(f,v[1],parseInt(v[2],10))):null},e);if(!u)return null;if(!Vu(u)&&u.parentNode){let f;return c==="after"?f=q2(u)+1:f=q2(u),Le(u.parentNode,f)}return Jh(u,parseInt(c,10))},Y0=As,h3=(e,t,o)=>{let r=e(t.data.slice(0,o)).length;for(let c=t.previousSibling;c&&dt(c);c=c.previousSibling)r+=e(c.data).length;return r},ww=(e,t,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],v=e.getRoot();if(dt(u))b.push(o?h3(t,u,f):f);else{let S=0;const O=u.childNodes;f>=O.length&&O.length&&(S=1,f=Math.max(0,O.length-1)),b.push(e.nodeIndex(O[f],o)+S)}for(let S=u;S&&S!==v;S=S.parentNode)b.push(e.nodeIndex(S,o));return b},Yn=(e,t,o,r)=>{const c=t.dom,u=ww(c,e,o,r,!0),f=t.isForward(),b=H0(r)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:u,forward:f,...b};{const v=ww(c,e,o,r,!1);return{start:u,end:v,forward:f,...b}}},pn=(e,t,o)=>{let r=0;return lt.each(e.select(t),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},ep=(e,t)=>{let o=t?e.startContainer:e.endContainer,r=t?e.startOffset:e.endOffset;if(kt(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(t?r:r-1,c.length-1)],o&&(r=t?0:o.childNodes.length,t?e.setStart(o,r):e.setEnd(o,r))}},X0=e=>(ep(e,!0),ep(e,!1),e),Q0=(e,t)=>{if(kt(e)&&(e=Tf(e,t),Y0(e)))return e;if(qi(e)){dt(e)&&vm(e)&&(e=e.parentNode);let o=e.previousSibling;if(Y0(o)||(o=e.nextSibling,Y0(o)))return o}},p3=e=>Q0(e.startContainer,e.startOffset)||Q0(e.endContainer,e.endOffset),K2=(e,t,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Y0(r)){const f=r.nodeName;return{name:f,index:pn(o.dom,f,r)}}const u=p3(c);if(u){const f=u.tagName;return{name:f,index:pn(o.dom,f,u)}}return Yn(e,o,t,c)},_s=e=>{const t=e.getRng();return{start:Si(e.dom.getRoot(),Le.fromRangeStart(t)),end:Si(e.dom.getRoot(),Le.fromRangeEnd(t)),forward:e.isForward()}},J0=e=>({rng:e.getRng(),forward:e.isForward()}),ev=(e,t,o)=>{const r={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},Y2=(e,t)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,v=e.isForward();if(b==="IMG")return{name:b,index:pn(o,b,f)};const S=X0(r.cloneRange());if(!u){S.collapse(!1);const R=ev(o,c+"_end",t);Qh(o,S,R)}r=X0(r),r.collapse(!0);const O=ev(o,c+"_start",t);return Qh(o,r,O),e.moveToBookmark({id:c,keep:!0,forward:v}),{id:c,forward:v}},je=(e,t,o=!1)=>t===2?K2(Xc,o,e):t===3?_s(e):t?J0(e):Y2(e,!1),tp=ae(K2,Ro,!0),$g=e=>e===1,Od=e=>e===-1;var ru;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(ru||(ru={}));const Dd=(e,t,o)=>e.stype===ru.Error?t(e.serror):o(e.svalue),np=e=>{const t=[],o=[];return Ae(e,r=>{Dd(r,c=>o.push(c),c=>t.push(c))}),{values:t,errors:o}},Ig=(e,t)=>e.stype===ru.Error?{stype:ru.Error,serror:t(e.serror)}:e,b3=(e,t)=>e.stype===ru.Value?{stype:ru.Value,svalue:t(e.svalue)}:e,op=(e,t)=>e.stype===ru.Value?t(e.svalue):e,vs=(e,t)=>e.stype===ru.Error?t(e.serror):e,au=e=>({stype:ru.Value,svalue:e}),X2=e=>({stype:ru.Error,serror:e}),Wa={fromResult:e=>e.fold(X2,au),toResult:e=>Dd(e,Tr.error,Tr.value),svalue:au,partition:np,serror:X2,bind:op,bindError:vs,map:b3,mapError:Ig,fold:Dd},Ew=e=>Ye(e)&&en(e).length>100?" removed due to size":JSON.stringify(e,null,2),Q2=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:it("... (only showing first ten failures)")}]):e;return hn(t,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},Tw=(e,t)=>Wa.serror([{path:e,getErrorInfo:t}]),v3=(e,t,o)=>Tw(e,()=>'Could not find valid *required* value for "'+t+'" in '+Ew(o)),y3=(e,t)=>Tw(e,it(t)),J2=e=>{const t=(r,c)=>Wa.bindError(e(c),u=>y3(r,u)),o=it("val");return{extract:t,toString:o}},kw=J2(Wa.svalue),mt=it(kw),eC=(e,t)=>J2(o=>{const r=typeof o;return e(o)?Wa.svalue(o):Wa.serror(`Expected type: ${t} but got: ${r}`)}),ha=eC(Uo,"number"),tC=eC(V,"string"),nC=eC(ce,"function"),oC=()=>({tag:"required",process:{}}),C3=e=>({tag:"defaultedThunk",process:e}),On=e=>C3(it(e)),Aw=()=>({tag:"option",process:{}}),_w=(e,t,o,r)=>({tag:"field",key:e,newKey:t,presence:o,prop:r}),x3=(e,t,o)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},S3=(e,t)=>Wa.svalue(Tu(t,Di.apply(void 0,e))),Ow=e=>A(Wa.serror,va)(e),Dw={consolidateObj:(e,t)=>{const o=Wa.partition(e);return o.errors.length>0?Ow(o.errors):S3(o.values,t)},consolidateArr:e=>{const t=Wa.partition(e);return t.errors.length>0?Ow(t.errors):Wa.svalue(t.values)}},w3=(e,t,o,r)=>qo(t,o).fold(()=>v3(e,o,t),r),Nn=(e,t,o,r)=>{const c=qo(e,t).getOrThunk(()=>o(e));return r(c)},sC=(e,t,o)=>o(qo(e,t)),xm=(e,t,o,r)=>{const c=qo(e,t).map(u=>u===!0?o(e):u);return r(c)},kl=(e,t,o,r,c)=>{const u=b=>c.extract(t.concat([r]),b),f=b=>b.fold(()=>Wa.svalue(M.none()),v=>{const S=c.extract(t.concat([r]),v);return Wa.map(S,M.some)});switch(e.tag){case"required":return w3(t,o,r,u);case"defaultedThunk":return Nn(o,r,e.process,u);case"option":return sC(o,r,f);case"defaultedOptionThunk":return xm(o,r,e.process,f);case"mergeWithThunk":return Nn(o,r,it({}),b=>{const v=Tu(e.process(o),b);return u(v)})}},tv=(e,t,o)=>{const r={},c=[];for(const u of o)x3(u,(f,b,v,S)=>{const O=kl(v,e,t,f,S);Wa.fold(O,R=>{c.push(...R)},R=>{r[b]=R})},(f,b)=>{r[f]=b(t)});return c.length>0?Wa.serror(c):Wa.svalue(r)},Rc=e=>({extract:(r,c)=>tv(r,c,e),toString:()=>`obj{
`+hn(e,c=>x3(c,(u,f,b,v)=>u+" -> "+v.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),sp=e=>({extract:(r,c)=>{const u=hn(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return Dw.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),V1=A(sp,Rc),nv=e=>J2(t=>e(t).fold(Wa.serror,Wa.svalue)),rp=(e,t,o)=>{const r=t.extract([e],o);return Wa.mapError(r,c=>({input:o,errors:c}))},ap=(e,t,o)=>Wa.toResult(rp(e,t,o)),Rd=e=>`Errors: 
`+Q2(e.errors).join(`
`)+`

Input object: `+Ew(e.input),Dr=_w,Sm=e=>Dr(e,e,oC(),mt()),Rw=(e,t)=>Dr(e,e,oC(),t),rC=e=>Rw(e,tC),Nw=e=>Rw(e,nC),E3=(e,t)=>Dr(e,e,oC(),sp(t)),fo=e=>Dr(e,e,Aw(),mt()),cu=(e,t)=>Dr(e,e,Aw(),t),_f=e=>cu(e,tC),m5=e=>cu(e,nC),cp=(e,t)=>Dr(e,e,On(t),mt()),bo=(e,t,o)=>Dr(e,e,On(t),o),T3=(e,t)=>bo(e,t,ha),k3=(e,t,o)=>bo(e,t,sp(o)),f5=e=>e.type==="inline-command"||e.type==="inline-format",g5=e=>e.type==="block-command"||e.type==="block-format",U1=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,A3=e=>{const t=r=>Tr.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(At(e.format)){if(!Qa(e.format,V))return t(r+" pattern has non-string items in the `format` array");f=e.format}else if(V(e.format))f=[e.format];else return t(r+" pattern has non-string `format` parameter");return Tr.value(c(f))}else return e.cmd!==void 0?V(e.cmd)?Tr.value(u(e.cmd,e.value)):t(r+" pattern has non-string `cmd` parameter"):t(r+" pattern is missing both `format` and `cmd` parameters")};if(!Ye(e))return t("Raw pattern is not an object");if(!V(e.start))return t("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!V(e.end))return t("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return t("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else{if(e.replacement!==void 0)return V(e.replacement)?e.start.length===0?t("Replacement pattern has empty `start` parameter"):Tr.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter");{const r=e.trigger??"space";return e.start.length===0?t("Block pattern has empty `start` parameter"):o("Block",c=>({type:"block-format",start:e.start,format:c[0],trigger:r}),(c,u)=>({type:"block-command",start:e.start,cmd:c,value:u,trigger:r}))}}},_3=e=>Xe(e,g5),j1=e=>Xe(e,f5),O3=(e,t)=>({inlinePatterns:j1(e),blockPatterns:_3(e),dynamicPatternsLookup:t}),W1=(e,t)=>({...e,blockPatterns:Xe(e.blockPatterns,o=>U1(o,t))}),Mw=e=>{const t=Fr(hn(e,A3));return Ae(t.errors,o=>console.error(o.message,o.pattern)),t.values},D3=e=>t=>{const o=e(t);return Mw(o)},ov=(e,t)=>e.dispatch("PreProcess",t),aC=(e,t)=>e.dispatch("PostProcess",t),cC=e=>{e.dispatch("remove")},Pw=e=>{e.dispatch("detach")},R3=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},Bw=(e,t,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:t,width:o,height:r,origin:c})},iC=(e,t,o,r,c)=>{e.dispatch("ObjectResized",{target:t,width:o,height:r,origin:c})},$w=e=>{e.dispatch("PreInit")},Eo=e=>{e.dispatch("PostRender")},Iw=e=>{e.dispatch("Init")},lC=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},sv=(e,t,o)=>{e.dispatch(t,o)},wm=(e,t,o,r)=>{e.dispatch("FormatApply",{format:t,node:o,vars:r})},uC=(e,t,o,r)=>{e.dispatch("FormatRemove",{format:t,node:o,vars:r})},N3=(e,t)=>e.dispatch("BeforeSetContent",t),Lw=(e,t)=>e.dispatch("SetContent",t),ip=(e,t)=>e.dispatch("BeforeGetContent",t),Fw=(e,t)=>e.dispatch("GetContent",t),Z1=(e,t)=>{e.dispatch("AutocompleterStart",t)},G1=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},dC=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},Of=e=>{e.dispatch("AutocompleterEnd")},Hw=(e,t,o)=>e.dispatch("PastePreProcess",{content:t,internal:o}),zw=(e,t,o)=>e.dispatch("PastePostProcess",{node:t,internal:o}),Vw=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),Uw=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),h5=(e,t)=>e.dispatch("DisabledStateChange",{state:t}),jw=e=>e.dispatch("CloseActiveTooltips"),rv=Ul().deviceType,av=rv.isTouch(),q1=mo.DOM,cv=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Ho(t,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[Rs(u)]=Rs(f),o},{})},iv=e=>ft(e,RegExp),zt=e=>t=>t.options.get(e),Df=e=>V(e)||Ye(e),Nd=(e,t="")=>o=>{const r=V(o);if(r)if(o.indexOf("=")!==-1){const c=cv(o);return{value:qo(c,e.id).getOr(t),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},K1=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("crossorigin",{processor:"function",default:it(void 0)}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.editorManager.documentBaseURL}),t("body_id",{processor:Nd(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:Nd(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:r=>{const c=V(r)&&hs(r);return c?{value:r,valid:c}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:r=>{const c=Wt(["block","linebreak","invert","default"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:r=>nn(r)?{valid:!0,value:r}:V(r)?{valid:!0,value:r}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:r=>{const c=r===!1||V(r)||dn(r,V);return c?V(r)?{value:hn(r.split(","),Rs),valid:c}:At(r)?{value:r,valid:c}:r===!1?{value:[],valid:c}:{value:r,valid:c}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:X1(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:r=>{const c=V(r)||dn(r,V);return c?{value:At(r)?r:hn(r.split(","),Rs),valid:c}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("extended_mathml_attributes",{processor:"string[]"}),t("extended_mathml_elements",{processor:"string[]"}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:r=>{const c=nn(r)||V(r);return c?r===!1||rv.isiPhone()||rv.isiPad()?{value:"",valid:c}:{value:r===!0?"table,img,figure.image,div,video,iframe":r,valid:c}:{valid:!1,message:"Must be boolean or a string"}},default:!av}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("onboarding",{processor:"boolean",default:!0}),t("tiny_cloud_entry_url",{processor:"string"}),t("theme",{processor:r=>r===!1||V(r)||ce(r),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:r=>{const c=r===!1||V(r);return c?{value:r===!1?"":r,valid:c}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("disabled",{processor:r=>nn(r)?(e.initialized&&lu(e)!==r&&Promise.resolve().then(()=>{h5(e,r)}),{valid:!0,value:r}):{valid:!1,message:"The value must be a boolean."},default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area".concat(e.hasPlugin("help")?". Press ALT-0 for help.":"")}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_html_in_comments",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("allow_mathml_annotation_encodings",{processor:r=>{const c=dn(r,V);return c?{value:r,valid:c}:{valid:!1,message:"Must be an array of strings."}},default:[]}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Df}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Df}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Df}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Df}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:r=>V(r)||r===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:r=>dn(r,Ye)||r===!1?{value:Mw(r===!1?[]:r),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:r=>ce(r)?{value:D3(r),valid:!0}:{valid:!1,message:"Must be a single function"},default:r=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:r=>dn(r,iv)?{value:r,valid:!0}:iv(r)?{value:[r],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:r=>{const c=Wt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:r=>{const c=Wt(["inherited","collapsed","expanded"],r);return c?{value:r,valid:c}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),t("user_id",{processor:"string",default:"Anonymous"}),t("fetch_users",{processor:r=>r===void 0?{valid:!0,value:void 0}:ce(r)?{valid:!0,value:r}:{valid:!1,message:"fetch_users must be a function that returns a Promise<ExpectedUser[]>"}});const o=V1([rC("mimeType"),E3("extensions",nv(r=>V(r)?Tr.value(r):Tr.error("Extensions must be an array of strings")))]);t("documents_file_types",{processor:r=>ap("documents_file_types",o,r).fold(c=>({valid:!1,message:"Must be a non-empty array of objects matching the configuration schema: https://www.tiny.cloud/docs/tinymce/latest/uploadcare-documents/#documents-file-types"}),c=>({valid:!0,value:c}))}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:Ci.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:q1.getAttrib(e.getElement(),"placeholder")})}),t("lists_indent_on_tab",{processor:"boolean",default:!0}),t("list_max_depth",{processor:r=>{const c=Uo(r);if(c){if(r<0)throw new Error("list_max_depth cannot be set to lower than 0");return{value:r,valid:c}}else return{valid:!1,message:"Must be a number"}}})},Ww=zt("iframe_attrs"),mC=zt("doctype"),fC=zt("document_base_url"),Zw=zt("body_id"),Gw=zt("body_class"),qw=zt("content_security_policy"),lv=zt("br_in_pre"),Rr=zt("forced_root_block"),iu=zt("forced_root_block_attrs"),uv=zt("newline_behavior"),Kw=zt("br_newline_selector"),Yw=zt("no_newline_selector"),Xw=zt("keep_styles"),dv=zt("end_container_on_empty_block"),gC=zt("automatic_uploads"),Qw=zt("images_reuse_filename"),Jw=zt("images_replace_blob_uris"),Y1=zt("icons"),hC=zt("icons_url"),mv=zt("images_upload_url"),pC=zt("images_upload_base_path"),M3=zt("images_upload_credentials"),eE=zt("images_upload_handler"),tE=zt("content_css_cors"),fv=zt("referrer_policy"),Lg=zt("crossorigin"),nE=zt("language"),oE=zt("language_url"),gv=zt("indent_use_margin"),P3=zt("indentation"),B3=zt("content_css"),Fg=zt("content_style"),bC=zt("font_css"),$3=zt("directionality"),I3=zt("inline_boundaries_selector"),sE=zt("object_resizing"),L3=zt("resize_img_proportional"),vC=zt("placeholder"),hv=zt("event_root"),yC=zt("service_message"),Md=zt("theme"),rE=zt("theme_url"),pv=zt("model"),F3=zt("model_url"),Rf=zt("inline_boundaries"),H3=zt("formats"),z3=zt("preview_styles"),p5=zt("format_empty_lines"),b5=zt("format_noneditable_selector"),lp=zt("custom_ui_selector"),X1=zt("inline"),CC=zt("hidden_input"),V3=zt("submit_patch"),U3=zt("add_form_submit_trigger"),bv=zt("add_unload_trigger"),aE=zt("custom_undo_redo_levels"),cE=zt("disable_nodechange"),Q1=zt("readonly"),vv=zt("editable_root"),xC=zt("content_css_cors"),J1=zt("plugins"),SC=zt("external_plugins"),j3=zt("block_unsupported_drop"),eb=zt("visual"),iE=zt("visual_table_class"),yv=zt("visual_anchor_class"),Cv=zt("iframe_aria_text"),Hg=zt("setup"),W3=zt("init_instance_callback"),Pd=zt("urlconverter_callback"),Z3=zt("auto_focus"),lE=zt("browser_spellcheck"),G3=zt("protect"),v5=zt("paste_block_drop"),xv=zt("paste_data_images"),q3=zt("paste_preprocess"),K3=zt("paste_postprocess"),Y3=zt("newdocument_content"),wC=zt("paste_webkit_styles"),X3=zt("paste_remove_styles_if_webkit"),uE=zt("paste_merge_formats"),EC=zt("smart_paste"),Q3=zt("paste_as_text"),J3=zt("paste_tab_spaces"),TC=zt("allow_html_data_urls"),dE=zt("text_patterns"),mn=zt("text_patterns_lookup"),tb=zt("noneditable_class"),mE=zt("editable_class"),eA=zt("noneditable_regexp"),kC=zt("preserve_cdata"),nb=zt("highlight_on_focus"),Sv=zt("xss_sanitization"),ob=zt("init_content_sync"),up=e=>e.options.isSet("text_patterns_lookup"),AC=e=>lt.explode(e.options.get("font_size_style_values")),_C=e=>lt.explode(e.options.get("font_size_classes")),fE=e=>e.options.get("encoding")==="xml",OC=e=>lt.explode(e.options.get("images_file_types")),gE=zt("table_tab_navigation"),dp=zt("details_initial_state"),Em=zt("details_serialized_state"),mp=zt("sandbox_iframes"),Tm=e=>e.options.get("sandbox_iframes_exclusions"),km=zt("convert_unsafe_embeds"),hE=zt("license_key"),sb=zt("api_key"),lu=zt("disabled"),pE=zt("user_id"),bE=zt("fetch_users"),DC=zt("lists_indent_on_tab"),RC=e=>M.from(e.options.get("list_max_depth")),vE=kt,yE=dt,tA=e=>{const t=e.parentNode;t&&t.removeChild(e)},CE=e=>{const t=Xc(e);return{count:e.length-t.length,text:t}},zg=e=>{let t;for(;(t=e.data.lastIndexOf(Gr))!==-1;)e.deleteData(t,1)},NC=(e,t)=>(Vg(e),t),xE=(e,t)=>{const o=CE(e.data.substr(0,t.offset())),r=CE(e.data.substr(t.offset()));return(o.text+r.text).length>0?(zg(e),Le(e,t.offset()-o.count)):t},MC=(e,t)=>{const o=t.container(),r=rs(is(o.childNodes),e).map(c=>c<t.offset()?Le(o,t.offset()-1):t).getOr(t);return Vg(e),r},PC=(e,t)=>yE(e)&&t.container()===e?xE(e,t):NC(e,t),BC=(e,t)=>t.container()===e.parentNode?MC(e,t):NC(e,t),nA=(e,t)=>Le.isTextPosition(t)?PC(e,t):BC(e,t),Vg=e=>{vE(e)&&qi(e)&&(F0(e)?e.removeAttribute("data-mce-caret"):tA(e)),yE(e)&&(zg(e),e.data.length===0&&tA(e))},Ug=As,wv=Sl,Ev=Nh,SE="*[contentEditable=false],video,audio,embed,object",oA=(e,t,o)=>{const r=N1(t.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=t.offsetWidth-t.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},wE=e=>{const t=Fe(ne.fromDom(e),SE);for(let o=0;o<t.length;o++){const r=t[o].dom;let c=r.previousSibling;if(Sf(c)){const u=c.data;u.length===1?c.parentNode?.removeChild(c):c.deleteData(u.length-1,1)}c=r.nextSibling,xi(c)&&(c.data.length===1?c.parentNode?.removeChild(c):c.deleteData(0,1))}},Bn=(e,t,o,r)=>{const c=Ic();let u,f;const b=Rr(e),v=e.dom,S=(W,J)=>{let be;if(O(),Ev(J))return null;if(o(J)){const ye=I2(b,J,W),Se=oA(t,J,W);v.setStyle(ye,"top",Se.top),v.setStyle(ye,"caret-color","transparent"),f=ye;const Ve=v.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});v.setStyles(Ve,{...Se}),v.add(t,Ve),c.set({caret:Ve,element:J,before:W}),W&&v.addClass(Ve,"mce-visual-caret-before"),R(),be=J.ownerDocument.createRange(),be.setStart(ye,0),be.setEnd(ye,0)}else return f=pw(J,W),be=J.ownerDocument.createRange(),Ki(f.nextSibling)?(be.setStart(f,0),be.setEnd(f,0)):(be.setStart(f,1),be.setEnd(f,1)),be;return be},O=()=>{wE(t),f&&(Vg(f),f=null),c.on(W=>{v.remove(W.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},R=()=>{u=window.setInterval(()=>{c.on(W=>{r()?v.toggleClass(W.caret,"mce-visual-caret-hidden"):v.addClass(W.caret,"mce-visual-caret-hidden")})},500)},P=()=>{c.on(W=>{const J=oA(t,W.element,W.before);v.setStyles(W.caret,{...J})})},z=()=>clearInterval(u),ee=()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}";return{isShowing:c.isSet,show:S,hide:O,getCss:ee,reposition:P,destroy:z}},Tv=()=>po.browser.isFirefox(),Ki=e=>Ug(e)||wv(e),rb=e=>(Ki(e)||Zc(e)&&Tv())&&Vc(ne.fromDom(e)).exists(Ui),sA=hi,kv=As,rA=Sl,$C=h0("display","block table table-cell table-row table-caption list-item"),IC=qi,ab=vm,Wu=kt,fp=dt,aA=Ps,jg=(e,t)=>{let o;for(;o=e(t);)if(!ab(o))return o;return null},cb=(e,t,o,r,c)=>{const u=new nr(e,r),f=kv(e)||ab(e);let b;if(Od(t)){if(f&&(b=jg(u.prev.bind(u),!0),o(b)))return b;for(;b=jg(u.prev.bind(u),c);)if(o(b))return b}if($g(t)){if(f&&(b=jg(u.next.bind(u),!0),o(b)))return b;for(;b=jg(u.next.bind(u),c);)if(o(b))return b}return null},Av=(e,t)=>{const o=c=>sA(c.dom),r=c=>c.dom===t;return Xl(ne.fromDom(e),o,r).map(c=>c.dom).getOr(t)},Kr=e=>kt(e)&&Vs(ne.fromDom(e),"position")==="absolute",cA=(e,t)=>e.parentNode!==t,LC=(e,t)=>kv(e)&&Kr(e)&&cA(e,t),Nf=(e,t)=>{for(;e&&e!==t;){if($C(e)&&!LC(e,t))return e;e=e.parentNode}return null},Bd=(e,t,o)=>Nf(e.container(),o)===Nf(t.container(),o),FC=(e,t)=>{if(!t)return M.none();const o=t.container(),r=t.offset();return Wu(o)?M.from(o.childNodes[r+e]):M.none()},EE=(e,t)=>{const r=(t.ownerDocument??document).createRange();return e?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),r},iA=(e,t,o)=>Nf(t,e)===Nf(o,e),_v=(e,t,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==t;){let u=c[r];if(u&&IC(u)&&(u=u[r]),kv(u)||rA(u)){if(iA(t,u,c))return u;break}if(aA(u))break;c=c.parentNode}return null},ib=ae(EE,!0),Mf=ae(EE,!1),Ov=(e,t,o)=>{let r;const c=ae(_v,!0,t),u=ae(_v,!1,t),f=o.startContainer,b=o.startOffset;if(vm(f)){const v=fp(f)?f.parentNode:f,S=v.getAttribute("data-mce-caret");if(S==="before"&&(r=v.nextSibling,rb(r)))return ib(r);if(S==="after"&&(r=v.previousSibling,rb(r)))return Mf(r)}if(!o.collapsed)return o;if(dt(f)){if(IC(f)){if(e===1){if(r=u(f),r)return ib(r);if(r=c(f),r)return Mf(r)}if(e===-1){if(r=c(f),r)return Mf(r);if(r=u(f),r)return ib(r)}return o}if(Sf(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?ib(r):o;if(xi(f)&&b<=1)return e===-1&&(r=c(f),r)?Mf(r):o;if(b===f.data.length)return r=u(f),r?ib(r):o;if(b===0)return r=c(f),r?Mf(r):o}return o},Dv=(e,t)=>FC(e?0:-1,t).filter(kv),Pf=(e,t,o)=>{const r=Ov(e,t,o);return e===-1?Le.fromRangeStart(r):Le.fromRangeEnd(r)},lb=e=>M.from(e.getNode()).map(ne.fromDom),HC=e=>M.from(e.getNode(!0)).map(ne.fromDom),Rv=(e,t)=>{let o=t;for(;o=e(o);)if(o.isVisible())return o;return o},Zu=(e,t)=>{const o=Bd(e,t);return!o&&js(e.getNode())?!0:o},TE=As,$d=dt,zC=kt,Nv=js,gp=Ps,ub=Cw,Mv=j0,lA=(e,t)=>{const o=[];let r=e;for(;r&&r!==t;)o.push(r),r=r.parentNode;return o},kE=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,Pv=(e,t)=>{if($g(e)){if(gp(t.previousSibling)&&!$d(t.previousSibling))return Le.before(t);if($d(t))return Le(t,0)}if(Od(e)){if(gp(t.nextSibling)&&!$d(t.nextSibling))return Le.after(t);if($d(t))return Le(t,t.data.length)}return Od(e)?Nv(t)?Le.before(t):Le.after(t):Le.before(t)},uA=(e,t)=>{const o=t.nextSibling;return o&&gp(o)?$d(o)?Le(o,0):Le.before(o):VC(1,Le.after(t),e)},VC=(e,t,o)=>{let r,c,u,f;if(!zC(o)||!t)return null;if(t.isEqual(Le.after(o))&&o.lastChild){if(f=Le.after(o.lastChild),Od(e)&&gp(o.lastChild)&&zC(o.lastChild))return Nv(o.lastChild)?Le.before(o.lastChild):f}else f=t;const b=f.container();let v=f.offset();if($d(b)){if(Od(e)&&v>0)return Le(b,--v);if($g(e)&&v<b.length)return Le(b,++v);r=b}else{if(Od(e)&&v>0&&(c=kE(b,v-1),gp(c)))return!ub(c)&&(u=cb(c,e,Mv,c),u)?$d(u)?Le(u,u.data.length):Le.after(u):$d(c)?Le(c,c.data.length):Le.before(c);if($g(e)&&v<b.childNodes.length&&(c=kE(b,v),gp(c)))return Nv(c)?uA(o,c):!ub(c)&&(u=cb(c,e,Mv,c),u)?$d(u)?Le(u,0):Le.before(u):$d(c)?Le(c,0):Le.after(c);r=c||f.getNode()}if(r&&($g(e)&&f.isAtEnd()||Od(e)&&f.isAtStart())&&(r=cb(r,e,Te,o,!0),Mv(r,o)))return Pv(e,r);c=r&&cb(r,e,Mv,o);const S=ci(Xe(lA(b,o),TE));return S&&(!c||!S.contains(c))?($g(e)?f=Le.after(S):f=Le.before(S),f):c?Pv(e,c):null},Gu=e=>({next:t=>VC(1,t,e),prev:t=>VC(-1,t,e)}),UC=(e,t,o)=>{const r=e?Le.before(o):Le.after(o);return Yi(e,t,r)},dA=e=>js(e)?Le.before(e):Le.after(e),AE=e=>Le.isTextPosition(e)?e.offset()===0:Ps(e.getNode()),_E=e=>{if(Le.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return Ps(e.getNode(!0))},OE=(e,t)=>!Le.isTextPosition(e)&&!Le.isTextPosition(t)&&e.getNode()===t.getNode(!0),mA=e=>!Le.isTextPosition(e)&&js(e.getNode()),Es=(e,t,o)=>e?!OE(t,o)&&!mA(t)&&_E(t)&&AE(o):!OE(o,t)&&AE(t)&&_E(o),Yi=(e,t,o)=>{const r=Gu(t);return M.from(e?r.next(o):r.prev(o))},hp=(e,t,o)=>Yi(e,t,o).bind(r=>Bd(o,r,t)&&Es(e,o,r)?Yi(e,t,r):M.some(r)),l=(e,t,o,r)=>hp(e,t,o).bind(c=>r(c)?l(e,t,c,r):M.some(c)),m=(e,t)=>{const o=e?t.firstChild:t.lastChild;return dt(o)?M.some(Le(o,e?0:o.data.length)):o?Ps(o)?M.some(e?Le.before(o):dA(o)):UC(e,t,o):M.none()},p=ae(Yi,!0),y=ae(Yi,!1),E=ae(m,!0),D=ae(m,!1),I="_mce_caret",U=e=>kt(e)&&e.id===I,K=(e,t)=>{let o=t;for(;o&&o!==e;){if(U(o))return o;o=o.parentNode}return null},ue=e=>V(e.start),ke=e=>Pn(e,"rng"),st=e=>Pn(e,"id"),It=e=>Pn(e,"name"),Bt=e=>lt.isArray(e.start),cn=e=>!It(e)&&nn(e.forward)?e.forward:!0,We=(e,t)=>(kt(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),rt=(e,t)=>{const o=M.from(Sw(e.getRoot(),t.start)),r=M.from(Sw(e.getRoot(),t.end));return er(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:cn(t)}})},xn=(e,t)=>{const r=(e.ownerDocument??document).createTextNode(Gr);e.appendChild(r),t.setStart(r,0),t.setEnd(r,0)},Vn=e=>!e.hasChildNodes(),Gt=(e,t)=>D(e).fold(pe,o=>(t.setStart(o.container(),o.offset()),t.setEnd(o.container(),o.offset()),!0)),Lo=(e,t,o)=>Vn(t)&&K(e,t)?(xn(t,o),!0):!1,Fo=(e,t,o,r)=>{const c=o[t?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let v=c.length-1;f&&v>=1;v--){const S=f.childNodes;if(Lo(u,f,r))return!0;if(c[v]>S.length-1)return Lo(u,f,r)?!0:Gt(f,r);f=S[c[v]]}dt(f)&&(b=Math.min(c[0],f.data.length)),kt(f)&&(b=Math.min(c[0],f.childNodes.length)),t?r.setStart(f,b):r.setEnd(f,b)}return!0},Ln=e=>dt(e)&&e.data.length>0,xr=(e,t,o)=>{const r=e.get(o.id+"_"+t),c=r?.parentNode,u=o.keep;if(r&&c){let f,b;if(t==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):Ln(r.nextSibling)?(f=r.nextSibling,b=0):Ln(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):Ln(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const v=r.previousSibling,S=r.nextSibling;lt.each(lt.grep(r.childNodes),R=>{dt(R)&&(R.data=R.data.replace(/\uFEFF/g,""))});let O;for(;O=e.get(o.id+"_"+t);)e.remove(O,!0);if(dt(S)&&dt(v)&&!po.browser.isOpera()){const R=v.data.length;v.appendData(S.data),e.remove(S),f=v,b=R}}return M.some(Le(f,b))}else return M.none()},Al=(e,t)=>{const o=e.createRng();return Fo(e,!0,t,o)&&Fo(e,!1,t,o)?M.some({range:o,forward:cn(t)}):M.none()},Am=(e,t)=>{const o=xr(e,"start",t),r=xr(e,"end",t);return er(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(We(e,c.container()),c.offset()),f.setEnd(We(e,u.container()),u.offset()),{range:f,forward:cn(t)}})},Bf=(e,t)=>M.from(e.select(t.name)[t.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),Wg=(e,t)=>{const o=e.dom;if(t){if(Bt(t))return Al(o,t);if(ue(t))return rt(o,t);if(st(t))return Am(o,t);if(It(t))return Bf(o,t);if(ke(t))return M.some({range:t.rng,forward:cn(t)})}return M.none()},Qo=(e,t,o)=>je(e,t,o),Nc=(e,t)=>{Wg(e,t).each(({range:o,forward:r})=>{e.setRng(o,r)})},Js=e=>kt(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",cc=(e=>t=>e===t)(Fs),Xi=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,Da=e=>!Xi(e)&&!cc(e)&&!tc(e),Bv=e=>{const t=[];if(e)for(let o=0;o<e.rangeCount;o++)t.push(e.getRangeAt(o));return t},db=e=>wo(e,t=>{const o=qr(t);return o?[ne.fromDom(o)]:[]}),_m=e=>Bv(e).length>1,ic=e=>Xe(db(e),Og),fA=e=>Fe(e,"td[data-mce-selected],th[data-mce-selected]"),DE=(e,t)=>{const o=fA(t);return o.length>0?o:ic(e)},Xt=e=>DE(Bv(e.selection.getSel()),ne.fromDom(e.getBody())),Qc=(e,t)=>lr(e,"table",t),gA=e=>{const t=e.startContainer,o=e.startOffset;return dt(t)?o===0?M.some(ne.fromDom(t)):M.none():M.from(t.childNodes[o]).map(ne.fromDom)},$v=e=>{const t=e.endContainer,o=e.endOffset;return dt(t)?o===t.data.length?M.some(ne.fromDom(t)):M.none():M.from(t.childNodes[o-1]).map(ne.fromDom)},RE=e=>zr(e).fold(it([e]),t=>[e].concat(RE(t))),Zg=e=>ar(e).fold(it([e]),t=>jn(t)==="br"?li(t).map(o=>[e].concat(Zg(o))).getOr([]):[e].concat(Zg(t))),hA=(e,t)=>er(gA(t),$v(t),(o,r)=>{const c=No(RE(e),ae(no,o)),u=No(Zg(e),ae(no,r));return c.isSome()&&u.isSome()}).getOr(!1),NE=(e,t,o,r)=>{const c=o,u=new nr(o,c),f=Il(e.schema.getMoveCaretBeforeOnEnterElements(),(v,S)=>!Wt(["td","th","table"],S.toLowerCase()));let b=o;do{if(dt(b)&&lt.trim(b.data).length!==0){r?t.setStart(b,0):t.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?t.setStartBefore(b):b.nodeName==="BR"?t.setEndBefore(b):t.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?t.setStart(c,0):t.setEnd(c,c.childNodes.length))},jC=e=>{const t=e.selection.getSel();return X(t)&&t.rangeCount>0},WC=(e,t)=>{const o=Xt(e);o.length>0?Ae(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),t(u,!0)}):t(e.selection.getRng(),!1)},ME=(e,t,o)=>{const r=Y2(e,t);o(r),e.moveToBookmark(r)},ZC=(e,t)=>e.startContainer===e.endContainer&&e.endOffset-e.startOffset===1&&t(e.startContainer.childNodes[e.startOffset]),I7=e=>ZC(e,Wc),L7=e=>ZC(e,dt),F7=e=>ZC(e,g1),GC=e=>Uo(e?.nodeType),qC=e=>kt(e)&&!Js(e)&&!U(e)&&!ff(e),y5=(e,t)=>{if(qC(t)&&!/^(TD|TH)$/.test(t.nodeName)){const o=e.getAttrib(t,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},C5=(e,t,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=As(u);ME(r,!0,()=>{t()}),f&&As(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&x5(c,r)},x5=(e,t)=>{const o=t.getRng(),{startContainer:r,startOffset:c}=o,u=t.getNode();if(!y5(e,u)&&kt(r)){const f=r.childNodes,b=e.getRoot();let v;if(c<f.length){const S=f[c];v=new nr(S,e.getParent(S,e.isBlock)??b)}else{const S=f[f.length-1];v=new nr(S,e.getParent(S,e.isBlock)??b),v.next(!0)}for(let S=v.current();S;S=v.next()){if(e.getContentEditable(S)==="false")return;if(dt(S)&&!pA(S)){o.setStart(S,0),t.setRng(o);return}}}},S5=(e,t,o)=>{if(e){const r=t?"nextSibling":"previousSibling";for(e=e[r];e;e=e[r])if(kt(e)||!pA(e))return e}},KC=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Xs(e,t),Iv=(e,t,o)=>e.schema.isValidChild(t,o),pA=(e,t=!1)=>{if(X(e)&&dt(e)){const o=t?e.data.replace(/ /g," "):e.data;return Oh(o)}else return!1},H7=e=>X(e)&&dt(e)&&e.length===0,z7=(e,t)=>{const o="[data-mce-cef-wrappable]",r=b5(e),c=rl(r)?o:`${o},${r}`;return zc(ne.fromDom(t),c)},w5=(e,t)=>{const o=e.dom;return qC(t)&&o.getContentEditable(t)==="false"&&z7(e,t)&&o.select('[contenteditable="true"]',t).length===0},Gg=(e,t)=>ce(e)?e(t):(X(t)&&(e=e.replace(/%(\w+)/g,(o,r)=>t[r]||o)),e),YC=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),PE=(e,t)=>{if(Yt(e))return null;{let o=String(e);return(t==="color"||t==="backgroundColor")&&(o=El(o)),t==="fontWeight"&&e===700&&(o="bold"),t==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},XC=(e,t,o)=>{const r=e.getStyle(t,o);return PE(r,o)},E5=(e,t)=>{let o;return e.getParent(t,r=>kt(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},BE=(e,t,o)=>e.getParents(t,o,e.getRoot()),bA=(e,t,o)=>{const r=e.formatter.get(t);return X(r)&&io(r,o)},$E=(e,t)=>bA(e,t,r=>{const c=u=>ce(u)||u.length>1&&u.charAt(0)==="%";return io(["styles","attributes"],u=>qo(r,u).exists(f=>{const b=At(f)?f:La(f);return io(b,c)}))}),T5=(e,t,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>Il(u,(f,b)=>io(r,v=>v===b));return bA(e,t,u=>{const f=c(u);return bA(e,o,b=>{const v=c(b);return ld(f,v)})})},Om=e=>Ko(e,"block"),V7=e=>Om(e)&&e.wrapper===!0,U7=e=>Om(e)&&e.wrapper!==!0,Id=e=>Ko(e,"selector"),Za=e=>Ko(e,"inline"),fQ=e=>Id(e)&&Za(e)&&jo(qo(e,"mixed"),!0),vA=e=>Id(e)&&e.expand!==!1&&!Za(e),gQ=e=>{const t=[];let o=e;for(;o;){if(dt(o)&&o.data!==Gr||o.childNodes.length>1)return[];kt(o)&&t.push(o),o=o.firstChild}return t},k5=e=>gQ(e).length>0,yA=e=>U(e.dom)&&k5(e.dom),QC=Js,A5=BE,Bs=pA,CA=KC,IE=e=>js(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,JC=(e,t)=>{let o=t;for(;o;){if(kt(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:t;o=o.parentNode}return t},$f=(e,t,o,r)=>{const c=t.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},LE=(e,t,o)=>$f(e,t,o,r=>cc(r)||Xi(r)),Lv=(e,t,o)=>$f(e,t,o,Da),xA=(e,t,o,r,c,u)=>{let f;const b=e.getParent(o,R=>mm(R)||e.isBlock(R)),v=X(b)?b:t,S=(R,P,z)=>{const ee=Ad(e),W=c?ee.backwards:ee.forwards;return M.from(W(R,P,(J,be)=>QC(J.parentNode)?-1:(f=J,z(c,J,be)),v))};return S(o,r,LE).bind(R=>u?S(R.container,R.offset+(c?-1:0),Lv):M.some(R)).orThunk(()=>f?M.some({container:f,offset:c?0:f.length}):M.none())},_5=(e,t,o,r,c)=>{const u=r[c];dt(r)&&rl(r.data)&&u&&(r=u);const f=A5(e,r);for(let b=0;b<f.length;b++)for(let v=0;v<t.length;v++){const S=t[v];if(!(X(S.collapsed)&&S.collapsed!==o.collapsed)&&Id(S)&&e.is(f[b],S.selector))return f[b]}return r},O5=(e,t,o,r)=>{let c=o;const u=e.getRoot(),f=t[0];if(Om(f)&&(c=f.wrapper?null:e.getParent(o,f.block,u)),!c){const b=e.getParent(o,"LI,TD,TH,SUMMARY")??u;c=e.getParent(dt(o)?o.parentNode:o,v=>v!==u&&CA(e.schema,v),b)}if(c&&Om(f)&&f.wrapper&&(c=A5(e,c,"ul,ol").reverse()[0]||c),!c)for(c=o;c&&c[r]&&!e.isBlock(c[r])&&(c=c[r],!YC(c,"br")););return c||o},SA=(e,t,o,r)=>{const c=o.parentNode;return X(o[r])?!1:c===t||Yt(c)||e.isBlock(c)?!0:SA(e,t,c,r)},FE=(e,t,o,r,c,u)=>{let f=o;const b=c?"previousSibling":"nextSibling",v=e.getRoot();if(dt(o)&&!Bs(o)&&(c?r>0:r<o.data.length))return o;for(;f;){if(mm(f))return o;if(!t[0].block_expand&&e.isBlock(f))return u?f:o;for(let S=f[b];S;S=S[b]){const O=dt(S)&&!SA(e,v,S,b);if(!QC(S)&&!IE(S)&&!Bs(S,O))return f}if(f===v||f.parentNode===v){o=f;break}f=f.parentNode}return o},HE=e=>QC(e.parentNode)||QC(e),If=(e,t,o,r={})=>{const{includeTrailingSpace:c=!1,expandToBlock:u=!0}=r,f=e.getParent(t.commonAncestorContainer,z=>mm(z)),b=X(f)?f:e.getRoot();let{startContainer:v,startOffset:S,endContainer:O,endOffset:R}=t;const P=o[0];return kt(v)&&v.hasChildNodes()&&(v=Tf(v,S),dt(v)&&(S=0)),kt(O)&&O.hasChildNodes()&&(O=Tf(O,t.collapsed?R:R-1),dt(O)&&(R=O.data.length)),v=JC(e,v),O=JC(e,O),HE(v)&&(v=QC(v)?v:v.parentNode,t.collapsed?v=v.previousSibling||v:v=v.nextSibling||v,dt(v)&&(S=t.collapsed?v.length:0)),HE(O)&&(O=QC(O)?O:O.parentNode,t.collapsed?O=O.nextSibling||O:O=O.previousSibling||O,dt(O)&&(R=t.collapsed?0:O.length)),t.collapsed&&(xA(e,b,v,S,!0,c).each(({container:W,offset:J})=>{v=W,S=J}),xA(e,b,O,R,!1,c).each(({container:W,offset:J})=>{O=W,R=J})),(Za(P)||P.block_expand)&&((!Za(P)||!dt(v)||S===0)&&(v=FE(e,o,v,S,!0,u)),(!Za(P)||!dt(O)||R===O.data.length)&&(O=FE(e,o,O,R,!1,u))),vA(P)&&(v=_5(e,o,t,v,"previousSibling"),O=_5(e,o,t,O,"nextSibling")),(Om(P)||Id(P))&&(v=O5(e,o,v,"previousSibling"),O=O5(e,o,O,"nextSibling"),Om(P)&&(e.isBlock(v)||(v=FE(e,o,v,S,!0,u),dt(v)&&(S=0)),e.isBlock(O)||(O=FE(e,o,O,R,!1,u),dt(O)&&(R=O.data.length)))),kt(v)&&v.parentNode&&(S=e.nodeIndex(v),v=v.parentNode),kt(O)&&O.parentNode&&(R=e.nodeIndex(O)+1,O=O.parentNode),{startContainer:v,startOffset:S,endContainer:O,endOffset:R}},Ld=(e,t,o)=>{const r=t.startOffset,c=Tf(t.startContainer,r),u=t.endOffset,f=Tf(t.endContainer,u-1),b=W=>{const J=W[0];dt(J)&&J===c&&r>=J.data.length&&W.splice(0,1);const be=W[W.length-1];return u===0&&W.length>0&&be===f&&dt(be)&&W.splice(W.length-1,1),W},v=(W,J,be)=>{const ye=[];for(;W&&W!==be;W=W[J])ye.push(W);return ye},S=(W,J)=>e.getParent(W,be=>be.parentNode===J,J),O=(W,J,be)=>{const ye=be?"nextSibling":"previousSibling";for(let Se=W,Ve=Se.parentNode;Se&&Se!==J;Se=Ve){Ve=Se.parentNode;const et=v(Se===W?Se:Se[ye],ye);et.length&&(be||et.reverse(),o(b(et)))}};if(c===f)return o(b([c]));const R=e.findCommonAncestor(c,f)??e.getRoot();if(e.isChildOf(c,f))return O(c,R,!0);if(e.isChildOf(f,c))return O(f,R);const P=S(c,R)||c,z=S(f,R)||f;O(c,P,!0);const ee=v(P===c?P:P.nextSibling,"nextSibling",z===f?z.nextSibling:z);ee.length&&o(b(ee)),O(f,z)},mb=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]","div.mce-footnotes"],D5=e=>Ao(e)&&Ta(e)===Gr,j7=(e,t,o,r)=>Vc(t).fold(()=>"skipping",c=>r==="br"||D5(t)?"valid":N2(t)?"existing":U(t.dom)?"caret":io(mb,u=>zc(t,u))?"valid-block":!Iv(e,o,r)||!Iv(e,jn(c),o)?"invalid-child":"valid"),W7=(e,t)=>{const o=If(e.dom,t,[{inline:"span"}]);t.setStart(o.startContainer,o.startOffset),t.setEnd(o.endContainer,o.endOffset),e.selection.setRng(t)},R5=(e,t,o,r,c,u)=>{const{uid:f=t,...b}=o;xc(e,yf()),Ts(e,`${kd()}`,f),Ts(e,`${nu()}`,r);const{attributes:v={},classes:S=[]}=c(f,b);if(sa(e,v),gg(e,S),u){S.length>0&&Ts(e,`${Gh()}`,S.join(","));const O=en(v);O.length>0&&Ts(e,`${R0()}`,O.join(","))}},Z7=e=>{ur(e,yf()),cr(e,`${kd()}`),cr(e,`${nu()}`),cr(e,`${Zh()}`);const t=fi(e,`${R0()}`).map(r=>r.split(",")).getOr([]),o=fi(e,`${Gh()}`).map(r=>r.split(",")).getOr([]);Ae(t,r=>cr(e,r)),Eh(e,o),cr(e,`${Gh()}`),cr(e,`${R0()}`)},N5=(e,t,o,r,c)=>{const u=ne.fromTag("span",e);return R5(u,t,o,r,c,!1),u},G7=(e,t,o,r,c,u)=>{const f=[],b=N5(e.getDoc(),o,u,r,c),v=Ic(),S=()=>{v.clear()},O=()=>v.get().getOrThunk(()=>{const ee=Cr(b);return f.push(ee),v.set(ee),ee}),R=ee=>{Ae(ee,P)},P=ee=>{switch(j7(e,ee,"span",jn(ee))){case"invalid-child":{S();const J=Ns(ee);R(J),S();break}case"valid-block":{S(),R5(ee,o,u,r,c,!0);break}case"valid":{const J=O();Uc(ee,J);break}}},z=ee=>{const W=hn(ee,ne.fromDom);R(W)};return Ld(e.dom,t,ee=>{S(),z(ee)}),f},M5=(e,t,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=Xt(e).length>0,b=rr("mce-annotation");if(u.collapsed&&!f&&W7(e,u),c.getRng().collapsed&&!f){const v=N5(e.getDoc(),b,r,t,o.decorate);Ru(v,Fs),c.getRng().insertNode(v.dom),c.select(v.dom)}else ME(c,!1,()=>{WC(e,v=>{G7(e,v,b,t,o.decorate,r)})})})},P5=e=>{const t=P0();D1(e,t);const o=M0(e,t),r=br("span"),c=u=>{Ae(u,f=>{r(f)?yc(f):Z7(f)})};return{register:(u,f)=>{t.register(u,f)},annotate:(u,f)=>{t.lookup(u).each(b=>{M5(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{N0(e,M.some(u)).each(({elements:f})=>{const b=e.selection.getBookmark();c(f),e.selection.moveToBookmark(b)})},removeAll:u=>{const f=e.selection.getBookmark();qn(bm(e,u),(b,v)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=bm(e,u);return mc(f,b=>hn(b,v=>v.dom))}}},Fv=e=>({getBookmark:ae(Qo,e),moveToBookmark:ae(Nc,e)});Fv.isBookmarkNode=Js;const B5=(e,t,o)=>o.collapsed?!1:io(o.getClientRects(),r=>F2(r,e,t)),q7=(e,t)=>{const o=Ao(t)?Ta(t).length:Ns(t).length+1;return e>o?o:e<0?0:e},K7=e=>uf.range(e.start,q7(e.soffset,e.start),e.finish,q7(e.foffset,e.finish)),Ra=(e,t)=>!g0(t.dom)&&(oc(e,t)||no(e,t)),ex=e=>t=>Ra(e,t.start)&&Ra(e,t.finish),lc=e=>e.inline||po.browser.isFirefox(),Fd=e=>uf.range(ne.fromDom(e.startContainer),e.startOffset,ne.fromDom(e.endContainer),e.endOffset),Y7=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?M.none():M.from(t.getRangeAt(0))).map(Fd)},$5=e=>{const t=fl(e);return Y7(t.dom).filter(ex(e))},X7=(e,t)=>M.from(t).filter(ex(e)).map(K7),wA=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),M.some(t)}catch{return M.none()}},zE=e=>{const t=lc(e)?$5(ne.fromDom(e.getBody())):M.none();e.bookmark=t.isSome()?t:e.bookmark},VE=e=>(e.bookmark?e.bookmark:M.none()).bind(o=>X7(ne.fromDom(e.getBody()),o)).bind(wA),Q7=e=>{VE(e).each(t=>e.selection.setRng(t))},I5={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},uu=(e,t)=>(Uo(t)||(t=0),window.setTimeout(e,t)),wi=(e,t)=>(Uo(t)||(t=0),window.setInterval(e,t)),Hd={setEditorTimeout:(e,t,o)=>uu(()=>{e.removed||t()},o),setEditorInterval:(e,t,o)=>{const r=wi(()=>{e.removed?window.clearInterval(r):t()},o);return r}},Dm=e=>e.type==="nodechange"&&e.selectionChange,EA=(e,t)=>{const o=()=>{t.throttle()};mo.DOM.bind(document,"mouseup",o),e.on("remove",()=>{mo.DOM.unbind(document,"mouseup",o)})},J7=(e,t)=>{e.on("mouseup touchend",o=>{t.throttle()})},eH=(e,t)=>{J7(e,t),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Dm(o)||zE(e)})},L5=e=>{const t=Rt(()=>{zE(e)},0);e.on("init",()=>{e.inline&&EA(e,t),eH(e,t)}),e.on("remove",()=>{t.cancel()})};let Hv;const UE=mo.DOM,tH=e=>kt(e)&&I5.isEditorUIElement(e),tx=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},jE=(e,t)=>{const o=lp(e);return UE.getParent(t,c=>tH(c)||(o?e.dom.is(c,o):!1))!==null},TA=e=>{try{const t=Vr(ne.fromDom(e.getElement()));return Hi(t).fold(()=>document.body,o=>o.dom)}catch{return document.body}},nH=(e,t)=>{const o=t.editor;L5(o);const r=(c,u)=>{if(nb(c)&&c.inline!==!0){const f=ne.fromDom(c.getContainer());u(f,"tox-edit-focus")}};o.on("focusin",()=>{const c=e.focusedEditor;tx(TA(o))&&r(o,xc),c!==o&&(c&&c.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:c}),o.focus(!0))}),o.on("focusout",()=>{Hd.setEditorTimeout(o,()=>{const c=e.focusedEditor;(!tx(TA(o))||c!==o)&&r(o,ur),!jE(o,TA(o))&&c===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),Hv||(Hv=c=>{const u=e.activeEditor;u&&n1(c).each(f=>{const b=f;b.ownerDocument===document&&b!==document.body&&!jE(u,b)&&e.focusedEditor===u&&(u.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},UE.bind(document,"focusin",Hv))},oH=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Hv&&(UE.unbind(document,"focusin",Hv),Hv=null)},F5=e=>{e.on("AddEditor",ae(nH,e)),e.on("RemoveEditor",ae(oH,e))},kA=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="true"),H5=(e,t)=>e.dom.getParent(t,o=>e.dom.getContentEditable(o)==="false")!==null,AA=e=>e.collapsed?M.from(Tf(e.startContainer,e.startOffset)).map(ne.fromDom):M.none(),sH=(e,t)=>AA(t).bind(o=>$0(o)?M.some(o):oc(e,o)?M.none():M.some(e)),rH=(e,t)=>{sH(ne.fromDom(e.getBody()),t).bind(o=>E(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},_A=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},aH=e=>Zl(e)||o1(e).isSome(),z5=e=>X(e.iframeElement)&&Zl(ne.fromDom(e.iframeElement)),cH=e=>{const t=e.getBody();return t&&aH(ne.fromDom(t))},iH=e=>{const t=Vr(ne.fromDom(e.getElement()));return Hi(t).filter(o=>!tx(o.dom)&&jE(e,o.dom)).isSome()},zv=e=>e.inline?cH(e):z5(e),V5=e=>zv(e)||iH(e),pQ=e=>{const t=e.selection,o=e.getBody();let r=t.getRng();e.quirks.refreshContentEditable();const c=f=>{VE(f).each(b=>{f.selection.setRng(b),r=b})};!zv(e)&&e.hasEditableRoot()&&c(e);const u=kA(e,t.getNode());if(u&&e.dom.isChildOf(u,o)){H5(e,u)||_A(o),_A(u),e.hasEditableRoot()||c(e),rH(e,r),WE(e);return}e.inline||(po.browser.isOpera()||_A(o),e.getWin().focus()),(po.browser.isFirefox()||e.inline)&&(_A(o),rH(e,r)),WE(e)},WE=e=>e.editorManager.setActive(e),U5=(e,t)=>{e.removed||(t?WE(e):pQ(e))},$t={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||$t.metaKeyPressed(e),metaKeyPressed:e=>po.os.isMacOS()||po.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},fb="data-mce-selected",lH=`table,img,figure.image,hr,video,span.mce-preview-object,details,${g2}`,uH=Math.abs,OA=Math.round,j5={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},dH=e=>e.type==="longpress"||e.type.indexOf("touch")===0,mH=(e,t)=>{const o=t.dom,r=t.getDoc(),c=document,u=t.getBody();let f,b,v,S,O,R,P,z,ee,W,J,be,ye,Se,Ve;const et=Ge=>X(Ge)&&(xl(Ge)||o.is(Ge,"figure.image")),Pt=Ge=>Sl(Ge)||o.hasClass(Ge,"mce-preview-object"),un=(Ge,vt)=>{if(dH(Ge)){const qt=Ge.touches[0];return et(Ge.target)&&!B5(qt.clientX,qt.clientY,vt)}else return et(Ge.target)&&!B5(Ge.clientX,Ge.clientY,vt)},He=Ge=>{const vt=Ge.target;un(Ge,t.selection.getRng())&&!Ge.isDefaultPrevented()&&t.selection.select(vt)},Me=Ge=>o.hasClass(Ge,"mce-preview-object")&&X(Ge.firstElementChild)?[Ge,Ge.firstElementChild]:o.is(Ge,"figure.image")?[Ge.querySelector("img")]:[Ge],Ue=Ge=>{const vt=sE(t);return!vt||t.mode.isReadOnly()||Ge.getAttribute("data-mce-resize")==="false"||Ge===t.getBody()?!1:o.hasClass(Ge,"mce-preview-object")&&X(Ge.firstElementChild)?zc(ne.fromDom(Ge.firstElementChild),vt):zc(ne.fromDom(Ge),vt)},Nt=(Ge,vt)=>{if(Pt(vt))return Ge.create("img",{src:po.transparentSrc});if(Zc(vt)){const ro=kn(S.name,"n")?Gs:hr,Xn=vt.cloneNode(!0);return ro(Ge.select("tr",Xn)).each(ts=>{const Nl=Ge.select("td,th",ts);Ge.setStyle(ts,"height",null),Ae(Nl,Jd=>Ge.setStyle(Jd,"height",null))}),Xn}else return vt.cloneNode(!0)},Dn=(Ge,vt,qt)=>{Ge[vt]=qt;const ro=400;if(Ge.width>ro&&!(vt==="width"&&qt<ro))Ge[vt]=qt,o.setStyle(Ge,vt,qt);else{const Xn=vt==="height"?ro*(W??1):ro;Ge[vt]=Xn,o.setStyle(Ge,vt,Xn)}},Rn=(Ge,vt,qt)=>{if(X(qt)){const ro=Me(Ge);Ae(ro,Xn=>{b1(Xn)?Dn(Xn,vt,qt):Xn.style[vt]||!t.schema.isValid(Xn.nodeName.toLowerCase(),vt)?o.setStyle(Xn,vt,qt):o.setAttrib(Xn,vt,""+qt)})}},go=(Ge,vt,qt)=>{Rn(Ge,"width",vt),Rn(Ge,"height",qt)},Yo=Ge=>{let vt,qt,ro,Xn,ts;vt=Ge.screenX-R,qt=Ge.screenY-P,be=vt*S[2]+z,ye=qt*S[3]+ee,be=be<5?5:be,ye=ye<5?5:ye,(et(f)||Pt(f)||b1(f))&&L3(t)!==!1?ro=!$t.modifierPressed(Ge):ro=$t.modifierPressed(Ge),ro&&(uH(vt)>uH(qt)?(ye=OA(be*W),be=OA(ye/W)):(be=OA(ye/W),ye=OA(be*W))),go(b,be,ye),Xn=S.startPos.x+vt,ts=S.startPos.y+qt,Xn=Xn>0?Xn:0,ts=ts>0?ts:0,o.setStyles(v,{left:Xn,top:ts,display:"block"}),v.innerHTML=be+" &times; "+ye,vt=u.scrollWidth-Se,qt=u.scrollHeight-Ve,vt+qt!==0&&o.setStyles(v,{left:Xn-vt,top:ts-qt}),J||(Bw(t,f,z,ee,"corner-"+S.name),J=!0)},Ss=()=>{const Ge=J;J=!1,Ge&&(Rn(f,"width",be),Rn(f,"height",ye)),o.unbind(r,"mousemove",Yo),o.unbind(r,"mouseup",Ss),c!==r&&(o.unbind(c,"mousemove",Yo),o.unbind(c,"mouseup",Ss)),o.remove(b),o.remove(v),o.remove(O),Is(f),Ge&&(iC(t,f,be,ye,"corner-"+S.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),t.nodeChanged()},Is=Ge=>{Vo();const vt=o.getPos(Ge,u),qt=vt.x,ro=vt.y,Xn=Ge.getBoundingClientRect(),ts=Xn.width||Xn.right-Xn.left,Nl=Xn.height||Xn.bottom-Xn.top;f!==Ge&&(Rl(),f=Ge,be=ye=0);const Jd=t.dispatch("ObjectSelected",{target:Ge});Ue(Ge)&&!Jd.isDefaultPrevented()?qn(j5,(cd,yu)=>{const Hp=tl=>{const mh=Me(f)[0];R=tl.screenX,P=tl.screenY,z=mh.clientWidth,ee=mh.clientHeight,W=ee/z,S=cd,S.name=yu,S.startPos={x:ts*cd[0]+qt,y:Nl*cd[1]+ro},Se=u.scrollWidth,Ve=u.scrollHeight,O=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(O,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Nt(o,f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:qt,top:ro,margin:0}),go(b,ts,Nl),b.removeAttribute(fb),u.appendChild(b),o.bind(r,"mousemove",Yo),o.bind(r,"mouseup",Ss),c!==r&&(o.bind(c,"mousemove",Yo),o.bind(c,"mouseup",Ss)),v=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},z+" &times; "+ee)};let ni=o.get("mceResizeHandle"+yu);ni&&o.remove(ni),ni=o.add(u,"div",{id:"mceResizeHandle"+yu,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+yu+"-resize; margin:0; padding:0"}),o.bind(ni,"mousedown",tl=>{tl.stopImmediatePropagation(),tl.preventDefault(),Hp(tl)}),cd.elm=ni,o.setStyles(ni,{left:ts*cd[0]+qt-ni.offsetWidth/2,top:Nl*cd[1]+ro-ni.offsetHeight/2})}):Rl(!1)},Ba=Rt(Is,0),Rl=(Ge=!0)=>{Ba.cancel(),Vo(),f&&Ge&&f.removeAttribute(fb),qn(j5,(vt,qt)=>{const ro=o.get("mceResizeHandle"+qt);ro&&(o.unbind(ro),o.remove(ro))})},Lt=(Ge,vt)=>o.isChildOf(Ge,vt),vn=Ge=>{if(J||t.removed||t.composing)return;const vt=Ge.type==="mousedown"?Ge.target:e.getNode(),qt=fa(ne.fromDom(vt),lH).map(Xn=>Xn.dom).filter(Xn=>o.isEditable(Xn.parentElement)||Xn.nodeName==="IMG"&&o.isEditable(Xn)).getOrUndefined(),ro=X(qt)?o.getAttrib(qt,fb,"1"):"1";if(Ae(o.select(`img[${fb}],hr[${fb}]`),Xn=>{Xn.removeAttribute(fb)}),X(qt)&&Lt(qt,u)&&V5(t)){Do();const Xn=e.getStart(!0);if(Lt(Xn,qt)&&Lt(e.getEnd(!0),qt)){o.setAttrib(qt,fb,ro),Ba.throttle(qt);return}}Rl()},Vo=()=>{qn(j5,Ge=>{Ge.elm&&(o.unbind(Ge.elm),delete Ge.elm)})},Do=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{Do(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",vn),t.on("keyup compositionend",Ge=>{f&&f.nodeName==="TABLE"&&vn(Ge)}),t.on("hide blur",Rl),t.on("contextmenu longpress",He,!0)}),t.on("remove",Vo),{isResizable:Ue,showResizeRect:Is,hideResizeRect:Rl,updateResizeRect:vn,destroy:()=>{Ba.cancel(),f=b=O=null}}},W5=(e,t,o)=>{const r=fl(ne.fromDom(o));return d0(r.dom,e,t).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},qg=(e,t)=>X(e)&&X(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,fH=(e,t,o)=>{let r=e;for(;r&&r!==t;){if(o(r))return r;r=r.parentNode}return null},DA=(e,t,o)=>fH(e,t,o)!==null,Z5=(e,t,o)=>DA(e,t,r=>r.nodeName===o),G5=(e,t)=>qi(e)&&!DA(e,t,U),RA=(e,t,o)=>{const r=t.parentNode;if(r){const c=new nr(t,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(js(u))return!0}return!1},NA=(e,t)=>e.previousSibling?.nodeName===t,bQ=(e,t)=>{let o=t;for(;o&&o!==e;){if(As(o))return!0;o=o.parentNode}return!1},MA=(e,t,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let v,S;if(!b)return M.none();const O=e.getParent(b,e.isBlock)||u;if(r&&js(c)&&t&&e.isEmpty(O))return M.some(Le(b,e.nodeIndex(c)));const R=new nr(c,O);for(;S=R[r?"prev":"next"]();){if(e.getContentEditableParent(S)==="false"||G5(S,u))return M.none();if(dt(S)&&S.data.length>0)return Z5(S,u,"A")?M.none():M.some(Le(S,r?S.data.length:0));if(e.isBlock(S)||f[S.nodeName.toLowerCase()])return M.none();v=S}return Zn(v)?M.none():o&&v?M.some(Le(v,0)):M.none()},gH=(e,t,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,v=o?r.startOffset:r.endOffset;const S=kt(b)&&v===b.childNodes.length,O=e.schema.getNonEmptyElements();let R=o;if(qi(b))return M.none();if(kt(b)&&v>b.childNodes.length-1&&(R=!1),dm(b)&&(b=c,v=0),b===c){if(R&&(u=b.childNodes[v>0?v-1:0],u&&(qi(u)||O[u.nodeName]||Zc(u))))return M.none();if(b.hasChildNodes()){if(v=Math.min(!R&&v>0?v-1:v,b.childNodes.length-1),b=b.childNodes[v],v=dt(b)&&S?b.data.length:0,!t&&b===c.lastChild&&Zc(b)||bQ(c,b)||qi(b)||p1(b))return M.none();if(b.hasChildNodes()&&!Zc(b)){u=b;const P=new nr(b,c);do{if(As(u)||qi(u)){f=!1;break}if(dt(u)&&u.data.length>0){v=R?0:u.data.length,b=u,f=!0;break}if(O[u.nodeName.toLowerCase()]&&!m2(u)){v=e.nodeIndex(u),b=u.parentNode,R||v++,f=!0;break}}while(u=R?P.next():P.prev())}}}return t&&(dt(b)&&v===0&&MA(e,S,t,!0,b).each(P=>{b=P.container(),v=P.offset(),f=!0}),kt(b)&&(u=b.childNodes[v],u||(u=b.childNodes[v-1]),u&&js(u)&&!NA(u,"A")&&!RA(e,u,!1)&&!RA(e,u,!0)&&MA(e,S,t,!0,u).each(P=>{b=P.container(),v=P.offset(),f=!0}))),R&&!t&&dt(b)&&v===b.data.length&&MA(e,S,t,!1,b).each(P=>{b=P.container(),v=P.offset(),f=!0}),f&&b?M.some(Le(b,v)):M.none()},ZE=(e,t)=>{const o=t.collapsed,r=t.cloneRange(),c=Le.fromRangeStart(t);return gH(e,o,!0,r).each(u=>{(!o||!Le.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||gH(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),qg(t,r)?M.none():M.some(r)},GE=(e,t)=>e.splitText(t),Vv=e=>{let t=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(t===r&&dt(t)){if(o>0&&o<t.data.length)if(r=GE(t,o),t=r.previousSibling,c>o){c=c-o;const u=GE(r,c).previousSibling;t=r=u,c=u.data.length,o=0}else c=0}else if(dt(t)&&o>0&&o<t.data.length&&(t=GE(t,o),o=0),dt(r)&&c>0&&c<r.data.length){const u=GE(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:t,startOffset:o,endContainer:r,endOffset:c}},Rm=e=>({walk:(u,f)=>Ld(e,u,f),split:Vv,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=If(e,u,[{inline:"span"}],{includeTrailingSpace:!1,expandToBlock:!1}),v=e.createRng();return v.setStart(b.startContainer,b.startOffset),v.setEnd(b.endContainer,b.endOffset),v}return u},normalize:u=>ZE(e,u).fold(pe,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Rm.compareRanges=qg,Rm.getCaretRangeFromPoint=W5,Rm.getSelectedNode=qr,Rm.getNode=Tf;const hH=(e,t)=>e.view(t).fold(it([]),r=>{const c=e.owner(r),u=hH(e,c);return[r].concat(u)}),vQ=(e,t)=>{const o=t.owner(e);return hH(t,o)};var CQ=Object.freeze({__proto__:null,view:e=>(e.dom===document?M.none():M.from(e.dom.defaultView?.frameElement)).map(ne.fromDom),owner:e=>Li(e)});const pH=e=>{const t=Ch(),o=c1(t),r=vQ(e,CQ),c=fg(e),u=Qn(r,(f,b)=>{const v=fg(b);return{left:f.left+v.left,top:f.top+v.top}},{left:0,top:0});return pl(u.left+c.left+o.left,u.top+c.top+o.top)},qE=e=>jn(e)==="textarea",bH=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),q5=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},xQ=(e,t)=>{const o=Ns(e);if(o.length===0||qE(e))return{element:e,offset:t};if(t<o.length&&!qE(o[t]))return{element:o[t],offset:0};{const r=o[o.length-1];return qE(r)?{element:e,offset:t}:jn(r)==="img"?{element:r,offset:1}:Ao(r)?{element:r,offset:Ta(r).length}:{element:r,offset:Ns(r).length}}},K5=(e,t)=>{const o=mg(e),r=n2(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:t}},Y5=(e,t)=>{const o=xQ(e,t),r=ne.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Gr+"</span>");return da(o.element,r),K5(r,()=>Xo(r))},vH=e=>K5(ne.fromDom(e),_t),X5=(e,t,o,r)=>{CH(e,(c,u)=>yH(e,t,o,r),o)},Q5=(e,t,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(bH(e,u))return;const f=c1(t).top;o(e,t,f,r,c),q5(e,u)},yH=(e,t,o,r)=>{const c=ne.fromDom(e.getBody()),u=ne.fromDom(e.getDoc());r1(c);const f=Y5(ne.fromDom(o.startContainer),o.startOffset);Q5(e,u,t,f,r),f.cleanup()},J5=(e,t,o,r)=>{const c=ne.fromDom(e.getDoc());Q5(e,c,o,vH(t),r)},CH=(e,t,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;t(ne.fromDom(r),ne.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},PA=(e,t,o,r,c)=>{const u=t.pos,f=30;if(r)c0(u.left,Math.max(0,u.top-f),c);else{const b=u.top-o+t.height+f;c0(-e.getBody().getBoundingClientRect().left,b,c)}},eM=(e,t,o,r,c,u)=>{const f=r+o,b=c.pos.top,v=c.bottom,S=v-b>=r;b<o?PA(e,c,r,u!==!1,t):b>f?PA(e,c,r,S?u!==!1:u===!0,t):v>f&&!S&&PA(e,c,r,u===!0,t)},tM=(e,t,o,r,c)=>{const u=fl(t).dom.innerHeight;eM(e,t,o,u,r,c)},nM=(e,t,o,r,c)=>{const u=fl(t).dom.innerHeight;eM(e,t,o,u,r,c);const f=pH(r.element),b=gi(window);f.top<b.y?Vi(r.element,c!==!1):f.top>b.bottom&&Vi(r.element,c===!0)},xH=(e,t,o)=>X5(e,tM,t,o),SH=(e,t,o)=>J5(e,t,tM,o),wH=(e,t,o)=>X5(e,nM,t,o),EH=(e,t,o)=>J5(e,t,nM,o),Ft=(e,t,o)=>{(e.inline?SH:EH)(e,t,o)},du=(e,t,o)=>{(e.inline?xH:wH)(e,t,o)},TH=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),oM=(e,t,o,r,c)=>{const u=o?t.startContainer:t.endContainer,f=o?t.startOffset:t.endOffset;return M.from(u).map(ne.fromDom).map(b=>!r||!t.collapsed?Fi(b,c(b,f)).getOr(b):b).bind(b=>Hs(b)?M.some(b):sc(b).filter(Hs)).map(b=>b.dom).getOr(e)},KE=(e,t,o=!1)=>oM(e,t,!0,o,(r,c)=>Math.min(bd(r),c)),BA=(e,t,o=!1)=>oM(e,t,!1,o,(r,c)=>c>0?c-1:c),$A=(e,t)=>{const o=e;for(;e&&dt(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||o},IA=(e,t)=>{if(!t)return e;let o=t.startContainer,r=t.endContainer;const c=t.startOffset,u=t.endOffset;let f=t.commonAncestorContainer;t.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),dt(o)&&dt(r)&&(o.length===c?o=$A(o.nextSibling,!0):o=o.parentNode,u===0?r=$A(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=dt(f)?f.parentNode:f;return Wc(b)?b:e},kH=(e,t,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||KE(u,t,t.collapsed),e.isBlock),b=e.getParent(r||BA(u,t,t.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let v;const S=new nr(f,u);for(;(v=S.next())&&v!==b;)e.isBlock(v)&&c.push(v)}return b&&f!==b&&b!==u&&c.push(b),c},sM=(e,t,o)=>M.from(t).bind(r=>M.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(NE(e,f,r,!0),NE(e,f,r,!1)),f})),LA=(e,t)=>hn(t,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),AH={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},YE=(e,t,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==t){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==t;f=f.parent)if(u=f[c],u)return u}},_H=e=>{const t=e.value??"";if(!Oh(t))return!1;const o=e.parent;return!(o&&(o.name!=="span"||o.attr("style"))&&/^[ ]+$/.test(t))},rM=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class Na{static create(t,o){const r=new Na(t,AH[t]||1);return o&&qn(o,(c,u)=>{r.attr(u,c)}),r}name;type;attributes;value;parent;firstChild;lastChild;next;prev;raw;constructor(t,o){this.name=t,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}replace(t){const o=this;return t.parent&&t.remove(),o.insert(t,o),o.remove(),o}attr(t,o){const r=this;if(!V(t))return X(t)&&qn(t,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(t in c.map){delete c.map[t];let u=c.length;for(;u--;)if(c[u].name===t)return c.splice(u,1),r}return r}if(t in c.map){let u=c.length;for(;u--;)if(c[u].name===t){c[u].value=o;break}}else c.push({name:t,value:o});return c.map[t]=o,r}return c.map[t]}}clone(){const t=this,o=new Na(t.name,t.type),r=t.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=t.value,o}wrap(t){const o=this;return o.parent&&(o.parent.insert(t,o),t.append(o)),o}unwrap(){const t=this;for(let o=t.firstChild;o;){const r=o.next;t.insert(o,t,!0),o=r}t.remove()}remove(){const t=this,o=t.parent,r=t.next,c=t.prev;return o&&(o.firstChild===t?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===t?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),t.parent=t.next=t.prev=null),t}append(t){const o=this;t.parent&&t.remove();const r=o.lastChild;return r?(r.next=t,t.prev=r,o.lastChild=t):o.lastChild=o.firstChild=t,t.parent=o,t}insert(t,o,r){t.parent&&t.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=t:o.prev&&(o.prev.next=t),t.prev=o.prev,t.next=o,o.prev=t):(o===c.lastChild?c.lastChild=t:o.next&&(o.next.prev=t),t.next=o.next,t.prev=o,o.next=t),t.parent=c,t}getAll(t){const o=this,r=[];for(let c=o.firstChild;c;c=YE(c,o))c.name===t&&r.push(c);return r}children(){const t=this,o=[];for(let r=t.firstChild;r;r=r.next)o.push(r);return o}empty(){const t=this;if(t.firstChild){const o=[];for(let c=t.firstChild;c;c=YE(c,t))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,o={},r){const c=this;let u=c.firstChild;if(rM(c))return!1;if(u)do{if(u.type===1){if(u.attr("data-mce-bogus"))continue;if(t[u.name]||rM(u))return!1}if(u.type===8||u.type===3&&!_H(u)||u.type===3&&u.parent&&o[u.parent.name]&&Oh(u.value??"")||r&&r(u))return!1}while(u=YE(u,c));return!0}walk(t){return YE(this,null,t)}}const OH=lt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),aM=e=>V(e.nodeValue)&&e.nodeValue.includes(Gr),cM=e=>`${e.length===0?"":`${hn(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,DH=(e,t)=>t.querySelectorAll(cM(e)),iM=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>aM(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),FA=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(aM(t)){const o=t.parentNode;return o&&Pn(OH,o.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),XE=e=>iM(e).nextNode()!==null,RH=e=>FA(e).nextNode()!==null,NH=(e,t)=>t.querySelector(cM(e))!==null,MH=(e,t)=>{Ae(DH(e,t),o=>{const r=ne.fromDom(o);bs(r,"data-mce-bogus")==="all"?Xo(r):Ae(e,c=>{ws(r,c)&&cr(r,c)})})},lM=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},PH=A(lM,iM),BH=A(lM,FA),uM=(e,t)=>{const o=[{condition:ae(NH,t),action:ae(MH,t)},{condition:XE,action:PH},{condition:RH,action:BH}];let r=e,c=!1;return Ae(o,({condition:u,action:f})=>{u(r)&&(c||(r=e.cloneNode(!0),c=!0),f(r))}),r},dM=e=>{const t=Fe(e,"[data-mce-bogus]");Ae(t,o=>{bs(o,"data-mce-bogus")==="all"?Xo(o):ou(o)?(da(o,ne.fromText(Lc)),Xo(o)):yc(o)})},mM=e=>{const t=Fe(e,"input");Ae(t,o=>{cr(o,"name")})},$H=(e,t)=>{const o=Rr(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(r,"")},IH=(e,t)=>{const o=e.getDoc(),r=Vr(ne.fromDom(e.getBody())),c=ne.fromTag("div",o);Ts(c,"data-mce-bogus","all"),Cc(c,{position:"fixed",left:"-9999999px",top:"0"}),Ru(c,t.innerHTML),dM(c),mM(c);const u=s0(r);yo(u,c);const f=Xc(c.dom.innerText);return Xo(c),f},LH=(e,t,o)=>{let r;return t.format==="raw"?r=lt.trim(Xc(uM(o,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?r=IH(e,o):t.format==="tree"?r=e.serializer.serialize(o,t):r=$H(e,e.serializer.serialize(o,t)),t.format!=="text"&&!I0(ne.fromDom(o))&&V(r)?lt.trim(r):r},FH=(e,t)=>M.from(e.getBody()).fold(it(t.format==="tree"?new Na("body",11):""),o=>LH(e,t,o)),fM=lt.makeMap,HA=e=>{const t=[];e=e||{};const o=e.indent,r=fM(e.indent_before||""),c=fM(e.indent_after||""),u=vi.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,v,S)=>{if(o&&r[b]&&t.length>0){const O=t[t.length-1];O.length>0&&O!==`
`&&t.push(`
`)}if(t.push("<",b),v)for(let O=0,R=v.length;O<R;O++){const P=v[O];t.push(" ",P.name,'="',u(P.value,!0),'"')}if(!S||f?t[t.length]=">":t[t.length]=" />",S&&o&&c[b]&&t.length>0){const O=t[t.length-1];O.length>0&&O!==`
`&&t.push(`
`)}},end:b=>{let v;t.push("</",b,">"),o&&c[b]&&t.length>0&&(v=t[t.length-1],v.length>0&&v!==`
`&&t.push(`
`))},text:(b,v)=>{b.length>0&&(t[t.length]=v?b:u(b))},cdata:b=>{t.push("<![CDATA[",b,"]]>")},comment:b=>{t.push("<!--",b,"-->")},pi:(b,v)=>{v?t.push("<?",b," ",u(v),"?>"):t.push("<?",b,"?>"),o&&t.push(`
`)},doctype:b=>{t.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},pp=(e={},t=Aa())=>{const o=HA(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:v=>{o.text(v.value??"",v.raw)},8:v=>{o.comment(v.value??"")},7:v=>{o.pi(v.name,v.value)},10:v=>{o.doctype(v.value??"")},4:v=>{o.cdata(v.value??"")},11:v=>{let S=v;if(S=S.firstChild)do b(S);while(S=S.next)}};o.reset();const b=v=>{const S=f[v.type];if(S)S(v);else{const O=v.name,R=O in t.getVoidElements();let P=v.attributes;if(u&&P&&P.length>1){const z=[];z.map={};const ee=t.getElementRule(v.name);if(ee){for(let W=0,J=ee.attributesOrder.length;W<J;W++){const be=ee.attributesOrder[W];if(be in P.map){const ye=P.map[be];z.map[be]=ye,z.push({name:be,value:ye})}}for(let W=0,J=P.length;W<J;W++){const be=P[W].name;if(!(be in z.map)){const ye=P.map[be];z.map[be]=ye,z.push({name:be,value:ye})}}P=z}}if(o.start(O,P,R),yg(O))V(v.value)&&o.text(v.value,!0),o.end(O);else if(!R){let z=v.firstChild;if(z){(O==="pre"||O==="textarea")&&z.type===3&&z.value?.[0]===`
`&&o.text(`
`,!0);do b(z);while(z=z.next)}o.end(O)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},gM=new Set;Ae(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{gM.add(t)});const nx=new Set;Ae(["background-color"],t=>{nx.add(t)});const bp=["font","text-decoration","text-emphasis"],QE=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),Uv=(e,t)=>en(QE(e,t)),HH=e=>gM.has(e),zH=e=>nx.has(e),hM=(e,t)=>io(Uv(e,t),o=>HH(o)),pM=(e,t)=>hM(e,t)&&io(Uv(e,t),o=>zH(o)),VH=e=>Xe(e,t=>io(bp,o=>kn(t,o))),UH=(e,t,o)=>{const r=Uv(e,t),c=Uv(e,o),u=f=>{const b=e.getStyle(t,f)??"",v=e.getStyle(o,f)??"";return hs(b)&&hs(v)&&b!==v};return io(r,f=>{const b=v=>io(v,S=>S===f);if(!b(c)&&b(bp)){const v=VH(c);return io(v,u)}else return u(f)})},zA=(e,t,o)=>M.from(o.container()).filter(dt).exists(r=>{const c=e?0:-1;return t(r.data.charAt(o.offset()+c))}),VA=ae(zA,!0,Xi),JE=ae(zA,!1,Xi),jH=e=>{const t=e.container();return dt(t)&&(t.data.length===0||R1(t.data)&&Fv.isBookmarkNode(t.parentNode))},vp=(e,t)=>o=>FC(e?0:-1,o).filter(t).isSome(),bM=e=>xl(e)&&Vs(ne.fromDom(e),"display")==="block",UA=e=>As(e)&&!Zk(e),jA=vp(!0,bM),vM=vp(!1,bM),ox=vp(!0,Sl),sx=vp(!1,Sl),rx=vp(!0,Zc),WA=vp(!1,Zc),Kg=vp(!0,UA),Lf=vp(!1,UA),yM=e=>e.slice(0,-1),WH=(e,t,o)=>oc(t,e)?yM(wa(e,r=>o(r)||no(r,t))):[],CM=(e,t)=>WH(e,t,pe),zd=(e,t)=>[e].concat(CM(e,t)),eT=(e,t,o)=>l(e,t,o,jH),xM=e=>t=>e.isBlock(jn(t)),ZA=(e,t,o)=>No(zd(ne.fromDom(t.container()),e),xM(o)),GA=(e,t,o,r)=>eT(e,t.dom,o).forall(c=>ZA(t,o,r).fold(()=>!Bd(c,o,t.dom),u=>!Bd(c,o,t.dom)&&oc(u,ne.fromDom(c.container())))),qA=(e,t,o,r)=>ZA(t,o,r).fold(()=>eT(e,t.dom,o).forall(c=>!Bd(c,o,t.dom)),c=>eT(e,c.dom,o).isNone()),tT=ae(qA,!1),KA=ae(qA,!0),SM=ae(GA,!1),wM=ae(GA,!0),EM=e=>lb(e).exists(ou),nT=(e,t,o,r)=>{const c=Xe(zd(ne.fromDom(o.container()),t),f=>r.isBlock(jn(f))),u=Gs(c).getOr(t);return Yi(e,u.dom,o).filter(EM)},YA=(e,t,o)=>lb(t).exists(ou)||nT(!0,e,t,o).isSome(),oT=(e,t,o)=>HC(t).exists(ou)||nT(!1,e,t,o).isSome(),TM=ae(nT,!1),ZH=ae(nT,!0),kM=e=>Le.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),AM=(e,t,o)=>{const r=Xe(zd(ne.fromDom(t.container()),e),c=>o.isBlock(jn(c)));return Gs(r).getOr(e)},_M=(e,t,o)=>kM(t)?JE(t):JE(t)||y(AM(e,t,o).dom,t).exists(JE),OM=(e,t,o)=>kM(t)?VA(t):VA(t)||p(AM(e,t,o).dom,t).exists(VA),GH=e=>Wt(["pre","pre-wrap"],e),sT=e=>lb(e).bind(t=>Go(t,Hs)).exists(t=>GH(Vs(t,"white-space"))),SQ=(e,t)=>y(e.dom,t).isNone(),wQ=(e,t)=>p(e.dom,t).isNone(),qH=(e,t,o)=>SQ(e,t)||wQ(e,t)||tT(e,t,o)||KA(e,t,o)||oT(e,t,o)||YA(e,t,o),EQ=e=>X(e)&&As(e)&&$C(e),DM=(e,t)=>o=>EQ(new nr(o,e)[t]()),Mc=(e,t)=>{const o=p(e.dom,t).getOr(t),r=DM(e.dom,"next");return t.isAtEnd()&&(r(t.container())||r(o.container()))},KH=(e,t)=>{const o=y(e.dom,t).getOr(t),r=DM(e.dom,"prev");return t.isAtStart()&&(r(t.container())||r(o.container()))},YH=(e,t,o)=>sT(t)?!1:qH(e,t,o)||_M(e,t,o)||OM(e,t,o),ax=(e,t,o)=>sT(t)?!1:tT(e,t,o)||SM(e,t,o)||oT(e,t,o)||_M(e,t,o)||KH(e,t),XH=e=>{const t=e.container(),o=e.offset();return dt(t)&&o<t.data.length?Le(t,o+1):e},Pc=(e,t,o)=>sT(t)?!1:KA(e,t,o)||wM(e,t,o)||YA(e,t,o)||OM(e,t,o)||Mc(e,t),RM=(e,t,o)=>ax(e,t,o)||Pc(e,XH(t),o),NM=(e,t)=>cc(e.charAt(t)),QH=(e,t)=>Xi(e.charAt(t)),JH=e=>{const t=e.container();return dt(t)&&Ds(t.data,Fs)},ez=e=>{const t=e.split("");return hn(t,(o,r)=>cc(o)&&r>0&&r<t.length-1&&Da(t[r-1])&&Da(t[r+1])?" ":o).join("")},tz=(e,t,o,r)=>{const c=t.data,u=Le(t,0);return!o&&NM(c,0)&&!RM(e,u,r)?(t.data=" "+c.slice(1),!0):o&&QH(c,0)&&ax(e,u,r)?(t.data=Fs+c.slice(1),!0):!1},nz=e=>{const t=e.data,o=ez(t);return o!==t?(e.data=o,!0):!1},Qi=(e,t,o,r)=>{const c=t.data,u=Le(t,c.length-1);return!o&&NM(c,c.length-1)&&!RM(e,u,r)?(t.data=c.slice(0,-1)+" ",!0):o&&QH(c,c.length-1)&&Pc(e,u,r)?(t.data=c.slice(0,-1)+Fs,!0):!1},MM=(e,t,o)=>{const r=t.container();if(!dt(r))return M.none();if(JH(t)){const c=tz(e,r,!1,o)||nz(r)||Qi(e,r,!1,o);return Ha(c,t)}else if(RM(e,t,o)){const c=tz(e,r,!0,o)||Qi(e,r,!0,o);return Ha(c,t)}else return M.none()},PM=e=>{const t=ne.fromDom(e.getBody());e.selection.isCollapsed()&&MM(t,Le.fromRangeStart(e.selection.getRng()),e.schema).each(o=>{e.selection.setRng(o.toRange())})},BM=(e,t,o,r)=>{if(o===0)return;const c=ne.fromDom(e),u=Xl(c,S=>r.isBlock(jn(S))).getOr(c),f=e.data.slice(t,t+o),b=t+o>=e.data.length&&Pc(u,Le(e,e.data.length),r),v=t===0&&ax(u,Le(e,0),r);e.replaceData(t,o,f0(f,4,v,b))},rT=(e,t,o)=>{const r=e.data.slice(t),c=r.length-om(r).length;BM(e,t,c,o)},aT=(e,t,o)=>{const r=e.data.slice(0,t),c=r.length-Hl(r).length;BM(e,t-c,c,o)},cT=(e,t,o,r,c=!0)=>{const u=Hl(e.data).length,f=c?e:t,b=c?t:e;return c?f.appendData(b.data):f.insertData(0,b.data),Xo(ne.fromDom(b)),r&&rT(f,u,o),f},oz=(e,t)=>{const o=e.container(),r=e.offset();return!Le.isTextPosition(e)&&o===t.parentNode&&r>Le.before(t).offset()},sz=(e,t)=>oz(t,e)?Le(t.container(),t.offset()-1):t,rz=e=>dt(e)?Le(e,0):Le.before(e),az=e=>dt(e)?Le(e,e.data.length):Le.after(e),XA=e=>Ps(e.previousSibling)?M.some(az(e.previousSibling)):e.previousSibling?D(e.previousSibling):M.none(),$M=e=>Ps(e.nextSibling)?M.some(rz(e.nextSibling)):e.nextSibling?E(e.nextSibling):M.none(),IM=(e,t)=>M.from(t.previousSibling?t.previousSibling:t.parentNode).bind(o=>y(e,Le.before(o))).orThunk(()=>p(e,Le.after(t))),cz=(e,t)=>p(e,Le.after(t)).orThunk(()=>y(e,Le.before(t))),TQ=(e,t)=>XA(t).orThunk(()=>$M(t)).orThunk(()=>IM(e,t)),iz=(e,t)=>$M(t).orThunk(()=>XA(t)).orThunk(()=>cz(e,t)),lz=(e,t,o)=>e?iz(t,o):TQ(t,o),kQ=(e,t,o)=>lz(e,t,o).map(ae(sz,o)),LM=(e,t,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),t)})},So=e=>t=>t.dom===e,cx=(e,t)=>t&&Pn(e.schema.getBlockElements(),jn(t)),Yg=(e,t,o)=>{if(or(e,t)){const r=ne.fromHtml('<br data-mce-bogus="1">');return o?Ae(Ns(t),c=>{yA(c)||Xo(c)}):zi(t),yo(t,r),M.some(Le.before(r.dom))}else return M.none()},gb=(e,t,o,r)=>{const c=li(e).filter(Ao),u=rc(e).filter(Ao);return Xo(e),Ri(c,u,t,(f,b,v)=>{const S=f.dom,O=b.dom,R=S.data.length;return cT(S,O,o,r),v.container()===O?Le(S,R):v}).orThunk(()=>(r&&(c.each(f=>aT(f.dom,f.dom.length,o)),u.each(f=>rT(f.dom,0,o))),t))},iT=(e,t)=>Pn(e.schema.getTextInlineElements(),jn(t)),Ff=(e,t,o,r=!0,c=!1)=>{const u=kQ(t,e.getBody(),o.dom),f=Xl(o,ae(cx,e),So(e.getBody())),b=gb(o,u,e.schema,iT(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):f.bind(v=>Yg(e.schema,v,c)).fold(()=>{r&&LM(e,t,b)},v=>{r&&LM(e,t,M.some(v))})},QA=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,FM=e=>QA.test(e),hb=(e,t)=>zc(ne.fromDom(t),I3(e))&&!Xs(e.schema,t)&&e.dom.isEditable(t),JA=e=>mo.DOM.getStyle(e,"direction",!0)==="rtl"||FM(e.textContent??""),HM=(e,t,o)=>Xe(mo.DOM.getParents(o.container(),"*",t),e),yp=(e,t,o)=>{const r=HM(e,t,o);return M.from(r[r.length-1])},uz=(e,t,o)=>{const r=Nf(t,e),c=Nf(o,e);return X(r)&&r===c},dz=e=>ym(e)||Dg(e),Ku=(e,t)=>{const o=t.container(),r=t.offset();return e?Hu(o)?dt(o.nextSibling)?Le(o.nextSibling,0):Le.after(o):ym(t)?Le(o,r+1):t:Hu(o)?dt(o.previousSibling)?Le(o.previousSibling,o.previousSibling.data.length):Le.before(o):Dg(t)?Le(o,r-1):t},zM=ae(Ku,!0),VM=ae(Ku,!1),e_=(e,t)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(t),e.off("beforeinput input",o)},UM=e=>{e.execCommand("delete")},t_=e=>e_(e,"Delete"),mz=e=>e_(e,"ForwardDelete"),AQ=e=>t=>jo(sc(t),e,no),fz=e=>ac(e)||_c(e),n_=(e,t)=>oc(e,t)?Go(t,fz,AQ(e)):M.none(),jM=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},WM=(e,t,o)=>er(E(o),D(o),(r,c)=>{const u=Ku(!0,r),f=Ku(!1,c),b=Ku(!1,t);return e?p(o,b).exists(v=>v.isEqual(f)&&t.isEqual(u)):y(o,b).exists(v=>v.isEqual(u)&&t.isEqual(f))}).getOr(!0),ZM=e=>(dl(e)?li(e):ar(e)).bind(ZM).orThunk(()=>M.some(e)),gz=(e,t,o,r=!0)=>{t.deleteContents();const c=ZM(o).getOr(o),u=ne.fromDom(e.dom.getParent(c.dom,e.dom.isBlock)??o.dom);if(u.dom===e.getBody()?jM(e,r):or(e.schema,u,{checkRootAsContent:!1})&&(xf(u),r&&e.selection.setCursorLocation(u.dom,0)),!no(o,u)){const f=jo(sc(u),o)?[]:Mo(u);Ae(f.concat(Ns(o)),b=>{!no(b,u)&&!oc(b,u)&&or(e.schema,b)&&Xo(b)})}},hz=e=>t=>no(e,t),Jc=e=>Fe(e,"td,th"),pz=(e,t)=>Qc(ne.fromDom(e),t),bz=e=>er(e.startTable,e.endTable,(t,o)=>{const r=In(t,u=>no(u,o)),c=In(o,u=>no(u,t));return!r&&!c?e:{...e,startTable:r?M.none():e.startTable,endTable:c?M.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),GM=e=>bz(e),_Q=(e,t)=>{const o=pz(e.startContainer,t),r=pz(e.endContainer,t),c=o.isSome(),u=r.isSome(),f=er(o,r,no).getOr(!1);return GM({startTable:o,endTable:r,isStartInTable:c,isEndInTable:u,isSameTable:f,isMultiTable:!f&&c&&u})},o_=(e,t)=>({start:e,end:t}),vz=(e,t,o)=>({rng:e,table:t,cells:o}),ix=si.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),jv=(e,t)=>fa(ne.fromDom(e),"td,th",t),yz=e=>!no(e.start,e.end),qM=(e,t)=>Qc(e.start,t).bind(o=>Qc(e.end,t).bind(r=>Ha(no(o,r),o))),Cz=(e,t)=>!yz(e)&&qM(e,t).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),ms=(e,t)=>{const o=jv(e.startContainer,t),r=jv(e.endContainer,t);return er(o,r,o_)},xz=e=>t=>Qc(t,e).bind(o=>hr(Jc(o)).map(r=>o_(t,r))),Sz=e=>t=>Qc(t,e).bind(o=>Gs(Jc(o)).map(r=>o_(r,t))),pb=e=>t=>qM(t,e).map(o=>vz(t,o,Jc(o))),s_=(e,t,o,r)=>{if(o.collapsed||!e.forall(yz))return M.none();if(t.isSameTable){const c=e.bind(pb(r));return M.some({start:c,end:c})}else{const c=jv(o.startContainer,r),u=jv(o.endContainer,r),f=c.bind(xz(r)).bind(pb(r)),b=u.bind(Sz(r)).bind(pb(r));return M.some({start:f,end:b})}},KM=(e,t)=>nl(e,o=>no(o,t)),r_=e=>er(KM(e.cells,e.rng.start),KM(e.cells,e.rng.end),(t,o)=>e.cells.slice(t,o+1)),wz=(e,t,o)=>e.exists(r=>Cz(r,o)&&hA(r.start,t)),a_=(e,t)=>{const{startTable:o,endTable:r}=t,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},Ez=(e,t,o,r)=>s_(e,t,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=t,f=r_(c).getOr([]);if(u&&c.cells.length===f.length)return M.some(ix.fullTable(c.table));if(f.length>0){if(u)return M.some(ix.partialTable(f,M.none()));{const b=a_(o,t);return M.some(ix.partialTable(f,M.some({...t,rng:b})))}}else return M.none()}),OQ=(e,t,o,r)=>s_(e,t,o,r).bind(({start:c,end:u})=>{const f=c.bind(r_).getOr([]),b=u.bind(r_).getOr([]);if(f.length>0&&b.length>0){const v=a_(o,t);return M.some(ix.multiTable(f,b,v))}else return M.none()}),DQ=(e,t)=>{const o=hz(e),r=ms(t,o),c=_Q(t,o);return wz(r,t,o)?r.map(u=>ix.singleCellTable(t,u.start)):c.isMultiTable?OQ(r,c,t,o):Ez(r,c,t,o)},YM=e=>Ae(e,t=>{cr(t,"contenteditable"),xf(t)}),Tz=(e,t)=>M.from(e.dom.getParent(t,e.dom.isBlock)).map(ne.fromDom),kz=(e,t,o)=>{o.each(r=>{t?Xo(r):(xf(r),e.selection.setCursorLocation(r.dom,0))})},c_=(e,t,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(t.dom.lastChild)):(c.setStartBefore(t.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),lT(e,c,t,!1).each(u=>u())},i_=e=>{const t=Xt(e),o=ne.fromDom(e.selection.getNode());Nh(o.dom)&&or(e.schema,o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),t.length>1&&io(t,r=>no(r,o))&&Ts(o,"data-mce-selected","1")},XM=(e,t,o)=>M.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=Tz(e,f?u.endContainer:u.startContainer);u.deleteContents(),kz(e,f,b.filter(ae(or,e.schema)));const v=f?t[0]:t[t.length-1];return c_(e,v,r,f),or(e.schema,v)?M.none():M.some(f?t.slice(1):t.slice(0,-1))}).getOr(t);YM(c),i_(e)}),so=(e,t,o,r)=>M.some(()=>{const c=e.selection.getRng(),u=t[0],f=o[o.length-1];c_(e,u,c,!0),c_(e,f,c,!1);const b=or(e.schema,u)?t:t.slice(1),v=or(e.schema,f)?o:o.slice(0,-1);YM(b.concat(v)),r.deleteContents(),i_(e)}),lT=(e,t,o,r=!0)=>M.some(()=>{gz(e,t,o,r)}),lx=(e,t)=>M.some(()=>Ff(e,!1,t)),ux=(e,t,o)=>DQ(t,o).bind(r=>r.fold(ae(lT,e),ae(lx,e),ae(XM,e),ae(so,e))),dx=(e,t)=>l_(e,t),mx=(e,t,o,r)=>JM(t,r).fold(()=>ux(e,t,o),c=>dx(e,c)),QM=(e,t,o)=>{const r=ne.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?XM(e,o,M.none()):mx(e,r,c,t)},Az=(e,t)=>No(zd(t,e),Og),JM=(e,t)=>No(zd(t,e),br("caption")),RQ=(e,t,o,r,c)=>hp(o,e.getBody(),c).bind(u=>Az(t,ne.fromDom(u.getNode())).bind(f=>no(f,r)?M.none():M.some(_t))),l_=(e,t)=>M.some(()=>{xf(t),e.selection.setCursorLocation(t.dom,0)}),_z=(e,t,o,r)=>E(e.dom).bind(c=>D(e.dom).map(u=>t?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),NQ=(e,t)=>l_(e,t),Oz=(e,t,o)=>JM(e,ne.fromDom(o.getNode())).fold(()=>M.some(_t),r=>Ha(!no(r,t),_t)),Dz=(e,t,o,r,c)=>hp(o,e.getBody(),c).fold(()=>M.some(_t),u=>_z(r,o,c,u)?NQ(e,r):Oz(t,r,u)),MQ=(e,t,o,r)=>{const c=Le.fromRangeStart(e.selection.getRng());return Az(o,r).bind(u=>or(e.schema,u,{checkRootAsContent:!1})?l_(e,u):RQ(e,o,t,u,c))},Rz=(e,t,o,r)=>{const c=Le.fromRangeStart(e.selection.getRng());return or(e.schema,r)?l_(e,r):Dz(e,o,t,r,c)},ys=(e,t)=>e?rx(t):WA(t),PQ=(e,t)=>{const o=Le.fromRangeStart(e.selection.getRng());return ys(t,o)||Yi(t,e.getBody(),o).exists(r=>ys(t,r))},BQ=(e,t,o)=>{const r=ne.fromDom(e.getBody());return JM(r,o).fold(()=>MQ(e,t,r,o).orThunk(()=>Ha(PQ(e,t),_t)),c=>Rz(e,t,r,c))},u_=(e,t)=>{const o=ne.fromDom(e.selection.getStart(!0)),r=Xt(e);return e.selection.isCollapsed()&&r.length===0?BQ(e,t,o):QM(e,o,r)},Nm=(e,t)=>{let o=t;for(;o&&o!==e;){if(hi(o)||As(o))return o;o=o.parentNode}return null},Nz=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Mz=lt.each,Mm=e=>{const t=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=S=>{const O={};return Mz(t.getAttribs(S),R=>{const P=R.nodeName.toLowerCase();P!=="style"&&!c(P)&&(O[P]=t.getAttrib(S,P))}),O},v=(S,O)=>{for(const R in S)if(Pn(S,R)){const P=O[R];if(Wn(P)||S[R]!==P)return!1;delete O[R]}for(const R in O)if(Pn(O,R))return!1;return!0};return kt(u)&&kt(f)&&(!v(b(u),b(f))||!v(t.parseStyle(t.getAttrib(u,"style")),t.parseStyle(t.getAttrib(f,"style"))))?!1:!Js(u)&&!Js(f)},c=u=>io(Nz,f=>kn(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},_o=(e,t)=>{if(dt(e))return{container:e,offset:t};const o=Rm.getNode(e,t);return dt(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&dt(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&dt(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},pa=e=>{const t=e.cloneRange(),o=_o(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=_o(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},mu=mo.DOM,Pz=()=>mu.create("span",{"data-mce-type":"bookmark"}),eP=(e,t,o)=>{if(kt(e)){const r=o();return e.hasChildNodes()?t===e.childNodes.length?e.appendChild(r):e.insertBefore(r,e.childNodes[t]):e.appendChild(r),{container:r,offset:0}}else return{container:e,offset:t}},tP=(e,t)=>{const o=r=>{let c=r.parentNode?.firstChild,u=0;for(;c;){if(c===r)return u;(!kt(c)||c.getAttribute("data-mce-type")!=="bookmark")&&u++,c=c.nextSibling}return-1};if(kt(e)&&X(e.parentNode)){const r=e;t=o(e),e=e.parentNode,mu.remove(r),!e.hasChildNodes()&&mu.isBlock(e)&&e.appendChild(mu.create("br"))}return{container:e,offset:t}},nP=(e,t,o,r)=>{const c=mu.createRng();return c.setStart(e,t),c.setEnd(o,r),pa(c)},Hf=(e,t=Pz)=>{const{container:o,offset:r}=eP(e.startContainer,e.startOffset,t);if(e.collapsed)return{startContainer:o,startOffset:r};{const{container:c,offset:u}=eP(e.endContainer,e.endOffset,t);return{startContainer:o,startOffset:r,endContainer:c,endOffset:u}}},Yu=e=>{const{container:t,offset:o}=tP(e.startContainer,e.startOffset);if(!Wn(e.endContainer)&&!Wn(e.endOffset)){const{container:r,offset:c}=tP(e.endContainer,e.endOffset);return nP(t,o,r,c)}else return nP(t,o,t,o)},d_=(e,t,o,r)=>{if(lt.each(o.styles,(c,u)=>{e.setStyle(t,u,Gg(c,r))}),o.styles){const c=e.getAttrib(t,"style");c&&e.setAttrib(t,"data-mce-style",c)}},bb=(e,t,o,r,c)=>{const u=e.dom;ce(o.onformat)&&o.onformat(t,o,r,c),d_(u,t,o,r),lt.each(o.attributes,(f,b)=>{u.setAttrib(t,b,Gg(f,r))}),lt.each(o.classes,f=>{const b=Gg(f,r);u.hasClass(t,b)||u.addClass(t,b)})},Bz=e=>!At(e.attributes)&&!At(e.styles),m_=YC,oP=(e,t,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Id(u)&&u.inherit===!1&&e.dom.is(t,u.selector))return!0}return!1},uT=(e,t,o,r,c)=>{const u=e.dom.getRoot();if(t===u)return!1;const f=e.dom.getParent(t,b=>oP(e,b,o)?!0:b.parentNode===u||!!Xu(e,b,o,r,!0));return!!Xu(e,f,o,r,c)},dT=(e,t,o)=>Za(o)&&m_(t,o.inline)||Om(o)&&m_(t,o.block)?!0:Id(o)?kt(t)&&e.is(t,o.selector):!1,sP=(e,t,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(ce(o.onmatch))return o.onmatch(t,o,r);if(f){if(sg(f)){for(let v=0;v<f.length;v++)if(b?e.getAttrib(t,f[v]):XC(e,t,f[v]))return!0}else for(const v in f)if(Pn(f,v)){const S=b?e.getAttrib(t,v):XC(e,t,v),O=Gg(f[v],u),R=Yt(S)||rl(S);if(R&&Yt(O))continue;if(c&&R&&!o.exact||(!c||o.exact)&&!m_(S,PE(O,v)))return!1}}return!0},Xu=(e,t,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&kt(t))for(let b=0;b<u.length;b++){const v=u[b];if(dT(e.dom,t,v)&&sP(f,t,v,"attributes",c,r)&&sP(f,t,v,"styles",c,r)){const S=v.classes;if(S){for(let O=0;O<S.length;O++)if(!e.dom.hasClass(t,Gg(S[O],r)))return}return v}}},f_=(e,t,o,r,c)=>{if(r)return uT(e,r,t,o,c);if(r=e.selection.getNode(),uT(e,r,t,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&uT(e,u,t,o,c))},g_=(e,t,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<t.length;b++){const v=t[b];!c[v]&&Xu(e,f,v,o)&&(c[v]=!0,r.push(v))}},e.dom.getRoot()),r},rP=(e,t)=>{const o=c=>no(c,ne.fromDom(e.getBody())),r=(c,u)=>Xu(e,c.dom,u)?M.some(u):M.none();return M.from(e.selection.getStart(!0)).bind(c=>vl(ne.fromDom(c),u=>dc(t,f=>r(u,f)),o)).getOrNull()},h_=(e,t)=>{const o=e.formatter.get(t),r=e.dom;if(o&&e.selection.isEditable()){const c=e.selection.getStart(),u=BE(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Id(b))return!0;for(let v=u.length-1;v>=0;v--)if(r.is(u[v],b.selector))return!0}}return!1},$Q=(e,t,o)=>Ho(o,(r,c)=>{const u=$E(e,c);return e.formatter.matchNode(t,c,{},u)?r.concat([c]):r},[]),ca=Gr,$z=(e,t)=>e.importNode(t,!0),Iz=e=>{if(e){const t=new nr(e,e);for(let o=t.current();o;o=t.next())if(dt(o))return o}return null},p_=e=>{const t=ne.fromTag("span");return sa(t,{id:I,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&yo(t,ne.fromText(ca)),t},Lz=e=>{const t=Iz(e);return t&&t.data.charAt(0)===ca&&t.deleteData(0,1),t},b_=(e,t,o)=>{const r=e.dom,c=e.selection;if(k5(t))Ff(e,!1,ne.fromDom(t),o,!0);else{const u=c.getRng(),f=r.getParent(t,r.isBlock),b=u.startContainer,v=u.startOffset,S=u.endContainer,O=u.endOffset,R=Lz(t);r.remove(t,!0),b===R&&v>0&&u.setStart(R,v-1),S===R&&O>0&&u.setEnd(R,O-1),f&&r.isEmpty(f)&&xf(ne.fromDom(f)),c.setRng(u)}},v_=(e,t,o)=>{const r=e.dom,c=e.selection;if(t)b_(e,t,o);else if(t=K(e.getBody(),c.getStart()),!t)for(;t=r.get(I);)b_(e,t,o)},aP=(e,t,o)=>{const r=e.dom,c=r.getParent(o,ae(KC,e.schema));c&&r.isEmpty(c)?o.parentNode?.replaceChild(t,o):(u3(ne.fromDom(o)),r.isEmpty(o)?o.parentNode?.replaceChild(t,o):r.insertAfter(t,o))},Wv=(e,t)=>(e.appendChild(t),t),cP=(e,t)=>{const o=Qn(e,(c,u)=>Wv(c,u.cloneNode(!1)),t),r=o.ownerDocument??document;return Wv(o,r.createTextNode(ca))},iP=(e,t,o,r,c,u)=>{const f=e.formatter,b=e.dom,v=Xe(en(f.get()),R=>R!==r&&!Ds(R,"removeformat")),S=$Q(e,o,v);if(Xe(S,R=>!T5(e,R,r)).length>0){const R=o.cloneNode(!1);return b.add(t,R),f.remove(r,c,R,u),b.remove(R),M.some(R)}else return M.none()},lP=e=>i1(e,Ta(e).replace(new RegExp(`${Fs}$`)," ")),Cp=(e,t)=>{const o=()=>{t!==null&&!e.dom.isEmpty(t)&&li(ne.fromDom(t)).each(r=>{Ao(r)?lP(r):af(r,c=>Ao(c)).each(c=>{Ao(c)&&lP(c)})})};e.once("input",r=>{r.data&&!Xi(r.data)&&(r.isComposing?e.once("compositionend",()=>{o()}):o())})},uP=(e,t,o)=>{let r;const c=e.selection,u=e.formatter.get(t);if(!u)return;const f=c.getRng();let b=f.startOffset;const S=f.startContainer.nodeValue;r=K(e.getBody(),c.getStart());const O=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(S&&b>0&&b<S.length&&O.test(S.charAt(b))&&O.test(S.charAt(b-1))){const R=c.getBookmark();f.collapse(!0);let P=If(e.dom,f,u);P=Vv(P),e.formatter.apply(t,o,P),c.moveToBookmark(R)}else{let R=r?Iz(r):null;(!r||R?.data!==ca)&&(r=$z(e.getDoc(),p_(!0).dom),R=r.firstChild,f.insertNode(r),b=1,Cp(e,r)),e.formatter.apply(t,o,r),c.setCursorLocation(R,b)}},dP=(e,t,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(t);if(!b)return;const v=u.getRng(),S=v.startContainer,O=v.startOffset;let R=S;dt(S)&&(O!==S.data.length&&(f=!0),R=R.parentNode);const P=[];let z;for(;R;){if(Xu(e,R,t,o,r)){z=R;break}R.nextSibling&&(f=!0),P.push(R),R=R.parentNode}if(z)if(f){const ee=u.getBookmark();v.collapse(!0);let W=If(c,v,b,{includeTrailingSpace:!0});W=Vv(W),e.formatter.remove(t,o,W,r),u.moveToBookmark(ee)}else{const ee=K(e.getBody(),z),W=X(ee)?c.getParents(z.parentNode,Te,ee):[],J=p_(!1).dom;aP(e,J,ee??z);const be=iP(e,J,z,t,o,r),ye=cP([...P,...be.toArray(),...W],J);ee&&b_(e,ee,X(ee)),u.setCursorLocation(ye,1),Cp(e,J),c.isEmpty(z)&&c.remove(z)}},mP=(e,t,o)=>{const r=e.selection,c=e.getBody();v_(e,null,o),(t===8||t===46)&&r.isCollapsed()&&r.getStart().innerHTML===ca&&v_(e,K(c,r.getStart()),!0),(t===37||t===39)&&v_(e,K(c,r.getStart()),!0)},fP=e=>dt(e)&&Qr(e.data,Fs),gP=e=>{e.on("mouseup keydown",t=>{mP(e,t.keyCode,fP(e.selection.getRng().endContainer))})},hP=e=>{const t=p_(!1),o=cP(e,t.dom);return{caretContainer:t,caretPosition:Le(o,0)}},y_=(e,t)=>{const{caretContainer:o,caretPosition:r}=hP(t);return da(ne.fromDom(e),o),Xo(ne.fromDom(e)),r},Fz=(e,t)=>{const{caretContainer:o,caretPosition:r}=hP(t);return e.insertNode(o.dom),r},pP=(e,t)=>{if(U(t.dom))return!1;const o=e.schema.getTextInlineElements();return Pn(o,jn(t))&&!U(t.dom)&&!ff(t.dom)},bP=["fontWeight","fontStyle","color","fontSize","fontFamily"],Hz=e=>Ye(e.styles)&&io(en(e.styles),t=>Wt(bP,t)),zz=e=>No(e,t=>Za(t)&&t.inline==="span"&&Hz(t)),Vz=(e,t)=>{const o=e.get(t);return At(o)?zz(o):M.none()},C_=(e,t)=>y(t,Le.fromRangeStart(e)).isNone(),vP=(e,t)=>p(t,Le.fromRangeEnd(e)).exists(o=>!js(o.getNode())||p(t,o).isSome())===!1,Uz=e=>t=>h1(t)&&e.isEditable(t),yP=(e,t)=>hn(e.getSelectedBlocks(),(o,r)=>r===0&&t(o)?e.dom.getParent(o,h1)??o:o),x_=e=>{if(e.isCollapsed())return[];const t=e.getRng(),o=yP(e,r=>C_(t,r)&&!h1(r));if(o.length===1)return C_(t,o[0])&&vP(t,o[0])?o:[];{const r=Gs(o).filter(f=>C_(t,f)).toArray(),c=hr(o).filter(f=>vP(t,f)).toArray(),u=o.slice(1,-1);return r.concat(u).concat(c)}},S_=e=>Xe(x_(e),Uz(e.dom)),CP=e=>Xe(yP(e,t=>!h1(t)),Uz(e.dom)),xP=lt.each,w_=e=>kt(e)&&!Js(e)&&!U(e)&&!ff(e),SP=(e,t)=>{for(let o=e;o;o=o[t]){if(dt(o)&&hs(o.data))return e;if(kt(o)&&!Js(o))return o}return e},wP=(e,t,o)=>{const r=Mm(e),c=Wc(t)&&e.dom.isEditable(t),u=Wc(o)&&e.dom.isEditable(o);if(c&&u){const f=SP(t,"previousSibling"),b=SP(o,"nextSibling");if(r.compare(f,b)){for(let v=f.nextSibling;v&&v!==b;){const S=v;v=v.nextSibling,f.appendChild(S)}return e.dom.remove(b),lt.each(lt.grep(b.childNodes),v=>{f.appendChild(v)}),f}}return o},EP=(e,t,o,r)=>{if(r&&t.merge_siblings!==!1){const c=wP(e,S5(r),r)??r;wP(e,c,S5(c,!0))}},jz=(e,t,o)=>{if(t.clear_child_styles){const r=t.links?"*:not(a)":"*";xP(e.select(r,o),c=>{w_(c)&&e.isEditable(c)&&xP(t.styles,(u,f)=>{e.setStyle(c,f,"")})})}},E_=(e,t,o)=>{xP(e.childNodes,r=>{w_(r)&&(t(r)&&o(r),r.hasChildNodes()&&E_(r,t,o))})},Wz=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},T_=(e,t)=>o=>!!(o&&XC(e,o,t)),TP=(e,t,o)=>r=>{e.setStyle(r,t,o),r.getAttribute("style")===""&&r.removeAttribute("style"),Wz(e,r)},vb=si.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Xg=/^(src|href|style)$/,k_=lt.each,fx=YC,Zz=e=>/^(TR|TH|TD)$/.test(e.nodeName),kP=(e,t,o)=>e.isChildOf(t,o)&&t!==o&&!e.isBlock(o),A_=(e,t,o)=>{let r=t[o?"startContainer":"endContainer"],c=t[o?"startOffset":"endOffset"];if(kt(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return dt(r)&&o&&c>=r.data.length&&(r=new nr(r,e.getBody()).next()||r),dt(r)&&!o&&c===0&&(r=new nr(r,e.getBody()).prev()||r),r},__=(e,t)=>{const o=t?"firstChild":"lastChild",r=e[o];return Zz(e)&&r?e.nodeName==="TR"&&r[o]||r:e},mT=(e,t,o,r)=>{const c=e.create(o,r);return t.parentNode?.insertBefore(c,t),c.appendChild(t),c},O_=(e,t,o,r,c)=>{const u=ne.fromDom(t),f=ne.fromDom(e.create(r,c)),b=o?Hr(u):ta(u);return mi(f,b),o?(da(u,f),Gl(f,u)):(di(u,f),yo(f,u)),f.dom},Gz=(e,t)=>t.links&&e.nodeName==="A",AP=(e,t,o)=>{const r=t.parentNode;let c;const u=e.dom,f=Rr(e);Om(o)&&r===u.getRoot()&&(!o.list_block||!fx(t,o.list_block))&&Ae(is(t.childNodes),b=>{Iv(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=mT(u,b,f),u.setAttribs(c,iu(e))):c=null}),!(fQ(o)&&!fx(o.inline,t))&&u.remove(t,!0)},_P=(e,t,o)=>Uo(e)?{name:t,value:null}:{name:e,value:Gg(t,o)},OP=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},DP=(e,t,o,r,c)=>{let u=!1;k_(o.styles,(f,b)=>{const{name:v,value:S}=_P(b,f,r),O=PE(S,v);(o.remove_similar||se(S)||!kt(c)||fx(XC(e,c,v),O))&&e.setStyle(t,v,""),u=!0}),u&&OP(e,t)},yb=(e,t,o)=>{t==="removeformat"?Ae(CP(e.selection),r=>{Ae(bP,c=>e.dom.setStyle(r,c,"")),OP(e.dom,r)}):Vz(e.formatter,t).each(r=>{Ae(CP(e.selection),c=>DP(e.dom,c,r,o,null))})},fT=(e,t,o,r,c)=>{const u=e.dom,f=Mm(e),b=e.schema;if(Za(t)&&Gc(b,t.inline)&&Xs(b,r)&&r.parentElement===e.getBody())return AP(e,r,t),vb.removed();if(!t.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!dT(u,r,t)&&!Gz(r,t))return vb.keep();const v=r,S=t.preserve_attributes;if(Za(t)&&t.remove==="all"&&At(S)){const O=Xe(u.getAttribs(v),R=>Wt(S,R.name.toLowerCase()));if(u.removeAllAttribs(v),Ae(O,R=>u.setAttrib(v,R.name,R.value)),O.length>0)return vb.rename("span")}if(t.remove!=="all"){DP(u,v,t,o,c),k_(t.attributes,(R,P)=>{const{name:z,value:ee}=_P(P,R,o);if(t.remove_similar||se(ee)||!kt(c)||fx(u.getAttrib(c,z),ee)){if(z==="class"){const W=u.getAttrib(v,z);if(W){let J="";if(Ae(W.split(/\s+/),be=>{/mce\-\w+/.test(be)&&(J+=(J?" ":"")+be)}),J){u.setAttrib(v,z,J);return}}}if(Xg.test(z)&&v.removeAttribute("data-mce-"+z),z==="style"&&yl(["li"])(v)&&u.getStyle(v,"list-style-type")==="none"){v.removeAttribute(z),u.setStyle(v,"list-style-type","none");return}z==="class"&&v.removeAttribute("className"),v.removeAttribute(z)}}),k_(t.classes,R=>{R=Gg(R,o),(!kt(c)||u.hasClass(c,R))&&u.removeClass(v,R)});const O=u.getAttribs(v);for(let R=0;R<O.length;R++){const P=O[R].nodeName;if(!f.isAttributeInternal(P))return vb.keep()}}return t.remove!=="none"?(AP(e,v,t),vb.removed()):vb.keep()},qz=(e,t,o,r,c)=>{let u;return t.parentNode&&Ae(BE(e.dom,t.parentNode).reverse(),f=>{if(!u&&kt(f)&&f.id!=="_start"&&f.id!=="_end"){const b=Xu(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},Kz=(e,t,o,r)=>fT(e,t,o,r,r).fold(it(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),it(null)),D_=(e,t,o,r,c,u,f,b)=>{let v,S;const O=e.dom;if(o){const R=o.parentNode;for(let P=r.parentNode;P&&P!==R;P=P.parentNode){let z=O.clone(P,!1);for(let ee=0;ee<t.length&&(z=Kz(e,t[ee],b,z),z!==null);ee++);z&&(v&&z.appendChild(v),S||(S=z),v=z)}(!f.mixed||!O.isBlock(o))&&(r=O.split(o,r)??r),v&&S&&(c.parentNode?.insertBefore(v,c),S.appendChild(c),Za(f)&&EP(e,f,b,v))}return r},Yz=(e,t,o,r,c)=>{const u=e.formatter.get(t),f=u[0],b=e.dom,v=e.selection,S=W=>{const J=qz(e,W,t,o,c);return D_(e,u,J,W,W,!0,f,o)},O=W=>Js(W)&&kt(W)&&(W.id==="_start"||W.id==="_end"),R=W=>io(u,J=>gx(e,J,o,W,W)),P=W=>{const J=is(W.childNodes),ye=R(W)||io(u,et=>dT(b,W,et)),Se=W.parentNode;if(!ye&&X(Se)&&vA(f)&&R(Se),f.deep&&J.length)for(let et=0;et<J.length;et++)P(J[et]);Ae(["underline","line-through","overline"],et=>{kt(W)&&e.dom.getStyle(W,"text-decoration")===et&&W.parentNode&&E5(b,W.parentNode)===et&&gx(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:et}},void 0,W)})},z=W=>{const J=b.get(W?"_start":"_end");if(J){let be=J[W?"firstChild":"lastChild"];return O(be)&&(be=be[W?"firstChild":"lastChild"]),dt(be)&&be.data.length===0&&(be=W?J.previousSibling||J.nextSibling:J.nextSibling||J.previousSibling),b.remove(J,!0),be}else return null},ee=W=>{let J,be,ye=If(b,W,u,{includeTrailingSpace:W.collapsed});if(f.split){if(ye=Vv(ye),J=A_(e,ye,!0),be=A_(e,ye),J!==be){if(J=__(J,!0),be=__(be,!1),kP(b,J,be)){const Ve=M.from(J.firstChild).getOr(J);S(O_(b,Ve,!0,"span",{id:"_start","data-mce-type":"bookmark"})),z(!0);return}if(kP(b,be,J)){const Ve=M.from(be.lastChild).getOr(be);S(O_(b,Ve,!1,"span",{id:"_end","data-mce-type":"bookmark"})),z(!1);return}J=mT(b,J,"span",{id:"_start","data-mce-type":"bookmark"}),be=mT(b,be,"span",{id:"_end","data-mce-type":"bookmark"});const Se=b.createRng();Se.setStartAfter(J),Se.setEndBefore(be),Ld(b,Se,Ve=>{Ae(Ve,et=>{!Js(et)&&!Js(et.parentNode)&&S(et)})}),S(J),S(be),J=z(!0),be=z()}else J=be=S(J);ye.startContainer=J.parentNode?J.parentNode:J,ye.startOffset=b.nodeIndex(J),ye.endContainer=be.parentNode?be.parentNode:be,ye.endOffset=b.nodeIndex(be)+1}Ld(b,ye,Se=>{Ae(Se,P)})};if(r){if(GC(r)){const W=b.createRng();W.setStartBefore(r),W.setEndAfter(r),ee(W)}else ee(r);uC(e,t,r,o);return}!v.isCollapsed()||!Za(f)||Xt(e).length?(C5(e,()=>WC(e,ee),W=>Za(f)&&f_(e,t,o,W)),e.nodeChanged()):dP(e,t,o,c),yb(e,t,o),uC(e,t,r,o)},gT=(e,t,o,r,c)=>{(r||e.selection.isEditable())&&Yz(e,t,o,r,c)},RP=(e,t,o,r)=>fT(e,t,o,r).fold(()=>M.some(r),c=>M.some(e.dom.rename(r,c)),M.none),gx=(e,t,o,r,c)=>fT(e,t,o,r,c).fold(pe,u=>(e.dom.rename(r,u),!0),Te),NP=["fontsize","subscript","superscript"],hT=["strikethrough",...NP],Xz=(e,t,o)=>X(e.matchNode(t.dom,o,{},o==="fontsize")),pT=(e,t)=>io(NP,o=>Xz(e,t,o)),Qz=e=>Wt(hT,e),MP=(e,t,o,r,c)=>{const u=wa(t,e).filter(Hs);return Gm(u,o).map(f=>{const b=u[f],v=r(b),S=[...c(Cr(b)).toArray(),...wo(u.slice(0,f),O=>o(O)?c(O).toArray():[Cr(O)])];return{container:b,innerWrapper:v,outerWrappers:S}})},PP=(e,t,o,r)=>{Ae(Ns(e),c=>{Hs(c)&&o(c)&&r(c).isNone()&&yc(c)}),Ae(Ns(e),c=>yo(t,c)),Gl(e,t)},BP=(e,t)=>{if(t.length>0){const o=t[t.length-1];da(e,o);const r=Ho(t.slice(0,t.length-1),(c,u)=>(yo(c,u),u),o);yo(r,e)}},Jz=(e,t,o,r,c)=>{const u=f=>no(ne.fromDom(e.getRoot()),f)||e.isBlock(f.dom);Ae(t,f=>{MP(u,f,o,r,c).each(({container:b,innerWrapper:v,outerWrappers:S})=>{e.split(b.dom,f.dom),PP(f,v,o,c),BP(f,S)})})},R_=(e,t,o)=>{const r=b=>X(Xu(e,b.dom,t)),c=b=>{const v=ne.fromTag(jn(b)),S=Xu(e,b.dom,t,{});return X(S)&&Bz(S)&&bb(e,v.dom,S),v},u=b=>{const v=Xu(e,b.dom,t,{});return X(v)?RP(e,v,{},b.dom).map(ne.fromDom):M.some(b)},f=Hf(e.selection.getRng());Jz(e.dom,o,r,c,u),e.selection.setRng(Yu(f))},e9=(e,t)=>wo(t,o=>{const r=q(o,c=>pT(e,c));return pT(e,o)?[o,...r]:r}),t9=(e,t,o)=>{if(Qz(t)){const r=e9(e.formatter,o);R_(e,"strikethrough",r)}},n9=(e,t)=>{const o=Xe(t,r=>pT(e.formatter,r));R_(e,"strikethrough",o)},Ji=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),$P=e=>e.name==="summary",o9=(e,t)=>{let o=e;for(;o=o.walk();)t(o)},N_=(e,t,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const v=r.nodes[c];v?v.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=t.length;u<f;u++){const b=t[u],v=b.name;if(v in o.attributes.map){const S=r.attributes[v];S?S.nodes.push(o):r.attributes[v]={filter:b,nodes:[o]}}}},s9=(e,t,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&o9(o,c=>{N_(e,t,c,r)}),r},IP=(e,t)=>{const o=(r,c)=>{qn(r,u=>{const f=is(u.nodes);Ae(u.filter.callbacks,b=>{for(let v=f.length-1;v>=0;v--){const S=f[v];(!(c?S.attr(u.filter.name)!==void 0:S.name===u.filter.name)||Yt(S.parent))&&f.splice(v,1)}f.length>0&&b(f,u.filter.name,t)})})};o(e.nodes,!1),o(e.attributes,!0)},LP=(e,t,o,r={})=>{const c=s9(e,t,o);IP(c,r)},xp=(e,t,o,r)=>{if((e.pad_empty_with_br||t.insert)&&o(r)){const u=new Na("br",1);t.insert&&u.attr("data-mce-bogus","1"),r.empty().append(u)}else r.empty().append(new Na("#text",3)).value=Fs},Zv=e=>r9(e,"#text")&&e?.firstChild?.value===Fs,r9=(e,t)=>{const o=e?.firstChild;return X(o)&&o===e.lastChild&&o.name===t},a9=(e,t)=>e.getElementRule(t.name)?.paddEmpty===!0,hx=(e,t,o,r)=>r.isEmpty(t,o,c=>a9(e,c)),Pm=(e,t)=>X(e)&&(t(e)||e.name==="br"),c9=e=>{let t;for(let o=e;o;o=o.parent){const r=o.attr("contenteditable");if(r==="false")break;r==="true"&&(t=o)}return M.from(t)},i9=e=>{const t=[];for(let o=e.firstChild;X(o);o=o.walk())t.push(o);return t},Gv=(e,t,o=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!t.isValidChild(o.name,c.name)&&Gv(c,t,o);e.unwrap()}},FP=(e,t,o,r=_t)=>{const c=t.getTextBlockElements(),u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=lt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),v=new Set,S=O=>O!==o&&!b[O.name];for(let O=0;O<e.length;O++){const R=e[O];let P,z,ee;if(!R.parent||v.has(R))continue;if(c[R.name]&&R.parent.name==="li"){let J=R.next;for(;J&&c[J.name];){J.name="li",v.add(J),R.parent.insert(J,R.parent);J=J.next}R.unwrap();continue}const W=[R];for(P=R.parent;P&&!t.isValidChild(P.name,R.name)&&S(P);P=P.parent)W.push(P);if(P&&W.length>1)if(px(t,R,P))Gv(R,t);else{W.reverse(),z=W[0].clone(),r(z);let J=z;for(let be=0;be<W.length-1;be++){t.isValidChild(J.name,W[be].name)&&be>0?(ee=W[be].clone(),r(ee),J.append(ee)):ee=J;for(let ye=W[be].firstChild;ye&&ye!==W[be+1];){const Se=ye.next;ee.append(ye),ye=Se}J=ee}hx(t,u,f,z)?P.insert(R,W[0],!0):(P.insert(z,W[0],!0),P.insert(R,z)),P=W[0],(hx(t,u,f,P)||r9(P,"br"))&&P.empty().remove()}else if(R.parent){if(R.name==="li"){let J=R.prev;if(J&&(J.name==="ul"||J.name==="ol")){J.append(R);continue}if(J=R.next,J&&(J.name==="ul"||J.name==="ol")&&J.firstChild){J.insert(R,J.firstChild,!0);continue}const be=new Na("ul",1);r(be),R.wrap(be);continue}if(t.isValidChild(R.parent.name,"div")&&t.isValidChild("div",R.name)){const J=new Na("div",1);r(J),R.wrap(J)}else Gv(R,t)}}},M_=(e,t)=>{let o=e;for(;o;){if(o.name===t)return!0;o=o.parent}return!1},px=(e,t,o=t.parent)=>o?e.children[t.name]&&!e.isValidChild(o.name,t.name)||t.name==="a"&&M_(o,"a")?!0:$P(o)&&Ji(t)?!(o?.firstChild===t&&o?.lastChild===t):!1:!1,HP=(e,t,o,r)=>{const c=document.createRange();return c.setStart(e,t),c.setEnd(o,r),c},l9=e=>{const t=Le.fromRangeStart(e),o=Le.fromRangeEnd(e),r=e.commonAncestorContainer;return Yi(!1,r,o).map(c=>!Bd(t,o,r)&&Bd(t,c,r)?HP(t.container(),t.offset(),c.container(),c.offset()):e).getOr(e)},P_=e=>e.collapsed?e:l9(e),Qg=lt.explode,zP=()=>{const e={};return{addFilter:(c,u)=>{Ae(Qg(c),f=>{Pn(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>La(e),removeFilter:(c,u)=>{Ae(Qg(c),f=>{if(Pn(e,f))if(X(u)){const b=e[f],v=Xe(b.callbacks,S=>S!==u);v.length>0?b.callbacks=v:delete e[f]}else delete e[f]})}}},u9=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),d9=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&"),eo=(e,t)=>{Ae(t,o=>{e.attr(o,null)})},m9=(e,t,o)=>{e.addNodeFilter("font",r=>{Ae(r,c=>{const u=t.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),v=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),v&&ng(v).each(S=>{u["font-size"]=o[S-1]}),c.name="span",c.attr("style",t.serialize(u)),eo(c,["color","face","size"])})})},f9=(e,t,o)=>{e.addNodeFilter("strike",r=>{const c=t.type!=="html4";Ae(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},VP=(e,t,o)=>{const r=pm();t.convert_fonts_to_spans&&m9(e,r,lt.explode(t.font_size_legacy_values??"")),f9(e,o,r)},g9=(e,t,o)=>{t.inline_styles&&VP(e,t,o)},h9=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Sr=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},p9=e=>{try{return decodeURIComponent(e)}catch{return e}},B_=e=>{const[t,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(c){const u=c[2]===";base64",f=p9(r),b=u?Sr(f):f;return M.some({type:c[1],data:b,base64Encoded:u})}else return M.none()},UP=(e,t,o=!0)=>{let r=t;if(o)try{r=atob(t)}catch{return M.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return M.some(new Blob([c],{type:e}))},b9=e=>new Promise((t,o)=>{B_(e).bind(({type:r,data:c,base64Encoded:u})=>UP(r,c,u)).fold(()=>o("Invalid data URI"),t)}),Zs=e=>kn(e,"blob:")?h9(e):kn(e,"data:")?b9(e):Promise.reject("Unknown URI format"),$_=e=>new Promise((t,o)=>{const r=new FileReader;r.onloadend=()=>{t(r.result)},r.onerror=()=>{o(r.error?.message)},r.readAsDataURL(e)});let jP=0;const v9=e=>"blobid"+jP++,I_=(e,t,o)=>B_(e).bind(({data:r,type:c,base64Encoded:u})=>{if(t&&!u)return M.none();{const f=u?r:btoa(r);return o(f,c)}}),WP=(e,t,o)=>{const r=e.create(v9(),t,o);return e.add(r),r},zf=(e,t,o=!1)=>I_(t,o,(r,c)=>M.from(e.getByData(r,c)).orThunk(()=>UP(c,r).map(u=>WP(e,u,r)))),L_=(e,t)=>{const o=()=>Promise.reject("Invalid data URI");if(kn(t,"blob:")){const r=e.getByUri(t);return X(r)?Promise.resolve(r):Zs(t).then(c=>$_(c).then(u=>I_(u,!1,f=>M.some(WP(e,c,f))).getOrThunk(o)))}else return kn(t,"data:")?zf(e,t).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},y9=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,C9=e=>M.from(e.match(y9)).bind(t=>Xr(t,1)).map(t=>kn(t,"www.")?t.substring(4):t),bT=(e,t)=>{M.from(e.attr("src")).bind(C9).forall(o=>!Wt(t,o))&&e.attr("sandbox","")},F_=(e,t)=>kn(e,`${t}/`),x9=e=>Wn(e)?"iframe":F_(e,"image")?"img":F_(e,"video")?"video":F_(e,"audio")?"audio":"iframe",ia=({type:e,src:t,width:o,height:r}={},c,u)=>{const f=x9(e),b=new Na(f,1);return b.attr(f==="audio"?{src:t}:{src:t,width:o,height:r}),(f==="audio"||f==="video")&&b.attr("controls",""),f==="iframe"&&c&&bT(b,u),b},S9=e=>X(e.attr("data-mce-bogus")),Sp=e=>e.attr("src")===po.transparentSrc||X(e.attr("data-mce-placeholder")),w9=(e,t)=>{const{blob_cache:o}=t;if(o){const r=c=>{const u=c.attr("src");Sp(c)||S9(c)||Yt(u)||zf(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>Ae(c,r))}},E9=(e,t)=>{const o=e.schema;e.addAttributeFilter("href",f=>{let b=f.length;const v=O=>O.split(" ").filter(P=>P.length>0).concat(["noopener"]).sort().join(" "),S=O=>{const R=O?lt.trim(O):"";return/\b(noopener)\b/g.test(R)?R:v(R)};if(!t.allow_unsafe_link_target)for(;b--;){const O=f[b];O.name==="a"&&O.attr("target")==="_blank"&&O.attr("rel",S(O.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",f=>{let b=f.length,v,S,O,R;for(;b--;)if(R=f[b],R.name==="a"&&R.firstChild&&!R.attr("href"))for(O=R.parent,v=R.lastChild;v&&O;)S=v.prev,O.insert(v,R),v=S}),t.fix_list_elements&&e.addNodeFilter("ul,ol",f=>{let b=f.length,v,S;for(;b--;)if(v=f[b],S=v.parent,S&&(S.name==="ul"||S.name==="ol"))if(v.prev&&v.prev.name==="li")v.prev.append(v);else{const O=new Na("li",1);O.attr("style","list-style-type: none"),v.wrap(O)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",f=>{let b=f.length;for(;b--;){const v=f[b],S=v.attr("class")??"",O=lt.explode(S," ");let R="";for(let P=0;P<O.length;P++){const z=O[P];let ee=!1,W=r["*"];W&&W[z]&&(ee=!0),W=r[v.name],!ee&&W&&W[z]&&(ee=!0),ee&&(R&&(R+=" "),R+=z)}R.length||(R=null),v.attr("class",R)}}),w9(e,t);const c=t.sandbox_iframes??!1,u=Ja(t.sandbox_iframes_exclusions??[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",f=>Ae(f,b=>{b.replace(ia({type:b.attr("type"),src:b.name==="object"?b.attr("data"):b.attr("src"),width:b.attr("width"),height:b.attr("height")},c,u))})),c&&e.addNodeFilter("iframe",f=>Ae(f,b=>bT(b,u)))};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:ZP,setPrototypeOf:GP,isFrozen:T9,getPrototypeOf:k9,getOwnPropertyDescriptor:A9}=Object;let{freeze:_l,seal:Vd,create:bx}=Object,{apply:H_,construct:z_}=typeof Reflect<"u"&&Reflect;_l||(_l=function(t){return t}),Vd||(Vd=function(t){return t}),H_||(H_=function(t,o,r){return t.apply(o,r)}),z_||(z_=function(t,o){return new t(...o)});const V_=ei(Array.prototype.forEach),vx=ei(Array.prototype.lastIndexOf),qP=ei(Array.prototype.pop),Cb=ei(Array.prototype.push),_9=ei(Array.prototype.splice),vT=ei(String.prototype.toLowerCase),U_=ei(String.prototype.toString),KP=ei(String.prototype.match),Bm=ei(String.prototype.replace),xb=ei(String.prototype.indexOf),yT=ei(String.prototype.trim),fu=ei(Object.prototype.hasOwnProperty),Ga=ei(RegExp.prototype.test),$m=CT(TypeError);function ei(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return H_(e,t,r)}}function CT(e){return function(){for(var t=arguments.length,o=new Array(t),r=0;r<t;r++)o[r]=arguments[r];return z_(e,o)}}function fs(e,t){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vT;GP&&GP(e,null);let r=t.length;for(;r--;){let c=t[r];if(typeof c=="string"){const u=o(c);u!==c&&(T9(t)||(t[r]=u),c=u)}e[c]=!0}return e}function j_(e){for(let t=0;t<e.length;t++)fu(e,t)||(e[t]=null);return e}function Im(e){const t=bx(null);for(const[o,r]of ZP(e))fu(e,o)&&(Array.isArray(r)?t[o]=j_(r):r&&typeof r=="object"&&r.constructor===Object?t[o]=Im(r):t[o]=r);return t}function qv(e,t){for(;e!==null;){const r=A9(e,t);if(r){if(r.get)return ei(r.get);if(typeof r.value=="function")return ei(r.value)}e=k9(e)}function o(){return null}return o}const W_=_l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wp=_l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),xT=_l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),YP=_l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),ST=_l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wT=_l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Z_=_l(["#text"]),G_=_l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ET=_l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q_=_l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ud=_l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ep=Vd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jd=Vd(/<%[\w\W]*|[\w\W]*%>/gm),O9=Vd(/\$\{[\w\W]*/gm),D9=Vd(/^data-[\-\w.\u00B7-\uFFFF]+$/),R9=Vd(/^aria-[\-\w]+$/),XP=Vd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),N9=Vd(/^(?:\w+script|data):/i),M9=Vd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QP=Vd(/^html$/i),P9=Vd(/^[a-z][.\w]*(-[.\w]+)+$/i);var JP=Object.freeze({__proto__:null,ARIA_ATTR:R9,ATTR_WHITESPACE:M9,CUSTOM_ELEMENT:P9,DATA_ATTR:D9,DOCTYPE_NAME:QP,ERB_EXPR:jd,IS_ALLOWED_URI:XP,IS_SCRIPT_OR_DATA:N9,MUSTACHE_EXPR:Ep,TMPLIT_EXPR:O9});const yx={element:1,text:3,progressingInstruction:7,comment:8,document:9},B9=function(){return typeof window>"u"?null:window},$9=function(t,o){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const c="data-tt-policy-suffix";o&&o.hasAttribute(c)&&(r=o.getAttribute(c));const u="dompurify"+(r?"#"+r:"");try{return t.createPolicy(u,{createHTML(f){return f},createScriptURL(f){return f}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}},TT=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function kT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:B9();const t=lo=>kT(lo);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==yx.document||!e.Element)return t.isSupported=!1,t;let{document:o}=e;const r=o,c=r.currentScript,{DocumentFragment:u,HTMLTemplateElement:f,Node:b,Element:v,NodeFilter:S,NamedNodeMap:O=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:R,DOMParser:P,trustedTypes:z}=e,ee=v.prototype,W=qv(ee,"cloneNode"),J=qv(ee,"remove"),be=qv(ee,"nextSibling"),ye=qv(ee,"childNodes"),Se=qv(ee,"parentNode");if(typeof f=="function"){const lo=o.createElement("template");lo.content&&lo.content.ownerDocument&&(o=lo.content.ownerDocument)}let Ve,et="";const{implementation:Pt,createNodeIterator:un,createDocumentFragment:He,getElementsByTagName:Me}=o,{importNode:Ue}=r;let Nt=TT();t.isSupported=typeof ZP=="function"&&typeof Se=="function"&&Pt&&Pt.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Dn,ERB_EXPR:Rn,TMPLIT_EXPR:go,DATA_ATTR:Yo,ARIA_ATTR:Ss,IS_SCRIPT_OR_DATA:Is,ATTR_WHITESPACE:Ba,CUSTOM_ELEMENT:Rl}=JP;let{IS_ALLOWED_URI:Lt}=JP,vn=null;const Vo=fs({},[...W_,...wp,...xT,...ST,...Z_]);let Do=null;const Xa=fs({},[...G_,...ET,...q_,...Ud]);let Ge=Object.seal(bx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),vt=null,qt=null,ro=!0,Xn=!0,ts=!1,Nl=!0,Jd=!1,cd=!0,yu=!1,Hp=!1,ni=!1,tl=!1,mh=!1,Uy=!1,Ok=!0,An=!1;const vo="user-content-";let Nr=!0,Os=!1,ss={},Er=null;const Ml=fs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ai=null;const id=fs({},["audio","video","img","source","image","track"]);let fh=null;const Dk=fs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rk="http://www.w3.org/1998/Math/MathML",MS="http://www.w3.org/2000/svg",eg="http://www.w3.org/1999/xhtml";let jy=eg,QN=!1,Nk=null;const iJ=fs({},[Rk,MS,eg],U_);let JN=fs({},["mi","mo","mn","ms","mtext"]),e5=fs({},["annotation-xml"]);const lJ=fs({},["title","style","font","a","script"]);let Mk=null;const Wy=["application/xhtml+xml","text/html"],C7="text/html";let _e=null,Pe=null;const Ht=o.createElement("form"),yt=function(Be){return Be instanceof RegExp||Be instanceof Function},Mn=function(){let Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Pe&&Pe===Be)){if((!Be||typeof Be!="object")&&(Be={}),Be=Im(Be),Mk=Wy.indexOf(Be.PARSER_MEDIA_TYPE)===-1?C7:Be.PARSER_MEDIA_TYPE,_e=Mk==="application/xhtml+xml"?U_:vT,vn=fu(Be,"ALLOWED_TAGS")?fs({},Be.ALLOWED_TAGS,_e):Vo,Do=fu(Be,"ALLOWED_ATTR")?fs({},Be.ALLOWED_ATTR,_e):Xa,Nk=fu(Be,"ALLOWED_NAMESPACES")?fs({},Be.ALLOWED_NAMESPACES,U_):iJ,fh=fu(Be,"ADD_URI_SAFE_ATTR")?fs(Im(Dk),Be.ADD_URI_SAFE_ATTR,_e):Dk,Ai=fu(Be,"ADD_DATA_URI_TAGS")?fs(Im(id),Be.ADD_DATA_URI_TAGS,_e):id,Er=fu(Be,"FORBID_CONTENTS")?fs({},Be.FORBID_CONTENTS,_e):Ml,vt=fu(Be,"FORBID_TAGS")?fs({},Be.FORBID_TAGS,_e):Im({}),qt=fu(Be,"FORBID_ATTR")?fs({},Be.FORBID_ATTR,_e):Im({}),ss=fu(Be,"USE_PROFILES")?Be.USE_PROFILES:!1,ro=Be.ALLOW_ARIA_ATTR!==!1,Xn=Be.ALLOW_DATA_ATTR!==!1,ts=Be.ALLOW_UNKNOWN_PROTOCOLS||!1,Nl=Be.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Jd=Be.SAFE_FOR_TEMPLATES||!1,cd=Be.SAFE_FOR_XML!==!1,yu=Be.WHOLE_DOCUMENT||!1,tl=Be.RETURN_DOM||!1,mh=Be.RETURN_DOM_FRAGMENT||!1,Uy=Be.RETURN_TRUSTED_TYPE||!1,ni=Be.FORCE_BODY||!1,Ok=Be.SANITIZE_DOM!==!1,An=Be.SANITIZE_NAMED_PROPS||!1,Nr=Be.KEEP_CONTENT!==!1,Os=Be.IN_PLACE||!1,Lt=Be.ALLOWED_URI_REGEXP||XP,jy=Be.NAMESPACE||eg,JN=Be.MATHML_TEXT_INTEGRATION_POINTS||JN,e5=Be.HTML_INTEGRATION_POINTS||e5,Ge=Be.CUSTOM_ELEMENT_HANDLING||{},Be.CUSTOM_ELEMENT_HANDLING&&yt(Be.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ge.tagNameCheck=Be.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Be.CUSTOM_ELEMENT_HANDLING&&yt(Be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ge.attributeNameCheck=Be.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Be.CUSTOM_ELEMENT_HANDLING&&typeof Be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ge.allowCustomizedBuiltInElements=Be.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Jd&&(Xn=!1),mh&&(tl=!0),ss&&(vn=fs({},Z_),Do=[],ss.html===!0&&(fs(vn,W_),fs(Do,G_)),ss.svg===!0&&(fs(vn,wp),fs(Do,ET),fs(Do,Ud)),ss.svgFilters===!0&&(fs(vn,xT),fs(Do,ET),fs(Do,Ud)),ss.mathMl===!0&&(fs(vn,ST),fs(Do,q_),fs(Do,Ud))),Be.ADD_TAGS&&(vn===Vo&&(vn=Im(vn)),fs(vn,Be.ADD_TAGS,_e)),Be.ADD_ATTR&&(Do===Xa&&(Do=Im(Do)),fs(Do,Be.ADD_ATTR,_e)),Be.ADD_URI_SAFE_ATTR&&fs(fh,Be.ADD_URI_SAFE_ATTR,_e),Be.FORBID_CONTENTS&&(Er===Ml&&(Er=Im(Er)),fs(Er,Be.FORBID_CONTENTS,_e)),Nr&&(vn["#text"]=!0),yu&&fs(vn,["html","head","body"]),vn.table&&(fs(vn,["tbody"]),delete vt.tbody),Be.TRUSTED_TYPES_POLICY){if(typeof Be.TRUSTED_TYPES_POLICY.createHTML!="function")throw $m('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Be.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw $m('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Ve=Be.TRUSTED_TYPES_POLICY,et=Ve.createHTML("")}else Ve===void 0&&(Ve=$9(z,c)),Ve!==null&&typeof et=="string"&&(et=Ve.createHTML(""));_l&&_l(Be),Pe=Be}},Bo=fs({},[...wp,...xT,...YP]),Yr=fs({},[...ST,...wT]),gh=function(Be){let yn=Se(Be);(!yn||!yn.tagName)&&(yn={namespaceURI:jy,tagName:"template"});const to=vT(Be.tagName),$a=vT(yn.tagName);return Nk[Be.namespaceURI]?Be.namespaceURI===MS?yn.namespaceURI===eg?to==="svg":yn.namespaceURI===Rk?to==="svg"&&($a==="annotation-xml"||JN[$a]):!!Bo[to]:Be.namespaceURI===Rk?yn.namespaceURI===eg?to==="math":yn.namespaceURI===MS?to==="math"&&e5[$a]:!!Yr[to]:Be.namespaceURI===eg?yn.namespaceURI===MS&&!e5[$a]||yn.namespaceURI===Rk&&!JN[$a]?!1:!Yr[to]&&(lJ[to]||!Bo[to]):!!(Mk==="application/xhtml+xml"&&Nk[Be.namespaceURI]):!1},tg=function(Be){Cb(t.removed,{element:Be});try{Se(Be).removeChild(Be)}catch{J(Be)}},Pk=function(Be,yn){try{Cb(t.removed,{attribute:yn.getAttributeNode(Be),from:yn})}catch{Cb(t.removed,{attribute:null,from:yn})}if(yn.removeAttribute(Be),Be==="is")if(tl||mh)try{tg(yn)}catch{}else try{yn.setAttribute(Be,"")}catch{}},uJ=function(Be){let yn=null,to=null;if(ni)Be="<remove></remove>"+Be;else{const _i=KP(Be,/^[\r\n\t ]+/);to=_i&&_i[0]}Mk==="application/xhtml+xml"&&jy===eg&&(Be='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Be+"</body></html>");const $a=Ve?Ve.createHTML(Be):Be;if(jy===eg)try{yn=new P().parseFromString($a,Mk)}catch{}if(!yn||!yn.documentElement){yn=Pt.createDocument(jy,"template",null);try{yn.documentElement.innerHTML=QN?et:$a}catch{}}const Cu=yn.body||yn.documentElement;return Be&&to&&Cu.insertBefore(o.createTextNode(to),Cu.childNodes[0]||null),jy===eg?Me.call(yn,yu?"html":"body")[0]:yu?yn.documentElement:Cu},dJ=function(Be){return un.call(Be.ownerDocument||Be,Be,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},qY=function(Be){return Be instanceof R&&(typeof Be.nodeName!="string"||typeof Be.textContent!="string"||typeof Be.removeChild!="function"||!(Be.attributes instanceof O)||typeof Be.removeAttribute!="function"||typeof Be.setAttribute!="function"||typeof Be.namespaceURI!="string"||typeof Be.insertBefore!="function"||typeof Be.hasChildNodes!="function")},mJ=function(Be){return typeof b=="function"&&Be instanceof b};function Yb(lo,Be,yn){V_(lo,to=>{to.call(t,Be,yn,Pe)})}const fJ=function(Be){let yn=null;if(Yb(Nt.beforeSanitizeElements,Be,null),qY(Be))return tg(Be),!0;const to=_e(Be.nodeName);if(Yb(Nt.uponSanitizeElement,Be,{tagName:to,allowedTags:vn}),cd&&Be.hasChildNodes()&&!mJ(Be.firstElementChild)&&Ga(/<[/\w!]/g,Be.innerHTML)&&Ga(/<[/\w!]/g,Be.textContent)||Be.nodeType===yx.progressingInstruction||cd&&Be.nodeType===yx.comment&&Ga(/<[/\w]/g,Be.data))return tg(Be),!0;if(!vn[to]||vt[to]){if(!vt[to]&&hJ(to)&&(Ge.tagNameCheck instanceof RegExp&&Ga(Ge.tagNameCheck,to)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(to)))return!1;if(Nr&&!Er[to]){const $a=Se(Be)||Be.parentNode,Cu=ye(Be)||Be.childNodes;if(Cu&&$a){const _i=Cu.length;for(let em=_i-1;em>=0;--em){const Xb=W(Cu[em],!0);Xb.__removalCount=(Be.__removalCount||0)+1,$a.insertBefore(Xb,be(Be))}}}return tg(Be),!0}return Be instanceof v&&!gh(Be)||(to==="noscript"||to==="noembed"||to==="noframes")&&Ga(/<\/no(script|embed|frames)/i,Be.innerHTML)?(tg(Be),!0):(Jd&&Be.nodeType===yx.text&&(yn=Be.textContent,V_([Dn,Rn,go],$a=>{yn=Bm(yn,$a," ")}),Be.textContent!==yn&&(Cb(t.removed,{element:Be.cloneNode()}),Be.textContent=yn)),Yb(Nt.afterSanitizeElements,Be,null),!1)},gJ=function(Be,yn,to){if(Ok&&(yn==="id"||yn==="name")&&(to in o||to in Ht))return!1;if(!(Xn&&!qt[yn]&&Ga(Yo,yn))){if(!(ro&&Ga(Ss,yn))){if(!Do[yn]||qt[yn]){if(!(hJ(Be)&&(Ge.tagNameCheck instanceof RegExp&&Ga(Ge.tagNameCheck,Be)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(Be))&&(Ge.attributeNameCheck instanceof RegExp&&Ga(Ge.attributeNameCheck,yn)||Ge.attributeNameCheck instanceof Function&&Ge.attributeNameCheck(yn))||yn==="is"&&Ge.allowCustomizedBuiltInElements&&(Ge.tagNameCheck instanceof RegExp&&Ga(Ge.tagNameCheck,to)||Ge.tagNameCheck instanceof Function&&Ge.tagNameCheck(to))))return!1}else if(!fh[yn]){if(!Ga(Lt,Bm(to,Ba,""))){if(!((yn==="src"||yn==="xlink:href"||yn==="href")&&Be!=="script"&&xb(to,"data:")===0&&Ai[Be])){if(!(ts&&!Ga(Is,Bm(to,Ba,"")))){if(to)return!1}}}}}}return!0},hJ=function(Be){return Be!=="annotation-xml"&&KP(Be,Rl)},pJ=function(Be){Yb(Nt.beforeSanitizeAttributes,Be,null);const{attributes:yn}=Be;if(!yn||qY(Be))return;const to={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Do,forceKeepAttr:void 0};let $a=yn.length;for(;$a--;){const Cu=yn[$a],{name:_i,namespaceURI:em,value:Xb}=Cu,t5=_e(_i),KY=Xb;let xu=_i==="value"?KY:yT(KY);if(to.attrName=t5,to.attrValue=xu,to.keepAttr=!0,to.forceKeepAttr=void 0,Yb(Nt.uponSanitizeAttribute,Be,to),xu=to.attrValue,An&&(t5==="id"||t5==="name")&&(Pk(_i,Be),xu=vo+xu),cd&&Ga(/((--!?|])>)|<\/(style|title)/i,xu)){Pk(_i,Be);continue}if(to.forceKeepAttr)continue;if(!to.keepAttr){Pk(_i,Be);continue}if(!Nl&&Ga(/\/>/i,xu)){Pk(_i,Be);continue}Jd&&V_([Dn,Rn,go],vJ=>{xu=Bm(xu,vJ," ")});const bJ=_e(Be.nodeName);if(!gJ(bJ,t5,xu)){Pk(_i,Be);continue}if(Ve&&typeof z=="object"&&typeof z.getAttributeType=="function"&&!em)switch(z.getAttributeType(bJ,t5)){case"TrustedHTML":{xu=Ve.createHTML(xu);break}case"TrustedScriptURL":{xu=Ve.createScriptURL(xu);break}}if(xu!==KY)try{em?Be.setAttributeNS(em,_i,xu):Be.setAttribute(_i,xu),qY(Be)?tg(Be):qP(t.removed)}catch{Pk(_i,Be)}}Yb(Nt.afterSanitizeAttributes,Be,null)},Lee=function lo(Be){let yn=null;const to=dJ(Be);for(Yb(Nt.beforeSanitizeShadowDOM,Be,null);yn=to.nextNode();)Yb(Nt.uponSanitizeShadowNode,yn,null),fJ(yn),pJ(yn),yn.content instanceof u&&lo(yn.content);Yb(Nt.afterSanitizeShadowDOM,Be,null)};return t.sanitize=function(lo){let Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},yn=null,to=null,$a=null,Cu=null;if(QN=!lo,QN&&(lo="<!-->"),typeof lo!="string"&&!mJ(lo))if(typeof lo.toString=="function"){if(lo=lo.toString(),typeof lo!="string")throw $m("dirty is not a string, aborting")}else throw $m("toString is not a function");if(!t.isSupported)return lo;if(Hp||Mn(Be),t.removed=[],typeof lo=="string"&&(Os=!1),Os){if(lo.nodeName){const Xb=_e(lo.nodeName);if(!vn[Xb]||vt[Xb])throw $m("root node is forbidden and cannot be sanitized in-place")}}else if(lo instanceof b)yn=uJ("<!---->"),to=yn.ownerDocument.importNode(lo,!0),to.nodeType===yx.element&&to.nodeName==="BODY"||to.nodeName==="HTML"?yn=to:yn.appendChild(to);else{if(!tl&&!Jd&&!yu&&lo.indexOf("<")===-1)return Ve&&Uy?Ve.createHTML(lo):lo;if(yn=uJ(lo),!yn)return tl?null:Uy?et:""}yn&&ni&&tg(yn.firstChild);const _i=dJ(Os?lo:yn);for(;$a=_i.nextNode();)fJ($a),pJ($a),$a.content instanceof u&&Lee($a.content);if(Os)return lo;if(tl){if(mh)for(Cu=He.call(yn.ownerDocument);yn.firstChild;)Cu.appendChild(yn.firstChild);else Cu=yn;return(Do.shadowroot||Do.shadowrootmode)&&(Cu=Ue.call(r,Cu,!0)),Cu}let em=yu?yn.outerHTML:yn.innerHTML;return yu&&vn["!doctype"]&&yn.ownerDocument&&yn.ownerDocument.doctype&&yn.ownerDocument.doctype.name&&Ga(QP,yn.ownerDocument.doctype.name)&&(em="<!DOCTYPE "+yn.ownerDocument.doctype.name+`>
`+em),Jd&&V_([Dn,Rn,go],Xb=>{em=Bm(em,Xb," ")}),Ve&&Uy?Ve.createHTML(em):em},t.setConfig=function(){let lo=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Mn(lo),Hp=!0},t.clearConfig=function(){Pe=null,Hp=!1},t.isValidAttribute=function(lo,Be,yn){Pe||Mn({});const to=_e(lo),$a=_e(Be);return gJ(to,$a,yn)},t.addHook=function(lo,Be){typeof Be=="function"&&Cb(Nt[lo],Be)},t.removeHook=function(lo,Be){if(Be!==void 0){const yn=vx(Nt[lo],Be);return yn===-1?void 0:_9(Nt[lo],yn,1)[0]}return qP(Nt[lo])},t.removeHooks=function(lo){Nt[lo]=[]},t.removeAllHooks=function(){Nt=TT()},t}var AT=kT();const eB=lt.each,I9=lt.trim,tB=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],nB={ftp:21,http:80,https:443,mailto:25},K_=["img","video"],oB=(e,t)=>X(e)?!e:X(t)?!Wt(K_,t):!0,sB=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},_T=(e,t,o)=>{const r=sB(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?oB(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Wd{static parseDataUri(t){let o;const r=decodeURIComponent(t).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(t,o,r={}){if(r.allow_script_urls)return!0;{const c=vi.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!_T(r,c,o)}}static getDocumentBaseUrl(t){let o;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?o=t.href??"":o=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}source;protocol;authority;userInfo;user;password;host;port;relative;path="";directory="";file;query;anchor;settings;constructor(t,o={}){t=I9(t),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){c.source=t;return}const u=t.indexOf("//")===0;if(t.indexOf("/")===0&&!u&&(t=(r&&r.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const b=r?r.path:new Wd(document.location.href).directory;if(r?.protocol==="")t="//mce_host"+c.toAbsPath(b,t);else{const v=/([^#?]*)([#?]?.*)/.exec(t);v&&(t=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,v[1])+v[2])}}t=t.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);f&&eB(tB,(b,v)=>{let S=f[v];S&&(S=S.replace(/\(mce_at\)/g,"@@")),c[b]=S}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}setPath(t){const o=/^(.*?)\/?(\w+)?$/.exec(t);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const o=new Wd(t,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(t,o){const r=new Wd(t,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const o=this.protocol?nB[this.protocol]:null;if(o&&(this.port||o)==(t.port||o))return!0}return!1}toRelPath(t,o){let r=0,c="",u,f;const b=t.substring(0,t.lastIndexOf("/")).split("/"),v=o.split("/");if(b.length>=v.length){for(u=0,f=b.length;u<f;u++)if(u>=v.length||b[u]!==v[u]){r=u+1;break}}if(b.length<v.length){for(u=0,f=v.length;u<f;u++)if(u>=b.length||b[u]!==v[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=v.length;u<f;u++)u!==r-1?c+="/"+v[u]:c+=v[u];return c}toAbsPath(t,o){let r=0;const c=/\/$/.test(o)?"/":"",u=t.split("/"),f=o.split("/"),b=[];eB(u,R=>{R&&b.push(R)});const v=[];for(let R=f.length-1;R>=0;R--)if(!(f[R].length===0||f[R]===".")){if(f[R]===".."){r++;continue}if(r>0){r--;continue}v.push(f[R])}const S=b.length-r;let O;return S<=0?O=gs(v).join("/"):O=b.slice(0,S).join("/")+"/"+gs(v).join("/"),O.indexOf("/")!==0&&(O="/"+O),c&&O.lastIndexOf("/")!==O.length-1&&(O+=c),O}getURI(t=!1){let o;return(!this.source||t)&&(o="",t||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const L9=lt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Zd="data-mce-type";let Qu=0;const Cx=(e,t,o,r,c)=>{const u=t.validate,f=o.getSpecialElements();e.nodeType===vc&&(!t.allow_conditional_comments&&/^\[if/i.test(e.nodeValue??"")&&(e.nodeValue=" "+e.nodeValue),t.sanitize&&t.allow_html_in_comments&&V(e.nodeValue)&&(e.nodeValue=u9(e.nodeValue)));const b=c?.tagName??e.nodeName.toLowerCase();if(r!=="html"&&o.isValid(r)){X(c)&&(c.allowedTags[b]=!0);return}if(e.nodeType!==ig||b==="body")return;const v=ne.fromDom(e),S=ws(v,Zd),O=bs(v,"data-mce-bogus");if(!S&&V(O)){O==="all"?Xo(v):yc(v);return}const R=o.getElementRule(b);if(u&&!R){Pn(f,b)?Xo(v):yc(v);return}else X(c)&&(c.allowedTags[b]=!0);if(u&&R&&!S){if(Ae(R.attributesForced??[],P=>{Ts(v,P.name,P.value==="{$uid}"?`mce_${Qu++}`:P.value)}),Ae(R.attributesDefault??[],P=>{ws(v,P.name)||Ts(v,P.name,P.value==="{$uid}"?`mce_${Qu++}`:P.value)}),R.attributesRequired&&!io(R.attributesRequired,P=>ws(v,P))){yc(v);return}if(R.removeEmptyAttrs&&tf(v)){yc(v);return}R.outputName&&R.outputName!==b&&Du(v,R.outputName)}},rB=(e,t,o,r,c)=>{const u=e.tagName.toLowerCase(),{attrName:f,attrValue:b}=c;c.keepAttr=xx(t,o,r,u,f,b),c.keepAttr?(c.allowedAttributes[f]=!0,X_(f,o,e.nodeName)&&(c.attrValue=f),t.allow_svg_data_urls&&kn(b,"data:image/svg+xml")&&(c.forceKeepAttr=!0)):Y_(e,f)&&(c.forceKeepAttr=!0)},xx=(e,t,o,r,c,u)=>o!=="html"&&!yg(r)?!0:!(c in L9&&_T(e,u,r))&&(!e.validate||t.isValid(r,c)||kn(c,"data-")||kn(c,"aria-")),Y_=(e,t)=>e.hasAttribute(Zd)&&(t==="id"||t==="class"||t==="style"),X_=(e,t,o)=>e in t.getBoolAttrs()&&!Pn(t.getCustomElements(),o.toLowerCase()),aB=(e,t,o,r)=>{const{attributes:c}=e;for(let u=c.length-1;u>=0;u--){const f=c[u],b=f.name,v=f.value;!xx(t,o,r,e.tagName.toLowerCase(),b,v)&&!Y_(e,b)?e.removeAttribute(b):X_(b,o,e.nodeName)&&e.setAttribute(b,b)}},cB=(e,t,o)=>{const r=AT();return r.addHook("uponSanitizeElement",(c,u)=>{Cx(c,e,t,o.track(c),u)}),r.addHook("uponSanitizeAttribute",(c,u)=>{rB(c,e,t,o.current(),u)}),r},iB=(e,t)=>{const r={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body","html"],ALLOWED_ATTR:[]}};return r.PARSER_MEDIA_TYPE=t,e.allow_script_urls?r.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(r.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),r},lB=e=>{const t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(r=>`xlink:${r}`),o={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};AT().sanitize(e,o)},OT=(e,t)=>{const o={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}},r=AT(),c=t.allow_mathml_annotation_encodings,u=At(c)&&c.length>0,f=v=>{const S=v.getAttribute("encoding");return u&&V(S)&&Wt(c,S)},b=(v,S)=>u&&S==="semantics"?M.some(!0):S==="annotation"?M.some(kt(v)&&f(v)):At(t.extended_mathml_elements)&&t.extended_mathml_elements.includes(S)?M.from(!0):M.none();r.addHook("uponSanitizeElement",(v,S)=>{const O=S.tagName??v.nodeName.toLowerCase();b(v,O).each(P=>{S.allowedTags[O]=P,!P&&t.sanitize&&kt(v)&&v.remove()})}),r.addHook("uponSanitizeAttribute",(v,S)=>{At(t.extended_mathml_attributes)&&t.extended_mathml_attributes.includes(S.attrName)&&(S.forceKeepAttr=!0)}),r.sanitize(e,o)},Q_=e=>t=>{const o=b2(t);if(o==="svg")lB(t);else if(o==="math")OT(t,e);else throw new Error("Not a namespace element")},F9=(e,t)=>{const o=qS();if(e.sanitize){const r=cB(e,t,o);return{sanitizeHtmlElement:(u,f)=>{r.sanitize(u,iB(e,f)),r.removed=[],o.reset()},sanitizeNamespaceElement:Q_(e)}}else return{sanitizeHtmlElement:(u,f)=>{const b=document.createNodeIterator(u,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let v;for(;v=b.nextNode();){const S=o.track(v);Cx(v,e,t,S),kt(v)&&aB(v,e,t,S)}o.reset()},sanitizeNamespaceElement:_t}},uB=["script","style","template","param","meta","title","link"],dB=lt.makeMap,mB=lt.extend,J_=(e,t,o,r,c)=>{const u=e.name,f=u in o&&u!=="title"&&u!=="textarea"&&u!=="noscript",b=t.childNodes;for(let v=0,S=b.length;v<S;v++){const O=b[v],R=new Na(O.nodeName.toLowerCase(),O.nodeType);if(kt(O)){const P=O.attributes;for(let z=0,ee=P.length;z<ee;z++){const W=P[z];R.attr(W.name,W.value)}yg(R.name)&&(r(O),R.value=O.innerHTML)}else dt(O)?(R.value=O.data,f&&(R.raw=!0)):Zn(O)?R.value=c?d9(O.data):O.data:(d2(O)||jr(O))&&(R.value=O.data);if(f2(O)){const P=Na.create("#text");P.value=O.innerHTML,P.raw=!0,R.append(P)}else yg(R.name)||J_(R,O,o,r,c);e.append(R)}},H9=(e,t,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;Ae(t,b=>b(f)),Yt(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];Ae(o,f=>f(u))}},z9=(e,t,o,r)=>{const c=o.validate,u=t.getNonEmptyElements(),f=t.getWhitespaceElements(),b=mB(dB(uB),t.getBlockElements()),v=x0(t),S=/[ \t\r\n]+/g,O=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,P=ye=>{let Se=ye.parent;for(;X(Se);){if(Se.name in f)return!0;Se=Se.parent}return!1},z=ye=>{let Se=ye;for(;X(Se);){if(Se.name in v)return hx(t,u,f,Se);Se=Se.parent}return!1},ee=ye=>ye.name in b||bi(t,ye)||yg(ye.name)&&ye.parent===e,W=(ye,Se)=>{const Ve=Se?ye.prev:ye.next;return X(Ve)||Yt(ye.parent)?!1:ee(ye.parent)&&(ye.parent!==e||r.isRootContent===!0)};return[ye=>{if(ye.type===3&&!P(ye)){let Se=ye.value??"";Se=Se.replace(S," "),(Pm(ye.prev,ee)||W(ye,!0))&&(Se=Se.replace(O,"")),Se.length===0||Se===" "&&ye.prev&&ye.prev.type===vc&&ye.next&&ye.next.type===vc?ye.remove():ye.value=Se}},ye=>{if(ye.type===1){const Se=t.getElementRule(ye.name);if(c&&Se){const Ve=hx(t,u,f,ye);Se.paddInEmptyBlock&&Ve&&z(ye)?xp(o,r,ee,ye):Se.removeEmpty&&Ve?ee(ye)?ye.remove():ye.unwrap():Se.paddEmpty&&(Ve||Zv(ye))&&xp(o,r,ee,ye)}}else if(ye.type===3&&!P(ye)){let Se=ye.value??"";(ye.next&&ee(ye.next)||W(ye,!1))&&(Se=Se.replace(R,"")),Se.length===0?ye.remove():ye.value=Se}}]},eO=(e,t)=>{const o=t.forced_root_block??e.forced_root_block;return o===!1?"":o===!0?"p":o},fB=' xmlns="http://www.w3.org/1999/xhtml"',Kv=(e={},t=Aa())=>{const o=zP(),r=zP(),c={validate:!0,root_name:"body",sanitize:!0,allow_html_in_comments:!1,...e},u=new DOMParser,f=F9(c,t),b=(Se,Ve,et="html",Pt=!1)=>{const un=et==="xhtml",He=un?"application/xhtml+xml":"text/html",Me=Pn(t.getSpecialElements(),Ve.toLowerCase()),Ue=Me?`<${Ve}>${Se}</${Ve}>`:Se,Nt=()=>/^[\s]*<head/i.test(Se)||/^[\s]*<html/i.test(Se)||/^[\s]*<!DOCTYPE/i.test(Se)?`<html${un?fB:""}>${Ue}</html>`:un?`<html${fB}><head></head><body>${Ue}</body></html>`:`<body>${Ue}</body>`,Dn=u.parseFromString(Nt(),He),Rn=Pt?Dn.documentElement:Dn.body;return f.sanitizeHtmlElement(Rn,He),Me?Rn.firstChild:Rn},v=o.addFilter,S=o.getFilters,O=o.removeFilter,R=r.addFilter,P=r.getFilters,z=r.removeFilter,ee=(Se,Ve)=>{px(t,Se)&&Ve.push(Se)},W=(Se,Ve)=>{const et=V(Ve.attr(Zd)),Pt=Ve.type===1&&!Pn(Se,Ve.name)&&!bi(t,Ve)&&!yg(Ve.name);return Ve.type===3||Pt&&!et},J=(Se,Ve)=>{const et=mB(dB(uB),t.getBlockElements()),Pt=/^[ \t\r\n]+/,un=/[ \t\r\n]+$/;let He=Se.firstChild,Me=null;const Ue=Nt=>{Nt&&(He=Nt.firstChild,He&&He.type===3&&(He.value=He.value?.replace(Pt,"")),He=Nt.lastChild,He&&He.type===3&&(He.value=He.value?.replace(un,"")))};if(t.isValidChild(Se.name,Ve.toLowerCase())){for(;He;){const Nt=He.next;W(et,He)?(Me||(Me=new Na(Ve,1),Me.attr(c.forced_root_block_attrs),Se.insert(Me,He)),Me.append(He)):(Ue(Me),Me=null),He=Nt}Ue(Me)}},ye={schema:t,addAttributeFilter:R,getAttributeFilters:P,removeAttributeFilter:z,addNodeFilter:v,getNodeFilters:S,removeNodeFilter:O,parse:(Se,Ve={})=>{const et=c.validate,Pt=(Ve.context??c.root_name)==="#document",un=Ve.context??(Pt?"html":c.root_name),He=b(Se,un,Ve.format,Pt);ra(t,He);const Me=new Na(un,11);J_(Me,He,t.getSpecialElements(),f.sanitizeNamespaceElement,c.sanitize&&c.allow_html_in_comments),He.innerHTML="";const[Ue,Nt]=z9(Me,t,c,Ve),Dn=[],Rn=et?Is=>ee(Is,Dn):_t,go={nodes:{},attributes:{}},Yo=Is=>N_(S(),P(),Is,go);H9(Me,[Ue,Yo],[Nt,Rn]),Dn.reverse(),et&&Dn.length>0&&(Ve.context?Ve.invalid=!0:FP(Dn,t,Me,Yo));const Ss=eO(c,Ve);return Ss&&(Me.name==="body"||Ve.isRootContent)&&J(Me,Ss),Ve.invalid||IP(go,Ve),Me}};return E9(ye,c),g9(ye,c,t),ye},DT=e=>e instanceof Na,V9=e=>DT(e)?pp({validate:!1}).serialize(e):e,gB=(e,t,o)=>{const r=V9(e),c=t(r);if(c.isDefaultPrevented())return c;if(DT(e))if(c.content!==r){const u=Kv({validate:!1,forced_root_block:!1,...o}).parse(c.content,{context:e.name});return{...c,content:u}}else return{...c,content:e};else return c},hB=e=>({sanitize:Sv(e),sandbox_iframes:mp(e),sandbox_iframes_exclusions:Tm(e)}),pB=(e,t)=>{if(t.no_events)return Tr.value(t);{const o=ip(e,t);return o.isDefaultPrevented()?Tr.error(Fw(e,{content:"",...o}).content):Tr.value(o)}},Sx=(e,t,o)=>o.no_events?t:gB(t,c=>Fw(e,{...o,content:c}),hB(e)).content,wx=(e,t)=>{if(t.no_events)return Tr.value(t);{const o=gB(t.content,r=>N3(e,{...t,content:r}),hB(e));return o.isDefaultPrevented()?(Lw(e,o),Tr.error(void 0)):Tr.value(o)}},tO=(e,t,o)=>{o.no_events||Lw(e,{...o,content:t})},U9="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),j9=["content_css_cors"],W9="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),nO=[{name:"export",replacedWith:"Export to PDF"}],bB=(e,t)=>{const o=Xe(t,r=>Pn(e,r));return Oi(o)},Z9=e=>{const t=bB(e,U9),o=e.forced_root_block;return(o===!1||o==="")&&t.push("forced_root_block (false only)"),Oi(t)},oO=e=>bB(e,j9),vB=(e,t)=>{const o=lt.makeMap(e.plugins," "),c=Xe(t,u=>Pn(o,u));return Oi(c)},G9=e=>vB(e,W9),q9=e=>vB(e,nO.map(t=>t.name)),K9=(e,t)=>{const o=Z9(e),r=G9(t),c=r.length>0,u=o.length>0,f=t.theme==="mobile";if(c||u||f){const v=f?`

Themes:
- mobile`:"",S=c?`

Plugins:
- ${r.join(`
- `)}`:"",O=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 8.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/8/migration-from-7x/ for more information."+v+S+O)}},Y9=e=>No(nO,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),X9=(e,t)=>{const o=oO(e),r=q9(t),c=r.length>0,u=o.length>0;if(c||u){const b=c?`

Plugins:
- ${r.map(Y9).join(`
- `)}`:"",v=u?`

Options:
- ${o.join(`
- `)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+b+v)}},Q9=(e,t)=>{K9(e,t),X9(e,t)},RT={fire:'The "fire" event api has been deprecated and will be removed in TinyMCE 9. Use "dispatch" instead.',selectionSetContent:'The "editor.selection.setContent" method has been deprecated and will be removed in TinyMCE 9. Use "editor.insertContent" instead.'},Ex=e=>{console.warn(RT[e],new Error().stack)},yB=e=>e.dom.length===0?(Xo(e),M.none()):M.some(e),J9=(e,t)=>e.filter(o=>Fv.isBookmarkNode(o.dom)).bind(t?rc:li),NT=(e,t,o,r,c)=>{const u=e.dom,f=t.dom,b=r?u.length:f.length;r?(cT(u,f,c,!1,!r),o.setStart(f,b)):(cT(f,u,c,!1,!r),o.setEnd(f,b))},eV=(e,t,o)=>{sc(e).each(r=>{const c=e.dom;t&&ax(r,Le(c,0),o)?rT(c,0,o):!t&&Pc(r,Le(c,c.length),o)&&aT(c,c.length,o)})},CB=(e,t,o,r,c)=>{e.bind(u=>((r?aT:rT)(u.dom,r?u.dom.length:0,c),t.filter(Ao).map(b=>NT(u,b,o,r,c)))).orThunk(()=>J9(t,r).or(t).filter(Ao).map(f=>eV(f,r,c)))},tV=(e,t,o)=>{const r=M.from(t.firstChild).map(ne.fromDom),c=M.from(t.lastChild).map(ne.fromDom);e.deleteContents(),e.insertNode(t);const u=r.bind(li).filter(Ao).bind(yB),f=c.bind(rc).filter(Ao).bind(yB);CB(u,r,e,!0,o),CB(f,c,e,!1,o),e.collapse(!1)},nV=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),oV=(e,t)=>{if(t.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(t.content,{forced_root_block:!1,...c,...t});return pp({validate:!1},e.schema).serialize(u)}else return t.content},MT=(e,t,o={})=>{const r=nV(o,t);wx(e,r).each(c=>{const u=oV(e,c),f=e.selection.getRng();tV(f,f.createContextualFragment(u),e.schema),e.selection.setRng(f),du(e,f),tO(e,u,c)})},sV=(e,t,o={})=>{Ex("selectionSetContent"),MT(e,t,o)},rV=e=>X(e.firstChild)&&e.firstChild===e.lastChild,aV=e=>e.name==="br"||e.value===Fs,cV=(e,t)=>e.getBlockElements()[t.name]&&rV(t)&&aV(t.firstChild),iV=(e,t)=>{const o=e.getNonEmptyElements();return X(t)&&(t.isEmpty(o)||cV(e,t))},IQ=(e,t)=>{let o=t.firstChild,r=t.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),iV(e,r)&&(r=r?.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},Gd=e=>{const t=e.firstChild,o=e.lastChild;return t&&t.nodeName==="META"&&t.parentNode?.removeChild(t),o&&o.id==="mce_marker"&&o.parentNode?.removeChild(o),e},xB=(e,t,o)=>{const r=t.serialize(o),c=e.createFragment(r);return Gd(c)},lV=e=>Xe(e?.childNodes??[],t=>t.nodeName==="LI"),SB=e=>e.data===Fs||js(e),uV=e=>X(e?.firstChild)&&e.firstChild===e.lastChild&&SB(e.firstChild),dV=e=>!e.firstChild||uV(e),LQ=e=>e.length>0&&dV(e[e.length-1])?e.slice(0,-1):e,qa=(e,t)=>{const o=e.getParent(t,e.isBlock);return o&&o.nodeName==="LI"?o:null},mV=(e,t)=>!!qa(e,t),sO=(e,t)=>{const o=t.cloneRange(),r=t.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},wB=(e,t)=>{const o=Le.before(e),c=Gu(t).next(o);return c?c.toRange():null},Tx=(e,t)=>{const o=Le.after(e),c=Gu(t).prev(o);return c?c.toRange():null},fV=(e,t,o,r)=>{const c=sO(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),lt.each(t,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),Tx(t[t.length-1],o)},gV=(e,t,o)=>{const r=e.parentNode;return r&&lt.each(t,c=>{r.insertBefore(c,e)}),wB(e,o)},hV=(e,t,o,r)=>(r.insertAfter(t.reverse(),e),Tx(t[0],o)),pV=(e,t,o,r)=>{const c=xB(t,e,r),u=qa(t,o.startContainer),f=LQ(lV(c.firstChild)),b=1,v=2,S=t.getRoot(),O=R=>{const P=Le.fromRangeStart(o),z=Gu(t.getRoot()),W=(R===b?z.prev(P):z.next(P))?.getNode();return W?qa(t,W)!==u:!0};return u?O(b)?gV(u,f,S):O(v)?hV(u,f,S,t):fV(u,f,S,o):null},bV=["pre"],EB=(e,t,o,r)=>{const c=t.firstChild,u=t.lastChild,f=u.attr("data-mce-type")==="bookmark"?u.prev:u,b=c===f,v=Wt(bV,c.name);if(b&&v){const S=c.attr("contenteditable")!=="false",O=e.getParent(o,e.isBlock)?.nodeName.toLowerCase()===c.name,R=M.from(Nm(r,o)).forall(hi);return S&&O&&R}else return!1},rO=Nh,TB=(e,t,o)=>{if(X(o)){const r=e.getParent(t.endContainer,rO);return o===r&&hA(ne.fromDom(o),t)}else return!1},kB=(e,t)=>{if(e.isBlock(t)&&e.isEditable(t)){const o=t.childNodes;return o.length===1&&js(o[0])||o.length===0}else return!1},vV=(e,t,o)=>{o.getAttribute("data-mce-bogus")==="all"?o.parentNode?.insertBefore(e.dom.createFragment(t),o):kB(e.dom,o)?e.dom.setHTML(o,t):MT(e,t,{no_events:!0})},yV=(e,t,o)=>{M.from(e.getParent(t,"td,th")).map(ne.fromDom).each(r=>$2(r,o))},CV=(e,t)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(t){const c=e.getBody(),u=Mm(e),f="*[data-mce-fragment]",b=r.select(f);lt.each(b,v=>{const S=P=>X(o[P.nodeName.toLowerCase()]),O=P=>P.childNodes.length===1;if((P=>!(hM(r,P)||pM(r,P)))(v)&&S(v)&&O(v)){const P=Uv(r,v),z=(be,ye)=>Qa(be,Se=>Wt(ye,Se)),ee=be=>O(v)&&r.is(be,f)&&S(be)&&(be.nodeName===v.nodeName&&z(P,Uv(r,be))||ee(be.children[0])),W=be=>X(be)&&be!==c&&(u.compare(v,be)||W(be.parentElement)),J=be=>X(be)&&be!==c&&r.is(be,f)&&(UH(r,v,be)||J(be.parentElement));(ee(v.children[0])||W(v.parentElement)&&!J(v.parentElement))&&r.remove(v,!0)}}),n9(e,Cd(b))}},xV=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},SV=e=>{lt.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},PT=e=>!!e.getAttribute("data-mce-fragment"),AB=(e,t)=>X(t)&&!e.schema.getVoidElements()[t.nodeName],_B=(e,t)=>{let o;const r=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const u=Nm(e.getBody(),t);if(u&&r.getContentEditable(u)==="false"){r.remove(t),c.select(u);return}let f=r.createRng();const b=t.previousSibling;if(dt(b)){f.setStart(b,b.nodeValue?.length??0);const O=t.nextSibling;dt(O)&&(b.appendData(O.data),O.parentNode?.removeChild(O))}else f.setStartBefore(t),f.setEndBefore(t);const v=O=>{let R=Le.fromRangeStart(O);return R=Gu(e.getBody()).next(R),R?.toRange()},S=r.getParent(t,r.isBlock);if(r.remove(t),S&&r.isEmpty(S)){const O=rO(S);zi(ne.fromDom(S)),f.setStart(S,0),f.setEnd(S,0),!O&&!PT(S)&&(o=v(f))?(f=o,r.remove(S)):r.add(S,r.create("br",O?{}:{"data-mce-bogus":"1"}))}c.setRng(f)},wV=e=>{const t=e.dom,o=P_(e.selection.getRng());e.selection.setRng(o);const r=t.getParent(o.startContainer,rO);TB(t,o,r)?lT(e,o,ne.fromDom(r)):F7(o)||L7(o)?o.deleteContents():e.getDoc().execCommand("Delete",!1)},OB=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return M.some(t);return M.none()},EV=(e,t,o)=>io(o.children(),Ji)&&e.getParent(t,e.isBlock)?.nodeName==="SUMMARY",TV=(e,t,o)=>{const r=e.selection,c=e.dom,u=e.parser,f=o.merge,b=pp({validate:!0},e.schema),v='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';o.preserve_zwsp||(t=Xc(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,v);let S=r.getRng();const O=S.startContainer,R=e.getBody();O===R&&r.isCollapsed()&&c.isBlock(R.firstChild)&&AB(e,R.firstChild)&&c.isEmpty(R.firstChild)&&(S=c.createRng(),S.setStart(R.firstChild,0),S.setEnd(R.firstChild,0),r.setRng(S)),r.isCollapsed()||wV(e);const P=r.getNode(),z={context:P.nodeName.toLowerCase(),data:o.data,insert:!0},ee=u.parse(t,z);if(o.paste===!0&&IQ(e.schema,ee)&&mV(c,P))return S=pV(b,c,r.getRng(),ee),S&&r.setRng(S),t;o.paste===!0&&EB(c,ee,P,e.getBody())&&ee.firstChild?.unwrap(),xV(ee);let W=ee.lastChild;if(W&&W.attr("id")==="mce_marker"){const J=W;for(W=W.prev;W&&W.name!=="table";W=W.walk(!0))if(W.type===3||!c.isBlock(W.name)){W.parent&&e.schema.isValidChild(W.parent.name,"span")&&W.parent.insert(J,W,W.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(P),!z.invalid&&!EV(c,P,ee))t=b.serialize(ee),vV(e,t,P);else{MT(e,v);let J=r.getNode(),be;const ye=e.getBody();for(dm(J)?J=be=ye:be=J;be&&be!==ye;)J=be,be=be.parentNode;t=J===ye?ye.innerHTML:c.getOuterHTML(J);const Se=u.parse(t),Ve=OB(Se),et=Ve.bind(c9).getOr(Se);Ve.each(He=>He.replace(ee));const Pt=i9(ee);ee.unwrap();const un=Xe(Pt,He=>px(e.schema,He));FP(un,e.schema,et),LP(u.getNodeFilters(),u.getAttributeFilters(),Se),t=b.serialize(Se),J===ye?c.setHTML(ye,t):c.setOuterHTML(J,t)}return CV(e,f),_B(e,c.get("mce_marker")),SV(e.getBody()),yV(c,r.getStart(),e.schema),b0(e.schema,e.getBody(),r.getStart()),t},kV=e=>{zv(e)&&E(e.getBody()).each(t=>{const o=t.getNode(),r=Zc(o)?E(o).getOr(t):t;e.selection.setRng(r.toRange())})},kx=(e,t,o)=>{e.dom.setHTML(e.getBody(),t),o!==!0&&kV(e)},aO=(e,t,o,r)=>{if(o=Xc(o),o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';t.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(o="<li>"+c+"</li>");const u=Rr(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,iu(e),o)):o||(o=c),kx(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=pp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=I0(ne.fromDom(t))?o:lt.trim(o);return kx(e,c,r.no_selection),{content:c,html:c}}},AV=(e,t,o,r)=>{LP(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=pp({validate:!1},e.schema).serialize(o),u=Xc(I0(ne.fromDom(t))?c:lt.trim(c));return kx(e,u,r.no_selection),{content:o,html:u}},cO=(e,t,o)=>M.from(e.getBody()).map(r=>DT(t)?AV(e,r,t,o):aO(e,r,t,o)).getOr({content:t,html:DT(o.content)?"":o.content}),Ax={},DB=yl(["pre"]),_V=(e,t)=>{Ax[e]||(Ax[e]=[]),Ax[e].push(t)},OV=(e,t)=>{Pn(Ax,e)&&Ae(Ax[e],o=>{o(t)})};_V("pre",e=>{const t=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return DB(f)&&Wt(c,f)},r=(c,u)=>{const f=ne.fromDom(u),b=Li(f).dom;Xo(f),mi(ne.fromDom(c),[ne.fromTag("br",b),ne.fromTag("br",b),...Ns(f)])};if(!t.collapsed){const c=e.selection.getSelectedBlocks(),u=Xe(Xe(c,DB),o(c));Ae(u,f=>{r(f.previousSibling,f)})}});const RB=lt.each,DV=(e,t,o,r)=>{const c=u=>{if(Wc(u)&&kt(u.parentNode)&&e.isEditable(u)){const f=E5(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(lt.walk(r,c,"childNodes"),c(r))},NB=(e,t,o,r)=>{if(t.styles&&t.styles.backgroundColor){const c=T_(e,"fontSize");E_(r,u=>c(u)&&e.isEditable(u),TP(e,"backgroundColor",Gg(t.styles.backgroundColor,o)))}},RV=(e,t,o,r)=>{if(Za(t)&&(t.inline==="sub"||t.inline==="sup")){const c=T_(e,"fontSize");E_(r,f=>c(f)&&e.isEditable(f),TP(e,"fontSize",""));const u=Xe(e.select(t.inline==="sup"?"sub":"sup",r),e.isEditable);e.remove(u,!0)}},NV=(e,t,o,r)=>{RB(t,c=>{Za(c)&&RB(e.dom.select(c.inline,r),u=>{w_(u)&&gx(e,c,o,u,c.exact?u:null)}),jz(e.dom,c,r)})},MV=(e,t,o,r,c)=>{const u=c.parentNode;Xu(e,u,o,r)&&gx(e,t,r,c)||t.merge_with_parents&&u&&e.dom.getParent(u,f=>Xu(e,f,o,r)?(gx(e,t,r,c),!0):!1)},PV=lt.each,BV=(e,t,o,r)=>{if(p5(e)&&Za(t)&&o.parentNode){const c=x0(e.schema),u=an(ne.fromDom(o),f=>U(f.dom));return Ko(c,r)&&bn(e.schema,o.parentNode,{skipBogus:!1,includeZwsp:!0})&&!u}else return!1},$V=(e,t,o,r)=>{const c=e.formatter.get(t),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,v=e.selection,S=(z,ee)=>{let W=!1;return PV(z,J=>Id(J)?b.getContentEditable(ee)==="false"&&!J.ceFalseOverride||X(J.collapsed)&&J.collapsed!==f?!0:b.is(ee,J.selector)&&!U(ee)?(bb(e,ee,J,o,ee),W=!0,!1):!0:!1),W},O=z=>{if(V(z)){const ee=b.create(z);return bb(e,ee,u,o,r),ee}else return null},R=(z,ee,W)=>{const J=[];let be=!0;const ye=u.inline||u.block,Se=O(ye),Ve=un=>V7(u)&&Xu(e,un,t,o),et=(un,He,Me)=>{const Ue=U7(u)&&KC(e.schema,un)&&Iv(e,He,ye);return Me&&Ue},Pt=(un,He,Me,Ue)=>{const Nt=un.nodeName.toLowerCase(),Dn=Iv(e,ye,Nt)&&Iv(e,He,ye),Rn=!W&&dt(un)&&R1(un.data),go=U(un),Yo=!Za(u)||!z.isBlock(un);return(Me||Ue)&&Dn&&!Rn&&!go&&Yo};Ld(z,ee,un=>{let He;const Me=Ue=>{let Nt=!1,Dn=be,Rn=!1;const go=Ue.parentNode,Yo=go.nodeName.toLowerCase(),Ss=z.getContentEditable(Ue);X(Ss)&&(Dn=be,be=Ss==="true",Nt=!0,Rn=w5(e,Ue));const Is=be&&!Nt;if(js(Ue)&&!BV(e,u,Ue,Yo)){He=null,Om(u)&&z.remove(Ue);return}if(Ve(Ue)){He=null;return}if(et(Ue,Yo,Is)){const Ba=z.rename(Ue,ye);bb(e,Ba,u,o,Ue),J.push(Ba),He=null;return}if(Id(u)){let Ba=S(c,Ue);if(!Ba&&X(go)&&vA(u)&&(Ba=S(c,go)),!Za(u)||Ba){He=null;return}}X(Se)&&Pt(Ue,Yo,Is,Rn)?(He||(He=z.clone(Se,!1),go.insertBefore(He,Ue),J.push(He)),Rn&&Nt&&(be=Dn),He.appendChild(Ue)):(He=null,Ae(is(Ue.childNodes),Me),Nt&&(be=Dn),He=null)};Ae(un,Me)}),u.links===!0&&Ae(J,un=>{const He=Me=>{Me.nodeName==="A"&&bb(e,Me,u,o,r),Ae(is(Me.childNodes),He)};He(un)}),t9(e,t,Cd(J)),Ae(J,un=>{const He=Nt=>{let Dn=0;return Ae(Nt.childNodes,Rn=>{!H7(Rn)&&!Js(Rn)&&Dn++}),Dn},Me=Nt=>No(Nt.childNodes,qC).filter(Rn=>z.getContentEditable(Rn)!=="false"&&dT(z,Rn,u)).map(Rn=>{const go=z.clone(Rn,!1);return bb(e,go,u,o,Nt),z.replace(go,Nt,!0),z.remove(Rn,!0),go}).getOr(Nt),Ue=He(un);if((J.length>1||!z.isBlock(un))&&Ue===0){z.remove(un,!0);return}(Za(u)||Om(u)&&u.wrapper)&&(!u.exact&&Ue===1&&(un=Me(un)),NV(e,c,o,un),MV(e,u,t,o,un),NB(z,u,o,un),DV(z,u,o,un),RV(z,u,o,un),EP(e,u,o,un))})},P=GC(r)?r:v.getNode();if(b.getContentEditable(P)==="false"&&!w5(e,P)){r=P,S(c,r),wm(e,t,r,o);return}if(u){if(r)if(GC(r)){if(!S(c,r)){const z=b.createRng();z.setStartBefore(r),z.setEndAfter(r),R(b,If(b,z,c),!0)}}else R(b,r,!0);else!f||!Za(u)||Xt(e).length?(v.setRng(P_(v.getRng())),C5(e,()=>{WC(e,(z,ee)=>{const W=ee?z:If(b,z,c);R(b,W,!1)})},Te),e.nodeChanged()):uP(e,t,o),Vz(e.formatter,t).each(z=>{const ee=S_(e.selection);Ae(ee,W=>d_(b,W,z,o))});OV(t,e)}wm(e,t,r,o)},MB=(e,t,o,r)=>{(r||e.selection.isEditable())&&$V(e,t,o,r)},Sb=e=>Pn(e,"vars"),BT=(e,t)=>{e.set({}),t.on("NodeChange",o=>{BB(t,o.element,e.get())}),t.on("FormatApply FormatRemove",o=>{const r=M.from(o.node).map(c=>GC(c)?c:c.startContainer).bind(c=>kt(c)?M.some(c):M.from(c.parentElement)).getOrThunk(()=>iO(t));BB(t,r,e.get())})},iO=e=>e.selection.getStart(),lO=(e,t,o,r,c)=>oi(t,b=>{const v=e.formatter.matchNode(b,o,c??{},r);return!Wn(v)},b=>oP(e,b,o)?!0:r?!1:X(e.formatter.matchNode(b,o,c,!0))),PB=(e,t)=>{const o=t??iO(e);return Xe(BE(e.dom,o),r=>kt(r)&&!ff(r))},BB=(e,t,o)=>{const r=PB(e,t);qn(o,(c,u)=>{const f=b=>{const v=lO(e,r,u,b.similar,Sb(b)?b.vars:void 0),S=v.isSome();if(b.state.get()!==S){b.state.set(S);const O=v.getOr(t);Sb(b)?b.callback(S,{node:O,format:u,parents:r}):Ae(b.callbacks,R=>R(S,{node:O,format:u,parents:r}))}};Ae([c.withSimilar,c.withoutSimilar],f),Ae(c.withVars,f)})},uO=(e,t,o,r,c,u)=>{const f=t.get();Ae(o.split(","),b=>{const v=qo(f,b).getOrThunk(()=>{const O={withSimilar:{state:rn(!1),similar:!0,callbacks:[]},withoutSimilar:{state:rn(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=O,O}),S=()=>{const O=PB(e);return lO(e,O,b,c,u).isSome()};if(Wn(u)){const O=c?v.withSimilar:v.withoutSimilar;O.callbacks.push(r),O.callbacks.length===1&&O.state.set(S())}else v.withVars.push({state:rn(S()),similar:c,vars:u,callback:r})}),t.set(f)},IV=(e,t,o)=>{const r=e.get();Ae(t.split(","),c=>qo(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Xe(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Xe(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Xe(u.withVars,f=>f.callback!==o)}})),e.set(r)},LV=(e,t,o,r,c,u)=>(uO(e,t,o,r,c,u),{unbind:()=>IV(t,o,r)}),FV=(e,t,o,r)=>{const c=e.formatter.get(t);c&&(f_(e,t,o,r)&&(!("toggle"in c[0])||c[0].toggle)?gT(e,t,o,r):MB(e,t,o,r))},dO=(e,t,o)=>({element:e,width:t,rows:o}),$B=(e,t)=>({element:e,cells:t}),$T=(e,t)=>({x:e,y:t}),Yv=(e,t)=>fi(e,t).bind(ng).getOr(1),HV=(e,t,o,r,c)=>{const u=Yv(c,"rowspan"),f=Yv(c,"colspan"),b=e.rows;for(let v=o;v<o+u;v++){b[v]||(b[v]=$B(ql(r),[]));for(let S=t;S<t+f;S++){const O=b[v].cells;O[S]=v===o&&S===t?c:Cr(c)}}},Xv=(e,t,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[t]},gu=(e,t,o)=>{for(;Xv(e,t,o);)t++;return t},Qv=e=>Ho(e,(t,o)=>o.cells.length>t?o.cells.length:t,0),Jo=(e,t)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(no(c[u],t))return M.some($T(u,r))}return M.none()},Jv=(e,t,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const v=f[b].cells,S=t<r?v.slice(t,r+1):v.slice(r,t+1);u.push($B(f[b].element,S))}return u},IB=(e,t,o)=>{const r=t.x,c=t.y,u=o.x,f=o.y,b=c<f?Jv(e,r,c,u,f):Jv(e,r,f,u,c);return dO(e.element,Qv(b),b)},LB=(e,t)=>{const o=Cr(e.element),r=ne.fromTag("tbody");return mi(r,t),yo(o,r),o},IT=e=>hn(e.rows,t=>{const o=hn(t.cells,c=>{const u=ql(c);return cr(u,"colspan"),cr(u,"rowspan"),u}),r=Cr(t.element);return mi(r,o),r}),mO=e=>{const t=dO(Cr(e),0,[]);return Ae(Fe(e,"tr"),(o,r)=>{Ae(Fe(o,"td,th"),(c,u)=>{HV(t,gu(t,u,r),r,o,c)})}),dO(t.element,Qv(t.rows),t.rows)},fO=e=>LB(e,IT(e)),gO=(e,t,o)=>Jo(e,t).bind(r=>Jo(e,o).map(c=>IB(e,r,c))),hO=e=>No(e,t=>jn(t)==="ul"||jn(t)==="ol"),LT=(e,t)=>No(e,o=>jn(o)==="li"&&hA(o,t)).fold(it([]),o=>hO(e).map(r=>{const c=ne.fromTag(jn(r)),u=Il(sf(r),(f,b)=>kn(b,"list-style"));return Cc(c,u),[ne.fromTag("li"),c]}).getOr([])),pO=(e,t)=>{const o=Ho(t,(r,c)=>(yo(c,r),c),e);return t.length>0?Sd([o]):o},FB=e=>_c(e)?sc(e).filter(Tl).fold(it([]),t=>[e,t]):Tl(e)?[e]:[],HB=(e,t,o)=>{const r=ne.fromDom(t.commonAncestorContainer),c=zd(r,e),u=Xe(c,v=>o.isWrapper(jn(v))),f=LT(c,t),b=u.concat(f.length?f:FB(r));return hn(b,Cr)},bO=()=>Sd([]),zB=(e,t,o)=>pO(ne.fromDom(t.cloneContents()),HB(e,t,o)),VB=(e,t)=>lr(t,"table",ae(no,e)),wb=(e,t)=>VB(e,t[0]).bind(o=>{const r=t[0],c=t[t.length-1],u=mO(o);return gO(u,r,c).map(f=>Sd([fO(f)]))}).getOrThunk(bO),UB=(e,t,o)=>t.length>0&&t[0].collapsed?bO():zB(e,t[0],o),vO=(e,t,o)=>{const r=DE(t,e);return r.length>0?wb(e,r):UB(e,t,o)},FT=(e,t)=>t>=0&&t<e.length&&Xi(e.charAt(t)),jB=e=>Xc(e.innerText),WB=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),ZB=e=>M.from(e.selection.getRng()).map(t=>{const o=M.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),r=e.getBody(),c=WB(o),u=ne.fromDom(t.cloneContents());dM(u),mM(u);const f=e.dom.add(r,c,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),b=jB(f),v=Xc(f.textContent??"");if(e.dom.remove(f),FT(v,0)||FT(v,v.length-1)){const S=o.getOr(r),O=jB(S),R=O.indexOf(b);if(R===-1)return b;{const P=FT(O,R-1),z=FT(O,R+b.length);return(P?" ":"")+b+(z?" ":"")}}else return b}).getOr(""),GB=(e,t)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=LA(e,Bv(c)),f=t.contextual?vO(ne.fromDom(e.getBody()),u,e.schema).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,t)},HT=(e,t)=>{if(t.format==="text")return ZB(e);{const o=GB(e,t);return t.format==="tree"?o:e.selection.isCollapsed()?"":o}},qB=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),KB=(e,t,o={})=>{const r=qB(o,t);return pB(e,r).fold(Ro,c=>{const u=HT(e,c);return Sx(e,u,c)})},zT=0,yO=1,CO=2,YB=(e,t)=>{const o=e.length+t.length+2,r=new Array(o),c=new Array(o),u=(O,R,P)=>({start:O,end:R,diag:P}),f=(O,R,P,z,ee)=>{const W=v(O,R,P,z);if(W===null||W.start===R&&W.diag===R-z||W.end===O&&W.diag===O-P){let J=O,be=P;for(;J<R||be<z;)J<R&&be<z&&e[J]===t[be]?(ee.push([zT,e[J]]),++J,++be):R-O>z-P?(ee.push([CO,e[J]]),++J):(ee.push([yO,t[be]]),++be)}else{f(O,W.start,P,W.start-W.diag,ee);for(let J=W.start;J<W.end;++J)ee.push([zT,e[J]]);f(W.end,R,W.end-W.diag,z,ee)}},b=(O,R,P,z)=>{let ee=O;for(;ee-R<z&&ee<P&&e[ee]===t[ee-R];)++ee;return u(O,ee,R)},v=(O,R,P,z)=>{const ee=R-O,W=z-P;if(ee===0||W===0)return null;const J=ee-W,be=W+ee,ye=(be%2===0?be:be+1)/2;r[1+ye]=O,c[1+ye]=R+1;let Se,Ve,et,Pt,un;for(Se=0;Se<=ye;++Se){for(Ve=-Se;Ve<=Se;Ve+=2){for(et=Ve+ye,Ve===-Se||Ve!==Se&&r[et-1]<r[et+1]?r[et]=r[et+1]:r[et]=r[et-1]+1,Pt=r[et],un=Pt-O+P-Ve;Pt<R&&un<z&&e[Pt]===t[un];)r[et]=++Pt,++un;if(J%2!==0&&J-Se<=Ve&&Ve<=J+Se&&c[et-J]<=r[et])return b(c[et-J],Ve+O-P,R,z)}for(Ve=J-Se;Ve<=J+Se;Ve+=2){for(et=Ve+ye-J,Ve===J-Se||Ve!==J+Se&&c[et+1]<=c[et-1]?c[et]=c[et+1]-1:c[et]=c[et-1],Pt=c[et]-1,un=Pt-O+P-Ve;Pt>=O&&un>=P&&e[Pt]===t[un];)c[et]=Pt--,un--;if(J%2===0&&-Se<=Ve&&Ve<=Se&&c[et]<=r[et+J])return b(c[et],Ve+O-P,R,z)}}return null},S=[];return f(0,e.length,0,t.length,S),S},xO=e=>kt(e)?e.outerHTML:dt(e)?vi.encodeRaw(e.data,!1):Zn(e)?"<!--"+e.data+"-->":"",XB=e=>{let t;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);t=o.firstChild;)r.appendChild(t);return r},QB=(e,t,o)=>{const r=XB(t);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},JB=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const o=e.childNodes[t];e.removeChild(o)}},SO=(e,t)=>{let o=0;Ae(e,r=>{r[0]===zT?o++:r[0]===yO?(QB(t,r[1],o),o++):r[0]===CO&&JB(t,o)})},e6=(e,t)=>Xe(hn(is(e.childNodes),A(Xc,xO)),o=>o.length>0),t6=(e,t)=>{const o=hn(is(t.childNodes),xO);return SO(YB(o,e),t),t},n6=ya(()=>document.implementation.createHTMLDocument("undo")),o6=e=>e.querySelector(`iframe, ${g2}`)!==null,s6=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),r6=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),_x=e=>{const t=e.serializer.getTempAttrs(),o=uM(e.getBody(),t);return o6(o)?s6(e6(o)):r6(Xc(o.innerHTML))},Ox=(e,t,o)=>{const r=o?t.beforeBookmark:t.bookmark;t.type==="fragmented"?t6(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:X(r)&&Bt(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},ey=e=>e.type==="fragmented"?e.fragments.join(""):e.content,wO=(e,t)=>{const o=ne.fromTag("body",n6());return Ru(o,ey(t)),Ae(Fe(o,"*[data-mce-bogus]"),yc),e&&Ae(Fe(o,"details[open]"),r=>cr(r,"open")),ma(o)},zV=(e,t)=>ey(e)===ey(t),a6=(e,t,o)=>wO(e,t)===wO(e,o),ty=(e,t,o)=>!t||!o?!1:zV(t,o)?!0:a6(e,t,o),Dx=e=>e.get()===0,Tp=(e,t,o)=>{Dx(o)&&(e.typing=t)},VT=(e,t)=>{e.typing&&(Tp(e,!1,t),e.add())},c6=e=>{e.typing&&(e.typing=!1,e.add())},ny=(e,t,o)=>{Dx(t)&&o.set(tp(e.selection))},EO=(e,t,o,r,c,u,f)=>{const b=_x(e),v=lt.extend(u||{},b);if(!Dx(r)||e.removed)return null;const S=t.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:v,lastLevel:S,originalEvent:f}).isDefaultPrevented()||S&&ty(e.readonly,S,v))return null;t.data[o.get()]&&c.get().each(P=>{t.data[o.get()].beforeBookmark=P});const O=aE(e);if(O&&t.data.length>O){for(let P=0;P<t.data.length-1;P++)t.data[P]=t.data[P+1];t.data.length--,o.set(t.data.length)}v.bookmark=tp(e.selection),o.get()<t.data.length-1&&(t.data.length=o.get()+1),t.data.push(v),o.set(t.data.length-1);const R={level:v,lastLevel:S,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",R),e.dispatch("change",R)):e.dispatch("AddUndo",R),v},TO=(e,t,o)=>{t.data=[],o.set(0),t.typing=!1,e.dispatch("ClearUndos")},oy=(e,t,o,r,c)=>{if(t.transact(r)){const u=t.data[o.get()].bookmark,f=t.data[o.get()-1];Ox(e,f,!0),t.transact(c)&&(t.data[o.get()-1].beforeBookmark=u)}},kp=(e,t,o)=>{let r;return t.get()<o.length-1&&(t.set(t.get()+1),r=o[t.get()],Ox(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},i6=(e,t,o,r)=>{let c;return t.typing&&(t.add(),t.typing=!1,Tp(t,!1,o)),r.get()>0&&(r.set(r.get()-1),c=t.data[r.get()],Ox(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},VV=e=>{e.clear(),e.add()},UV=(e,t,o)=>o.get()>0||t.typing&&t.data[0]&&!ty(e.readonly,_x(e),t.data[0]),l6=(e,t)=>t.get()<e.data.length-1&&!e.typing,u6=(e,t,o)=>(VT(e,t),e.beforeChange(),e.ignore(o),e.add()),d6=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},jV=(e,t)=>{const o=e.dom,r=X(t)?t:e.getBody();Ae(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=iE(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,v=yv(e);b&&e.hasVisual?o.addClass(c,v):o.removeClass(c,v)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},Jg=e=>({init:{bindEvents:_t},undoManager:{beforeChange:(t,o)=>ny(e,t,o),add:(t,o,r,c,u,f)=>EO(e,t,o,r,c,u,f),undo:(t,o,r)=>i6(e,t,o,r),redo:(t,o)=>kp(e,t,o),clear:(t,o)=>TO(e,t,o),reset:t=>VV(t),hasUndo:(t,o)=>UV(e,t,o),hasRedo:(t,o)=>l6(t,o),transact:(t,o,r)=>u6(t,o,r),ignore:(t,o)=>d6(t,o),extra:(t,o,r,c)=>oy(e,t,o,r,c)},formatter:{match:(t,o,r,c)=>f_(e,t,o,r,c),matchAll:(t,o)=>g_(e,t,o),matchNode:(t,o,r,c)=>Xu(e,t,o,r,c),canApply:t=>h_(e,t),closest:t=>rP(e,t),apply:(t,o,r)=>MB(e,t,o,r),remove:(t,o,r,c)=>gT(e,t,o,r,c),toggle:(t,o,r)=>FV(e,t,o,r),formatChanged:(t,o,r,c,u)=>LV(e,t,o,r,c,u)},editor:{getContent:t=>FH(e,t),setContent:(t,o)=>cO(e,t,o),insertContent:(t,o)=>TV(e,t,o),addVisual:t=>jV(e,t)},selection:{getContent:(t,o)=>KB(e,t,o)},autocompleter:{addDecoration:_t,removeDecoration:_t},raw:{getModel:()=>M.none()}}),Eb=e=>{const t=S=>Ye(S)?S:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:v}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(S,O,R)=>r.transact(R),ignore:(S,O)=>r.ignore(O),extra:(S,O,R,P)=>r.extra(R,P)},formatter:{match:(S,O,R,P)=>c.match(S,t(O),P),matchAll:c.matchAll,matchNode:c.matchNode,canApply:S=>c.canApply(S),closest:S=>c.closest(S),apply:(S,O,R)=>c.apply(S,t(O)),remove:(S,O,R,P)=>c.remove(S,t(O)),toggle:(S,O,R)=>c.toggle(S,t(O)),formatChanged:(S,O,R,P,z)=>c.formatChanged(O,R,P,z)},editor:{getContent:S=>u.getContent(S),setContent:(S,O)=>({content:u.setContent(S,O),html:""}),insertContent:(S,O)=>(u.insertContent(S),""),addVisual:u.addVisual},selection:{getContent:(S,O)=>f.getContent(O)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>M.some(v.getRawModel())}}},m6=()=>{const e=it(null),t=it("");return{init:{bindEvents:_t},undoManager:{beforeChange:_t,add:e,undo:e,redo:e,clear:_t,reset:_t,hasUndo:pe,hasRedo:pe,transact:e,ignore:_t,extra:_t},formatter:{match:pe,matchAll:it([]),matchNode:it(void 0),canApply:pe,closest:t,apply:_t,remove:_t,toggle:_t,formatChanged:it({unbind:_t})},editor:{getContent:t,setContent:it({content:"",html:""}),insertContent:it(""),addVisual:_t},selection:{getContent:t},autocompleter:{addDecoration:_t,removeDecoration:_t},raw:{getModel:it(M.none())}}},Lm=e=>Pn(e.plugins,"rtc"),WV=e=>qo(e.plugins,"rtc").bind(t=>M.from(t.setup)),ZV=e=>{const t=e;return WV(e).fold(()=>(t.rtcInstance=Jg(e),M.none()),o=>(t.rtcInstance=m6(),M.some(()=>o().then(r=>(t.rtcInstance=Eb(r),r.rtc.isRemote)))))},kO=e=>e.rtcInstance?e.rtcInstance:Jg(e),Cs=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},qd=(e,t,o)=>{Cs(e).undoManager.beforeChange(t,o)},f6=(e,t,o,r,c,u,f)=>Cs(e).undoManager.add(t,o,r,c,u,f),AO=(e,t,o,r)=>Cs(e).undoManager.undo(t,o,r),_O=(e,t,o)=>Cs(e).undoManager.redo(t,o),UT=(e,t,o)=>{Cs(e).undoManager.clear(t,o)},GV=(e,t)=>{Cs(e).undoManager.reset(t)},g6=(e,t,o)=>Cs(e).undoManager.hasUndo(t,o),Rx=(e,t,o)=>Cs(e).undoManager.hasRedo(t,o),qV=(e,t,o,r)=>Cs(e).undoManager.transact(t,o,r),jT=(e,t,o)=>{Cs(e).undoManager.ignore(t,o)},OO=(e,t,o,r,c)=>{Cs(e).undoManager.extra(t,o,r,c)},h6=(e,t,o,r,c)=>Cs(e).formatter.match(t,o,r,c),Nx=(e,t,o)=>Cs(e).formatter.matchAll(t,o),KV=(e,t,o,r,c)=>Cs(e).formatter.matchNode(t,o,r,c),YV=(e,t)=>Cs(e).formatter.canApply(t),Fm=(e,t)=>Cs(e).formatter.closest(t),Ol=(e,t,o,r)=>{Cs(e).formatter.apply(t,o,r)},Mx=(e,t,o,r,c)=>{Cs(e).formatter.remove(t,o,r,c)},Dl=(e,t,o,r)=>{Cs(e).formatter.toggle(t,o,r)},XV=(e,t,o,r,c,u)=>Cs(e).formatter.formatChanged(t,o,r,c,u),xs=(e,t)=>kO(e).editor.getContent(t),QV=(e,t,o)=>kO(e).editor.setContent(t,o),eh=(e,t,o)=>kO(e).editor.insertContent(t,o),Px=(e,t,o)=>Cs(e).selection.getContent(t,o),p6=(e,t)=>Cs(e).editor.addVisual(t),WT=e=>Cs(e).init.bindEvents(),DO=(e,t={})=>{const o=t.format?t.format:"html";return Px(e,o,t)},b6=(e,t,o)=>{if(Pn(e,t)){const r=Xe(e[t],c=>c!==o);r.length===0?delete e[t]:e[t]=r}};var RO=(e,t)=>{let o,r;const c=(b,v)=>No(v,S=>e.is(S,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},t.on("NodeChange",b=>{const v=b.element,S=u(v),O={};qn(o,(R,P)=>{c(P,S).each(z=>{r[P]||(Ae(R,ee=>{ee(!0,{node:z,selector:P,parents:S})}),r[P]=R),O[P]=R})}),qn(r,(R,P)=>{O[P]||(delete r[P],Ae(R,z=>{z(!1,{node:v,selector:P,parents:S})}))})})};return{selectorChangedWithUnbind:(b,v)=>(o||f(),o[b]||(o[b]=[]),o[b].push(v),c(b,u(t.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{b6(o,b,v),b6(r,b,v)}})}};const v6=e=>!!(e&&e.ownerDocument)&&oc(ne.fromDom(e.ownerDocument),ne.fromDom(e)),y6=e=>e?v6(e.startContainer)&&v6(e.endContainer):!1,NO=(e,t,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=RO(e,r),b=(Lt,vn)=>{const Vo=e.createRng();X(Lt)&&X(vn)?(Vo.setStart(Lt,vn),Vo.setEnd(Lt,vn),Ve(Vo),be(!1)):(NE(e,Vo,r.getBody(),!0),Ve(Vo))},v=Lt=>DO(r,Lt),S=(Lt,vn)=>sV(r,Lt,vn),O=Lt=>KE(r.getBody(),Se(),Lt),R=Lt=>BA(r.getBody(),Se(),Lt),P=(Lt,vn)=>Ba.getBookmark(Lt,vn),z=Lt=>Ba.moveToBookmark(Lt),ee=(Lt,vn)=>(sM(e,Lt,vn).each(Ve),Lt),W=()=>{const Lt=Se(),vn=ye();return!Lt||Lt.item?!1:Lt.compareEndPoints?Lt.compareEndPoints("StartToEnd",Lt)===0:!vn||Lt.collapsed},J=()=>{if(r.mode.isReadOnly())return!1;const Lt=Se(),vn=r.getBody().querySelectorAll('[data-mce-selected="1"]');return vn.length>0?Qa(vn,Vo=>e.isEditable(Vo.parentElement)):TH(e,Lt)},be=Lt=>{const vn=Se();vn.collapse(!!Lt),Ve(vn)},ye=()=>t.getSelection?t.getSelection():t.document.selection,Se=()=>{let Lt;const vn=(Do,Xa,Ge)=>{try{return Xa.compareBoundaryPoints(Do,Ge)}catch{return-1}},Vo=t.document;if(X(r.bookmark)&&!zv(r)){const Do=VE(r);if(Do.isSome())return Do.map(Xa=>LA(r,[Xa])[0]).getOr(Vo.createRange())}try{const Do=ye();Do&&!g0(Do.anchorNode)&&(Do.rangeCount>0?Lt=Do.getRangeAt(0):Lt=Vo.createRange(),Lt=LA(r,[Lt])[0])}catch{}if(Lt||(Lt=Vo.createRange()),dm(Lt.startContainer)&&Lt.collapsed){const Do=e.getRoot();Lt.setStart(Do,0),Lt.setEnd(Do,0)}return c&&u&&(vn(Lt.START_TO_START,Lt,c)===0&&vn(Lt.END_TO_END,Lt,c)===0?Lt=u:(c=null,u=null)),Lt},Ve=(Lt,vn)=>{if(!y6(Lt))return;const Vo=ye();if(Lt=r.dispatch("SetSelectionRange",{range:Lt,forward:vn}).range,Vo){u=Lt;try{Vo.removeAllRanges(),Vo.addRange(Lt)}catch{}vn===!1&&Vo.extend&&(Vo.collapse(Lt.endContainer,Lt.endOffset),Vo.extend(Lt.startContainer,Lt.startOffset)),c=Vo.rangeCount>0?Vo.getRangeAt(0):null}if(!Lt.collapsed&&Lt.startContainer===Lt.endContainer&&Vo?.setBaseAndExtent&&Lt.endOffset-Lt.startOffset<2&&Lt.startContainer.hasChildNodes()){const Xa=Lt.startContainer.childNodes[Lt.startOffset];Xa&&Xa.nodeName==="IMG"&&(Vo.setBaseAndExtent(Lt.startContainer,Lt.startOffset,Lt.endContainer,Lt.endOffset),(Vo.anchorNode!==Lt.startContainer||Vo.focusNode!==Lt.endContainer)&&Vo.setBaseAndExtent(Xa,0,Xa,1))}r.dispatch("AfterSetSelectionRange",{range:Lt,forward:vn})},et=Lt=>(MT(r,e.getOuterHTML(Lt)),Lt),Pt=()=>IA(r.getBody(),Se()),un=(Lt,vn)=>kH(e,Se(),Lt,vn),He=()=>{const Lt=ye(),vn=Lt?.anchorNode,Vo=Lt?.focusNode;if(!Lt||!vn||!Vo||g0(vn)||g0(Vo))return!0;const Do=e.createRng(),Xa=e.createRng();try{Do.setStart(vn,Lt.anchorOffset),Do.collapse(!0),Xa.setStart(Vo,Lt.focusOffset),Xa.collapse(!0)}catch{return!0}return Do.compareBoundaryPoints(Do.START_TO_START,Xa)<=0},Is={dom:e,win:t,serializer:o,editor:r,expand:(Lt={type:"word"})=>Ve(Rm(e).expand(Se(),Lt)),collapse:be,setCursorLocation:b,getContent:v,setContent:S,getBookmark:P,moveToBookmark:z,select:ee,isCollapsed:W,isEditable:J,isForward:He,setNode:et,getNode:Pt,getSel:ye,setRng:Ve,getRng:Se,getStart:O,getEnd:R,getSelectedBlocks:un,normalize:()=>{const Lt=Se(),vn=ye();if(!_m(vn)&&jC(r)){const Vo=ZE(e,Lt);return Vo.each(Do=>{Ve(Do,He())}),Vo.getOr(Lt)}return Lt},selectorChanged:(Lt,vn)=>(f(Lt,vn),Is),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Lt,vn=e.getRoot();for(;vn&&vn.nodeName!=="BODY";){if(vn.scrollHeight>vn.clientHeight){Lt=vn;break}vn=vn.parentNode}return Lt},scrollIntoView:(Lt,vn)=>{X(Lt)?Ft(r,Lt,vn):du(r,Se(),vn)},placeCaretAt:(Lt,vn)=>Ve(W5(Lt,vn,r.getDoc())),getBoundingClientRect:()=>{const Lt=Se();return Lt.collapsed?Le.fromRangeStart(Lt).getClientRects()[0]:Lt.getBoundingClientRect()},destroy:()=>{t=c=u=null,Rl.destroy()}},Ba=Fv(Is),Rl=mH(Is,r);return Is.bookmarkManager=Ba,Is.controlSelection=Rl,Is},MO=(e,t,o)=>{t.addNodeFilter("br",(r,c,u)=>{const f=lt.extend({},o.getBlockElements()),b=o.getNonEmptyElements(),v=o.getWhitespaceElements();f.body=1;const S=O=>O.name in f||bi(o,O);for(let O=0,R=r.length;O<R;O++){let P=r[O],z=P.parent;if(z&&S(z)&&P===z.lastChild){let ee=P.prev;for(;ee;){const W=ee.name;if(W!=="span"||ee.attr("data-mce-type")!=="bookmark"){W==="br"&&(P=null);break}ee=ee.prev}if(P&&(P.remove(),hx(o,b,v,z))){const W=o.getElementRule(z.name);W&&(W.removeEmpty?z.remove():W.paddEmpty&&xp(e,u,S,z))}}else{let ee=P;for(;z&&z.firstChild===ee&&z.lastChild===ee&&(ee=z,!f[z.name]);)z=z.parent;if(ee===z){const W=new Na("#text",3);W.value=Fs,P.replace(W)}}}})},C6=(e,t,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=t.url_converter,b=t.url_converter_scope;let v=r.length;for(;v--;){const S=r[v];let O=S.attr(u);O!==void 0?(S.attr(c,O.length>0?O:null),S.attr(u,null)):(O=S.attr(c),c==="style"?O=o.serializeStyle(o.parseStyle(O),S.name):f&&(O=f.call(b,O,c,S.name)),S.attr(c,O.length>0?O:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(M.from(b.firstChild).exists(S=>!R1(S.value??""))?b.unwrap():b.remove())}}),e.addNodeFilter("script,style",(r,c)=>{const u=b=>b.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=r.length;for(;f--;){const b=r[f],v=b.firstChild,S=v?.value??"";if(c==="script"){const O=b.attr("type");O&&b.attr("type",O==="mce-no/type"?null:O.replace(/^mce\-/,"")),t.element_format==="xhtml"&&v&&S.length>0&&(v.value=`// <![CDATA[
`+u(S)+`
// ]]>`)}else t.element_format==="xhtml"&&v&&S.length>0&&(v.value=`<!--
`+u(S)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;t.preserve_cdata&&f?.indexOf("[CDATA[")===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):f?.indexOf("mce:protected ")===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{Ae(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.remove_trailing_brs&&MO(t,e,e.schema)},ZT=e=>{const t=r=>r?.name==="br",o=e.lastChild;if(t(o)){const r=o.prev;t(r)&&(o.remove(),r.remove())}},JV=(e,t,o)=>{let r;const c=e.dom;let u=t.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");lt.each(u.nodeName==="BODY"?u.childNodes:[u],v=>{b.body.appendChild(b.importNode(v,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return ov(e,{...o,node:u}),r&&(c.doc=r),u},eU=(e,t)=>X(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,tU=(e,t,o)=>eU(e,o)?JV(e,t,o):t,nU=(e,t,o)=>{lt.inArray(t,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),t.push(o))},oU=(e,t,o)=>!t.no_events&&e?aC(e,{...t,content:o}).content:o,x6=(e,t,o)=>{const r=Xc(o.getInner?t.innerHTML:e.getOuterHTML(t));return o.selection||I0(ne.fromDom(t))?r:lt.trim(r)},sU=(e,t,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(t,r);return ZT(c),c},rU=(e,t,o)=>pp(e,t).serialize(o),S6=(e,t,o,r,c)=>{const u=rU(t,o,r);return oU(e,c,u)},aU=(e,t)=>{const o=["data-mce-selected"],r={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},c=t&&t.dom?t.dom:mo.DOM,u=t&&t.schema?t.schema:Aa(r),f=Kv(r,u);C6(f,r,c);const b=(v,S={})=>{const{indent:O,entity_encoding:R,...P}=S,z={format:"html",...P},ee=tU(t,v,z),W=x6(c,ee,z),J=sU(f,W,z);if(z.format==="tree")return J;const be={...r,...X(O)?{indent:O}:{},...X(R)?{entity_encoding:R}:{}};return S6(t,be,u,J,z)};return{schema:u,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:b,addRules:u.addValidElements,setRules:u.setValidElements,addTempAttr:ae(nU,f,o),getTempAttrs:it(o),getNodeFilters:f.getNodeFilters,getAttributeFilters:f.getAttributeFilters,removeNodeFilter:f.removeNodeFilter,removeAttributeFilter:f.removeAttributeFilter}},PO=(e,t)=>{const o=aU(e,t);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},Bx="html",cU=(e,t)=>({...e,format:t,get:!0,getInner:!0}),iU=(e,t={})=>{const o=t.format?t.format:Bx,r=cU(t,o);return pB(e,r).fold(Ro,c=>{const u=xs(e,c);return Sx(e,u,c)})},w6="html",E6=(e,t)=>({format:w6,...e,set:!0,content:t}),BO=(e,t,o={})=>{const r=E6(o,t);wx(e,r).each(c=>{const u=QV(e,c.content,c);tO(e,u.html,c)})},$x=mo.DOM,Bc=e=>{$x.setStyle(e.id,"display",e.orgDisplay)},GT=e=>M.from(e).each(t=>t.destroy()),T6=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const o=e.selection;if(o){const r=o.dom;t.selection=o.win=o.dom=r.doc=null}},$O=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),$x.unbind(t,"submit reset",e.formEventDelegate))},IO=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&X(c?.nextSibling)&&$x.remove(c.nextSibling),cC(e),e.editorManager.remove(e),!e.inline&&r&&Bc(e),Pw(e),$x.remove(e.getContainer()),GT(t),GT(o),e.destroy()}},k6=(e,t)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),GT(o),GT(r)),$O(e),T6(e),e.destroyed=!0}},qT=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>Pn(e,c)}})(),sy=Zr.ModelManager,LO=(e,t)=>t.dom[e],FO=(e,t)=>parseInt(Vs(t,e),10),hu=ae(LO,"clientWidth"),uU=ae(LO,"clientHeight"),dU=ae(FO,"margin-top"),FQ=ae(FO,"margin-left"),HO=e=>e.dom.getBoundingClientRect(),mU=(e,t,o)=>{const r=hu(e),c=uU(e);return t>=0&&o>=0&&t<=r&&o<=c},HQ=(e,t,o,r)=>{const c=HO(t),u=e?c.left+t.dom.clientLeft+FQ(t):0,f=e?c.top+t.dom.clientTop+dU(t):0,b=o-u,v=r-f;return{x:b,y:v}},fU=(e,t,o)=>{const r=ne.fromDom(e.getBody()),c=e.inline?r:vr(r),u=HQ(e.inline,c,t,o);return mU(c,u.x,u.y)},zO=e=>M.from(e).map(ne.fromDom),Kd=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return zO(t).map($o).getOr(!1)};var VO=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const Ix=e=>{const t=[],o=()=>{const P=e.theme;return P&&P.getNotificationManagerImpl?P.getNotificationManagerImpl():VO()},r=()=>M.from(t[0]),c=(P,z)=>P.type===z.type&&P.text===z.text&&!P.progressBar&&!P.timeout&&!z.progressBar&&!z.timeout,u=()=>{r().each(P=>{P.reposition()})},f=P=>{t.push(P)},b=P=>{nl(t,z=>z===P).each(z=>{t.splice(z,1)})},v=(P,z=!0)=>e.removed||!Kd(e)?{}:(z&&e.dispatch("BeforeOpenNotification",{notification:P}),No(t,ee=>c(o().getArgs(ee),P)).getOrThunk(()=>{e.editorManager.setActive(e);const ee=o().open(P,()=>{b(ee)},()=>V5(e));return f(ee),u(),e.dispatch("OpenNotification",{notification:{...ee}}),ee})),S=()=>{r().each(P=>{o().close(P),b(P),u()})},O=it(t);return(P=>{P.on("SkinLoaded",()=>{const z=yC(P);z&&v({text:z,type:"warning",timeout:0},!1),u()}),P.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(u)}),P.on("remove",()=>{Ae(t.slice(),z=>{o().close(z)})}),P.on("keydown",z=>{const ee=z.key?.toLowerCase()==="f12"||z.keyCode===123;z.altKey&&ee&&(z.preventDefault(),r().map(W=>ne.fromDom(W.getEl())).each(W=>ug(W)))})})(e),{open:v,close:S,getNotifications:O}},Ap=Zr.PluginManager,Tb=Zr.ThemeManager;var UO=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const A6=e=>{let t=[];const o=()=>{const J=e.theme;return J&&J.getWindowManagerImpl?J.getWindowManagerImpl():UO()},r=(J,be)=>(...ye)=>be?be.apply(J,ye):void 0,c=J=>{e.dispatch("OpenWindow",{dialog:J})},u=J=>{e.dispatch("CloseWindow",{dialog:J})},f=(J,be)=>{t.push({instanceApi:J,triggerElement:be}),c(J)},b=J=>{u(J);const be=dc(t,({instanceApi:ye,triggerElement:Se})=>ye===J?Se:M.none());t=Xe(t,({instanceApi:ye})=>ye!==J),t.length===0?e.focus():be.filter($o).each(ug)},v=()=>M.from(t[t.length-1]),S=J=>{e.editorManager.setActive(e),zE(e);const be=Hi();e.ui.show();const ye=J();return f(ye,be),ye},O=(J,be)=>S(()=>o().open(J,be,b)),R=J=>S(()=>o().openUrl(J,b)),P=J=>{t.length!==0&&J.each(be=>ug(be))},z=(J,be,ye)=>{const Se=Hi(),Ve=o();Ve.alert(J,r(ye||Ve,()=>{P(Se),be?.()}))},ee=(J,be,ye)=>{const Se=Hi(),Ve=o();Ve.confirm(J,r(ye||Ve,et=>{P(Se),be?.(et)}))},W=()=>{v().each(({instanceApi:J})=>{o().close(J),b(J)})};return e.on("remove",()=>{Ae(t,({instanceApi:J})=>{o().close(J)})}),{open:O,openUrl:R,alert:z,confirm:ee,close:W}},jO=(e,t)=>{e.notificationManager.open({type:"error",text:t})},KT=(e,t)=>{e._skinLoaded?jO(e,t):e.on("SkinLoaded",()=>{jO(e,t)})},gU=(e,t)=>{KT(e,Ci.translate(["Failed to upload image: {0}",t]))},th=(e,t,o)=>{sv(e,t,{message:o}),console.error(o)},kb=(e,t,o)=>o?`Failed to load ${e}: ${o} from url ${t}`:`Failed to load ${e} url: ${t}`,_6=(e,t,o)=>{th(e,"PluginLoadError",kb("plugin",t,o))},hU=(e,t,o)=>{th(e,"IconsLoadError",kb("icons",t,o))},Ab=(e,t,o)=>{th(e,"LanguageLoadError",kb("language",t,o))},O6=(e,t,o)=>{th(e,"ThemeLoadError",kb("theme",t,o))},pU=(e,t,o)=>{th(e,"ModelLoadError",kb("model",t,o))},D6=(e,t)=>{th(e,"LicenseKeyManagerLoadError",kb("license key manager",t))},bU=(e,t)=>{th(e,"ComponentLoadError",kb("component",t))},vU=(e,t,o)=>{const r=Ci.translate(["Failed to initialize plugin: {0}",t]);sv(e,"PluginLoadError",{message:r}),YT(r,o),KT(e,r)},YT=(e,...t)=>{const o=window.console;o&&(o.error?o.error(e,...t):o.log(e,...t))},R6=new WeakMap,yU=e=>{if(R6.has(e))return;R6.set(e,!0);const t=()=>{e.on("SwitchMode",r=>{const{mode:c}=r;c!=="readonly"&&e.mode.set("readonly")})},o=()=>{e.on("DisabledStateChange",r=>{const{state:c}=r;c||r.preventDefault()},!0)};e.initialized?(e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)):e.on("init",()=>{e.removed||e.mode.set("readonly"),e.options.set("disabled",!0)}),o(),t()},WO=(e,t)=>{const{type:o,message:r}=t;e.notificationManager.open({type:o,text:r})},CU=e=>{switch(e){case"error":return console.error;case"info":return console.info;case"warn":return console.warn;case"log":default:return console.log}},ZO=e=>{CU(e.type)(e.message)},Vf=(e,t)=>{const{console:o,editor:r}=t;X(r)&&(e._skinLoaded?WO(e,r):e.on("SkinLoaded",()=>{WO(e,r)})),X(o)&&ZO(o)},GO="Read more: https://www.tiny.cloud/docs/tinymce/latest/license-key/",Lx="Make sure to provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms.",N6=e=>{const t="The editor is disabled because a TinyMCE license key has not been provided.";Vf(e,{console:{type:"error",message:[`${t}`,Lx,GO].join(" ")},editor:{type:"warning",message:`${t}`}})},M6=(e,t)=>{const o=`${t==="online"?"API":"license"} key`,r=`The editor is disabled because the TinyMCE ${o} could not be validated.`;Vf(e,{console:{type:"error",message:[`${r}`,`The TinyMCE Commercial License Key Manager plugin is required for the provided ${o} to be validated but could not be loaded.`,GO].join(" ")},editor:{type:"warning",message:`${r}`}})},P6=(e,t,o)=>{const r=`The "${t}" plugin requires a valid TinyMCE license key.`;Vf(e,{console:{type:"error",message:[`${r}`,GO].join(" ")},...o?{}:{editor:{type:"warning",message:"One or more premium plugins are disabled due to license key restrictions."}}})},Fx="licensekeymanager",B6=e=>V(sb(e))?"online":"offline",xU=e=>{const t=hE(e)?.toLowerCase();return t==="gpl"?"gpl":Yt(t)?"no_key":"non_gpl"},qO=e=>{const t=B6(e),o=xU(e),r=new Set([...J1(e),...en(SC(e))]).has(Fx);return o!=="gpl"||t==="online"||r?{type:"use_plugin",onlineStatus:t,licenseKeyType:o,forcePlugin:r}:{type:"use_gpl",onlineStatus:t,licenseKeyType:o,forcePlugin:r}},$6=e=>t=>{let o=!1;return{validate:r=>{const{plugin:c}=r,u=V(c);return u&&(P6(t,c,o),o=!0),Promise.resolve(e&&!u)}}},SU=$6(!1),XT=$6(!0),Hx="manager",KO=Fx,XO=(()=>{const e=Zr();return{load:(c,u)=>{if(qO(c).type==="use_plugin"){const v=qo(SC(c),KO).map(Rs).filter(hs).getOr(`plugins/${KO}/plugin${u}.js`);e.load(Hx,v).catch(()=>{D6(c,v)})}},add:c=>{e.add(Hx,c)},init:c=>{const u=v=>{Object.defineProperty(c,"licenseKeyManager",{value:v,writable:!1,configurable:!1,enumerable:!0})},f=qO(c),b=e.get(Hx);if(X(b)){const v=b(c,e.urls[Hx]);u(v)}else switch(f.type){case"use_gpl":{u(XT(c));break}case"use_plugin":{yU(c),u(SU(c)),f.onlineStatus==="offline"&&f.licenseKeyType==="no_key"?N6(c):M6(c,f.onlineStatus);break}}c.licenseKeyManager.validate({})}}})(),wU=e=>{M.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},QO=(e,t,o)=>{try{e.getDoc().execCommand(t,!1,String(o))}catch{}},I6=(e,t)=>{QO(e,"StyleWithCSS",t),QO(e,"enableInlineTableEditing",t),QO(e,"enableObjectResizing",t)},JO=e=>{e.selection.setRng(e.selection.getRng())},L6=(e,t,o)=>{wh(e,t)&&!o?ur(e,t):o&&xc(e,t)},eD=e=>{const t=ne.fromDom(e.getBody());L6(t,"mce-content-readonly",!0),e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),wU(e)},F6=e=>{const t=ne.fromDom(e.getBody());L6(t,"mce-content-readonly",!1),e.hasEditableRoot()&&w(t,!0),I6(e,!1),V5(e)&&e.focus(),JO(e),e.nodeChanged()},nh=e=>lu(e),_b="data-mce-contenteditable",zx=e=>{Ae(Fe(e,'*[contenteditable="true"]'),t=>{Ts(t,_b,"true"),w(t,!1)})},Hm=e=>{Ae(Fe(e,`*[${_b}="true"]`),t=>{cr(t,_b),w(t,!0)})},H6=(e,t)=>{const o=ne.fromDom(e.getBody());t?(eD(e),w(o,!1),zx(o)):(Hm(o),F6(e))},tD=e=>{e.serializer?sr(e):e.on("PreInit",()=>{sr(e)})},sr=e=>{e.parser.addAttributeFilter("contenteditable",t=>{nh(e)&&Ae(t,o=>{o.attr(_b,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(_b,t=>{nh(e)&&Ae(t,o=>{o.attr("contenteditable",o.attr(_b))})}),e.serializer.addTempAttr(_b)},nD=e=>e.type==="click",QT=["copy"],oh=e=>Wt(QT,e.type),z6=(e,t)=>fa(t,"a",r=>no(r,ne.fromDom(e.getBody()))).bind(r=>fi(r,"href")),oD=(e,t)=>ks(t,"details",r=>no(r,ne.fromDom(e.getBody()))),EU=(e,t)=>{if(nD(t)&&!$t.metaKeyPressed(t)){const o=ne.fromDom(t.target);z6(e,o).fold(()=>{oD(e,o)&&t.preventDefault()},r=>{if(t.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${Km(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else oh(t)&&e.dispatch(t.type,t)},ry=e=>{e.on("ShowCaret ObjectSelected",t=>{nh(e)&&t.preventDefault()}),e.on("DisabledStateChange",t=>{t.isDefaultPrevented()||H6(e,t.state)})},TU=e=>{tD(e),ry(e)},kU=e=>/^[a-z0-9\-]+$/i.test(e),_p=e=>"content/"+e+"/content.css",AU=e=>tinymce.Resource.has(_p(e)),Ob=e=>sh(e,B3(e)),_U=e=>sh(e,bC(e)),sh=(e,t)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return hn(t,u=>AU(u)?u:kU(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},OU=e=>{e.contentCSS=e.contentCSS.concat(Ob(e),_U(e))},Ju=e=>e?is(e.getElementsByTagName("img")):[],Db=(e,t)=>{const o={};return{findAll:(c,u=Te)=>{const f=Xe(Ju(c),v=>{const S=v.src;return v.hasAttribute("data-mce-bogus")||v.hasAttribute("data-mce-placeholder")||!S||S===po.transparentSrc?!1:kn(S,"blob:")?!e.isUploaded(S)&&u(v):kn(S,"data:")?u(v):!1}),b=hn(f,v=>{const S=v.src;if(Pn(o,S))return o[S].then(O=>V(O)?O:{image:v,blobInfo:O.blobInfo});{const O=L_(t,S).then(R=>(delete o[S],{image:v,blobInfo:R})).catch(R=>(delete o[S],R));return o[S]=O,O}});return Promise.all(b)}}},V6=()=>{let o={};const r=(P,z)=>({status:P,resultUri:z}),c=P=>P in o;return{hasBlobUri:c,getResultUri:P=>{const z=o[P];return z?z.resultUri:null},isPending:P=>c(P)?o[P].status===1:!1,isUploaded:P=>c(P)?o[P].status===2:!1,markPending:P=>{o[P]=r(1,null)},markUploaded:(P,z)=>{o[P]=r(2,z)},removeFailed:P=>{delete o[P]},destroy:()=>{o={}}}};let Vx=0;const sD=()=>{const e=()=>Math.round(ol()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},DU=e=>e+Vx+++sD(),ay=()=>{let e=[];const t=R=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[R.toLowerCase()]||"dat",o=(R,P,z,ee,W)=>{if(V(R))return r({id:R,name:ee,filename:W,blob:P,base64:z});if(Ye(R))return r(R);throw new Error("Unknown input type")},r=R=>{if(!R.blob||!R.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const P=R.id||DU("blobid"),z=R.name||P,ee=R.blob;return{id:it(P),name:it(z),filename:it(R.filename||z+"."+t(ee.type)),blob:it(ee),base64:it(R.base64),blobUri:it(R.blobUri||URL.createObjectURL(ee)),uri:it(R.uri)}},c=R=>{f(R.id())||e.push(R)},u=R=>No(e,R).getOrUndefined(),f=R=>u(P=>P.id()===R);return{create:o,add:c,get:f,getByUri:R=>u(P=>P.blobUri()===R),getByData:(R,P)=>u(z=>z.base64()===R&&z.blob().type===P),findFirst:u,removeByUri:R=>{e=Xe(e,P=>P.blobUri()===R?(URL.revokeObjectURL(P.blobUri()),!1):!0)},destroy:()=>{Ae(e,R=>{URL.revokeObjectURL(R.blobUri())}),e=[]}}},RU=(e,t)=>{const o={},r=(W,J)=>W?W.replace(/\/$/,"")+"/"+J.replace(/^\//,""):J,c=(W,J)=>new Promise((be,ye)=>{const Se=new XMLHttpRequest;Se.open("POST",t.url),Se.withCredentials=t.credentials,Se.upload.onprogress=et=>{J(et.loaded/et.total*100)},Se.onerror=()=>{ye("Image upload failed due to a XHR Transport error. Code: "+Se.status)},Se.onload=()=>{if(Se.status<200||Se.status>=300){ye("HTTP Error: "+Se.status);return}const et=JSON.parse(Se.responseText);if(!et||!V(et.location)){ye("Invalid JSON: "+Se.responseText);return}be(r(t.basePath,et.location))};const Ve=new FormData;Ve.append("file",W.blob(),W.filename()),Se.send(Ve)}),u=ce(t.handler)?t.handler:c,f=()=>new Promise(W=>{W([])}),b=(W,J)=>({url:J,blobInfo:W,status:!0}),v=(W,J)=>({url:"",blobInfo:W,status:!1,error:J}),S=(W,J)=>{lt.each(o[W],be=>{be(J)}),delete o[W]},O=(W,J,be)=>(e.markPending(W.blobUri()),new Promise(ye=>{let Se,Ve;try{const et=()=>{Se&&(Se.close(),Ve=_t)},Pt=He=>{et();const Me=V(He)?He:He.url;e.markUploaded(W.blobUri(),Me),S(W.blobUri(),b(W,Me)),ye(b(W,Me))},un=He=>{et(),e.removeFailed(W.blobUri()),S(W.blobUri(),v(W,He)),ye(v(W,He))};Ve=He=>{He<0||He>100||M.from(Se).orThunk(()=>M.from(be).map(wt)).each(Me=>{Se=Me,Me.progressBar.value(He)})},J(W,Ve).then(Pt,He=>{un(V(He)?{message:He}:He)})}catch(et){ye(v(W,et))}})),R=W=>W===c,P=W=>{const J=W.blobUri();return new Promise(be=>{o[J]=o[J]||[],o[J].push(be)})},z=(W,J)=>(W=lt.grep(W,be=>!e.isUploaded(be.blobUri())),Promise.all(lt.map(W,be=>e.isPending(be.blobUri())?P(be):O(be,u,J))));return{upload:(W,J)=>!t.url&&R(u)?f():z(W,J)}},ed=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Ux=(e,t)=>RU(t,{url:mv(e),basePath:pC(e),credentials:M3(e),handler:eE(e)}),U6=e=>{const t=V6(),o=Ux(e,t);return{upload:(r,c=!0)=>o.upload(r,c?ed(e):void 0)}},rD=(e,t)=>e.dom.isEmpty(t.dom)&&X(e.schema.getTextBlockElements()[jn(t)]),aD=e=>t=>{rD(e,t)&&yo(t,ne.fromHtml('<br data-mce-bogus="1" />'))},Rb=e=>{const t=ay();let o,r;const c=V6(),u=[],f=Se=>Ve=>e.selection?Se(Ve):[],b=Se=>Se+(Se.indexOf("?")===-1?"?":"&")+new Date().getTime(),v=(Se,Ve,et)=>{let Pt=0;do Pt=Se.indexOf(Ve,Pt),Pt!==-1&&(Se=Se.substring(0,Pt)+et+Se.substr(Pt+Ve.length),Pt+=et.length-Ve.length+1);while(Pt!==-1);return Se},S=(Se,Ve,et)=>{const Pt=`src="${et}"${et===po.transparentSrc?' data-mce-placeholder="1"':""}`;return Se=v(Se,`src="${Ve}"`,Pt),Se=v(Se,'data-mce-src="'+Ve+'"','data-mce-src="'+et+'"'),Se},O=(Se,Ve)=>{Ae(e.undoManager.data,et=>{et.type==="fragmented"?et.fragments=hn(et.fragments,Pt=>S(Pt,Se,Ve)):et.content=S(et.content,Se,Ve)})},R=(Se,Ve)=>{const et=e.convertURL(Ve,"src");O(Se.src,Ve),sa(ne.fromDom(Se),{src:Qw(e)?b(Ve):Ve,"data-mce-src":et})},P=()=>(o||(o=Ux(e,c)),J().then(f(Se=>{const Ve=hn(Se,et=>et.blobInfo);return o.upload(Ve,ed(e)).then(f(et=>{const Pt=[];let un=!1;const He=hn(et,(Me,Ue)=>{const{blobInfo:Nt,image:Dn}=Se[Ue];let Rn=!1;return Me.status&&Jw(e)?(Me.url&&!Ds(Dn.src,Me.url)&&(un=!0),t.removeByUri(Dn.src),Lm(e)||R(Dn,Me.url)):Me.error&&(Me.error.remove&&(O(Dn.src,po.transparentSrc),Pt.push(Dn),Rn=!0),gU(e,Me.error.message)),{element:Dn,status:Me.status,uploadUri:Me.url,blobInfo:Nt,removed:Rn}});return Pt.length>0&&!Lm(e)?e.undoManager.transact(()=>{Ae(Cd(Pt),Me=>{const Ue=sc(Me);Xo(Me),Ue.each(aD(e)),t.removeByUri(Me.dom.src)})}):un&&e.undoManager.dispatchChange(),He}))}))),z=()=>gC(e)?P():Promise.resolve([]),ee=Se=>Qa(u,Ve=>Ve(Se)),W=Se=>{u.push(Se)},J=()=>(r||(r=Db(c,t)),r.findAll(e.getBody(),ee).then(f(Se=>{const Ve=Xe(Se,et=>V(et)?(KT(e,et),!1):et.uriType!=="blob");return Lm(e)||Ae(Ve,et=>{O(et.image.src,et.blobInfo.blobUri()),et.image.src=et.blobInfo.blobUri(),et.image.removeAttribute("data-mce-src")}),Ve}))),be=()=>{t.destroy(),c.destroy(),r=o=null},ye=Se=>Se.replace(/src="(blob:[^"]+)"/g,(Ve,et)=>{const Pt=c.getResultUri(et);if(Pt)return'src="'+Pt+'"';let un=t.getByUri(et);return un||(un=Ho(e.editorManager.get(),(He,Me)=>He||Me.editorUpload&&Me.editorUpload.blobCache.getByUri(et),void 0)),un?'src="data:'+un.blob().type+";base64,"+un.base64()+'"':Ve});return e.on("SetContent",()=>{gC(e)?z():J()}),e.on("RawSaveContent",Se=>{Se.content=ye(Se.content)}),e.on("GetContent",Se=>{Se.source_view||Se.format==="raw"||Se.format==="tree"||(Se.content=ye(Se.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Se=>{Ae(Se,Ve=>{const et=Ve.attr("src");if(!et||t.getByUri(et))return;const Pt=c.getResultUri(et);Pt&&Ve.attr("src",Pt)})})}),{blobCache:t,addFilter:W,uploadImages:P,uploadImagesAuto:z,scanForImages:J,destroy:be}},cD=e=>{const t=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"left"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:".mce-placeholder",styles:{display:"block",marginLeft:"auto",marginRight:"auto"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:".mce-placeholder",styles:{float:"right"},ceFalseOverride:!0},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{t.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"},remove_similar:!0},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},samp:{inline:"samp"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>kt(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{lt.each(f,(b,v)=>{t.setAttrib(c,v,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>c?.customValue??null}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return lt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},j6={remove_similar:!0,inherit:!1},cy={selector:"td,th",...j6},NU={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...cy},tablecellverticalalign:{styles:{"vertical-align":"%value"},...cy},tablecellbordercolor:{styles:{borderColor:"%value"},...cy},tablecellclass:{classes:["%value"],...cy},tableclass:{selector:"table",classes:["%value"],...j6},tablecellborderstyle:{styles:{borderStyle:"%value"},...cy},tablecellborderwidth:{styles:{borderWidth:"%value"},...cy}},MU=it(NU),PU=e=>{const t={},o=f=>X(f)?t[f]:t,r=f=>Pn(t,f),c=(f,b)=>{f&&(V(f)?(At(b)||(b=[b]),Ae(b,v=>{Wn(v.deep)&&(v.deep=!Id(v)),Wn(v.split)&&(v.split=!Id(v)||Za(v)),Wn(v.remove)&&Id(v)&&!Za(v)&&(v.remove="none"),Id(v)&&Za(v)&&(v.mixed=!0,v.block_expand=!0),V(v.classes)&&(v.classes=v.classes.split(/\s+/))}),t[f]=b):qn(f,(v,S)=>{c(S,v)}))},u=f=>(f&&t[f]&&delete t[f],t);return c(cD(e)),c(MU()),c(H3(e)),{get:o,has:r,register:c,unregister:u}},JT=lt.each,ti=mo.DOM,td=e=>X(e)&&Ye(e),W6=(e,t)=>{const o=t&&t.schema||Aa({}),r=(v,S)=>{S.classes.length>0&&ti.addClass(v,S.classes.join(" ")),ti.setAttribs(v,S.attrs)},c=v=>{const S=V(v)?{name:v,classes:[],attrs:{}}:v,O=ti.create(S.name);return r(O,S),O},u=(v,S)=>{const R=o.getElementRule(v.nodeName.toLowerCase())?.parentsRequired;return R&&R.length?S&&Wt(R,S)?S:R[0]:!1},f=(v,S,O)=>{let R;const P=S[0],z=td(P)?P.name:void 0,ee=u(v,z);if(ee)z===ee?(R=P,S=S.slice(1)):R=ee;else if(P)R=P,S=S.slice(1);else if(!O)return v;const W=R?c(R):ti.create("div");W.appendChild(v),O&&lt.each(O,be=>{const ye=c(be);W.insertBefore(ye,v)});const J=td(R)?R.siblings:void 0;return f(W,S,J)},b=ti.create("div");if(e.length>0){const v=e[0],S=c(v),O=td(v)?v.siblings:void 0;b.appendChild(f(S,e.slice(1),O))}return b},BU=e=>{e=lt.trim(e);let t="div";const o={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":lt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const v=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);v&&(o.attrs[v[1]]=v[2])}return""})),o.name=t||"div",o},$U=e=>V(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),lt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const o=lt.map(t.split(/(?:~\+|~|\+)/),BU),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],IU=(e,t)=>{let o="",r=z3(e);if(r==="")return"";const c=P=>V(P)?P.replace(/%(\w+)/g,""):"",u=(P,z)=>ti.getStyle(z??e.getBody(),P,!0);if(V(t)){const P=e.formatter.get(t);if(!P)return"";t=P[0]}if("preview"in t){const P=t.preview;if(P===!1)return"";r=P||r}let f=t.block||t.inline||"span",b;const v=$U(t.selector);v.length>0?(v[0].name||(v[0].name=f),f=t.selector,b=W6(v,e)):b=W6([f],e);const S=ti.select(f,b)[0]||b.firstChild;JT(t.styles,(P,z)=>{const ee=c(P);ee&&ti.setStyle(S,z,ee)}),JT(t.attributes,(P,z)=>{const ee=c(P);ee&&ti.setAttrib(S,z,ee)}),JT(t.classes,P=>{const z=c(P);ti.hasClass(S,z)||ti.addClass(S,z)}),e.dispatch("PreviewFormats"),ti.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const O=u("fontSize"),R=/px$/.test(O)?parseInt(O,10):0;return JT(r.split(" "),P=>{let z=u(P,S);if(!(P==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(z)&&(z=u(P),El(z).toLowerCase()==="#ffffff"))&&!(P==="color"&&El(z).toLowerCase()==="#000000")){if(P==="font-size"&&/em|%$/.test(z)){if(R===0)return;z=parseFloat(z)/(/%$/.test(z)?100:1)*R+"px"}P==="border"&&z&&(o+="padding:0 2px;"),o+=P+":"+z+";"}}),e.dispatch("AfterPreviewFormats"),ti.remove(b),o},LU=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},Z6=e=>{const t=PU(e),o=rn({});return LU(e),gP(e),Lm(e)||BT(o,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(r,c,u)=>{Ol(e,r,c,u)},remove:(r,c,u,f)=>{Mx(e,r,c,u,f)},toggle:(r,c,u)=>{Dl(e,r,c,u)},match:(r,c,u,f)=>h6(e,r,c,u,f),closest:r=>Fm(e,r),matchAll:(r,c)=>Nx(e,r,c),matchNode:(r,c,u,f)=>KV(e,r,c,u,f),canApply:r=>YV(e,r),formatChanged:(r,c,u,f)=>XV(e,o,r,c,u,f),getCssText:ae(IU,e)}},G6=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},FU=(e,t,o)=>{const r=rn(!1),c=v=>{Tp(t,!1,o),t.add({},v)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",v=>{const S=v.command;G6(S)||(VT(t,o),t.beforeChange())}),e.on("ExecCommand",v=>{const S=v.command;G6(S)||c(v)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;const O=po.os.isMacOS()&&v.key==="Meta";(S>=33&&S<=36||S>=37&&S<=40||S===45||v.ctrlKey||O)&&(c(),e.nodeChanged()),(S===46||S===8)&&e.nodeChanged(),r.get()&&t.typing&&!ty(e.readonly,_x(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged())}),e.on("keydown",v=>{const S=v.keyCode;if(v.isDefaultPrevented())return;if(S>=33&&S<=36||S>=37&&S<=40||S===45){t.typing&&c(v);return}const O=v.ctrlKey&&!v.altKey||v.metaKey;if((S<16||S>20)&&S!==224&&S!==91&&!t.typing&&!O){t.beforeChange(),Tp(t,!0,o),t.add({},v),r.set(!0);return}(po.os.isMacOS()?v.metaKey:v.ctrlKey&&!v.altKey)&&t.beforeChange()}),e.on("mousedown",v=>{t.typing&&c(v)});const u=v=>v.inputType==="insertReplacementText",f=v=>v.inputType==="insertText"&&v.data===null,b=v=>v.inputType==="insertFromPaste"||v.inputType==="insertFromDrop";e.on("input",v=>{v.inputType&&(u(v)||f(v)||b(v))&&c(v)}),e.on("AddUndo Undo Redo ClearUndos",v=>{v.isDefaultPrevented()||e.nodeChanged()})},HU=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},zU=e=>{const t=Ic(),o=rn(0),r=rn(0),c={data:[],typing:!1,beforeChange:()=>{qd(e,o,t)},add:(u,f)=>f6(e,c,r,o,t,u,f),dispatchChange:()=>{e.setDirty(!0);const u=_x(e);u.bookmark=tp(e.selection),e.dispatch("change",{level:u,lastLevel:Xr(c.data,r.get()).getOrUndefined()})},undo:()=>AO(e,c,o,r),redo:()=>_O(e,r,c.data),clear:()=>{UT(e,c,r)},reset:()=>{GV(e,c)},hasUndo:()=>g6(e,c,r),hasRedo:()=>Rx(e,c,r),transact:u=>qV(e,c,o,u),ignore:u=>{jT(e,o,u)},extra:(u,f)=>{OO(e,c,r,u,f)}};return Lm(e)||FU(e,c,o),HU(e),c},VU=[9,27,$t.HOME,$t.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,$t.DOWN,$t.UP,$t.LEFT,$t.RIGHT].concat(po.browser.isFirefox()?[224]:[]),q6="data-mce-placeholder",K6=e=>e.type==="keydown"||e.type==="keyup",Y6=e=>{const t=e.keyCode;return t===$t.BACKSPACE||t===$t.DELETE},UU=e=>{if(K6(e)){const t=e.keyCode;return!Y6(e)&&($t.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Wt(VU,t))}else return!1},jU=e=>K6(e)&&!(Y6(e)||e.type==="keyup"&&e.keyCode===229),Op=(e,t,o)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const r=t.firstElementChild;return r?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},WU=e=>{const t=e.dom,o=Rr(e),r=vC(e)??"",c=(u,f)=>{if(UU(u))return;const b=e.getBody(),v=jU(u)?!1:Op(t,b,o);(t.getAttrib(b,q6)!==""!==v||f)&&(t.setAttrib(b,q6,v?r:null),lC(e,v),e.on(v?"keydown":"keyup",c),e.off(v?"keyup":"keydown",c))};hs(r)&&e.on("init",u=>{c(u,!0),e.on("change SetContent ExecCommand",c),e.on("paste",f=>Hd.setEditorTimeout(e,()=>c(f)))})},ZU=e=>t=>X(t)&&t.nodeName.toLowerCase()===e,iy=e=>t=>X(t)&&e.test(t.nodeName),zm=e=>X(e)&&e.nodeType===3,e4=e=>X(e)&&e.nodeType===1,nd=iy(/^(OL|UL|DL)$/),GU=iy(/^(OL|UL)$/),t4=iy(/^(LI|DT|DD)$/),qU=iy(/^(DT|DD)$/),Nb=ZU("br"),KU=e=>e.parentNode?.firstChild===e,iD=(e,t)=>X(t)&&t.nodeName in e.schema.getTextBlockElements(),lD=(e,t)=>X(e)&&e.nodeName in t,YU=(e,t)=>X(t)&&t.nodeName in e.schema.getVoidElements(),XU=(e,t)=>Nb(t)?e.isBlock(t.nextSibling)&&!Nb(t.previousSibling):!1,Mb=(e,t,o)=>{const r=e.isEmpty(t);return o&&e.select("span[data-mce-type=bookmark]",t).length>0?!1:r},X6=(e,t)=>e.isChildOf(t,e.getRoot()),Q6=mo.DOM,QU=(e,t)=>{const o=t.parentElement;if(o&&o.nodeName==="LI"&&o.firstChild===t){const r=o.previousSibling;r&&r.nodeName==="LI"?(r.appendChild(t),Mb(e,o)&&Q6.remove(o)):Q6.setStyle(o,"listStyleType","none")}if(nd(o)){const r=o.previousSibling;r&&r.nodeName==="LI"&&r.appendChild(t)}},uD=(e,t)=>{const o=lt.grep(e.select("ol,ul",t));lt.each(o,r=>{QU(e,r)})},J6=(e,t)=>{if(zm(e))return{container:e,offset:t};const o=Rm.getNode(e,t);return zm(o)?{container:o,offset:t>=e.childNodes.length?o.data.length:0}:o.previousSibling&&zm(o.previousSibling)?{container:o.previousSibling,offset:o.previousSibling.data.length}:o.nextSibling&&zm(o.nextSibling)?{container:o.nextSibling,offset:0}:{container:e,offset:t}},dD=e=>{const t=e.cloneRange(),o=J6(e.startContainer,e.startOffset);t.setStart(o.container,o.offset);const r=J6(e.endContainer,e.endOffset);return t.setEnd(r.container,r.offset),t},e$=["OL","UL","DL"],t$=e$.join(","),jx=(e,t)=>{const o=e.selection.getStart(!0);return e.dom.getParent(o,t$,Wx(e,o))},n$=(e,t)=>X(e)&&t.length===1&&t[0]===e,JU=e=>Xe(e.querySelectorAll(t$),nd),ej=e=>{const t=jx(e),o=e.selection.getSelectedBlocks();return n$(t,o)?JU(t):Xe(o,r=>nd(r)&&t!==r)},tj=(e,t)=>{const o=lt.map(t,r=>{const c=e.dom.getParent(r,"li,dd,dt",Wx(e,r));return c||r});return Ja(o)},mD=e=>{const t=e.selection.getSelectedBlocks();return Xe(tj(e,t),t4)},nj=e=>Xe(mD(e),qU),fD=(e,t)=>{const o=e.dom.getParents(t,"TD,TH");return o.length>0?o[0]:e.getBody()},oj=(e,t)=>!nd(t)&&!t4(t)&&io(e$,o=>e.isValidChild(t.nodeName,o)),Wx=(e,t)=>{const o=e.dom.getParents(t,e.dom.isBlock),r=u=>u.nodeName.toLowerCase()!==Rr(e);return No(o,u=>r(u)&&oj(e.schema,u)).getOr(e.getBody())},o$=e=>sc(e).exists(t=>t4(t.dom)&&zr(t).exists(o=>!nd(o.dom))&&ar(t).exists(o=>!nd(o.dom))),s$=(e,t)=>{const o=e.dom.getParents(t,"ol,ul",Wx(e,t));return hr(o)},sj=e=>{const t=s$(e,e.selection.getStart()),o=Xe(e.selection.getSelectedBlocks(),GU);return t.toArray().concat(o)},rj=e=>{const t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",Wx(e,t))},aj=e=>{const t=sj(e),o=rj(e);return No(o,r=>o$(ne.fromDom(r))).fold(()=>cj(e,t),r=>[r])},cj=(e,t)=>{const o=hn(t,r=>s$(e,r).getOr(r));return Ja(o)},n4=e=>/\btox\-/.test(e.className),r$=(e,t)=>t!==null&&!e.dom.isEditable(t),ij=e=>{const t=jx(e);return r$(e,t)||!e.selection.isEditable()},gD=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return r$(e,o)||!e.selection.isEditable()},Dp=(e,t,o)=>e.dispatch("ListMutation",{action:t,element:o}),hD=(e,t,o={})=>{const r=e.dom,c=e.schema.getBlockElements(),u=r.createFragment(),f=Rr(e),b=iu(e);let v,S,O=!1;for(S=r.create(f,{...b,...o.style?{style:o.style}:{}}),lD(t.firstChild,c)||u.appendChild(S);v=t.firstChild;){const R=v.nodeName;!O&&(R!=="SPAN"||v.getAttribute("data-mce-type")!=="bookmark")&&(O=!0),lD(v,c)?(u.appendChild(v),S=null):(S||(S=r.create(f,b),u.appendChild(S)),S.appendChild(v))}return!O&&S&&S.appendChild(r.create("br",{"data-mce-bogus":"1"})),u},ly=e=>ef(e,"OL,UL"),VQ=e=>ef(e,"LI"),pD=e=>zr(e).exists(ly),lj=e=>ar(e).exists(ly),a$=(e,t)=>RC(e).map(o=>o>=t).getOr(!0),Pb=e=>"listAttributes"in e,c$=e=>"isComment"in e,uj=e=>"isFragment"in e,i$=e=>e.depth>0,dj=e=>e.isSelected,mj=e=>{const t=Ns(e),o=lj(e)?t.slice(0,-1):t;return hn(o,ql)},bD=(e,t,o)=>sc(e).filter(Hs).map(r=>({depth:t,dirty:!1,isSelected:o,content:mj(e),itemAttributes:Jn(e),listAttributes:Jn(r),listType:jn(r),isInPreviousLi:!1})),o4=(e,t)=>{yo(e.item,t.list)},fj=e=>{for(let t=1;t<e.length;t++)o4(e[t-1],e[t])},l$=(e,t)=>{er(hr(e),Gs(t),o4)},gj=(e,t)=>{const o={list:ne.fromTag(t,e),item:ne.fromTag("li",e)};return yo(o.list,o.item),o},hj=(e,t,o)=>{const r=[];for(let c=0;c<o;c++)r.push(gj(e,Pb(t)?t.listType:t.parentListType));return r},pj=(e,t)=>{for(let o=0;o<e.length-1;o++)Ea(e[o].item,"list-style-type","none");hr(e).each(o=>{Pb(t)&&(sa(o.list,t.listAttributes),sa(o.item,t.itemAttributes)),mi(o.item,t.content)})},bj=(e,t)=>{jn(e.list)!==t.listType&&(e.list=Du(e.list,t.listType)),sa(e.list,t.listAttributes)},vj=(e,t,o)=>{const r=ne.fromTag("li",e);return sa(r,t),mi(r,o),r},yj=(e,t)=>{yo(e.list,t),e.item=t},u$=(e,t,o)=>{const r=t.slice(0,o.depth);return hr(r).each(c=>{if(Pb(o)){const u=vj(e,o.itemAttributes,o.content);yj(c,u),bj(c,o)}else if(uj(o))mi(c.item,o.content);else{const u=ne.fromHtml(`<!--${o.content}-->`);yo(c.list,u)}}),r},Cj=(e,t,o)=>{const r=hj(e,o,o.depth-t.length);return fj(r),pj(r,o),l$(t,r),t.concat(r)},xj=(e,t)=>{let o=M.none();const r=Ho(t,(c,u,f)=>c$(u)?f===0?(o=M.some(u),c):u$(e,c,u):u.depth>c.length?Cj(e,c,u):u$(e,c,u),[]);return o.each(c=>{const u=ne.fromHtml(`<!--${c.content}-->`);Gs(r).each(f=>{Gl(f.list,u)})}),Gs(r).map(c=>c.list)},Sj=(e,t,o)=>{switch(t){case"Indent":if(a$(e,o.depth))o.depth++;else return;break;case"Outdent":o.depth--;break;case"Flatten":o.depth=0}o.dirty=!0},vD=(e,t)=>{Pb(e)&&Pb(t)&&(e.listType=t.listType,e.listAttributes={...t.listAttributes})},wj=e=>{e.listAttributes=Il(e.listAttributes,(t,o)=>o!=="start")},Ej=(e,t)=>{const o=e[t].depth,r=u=>u.depth===o&&!u.dirty,c=u=>u.depth<o;return oi(gs(e.slice(0,t)),r,c).orThunk(()=>oi(e.slice(t+1),r,c))},d$=e=>(Ae(e,(t,o)=>{Ej(e,o).fold(()=>{t.dirty&&Pb(t)&&wj(t)},r=>vD(t,r))}),e),m$=(e,t,o,r)=>{if(dl(r))return[{depth:e+1,content:r.dom.nodeValue??"",dirty:!1,isSelected:!1,isComment:!0}];t.each(f=>{no(f.start,r)&&o.set(!0)});const c=bD(r,e,o.get());t.each(f=>{no(f.end,r)&&o.set(!1)});const u=ar(r).filter(ly).map(f=>Zx(e,t,o,f)).getOr([]);return c.toArray().concat(u)},Tj=(e,t,o,r)=>zr(r).filter(ly).fold(()=>m$(e,t,o,r),c=>{const u=Ho(Ns(r),(f,b,v)=>{if(v===0)return f;if(VQ(b))return f.concat(m$(e,t,o,b));{const S={isFragment:!0,depth:e,content:[b],isSelected:!1,dirty:!1,parentListType:jn(c)};return f.concat(S)}},[]);return Zx(e,t,o,c).concat(u)}),Zx=(e,t,o,r)=>wo(Ns(r),c=>{const u=ly(c)?Zx:Tj,f=e+1;return u(f,t,o,c)}),Bb=(e,t)=>{const o=rn(!1),r=0;return hn(e,c=>({sourceList:c,entries:Zx(r,t,o,c)}))},f$=(e,t)=>{const o=d$(t);return hn(o,r=>{const c=c$(r)?Sd([ne.fromHtml(`<!--${r.content}-->`)]):Sd(r.content),u=Pb(r)?r.itemAttributes:{};return ne.fromDom(hD(e,c.dom,u))})},kj=(e,t)=>{const o=d$(t);return xj(e.contentDocument,o).toArray()},Aj=(e,t)=>wo(ao(t,i$),o=>Gs(o).exists(i$)?kj(e,o):f$(e,o)),_j=(e,t,o)=>{Ae(Xe(t,dj),r=>Sj(e,o,r))},Oj=e=>{const t=hn(mD(e),ne.fromDom);return er(No(t,tt(pD)),No(gs(t),tt(pD)),(o,r)=>({start:o,end:r}))},uy=(e,t,o)=>{const r=Bb(t,Oj(e));Ae(r,c=>{_j(e,c.entries,o);const u=Aj(e,c.entries);Ae(u,f=>{Dp(e,o==="Indent"?"IndentList":"OutdentList",f.dom)}),r0(c.sourceList,u),Xo(c.sourceList)})},Dj=e=>RC(e).forall(t=>{const o=e.selection.getSelectedBlocks();return io(o,r=>fa(ne.fromDom(r),"li").forall(c=>ge(c,"ol,ul").length<=t))}),Uf=mo.DOM,yD=(e,t,o)=>{const r=S=>{const O=S.parentNode;O&&lt.each(c,R=>{O.insertBefore(R,o.parentNode)}),Uf.remove(S)},c=Uf.select('span[data-mce-type="bookmark"]',t),u=hD(e,o),f=Uf.createRng();f.setStartAfter(o),f.setEndAfter(t);const b=f.extractContents();for(let S=b.firstChild;S;S=S.firstChild)if(S.nodeName==="LI"&&e.dom.isEmpty(S)){Uf.remove(S);break}e.dom.isEmpty(b)||Uf.insertAfter(b,t),Uf.insertAfter(u,t);const v=o.parentElement;v&&Mb(e.dom,v)&&r(v),Uf.remove(o),Mb(e.dom,t)&&Uf.remove(t)},Rj=br("dd"),CD=br("dt"),s4=(e,t)=>{Rj(t)?Du(t,"dt"):CD(t)&&Vc(t).each(o=>yD(e,o.dom,t.dom))},Nj=e=>{CD(e)&&Du(e,"dd")},Mj=(e,t,o)=>{t==="Indent"?Ae(o,Nj):Ae(o,r=>s4(e,r))},Pj=(e,t)=>{const o=Cd(aj(e)),r=Cd(nj(e));let c=!1;if(o.length||r.length){const u=e.selection.getBookmark();uy(e,o,t),Mj(e,t,r),e.selection.moveToBookmark(u),e.selection.setRng(dD(e.selection.getRng())),e.nodeChanged(),c=!0}return c},xD=(e,t)=>!ij(e)&&Pj(e,t),g$=e=>xD(e,"Indent"),Gx=e=>xD(e,"Outdent"),r4=e=>xD(e,"Flatten"),dy=e=>{switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Bj=(e,t,o)=>{const r=o["list-style-type"]?o["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},h$=(e,t)=>{lt.each(t,(o,r)=>{e.setAttribute(r,o)})},$j=(e,t,o)=>{h$(t,o["list-attributes"]),lt.each(e.select("li",t),r=>{h$(r,o["list-item-attributes"])})},my=(e,t,o)=>{Bj(e,t,o),$j(e,t,o)},Ij=(e,t,o)=>{lt.each(o,r=>e.setStyle(t,r,""))},a4=(e,t)=>X(t)&&!lD(t,e.schema.getBlockElements()),SD=(e,t,o,r)=>{let c=t[o?"startContainer":"endContainer"];const u=t[o?"startOffset":"endOffset"];e4(c)&&(c=c.childNodes[Math.min(u,c.childNodes.length-1)]||c),!o&&Nb(c.nextSibling)&&(c=c.nextSibling);const f=v=>{for(;!e.dom.isBlock(v)&&v.parentNode&&r!==v;)v=v.parentNode;return v},b=(v,S)=>{const O=new nr(v,f(v)),R=S?"next":"prev";let P;for(;P=O[R]();)if(!(YU(e,P)||tc(P.textContent)||P.textContent?.length===0))return M.some(P);return M.none()};if(o&&zm(c))if(tc(c.textContent))c=b(c,!1).getOr(c);else for(c.parentNode!==null&&a4(e,c.parentNode)&&(c=c.parentNode);c.previousSibling!==null&&(a4(e,c.previousSibling)||zm(c.previousSibling));)c=c.previousSibling;if(!o&&zm(c))if(tc(c.textContent))c=b(c,!0).getOr(c);else for(c.parentNode!==null&&a4(e,c.parentNode)&&(c=c.parentNode);c.nextSibling!==null&&(a4(e,c.nextSibling)||zm(c.nextSibling));)c=c.nextSibling;for(;c.parentNode!==r;){const v=c.parentNode;if(iD(e,c)||/^(TD|TH)$/.test(v.nodeName))return c;c=v}return c},Lj=(e,t,o)=>{const r=[],c=e.dom,u=SD(e,t,!0,o),f=SD(e,t,!1,o);let b;const v=[];for(let S=u;S&&(v.push(S),S!==f);S=S.nextSibling);return lt.each(v,S=>{if(iD(e,S)){r.push(S),b=null;return}if(c.isBlock(S)||Nb(S)){Nb(S)&&c.remove(S),b=null;return}const O=S.nextSibling;if(Fv.isBookmarkNode(S)&&(nd(O)||iD(e,O)||!O&&S.parentNode===o)){b=null;return}b||(b=c.create("p"),S.parentNode?.insertBefore(b,S),r.push(b)),b.appendChild(S)}),r},Fj=(e,t,o)=>{const r=e.getStyle(t,"list-style-type");let c=o?o["list-style-type"]:"";return c=c===null?"":c,r===c},Hj=(e,t)=>{const o=e.selection.getStart(!0),r=SD(e,t,!0,e.getBody());return Gn(ne.fromDom(r),ne.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:o},wD=(e,t,o)=>{const r=e.selection.getRng();let c="LI";const u=Wx(e,Hj(e,r)),f=e.dom;if(f.getContentEditable(e.selection.getNode())==="false")return;t=t.toUpperCase(),t==="DL"&&(c="DT");const b=Hf(r),v=Xe(Lj(e,r,u),e.dom.isEditable);lt.each(v,S=>{let O;const R=S.previousSibling,P=S.parentNode;t4(P)||(R&&nd(R)&&R.nodeName===t&&Fj(f,R,o)?(O=R,S=f.rename(S,c),R.appendChild(S)):(O=f.create(t),P.insertBefore(O,S),O.appendChild(S),S=f.rename(S,c)),Ij(f,S,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),my(f,O,o),ED(e.dom,O))}),e.selection.setRng(Yu(b))},zj=(e,t)=>nd(e)&&e.nodeName===t?.nodeName,p$=(e,t,o)=>{const r=e.getStyle(t,"list-style-type",!0),c=e.getStyle(o,"list-style-type",!0);return r===c},Vj=(e,t)=>e.className===t.className,b$=(e,t,o)=>zj(t,o)&&p$(e,t,o)&&Vj(t,o),ED=(e,t)=>{let o,r=t.nextSibling;if(b$(e,t,r)){const c=r;for(;o=c.firstChild;)t.appendChild(o);e.remove(c)}if(r=t.previousSibling,b$(e,t,r)){const c=r;for(;o=c.lastChild;)t.insertBefore(o,t.firstChild);e.remove(c)}},Uj=(e,t,o,r)=>{if(t.nodeName!==o){const c=e.dom.rename(t,o);my(e.dom,c,r),Dp(e,dy(o),c)}else my(e.dom,t,r),Dp(e,dy(o),t)},jj=(e,t,o,r)=>{if(t.classList.forEach((c,u,f)=>{c.startsWith("tox-")&&(f.remove(c),f.length===0&&t.removeAttribute("class"))}),t.nodeName!==o){const c=e.dom.rename(t,o);my(e.dom,c,r),Dp(e,dy(o),c)}else my(e.dom,t,r),Dp(e,dy(o),t)},TD=(e,t,o,r,c)=>{const u=nd(t);if(u&&t.nodeName===r&&!v$(c)&&!n4(t))r4(e);else{wD(e,r,c);const f=Hf(e.selection.getRng()),b=u?[t,...o]:o,v=u&&n4(t)?jj:Uj;lt.each(b,S=>{v(e,S,r,c)}),e.selection.setRng(Yu(f))}},v$=e=>"list-style-type"in e,Wj=(e,t,o,r)=>{if(t!==e.getBody())if(t)if(t.nodeName===o&&!v$(r)&&!n4(t))r4(e);else{const c=Hf(e.selection.getRng());n4(t)&&t.classList.forEach((f,b,v)=>{f.startsWith("tox-")&&(v.remove(f),v.length===0&&t.removeAttribute("class"))}),my(e.dom,t,r);const u=e.dom.rename(t,o);ED(e.dom,u),e.selection.setRng(Yu(c)),wD(e,o,r),Dp(e,dy(o),u)}else wD(e,o,r),Dp(e,dy(o),t)},kD=(e,t,o)=>{const r=jx(e);if(gD(e,r))return;const c=ej(e),u=Ye(o)?o:{};c.length>0?TD(e,r,c,t,u):Wj(e,r,t,u)},y$=(e,t,o,r)=>{let c=t.startContainer;const u=t.startOffset;if(zm(c)&&(o?u<c.data.length:u>0))return c;const f=e.schema.getNonEmptyElements();e4(c)&&(c=Rm.getNode(c,u));const b=new nr(c,r);o&&XU(e.dom,c)&&b.next();const v=o?b.next.bind(b):b.prev2.bind(b);for(;c=v();)if(c.nodeName==="LI"&&!c.hasChildNodes()||f[c.nodeName]||zm(c)&&c.data.length>0)return c;return null},C$=(e,t)=>{const o=t.childNodes;return o.length===1&&!nd(o[0])&&e.isBlock(o[0])},Zj=e=>M.from(e).map(ne.fromDom).filter(ml).exists(t=>Ui(t)&&!Wt(["details"],jn(t))),Gj=(e,t)=>{C$(e,t)&&Zj(t.firstChild)&&e.remove(t.firstChild,!0)},x$=(e,t,o)=>{let r;const c=C$(e,o)?o.firstChild:o;if(Gj(e,t),!Mb(e,t,!0))for(;r=t.firstChild;)c.appendChild(r)},AD=(e,t,o)=>{let r;const c=t.parentNode;if(!X6(e,t)||!X6(e,o))return;nd(o.lastChild)&&(r=o.lastChild),c===o.lastChild&&Nb(c.previousSibling)&&e.remove(c.previousSibling);const u=o.lastChild;u&&Nb(u)&&t.hasChildNodes()&&e.remove(u),Mb(e,o,!0)&&zi(ne.fromDom(o)),x$(e,t,o),r&&o.appendChild(r);const b=oc(ne.fromDom(o),ne.fromDom(t))?e.getParents(t,nd,o):[];e.remove(t),Ae(b,v=>{Mb(e,v)&&v!==e.getRoot()&&e.remove(v)})},qj=(e,t,o)=>{zi(ne.fromDom(o)),AD(e.dom,t,o),e.selection.setCursorLocation(o,0)},Kj=(e,t,o,r)=>{const c=e.dom;if(c.isEmpty(r))qj(e,o,r);else{const u=Hf(t);AD(c,o,r),e.selection.setRng(Yu(u))}},Yj=(e,t,o,r)=>{const c=Hf(t);AD(e.dom,o,r);const u=Yu(c);e.selection.setRng(u)},Xj=(e,t)=>{const o=e.dom,r=e.selection,c=r.getStart(),u=fD(e,c),f=o.getParent(r.getStart(),"LI",u);if(f){const b=f.parentElement;if(b===e.getBody()&&Mb(o,b))return!0;const v=dD(r.getRng()),S=o.getParent(y$(e,v,t,u),"LI",u),O=S&&(t?o.isChildOf(f,S):o.isChildOf(S,f));if(S&&S!==f&&!O)return e.undoManager.transact(()=>{t?Kj(e,v,S,f):KU(f)?Gx(e):Yj(e,v,f,S)}),!0;if(O&&!t&&S!==f){const R=v.commonAncestorContainer.parentElement;return!R||o.isChildOf(S,R)?!1:(e.undoManager.transact(()=>{const P=Hf(v);x$(o,R,S),R.remove();const z=Yu(P);e.selection.setRng(z)}),!0)}else if(!S&&!t&&v.startOffset===0&&v.endOffset===0)return e.undoManager.transact(()=>{r4(e)}),!0}return!1},Qj=(e,t,o)=>{const r=e.getParent(t.parentNode,e.isBlock,o);e.remove(t),r&&e.isEmpty(r)&&e.remove(r)},Jj=(e,t)=>{const o=e.dom,r=e.selection.getStart(),c=fD(e,r),u=o.getParent(r,o.isBlock,c);if(u&&o.isEmpty(u,void 0,{checkRootAsContent:!0})){const f=dD(e.selection.getRng()),b=y$(e,f,t,c),v=o.getParent(b,"LI",c);if(b&&v){const S=z=>Wt(["td","th","caption"],jn(z)),O=z=>z.dom===c,R=Go(ne.fromDom(v),S,O),P=Go(ne.fromDom(f.startContainer),S,O);return dd(R,P,no)?(e.undoManager.transact(()=>{const z=v.parentNode;Qj(o,u,c),ED(o,z),e.selection.select(b,!0),e.selection.collapse(t)}),!0):!1}}return!1},eW=(e,t)=>Xj(e,t)||Jj(e,t),_D=e=>{const t=e.selection.getStart(),o=fD(e,t),r=e.dom.getParent(t,"LI,DT,DD",o);return X(r)||mD(e).length>0},tW=e=>_D(e)?(e.undoManager.transact(()=>{let t=!0;const o=()=>t=!1;e.on("input",o),e.execCommand("Delete"),e.off("input",o),t&&e.dispatch("input"),uD(e.dom,e.getBody())}),!0):!1,OD=(e,t)=>{const o=e.selection;return!gD(e,o.getNode())&&(o.isCollapsed()?eW(e,t):tW(e))},nW=(e,t)=>({block:e,position:t}),oW=(e,t)=>({from:e,to:t}),c4=(e,t)=>{const o=ne.fromDom(e),r=ne.fromDom(t.container());return n_(o,r).map(c=>nW(c,t))},sW=e=>!(oc(e.to.block,e.from.block)||oc(e.from.block,e.to.block)),rW=e=>!no(e.from.block,e.to.block),DD=(e,t)=>Go(t,c=>Og(c)||hi(c.dom),c=>no(c,e)).filter(Hs).getOr(e),aW=(e,t)=>{const o=ne.fromDom(e);return no(DD(o,t.from.block),DD(o,t.to.block))},cW=e=>As(e.from.block.dom)===!1&&As(e.to.block.dom)===!1,iW=e=>{const t=o=>ac(o)||ot(o.dom)||_c(o);return t(e.from.block)&&t(e.to.block)},lW=(e,t,o,r)=>js(r.position.getNode())&&!or(e,r.block)?m(!1,r.block.dom).bind(c=>c.isEqual(r.position)?Yi(o,t,c).bind(u=>c4(t,u)):M.some(r)).getOr(r):r,RD=(e,t,o,r)=>{const c=c4(t,Le.fromRangeStart(r)),u=c.bind(f=>Yi(o,t,f.position).bind(b=>c4(t,b).map(v=>lW(e,t,o,v))));return er(c,u,oW).filter(f=>rW(f)&&aW(t,f)&&cW(f)&&iW(f)&&sW(f))},S$=(e,t,o,r)=>r.collapsed?RD(e,t,o,r):M.none(),UQ=(e,t)=>{const o=Ns(e);return nl(o,r=>t.isBlock(jn(r))).fold(it(o),r=>o.slice(0,r))},fy=(e,t)=>{const o=UQ(e,t);return Ae(o,Xo),o},uW=(e,t,o)=>{const r=zd(o,t);return No(r.reverse(),c=>or(e,c)).each(Xo)},jQ=(e,t)=>Xe(ta(t),o=>!or(e,o)).length===0,WQ=(e,t,o,r,c)=>{if(or(r,o))return xf(o),E(o.dom);jQ(r,c)&&or(r,t)&&da(c,ne.fromTag("br"));const u=y(o.dom,Le.before(c.dom));return Ae(fy(t,r),f=>{da(c,f)}),uW(r,e,t),u},ZQ=(e,t)=>e.isInline(jn(t)),Vm=(e,t,o,r)=>{if(or(r,o)){if(or(r,t)){const f=Qn((b=>{const v=(S,O)=>zr(S).fold(()=>O,R=>ZQ(r,R)?v(R,O.concat(Cr(R))):O);return v(b,[])})(o),(b,v)=>(Uc(b,v),v),Cf());zi(t),yo(t,f)}return Xo(o),E(t.dom)}const c=D(o.dom);return Ae(fy(t,r),u=>{yo(o,u)}),uW(r,e,t),c},qx=(e,t)=>{const o=zd(t,e);return M.from(o[o.length-1])},Um=(e,t)=>oc(t,e)?qx(t,e):M.none(),Rp=(e,t)=>{m(e,t.dom).bind(o=>M.from(o.getNode())).map(ne.fromDom).filter(ou).each(Xo)},i4=(e,t,o,r)=>(Rp(!0,t),Rp(!1,o),Um(t,o).fold(ae(Vm,e,t,o,r),ae(WQ,e,t,o,r))),ND=(e,t,o,r,c)=>t?i4(e,r,o,c):i4(e,o,r,c),$b=(e,t)=>{const o=ne.fromDom(e.getBody());return S$(e.schema,o.dom,t,e.selection.getRng()).map(c=>()=>{ND(o,t,c.from.block,c.to.block,e.schema).each(u=>{e.selection.setRng(u.toRange())})})},dW=(e,t,o)=>{const r=t.getRng();return er(n_(e,ne.fromDom(r.startContainer)),n_(e,ne.fromDom(r.endContainer)),(c,u)=>no(c,u)?M.none():M.some(()=>{r.deleteContents(),ND(e,!0,c,u,o).each(f=>{t.setRng(f.toRange())})})).getOr(M.none())},MD=(e,t)=>{const o=ne.fromDom(t),r=ae(no,e);return Xl(o,Og,r).isSome()},GQ=(e,t)=>MD(e,t.startContainer)||MD(e,t.endContainer),mW=(e,t)=>{const o=y(e.dom,Le.fromRangeStart(t)).isNone(),r=p(e.dom,Le.fromRangeEnd(t)).isNone();return!GQ(e,t)&&o&&r},Kx=e=>M.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),w$=e=>{const t=ne.fromDom(e.getBody()),o=e.selection.getRng();return mW(t,o)?Kx(e):dW(t,e.selection,e.schema)},wr=(e,t)=>e.selection.isCollapsed()?M.none():w$(e),rh=(e,t,o,r,c)=>M.from(t._selectionOverrides.showCaret(e,o,r,c)),fW=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},jf=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?M.none():M.some(fW(t)),Ib=(e,t,o)=>{const r=Ov(1,e.getBody(),t),c=Le.fromRangeStart(r),u=c.getNode();if(Ki(u))return rh(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(Ki(f))return rh(1,e,f,!1,!1);const b=Nm(e.dom.getRoot(),c.getNode());return Ki(b)?rh(1,e,b,!1,o):M.none()},ah=(e,t,o)=>t.collapsed?Ib(e,t,o).getOr(t):t,gW=e=>Kg(e)||ox(e),hW=e=>Lf(e)||sx(e),PD=(e,t)=>{dt(t)&&t.data.length===0&&e.remove(t)},l4=(e,t,o,r,c,u)=>{rh(r,e,u.getNode(!c),c,!0).each(f=>{if(t.collapsed){const b=t.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else t.deleteContents();e.selection.setRng(f)}),PD(e.dom,o)},E$=(e,t)=>{const o=e.selection.getRng();if(!dt(o.commonAncestorContainer))return M.none();const r=t?1:-1,c=Gu(e.getBody()),u=ae(Rv,t?c.next:c.prev),f=t?gW:hW,b=Pf(r,e.getBody(),o),v=u(b),S=v&&Ku(t,v);if(!S||!Zu(b,S))return M.none();if(f(S))return M.some(()=>l4(e,o,b.getNode(),r,t,S));const O=u(S);return O&&f(O)&&Zu(S,O)?M.some(()=>l4(e,o,b.getNode(),r,t,O)):M.none()},u4=(e,t)=>E$(e,t),BD=(e,t)=>{const o=e.getBody();return t?E(o).filter(Kg):D(o).filter(Lf)},$D=e=>{const t=e.selection.getRng();return!t.collapsed&&(BD(e,!0).exists(o=>o.isEqual(Le.fromRangeStart(t)))||BD(e,!1).exists(o=>o.isEqual(Le.fromRangeEnd(t))))},ID=e=>X(e)&&(Og(ne.fromDom(e))||_c(ne.fromDom(e))),pu=si.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),pW=(e,t)=>{const o=t.getNode(!e),r=e?"after":"before";return kt(o)&&o.getAttribute("data-mce-caret")===r},bW=(e,t,o,r,c)=>{const u=f=>c.isInline(f.nodeName.toLowerCase())&&!Bd(o,r,e);return Dv(!t,o).fold(()=>Dv(t,r).fold(pe,u),u)},T$=(e,t,o,r,c)=>{const u=c.getNode(!o);return n_(ne.fromDom(t),ne.fromDom(r.getNode())).map(f=>or(e,f)?pu.remove(f.dom):pu.moveToElement(u)).orThunk(()=>M.some(pu.moveToElement(u)))},k$=(e,t,o,r)=>Yi(t,e,o).bind(c=>ID(c.getNode())||bW(e,t,o,c,r)?M.none():t&&As(c.getNode())||!t&&As(c.getNode(!0))?T$(r,e,t,o,c):t&&Lf(o)||!t&&Kg(o)?M.some(pu.moveToPosition(c)):M.none()),LD=(e,t)=>Yt(t)?M.none():e&&As(t.nextSibling)?M.some(pu.moveToElement(t.nextSibling)):!e&&As(t.previousSibling)?M.some(pu.moveToElement(t.previousSibling)):M.none(),A$=(e,t,o)=>o.fold(r=>M.some(pu.remove(r)),r=>M.some(pu.moveToElement(r)),r=>Bd(t,r,e)?M.none():M.some(pu.moveToPosition(r))),vW=(e,t,o,r)=>pW(t,o)?LD(t,o.getNode(!t)).orThunk(()=>k$(e,t,o,r)):k$(e,t,o,r).bind(c=>A$(e,o,c)),yW=(e,t,o,r)=>{const c=Ov(t?1:-1,e,o),u=Le.fromRangeStart(c),f=ne.fromDom(e);return!t&&Lf(u)?M.some(pu.remove(u.getNode(!0))):t&&Kg(u)?M.some(pu.remove(u.getNode())):!t&&Kg(u)&&oT(f,u,r)?TM(f,u,r).map(b=>pu.remove(b.getNode())):t&&Lf(u)&&YA(f,u,r)?ZH(f,u,r).map(b=>pu.remove(b.getNode())):vW(e,t,u,r)},gy=(e,t)=>o=>(e._selectionOverrides.hideFakeCaret(),Ff(e,t,ne.fromDom(o)),!0),_$=(e,t)=>o=>{const r=t?Le.before(o):Le.after(o);return e.selection.setRng(r.toRange()),!0},CW=e=>t=>(e.selection.setRng(t.toRange()),!0),FD=(e,t)=>M.from(Nm(e.getBody(),t)),xW=(e,t)=>{const o=e.selection.getNode();return FD(e,o).filter(As).fold(()=>yW(e.getBody(),t,e.selection.getRng(),e.schema).map(r=>()=>r.fold(gy(e,t),_$(e,t),CW(e))),()=>M.some(_t))},O$=e=>{Ae(Fe(e,".mce-offscreen-selection"),Xo)},SW=(e,t)=>{const o=e.selection.getNode();return As(o)&&!Nh(o)?FD(e,o.parentNode).filter(As).fold(()=>M.some(()=>{O$(ne.fromDom(e.getBody())),Ff(e,t,ne.fromDom(e.selection.getNode())),jM(e)}),()=>M.some(_t)):$D(e)?M.some(()=>{gz(e,e.selection.getRng(),ne.fromDom(e.getBody()))}):M.none()},HD=e=>{const t=e.dom,o=e.selection,r=Nm(e.getBody(),o.getNode());if(hi(r)&&t.isBlock(r)&&t.isEmpty(r)){const c=t.create("br",{"data-mce-bogus":"1"});t.setHTML(r,""),r.appendChild(c),o.setRng(Le.before(c).toRange())}return!0},d4=(e,t)=>e.selection.isCollapsed()?xW(e,t):SW(e,t),m4=(e,t)=>{const o=e.dom,r=o.getParent(e.selection.getStart(),o.isBlock),c=o.getParent(e.selection.getEnd(),o.isBlock),u=e.getBody();if(r?.nodeName?.toLowerCase()==="div"&&r&&c&&r===u.firstChild&&c===u.lastChild&&!o.isEmpty(u)){const b=r.cloneNode(!1),v=()=>{if(t?mz(e):t_(e),u.firstChild!==r){const S=Hf(e.selection.getRng(),()=>document.createElement("span"));Array.from(u.childNodes).forEach(O=>b.appendChild(O)),u.appendChild(b),e.selection.setRng(Yu(S))}};return M.some(v)}return M.none()},D$=(e,t)=>{const o=Le.fromRangeStart(e.selection.getRng());return Yi(t,e.getBody(),o).filter(r=>t?jA(r):vM(r)).bind(r=>FC(t?0:-1,r)).map(r=>()=>e.selection.select(r))},f4=(e,t)=>e.selection.isCollapsed()?D$(e,t):M.none(),Lb=dt,R$=e=>Lb(e)&&e.data[0]===Gr,N$=e=>Lb(e)&&e.data[e.data.length-1]===Gr,M$=e=>(e.ownerDocument??document).createTextNode(Gr),zD=e=>{if(Lb(e.previousSibling))return N$(e.previousSibling)||e.previousSibling.appendData(Gr),e.previousSibling;if(Lb(e))return R$(e)||e.insertData(0,Gr),e;{const t=M$(e);return e.parentNode?.insertBefore(t,e),t}},Yx=e=>{if(Lb(e.nextSibling))return R$(e.nextSibling)||e.nextSibling.insertData(0,Gr),e.nextSibling;if(Lb(e))return N$(e)||e.appendData(Gr),e;{const t=M$(e);return e.nextSibling?e.parentNode?.insertBefore(t,e.nextSibling):e.parentNode?.appendChild(t),t}},Np=(e,t)=>e?zD(t):Yx(t),VD=ae(Np,!0),P$=ae(Np,!1),UD=(e,t)=>dt(e.container())?Np(t,e.container()):Np(t,e.getNode()),Xx=(e,t)=>{const o=t.get();return o&&e.container()===o&&Hu(o)},jD=(e,t)=>t.fold(o=>{Vg(e.get());const r=VD(o);return e.set(r),M.some(Le(r,r.length-1))},o=>E(o).map(r=>{if(Xx(r,e)){const c=e.get();return Le(c,1)}else{Vg(e.get());const c=UD(r,!0);return e.set(c),Le(c,1)}}),o=>D(o).map(r=>{if(Xx(r,e)){const c=e.get();return Le(c,c.length-1)}else{Vg(e.get());const c=UD(r,!1);return e.set(c),Le(c,c.length-1)}}),o=>{Vg(e.get());const r=P$(o);return e.set(r),M.some(Le(r,1))}),B$=(e,t)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,t);if(r.isSome())return r}return M.none()},ba=si.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),g4=(e,t)=>{const o=Nf(t,e);return o||e},$$=(e,t,o)=>{const r=zM(o),c=g4(t,r.container());return yp(e,c,r).fold(()=>p(c,r).bind(ae(yp,e,c)).map(u=>ba.before(u)),M.none)},Qx=(e,t)=>K(e,t)===null,WD=(e,t,o)=>yp(e,t,o).filter(ae(Qx,t)),ZD=(e,t,o)=>{const r=VM(o);return WD(e,t,r).bind(c=>y(c,r).isNone()?M.some(ba.start(c)):M.none())},I$=(e,t,o)=>{const r=zM(o);return WD(e,t,r).bind(c=>p(c,r).isNone()?M.some(ba.end(c)):M.none())},L$=(e,t,o)=>{const r=VM(o),c=g4(t,r.container());return yp(e,c,r).fold(()=>y(c,r).bind(ae(yp,e,c)).map(u=>ba.after(u)),M.none)},F$=e=>!JA(GD(e)),jm=(e,t,o)=>B$([$$,ZD,I$,L$],[e,t,o]).filter(F$),GD=e=>e.fold(Ro,Ro,Ro,Ro),H$=e=>e.fold(it("before"),it("start"),it("end"),it("after")),h4=e=>e.fold(ba.before,ba.before,ba.after,ba.after),qD=e=>e.fold(ba.start,ba.start,ba.end,ba.end),KD=(e,t)=>H$(e)===H$(t)&&GD(e)===GD(t),wW=(e,t,o,r,c,u)=>er(yp(t,o,r),yp(t,o,c),(f,b)=>f!==b&&uz(o,f,b)?ba.after(e?f:b):u).getOr(u),z$=(e,t)=>e.fold(Te,o=>!KD(o,t)),EW=(e,t,o,r,c)=>{const u=Ku(e,c);return Yi(e,o,u).map(ae(Ku,e)).fold(()=>r.map(h4),v=>jm(t,o,v).map(ae(wW,e,t,o,u,v)).filter(ae(z$,r))).filter(F$)},TW=(e,t)=>e?t.fold(A(M.some,ba.start),M.none,A(M.some,ba.after),M.none):t.fold(M.none,A(M.some,ba.before),M.none,A(M.some,ba.end)),kW=(e,t,o,r)=>{const c=Ku(e,r),u=jm(t,o,c);return jm(t,o,c).bind(ae(TW,e)).orThunk(()=>EW(e,t,o,u,r))},AW=e=>ce(e.selection.getSel().modify),V$=(e,t,o)=>{const r=e?1:-1;return t.setRng(Le(o.container(),o.offset()+r).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},_W=(e,t)=>{const o=t.selection.getRng(),r=e?Le.fromRangeEnd(o):Le.fromRangeStart(o);return AW(t)?e&&ym(r)?V$(!0,t.selection,r):!e&&Dg(r)?V$(!1,t.selection,r):!1:!1};var Wf;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Wf||(Wf={}));const p4=(e,t)=>e===-1?gs(t):t,OW=(e,t,o)=>e===1?t.next(o):t.prev(o),DW=(e,t,o,r)=>js(r.getNode(t===1))?Wf.Br:Bd(o,r)===!1?Wf.Block:Wf.Wrap,U$=(e,t,o,r)=>{const c=Gu(o);let u=r;const f=[];for(;u;){const b=OW(t,c,u);if(!b)break;if(js(b.getNode(!1)))return t===1?{positions:p4(t,f).concat([b]),breakType:Wf.Br,breakAt:M.some(b)}:{positions:p4(t,f),breakType:Wf.Br,breakAt:M.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const v=DW(o,t,u,b);return{positions:p4(t,f),breakType:v,breakAt:M.some(b)}}f.push(b),u=b}return{positions:p4(t,f),breakType:Wf.Eol,breakAt:M.none()}},YD=(e,t,o,r)=>t(o,r).breakAt.map(c=>{const u=t(o,c).positions;return e===-1?u.concat(c):[c].concat(u)}).getOr([]),XD=(e,t)=>Ho(e,(o,r)=>o.fold(()=>M.some(r),c=>er(Gs(c.getClientRects()),Gs(r.getClientRects()),(u,f)=>{const b=Math.abs(t-u.left);return Math.abs(t-f.left)<=b?r:c}).or(o)),M.none()),Fb=(e,t)=>Gs(t.getClientRects()).bind(o=>XD(e,o.left)),Ma=ae(U$,Le.isAbove,-1),Jx=ae(U$,Le.isBelow,1),eS=ae(YD,-1,Ma),Mp=ae(YD,1,Jx),b4=(e,t)=>Ma(e,t).breakAt.isNone(),Ei=(e,t)=>Jx(e,t).breakAt.isNone(),Hb=e=>E(e).map(t=>[t].concat(Jx(e,t).positions)).getOr([]),j$=e=>D(e).map(t=>Ma(e,t).positions.concat(t)).getOr([]),W$=(e,t)=>Fb(eS(e,t),t),QD=(e,t)=>Fb(Mp(e,t),t),RW=As,JD=(e,t)=>Math.abs(e.left-t),v4=(e,t)=>Math.abs(e.right-t),eR=e=>Ko(e,"node"),Z$=(e,t)=>zl(e,(o,r)=>{const c=Math.min(JD(o,t),v4(o,t)),u=Math.min(JD(r,t),v4(r,t));return u===c&&eR(r)&&RW(r.node)||u<c?r:o}),NW=e=>{const t=o=>hn(o,r=>{const c=wf(r);return c.node=e,c});if(kt(e))return t(e.getClientRects());if(dt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),t(o.getClientRects())}else return[]},tR=e=>wo(e,NW);var Ti;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Ti||(Ti={}));const nR=(e,t,o,r)=>{let c=r;for(;c=cb(c,e,j0,t);)if(o(c))return},G$=(e,t,o,r,c,u)=>{let f=0;const b=[],v=R=>{let P=tR([R]);e===Ti.Up&&(P=P.reverse());for(let z=0;z<P.length;z++){const ee=P[z];if(!o(ee,S)){if(b.length>0&&t(ee,ci(b))&&f++,ee.line=f,c(ee))return!0;b.push(ee)}}return!1},S=ci(u.getClientRects());if(!S)return b;const O=u.getNode();return O&&(v(O),nR(e,r,v,O)),b},y4=(e,t)=>t.line>e,oR=(e,t)=>t.line===e,q$=ae(G$,Ti.Up,Ng,Ef),K$=ae(G$,Ti.Down,Ef,Ng),sR=e=>ci(e.getClientRects()),MW=(e,t,o,r)=>{const c=Gu(t);let u,f,b,v;const S=[];let O=0;e===Ti.Down?(u=c.next,f=Ef,b=Ng,v=Le.after(r)):(u=c.prev,f=Ng,b=Ef,v=Le.before(r));const R=sR(v);do{if(!v.isVisible())continue;const P=sR(v);if(b(P,R))continue;S.length>0&&f(P,ci(S))&&O++;const z=wf(P);if(z.position=v,z.line=O,o(z))return S;S.push(z)}while(v=u(v));return S},Y$=e=>t=>y4(e,t),rR=e=>t=>oR(e,t),Zf=(e,t)=>{e.selection.setRng(t),du(e,e.selection.getRng())},aR=(e,t,o)=>M.some(ah(e,t,o)),cR=(e,t)=>{const o=e.getNode(t===-1);return X(o)&&Kr(o)?M.some(o):M.none()},X$=(e,t)=>{const o=e.dom.createRng();return o.selectNode(t),o},Q$=(e,t,o,r,c,u)=>{const f=t===1,b=Gu(e.getBody()),v=ae(Rv,f?b.next:b.prev),S=f?r:c;if(!o.collapsed){const ee=qr(o);if(u(ee))if(Kr(ee)){const W=Pf(t,e.getBody(),o);return M.from(v(W)).map(J=>J.toRange())}else return rh(t,e,ee,t===-1,!1);else if($D(e)){const W=o.cloneRange();return W.collapse(t===-1),M.from(W)}}const O=Pf(t,e.getBody(),o);if(S(O))return jf(e,O.getNode(!f));let R=v(O);const P=H0(o);if(R)R=Ku(f,R);else return P?M.some(o):M.none();if(S(R))return cR(R,t).fold(()=>rh(t,e,R?.getNode(!f),f,!1),ee=>M.some(X$(e,ee)));const z=v(R);return z&&S(z)&&Zu(R,z)?cR(R,t).fold(()=>rh(t,e,z.getNode(!f),f,!1),ee=>M.some(X$(e,ee))):P?aR(e,R.toRange(),!1):M.none()},J$=(e,t,o,r,c,u)=>{const f=Pf(t,e.getBody(),o),b=ci(f.getClientRects()),v=t===Ti.Down,S=e.getBody();if(!b)return M.none();if($D(e)){const J=v?Le.fromRangeEnd(o):Le.fromRangeStart(o);return(v?QD:W$)(S,J).orThunk(()=>M.from(J)).map(ye=>ye.toRange())}const R=(v?K$:q$)(S,Y$(1),f),P=Xe(R,rR(1)),z=b.left,ee=Z$(P,z);if(ee&&u(ee.node)){const J=Math.abs(z-ee.left),be=Math.abs(z-ee.right);return rh(t,e,ee.node,J<be,!1)}let W;if(r(f)?W=f.getNode():c(f)?W=f.getNode(!0):W=qr(o),W){const J=MW(t,S,Y$(1),W);let be=Z$(Xe(J,rR(1)),z);if(be||(be=ci(Xe(J,rR(0))),be))return aR(e,be.position.toRange(),!1)}return P.length===0?C4(e,v).filter(v?c:r).map(J=>ah(e,J.toRange(),!1)):M.none()},C4=(e,t)=>{const o=e.selection.getRng(),r=t?Le.fromRangeEnd(o):Le.fromRangeStart(o),c=Av(r.container(),e.getBody());if(t){const u=Jx(c,r);return hr(u.positions)}else{const u=Ma(c,r);return Gs(u.positions)}},x4=(e,t,o)=>C4(e,t).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),hy=(e,t)=>{const o=e.dom.createRng();o.setStart(t.container(),t.offset()),o.setEnd(t.container(),t.offset()),e.selection.setRng(o)},iR=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},S4=(e,t,o)=>jD(t,o).map(r=>(hy(e,r),o)),eI=(e,t,o)=>{const r=Le.fromRangeStart(e);if(e.collapsed)return r;{const c=Le.fromRangeEnd(e);return o?y(t,c).getOr(c):p(t,r).getOr(r)}},tI=(e,t,o)=>{const r=e.getBody(),c=eI(e.selection.getRng(),r,o),u=ae(hb,e);return kW(o,u,r,c).bind(b=>S4(e,t,b))},lR=(e,t,o)=>{const r=hn(Fe(ne.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Xe(r,e),u=Xe(o,e);Ae(Ls(c,u),ae(iR,!1)),Ae(Ls(u,c),ae(iR,!0))},nI=(e,t)=>{const o=t.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=Le.fromRangeStart(e.selection.getRng());Le.isTextPosition(r)&&!dz(r)&&(hy(e,nA(o,r)),t.set(null))}},oI=(e,t,o,r)=>{if(t.selection.isCollapsed()){const c=Xe(r,e);Ae(c,u=>{const f=Le.fromRangeStart(t.selection.getRng());jm(e,t.getBody(),f).bind(b=>S4(t,o,b))})}},uR=(e,t,o)=>Rf(e)?tI(e,t,o).isSome():!1,sI=(e,t,o)=>Rf(t)?_W(e,t):!1,PW=e=>{const t=rn(null),o=ae(hb,e);return e.on("NodeChange",r=>{Rf(e)&&(lR(o,e.dom,r.parents),nI(e,t),oI(o,e,t,r.parents))}),t},w4=ae(sI,!0),BW=ae(sI,!1),Pp=(e,t,o)=>{if(Rf(e)){const r=C4(e,t).getOrThunk(()=>{const c=e.selection.getRng();return t?Le.fromRangeEnd(c):Le.fromRangeStart(c)});return jm(ae(hb,e),e.getBody(),r).exists(c=>{const u=h4(c);return jD(o,u).exists(f=>(hy(e,f),!0))})}else return!1},$W=(e,t)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(t.container(),t.offset()),o},IW=e=>er(E(e),D(e),(t,o)=>{const r=Ku(!0,t),c=Ku(!1,o);return p(e,r).forall(u=>u.isEqual(c))}).getOr(!0),rI=(e,t)=>o=>jD(t,o).map(r=>()=>hy(e,r)),aI=(e,t,o,r)=>{const c=e.getBody(),u=ae(hb,e);e.undoManager.ignore(()=>{e.selection.setRng($W(o,r)),t_(e),jm(u,c,Le.fromRangeStart(e.selection.getRng())).map(qD).bind(rI(e,t)).each(on)}),e.nodeChanged()},cI=(e,t)=>{const o=Nf(t,e);return o||e},iI=(e,t,o,r)=>{const c=cI(e.getBody(),r.container()),u=ae(hb,e),f=jm(u,c,r);return f.bind(v=>o?v.fold(it(M.some(qD(v))),M.none,it(M.some(h4(v))),M.none):v.fold(M.none,it(M.some(h4(v))),M.none,it(M.some(qD(v))))).map(rI(e,t)).getOrThunk(()=>{const v=hp(o,c,r),S=v.bind(O=>jm(u,c,O));return er(f,S,()=>yp(u,c,r).bind(O=>IW(O)?M.some(()=>{Ff(e,o,ne.fromDom(O))}):M.none())).getOrThunk(()=>S.bind(()=>v.map(O=>()=>{o?aI(e,t,r,O):aI(e,t,O,r)})))})},dR=(e,t,o)=>{if(e.selection.isCollapsed()&&Rf(e)){const r=Le.fromRangeStart(e.selection.getRng());return iI(e,t,o,r)}return M.none()},LW=e=>bd(e)>1,lI=(e,t)=>{const o=ne.fromDom(e.getBody()),r=ne.fromDom(e.selection.getStart()),c=zd(r,o);return nl(c,t).fold(it(c),u=>c.slice(0,u))},FW=e=>bd(e)===1,HW=e=>lI(e,t=>e.schema.isBlock(jn(t))||LW(t)),uI=e=>lI(e,t=>e.schema.isBlock(jn(t))),zW=(e,t)=>{const o=ae(pP,e);return wo(t,r=>o(r)?[r.dom]:[])},mR=e=>{const t=uI(e);return zW(e,t)},VW=(e,t,o,r)=>{const c=zW(t,r);if(c.length===0)Ff(t,e,o);else{const u=y_(o.dom,c);t.selection.setRng(u.toRange())}},UW=(e,t)=>{const o=Xe(HW(e),FW);return hr(o).bind(r=>{const c=Le.fromRangeStart(e.selection.getRng());return WM(t,c,r.dom)&&!yA(r)?M.some(()=>VW(t,e,r,o)):M.none()})},jW=(e,t)=>{const o=t.parentElement;return js(t)&&!se(o)&&e.dom.isEmpty(o)},WW=e=>yA(ne.fromDom(e)),dI=(e,t)=>{const o=e.selection.getStart(),r=jW(e,o)||WW(o)?y_(o,t):Fz(e.selection.getRng(),t);e.selection.setRng(r.toRange())},mI=(e,t)=>{const o=Ls(t,mR(e));o.length>0&&dI(e,o)},fR=e=>dt(e.startContainer),ZW=e=>e.startOffset===0&&fR(e),GW=(e,t)=>{const o=t.startContainer.parentElement;return!se(o)&&pP(e,ne.fromDom(o))},qW=e=>{const t=e.startContainer.parentNode,o=e.endContainer.parentNode;return!se(t)&&!se(o)&&t.isEqualNode(o)},KW=e=>{const t=e.endContainer;return e.endOffset===(dt(t)?t.length:t.childNodes.length)},YW=e=>qW(e)&&KW(e),XW=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),QW=e=>YW(e)||XW(e),JW=e=>{const t=e.selection.getRng();return ZW(t)&&GW(e,t)&&QW(t)},eZ=e=>{if(JW(e)){const t=mR(e);return M.some(()=>{t_(e),mI(e,t)})}else return M.none()},gR=(e,t)=>e.selection.isCollapsed()?UW(e,t):eZ(e),fI=(e,t)=>xt(e,o=>U(o.dom),o=>t.isBlock(jn(o))),tZ=e=>fI(ne.fromDom(e.selection.getStart()),e.schema),nZ=e=>{const t=e.selection.getRng();return t.collapsed&&(fR(t)||e.dom.isEmpty(t.startContainer))&&!tZ(e)},tS=e=>(nZ(e)&&dI(e,[]),!0),py=(e,t,o)=>X(o)?M.some(()=>{e._selectionOverrides.hideFakeCaret(),Ff(e,t,ne.fromDom(o))}):M.none(),oZ=(e,t)=>{const o=t?ox:sx,c=Pf(t?1:-1,e.getBody(),e.selection.getRng());return o(c)?py(e,t,c.getNode(!t)):M.from(Ku(t,c)).filter(u=>o(u)&&Zu(c,u)).bind(u=>py(e,t,u.getNode(!t)))},sZ=(e,t)=>{const o=e.selection.getNode();return Sl(o)?py(e,t,o):M.none()},E4=(e,t)=>e.selection.isCollapsed()?oZ(e,t):sZ(e,t),hR=e=>Go(e,t=>hi(t.dom)||As(t.dom)).exists(t=>hi(t.dom)),pR=e=>ng(e??"").getOr(0),gI=(e,t)=>{const o=e||hw(t)?"margin":"padding",r=Vs(t,"direction")==="rtl"?"-right":"-left";return o+r},qQ=(e,t,o,r,c,u)=>{const f=gI(o,ne.fromDom(u)),b=pR(e.getStyle(u,f));if(t==="outdent"){const v=Math.max(0,b-r);e.setStyle(u,f,v?v+c:"")}else{const v=b+r+c;e.setStyle(u,f,v)}},rZ=(e,t)=>Qa(t,o=>{const r=gI(gv(e),o),c=ir(o,r).map(pR).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),hI=e=>{const t=pI(e);return!e.mode.isReadOnly()&&(t.length>1||rZ(e,t))},aZ=e=>!e.mode.isReadOnly()&&Dj(e),by=e=>Tl(e)||_c(e),cZ=e=>sc(e).exists(by),pI=e=>Xe(Cd(e.selection.getSelectedBlocks()),t=>!by(t)&&!cZ(t)&&hR(t)),bI=(e,t)=>{if(e.mode.isReadOnly())return;const{dom:o}=e,r=P3(e),c=/[a-z%]+$/i.exec(r)?.[0]??"px",u=pR(r),f=gv(e);Ae(pI(e),b=>{qQ(o,t,f,u,c,b.dom)}),t==="indent"?g$(e):Gx(e)},vI=e=>bI(e,"indent"),ch=e=>bI(e,"outdent"),ki=e=>{if(e.selection.isCollapsed()&&hI(e)){const t=e.dom,o=e.selection.getRng(),r=Le.fromRangeStart(o),c=t.getParent(o.startContainer,t.isBlock);if(c!==null&&tT(ne.fromDom(c),r,e.schema))return M.some(()=>ch(e))}return M.none()},yI=(e,t)=>{const o=P_(e.selection.getRng());return I7(o)?M.some(()=>Ff(e,t,ne.fromDom(e.selection.getNode()))):M.none()},zb=(e,t)=>e.selection.isCollapsed()?M.none():yI(e,t),ih=(e,t,o)=>dc([ki,d4,u4,(r,c)=>dR(r,t,c),$b,u_,f4,E4,wr,gR,m4,zb],r=>r(e,o)).filter(r=>e.selection.isEditable()),Yd=(e,t)=>{ih(e,t,!1).fold(()=>{e.selection.isEditable()&&(t_(e),jM(e))},on),_D(e)&&uD(e.dom,e.getBody())},nS=(e,t)=>{ih(e,t,!0).fold(()=>{e.selection.isEditable()&&mz(e)},on),_D(e)&&uD(e.dom,e.getBody())},bR=(e,t)=>{e.addCommand("delete",()=>{Yd(e,t)}),e.addCommand("forwardDelete",()=>{nS(e,t)})},T4=5,CI=400,vR=e=>e.touches===void 0||e.touches.length!==1?M.none():M.some(e.touches[0]),iZ=(e,t)=>{const o=Math.abs(e.clientX-t.x),r=Math.abs(e.clientY-t.y);return o>T4||r>T4},lZ=e=>{const t=Ic(),o=rn(!1),r=al(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},CI);e.on("touchstart",c=>{vR(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),t.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),vR(c).each(u=>{t.on(f=>{iZ(u,f)&&(t.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&t.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},k4=(e,t)=>Pn(e,t.nodeName),xI=(e,t)=>dt(t)?!0:kt(t)?!k4(e.getBlockElements(),t)&&!Js(t)&&!Xs(e,t)&&!Ph(t)&&!f2(t):!1,SI=(e,t,o)=>io(CM(ne.fromDom(o),ne.fromDom(t)),r=>k4(e,r.dom)),uZ=(e,t)=>{if(dt(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||k4(e,t.nextSibling)||Ph(t.nextSibling)}return!1},wI=e=>e.dom.create(Rr(e),iu(e)),KQ=e=>{const t=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,v,S=null;const O=Rr(e);if(!u||!kt(u))return;const R=f.nodeName.toLowerCase();if(!r.isValidChild(R,O.toLowerCase())||SI(c,f,u))return;if(f.firstChild===f.lastChild&&js(f.firstChild)){b=wI(e),b.appendChild(Cf().dom),f.replaceChild(b,f.firstChild),e.selection.setCursorLocation(b,0),e.nodeChanged();return}let P=f.firstChild;for(;P;)if(kt(P)&&Tc(r,P),xI(r,P)){if(uZ(c,P)){v=P,P=P.nextSibling,t.remove(v);continue}if(!b){if(!S&&e.hasFocus()&&(S=Hf(e.selection.getRng(),()=>document.createElement("span"))),!P.parentNode){P=null;break}b=wI(e),f.insertBefore(b,P)}v=P,P=P.nextSibling,b.appendChild(v)}else b=null,P=P.nextSibling;S&&(e.selection.setRng(Yu(S)),e.nodeChanged())},dZ=(e,t,o)=>{const r=ne.fromDom(wI(e)),c=Cf();yo(r,c),o(t,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},Xd=e=>{e.on("NodeChange",()=>KQ(e))},EI=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,mZ=(e,t,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?t.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=t.lastIndexOf("<",u);if(b!==-1&&t.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},Vb=(e,t,o)=>{let r=t.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(t[r],mZ(e,c,tb(e)));o.content=c}},TI=(e,t)=>Qa(e,o=>{const r=t.match(o);return r!==null&&r[0].length===t.length}),fZ=e=>{const t="contenteditable",o=" "+lt.trim(mE(e))+" ",r=" "+lt.trim(tb(e))+" ",c=EI(o),u=EI(r),f=eA(e);f.length>0&&e.on("BeforeSetContent",b=>{Vb(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let v=b.length;for(;v--;){const S=b[v];c(S)?S.attr(t,"true"):u(S)&&S.attr(t,"false")}}),e.serializer.addAttributeFilter(t,b=>{let v=b.length;for(;v--;){const S=b[v];if(!c(S)&&!u(S))continue;const O=S.attr("data-mce-content");f.length>0&&O?TI(f,O)?(S.name="#text",S.type=3,S.raw=!0,S.value=O):S.remove():S.attr(t,null)}})},A4=e=>Ql(ne.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),_4=(e,t)=>{t.hasAttribute("data-mce-caret")&&(su(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},kI=(e,t)=>{const o=A4(e);if(o){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),_4(e,o);return}F0(o)&&(_4(e,o),e.undoManager.add())}},AI=e=>{e.on("keyup compositionstart",ae(kI,e))},_I=As,OI=(e,t,o)=>Q$(t,e,o,Kg,Lf,_I),DI=(e,t,o)=>J$(t,e,o,u=>Kg(u)||rx(u),u=>Lf(u)||WA(u),_I),RI=e=>{const t=e.dom.create(Rr(e));return t.innerHTML='<br data-mce-bogus="1">',t},O4=(e,t,o)=>{const r=Gu(e.getBody()),c=ae(Rv,t===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(Le.fromRangeStart(o))){const b=ne.fromDom(RI(e));t===1?di(ne.fromDom(u),b):da(ne.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},gZ=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return OI(o,e,r).orThunk(()=>(O4(e,o,r),M.none()))},hZ=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return DI(o,e,r).orThunk(()=>(O4(e,o,r),M.none()))},pZ=(e,t)=>{const o=t?e.getEnd(!0):e.getStart(!0);return JA(o)?!t:t},NI=(e,t)=>gZ(e,pZ(e.selection,t)).exists(o=>(Zf(e,o),!0)),MI=(e,t)=>hZ(e,t).exists(o=>(Zf(e,o),!0)),PI=(e,t)=>x4(e,t,t?Lf:Kg),D4=(e,t)=>BD(e,!t).map(o=>{const r=o.toRange(),c=e.selection.getRng();return t?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Zf(e,o),!0)),BI=(e,t)=>{const o=f=>no(f,t),r=f=>hi(f.dom),c=ne.fromDom(e.container());return Go(c,r,o).filter(f=>!o(f))},$I=(e,t,o)=>(o?QD:W$)(e.getBody(),t).map(c=>c.toRange()),bZ=(e,t)=>{const o=Le.fromRangeStart(e.selection.getRng()),r=Le.fromRangeEnd(e.selection.getRng()),c=ne.fromDom(e.getBody());return md(er(BI(o,c),BI(r,c),(f,b)=>no(f,b)?M.some(f):M.none())).fold(pe,f=>t&&Ei(f.dom,r)||!t&&b4(f.dom,o)?$I(e,t?r:o,t).exists(b=>(Zf(e,b),!0)):!1)},Gf=(e,t)=>bZ(e,t),yR=e=>Wt(["figcaption"],jn(e)),vZ=(e,t,o)=>{const r=ae(no,t);return Go(ne.fromDom(e.container()),c=>o.isBlock(jn(c)),r).filter(yR)},yZ=(e,t,o)=>t?Ei(e.dom,o):b4(e.dom,o),CZ=(e,t)=>{const o=ne.fromDom(e.getBody()),r=Le.fromRangeStart(e.selection.getRng());return vZ(r,o,e.schema).exists(()=>{if(yZ(o,t,r)){const u=dZ(e,o,t?yo:Gl);return e.selection.setRng(u),!0}else return!1})},R4=(e,t)=>e.selection.isCollapsed()?CZ(e,t):!1,CR=(e,t,o)=>{const r=e.selection.getRng(),c=Le.fromRangeStart(r);return e.getBody().firstChild===t&&b4(o,c)?(e.execCommand("InsertNewBlockBefore"),!0):!1},II=(e,t)=>{const o=e.selection.getRng(),r=Le.fromRangeStart(o);return e.getBody().lastChild===t&&Ei(t,r)?(e.execCommand("InsertNewBlockAfter"),!0):!1},LI=(e,t)=>t?M.from(e.dom.getParent(e.selection.getNode(),"details")).map(o=>II(e,o)).getOr(!1):M.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(o=>M.from(e.dom.getParent(o,"details")).map(r=>CR(e,r,o))).getOr(!1),xR=(e,t)=>LI(e,t),FI={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},oS=e=>hn(e,t=>({...FI,...t})),N4=e=>hn(e,t=>({...FI,...t})),SR=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,HI=(e,t)=>wo(oS(e),o=>SR(o,t)?[o]:[]),zI=(e,t)=>wo(N4(e),o=>SR(o,t)?[o]:[]),_n=(e,...t)=>()=>e.apply(null,t),Bp=(e,t)=>No(HI(e,t),o=>o.action()),M4=(e,t)=>dc(zI(e,t),o=>o.action()),vy=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return Q$(e,o,r,ox,sx,Sl).exists(c=>(Zf(e,c),!0))},VI=(e,t)=>{const o=t?1:-1,r=e.selection.getRng();return J$(e,o,r,ox,sx,Sl).exists(c=>(Zf(e,c),!0))},wR=(e,t)=>x4(e,t,t?sx:ox),xZ=(e,t)=>UI(e,t,Te),UI=(e,t,o)=>wo(Ns(e),r=>zc(r,t)?o(r)?[r]:[]:UI(r,t,o)),jI=(e,t,o=pe)=>{if(o(t))return M.none();if(Wt(e,jn(t)))return M.some(t);const r=c=>zc(c,"table")||o(c);return lr(t,e.join(","),r)},SZ=(e,t)=>jI(["td","th"],e,t),WI=e=>xZ(e,"th,td"),wZ=(e,t)=>fa(e,"table",t),ZI=si.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),sS={...ZI,none:e=>ZI.none(e)},ER=(e,t,o,r,c=Te)=>{const u=r===1;if(!u&&o<=0)return sS.first(e[0]);if(u&&o>=e.length-1)return sS.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?sS.middle(t,b):ER(e,t,f,r,c)}},GI=(e,t)=>wZ(e,t).bind(o=>{const r=WI(o);return nl(r,u=>no(e,u)).map(u=>({index:u,all:r}))}),EZ=(e,t,o)=>GI(e,o).fold(()=>sS.none(e),c=>ER(c.all,e,c.index,1,t)),TZ=(e,t,o)=>GI(e,o).fold(()=>sS.none(),c=>ER(c.all,e,c.index,-1,t));var TR=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],kZ=()=>{const e=S=>ne.fromDom(S.dom.cloneNode(!1)),t=S=>Li(S).dom,o=S=>Hs(S)?jn(S)==="body"?!0:Wt(TR,jn(S)):!1,r=S=>Hs(S)?Wt(["br","img","hr","input"],jn(S)):!1,c=S=>Hs(S)&&bs(S,"contenteditable")==="false",u=(S,O)=>S.dom.compareDocumentPosition(O.dom),f=(S,O)=>{const R=Jn(S);sa(O,R)},b=S=>{const O=jn(S);return Wt(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],O)},v=S=>Hs(S)?fi(S,"lang"):M.none();return{up:it({selector:lr,closest:fa,predicate:Xl,all:wa}),down:it({selector:Fe,predicate:q}),styles:it({get:Vs,getRaw:ir,set:Ea,remove:xh}),attrs:it({get:bs,set:Ts,remove:cr,copyTo:f}),insert:it({before:da,after:di,afterAll:dg,append:yo,appendAll:mi,prepend:Gl,wrap:Uc}),remove:it({unwrap:yc,remove:Xo}),create:it({nu:ne.fromTag,clone:e,text:ne.fromText}),query:it({comparePosition:u,prevSibling:li,nextSibling:rc}),property:it({children:Ns,name:jn,parent:sc,document:t,isText:Ao,isComment:dl,isElement:Hs,isSpecial:b,getLanguage:v,getText:Ta,setText:i1,isBoundary:o,isEmptyTag:r,isNonEditable:c}),eq:no,is:ef}};const qf=(e,t)=>({element:e,offset:t}),kR=(e,t)=>{if(e.property().isText(t))return qf(t,e.property().getText(t).length);{const o=e.property().children(t);return o.length>0?kR(e,o[o.length-1]):qf(t,o.length)}},P4=(e,t,o)=>{const r=e.property().children(t);return r.length>0&&o<r.length?P4(e,r[o],0):r.length>0&&e.property().isElement(t)&&r.length===o?kR(e,r[r.length-1]):qf(t,o)},qI=P4,AR=kZ(),$p=(e,t)=>qI(AR,e,t),_R=rr("image"),od=e=>{const t=e;return M.from(t[_R])},Ub=(e,t)=>{const o=e;o[_R]=t},B4=rr("event"),OR=e=>{const t=e;return M.from(t[B4])},$4=e=>t=>{const o=t;o[B4]=e},KI=(e,t)=>$4(t)(e),YI=$4(0),AZ=$4(2),_Z=$4(1),OZ=(e=>t=>{const o=t;return M.from(o[B4]).exists(r=>r===e)})(0),XI=()=>Object.freeze({length:0,item:e=>null}),DR=rr("mode"),DZ=e=>{const t=e;return M.from(t[DR])},lh=e=>t=>{const o=t;o[DR]=e},rS=(e,t)=>lh(t)(e),RR=lh(0),I4=lh(2),NR=lh(1),QI=e=>t=>{const o=t;return M.from(o[DR]).exists(r=>r===e)},yy=QI(0),JI=QI(1),eL=(e,t)=>({...t,get length(){return t.length},add:(o,r)=>{if(yy(e))if(V(o)){if(!Wn(r))return t.add(o,r)}else return t.add(o);return null},remove:o=>{yy(e)&&t.remove(o)},clear:()=>{yy(e)&&t.clear()}}),L4=["none","copy","link","move"],tL=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],Cy=()=>{const e=new window.DataTransfer;let t="move",o="all";const r={get dropEffect(){return t},set dropEffect(c){Wt(L4,c)&&(t=c)},get effectAllowed(){return o},set effectAllowed(c){OZ(r)&&Wt(tL,c)&&(o=c)},get items(){return eL(r,e.items)},get files(){return JI(r)?XI():e.files},get types(){return e.types},setDragImage:(c,u,f)=>{yy(r)&&(Ub(r,{image:c,x:u,y:f}),e.setDragImage(c,u,f))},getData:c=>JI(r)?"":e.getData(c),setData:(c,u)=>{yy(r)&&e.setData(c,u)},clearData:c=>{yy(r)&&e.clearData(c)}};return RR(r),r},RZ=e=>{const t=Cy(),o=DZ(e);return I4(e),YI(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,od(e).each(r=>t.setDragImage(r.image,r.x,r.y)),Ae(e.types,r=>{r!=="Files"&&t.setData(r,e.getData(r))}),Ae(e.files,r=>t.items.add(r)),OR(e).each(r=>{KI(t,r)}),o.each(r=>{rS(e,r),rS(t,r)}),t},nL=e=>{const t=e.getData("text/html");return t===""?M.none():M.some(t)},oL=(e,t)=>e.setData("text/html",t),NZ=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),MZ=(e,t)=>wo(t,o=>{const r=NZ(wf(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),sL=(e,t,o)=>Ho(e,(r,c)=>r.fold(()=>M.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-t)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-t)+Math.abs(c.y-o));return M.some(b<f?c:u)}),M.none()),rL=(e,t,o,r,c)=>{const u=Fe(ne.fromDom(o),"td,th,caption").map(b=>b.dom),f=Xe(MZ(e,u),b=>t(b,c));return sL(f,r,c).map(b=>b.cell)},PZ=e=>e.bottom,aL=e=>e.top,aS=(e,t)=>e.y<t,BZ=(e,t)=>e.y>t,cL=ae(rL,PZ,aS),iL=ae(rL,aL,BZ),lL=(e,t)=>Gs(t.getClientRects()).bind(o=>cL(e,o.left,o.top)).bind(o=>Fb(j$(o),t)),MR=(e,t)=>hr(t.getClientRects()).bind(o=>iL(e,o.left,o.top)).bind(o=>Fb(Hb(o),t)),uL=(e,t,o)=>o.breakAt.exists(r=>e(t,r).breakAt.isSome()),$Z=e=>e.breakType===Wf.Wrap&&e.positions.length===0,dL=e=>e.breakType===Wf.Br&&e.positions.length===1,mL=(e,t,o)=>{const r=e(t,o);return $Z(r)||!js(o.getNode())&&dL(r)?!uL(e,t,r):r.breakAt.isNone()},IZ=ae(mL,Ma),LZ=ae(mL,Jx),PR=(e,t,o)=>{const r=Le.fromRangeStart(t);return m(!e,o).exists(c=>c.isEqual(r))},FZ=(e,t,o,r)=>{const c=e.selection.getRng(),u=t?1:-1;return Tv()&&PR(t,c,o)?(rh(u,e,o,!t,!1).each(f=>{Zf(e,f)}),!0):!1},HZ=(e,t,o)=>lL(t,o).orThunk(()=>Gs(o.getClientRects()).bind(r=>XD(eS(e,Le.before(t)),r.left))).getOr(Le.before(t)),F4=(e,t,o)=>MR(t,o).orThunk(()=>Gs(o.getClientRects()).bind(r=>XD(Mp(e,Le.after(t)),r.left))).getOr(Le.after(t)),fL=(e,t)=>{const o=t.getNode(e);return Zc(o)?M.some(o):M.none()},BR=(e,t,o)=>{t.undoManager.transact(()=>{const r=e?di:da,c=dZ(t,ne.fromDom(o),r);Zf(t,c)})},$R=(e,t,o)=>{const r=fL(!!t,o),c=t===!1;r.fold(()=>Zf(e,o.toRange()),u=>m(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Zf(e,o.toRange()),f=>BR(t,e,u)))},gL=(e,t,o,r)=>{const c=e.selection.getRng(),u=Le.fromRangeStart(c),f=e.getBody();if(!t&&IZ(r,u)){const b=HZ(f,o,u);return $R(e,t,b),!0}else if(t&&LZ(r,u)){const b=F4(f,o,u);return $R(e,t,b),!0}else return!1},IR=(e,t,o)=>M.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>M.from(e.dom.getParent(r,"table")).map(c=>o(e,t,c,r))).getOr(!1),hL=(e,t)=>IR(e,t,FZ),LR=(e,t)=>IR(e,t,gL),zZ=e=>{const t=uf.exact(e,0,e,0);return mf(t)},VZ=e=>xy(e)||Mo(e).some(t=>ml(t)&&xy(t)),cS=(e,t,o)=>o.fold(M.none,M.none,(r,c)=>hg(c).map(u=>zZ(u)),r=>e.mode.isReadOnly()||!UZ(r)||!VZ(r)?M.none():(e.execCommand("mceTableInsertRowAfter"),pL(e,t,r))),UZ=e=>Go(e,br("table")).exists(Ui),pL=(e,t,o)=>cS(e,t,EZ(o,xy)),jZ=(e,t,o)=>cS(e,t,TZ(o,xy)),xy=e=>Ui(e)||In(e,WZ),WZ=e=>ml(e)&&Ui(e),bL=(e,t)=>{const o=["table","li","dl"],r=ne.fromDom(e.getBody()),c=b=>{const v=jn(b);return no(b,r)||Wt(o,v)},u=e.selection.getRng(),f=ne.fromDom(t?u.endContainer:u.startContainer);return SZ(f,c).map(b=>(wZ(b,c).each(O=>{e.model.table.clearSelectedCells(O.dom)}),e.selection.collapse(!t),(t?pL:jZ)(e,c,b).each(O=>{e.selection.setRng(O)}),!0)).getOr(!1)},vL=(e,t,o)=>{const r=po.os.isMacOS()||po.os.isiOS(),c=po.browser.isFirefox();Bp([{keyCode:$t.RIGHT,action:_n(NI,e,!0)},{keyCode:$t.LEFT,action:_n(NI,e,!1)},{keyCode:$t.UP,action:_n(MI,e,!1)},{keyCode:$t.DOWN,action:_n(MI,e,!0)},...r?[{keyCode:$t.UP,action:_n(D4,e,!1),metaKey:!0,shiftKey:!0},{keyCode:$t.DOWN,action:_n(D4,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:$t.RIGHT,action:_n(hL,e,!0)},{keyCode:$t.LEFT,action:_n(hL,e,!1)},{keyCode:$t.UP,action:_n(LR,e,!1)},{keyCode:$t.DOWN,action:_n(LR,e,!0)},{keyCode:$t.UP,action:_n(LR,e,!1)},{keyCode:$t.UP,action:_n(xR,e,!1)},{keyCode:$t.DOWN,action:_n(xR,e,!0)},{keyCode:$t.RIGHT,action:_n(vy,e,!0)},{keyCode:$t.LEFT,action:_n(vy,e,!1)},{keyCode:$t.UP,action:_n(VI,e,!1)},{keyCode:$t.DOWN,action:_n(VI,e,!0)},{keyCode:$t.RIGHT,action:_n(uR,e,t,!0)},{keyCode:$t.LEFT,action:_n(uR,e,t,!1)},{keyCode:$t.RIGHT,ctrlKey:!r,altKey:r,action:_n(w4,e,t)},{keyCode:$t.LEFT,ctrlKey:!r,altKey:r,action:_n(BW,e,t)},{keyCode:$t.UP,action:_n(R4,e,!1)},{keyCode:$t.DOWN,action:_n(R4,e,!0)},...c?[{keyCode:$t.UP,action:_n(Gf,e,!1)},{keyCode:$t.DOWN,action:_n(Gf,e,!0)}]:[]],o).each(u=>{o.preventDefault()})},ZZ=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||vL(e,t,o)})},Wm=(e,t)=>({container:e,offset:t}),H4=mo.DOM,z4=e=>t=>e===t?-1:0,GZ=e=>t=>e.isBlock(t)||Wt(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",FR=(e,t,o)=>{if(dt(e)&&t>=0)return M.some(Wm(e,t));{const r=Ad(H4);return M.from(r.backwards(e,t,z4(e),o)).map(c=>Wm(c.container,c.container.data.length))}},HR=(e,t,o)=>{if(dt(e)&&t>=e.length)return M.some(Wm(e,t));{const r=Ad(H4);return M.from(r.forwards(e,t,z4(e),o)).map(c=>Wm(c.container,0))}},zR=(e,t,o)=>{if(!dt(e))return M.none();const r=e.data;if(t>=0&&t<=r.length)return M.some(Wm(e,t));{const c=Ad(H4);return M.from(c.backwards(e,t,z4(e),o)).bind(u=>{const f=u.container.data;return zR(u.container,t+f.length,o)})}},VR=(e,t,o)=>{if(!dt(e))return M.none();const r=e.data;if(t<=r.length)return M.some(Wm(e,t));{const c=Ad(H4);return M.from(c.forwards(e,t,z4(e),o)).bind(u=>VR(u.container,t-r.length,o))}},UR=(e,t,o,r,c)=>{const u=Ad(e,GZ(e));return M.from(u.backwards(t,o,r,c))},qZ=e=>e.collapsed&&dt(e.startContainer),KZ=e=>Xc(e.toString().replace(/\u00A0/g," ")),yL=e=>e!==""&&`  \uFEFF\f
\r	\v`.indexOf(e)!==-1,la=(e,t)=>e.substring(t.length),YZ=(e,t,o,r=!1)=>{let c;const u=o.charAt(0);for(c=t-1;c>=0;c--){const f=e.charAt(c);if(!r&&yL(f))return M.none();if(u===f&&Ds(e,o,c,t))break}return M.some(c)},jR=(e,t,o,r=!1)=>{if(!qZ(t))return M.none();const c={text:"",offset:0},u=(b,v,S)=>(c.text=S+c.text,c.offset+=v,YZ(c.text,c.offset,o,r).getOr(v)),f=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return UR(e,t.startContainer,t.startOffset,u,f).bind(b=>{const v=t.cloneRange();if(v.setStart(b.container,b.offset),v.setEnd(t.endContainer,t.endOffset),v.collapsed)return M.none();const S=KZ(v);return S.lastIndexOf(o)!==0?M.none():M.some({text:la(S,o),range:v,trigger:o})})},XZ=e=>e.nodeType===Qp,CL=e=>e.nodeType===ig,V4=e=>{if(XZ(e))return Wm(e,e.data.length);{const t=e.childNodes;return t.length>0?V4(t[t.length-1]):Wm(e,t.length)}},WR=(e,t)=>{const o=e.childNodes;return o.length>0&&t<o.length?WR(o[t],0):o.length>0&&CL(e)&&o.length===t?V4(o[o.length-1]):Wm(e,t)},iS=(e,t)=>{const o=e.getParent(t.container,e.isBlock)??e.getRoot();return UR(e,t.container,t.offset,(r,c)=>c===0?-1:c,o).filter(r=>{const c=r.container.data.charAt(r.offset-1);return!yL(c)}).isSome()},QZ=e=>t=>{const o=WR(t.startContainer,t.startOffset);return!iS(e,o)},JZ=(e,t,o)=>dc(o.triggers,r=>jR(e,t,r)),eG=(e,t)=>{const o=t(),r=e.selection.getRng();return JZ(e.dom,r,o).bind(c=>xL(e,t,c))},xL=(e,t,o,r={})=>{const c=t(),f=e.selection.getRng().startContainer.nodeValue??"",b=Xe(c.lookupByTrigger(o.trigger),S=>o.text.length>=S.minChars&&S.matches.getOrThunk(()=>QZ(e.dom))(o.range,f,o.text));if(b.length===0)return M.none();const v=Promise.all(hn(b,S=>S.fetch(o.text,S.maxResults,r).then(R=>({matchText:o.text,items:R,columns:S.columns,onAction:S.onAction,highlightOn:S.highlightOn}))));return M.some({lookupData:v,context:o})},tG=rC("type"),nG=Nw("fetch"),oG=Nw("onAction"),sG=e=>cp("columns",e),rG=Rc([tG,rC("trigger"),T3("minChars",1),sG(1),T3("maxResults",10),m5("matches"),nG,oG,k3("highlightOn",[],tC)]),aG=e=>ap("Autocompleter",rG,e),cG=()=>{const e={},t={},o={},r={},c={},u={},f={},b={},v={},S=(z,ee)=>(W,J)=>{z[W.toLowerCase()]={...J,type:ee}},O=(z,ee)=>(W,J)=>{z[W.toLowerCase()]={type:ee,...J}},R=(z,ee)=>r[z.toLowerCase()]=ee,P=(z,ee)=>f[z.toLowerCase()]=ee;return{addButton:S(e,"button"),addGroupToolbarButton:S(e,"grouptoolbarbutton"),addToggleButton:S(e,"togglebutton"),addMenuButton:S(e,"menubutton"),addSplitButton:S(e,"splitbutton"),addMenuItem:S(t,"menuitem"),addNestedMenuItem:S(t,"nestedmenuitem"),addToggleMenuItem:S(t,"togglemenuitem"),addAutocompleter:S(o,"autocompleter"),addContextMenu:S(c,"contextmenu"),addContextToolbar:S(u,"contexttoolbar"),addContextForm:O(u,"contextform"),addSidebar:S(b,"sidebar"),addView:S(v,"views"),addIcon:R,addContext:P,getAll:()=>({buttons:e,menuItems:t,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:b,views:v,contexts:f})}},iG=e=>{const t=e.ui.registry.getAll().popups,o=mc(t,f=>aG(f).fold(b=>{throw new Error(Rd(b))},Ro)),r=Ym(fc(o,f=>f.trigger)),c=La(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Xe(c,b=>b.trigger===f)}},lG=(e,t)=>{const o=al(t.load,50);e.on("input",r=>{r.inputType==="insertCompositionText"&&!e.composing||o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27?(o.cancel(),t.cancelIfNecessary()):(c===38||c===40)&&o.cancel()},!0),e.on("remove",o.cancel)},uG=e=>{const t=Ic(),o=rn(!1),r=t.isSet,c=()=>{r()&&(Of(e),o.set(!1),t.clear())},u=R=>{r()||t.set({trigger:R.trigger,matchLength:R.text.length})},f=ya(()=>iG(e)),b=R=>t.get().map(P=>jR(e.dom,e.selection.getRng(),P.trigger,!0).bind(z=>xL(e,f,z,R))).getOrThunk(()=>eG(e,f)),v=R=>{b(R).fold(c,P=>{u(P.context),P.lookupData.then(z=>{t.get().map(ee=>{const W=P.context;ee.trigger===W.trigger&&(t.set({...ee,matchLength:W.text.length}),o.get()?(dC(e,{range:W.range}),G1(e,{lookupData:z})):(o.set(!0),dC(e,{range:W.range}),Z1(e,{lookupData:z})))})})})},S=(R,P)=>{const z=R.compareBoundaryPoints(window.Range.START_TO_START,P),ee=R.compareBoundaryPoints(window.Range.END_TO_END,P);return z>=0&&ee<=0},O=()=>t.get().bind(({trigger:R})=>{const P=e.selection.getRng();return jR(e.dom,P,R,o.get()).filter(({range:z})=>S(P,z)).map(({range:z})=>z)});e.addCommand("mceAutocompleterReload",(R,P)=>{const z=Ye(P)?P.fetchOptions:{};v(z)}),e.addCommand("mceAutocompleterClose",c),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{O().each(R=>{dC(e,{range:R})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>O().isSome()),lG(e,{cancelIfNecessary:c,load:v})},SL=Ul().browser.isSafari(),ZR=e=>xf(ne.fromDom(e)),wL=(e,t)=>e.startOffset===0&&e.endOffset===t.textContent?.length,U4=(e,t)=>M.from(e.getParent(t.container(),"details")),EL=(e,t)=>U4(e,t).isSome(),mG=(e,t)=>{const o=M.from(e.getParent(t.startContainer,"details")),r=M.from(e.getParent(t.endContainer,"details"));if(o.isSome()||r.isSome()){const c=o.bind(u=>M.from(e.select("summary",u)[0]));return M.some({startSummary:c,startDetails:o,endDetails:r})}else return M.none()},TL=(e,t)=>E(t).exists(o=>o.isEqual(e)),fG=(e,t)=>D(t).exists(o=>js(o.getNode())&&y(t,o).exists(r=>r.isEqual(e))||o.isEqual(e)),kL=(e,t)=>t.startSummary.exists(o=>TL(e,o)),gG=(e,t)=>t.startSummary.exists(o=>fG(e,o)),AL=(e,t)=>t.startDetails.exists(o=>y(o,e).forall(r=>t.startSummary.exists(c=>!c.contains(e.container())&&c.contains(r.container())))),_L=(e,t,o)=>o.startDetails.exists(r=>p(e,t).forall(c=>!r.contains(c.container()))),OL=(e,t)=>{const o=t.getNode();Wn(o)||e.selection.setCursorLocation(o,t.offset())},DL=(e,t,o)=>{const r=e.dom.getParent(t.container(),"details");if(r&&!r.open){const c=e.dom.select("summary",r)[0];c&&(o?E(c):D(c)).each(f=>OL(e,f))}else OL(e,t)},hG=(e,t)=>{const o=v=>v.contains(e.startContainer),r=v=>v.contains(e.endContainer),c=t.startSummary.exists(o),u=t.startSummary.exists(r),f=t.startDetails.forall(v=>t.endDetails.forall(S=>v!==S));return(c||u)&&!(c&&u)||f},RL=(e,t,o)=>{const{dom:r,selection:c}=e,u=e.getBody();if(o==="character"){const f=Le.fromRangeStart(c.getRng()),b=r.getParent(f.container(),r.isBlock),v=U4(r,f),S=b&&r.isEmpty(b),O=se(b?.previousSibling),R=se(b?.nextSibling);return S&&(t?R:O)&&hp(!t,u,f).exists(ee=>EL(r,ee)&&!dd(v,U4(r,ee)))?!0:hp(t,u,f).fold(pe,P=>{const z=U4(r,P);if(EL(r,P)&&!dd(v,z)){if(t||DL(e,P,!1),b&&S){if(t&&O)return!0;if(!t&&R)return!0;DL(e,P,t),e.dom.remove(b)}return!0}else return!1})}else return!1},NL=(e,t,o,r)=>{const u=e.selection.getRng(),f=Le.fromRangeStart(u),b=e.getBody();return r==="selection"?hG(u,t):o?gG(f,t)||_L(b,f,t):kL(f,t)||AL(f,t)},pG=(e,t,o)=>mG(e.dom,e.selection.getRng()).fold(()=>RL(e,t,o),r=>NL(e,r,t,o)||RL(e,t,o)),bG=(e,t,o)=>{const r=e.selection,c=r.getNode(),u=r.getRng(),f=Le.fromRangeStart(u);return Gk(c)?(o==="selection"&&wL(u,c)||WM(t,f,c)?ZR(c):e.undoManager.transact(()=>{const b=r.getSel();let{anchorNode:v,anchorOffset:S,focusNode:O,focusOffset:R}=b??{};const P=()=>{X(v)&&X(S)&&X(O)&&X(R)&&b?.setBaseAndExtent(v,S,O,R)},z=()=>{v=b?.anchorNode,S=b?.anchorOffset,O=b?.focusNode,R=b?.focusOffset},ee=(J,be)=>{Ae(J.childNodes,ye=>{GC(ye)&&be.appendChild(ye)})},W=e.dom.create("span",{"data-mce-bogus":"1"});ee(c,W),c.appendChild(W),P(),(o==="word"||o==="line")&&b?.modify("extend",t?"right":"left",o),!r.isCollapsed()&&wL(r.getRng(),W)?ZR(c):(e.execCommand(t?"ForwardDelete":"Delete"),z(),ee(W,c),P()),e.dom.remove(W)}),!0):!1},Ip=(e,t,o)=>pG(e,t,o)||SL&&bG(e,t,o)?M.some(_t):M.none(),ML=e=>(t,o,r={})=>{const c=t.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:_t,inputType:o},f=_2(new InputEvent(e));return t.dispatch(e,{...f,...u,...r})},lS=ML("input"),uS=ML("beforeinput"),PL=Ul(),BL=PL.os,$L=BL.isMacOS()||BL.isiOS(),IL=PL.browser.isFirefox(),yG=(e,t,o)=>{const r=o.keyCode===$t.BACKSPACE?"deleteContentBackward":"deleteContentForward",c=e.selection.isCollapsed(),u=c?"character":"selection",f=b=>c?b?"word":"line":"selection";M4([{keyCode:$t.BACKSPACE,action:_n(ki,e)},{keyCode:$t.BACKSPACE,action:_n(d4,e,!1)},{keyCode:$t.DELETE,action:_n(d4,e,!0)},{keyCode:$t.BACKSPACE,action:_n(u4,e,!1)},{keyCode:$t.DELETE,action:_n(u4,e,!0)},{keyCode:$t.BACKSPACE,action:_n(dR,e,t,!1)},{keyCode:$t.DELETE,action:_n(dR,e,t,!0)},{keyCode:$t.BACKSPACE,action:_n(u_,e,!1)},{keyCode:$t.DELETE,action:_n(u_,e,!0)},{keyCode:$t.BACKSPACE,action:_n(Ip,e,!1,u)},{keyCode:$t.DELETE,action:_n(Ip,e,!0,u)},...$L?[{keyCode:$t.BACKSPACE,altKey:!0,action:_n(Ip,e,!1,f(!0))},{keyCode:$t.DELETE,altKey:!0,action:_n(Ip,e,!0,f(!0))},{keyCode:$t.BACKSPACE,metaKey:!0,action:_n(Ip,e,!1,f(!1))}]:[{keyCode:$t.BACKSPACE,ctrlKey:!0,action:_n(Ip,e,!1,f(!0))},{keyCode:$t.DELETE,ctrlKey:!0,action:_n(Ip,e,!0,f(!0))}],{keyCode:$t.BACKSPACE,action:_n(f4,e,!1)},{keyCode:$t.DELETE,action:_n(f4,e,!0)},{keyCode:$t.BACKSPACE,action:_n(E4,e,!1)},{keyCode:$t.DELETE,action:_n(E4,e,!0)},{keyCode:$t.BACKSPACE,action:_n(wr,e,!1)},{keyCode:$t.DELETE,action:_n(wr,e,!0)},{keyCode:$t.BACKSPACE,action:_n($b,e,!1)},{keyCode:$t.DELETE,action:_n($b,e,!0)},{keyCode:$t.BACKSPACE,action:_n(gR,e,!1)},{keyCode:$t.DELETE,action:_n(gR,e,!0)},{keyCode:$t.BACKSPACE,action:_n(m4,e,!1)},{keyCode:$t.DELETE,action:_n(m4,e,!0)},{keyCode:$t.BACKSPACE,action:_n(zb,e,!1)},{keyCode:$t.DELETE,action:_n(zb,e,!0)}],o).filter(b=>e.selection.isEditable()).each(b=>{o.preventDefault(),uS(e,r).isDefaultPrevented()||(b(),lS(e,r))})},CG=(e,t,o,r)=>Bp([{keyCode:$t.BACKSPACE,action:_n(HD,e)},{keyCode:$t.DELETE,action:_n(HD,e)},...$L?[{keyCode:$t.BACKSPACE,altKey:!0,action:_n(tS,e)},{keyCode:$t.DELETE,altKey:!0,action:_n(tS,e)},...o?[{keyCode:IL?224:91,action:_n(()=>(mI(e,r),tS(e)))}]:[]]:[{keyCode:$t.BACKSPACE,ctrlKey:!0,action:_n(tS,e)},{keyCode:$t.DELETE,ctrlKey:!0,action:_n(tS,e)}]],t),xG=(e,t)=>{let o=!1,r=[];e.on("keydown",c=>{o=c.keyCode===$t.BACKSPACE,r=mR(e),c.isDefaultPrevented()||yG(e,t,c)}),e.on("keyup",c=>{c.isDefaultPrevented()||(CG(e,c,o,r),r.length=0),o=!1})},SG=(e,t)=>{const o=ne.fromDom(e),r=ne.fromDom(t),c=br("span"),u=ae(no,o),f=v=>Hs(v)&&ir(v,"font-size").isSome(),b=[...f(r)?[r]:[],...k(r,f,u)];Ae(b.slice(1),v=>{xh(v,"font-size"),cr(v,"data-mce-style"),c(v)&&tf(v)&&yc(v)})},wG=e=>{for(;e;){if(kt(e)||dt(e)&&e.data&&/[\r\n\s]/.test(e.data))return M.from(ne.fromDom(e));e=e.nextSibling}return M.none()},Sy=(e,t)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const u=v=>/^(ul|ol|dl)$/.test(jn(v)),f=v=>u(v)?M.from(v):af(v,u),b=v=>o.isEmpty(v.dom);wG(t.firstChild).each(v=>{f(v).fold(()=>{if(b(v)){const S=$p(v,0).element;Hs(S)&&!ou(S)&&yo(S,ne.fromText(Fs))}},S=>{da(S,ne.fromText(Fs))})})}const c=o.createRng();if(t.normalize(),t.hasChildNodes()){const u=new nr(t,t);let f=t,b;for(;b=u.current();){if(dt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else js(t)?t.nextSibling&&o.isBlock(t.nextSibling)?(c.setStartBefore(t),c.setEndBefore(t)):(c.setStartAfter(t),c.setEndAfter(t)):(c.setStart(t,0),c.setEnd(t,0));e.selection.setRng(c),du(e,c)},dS=(e,t)=>{const o=e.getRoot();let r,c=t;for(;c!==o&&c&&e.getContentEditable(c)!=="false";){if(e.getContentEditable(c)==="true"){r=c;break}c=c.parentNode}return c!==o?r:o},GR=e=>M.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),QQ=e=>GR(e).fold(it(""),t=>t.nodeName.toUpperCase()),EG=e=>GR(e).filter(t=>_c(ne.fromDom(t))).isSome(),wy=e=>{e.innerHTML='<br data-mce-bogus="1">'},LL=(e,t,o)=>{const r=e.dom;M.from(o.style).map(r.parseStyle).each(v=>{const O={...sf(ne.fromDom(t)),...v};r.setStyles(t,O)});const c=M.from(o.class).map(v=>v.split(/\s+/)),u=M.from(t.className).map(v=>Xe(v.split(/\s+/),S=>S!==""));er(c,u,(v,S)=>{const O=Xe(S,P=>!Wt(v,P)),R=[...v,...O];r.setAttrib(t,"class",R.join(" "))});const f=["style","class"],b=Il(o,(v,S)=>!Wt(f,S));r.setAttribs(t,b)},Ey=(e,t)=>{if(Rr(e).toLowerCase()===t.tagName.toLowerCase()){const r=iu(e);LL(e,t,r)}},FL=(e,t,o,r,c=!0,u,f)=>{const b=e.dom,v=e.schema,S=Rr(e),O=o?o.nodeName.toUpperCase():"";let R=t;const P=v.getTextInlineElements();let z;u||O==="TABLE"||O==="HR"?z=b.create(u||S,f||{}):z=o.cloneNode(!1);let ee=z;if(!c)b.setAttrib(z,"style",null),b.setAttrib(z,"class",null);else{do if(P[R.nodeName]){if(U(R)||Js(R))continue;const W=R.cloneNode(!1);b.setAttrib(W,"id",""),z.hasChildNodes()?(W.appendChild(z.firstChild),z.appendChild(W)):(ee=W,z.appendChild(W))}while((R=R.parentNode)&&R!==r);z.nodeName!=="LI"&&SG(z,ee)}return Ey(e,z),wy(ee),z},HL=(e,t)=>e.dom.getParent(t,p1),zL=(e,t,o)=>{let r=t;for(;r&&r!==e&&se(r.nextSibling);){const c=r.parentElement;if(!c||!o(c))return p1(c);r=c}return!1},TG=(e,t,o)=>!t&&o.nodeName.toLowerCase()===Rr(e)&&e.dom.isEmpty(o)&&zL(e.getBody(),o,r=>Pn(e.schema.getTextBlockElements(),r.nodeName.toLowerCase())),kG=(e,t,o)=>{const r=t(Rr(e)),c=HL(e,o);c&&(e.dom.insertAfter(r,c),Sy(e,r),(o.parentElement?.childNodes?.length??0)>1&&e.dom.remove(o))},AG=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,VL=e=>e.parentNode?.firstChild===e,UL=(e,t)=>{const o=e?.parentNode;return X(o)&&o.nodeName===t},j4=e=>X(e)&&/^(OL|UL|LI)$/.test(e.nodeName),qR=e=>X(e)&&/^(LI|DT|DD)$/.test(e.nodeName),_G=e=>j4(e)&&j4(e.parentNode),W4=e=>{const t=e.parentNode;return qR(t)?t:e},mS=(e,t,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!kt(r);)r=r[o?"nextSibling":"previousSibling"];return r===t},jL=e=>Ho(fc(sf(ne.fromDom(e)),(t,o)=>`${o}: ${t};`),(t,o)=>t+o,""),OG=(e,t,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;_G(o)&&(c="LI");const v=qR(r)?jL(r):void 0;let S=qR(r)&&v?t(c,{style:jL(r)}):t(c);if(mS(o,r,!0)&&mS(o,r,!1))if(UL(o,"LI")){const O=W4(o);u.insertAfter(S,O),VL(o)?u.remove(O):u.remove(o)}else u.replace(S,o);else if(mS(o,r,!0))UL(o,"LI")?(u.insertAfter(S,W4(o)),S.appendChild(u.doc.createTextNode(" ")),S.appendChild(o)):b.insertBefore(S,o),u.remove(r);else if(mS(o,r,!1))u.insertAfter(S,W4(o)),u.remove(r);else{o=W4(o);const O=f.cloneRange();O.setStartAfter(r),O.setEndAfter(o);const R=O.extractContents();if(c==="LI"&&AG(R,"LI")){const P=Xe(hn(S.children,ne.fromDom),tt(br("br")));S=R.firstChild,u.insertAfter(R,o),Ae(P,z=>Gl(ne.fromDom(S),z)),v&&S.setAttribute("style",v)}else u.insertAfter(R,o),u.insertAfter(S,o);u.remove(r)}Sy(e,S)},DG=e=>{Ae(q(ne.fromDom(e),Ao),t=>{const o=t.dom;o.nodeValue=Xc(o.data)})},RG=(e,t)=>{const o=e.dom.getParent(t,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},JQ=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),KR=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,NG=(e,t)=>e.nodeName===t||e.nextSibling&&e.nextSibling.nodeName===t,YR=(e,t)=>X(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",MG=(e,t,o)=>{const r=[];if(!o)return;let c=o;for(;c=c.firstChild;){if(e.isBlock(c))return;kt(c)&&!t[c.nodeName.toLowerCase()]&&r.push(c)}let u=r.length;for(;u--;)c=r[u],(!c.hasChildNodes()||c.firstChild===c.lastChild&&c.firstChild?.nodeValue===""||JQ(e,c))&&e.remove(c)},XR=(e,t,o)=>dt(t)?e?o===1&&t.data.charAt(o-1)===Gr?0:o:o===t.data.length-1&&t.data.charAt(o)===Gr?t.data.length:o:o,WL=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,XR(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,XR(!1,e.endContainer,e.endOffset)),t},PG=e=>{let t=e;do dt(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},QR=(e,t,o,r,c)=>{const u=e.dom,f=dS(u,r)??u.getRoot();let b=u.getParent(r,u.isBlock);if(!b||!YR(u,b)){if(b=b||f,!b.hasChildNodes()){const R=u.create(t);return Ey(e,R),b.appendChild(R),o.setStart(R,0),o.setEnd(R,0),R}let v=r;for(;v&&v.parentNode!==b;)v=v.parentNode;let S;for(;v&&!u.isBlock(v);)S=v,v=v.previousSibling;const O=S?.parentElement?.nodeName;if(S&&O&&e.schema.isValidChild(O,t.toLowerCase())){const R=S.parentNode,P=u.create(t);for(Ey(e,P),R.insertBefore(P,S),v=S;v&&!u.isBlock(v);){const z=v.nextSibling;P.appendChild(v),v=z}o.setStart(r,c),o.setEnd(r,c)}}return r},Kf=(e,t)=>{t.normalize();const o=t.lastChild;(!o||kt(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(t,"br")},ZL=(e,t)=>{const o=dv(e);return Yt(t)?!1:V(o)?Wt(lt.explode(o),t.nodeName.toLowerCase()):o},fS={insert:(e,t)=>{let o,r,c,u,f=!1;const b=e.dom,v=e.schema,S=v.getNonEmptyElements(),O=e.selection.getRng(),R=Rr(e),P=ne.fromDom(O.startContainer),z=Fi(P,O.startOffset),ee=z.exists(Ue=>ml(Ue)&&!Ui(Ue)),W=O.collapsed&&ee,J=(Ue,Nt)=>FL(e,o,Pt,et,Xw(e),Ue,Nt),be=Ue=>{const Nt=XR(Ue,o,r);if(dt(o)&&(Ue?Nt>0:Nt<o.data.length))return!1;if((o.parentNode===Pt||o===Pt)&&f&&!Ue||Ue&&kt(o)&&o===Pt.firstChild)return!0;if(KR(o,"TABLE")||KR(o,"HR"))return NG(o,"BR")?!Ue:f&&!Ue||!f&&Ue;const Dn=new nr(o,Pt);dt(o)&&(Ue&&Nt===0?Dn.prev():!Ue&&Nt===o.data.length&&Dn.next());let Rn;for(;Rn=Dn.current();){if(kt(Rn)){if(!Rn.getAttribute("data-mce-bogus")){const go=Rn.nodeName.toLowerCase();if(S[go]&&go!=="br")return!1}}else if(dt(Rn)&&!Oh(Rn.data))return!1;Ue?Dn.prev():Dn.next()}return!0},ye=()=>{let Ue;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&un!=="HGROUP"?Ue=J(R):Ue=J(),ZL(e,u)&&YR(b,u)&&b.isEmpty(Pt,void 0,{includeZwsp:!0})?Ue=b.split(u,Pt):b.insertAfter(Ue,Pt),Sy(e,Ue),Ue};ZE(b,O).each(Ue=>{O.setStart(Ue.startContainer,Ue.startOffset),O.setEnd(Ue.endContainer,Ue.endOffset)}),o=O.startContainer,r=O.startOffset;const Se=!!(t&&t.shiftKey),Ve=!!(t&&t.ctrlKey);kt(o)&&o.hasChildNodes()&&!W&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&dt(o)?r=o.data.length:r=0);const et=dS(b,o);if(!et||RG(e,o))return;Se||(o=QR(e,R,O,o,r));let Pt=b.getParent(o,b.isBlock)||b.getRoot();u=X(Pt?.parentNode)?b.getParent(Pt.parentNode,b.isBlock):null,c=Pt?Pt.nodeName.toUpperCase():"";const un=u?u.nodeName.toUpperCase():"";if(un==="LI"&&!Ve){const Ue=u;Pt=Ue,u=Ue.parentNode,c=un}if(kt(u)&&TG(e,Se,Pt))return kG(e,J,Pt);if(/^(LI|DT|DD)$/.test(c)&&kt(u)&&b.isEmpty(Pt)){OG(e,J,u,Pt,R);return}if(!W&&(Pt===e.getBody()||!YR(b,Pt)))return;const He=Pt.parentNode;let Me;if(W)Me=J(R),z.fold(()=>{yo(P,ne.fromDom(Me))},Ue=>{da(Ue,ne.fromDom(Me))}),e.selection.setCursorLocation(Me,0);else if(vm(Pt))Me=su(Pt),b.isEmpty(Pt)&&wy(Pt),Ey(e,Me),Sy(e,Me);else if(be(!1))Me=ye();else if(be(!0)&&He){const Ue=Le.fromRangeStart(O),Nt=WA(Ue),Dn=ne.fromDom(Pt),go=oT(Dn,Ue,e.schema)?TM(Dn,Ue,e.schema).bind(Ss=>M.from(Ss.getNode())):M.none();Me=He.insertBefore(J(),Pt);const Yo=KR(Pt,"HR")||Nt?Me:go.getOr(Pt);Sy(e,Yo)}else{const Ue=WL(O).cloneRange();Ue.setEndAfter(Pt);const Nt=Ue.extractContents();DG(Nt),PG(Nt),Me=Nt.firstChild,Pt===Me?X(He)&&b.insertAfter(Nt,He):b.insertAfter(Nt,Pt),MG(b,S,Me),Kf(b,Pt),b.isEmpty(Pt)&&wy(Pt),Me.normalize(),b.isEmpty(Me)?(b.remove(Me),ye()):(Ey(e,Me),Sy(e,Me))}b.setAttrib(Me,"id",""),e.dispatch("NewBlock",{newBlock:Me})},fakeEventName:"insertParagraph"},JR=(e,t,o)=>{const r=new nr(t,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||dt(c)&&c.length>0)return!0;return!1},eN=(e,t,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(t),r.setEndBefore(t)):(r.setStartAfter(t),r.setEndAfter(t)),e.selection.setRng(r),du(e,r)},GL=(e,t)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;ZE(r,c).each(z=>{c.setStart(z.startContainer,z.startOffset),c.setEnd(z.endContainer,z.endOffset)});let b=c.startOffset,v=c.startContainer;if(kt(v)&&v.hasChildNodes()){const z=b>v.childNodes.length-1;v=v.childNodes[Math.min(b,v.childNodes.length-1)]||v,z&&dt(v)?b=v.data.length:b=0}let S=r.getParent(v,r.isBlock);const O=S&&S.parentNode?r.getParent(S.parentNode,r.isBlock):null,R=O?O.nodeName.toUpperCase():"",P=!!(t&&t.ctrlKey);R==="LI"&&!P&&(S=O),dt(v)&&b>=v.data.length&&(JR(e.schema,v,S||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),Qh(r,c,u),eN(e,u,f),e.undoManager.add()},$G=(e,t)=>{const o=ne.fromTag("br");da(ne.fromDom(t),o),e.undoManager.add()},IG=(e,t)=>{FG(e.getBody(),t)||di(ne.fromDom(t),ne.fromTag("br"));const o=ne.fromTag("br");di(ne.fromDom(t),o),eN(e,o.dom,!1),e.undoManager.add()},LG=e=>js(e.getNode()),FG=(e,t)=>LG(Le.after(t))?!0:p(e,Le.after(t)).map(o=>js(o.getNode())).getOr(!1),qL=e=>e&&e.nodeName==="A"&&"href"in e,KL=e=>e.fold(pe,qL,qL,pe),HG=e=>{const t=ae(hb,e),o=Le.fromRangeStart(e.selection.getRng());return jm(t,e.getBody(),o).filter(KL)},zG=(e,t)=>{t.fold(_t,ae($G,e),ae(IG,e),_t)},XL={insert:(e,t)=>{const o=HG(e);o.isSome()?o.each(ae(zG,e)):GL(e,t)},fakeEventName:"insertLineBreak"},QL=(e,t)=>GR(e).filter(o=>t.length>0&&zc(ne.fromDom(o),t)).isSome(),VG=e=>QL(e,Kw(e)),UG=e=>QL(e,Yw(e)),bu=si.generate([{br:[]},{block:[]},{none:[]}]),jG=(e,t)=>UG(e),JL=e=>(t,o)=>EG(t)===e,eF=(e,t)=>(o,r)=>QQ(o)===e.toUpperCase()===t,Z4=e=>{const t=dS(e.dom,e.selection.getStart());return Yt(t)},gS=e=>eF("pre",e),WG=()=>eF("summary",!0),Ty=e=>(t,o)=>lv(t)===e,tN=(e,t)=>VG(e),G4=(e,t)=>t,ZG=e=>{const t=Rr(e),o=dS(e.dom,e.selection.getStart());return X(o)&&e.schema.isValidChild(o.nodeName,t)},tF=e=>{const t=e.selection.getRng(),o=ne.fromDom(t.startContainer),c=Fi(o,t.startOffset).map(u=>ml(u)&&!Ui(u));return t.collapsed&&c.getOr(!0)},sd=(e,t)=>(o,r)=>Ho(e,(u,f)=>u&&f(o,r),!0)?M.some(t):M.none(),GG=(e,t)=>B$([sd([jG],bu.none()),sd([gS(!0),Z4],bu.none()),sd([WG()],bu.br()),sd([gS(!0),Ty(!1),G4],bu.br()),sd([gS(!0),Ty(!1)],bu.block()),sd([gS(!0),Ty(!0),G4],bu.block()),sd([gS(!0),Ty(!0)],bu.br()),sd([JL(!0),G4],bu.br()),sd([JL(!0)],bu.block()),sd([tN],bu.br()),sd([G4],bu.br()),sd([ZG],bu.block()),sd([tF],bu.block())],[e,!!(t&&t.shiftKey)]).getOr(bu.none()),q4=(e,t,o)=>{t.mode.isReadOnly()||(t.selection.isCollapsed()||UM(t),!(X(o)&&uS(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,o),X(o)&&lS(t,e.fakeEventName)))},nF=(e,t)=>{if(e.mode.isReadOnly())return;const o=()=>q4(XL,e,t),r=()=>q4(fS,e,t),c=GG(e,t);switch(uv(e)){case"linebreak":c.fold(o,o,_t);break;case"block":c.fold(r,r,_t);break;case"invert":c.fold(r,o,_t);break;default:c.fold(o,r,_t);break}},oF=Ul(),qG=oF.os.isiOS()&&oF.browser.isSafari(),nN=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),c6(e.undoManager),e.undoManager.transact(()=>{nF(e,t)}))},K4=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(dt(t)){const o=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,r=t.data.charAt(e.startOffset-1);return o.test(r)}else return!1},sF=e=>{let t=M.none();const o=c=>{t=M.some(c.selection.getBookmark()),c.undoManager.add()},r=(c,u)=>{c.undoManager.undo(),t.fold(_t,f=>c.selection.moveToBookmark(f)),nN(c,u),t=M.none()};e.on("keydown",c=>{c.keyCode===$t.ENTER&&(qG&&K4(e.selection.getRng())?o(e):nN(e,c))}),e.on("keyup",c=>{c.keyCode===$t.ENTER&&t.each(()=>r(e,c))})},rF=(e,t,o)=>{const r=po.os.isMacOS()||po.os.isiOS();Bp([{keyCode:$t.END,action:_n(PI,e,!0)},{keyCode:$t.HOME,action:_n(PI,e,!1)},...r?[]:[{keyCode:$t.HOME,action:_n(D4,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:$t.END,action:_n(D4,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:$t.END,action:_n(wR,e,!0)},{keyCode:$t.HOME,action:_n(wR,e,!1)},{keyCode:$t.END,action:_n(Pp,e,!0,t)},{keyCode:$t.HOME,action:_n(Pp,e,!1,t)}],o).each(c=>{o.preventDefault()})},KG=(e,t)=>{e.on("keydown",o=>{o.isDefaultPrevented()||rF(e,t,o)})},YG=e=>{e.on("input",t=>{t.isComposing||PM(e)})},Y4=Ul(),XG=(e,t,o)=>{Bp([{keyCode:$t.PAGE_UP,action:_n(Pp,e,!1,t)},{keyCode:$t.PAGE_DOWN,action:_n(Pp,e,!0,t)}],o)},oN=e=>e.stopImmediatePropagation(),aF=e=>e.keyCode===$t.PAGE_UP||e.keyCode===$t.PAGE_DOWN,sN=(e,t,o)=>{o&&!e.get()?t.on("NodeChange",oN,!0):!o&&e.get()&&t.off("NodeChange",oN),e.set(o)},QG=(e,t)=>{if(Y4.os.isMacOS())return;const o=rn(!1);e.on("keydown",r=>{aF(r)&&sN(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||XG(e,t,r),aF(r)&&o.get()&&(sN(o,e,!1),e.nodeChanged())})},cF=(e,t)=>e===t||e.contains(t),JG=(e,t)=>!cF(e.getBody(),t.startContainer)||!cF(e.getBody(),t.endContainer)?!0:TH(e.dom,t),eq=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||io(t.getTargetRanges(),o=>!JG(e,o)))&&t.preventDefault()})},iF=(e,t)=>{const o=t.container(),r=t.offset();return dt(o)?(o.insertData(r,e),M.some(Le(o,r+e.length))):lb(t).map(c=>{const u=ne.fromText(e);return t.isAtEnd()?di(c,u):da(c,u),Le(u.dom,e.length)})},jb=ae(iF,Fs),lF=ae(iF," "),tq=(e,t,o)=>YH(e,t,o)?jb(t):lF(t),uF=e=>t=>t.fold(o=>y(e.dom,Le.before(o)),o=>E(o),o=>D(o),o=>p(e.dom,Le.after(o))),nq=(e,t,o)=>r=>YH(e,r,o)?jb(t):lF(t),dF=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},oq=(e,t)=>e.isEditable(e.getParent(t,"summary")),mF=e=>{const t=Le.fromRangeStart(e.selection.getRng()),o=ne.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=ae(hb,e),c=Le.fromRangeStart(e.selection.getRng());return jm(r,e.getBody(),c).bind(uF(o)).map(u=>()=>nq(o,t,e.schema)(u).each(dF(e)))}else return M.none()},sq=e=>{const t=()=>{const o=ne.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const r=Le.fromRangeStart(e.selection.getRng());tq(o,r,e.schema).each(dF(e))};return Ha(po.browser.isFirefox()&&e.selection.isEditable()&&oq(e.dom,e.selection.getRng().startContainer),t)},rq=(e,t)=>{M4([{keyCode:$t.SPACEBAR,action:_n(mF,e)},{keyCode:$t.SPACEBAR,action:_n(sq,e)}],t).each(o=>{t.preventDefault(),uS(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),lS(e,"insertText",{data:" "}))})},tJ=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||rq(e,t)})},X4=e=>gE(e)?[{keyCode:$t.TAB,action:_n(bL,e,!0)},{keyCode:$t.TAB,shiftKey:!0,action:_n(bL,e,!1)}]:[],aq=(e,t)=>{Bp([...X4(e)],t).each(o=>{t.preventDefault()})},cq=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||aq(e,t)})},iq=e=>{if(e.addShortcut("Meta+P","","mcePrint"),uG(e),Lm(e))return rn(null);{const t=PW(e);return eq(e),AI(e),ZZ(e,t),xG(e,t),sF(e),tJ(e),YG(e),cq(e),KG(e,t),QG(e,t),t}},lq=(e,t)=>{const o=jx(e);o===null||gD(e,o)||e.undoManager.transact(()=>{Ye(t.styles)&&e.dom.setStyles(o,t.styles),Ye(t.attrs)&&qn(t.attrs,(r,c)=>e.dom.setAttrib(o,c,r))})},rN=(e,t)=>()=>{const o=jx(e);return X(o)&&o.nodeName===t},uq=e=>{e.addCommand("InsertUnorderedList",(t,o)=>{kD(e,"UL",o)}),e.addCommand("InsertOrderedList",(t,o)=>{kD(e,"OL",o)}),e.addCommand("InsertDefinitionList",(t,o)=>{kD(e,"DL",o)}),e.addCommand("RemoveList",()=>{r4(e)}),e.addCommand("mceListUpdate",(t,o)=>{Ye(o)&&lq(e,o)}),e.addCommand("mceListBackspaceDelete",(t,o)=>{OD(e,o)}),e.addQueryStateHandler("InsertUnorderedList",rN(e,"UL")),e.addQueryStateHandler("InsertOrderedList",rN(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",rN(e,"DL"))},dq=e=>{e.on("keydown",t=>{t.keyCode===$t.BACKSPACE?OD(e,!1)&&t.preventDefault():t.keyCode===$t.DELETE&&OD(e,!0)&&t.preventDefault()})},fF=e=>e.type===3,gF=e=>e.length===0,mq=e=>{const t=(c,u)=>{const f=Na.create("li");Ae(c,b=>f.append(b)),u?e.insert(f,u,!0):e.append(f)},o=(c,u)=>fF(u)?[...c,u]:!gF(c)&&!fF(u)?(t(c,u),[]):c,r=Ho(e.children(),o,[]);gF(r)||t(r)},fq=e=>{e.on("PreInit",()=>{const{parser:t}=e;t.addNodeFilter("ul,ol",o=>Ae(o,mq))})},gq=e=>{e.on("keydown",t=>{t.keyCode!==$t.TAB||$t.metaKeyPressed(t)||e.undoManager.transact(()=>{(t.shiftKey?Gx(e):g$(e))&&t.preventDefault()})})},hq=e=>{DC(e)&&gq(e)},os=e=>{dq(e),uq(e),fq(e),hq(e)};class pq{editor;lastPath=[];constructor(t){this.editor=t;let o;const r=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",c=>{const u=t.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!qg(f,o))&&t.dispatch("SelectionChange"),o=f}),t.on("contextmenu",()=>{zE(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const c=t.selection.getStart(!0);c&&jC(t)&&!r.isSameElementPath(c)&&t.dom.isChildOf(c,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",c=>{!c.isDefaultPrevented()&&jC(t)&&(t.selection.getNode().nodeName==="IMG"?Hd.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const o=this.editor,r=o.selection;let c;if(o.initialized&&r&&!cE(o)&&!lu(o)){const u=o.getBody();c=r.getStart(!0)||u,(c.ownerDocument!==o.getDoc()||!o.dom.isChildOf(c,u))&&(c=u);const f=[];o.dom.getParent(c,b=>b===u?!0:(f.push(b),!1)),o.dispatch("NodeChange",{...t,element:c,parents:f})}}isSameElementPath(t){let o;const r=this.editor,c=gs(r.dom.getParents(t,Te,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const aN="x-tinymce/html",Q4=it(aN),hS="<!-- "+aN+" -->",hF=e=>hS+e,bq=e=>e.replace(hS,""),pF=e=>e.indexOf(hS)!==-1,vq=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),bF=(e,t)=>{let o="<"+e;const r=fc(t,(c,u)=>u+'="'+vi.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},J4=(e,t,o)=>{const r=e.split(/\n\n/),c=bF(t,o),u="</"+t+">",f=hn(r,v=>v.split(/\n/).join("<br />")),b=v=>c+v+u;return f.length===1?f[0]:hn(f,b).join("")},vF="%MCEPASTEBIN%",yq=(e,t)=>{const{dom:o,selection:r}=e,c=e.getBody();t.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},vF);po.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},cN=(e,t)=>{const o=e.dom;if(iN(e)){let r;const c=t.get();for(;r=iN(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}t.set(null)},iN=e=>e.dom.get("mcepastebin"),Cq=e=>X(e)&&e.id==="mcepastebin",xq=e=>{const t=e.dom,o=(f,b)=>{f.appendChild(b),t.remove(b,!0)},[r,...c]=Xe(e.getBody().childNodes,Cq);Ae(c,f=>{o(r,f)});const u=t.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=t.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},yF=e=>e===vF,CF=e=>{const t=rn(null);return{create:()=>yq(e,t),remove:()=>cN(e,t),getEl:()=>iN(e),getHtml:()=>xq(e),getLastRng:t.get}},xF=(e,t)=>(lt.each(t,o=>{ft(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),Sq=e=>{const t=Aa(),o=Kv({},t);let r="";const c=t.getVoidElements(),u=lt.makeMap("script noscript style textarea video audio iframe object"," "),f=t.getBlockElements(),b=v=>{const S=v.name,O=v;if(S==="br"){r+=`
`;return}if(S!=="wbr"){if(c[S]&&(r+=" "),u[S]){r+=" ";return}if(v.type===3&&(r+=v.value),!(v.name in t.getVoidElements())){let R=v.firstChild;if(R)do b(R);while(R=R.next)}f[S]&&O.next&&(r+=`
`,S==="p"&&(r+=`
`))}};return e=xF(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},lN=e=>(e=xF(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":Fs],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),wq=e=>{let t=0;return()=>e+t++},Eq=e=>{const t=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return lt.hasOwn(o,t)?"image/"+o[t]:"image/"+t},Tq=(e,t)=>{const o=Kv({sanitize:Sv(e),sandbox_iframes:mp(e),sandbox_iframes_exclusions:Tm(e),convert_unsafe_embeds:km(e)},e.schema);o.addNodeFilter("meta",c=>{lt.each(c,u=>{u.remove()})});const r=o.parse(t,{forced_root_block:!1,isRootContent:!0});return pp({validate:!0},e.schema).serialize(r)},ek=(e,t)=>({content:e,cancelled:t}),kq=(e,t,o)=>{const r=e.dom.create("div",{style:"display:none"},t),c=zw(e,r,o);return ek(c.node.innerHTML,c.isDefaultPrevented())},SF=(e,t,o)=>{const r=Hw(e,t,o),c=Tq(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?kq(e,c,o):ek(c,r.isDefaultPrevented())},Aq=(e,t,o)=>SF(e,t,o),pS=(e,t)=>(e.insertContent(t,{merge:uE(e),paste:!0}),!0),uN=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),wF=(e,t)=>uN(t)&&io(OC(e),o=>Qr(t.toLowerCase(),`.${o.toLowerCase()}`)),_q=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),Oq=(e,t,o)=>(e.undoManager.extra(()=>{o(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),Dq=(e,t,o)=>!e.selection.isCollapsed()&&uN(t)?Oq(e,t,o):!1,Rq=(e,t,o)=>wF(e,t)?_q(e,t,o):!1,EF=(e,t)=>{lt.each([Dq,Rq,pS],o=>!o(e,t,pS))},Nq=(e,t,o)=>{o||!EC(e)?pS(e,t):EF(e,t)},TF=wq("mceclip"),tk=e=>{const t=Cy();return oL(t,e),I4(t),t},nk=(e,t,o,r,c)=>{const u=Aq(e,t,o);if(!u.cancelled){const f=u.content,b=()=>Nq(e,f,r);c?uS(e,"insertFromPaste",{dataTransfer:tk(f)}).isDefaultPrevented()||(b(),lS(e,"insertFromPaste")):b()}},ky=(e,t,o,r)=>{const c=o||pF(t);nk(e,bq(t),c,!1,r)},dN=(e,t,o)=>{const r=e.dom.encode(t).replace(/\r\n/g,`
`),c=f0(r,J3(e)),u=J4(c,Rr(e),iu(e));nk(e,u,!1,!0,o)},kF=e=>{const t={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{t[r]=e.getData(r)}catch{t[r]=""}}return t},rd=(e,t)=>t in e&&e[t].length>0,AF=e=>rd(e,"text/html")||rd(e,"text/plain"),Ay=(e,t)=>{const o=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return X(o)?e.dom.encode(o[1]):void 0},bS=(e,t,o,r)=>{const c=TF(),u=Qw(e)&&X(o.name),f=u?Ay(e,o.name):c,b=u?o.name:void 0,v=t.create(c,o,r,f,b);return t.add(v),v},Mq=(e,t)=>{B_(t.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=t.file,b=e.editorUpload.blobCache,S=b.getByData(u,r)??bS(e,b,f,u);ky(e,`<img src="${S.blobUri()}">`,!1,!0)})},Pq=e=>e.type==="paste",_y=e=>Promise.all(hn(e,t=>$_(t).then(o=>({file:t,uri:o})))),Bq=e=>{const t=OC(e);return o=>kn(o.type,"image/")&&io(t,r=>Eq(r)===o.type)},mN=(e,t)=>{const o=t.items?wo(is(t.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=t.files?is(t.files):[];return Xe(o.length>0?o:r,Bq(e))},_F=(e,t,o)=>{const r=Pq(t)?t.clipboardData:t.dataTransfer;if(xv(e)&&r){const c=mN(e,r);if(c.length>0)return t.preventDefault(),_y(c).then(u=>{o&&e.selection.setRng(o),Ae(u,f=>{Mq(e,f)})}),!0}return!1},OF=e=>po.os.isAndroid()&&e.clipboardData?.items?.length===0,DF=e=>$t.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,vS=(e,t,o,r,c)=>{let u=lN(o);const f=rd(t,Q4())||pF(o),b=!f&&vq(u),v=uN(u);(yF(u)||!u.length||b&&!v)&&(r=!0),(r||v)&&(rd(t,"text/plain")&&b?u=t["text/plain"]:u=Sq(u)),!yF(u)&&(r?dN(e,u,c):ky(e,u,f,c))},RF=(e,t,o)=>{let r;const c=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",u=>{DF(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||OF(u))return;const f=o.get()==="text"||r;r=!1;const b=kF(u.clipboardData);!AF(b)&&_F(e,u,c())||(rd(b,"text/html")?(u.preventDefault(),vS(e,b,b["text/html"],f,!0)):rd(b,"text/plain")&&rd(b,"text/uri-list")?(u.preventDefault(),vS(e,b,b["text/plain"],f,!0)):(t.create(),Hd.setEditorTimeout(e,()=>{const v=t.getHtml();t.remove(),vS(e,b,v,f,!1)},0)))})},$q=e=>{const t=c=>kn(c,"webkit-fake-url"),o=c=>kn(c,"data:"),r=c=>c.data?.paste===!0;e.parser.addNodeFilter("img",(c,u,f)=>{if(!xv(e)&&r(f))for(const b of c){const v=b.attr("src");V(v)&&!b.attr("data-mce-object")&&v!==po.transparentSrc&&(t(v)||!TC(e)&&o(v))&&b.remove()}})},Iq=(e,t,o)=>{RF(e,t,o),$q(e)},NF=(e,t)=>{t.get()==="text"?(t.set("html"),Vw(e,!1)):(t.set("text"),Vw(e,!0)),e.focus()},Lq=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{NF(e,t)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&ky(e,r.html,r.internal,!1),r.text&&dN(e,r.text,!1)})},MF=(e,t,o)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",o),e.setData(Q4(),t),!0}catch{return!1}else return!1},ok=(e,t,o,r)=>{MF(e.clipboardData,t.html,t.text)?(e.preventDefault(),r()):o(t.html,r)},fN=e=>(t,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},t);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const v=r.createRng();v.selectNodeContents(f),c.setRng(v),Hd.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},PF=e=>({html:hF(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),Fq=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),BF=e=>!e.selection.isCollapsed()||Fq(e),$F=(e,t)=>o=>{!o.isDefaultPrevented()&&BF(e)&&e.selection.isEditable()&&ok(o,PF(e),fN(e),()=>{if(po.browser.isChromium()||po.browser.isFirefox()){const r=e.selection.getRng();Hd.setEditorTimeout(e,()=>{e.selection.setRng(r),Yd(e,t)},0)}else Yd(e,t)})},gN=e=>t=>{!t.isDefaultPrevented()&&BF(e)&&ok(t,PF(e),fN(e),_t)},Hq=(e,t)=>{e.on("cut",$F(e,t)),e.on("copy",gN(e))},hN=(e,t)=>Rm.getCaretRangeFromPoint(t.clientX??0,t.clientY??0,e.getDoc()),IF=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},LF=(e,t)=>{t&&e.selection.setRng(t),e.focus()},FF=e=>io(e.files,t=>/^image\//.test(t.type)),zq=(e,t,o,r)=>{const c=e.getParent(o,f=>Xs(t,f));if(!se(e.getParent(o,"summary")))return!0;if(c&&Pn(r,"text/html")){const f=new DOMParser().parseFromString(r["text/html"],"text/html").body;return!se(f.querySelector(c.nodeName.toLowerCase()))}else return!1},Vq=e=>{e.on("input",t=>{const o=r=>se(r.querySelector("summary"));if(t.inputType==="deleteByDrag"){const r=Xe(e.dom.select("details"),o);Ae(r,c=>{js(c.firstChild)&&c.firstChild.remove();const u=e.dom.create("summary");u.appendChild(Cf().dom),c.prepend(u)})}})},sk=(e,t)=>{v5(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),xv(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&FF(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented())return;const r=hN(e,o);if(Yt(r))return;const c=kF(o.dataTransfer),u=rd(c,Q4());if((!AF(c)||IF(c))&&_F(e,o,r))return;const f=c[Q4()],b=f||c["text/html"]||c["text/plain"],v=zq(e.dom,e.schema,r.startContainer,c),S=t.get();S&&!v||b&&(o.preventDefault(),Hd.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(f||S&&v)&&e.execCommand("Delete"),LF(e,r);const O=lN(b);c["text/html"]?ky(e,O,u,!0):dN(e,O,!0)})}))}),e.on("dragstart",o=>{t.set(!0)}),e.on("dragover dragend",o=>{xv(e)&&!t.get()&&(o.preventDefault(),LF(e,hN(e,o))),o.type==="dragend"&&t.set(!1)}),Vq(e)},Uq=e=>{const t=c=>u=>{c(e,u)},o=q3(e);ce(o)&&e.on("PastePreProcess",t(o));const r=K3(e);ce(r)&&e.on("PastePostProcess",t(r))},jq=(e,t)=>{e.on("PastePreProcess",o=>{o.content=t(e,o.content,o.internal)})},HF=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,pN=e=>lt.trim(e).replace(HF,El).toLowerCase(),Wq=(e,t,o)=>{const r=wC(e);if(o||r==="all"||!X3(e))return t;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,v,S,O)=>{const R=u.parseStyle(u.decode(S)),P={};for(let ee=0;ee<c.length;ee++){const W=R[c[ee]];let J=W,be=u.getStyle(f,c[ee],!0);/color/.test(c[ee])&&(J=pN(J),be=pN(be)),be!==J&&(P[c[ee]]=W)}const z=u.serializeStyle(P,"span");return z?v+' style="'+z+'"'+O:v+O})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,v)=>f+' style="'+b+'"'+v),t},Zq=e=>{(po.browser.isChromium()||po.browser.isSafari())&&jq(e,Wq)},Gq=(e,t)=>{const o=rn(!1),r=rn(Q3(e)?"text":"html"),c=CF(e);Zq(e),Lq(e,r),Uq(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>r.get()==="text"),e.on("PreInit",()=>{Hq(e,t),sk(e,o),Iq(e,c,r)})},qq=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},Kq=e=>{e.parser.addNodeFilter("details",t=>{const o=dp(e);Ae(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const o=Em(e);Ae(t,r=>{o==="expanded"?r.attr("open","open"):o==="collapsed"&&r.attr("open",null)})})},zF=e=>{qq(e),Kq(e)},Yq=js,VF=dt,Xq=e=>As(e.dom),Qq=e=>hi(e.dom),UF=e=>t=>no(ne.fromDom(e),t),Jq=(e,t,o)=>Go(ne.fromDom(e),r=>Qq(r)||o.isBlock(jn(r)),UF(t)).getOr(ne.fromDom(t)).dom,jF=(e,t)=>Go(ne.fromDom(e),Xq,UF(t)),WF=(e,t,o)=>{const r=new nr(e,t),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!Yq(f);f=c())Ps(f)&&(u=f);return u},ZF=(e,t,o)=>{const c=Le.fromRangeStart(e).getNode(),u=Jq(c,t,o),f=WF(c,u,!1),b=WF(c,u,!0),v=document.createRange();return jF(f,u).fold(()=>{VF(f)?v.setStart(f,0):v.setStartBefore(f)},S=>v.setStartBefore(S.dom)),jF(b,u).fold(()=>{VF(b)?v.setEnd(b,b.data.length):v.setEndAfter(b)},S=>v.setEndAfter(S.dom)),v},GF=e=>{const t=ZF(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(P_(t))},eK=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),GF(e))})};var Oy;(function(e){e.Before="before",e.After="after"})(Oy||(Oy={}));const tK=(e,t)=>Math.abs(e.left-t),yS=(e,t)=>Math.abs(e.right-t),nK=(e,t)=>e>=t.top&&e<=t.bottom,oK=(e,t)=>e.top<t.bottom&&e.bottom>t.top,qF=(e,t)=>{const o=bw(e,t)/Math.min(e.height,t.height);return oK(e,t)&&o>.5},sK=(e,t)=>{const o=Xe(e,r=>nK(t,r));return M1(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=gt(e,f=>qF(f,r));return[c,u]})},rK=(e,t)=>({node:e.node,position:tK(e,t)<yS(e,t)?Oy.Before:Oy.After}),aK=(e,t,o)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),bN=(e,t,o,r)=>{const c=R=>Ps(R.node)?M.some(R):kt(R.node)?bN(is(R.node.childNodes),t,o,!1):M.none(),u=(R,P,z)=>c(P).filter(ee=>Math.abs(z(R,t,o)-z(ee,t,o))<2&&dt(ee.node)),f=(R,P)=>{const z=Oi(R,(ee,W)=>P(ee,t,o)-P(W,t,o));return dc(z,c).map(ee=>r&&!dt(ee.node)&&z.length>1?u(ee,z[1],P).getOr(ee):ee)},[b,v]=sK(tR(e),o),{pass:S,fail:O}=gt(v,R=>R.top<o);return f(b,aK).orThunk(()=>f(O,H2)).orThunk(()=>f(S,H2))},cK=(e,t,o,r)=>{const c=(u,f)=>{const b=S=>kt(S)&&S.classList.contains("mce-drag-container"),v=Xe(u.dom.childNodes,tt(b));return f.fold(()=>bN(v,o,r,!0),S=>{const O=Xe(v,R=>R!==S.dom);return bN(O,o,r,!0)}).orThunk(()=>(no(u,e)?M.none():Vc(u)).bind(O=>c(O,M.some(u))))};return c(t,M.none())},rk=(e,t,o)=>{const r=ne.fromDom(e),c=Li(r),f=ne.fromPoint(c,t,o).filter(b=>oc(r,b)).getOr(r);return cK(r,f,t,o)},vN=(e,t,o)=>rk(e,t,o).filter(r=>rb(r.node)).map(r=>rK(r,t)),yN=e=>{const t=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,c=o.defaultView;return{top:t.top+(c?.scrollY??0)-r.clientTop,left:t.left+(c?.scrollX??0)-r.clientLeft}},iK=e=>e.inline?yN(e.getBody()):{left:0,top:0},lK=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},uK=e=>{const t=e.getBody(),o=e.getDoc().documentElement,r={left:t.scrollLeft,top:t.scrollTop},c={left:t.scrollLeft||o.scrollLeft,top:t.scrollTop||o.scrollTop};return e.inline?r:c},nJ=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const o=yN(e.getContentAreaContainer()),r=uK(e);return{left:t.pageX-o.left+r.left,top:t.pageY-o.top+r.top}}return{left:t.pageX,top:t.pageY}},dK=(e,t,o)=>({pageX:o.left-e.left+t.left,pageY:o.top-e.top+t.top}),mK=(e,t)=>dK(iK(e),lK(e),nJ(e,t)),ak=e=>({target:e,srcElement:e}),ck=(e,t,o,r)=>({...t,dataTransfer:r,type:e,...ak(o)}),fK=(e,t,o)=>{const r=St("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:r,initEvent:r,preventDefault:_t,stopImmediatePropagation:_t,stopPropagation:_t,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,layerX:0,layerY:0,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:r,initMouseEvent:r,getModifierState:r,dataTransfer:o,...ak(t)}},gK=(e,t)=>{const o=RZ(e);return t==="dragstart"?(YI(o),RR(o)):t==="drop"?(AZ(o),I4(o)):(_Z(o),NR(o)),o},hK=(e,t,o,r)=>{const c=gK(o,e);return Wn(r)?fK(e,t,c):ck(e,r,t,c)},CS=32,pK=100,Dy=8,xS=16,KF=As,bK=z2(KF,hi),YF=(e,t,o)=>KF(o)&&o!==t&&e.isEditable(o.parentElement),vK=(e,t,o)=>Yt(t)||t===o||e.dom.isChildOf(t,o)?!1:e.dom.isEditable(t),oJ=(e,t,o,r)=>{const c=e.dom,u=t.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},yK=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},ik=(e,t)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+t,behavior:"smooth"})},XF=ik("left",-CS),CN=ik("left",CS),lk=ik("top",-CS),SS=ik("top",CS),QF=(e,t,o,r,c,u,f,b,v,S,O,R)=>{let P=0,z=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+o>c&&(P=t.pageX+o-c),t.pageY+r>u&&(z=t.pageY+r-u),e.style.width=o-P+"px",e.style.height=r-z+"px";const ee=v.clientHeight,W=v.clientWidth,J=f+v.getBoundingClientRect().top,be=b+v.getBoundingClientRect().left;O.on(ye=>{ye.intervalId.clear(),ye.dragging&&R&&(f+Dy>=ee?ye.intervalId.set(SS(S)):f-Dy<=0?ye.intervalId.set(lk(S)):b+Dy>=W?ye.intervalId.set(CN(S)):b-Dy<=0?ye.intervalId.set(XF(S)):J+xS>=window.innerHeight?ye.intervalId.set(SS(window)):J-xS<=0?ye.intervalId.set(lk(window)):be+xS>=window.innerWidth?ye.intervalId.set(CN(window)):be-xS<=0&&ye.intervalId.set(XF(window)))})},JF=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},CK=(e,t)=>{const o=e.getParent(t.parentNode,e.isBlock);JF(t),o&&o!==e.getRoot()&&e.isEmpty(o)&&xf(ne.fromDom(o))},xK=e=>e.button===0,SK=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),e8=(e,t)=>o=>{if(xK(o)){const r=No(t.dom.getParents(o.target),bK).getOr(null);if(X(r)&&YF(t.dom,t.getBody(),r)){const c=t.dom.getPos(r),u=t.getBody(),f=t.getDoc().documentElement;e.set({element:r,dataTransfer:Cy(),dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(t.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(t.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:oJ(t,r,r.offsetWidth,r.offsetHeight),intervalId:nm(pK)})}}},wK=(e,t,o)=>{e._selectionOverrides.hideFakeCaret(),vN(e.getBody(),t,o).fold(()=>e.selection.placeCaretAt(t,o),r=>{const c=e._selectionOverrides.showCaret(1,r.node,r.position===Oy.Before,!1);c?e.selection.setRng(c):e.selection.placeCaretAt(t,o)})},Ry=(e,t,o,r,c)=>{t==="dragstart"&&oL(r,e.dom.getOuterHTML(o));const u=hK(t,o,r,c);return e.dispatch(t,u)},EK=(e,t)=>{const o=Rt((c,u)=>wK(t,c,u),0);t.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){const b=Ry(t,"dragstart",u.element,u.dataTransfer,c);if(X(b.dataTransfer)&&(u.dataTransfer=b.dataTransfer),b.isDefaultPrevented())return;u.dragging=!0,t.focus()}if(u.dragging){const b=c.currentTarget===t.getDoc().documentElement,v=SK(u,mK(t,c));yK(u.ghost,t.getBody()),QF(u.ghost,v,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,t.getContentAreaContainer(),t.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},TK=e=>{const t=e.getSel();if(X(t)){const r=t.getRangeAt(0).startContainer;return dt(r)?r.parentNode:r}else return null},xN=(e,t)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(vK(t,TK(t.selection),r.element)){const c=t.getDoc().elementFromPoint(o.clientX,o.clientY)??t.getBody();Ry(t,"drop",c,r.dataTransfer,o).isDefaultPrevented()||t.undoManager.transact(()=>{CK(t.dom,r.element),nL(r.dataTransfer).each(f=>t.insertContent(f)),t._selectionOverrides.hideFakeCaret()})}Ry(t,"dragend",t.getBody(),r.dataTransfer,o)}}),t8(e)},SN=(e,t,o)=>{e.on(r=>{r.intervalId.clear(),r.dragging&&o.fold(()=>Ry(t,"dragend",r.element,r.dataTransfer),c=>Ry(t,"dragend",r.element,r.dataTransfer,c))}),t8(e)},sJ=(e,t)=>o=>SN(e,t,M.some(o)),t8=e=>{e.on(t=>{t.intervalId.clear(),JF(t.ghost)}),e.clear()},n8=e=>{const t=Ic(),o=mo.DOM,r=document,c=e8(t,e),u=EK(t,e),f=xN(t,e),b=sJ(t,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",v=>{v.keyCode===$t.ESC&&SN(t,e,M.none())})},kK=e=>{const t=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(Wt(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&KT(e,"Dropped file type is not supported"))}},o=c=>{jE(e,c.target)&&t(c)},r=()=>{const c=mo.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),v=["drop","dragover"];Ae(v,S=>{c.bind(f,S,o),u.bind(b,S,t)}),e.on("remove",()=>{Ae(v,S=>{c.unbind(f,S,o),u.unbind(b,S,t)})})};e.on("init",()=>{Hd.setEditorTimeout(e,r,0)})},wN=e=>{n8(e),j3(e)&&kK(e)},AK=e=>{const t=Rt(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=ah(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},_K=e=>{e.on("init",()=>{e.on("focusin",t=>{const o=t.target;if(Sl(o)){const r=Nm(e.getBody(),o),c=As(r)?r:o;e.selection.getNode()!==c&&jf(e,c).each(u=>e.selection.setRng(u))}})})},wS=As,EN=(e,t)=>Nm(e.getBody(),t),uk=e=>{const t=e.selection,o=e.dom,r=e.getBody(),c=Bn(e,r,o.isBlock,()=>zv(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const v=He=>X(He)&&o.hasClass(He,"mce-offscreen-selection"),S=He=>He!==r&&(wS(He)||Sl(He))&&o.isChildOf(He,r)&&o.isEditable(He.parentNode),O=He=>{He&&t.setRng(He)},R=(He,Me,Ue,Nt=!0)=>e.dispatch("ShowCaret",{target:Me,direction:He,before:Ue}).isDefaultPrevented()?null:(Nt&&t.scrollIntoView(Me,He===-1),c.show(Ue,Me)),P=He=>{He.hasAttribute("data-mce-caret")&&(su(He),t.scrollIntoView(He))},z=()=>{e.on("click",Me=>{o.isEditable(Me.target)||(Me.preventDefault(),e.focus())}),e.on("blur NewBlock",et),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",Me=>{const Ue=Me.target,Nt=EN(e,Ue);wS(Nt)?(Me.preventDefault(),jf(e,Nt).each(Ve)):S(Ue)&&jf(e,Ue).each(Ve)},!0),e.on("mousedown",Me=>{const Ue=Me.target;if(Ue!==r&&Ue.nodeName!=="HTML"&&!o.isChildOf(Ue,r)||!fU(e,Me.clientX,Me.clientY))return;et(),un();const Nt=EN(e,Ue);wS(Nt)?(Me.preventDefault(),jf(e,Nt).each(Ve)):vN(r,Me.clientX,Me.clientY).each(Dn=>{Me.preventDefault();const Rn=R(1,Dn.node,Dn.position===Oy.Before,!1);O(Rn),Wc(Nt)?Nt.focus():e.getBody().focus()})}),e.on("keypress",Me=>{$t.modifierPressed(Me)||wS(t.getNode())&&Me.preventDefault()}),e.on("GetSelectionRange",Me=>{let Ue=Me.range;if(b){if(!b.parentNode){b=null;return}Ue=Ue.cloneRange(),Ue.selectNode(b),Me.range=Ue}}),e.on("focusin",Me=>{if(!Sl(Me.target)&&e.getBody().contains(Me.target)&&Me.target!==e.getBody()&&!e.dom.isEditable(Me.target.parentNode)){c.isShowing()&&c.hide(),Me.target.contains(e.selection.getNode())||(e.selection.select(Me.target,!0),e.selection.collapse(!0));const Ue=Ve(e.selection.getRng(),!0);Ue&&e.selection.setRng(Ue)}}),e.on("SetSelectionRange",Me=>{Me.range=J(Me.range);const Ue=Ve(Me.range,Me.forward);Ue&&(Me.range=Ue)});const He=Me=>kt(Me)&&Me.id==="mcepastebin";e.on("AfterSetSelectionRange",Me=>{const Ue=Me.range,Nt=Ue.startContainer.parentElement;!W(Ue)&&!He(Nt)&&un(),v(Nt)||et()}),wN(e),AK(e),_K(e)},ee=He=>qi(He)||xi(He)||Sf(He),W=He=>ee(He.startContainer)||ee(He.endContainer),J=He=>{const Me=e.schema.getVoidElements(),Ue=o.createRng(),Nt=He.startContainer,Dn=He.startOffset,Rn=He.endContainer,go=He.endOffset;return Pn(Me,Nt.nodeName.toLowerCase())?Dn===0?Ue.setStartBefore(Nt):Ue.setStartAfter(Nt):Ue.setStart(Nt,Dn),Pn(Me,Rn.nodeName.toLowerCase())?go===0?Ue.setEndBefore(Rn):Ue.setEndAfter(Rn):Ue.setEnd(Rn,go),Ue},be=(He,Me)=>{const Ue=ne.fromDom(e.getBody()),Nt=e.getDoc(),Dn=Ql(Ue,"#"+u).getOrThunk(()=>{const Yo=ne.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Nt);return Ts(Yo,"id",u),yo(Ue,Yo),Yo}),Rn=o.createRng();zi(Dn),mi(Dn,[ne.fromText(Fs,Nt),ne.fromDom(Me),ne.fromText(Fs,Nt)]),Rn.setStart(Dn.dom.firstChild,1),Rn.setEnd(Dn.dom.lastChild,0),Cc(Dn,{top:o.getPos(He,e.getBody()).y+"px"}),ug(Dn);const go=t.getSel();return go&&(go.removeAllRanges(),go.addRange(Rn)),Rn},ye=He=>{const Me=e.getDoc().createElement("div");Me.style.width=He.style.width,Me.style.height=He.style.height;const Ue=He.getAttribute("width");Ue&&Me.setAttribute("width",Ue);const Nt=He.getAttribute("height");return Nt&&Me.setAttribute("height",Nt),Me},Se=He=>{const Me=b1(He)?ye(He):He.cloneNode(!0),Ue=e.dispatch("ObjectSelected",{target:He,targetClone:Me});if(Ue.isDefaultPrevented())return null;const Nt=be(He,Ue.targetClone),Dn=ne.fromDom(He);return Ae(Fe(ne.fromDom(e.getBody()),`*[${f}]`),Rn=>{no(Dn,Rn)||cr(Rn,f)}),o.getAttrib(He,f)||He.setAttribute(f,"1"),b=He,un(),Nt},Ve=(He,Me)=>{if(!He)return null;if(He.collapsed){if(!W(He)){const Rn=Me?1:-1,go=Pf(Rn,r,He),Yo=go.getNode(!Me);if(X(Yo)){if(rb(Yo))return R(Rn,Yo,Me?!go.isAtEnd():!1,!1);if(Hu(Yo)&&As(Yo.nextSibling)){const Is=o.createRng();return Is.setStart(Yo,0),Is.setEnd(Yo,0),Is}}const Ss=go.getNode(Me);if(X(Ss)){if(rb(Ss))return R(Rn,Ss,Me?!1:!go.isAtEnd(),!1);if(Hu(Ss)&&As(Ss.previousSibling)){const Is=o.createRng();return Is.setStart(Ss,1),Is.setEnd(Ss,1),Is}}}return null}let Ue=He.startContainer,Nt=He.startOffset;const Dn=He.endOffset;if(dt(Ue)&&Nt===0&&wS(Ue.parentNode)&&(Ue=Ue.parentNode,Nt=o.nodeIndex(Ue),Ue=Ue.parentNode),!kt(Ue))return null;if(Dn===Nt+1&&Ue===He.endContainer){const Rn=Ue.childNodes[Nt];if(S(Rn))return Se(Rn)}return null},et=()=>{b&&b.removeAttribute(f),Ql(ne.fromDom(e.getBody()),"#"+u).each(Xo),b=null},Pt=()=>{c.destroy(),b=null},un=()=>{c.hide()};return Lm(e)||z(),{showCaret:R,showBlockCaretContainer:P,hideFakeCaret:un,destroy:Pt}},o8=(e,t)=>{let o=t;for(let r=e.previousSibling;dt(r);r=r.previousSibling)o+=r.data.length;return o},TN=(e,t,o,r,c)=>{if(dt(o)&&(r<0||r>o.data.length))return[];const u=c&&dt(o)?[o8(o,r)]:[r];let f=o;for(;f!==t&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===t?u.reverse():[]},kN=(e,t,o,r,c,u,f=!1)=>{const b=TN(e,t,o,r,f),v=TN(e,t,c,u,f);return{start:b,end:v}},s8=(e,t)=>{const o=t.slice(),r=o.pop();return Uo(r)?Ho(o,(u,f)=>u.bind(b=>M.from(b.childNodes[f])),M.some(e)).bind(u=>dt(u)&&(r<0||r>u.data.length)?M.none():M.some({node:u,offset:r})):M.none()},AN=(e,t)=>s8(e,t.start).bind(({node:o,offset:r})=>s8(e,t.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),OK=(e,t,o,r=!1)=>kN(e,t,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),Ny=(e,t,o)=>{if(t&&e.isEmpty(t)&&!o(t)){const r=t.parentNode;e.remove(t,dt(t.firstChild)&&Oh(t.firstChild.data)),Ny(e,r,o)}},dk=(e,t,o,r=!0)=>{const c=t.startContainer.parentNode,u=t.endContainer.parentNode;t.deleteContents(),r&&!o(t.startContainer)&&(dt(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),dt(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ny(e,c,o),c!==u&&Ny(e,u,o))},My=(e,t)=>M.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),_N=(e,t,o)=>{const r=e.dynamicPatternsLookup({text:o,block:t});return{...e,blockPatterns:_3(r).concat(e.blockPatterns),inlinePatterns:j1(r).concat(e.inlinePatterns)}},ON=(e,t,o,r)=>{const c=e.createRng();return c.setStart(t,0),c.setEnd(o,r),c.toString()},r8=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),mk=(e,t)=>{const o=e.createRng();return o.setStartAfter(t.start),o.setEndBefore(t.end),o},a8=(e,t,o)=>{const r=AN(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),v=b.parentNode,S=f.parentNode;return{prefix:t,end:S.insertBefore(r8(e,t+"-end"),f),start:v.insertBefore(r8(e,t+"-start"),b)}},c8=(e,t,o)=>{Ny(e,e.get(t.prefix+"-end"),o),Ny(e,e.get(t.prefix+"-start"),o)},ES=e=>e.start.length===0,DK=e=>(t,o)=>{const c=t.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},i8=(e,t,o,r)=>{const c=t.start;return UR(e,r.container,r.offset,DK(c),o).bind(f=>{const b=o.textContent?.indexOf(c)??-1;if(b!==-1&&f.offset>=b+c.length){const S=e.createRng();return S.setStart(f.container,f.offset-c.length),S.setEnd(f.container,f.offset),M.some(S)}else{const S=f.offset-c.length;return zR(f.container,S,o).map(O=>{const R=e.createRng();return R.setStart(O.container,O.offset),R.setEnd(f.container,f.offset),R}).filter(O=>O.toString()===c).orThunk(()=>i8(e,t,o,Wm(f.container,0)))}})},RK=(e,t,o,r,c,u=!1)=>{if(t.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),M.some(f)}return FR(o,r,c).bind(f=>i8(e,t,c,f).bind(v=>{if(u){if(v.endContainer===f.container&&v.endOffset===f.offset)return M.none();if(f.offset===0&&v.endContainer.textContent?.length===v.endOffset)return M.none()}return M.some(v)}))},l8=(e,t,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,v=o.position.offset;return zR(b,v-o.pattern.end.length,t).bind(S=>{const O=kN(c,u,S.container,S.offset,b,v,r);if(ES(f))return M.some({matches:[{pattern:f,startRng:O,endRng:O}],position:S});{const R=fk(e,o.remainingPatterns,S.container,S.offset,t,r),P=R.getOr({matches:[],position:S}),z=P.position;return RK(c,f,z.container,z.offset,t,R.isNone()).map(W=>{const J=OK(c,u,W,r);return{matches:P.matches.concat([{pattern:f,startRng:J,endRng:O}]),position:Wm(W.startContainer,W.startOffset)}})}})},fk=(e,t,o,r,c,u)=>{const f=e.dom;return FR(o,r,f.getRoot()).bind(b=>{const v=ON(f,c,o,r);for(let S=0;S<t.length;S++){const O=t[S];if(!Qr(v,O.end))continue;const R=t.slice();R.splice(S,1);const P=l8(e,c,{pattern:O,remainingPatterns:R,position:b},u);if(P.isNone()&&r>0)return fk(e,t,o,r-1,c,u);if(P.isSome())return P}return M.none()})},u8=(e,t,o)=>{e.selection.setRng(o),t.type==="inline-format"?Ae(t.format,r=>{e.formatter.apply(r)}):e.execCommand(t.cmd,!1,t.value)},NK=(e,t,o,r)=>{const c=mk(e.dom,o);dk(e.dom,c,r),u8(e,t,c)},MK=(e,t,o,r,c)=>{const u=e.dom,f=mk(u,r),b=mk(u,o);dk(u,b,c),dk(u,f,c);const v={prefix:o.prefix,start:o.end,end:r.start},S=mk(u,v);u8(e,t,S)},PK=(e,t)=>{const o=rr("mce_textpattern"),r=Qn(t,(c,u)=>{const f=a8(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Qn(r,(c,u)=>{const f=r.length-c.length-1,b=ES(u.pattern)?u.endMarker:a8(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},BK=e=>Oi(e,(t,o)=>o.end.length-t.end.length),$K=(e,t)=>{const o=Qa(e,r=>io(t,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===t.length?o?e:t:e.length>t.length?e:t},d8=(e,t,o,r,c,u)=>{const f=fk(e,c.inlinePatterns,o,r,t,u).fold(()=>[],v=>v.matches),b=fk(e,BK(c.inlinePatterns),o,r,t,u).fold(()=>[],v=>v.matches);return $K(f,b)},DN=(e,t)=>{if(t.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=PK(o,t);Ae(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=v=>v===f;ES(u.pattern)?NK(e,u.pattern,u.endMarker,b):MK(e,u.pattern,u.startMarker,u.endMarker,b),c8(o,u.endMarker,b),c8(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},m8=(e,t,o)=>HR(t,0,t).map(r=>{const c=r.container;return VR(c,o.start.length,t).each(u=>{const f=e.createRng();f.setStart(c,0),f.setEnd(u.container,u.offset),dk(e,f,b=>b===t)}),c}),gk=e=>(t,o)=>{const r=t.dom,c=o.pattern,u=AN(r.getRoot(),o.range).getOrDie("Unable to resolve path range"),f=(b,v)=>{const S=v.get(b);return At(S)&&Gs(S).exists(O=>Pn(O,"block"))};return My(t,u).each(b=>{c.type==="block-format"?f(c.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,b,c),t.formatter.apply(c.format)}):c.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,b,c),t.execCommand(c.cmd,!1,c.value)})}),!0},IK=e=>Oi(e,(t,o)=>o.start.length-t.start.length),f8=e=>(t,o)=>{const r=IK(t),c=o.replace(Fs," ");return No(r,u=>e(u,o,c))},g8=(e,t)=>(o,r,c,u,f=r.textContent??"")=>{const b=o.dom,v=Rr(o);return b.is(r,v)?e(c.blockPatterns,f).map(S=>t&&lt.trim(f).length===S.start.length?[]:[{pattern:S,range:kN(b,b.getRoot(),r,0,r,0,u)}]).getOr([]):[]},LK=e=>/^\s[^\s]/.test(e),FK=gk((e,t,o)=>{m8(e,t,o).each(r=>{const c=ne.fromDom(r),u=Ta(c);LK(u)&&i1(c,u.slice(1))})}),hk=f8((e,t,o)=>t.indexOf(e.start)===0||o.indexOf(e.start)===0),HK=g8(hk,!0),zK=(e,t)=>{const o=e.selection.getRng();return My(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=_N(t,r,r.textContent??""),f=d8(e,r,o.startContainer,c,u,!0),b=HK(e,r,u,!0);return{inlineMatches:f,blockMatches:b}}).filter(({inlineMatches:r,blockMatches:c})=>c.length>0||r.length>0)},VK=(e,t)=>{if(t.length===0)return;const o=e.selection.getBookmark();Ae(t,r=>FK(e,r)),e.selection.moveToBookmark(o)},UK=gk(m8),jK=f8((e,t,o)=>t===e.start||o===e.start),WK=g8(jK,!1),ZK=(e,t)=>{const o=e.selection.getRng();return My(e,o).map(r=>{const c=Math.max(0,o.startOffset),u=ON(e.dom,r,o.startContainer,c),f=_N(t,r,u);return WK(e,r,f,!1,u)}).filter(r=>r.length>0)},GK=(e,t)=>{Ae(t,o=>UK(e,o))},qK=(e,t)=>zK(e,t).fold(pe,({inlineMatches:o,blockMatches:r})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{L0(e),DN(e,o),VK(e,r);const c=e.selection.getRng(),u=FR(c.startContainer,c.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),u.each(f=>{const b=f.container;b.data.charAt(f.offset-1)===Lc&&(b.deleteData(f.offset-1,1),Ny(e.dom,b.parentNode,v=>v===e.dom.getRoot()))})}),!0)),h8=(e,t)=>{const o=e.selection.getRng();My(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=ON(e.dom,r,o.startContainer,c),f=_N(t,r,u),b=d8(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{DN(e,b)})})},KK=(e,t)=>ZK(e,t).fold(pe,o=>(e.undoManager.transact(()=>{GK(e,o)}),!0)),RN=(e,t,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],t))return!0;return!1},YK=(e,t)=>RN(e,t,(o,r)=>o===r.keyCode&&!$t.modifierPressed(r)),XK=(e,t)=>RN(e,t,(o,r)=>o.charCodeAt(0)===r.charCode),p8=e=>{const t=[",",".",";",":","!","?"],o=[32],r=()=>O3(dE(e).filter(f=>f.type==="inline-command"||f.type==="block-command"?e.queryCommandSupported(f.cmd):!0),mn(e)),c=()=>up(e);e.on("keydown",f=>{if(f.keyCode===13&&!$t.modifierPressed(f)&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=W1(r(),"enter");(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&qK(e,b)&&f.preventDefault()}},!0),e.on("keydown",f=>{if(f.keyCode===32&&e.selection.isCollapsed()&&e.selection.isEditable()){const b=W1(r(),"space");(b.blockPatterns.length>0||c())&&KK(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()&&e.selection.isEditable()){const f=W1(r(),"space");(f.inlinePatterns.length>0||c())&&h8(e,f)}};e.on("keyup",f=>{YK(o,f)&&u()}),e.on("keypress",f=>{XK(t,f)&&Hd.setEditorTimeout(e,u)})},TS=e=>{p8(e)},QK=e=>{const t=lt.each,o=$t.BACKSPACE,r=$t.DELETE,c=e.dom,u=e.selection,f=e.parser,b=po.browser,v=b.isFirefox(),S=b.isChromium()||b.isSafari(),O=po.deviceType.isiPhone()||po.deviceType.isiPad(),R=po.os.isMacOS()||po.os.isiOS(),P=(Ge,vt)=>{try{e.getDoc().execCommand(Ge,!1,String(vt))}catch{}},z=Ge=>Ge.isDefaultPrevented(),ee=()=>{const Ge=qt=>{const ro=c.create("body"),Xn=qt.cloneContents();return ro.appendChild(Xn),u.serializer.serialize(ro,{format:"html"})},vt=qt=>{const ro=Ge(qt),Xn=c.createRng();Xn.selectNode(e.getBody());const ts=Ge(Xn);return ro===ts};e.on("keydown",qt=>{const ro=qt.keyCode;if(!z(qt)&&(ro===r||ro===o)&&e.selection.isEditable()){const Xn=e.selection.isCollapsed(),ts=e.getBody();if(Xn&&!bn(e.schema,ts)||!Xn&&!vt(e.selection.getRng()))return;qt.preventDefault(),e.setContent(""),ts.firstChild&&c.isBlock(ts.firstChild)?e.selection.setCursorLocation(ts.firstChild,0):e.selection.setCursorLocation(ts,0),e.nodeChanged()}})},W=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},J=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",Ge=>{let vt;if(Ge.target===e.getDoc().documentElement)if(vt=u.getRng(),e.getDoc().getSelection()?.anchorNode!==null&&e.getBody().focus(),Ge.type==="mousedown"){if(qi(vt.startContainer))return;u.placeCaretAt(Ge.clientX,Ge.clientY)}else u.setRng(vt)})},be=()=>{e.on("keydown",Ge=>{if(!z(Ge)&&Ge.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const vt=u.getNode(),qt=vt.previousSibling;if(vt.nodeName==="HR"){c.remove(vt),Ge.preventDefault();return}qt&&qt.nodeName&&qt.nodeName.toLowerCase()==="hr"&&(c.remove(qt),Ge.preventDefault())}}})},ye=()=>{Range.prototype.getClientRects||e.on("mousedown",Ge=>{if(!z(Ge)&&Ge.target.nodeName==="HTML"){const vt=e.getBody();vt.blur(),Hd.setEditorTimeout(e,()=>{vt.focus()})}})},Se=()=>{const Ge=yv(e);e.on("click",vt=>{const qt=vt.target;/^(IMG|HR)$/.test(qt.nodeName)&&c.isEditable(qt)&&(vt.preventDefault(),e.selection.select(qt),e.nodeChanged()),qt.nodeName==="A"&&c.hasClass(qt,Ge)&&qt.childNodes.length===0&&c.isEditable(qt.parentNode)&&(vt.preventDefault(),u.select(qt))})},Ve=()=>{const Ge=vt=>vt.nodeName==="IMG"&&e.dom.isEditable(vt);e.on("mousedown",vt=>{er(M.from(vt.clientX),M.from(vt.clientY),(qt,ro)=>{const Xn=e.getDoc().caretPositionFromPoint(qt,ro),ts=Xn?.offsetNode?.childNodes[Xn.offset-(Xn.offset>0?1:0)]||Xn?.offsetNode;if(X(ts)&&Ge(ts)){const Nl=ts.getBoundingClientRect();vt.preventDefault(),e.hasFocus()||e.focus(),e.selection.select(ts),vt.clientX<Nl.left||vt.clientY<Nl.top?e.selection.collapse(!0):(vt.clientX>Nl.right||vt.clientY>Nl.bottom)&&e.selection.collapse(!1)}})})},et=()=>{const Ge=()=>{const qt=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const ro=u.getStart();ro!==e.getBody()&&(c.setAttrib(ro,"style",null),t(qt,Xn=>{ro.setAttributeNode(Xn.cloneNode(!0))}))}},vt=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",qt=>{let ro;return!z(qt)&&(qt.keyCode===8||qt.keyCode===46)&&vt()?(ro=Ge(),e.getDoc().execCommand("delete",!1),ro(),qt.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",qt=>{if(!z(qt)&&vt()){const ro=Ge();Hd.setEditorTimeout(e,()=>{ro()})}})},Pt=()=>{e.on("keydown",Ge=>{if(!z(Ge)&&Ge.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const vt=u.getNode().previousSibling;if(vt&&vt.nodeName&&vt.nodeName.toLowerCase()==="table")return Ge.preventDefault(),!1}return!0})},un=()=>{e.on("keydown",Ge=>{if(z(Ge)||Ge.keyCode!==$t.BACKSPACE)return;let vt=u.getRng();const qt=vt.startContainer,ro=vt.startOffset,Xn=c.getRoot();let ts=qt;if(!(!vt.collapsed||ro!==0)){for(;ts.parentNode&&ts.parentNode.firstChild===ts&&ts.parentNode!==Xn;)ts=ts.parentNode;ts.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,ts),vt=c.createRng(),vt.setStart(qt,0),vt.setEnd(qt,0),u.setRng(vt))}})},He=()=>{const Ge=br("figcaption");e.on("keydown",vt=>{if(vt.keyCode===$t.LEFT||vt.keyCode===$t.RIGHT){const qt=ne.fromDom(e.selection.getNode());Ge(qt)&&e.selection.isCollapsed()&&sc(qt).bind(ro=>e.selection.getRng().startOffset===0&&vt.keyCode===$t.LEFT?li(ro):e.selection.getRng().endOffset===qt.dom.textContent?.length&&vt.keyCode===$t.RIGHT?rc(ro):M.none()).each(ro=>{e.selection.setCursorLocation(ro.dom,0)})}})},Me=()=>{const Ge=()=>{P("StyleWithCSS",!1),P("enableInlineTableEditing",!1),sE(e)||P("enableObjectResizing",!1)};Q1(e)||e.on("BeforeExecCommand mousedown",Ge)},Ue=()=>{const Ge=()=>{t(c.select("a:not([data-mce-block])"),vt=>{let qt=vt.parentNode;const ro=c.getRoot();if(qt?.lastChild===vt){for(;qt&&!c.isBlock(qt);){if(qt.parentNode?.lastChild!==qt||qt===ro)return;qt=qt.parentNode}c.add(qt,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",vt=>{(vt.type==="setcontent"||vt.command==="mceInsertLink")&&Ge()})},Nt=()=>{e.on("init",()=>{P("DefaultParagraphSeparator",Rr(e))})},Dn=Ge=>{const vt=Ge.getBody(),qt=Ge.selection.getRng();return qt.startContainer===qt.endContainer&&qt.startContainer===vt&&qt.startOffset===0&&qt.endOffset===vt.childNodes.length},Rn=()=>{e.on("keyup focusin mouseup",Ge=>{!$t.modifierPressed(Ge)&&!Dn(e)&&u.normalize()},!0)},go=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Yo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Ss=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Ge=>{let vt;Ge.target.nodeName==="HTML"&&(vt=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(vt),e.selection.normalize(),e.nodeChanged())}))},Is=()=>{R&&e.on("keydown",Ge=>{$t.metaKeyPressed(Ge)&&!Ge.shiftKey&&(Ge.keyCode===37||Ge.keyCode===39)&&(Ge.preventDefault(),e.selection.getSel().modify("move",Ge.keyCode===37?"backward":"forward","lineboundary"))})},Ba=()=>{e.on("click",Ge=>{let vt=Ge.target;do if(vt.tagName==="A"){Ge.preventDefault();return}while(vt=vt.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Rl=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Ge=>{Ge.preventDefault()})})},Lt=()=>{f.addNodeFilter("br",Ge=>{let vt=Ge.length;for(;vt--;)Ge[vt].attr("class")==="Apple-interchange-newline"&&Ge[vt].remove()})},vn=_t,Vo=()=>{if(!v||e.removed)return!1;const Ge=e.selection.getSel();return!Ge||!Ge.rangeCount||Ge.rangeCount===0},Do=()=>{S&&(J(),Se(),Rl(),W(),O&&(Yo(),Ss(),Ba())),v&&(ye(),Me(),go(),Is())},Xa=()=>{un(),ee(),po.windowsPhone||Rn(),S&&(J(),Se(),Nt(),Rl(),Pt(),Lt(),O?(Yo(),Ss(),Ba()):W()),v&&(He(),Ve(),be(),ye(),et(),Me(),Ue(),go(),Is(),Pt())};return Lm(e)?Do():Xa(),{refreshContentEditable:vn,isHidden:Vo}};class NN extends Error{url;constructor(t,o){super(t),this.url=o}}const MN={},JK=(e,t,o)=>new Promise((r,c)=>{const u=ne.fromTag("script");sa(u,{type:"text/javascript",src:e,...o});const f=()=>{Xo(u)};lg(u,"load",()=>{f(),r()}),lg(u,"error",()=>{f(),c(new Error(`Failed to load script url: ${e}`))}),yo(e1(t),u)}),b8=async(e,t)=>{const o=Po.ScriptLoader.getScriptAttributes(e);return await JK(e,t,o).catch(()=>Promise.reject(new NN(`Failed to load component url: ${e}`,e))),e},eY=e=>fc(e,(t,o)=>qo(MN,t).getOrThunk(()=>{if(Yt(window.customElements.get(o))){const r=b8(t,Ch());return MN[t]=r,r}else return Promise.resolve(t)}).catch(r=>(delete MN[t],Promise.reject(r)))),v8=(e,t)=>{const o=Ja(La(e));return hn(o,r=>b8(r,ne.fromDom(t)))},tY=e=>{const t=e.schema.getComponentUrls();return e.inline?eY(t):v8(t,e.getDoc())},y8=async e=>{const t=tY(e),o=Xe(await Promise.allSettled(t),r=>r.status==="rejected");o.length>0&&Ae(o,r=>{if(r.reason instanceof NN){const{url:c}=r.reason;bU(e,c)}})},nY=e=>{y8(e)},PN=mo.DOM,oY=(e,t)=>{const o=ne.fromDom(e.getBody()),r=t1(Vr(o)),c=ne.fromTag("style");Ts(c,"type","text/css"),yo(c,ne.fromText(t)),yo(r,c),e.on("remove",()=>{Xo(c)})},sY=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,BN=e=>Il(e,t=>Wn(t)===!1),C8=e=>{const t=e.options.get,o=e.editorUpload.blobCache;return BN({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_html_in_comments:t("allow_html_in_comments"),allow_mathml_annotation_encodings:t("allow_mathml_annotation_encodings"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),extended_mathml_attributes:t("extended_mathml_attributes"),extended_mathml_elements:t("extended_mathml_elements"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:sY(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:Tm(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:o,document:e.getDoc()})},x8=e=>{const t=e.options.get;return BN({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},rY=e=>{const t=e.options.get;return{...C8(e),...x8(e),...BN({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},aY=e=>{const t=Kv(C8(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let v=b.attr(r);if(v&&!b.attr(u)){if(v.indexOf("data:")===0||v.indexOf("blob:")===0)continue;r==="style"?(v=c.serializeStyle(c.parseStyle(v),b.name),v.length||(v=null),b.attr(u,v),b.attr(r,v)):r==="tabindex"?(b.attr(u,v),b.attr(r,null)):b.attr(u,e.convertURL(v,r,b.name))}}}),t.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),kC(e)&&t.addNodeFilter("#cdata",o=>{let r=o.length;for(;r--;){const c=o[r];c.type=8,c.name="#comment",c.value="[CDATA["+e.dom.encode(c.value??"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new Na("br",1))}}),t},S8=e=>{const t=Z3(e);t&&Hd.setEditorTimeout(e,()=>{let o;t===!0?o=e:o=e.editorManager.get(t),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},$N=e=>{const t=e.dom.getRoot();!e.inline&&(!jC(e)||e.selection.getStart(!0)===t)&&E(t).each(o=>{const r=o.getNode(),c=Zc(r)?E(r).getOr(o):o;e.selection.setRng(c.toRange())})},w8=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Iw(e),e.focus(!0),$N(e),e.nodeChanged({initial:!0});const t=W3(e);ce(t)&&t.call(e,e),S8(e),nh(e)&&H6(e,!0)},pk=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,cY=(e,t,o)=>{const{pass:r,fail:c}=gt(t,b=>tinymce.Resource.has(_p(b))),f=[...r.map(b=>{const v=tinymce.Resource.get(_p(b));return V(v)?Promise.resolve(pk(e).loadRawCss(b,v)):Promise.resolve()}),pk(e).loadAll(c)];return e.inline?f:f.concat([e.ui.styleSheetLoader.loadAll(o)])},E8=e=>{const t=pk(e),o=bC(e),r=e.contentCSS,c=()=>{t.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let v="";lt.each(e.contentStyles,S=>{v+=S+`\r
`}),e.dom.addStyle(v)}const f=Promise.all(cY(e,r,o)).then(u).catch(u),b=Fg(e);return b&&oY(e,b),f},iY=e=>{const t=e.getDoc(),o=e.getBody();$w(e),lE(e)||(t.body.spellcheck=!1,PN.setAttrib(o,"spellcheck","false")),e.quirks=QK(e),Eo(e);const r=$3(e);r!==void 0&&(o.dir=r);const c=G3(e);c&&e.on("BeforeSetContent",u=>{lt.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},T8=e=>{Lm(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},bk=e=>{e.removed!==!0&&(T8(e),w8(e))},lY=e=>{let t=!1;const o=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(o),t=!0,e.setProgressState(!1)}},k8=e=>{const t=e.getElement();let o=e.getDoc();e.inline&&(PN.addClass(t,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const r=e.getBody();r.disabled=!0,e.readonly=Q1(e),e._editableRoot=vv(e),!lu(e)&&e.hasEditableRoot()&&(e.inline&&PN.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=Rb(e),e.schema=Aa(x8(e)),e.dom=mo(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:tE(e),referrerPolicy:fv(e),crossOrigin:Lg(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=aY(e),e.serializer=PO(rY(e),e),e.selection=NO(e.dom,e.getWin(),e.serializer,e),e.annotator=P5(e),e.formatter=Z6(e),e.undoManager=zU(e),e._nodeChangeDispatcher=new pq(e),e._selectionOverrides=uk(e),os(e),lZ(e),zF(e),fZ(e),Lm(e)||(eK(e),TS(e));const c=iq(e);bR(e,c),Xd(e),WU(e),Gq(e,c);const u=ZV(e);iY(e),nY(e),u.fold(()=>{const f=lY(e);E8(e).then(()=>{bk(e),f()})},f=>{e.setProgressState(!0),E8(e).then(()=>{f().then(b=>{e.setProgressState(!1),bk(e),WT(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),bk(e),WT(e)})})})},kS=mo.DOM,vk=(e,t,o,r)=>{const c=ne.fromTag("iframe");return r.each(u=>Ts(c,"tabindex",u)),sa(c,o),sa(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",...po.browser.isFirefox()?{title:t}:{}}),xc(c,"tox-edit-area__iframe"),c},A8=e=>{let t=mC(e)+"<html><head>";fC(e)!==e.editorManager.documentBaseURL&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=Zw(e),r=Gw(e),c=e.translate(Cv(e)),u=po.browser.isFirefox()?"":`aria-label="${c}"`;return qw(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+qw(e)+'" />'),t+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" ${u}><br></body></html>`,t},_8=(e,t)=>{const o=Cv(e),r=e.translate(o),c=fi(ne.fromDom(e.getElement()),"tabindex").bind(ng),u=vk(e.id,r,Ww(e),c).dom;u.onload=()=>{u.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=u,e.iframeHTML=A8(e),kS.add(t.iframeContainer,u)},O8=e=>{const t=e.iframeElement,o=()=>{e.contentDocument=t.contentDocument,k8(e)};if(ob(e)||po.browser.isFirefox()){const r=e.getDoc();r.open(),r.write(e.iframeHTML),r.close(),o()}else{const r=lg(ne.fromDom(t),"load",()=>{r.unbind(),o()});t.srcdoc=e.iframeHTML}},uY=(e,t)=>{_8(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=kS.isHidden(t.editorContainer)),e.getElement().style.display="none",kS.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,O8(e)},D8=mo.DOM,dY=(e,t,o)=>{const r=Ap.get(o),c=Ap.urls[o]||e.editorManager.documentBaseURL.replace(/\/$/,"");if(o=lt.trim(o),r&&lt.inArray(t,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,ce(u.init)&&(u.init(e,c),t.push(o))}catch(u){vU(e,o,u)}}},mY=e=>{const t=o=>{o.keyCode===$t.ESC&&!o.defaultPrevented&&jw(e).isDefaultPrevented()&&o.preventDefault()};document.addEventListener("keyup",t),e.inline||e.on("keyup",t),e.on("remove",()=>{document.removeEventListener("keyup",t),e.inline||e.off("keyup",t)})},Yf=e=>e.replace(/^\-/,""),R8=e=>{const t=[];Ae(J1(e),o=>{dY(e,t,Yf(o))})},fY=e=>{const t=lt.trim(Y1(e)),o=e.ui.registry.getAll().icons,r={...qT.get("default").icons,...qT.get(t).icons};qn(r,(c,u)=>{Pn(o,u)||e.ui.registry.addIcon(u,c)})},N8=e=>{const t=Md(e);if(V(t)){const o=Tb.get(t);e.theme=o(e,Tb.urls[t])||{},ce(e.theme.init)&&e.theme.init(e,Tb.urls[t]||e.editorManager.documentBaseURL.replace(/\/$/,""))}else e.theme={}},gY=e=>{const t=pv(e),o=sy.get(t);e.model=o(e,sy.urls[t])},hY=e=>{XO.init(e)},IN=e=>{const t=e.theme.renderUI;return t?t():P8(e)},yk=e=>{const t=e.getElement(),r=Md(e)(e,t);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:t.offsetHeight,r},M8=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),pY=e=>{const t=D8.create("div");return D8.insertAfter(t,e),M8(t,t)},P8=e=>{const t=e.getElement();return e.inline?M8(null):pY(t)},B8=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,V(Md(e))?IN(e):ce(Md(e))?yk(e):P8(e)},bY=(e,t)=>{const o={show:M.from(t.show).getOr(_t),hide:M.from(t.hide).getOr(_t),isEnabled:M.from(t.isEnabled).getOr(Te),setEnabled:r=>{r&&(e.mode.get()==="readonly"||nh(e))||M.from(t.setEnabled).each(u=>u(r))}};e.ui={...e.ui,...o}},$8=async e=>{e.dispatch("ScriptsLoaded"),fY(e),mY(e),N8(e),gY(e),hY(e),R8(e);const t=await B8(e);bY(e,M.from(t.api).getOr({})),e.editorContainer=t.editorContainer,OU(e),e.inline?k8(e):uY(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Wb=mo.DOM,I8=e=>e.charAt(0)==="-",vY=(e,t)=>{const o=nE(t),r=oE(t);if(!Ci.hasCode(o)&&o!=="en"){const c=hs(r)?r:`${t.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{Ab(t,c,o)})}},yY=(e,t)=>{const o=Md(e);if(V(o)&&!I8(o)&&!Pn(Tb.urls,o)){const r=rE(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${t}.js`;Tb.load(o,c).catch(()=>{O6(e,c,o)})}},CY=(e,t)=>{const o=pv(e);if(o!=="plugin"&&!Pn(sy.urls,o)){const r=F3(e),c=V(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${t}.js`;sy.load(o,c).catch(()=>{pU(e,c,o)})}},L8=(e,t)=>{XO.load(e,t)},Ck=e=>M.from(hC(e)).filter(hs).map(t=>({url:t,name:M.none()})),xk=(e,t,o)=>M.from(t).filter(r=>hs(r)&&!qT.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:M.some(r)})),xY=(e,t,o)=>{const r=xk(t,"default",o),c=Ck(t).orThunk(()=>xk(t,Y1(t),""));Ae(gc([r,c]),u=>{e.add(u.url).catch(()=>{hU(t,u.url,u.name.getOrUndefined())})})},F8=(e,t)=>{const o=(r,c)=>{r!=="licensekeymanager"&&Ap.load(r,c).catch(()=>{_6(e,c,r)})};qn(SC(e),(r,c)=>{o(c,r),e.options.set("plugins",J1(e).concat(c))}),Ae(J1(e),r=>{r=lt.trim(r),r&&!Ap.urls[r]&&!I8(r)&&o(r,`plugins/${r}/plugin${t}.js`)})},H8=e=>{const t=Md(e);return!V(t)||X(Tb.get(t))},SY=e=>{const t=pv(e);return X(sy.get(t))},z8=(e,t)=>{const o=Po.ScriptLoader,r=()=>{!e.removed&&H8(e)&&SY(e)&&$8(e)};yY(e,t),CY(e,t),L8(e,t),vY(o,e),xY(o,e,t),F8(e,t),o.loadQueue().then(r,r)},wY=(e,t)=>y2.forElement(e,{contentCssCors:xC(t),referrerPolicy:fv(t)}),EY=e=>{const t=e.id;Ci.setCode(nE(e));const o=()=>{Wb.unbind(window,"ready",o),e.render()};if(!Wh.Event.domLoaded){Wb.bind(window,"ready",o);return}if(!e.getElement())return;const r=ne.fromDom(e.getElement()),c=Jn(r);e.on("remove",()=>{nt(r.dom.attributes,f=>cr(r,f.name)),sa(r,c)}),e.ui.styleSheetLoader=wY(r,e),X1(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||Wb.getParent(t,"form");u&&(e.formElement=u,CC(e)&&!Cl(e.getElement())&&(Wb.insertAfter(Wb.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},Wb.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),V3(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=A6(e),e.notificationManager=Ix(e),fE(e)&&e.on("GetContent",f=>{f.save&&(f.content=Wb.encode(f.content))}),U3(e)&&e.on("submit",()=>{e.initialized&&e.save()}),bv(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),z8(e,e.suffix)},V8=["#E41B60","#AD1457","#1939EC","#001CB5","#648000","#465B00","#006CE7","#0054B4","#00838F","#006064","#00866F","#004D40","#51742F","#385021","#CF4900","#A84600","#CC0000","#6A1B9A","#9C27B0","#6A00AB","#3041BA","#0A1877","#774433","#452B24","#607D8B","#455A64"],TY=e=>Intl.Segmenter?`${new Intl.Segmenter().segment(e)[Symbol.iterator]().next().value?.segment}`:e.trim()[0],U8=(e,t)=>{let o=5381;for(let r=0;r<e.length;r++)o=(o<<5)+o+e.charCodeAt(r);return(o>>>0)%(t+1)},j8=e=>{const t=U8(e??"",V8.length-1);return V8[t]},W8=(e,t,o)=>{const r=o/2;return`<svg height="${o}" width="${o}" xmlns="http://www.w3.org/2000/svg"><circle cx="${r}" cy="${r}" r="${r}" fill="${t}"/><text x="50%" y="50%" text-anchor="middle" dominant-baseline="central" fill="#FFF" font-family="sans-serif" font-size="${r}">`+e+"</text></svg>"},Z8=(e,t,o)=>"data:image/svg+xml,"+encodeURIComponent(W8(e,t,o)),Sk=(e,t={size:36})=>Z8(TY(e.name),j8(e.id),t.size),G8=Rc([Sm("id"),_f("name"),_f("avatar"),fo("custom")]),LN=e=>{const t={};return qn(e,(o,r)=>{o.each(c=>{t[r]=c})}),t},q8=e=>{if(!Array.isArray(e))throw new Error("fetch_users must return an array");const t=hn(e,c=>ap("Invalid user object",G8,c)),{errors:o,values:r}=Fr(t);if(o.length>0){const c=hn(o,(u,f)=>`User at index ${f}: ${Rd(u)}`);console.warn(`User validation errors:
`+c.join(`
`))}return hn(r,c=>{const{id:u,name:f,avatar:b,...v}=c;return{id:u,name:f.getOr(u),avatar:b.getOr(Sk({id:u,name:f.getOr(u)})),...LN(v)}})},K8=e=>{const t=new Map,o=new Map,r=S=>M.from(t.get(S)),c=(S,O)=>{t.set(O,S)},u=(S,O)=>M.from(o.get(S)).each(({reject:R})=>{R(O),o.delete(S)}),f=(S,O)=>M.from(o.get(S)).each(({resolve:R})=>{R(O),o.delete(S)}),b=S=>{const O=bE(e);if(Array.isArray(S)){if(!O)return Su(S,P=>Promise.resolve({id:P,name:P,avatar:Sk({id:P,name:P})}))}else return{};const R=Ja(Xe(S,P=>!r(P).isSome()));return Ae(R,P=>{const z=new Promise((ee,W)=>{o.set(P,{resolve:ee,reject:W})});c(z,P)}),R.length>0&&O(R).then(q8).then(P=>{const z=new Set(hn(P,ee=>ee.id));Ae(P,ee=>f(ee.id,ee)),Ae(R,ee=>{z.has(ee)||u(ee,new Error(`User ${ee} not found`))})}).catch(P=>{Ae(R,z=>u(z,P instanceof Error?P:new Error("Network error")))}),Ho(S,(P,z)=>(P[z]=r(z).getOr(Promise.resolve({id:z,name:z,avatar:Sk({id:z,name:z})})),P),{})},v=pE(e);return Object.freeze({userId:v,fetchUsers:b})},Y8=e=>K8(e),kY=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,nh(e)||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),Uw(e,t))},AY=e=>e._editableRoot,X8=(e,t)=>({sections:it(e),options:it(t)}),FN=Ul().deviceType,HN=FN.isPhone(),Q8=FN.isTablet(),Zb=e=>{if(Yt(e))return[];{const t=At(e)?e:e.split(/[ ,]/),o=hn(t,Rs);return Xe(o,hs)}},zN=(e,t)=>{const o=ls(t,(r,c)=>Wt(e,c));return X8(o.t,o.f)},wk=(e,t,o={})=>{const r=e.sections(),c=qo(r,t).getOr({});return lt.extend({},o,c)},Ek=(e,t)=>Pn(e.sections(),t),J8=(e,t)=>Ek(e,t)?e.sections()[t]:{},e7=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:qo(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),VN=(e,t)=>{const o=t.external_plugins??{};return e&&e.external_plugins?lt.extend({},e.external_plugins,o):o},t7=(e,t)=>[...Zb(e),...Zb(t)],n7=(e,t,o,r)=>e&&Ek(t,"mobile")?r:o,_Y=(e,t,o,r)=>{const c=Zb(o.forced_plugins),u=Zb(r.plugins),f=J8(t,"mobile"),b=f.plugins?Zb(f.plugins):u,v=n7(e,t,u,b),S=t7(c,v);return lt.extend(r,{forced_plugins:c,plugins:S})},o7=(e,t)=>e&&Ek(t,"mobile"),OY=(e,t,o,r,c)=>{const u=e?{mobile:e7(c.mobile??{},t)}:{},f=zN(["mobile"],Tu(u,c)),b=lt.extend(o,r,f.options(),o7(e,f)?wk(f,"mobile"):{},{external_plugins:VN(r,f.options())});return _Y(e,f,r,b)},DY=(e,t)=>{const o=Di(t);return OY(HN||Q8,HN,o,e,o)},RY=(e,t)=>p6(e,t),s7=e=>{const t=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{Ae("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&t("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},NY=e=>{const t=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return io(c,u=>X(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},r7=e=>{s7(e),NY(e)},Tk=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const o=e.getDoc();let r;try{o.execCommand(t)}catch{r=!0}if(t==="paste"&&!o.queryCommandEnabled(t)&&(r=!0),r||!o.queryCommandSupported(t)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(po.os.isMacOS()||po.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},MY=(e,t,o,r)=>{const c=ne.fromDom(e.getRoot());return ax(c,Le.fromRangeStart(t),r)?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Pc(c,Le.fromRangeEnd(t),r)?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},a7=e=>{if(typeof e!="string"){const t=lt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},PY=(e,t)=>{const o=e.selection,r=e.dom;return/^ | $/.test(t)?MY(r,o.getRng(),t,e.schema):t},AS=(e,t)=>{if(e.selection.isEditable()){const{content:o,details:r}=a7(t);wx(e,{...r,content:PY(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=eh(e,c.content,r);tO(e,u,c),e.addVisual()})}},UN=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,o,r)=>{AS(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,o,r)=>{AS(e,e.dom.encode(r))},insertHTML:(t,o,r)=>{AS(e,r)},mceInsertContent:(t,o,r)=>{AS(e,r)},mceSetContent:(t,o,r)=>{e.setContent(r)},mceReplaceContent:(t,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(Y3(e))}})},BY={"font-size":"size","font-family":"face"},$Y=br("font"),c7=(e,t,o)=>{const r=u=>ir(u,e).orThunk(()=>$Y(u)?qo(BY,e).bind(f=>fi(u,f)):M.none()),c=u=>no(ne.fromDom(t),u);return vl(ne.fromDom(o),u=>r(u),c)},IY=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),LY=(e,t)=>M.from(mo.DOM.getStyle(t,e,!0)),i7=e=>(t,o)=>M.from(o).map(ne.fromDom).filter(Hs).bind(r=>c7(e,t,r.dom).or(LY(e,r.dom))).getOr(""),FY=i7("font-size"),HY=A(IY,i7("font-family")),l7=e=>E(e.getBody()).bind(t=>{const o=t.container();return M.from(dt(o)?o.parentNode:o)}),u7=e=>M.from(e.selection.getRng()).bind(t=>{const o=e.getBody();return t.startContainer===o&&t.startOffset===0?M.none():M.from(e.selection.getStart(!0))}),zY=(e,t)=>u7(e).orThunk(ae(l7,e)).map(ne.fromDom).filter(Hs).bind(t),jN=(e,t)=>zY(e,co(M.some,t)),d7=(e,t)=>{if(/^[0-9.]+$/.test(t)){const o=parseInt(t,10);if(o>=1&&o<=7){const r=AC(e),c=_C(e);return c.length>0?c[o-1]||t:r[o-1]||t}else return t}else return t},VY=e=>{const t=e.split(/\s*,\s*/);return hn(t,o=>o.indexOf(" ")!==-1&&!(kn(o,'"')||kn(o,"'"))?`'${o}'`:o).join(",")},n=(e,t)=>{const o=d7(e,t);e.formatter.toggle("fontname",{value:VY(o)}),e.nodeChanged()},s=e=>jN(e,t=>HY(e.getBody(),t.dom)).getOr(""),a=(e,t)=>{e.formatter.toggle("fontsize",{value:d7(e,t)}),e.nodeChanged()},i=e=>jN(e,t=>FY(e.getBody(),t.dom)).getOr(""),d=e=>jN(e,t=>{const o=ne.fromDom(e.getBody()),r=vl(t,u=>ir(u,"line-height"),ae(no,o)),c=()=>{const u=parseFloat(Vs(t,"line-height")),f=parseFloat(Vs(t,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),g=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},h=e=>{const t=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{t(o)},"ForeColor,HiliteColor":(o,r,c)=>{t(o,{value:c})},BackColor:(o,r,c)=>{t("hilitecolor",{value:c})},FontName:(o,r,c)=>{n(e,c)},FontSize:(o,r,c)=>{a(e,c)},LineHeight:(o,r,c)=>{g(e,c)},Lang:(o,r,c)=>{t(o,{value:c.code,customValue:c.customCode??null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(o,r,c)=>{t(V(c)?c:"p")},mceToggleFormat:(o,r,c)=>{t(c)}})},C=e=>{const t=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>t(o),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>s(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>i(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>d(e))},x=e=>{h(e),C(e)},T=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},_=e=>{e.editorCommands.addCommands({Indent:()=>{vI(e)},Outdent:()=>{ch(e)}}),e.editorCommands.addCommands({Outdent:()=>hI(e),Indent:()=>aZ(e)},"state")},N=e=>{const t=(o,r,c)=>{if(e.mode.isReadOnly())return;const u=V(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");Ye(u)&&V(u.href)&&(u.href=u.href.replace(/ /g,"%20").replace(/&amp;/g,"&"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},H=(e,t,o,r)=>{const c=e.dom,u=b=>c.isBlock(b)&&b.parentElement===o,f=u(t)?t:c.getParent(r,u,o);return M.from(f).map(ne.fromDom)},j=(e,t)=>{if(e.mode.isReadOnly())return;const o=e.dom,r=e.selection.getRng(),c=t?e.selection.getStart():e.selection.getEnd(),u=t?r.startContainer:r.endContainer,f=dS(o,u);if(!f||!f.isContentEditable)return;const b=t?da:di,v=Rr(e);H(e,c,f,u).each(S=>{const O=FL(e,u,S.dom,f,!1,v);b(S,ne.fromDom(O)),e.selection.setCursorLocation(O,0),e.dispatch("NewBlock",{newBlock:O}),lS(e,"insertParagraph")})},Z=e=>j(e,!0),oe=e=>j(e,!1),le=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{Z(e)},InsertNewBlockAfter:()=>{oe(e)}})},Q=e=>{e.editorCommands.addCommands({insertParagraph:()=>{q4(fS,e)},mceInsertNewLine:(t,o,r)=>{nF(e,r)},InsertLineBreak:(t,o,r)=>{q4(XL,e)}})},me=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>kt(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(t,o,r)=>{e.selection.select(r)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),hi);if(t){const o=e.dom.createRng();o.selectNodeContents(t),e.selection.setRng(o)}}})},ve=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,o,r)=>{U5(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},Re=e=>{r7(e),Tk(e),T(e),me(e),UN(e),N(e),_(e),le(e),Q(e),x(e),ve(e)},Ie=["toggleview"],Et=e=>Wt(Ie,e.toLowerCase());class Je{editor;commands={state:{},exec:{},value:{}};constructor(t){this.editor=t}execCommand(t,o=!1,r,c){const u=this.editor,f=t.toLowerCase(),b=c?.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Q7(u)),u.dispatch("BeforeExecCommand",{command:t,ui:o,value:r}).isDefaultPrevented()))return!1;const S=this.commands.exec[f];return ce(S)?(S(f,o,r,c),u.dispatch("ExecCommand",{command:t,ui:o,value:r,args:c}),!0):!1}queryCommandState(t){if(!Et(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=t.toLowerCase(),r=this.commands.state[o];return ce(r)?r(o):!1}queryCommandValue(t){if(!Et(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=t.toLowerCase(),r=this.commands.value[o];return ce(r)?r(o):""}addCommands(t,o="exec"){const r=this.commands;qn(t,(c,u)=>{Ae(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(t,o,r){const c=t.toLowerCase();this.commands.exec[c]=(u,f,b,v)=>o.call(r??this.editor,f,b,v)}removeCommand(t,o){const r=t.toLowerCase();o?delete this.commands[o][r]:(delete this.commands.exec[r],delete this.commands.state[r],delete this.commands.value[r])}queryCommandSupported(t){const o=t.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(t,o,r){this.commands.state[t.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(t,o,r){this.commands.value[t.toLowerCase()]=()=>o.call(r??this.editor)}}const ct=lt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class at{static isNative(t){return!!ct[t.toLowerCase()]}settings;scope;toggleEvent;bindings={};constructor(t){this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||pe}fire(t,o){return this.dispatch(t,o)}dispatch(t,o){const r=t.toLowerCase(),c=k0(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const v=u[f];if(!v.removed){if(v.once&&this.off(r,v.func),c.isImmediatePropagationStopped())return c;if(v.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(t,o,r,c){if(o===!1&&(o=pe),o){const u={func:o,removed:!1};c&&lt.extend(u,c);const f=t.toLowerCase().split(" ");let b=f.length;for(;b--;){const v=f[b];let S=this.bindings[v];S||(S=[],this.toggleEvent(v,!0)),r?S=[u,...S]:S=[...S,u],this.bindings[v]=S}}return this}off(t,o){if(t){const r=t.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return qn(this.bindings,(b,v)=>{this.toggleEvent(v,!1),delete this.bindings[v]}),this;if(f){if(!o)f.length=0;else{const b=gt(f,v=>v.func===o);f=b.fail,this.bindings[u]=f,Ae(b.pass,v=>{v.removed=!0})}f.length||(this.toggleEvent(t,!1),delete this.bindings[u])}}}else qn(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(t,o,r){return this.on(t,o,r,{once:!0})}has(t){t=t.toLowerCase();const o=this.bindings[t];return!(!o||o.length===0)}}const fn=e=>(e._eventDispatcher||(e._eventDispatcher=new at({scope:e,toggleEvent:(t,o)=>{at.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,o)}})),e._eventDispatcher),Jt={fire(e,t,o){return Ex("fire"),this.dispatch(e,t,o)},dispatch(e,t,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return k0(e.toLowerCase(),t??{},r);const c=fn(r).dispatch(e,t);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,t,o){return fn(this).on(e,t,o)},off(e,t){return fn(this).off(e,t)},once(e,t){return fn(this).once(e,t)},hasEventListeners(e){return fn(this).has(e)}},Kn=mo.DOM;let gn;const $n=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const o=hv(e);return o?(e.eventRoot||(e.eventRoot=Kn.select(o)[0]),e.eventRoot):e.getBody()},tn=e=>!e.hidden&&!nh(e),Qe=(e,t,o)=>{tn(e)?e.dispatch(t,o):nh(e)&&EU(e,o)},pt=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const o=$n(e,t);if(hv(e)){if(gn||(gn={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||gn&&(qn(gn,(c,u)=>{e.dom.unbind($n(e,u))}),gn=null)})),gn[t])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const v=f[b].getBody();(v===u||Kn.isChildOf(u,v))&&Qe(f[b],t,c)}};gn[t]=r,Kn.bind(o,t,r)}else{const r=c=>{Qe(e,t,c)};Kn.bind(o,t,r),e.delegates[t]=r}},Sn={...Jt,bindPendingEventDelegates(){const e=this;lt.each(e._pendingNativeEvents,t=>{pt(e,t)})},toggleNativeEvent(e,t){const o=this;e==="focus"||e==="blur"||o.removed||(t?o.initialized?pt(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind($n(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),o=e.dom;e.delegates&&(qn(e.delegates,(r,c)=>{e.dom.unbind($n(e,c),c,r)}),delete e.delegates),!e.inline&&t&&o&&(t.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(t),o.unbind(e.getContainer()))}},zn=e=>V(e)?{value:e.split(/[ ,]/),valid:!0}:dn(e,V)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ln=e=>{const t=(()=>{switch(e){case"array":return At;case"boolean":return nn;case"function":return ce;case"number":return Uo;case"object":return Ye;case"string":return V;case"string[]":return zn;case"object[]":return o=>dn(o,Ye);case"regexp":return o=>ft(o,RegExp);default:return Te}})();return o=>uc(o,t,`The value must be a ${e}.`)},Fn=e=>V(e.processor),es=(e,t)=>{const o=rl(t.message)?"":`. ${t.message}`;return e+o},Oo=e=>e.valid,uc=(e,t,o="")=>{const r=t(e);return nn(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},$s=(e,t,o)=>{if(!Wn(t)){const r=uc(t,o);if(Oo(r))return r.value;console.error(es(`Invalid default value passed for the "${e}" option`,r))}},el=(e,t,o=t)=>{const r={},c={},u=(z,ee,W)=>{const J=uc(ee,W);return Oo(J)?(c[z]=J.value,!0):(console.warn(es(`Invalid value passed for the ${z} option`,J)),!1)},f=(z,ee)=>{const W=Fn(ee)?ln(ee.processor):ee.processor,J=$s(z,ee.default,W);r[z]={...ee,default:J,processor:W},qo(c,z).orThunk(()=>qo(t,z)).each(ye=>u(z,ye,W))},b=z=>Pn(r,z);return{register:f,isRegistered:b,get:z=>qo(c,z).orThunk(()=>qo(r,z).map(ee=>ee.default)).getOrUndefined(),set:(z,ee)=>{if(b(z)){const W=r[z];return W.immutable?(console.error(`"${z}" is an immutable option and cannot be updated`),!1):u(z,ee,W.processor)}else return console.warn(`"${z}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:z=>{const ee=b(z);return ee&&delete c[z],ee},isSet:z=>Pn(c,z),debug:()=>{try{console.log(JSON.parse(JSON.stringify(o,(z,ee)=>nn(ee)||Uo(ee)||V(ee)||se(ee)||At(ee)||ut(ee)?ee:Object.prototype.toString.call(ee))))}catch(z){console.error(z)}}}},Pa=(e,t)=>{e.dom.contentEditable="true"},vu=(e,t)=>{const o=ne.fromDom(e.getBody());t?(e.readonly=!0,e.hasEditableRoot()&&Pa(o),eD(e)):(e.readonly=!1,F6(e))},Ka=e=>e.readonly,ad=e=>{const t=e.undoManager.add();X(t)&&(e.undoManager.undo(),e.undoManager.reset())},Lp=e=>io(e,t=>t.type==="characterData"||t.type==="childList"),Xf=e=>{const t=r=>{Ka(e)&&Lp(r)&&ad(e)},o=new MutationObserver(t);e.on("beforeinput paste cut dragend dragover draggesture dragdrop drop drag",r=>{Ka(e)&&r.preventDefault()}),e.on("BeforeExecCommand",r=>{(r.command==="Undo"||r.command==="Redo")&&Ka(e)&&r.preventDefault()}),e.on("compositionstart",()=>{Ka(e)&&o.observe(e.getBody(),{characterData:!0,childList:!0,subtree:!0})}),e.on("compositionend",()=>{if(Ka(e)){const r=o.takeRecords();t(r)}o.disconnect()})},Py=["design","readonly"],Qf=(e,t,o,r)=>{const c=o[t.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&vu(e,u.editorReadOnly),t.set(r),R3(e,r)},_S=(e,t,o,r)=>{if(!(r===o.get()||e.initialized&&nh(e))){if(!Pn(t,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?Qf(e,o,t,r):e.on("init",()=>Qf(e,o,t,r))}},WN=(e,t,o)=>{if(Wt(Py,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${t}:`,r)}}}}},By=e=>{const t=rn("design"),o=rn({design:{activate:_t,deactivate:_t,editorReadOnly:!1},readonly:{activate:_t,deactivate:_t,editorReadOnly:!0}});return Xf(e),TU(e),{isReadOnly:()=>Ka(e),set:r=>_S(e,o.get(),t,r),get:()=>t.get(),register:(r,c)=>{o.set(WN(o.get(),r,c))}}},$y=lt.each,Iy=lt.explode,m7={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},ZN=lt.makeMap("alt,ctrl,shift,meta,access"),UY=e=>e in ZN,GN=e=>{const t={},o=po.os.isMacOS()||po.os.isiOS();$y(Iy(e.toLowerCase(),"+"),u=>{UY(u)?t[u]=!0:/^[0-9]{2,}$/.test(u)?t.keyCode=parseInt(u,10):(t.charCode=u.charCodeAt(0),t.keyCode=m7[u]||u.toUpperCase().charCodeAt(0))});const r=[t.keyCode];let c;for(c in ZN)t[c]?r.push(c):t[c]=!1;return t.id=r.join(","),t.access&&(t.alt=!0,o?t.ctrl=!0:t.shift=!0),t.meta&&(o?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Ly{editor;shortcuts={};pendingPatterns=[];constructor(t){this.editor=t;const o=this;t.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&($y(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(t,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return $y(Iy(lt.trim(t)),b=>{const v=u.createShortcut(b,o,f,c);u.shortcuts[v.id]=v}),!0}remove(t){const o=this.createShortcut(t);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(t){const o=this,r=t;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:lt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(t,o,r,c){const u=lt.map(Iy(t,">"),GN);return u[u.length-1]=lt.extend(u[u.length-1],{func:r,scope:c||this.editor}),lt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,o){return!o||o.ctrl!==t.ctrlKey||o.meta!==t.metaKey||o.alt!==t.altKey||o.shift!==t.shiftKey?!1:t.keyCode===o.keyCode||t.charCode&&t.charCode===o.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const Fy=()=>{const e=cG();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,addContext:e.addContext,getAll:e.getAll}},Qd=mo.DOM,qN=lt.extend,f7=lt.each;class OS{baseUri;id;editorUid;plugins={};documentBaseURI;baseURI;contentCSS=[];contentStyles=[];ui;mode;options;editorUpload;userLookup;shortcuts;loadedCSS={};editorCommands;suffix;editorManager;hidden;inline;hasVisual;isNotDirty=!1;annotator;bodyElement;bookmark;composing=!1;container;contentAreaContainer;contentDocument;contentWindow;delegates;destroyed=!1;dom;editorContainer;eventRoot;formatter;formElement;formEventDelegate;hasHiddenInput=!1;iframeElement=null;iframeHTML;initialized=!1;notificationManager;orgDisplay;orgVisibility;parser;quirks;readonly=!1;removed=!1;schema;selection;serializer;startContent="";targetElm;theme;model;undoManager;windowManager;licenseKeyManager;_beforeUnload;_eventDispatcher;_nodeChangeDispatcher;_pendingNativeEvents=[];_selectionOverrides;_skinLoaded=!1;_editableRoot=!0;bindPendingEventDelegates;toggleNativeEvent;unbindAllNativeEvents;fire;dispatch;on;off;once;hasEventListeners;constructor(t,o,r){this.editorManager=r,qN(this,Sn);const c=this;this.id=t,this.editorUid=Fl(),this.hidden=!1;const u=DY(r.defaultOptions,o);this.options=el(c,u,o),K1(c),this.userLookup=Y8(this);const f=this.options.get;f("deprecation_warnings")&&Q9(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const v=f("base_url");v&&r._setBaseUrl(v),this.baseUri=r.baseURI;const S=fv(c);S&&(Po.ScriptLoader._setReferrerPolicy(S),mo.DOM.styleSheetLoader._setReferrerPolicy(S)),Po.ScriptLoader._setCrossOrigin(z=>Lg(c)(z,"script")),mo.DOM.styleSheetLoader._setCrossOrigin(z=>Lg(c)(z,"stylesheet"));const O=xC(c);X(O)&&mo.DOM.styleSheetLoader._setContentCssCors(O),Zr.languageLoad=f("language_load"),Zr.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Wd(fC(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=X1(c),this.hasVisual=eb(c),this.shortcuts=new Ly(this),this.editorCommands=new Je(this),Re(this);const R=f("cache_suffix");R&&(po.cacheSuffix=R.replace(/^[\?\&]+/,"")),this.ui={registry:Fy(),styleSheetLoader:void 0,show:_t,hide:_t,setEnabled:_t,isEnabled:Te},this.mode=By(c),Object.defineProperty(this,"editorUid",{writable:!1,configurable:!1,enumerable:!0}),r.dispatch("SetupEditor",{editor:this});const P=Hg(c);ce(P)&&P.call(c,c)}render(){EY(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return zv(this)}translate(t){return Ci.translate(t)}getParam(t,o,r){const c=this.options;return c.isRegistered(t)||(X(r)?c.register(t,{processor:r,default:o}):c.register(t,{processor:Te,default:o})),!c.isSet(t)&&!Wn(o)?o:c.get(t)}hasPlugin(t,o){return Wt(J1(this),t)?o?Ap.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,o,r){this.editorCommands.addCommand(t,o,r)}addQueryStateHandler(t,o,r){this.editorCommands.addQueryStateHandler(t,o,r)}addQueryValueHandler(t,o,r){this.editorCommands.addQueryValueHandler(t,o,r)}addShortcut(t,o,r,c){this.shortcuts.add(t,o,r,c)}execCommand(t,o,r,c){return this.editorCommands.execCommand(t,o,r,c)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Qd.show(t.getContainer()),Qd.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Qd.hide(t.getContainer()),Qd.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,o){this.dispatch("ProgressState",{state:t,time:o})}load(t={}){const o=this,r=o.getElement();if(!o.removed&&r){const c={...t,load:!0},u=Cl(r)?r.value:r.innerHTML;o.setContent(u,c),c.no_events||o.dispatch("LoadContent",{...c,element:r})}}save(t={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...t,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,Cl(r))r.value=u;else{(t.is_removing||!o.inline)&&(r.innerHTML=u);const b=Qd.getParent(o.id,"form");b&&f7(b.elements,v=>v.name===o.id?(v.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(t,o){BO(this,t,o)}getContent(t){return iU(this,t)}insertContent(t,o){o&&(t=qN({content:t},o)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?BO(this,this.startContent,{initial:!0,format:"raw"}):BO(this,t,{initial:!0}),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const o=!this.isNotDirty;this.isNotDirty=!t,t&&t!==o&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Qd.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Qd.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const o=t.iframeElement;o&&(t.contentWindow=o.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const o=t.getWin();o&&(t.contentDocument=o.document)}return t.contentDocument}getBody(){const t=this.getDoc();return this.bodyElement??t?.body??null}convertURL(t,o,r){const c=this,u=c.options.get,f=Pd(c);if(ce(f))return f.call(c,t,r,!0,o);if(!u("convert_urls")||r==="link"||Ye(r)&&r.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const b=new Wd(t);return b.protocol!=="http"&&b.protocol!=="https"&&b.protocol!==""?t:u("relative_urls")?c.documentBaseURI.toRelative(t):(t=c.documentBaseURI.toAbsolute(t,u("remove_script_host")),t)}addVisual(t){RY(this,t)}setEditableRoot(t){kY(this,t)}hasEditableRoot(){return AY(this)}remove(){IO(this)}destroy(t){k6(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Fp=mo.DOM,DS=lt.each;let RS=!1,Gb,ua=[];const uh=e=>{const t=e.type;DS(Zm.get(),o=>{switch(t){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},kk=e=>{if(e!==RS){const t=mo.DOM;e?(t.bind(window,"resize",uh),t.bind(window,"scroll",uh)):(t.unbind(window,"resize",uh),t.unbind(window,"scroll",uh)),RS=e}},Ak=e=>{const t=ua;return ua=Xe(ua,o=>e!==o),Zm.activeEditor===e&&(Zm.activeEditor=ua.length>0?ua[0]:null),Zm.focusedEditor===e&&(Zm.focusedEditor=null),t.length!==ua.length},jY=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Ak(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},_k=document.compatMode!=="CSS1Compat",Zm={...Jt,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,pageUid:Fl(),majorVersion:"8",minorVersion:"3.2",releaseDate:"2026-01-14",i18n:Ci,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",o="",r=Wd.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)t=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const v=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){v.indexOf(".min")!==-1&&(o=".min"),t=b.substring(0,b.lastIndexOf("/"));break}}if(!t&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),t=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Wd(r).toAbsolute(t),e.documentBaseURL=r,e.baseURI=new Wd(e.baseURL),e.suffix=o,F5(e),Ae(["majorVersion","minorVersion","releaseDate","pageUid","_addLicenseKeyManager"],u=>Object.defineProperty(e,u,{writable:!1,configurable:!1,enumerable:!0}))},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&qn(r,(c,u)=>{Zr.PluginManager.urls[u]=c})},init(e){const t=this;let o;const r=lt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(O,R)=>O.inline&&R.tagName.toLowerCase()in r,u=O=>{let R=O.id;return R||(R=qo(O,"name").filter(P=>!Fp.get(P)).getOrThunk(Fp.uniqueId),O.setAttribute("id",R)),R},f=O=>{const R=e[O];if(R)return R.apply(t,[])},b=O=>po.browser.isIE()||po.browser.isEdge()?(YT("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/8/support/#supportedwebbrowsers"),[]):_k?(YT("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):V(O.selector)?Fp.select(O.selector):X(O.target)?[O.target]:[];let v=O=>{o=O};const S=()=>{let O=0;const R=[];let P;const z=(ee,W,J)=>{const be=new OS(ee,W,t);R.push(be),be.on("init",()=>{++O===P.length&&v(R)}),be.targetElm=be.targetElm||J,be.render()};Fp.unbind(window,"ready",S),f("onpageload"),P=Ja(b(e)),lt.each(P,ee=>{jY(t.get(ee.id))}),P=lt.grep(P,ee=>!t.get(ee.id)),P.length===0?v([]):DS(P,ee=>{c(e,ee)?YT("Could not initialize inline editor on invalid inline target element",ee):z(u(ee),e,ee)})};return Fp.bind(window,"ready",S),new Promise(O=>{o?O(o):v=R=>{O(R)}})},get(e){return arguments.length===0?ua.slice(0):V(e)?No(ua,t=>t.id===e).getOr(null):Uo(e)&&ua[e]?ua[e]:null},add(e){const t=this,o=t.get(e.id);return o===e||(o===null&&ua.push(e),kk(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),Gb||(Gb=r=>{const c=t.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Gb))),e},createEditor(e,t){return this.add(new OS(e,t,this))},remove(e){const t=this;let o;if(!e){for(let r=ua.length-1;r>=0;r--)t.remove(ua[r]);return}if(V(e)){DS(Fp.select(e),r=>{o=t.get(r.id),o&&t.remove(o)});return}return o=e,se(t.get(o.id))?null:(Ak(o)&&t.dispatch("RemoveEditor",{editor:o}),ua.length===0&&window.removeEventListener("beforeunload",Gb),o.remove(),kk(ua.length>0),o)},execCommand(e,t,o){const r=this,c=Ye(o)?o.id??o.index:o;switch(e){case"mceAddEditor":{if(!r.get(c)){const u=o.options;new OS(c,u,r).render()}return!0}case"mceRemoveEditor":{const u=r.get(c);return u&&u.remove(),!0}case"mceToggleEditor":{const u=r.get(c);return u?(u.isHidden()?u.show():u.hide(),!0):(r.execCommand("mceAddEditor",!1,o),!0)}}return r.activeEditor?r.activeEditor.execCommand(e,t,o):!1},triggerSave:()=>{DS(ua,e=>{e.save()})},addI18n:(e,t)=>{Ci.add(e,t)},translate:e=>Ci.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Wd(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Wd(this.baseURL)},_addLicenseKeyManager:e=>XO.add(e)};Zm.setup();const NS=(()=>{const e=Ic(),t=u=>({items:u,types:en(u),getType:f=>qo(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:t,write:o,read:r,clear:c}})(),g7=Math.min,Hy=Math.max,Ya=Math.round,qb=(e,t,o)=>{let r=t.x,c=t.y;const u=e.w,f=e.h,b=t.w,v=t.h,S=(o||"").split("");return S[0]==="b"&&(c+=v),S[1]==="r"&&(r+=b),S[0]==="c"&&(c+=Ya(v/2)),S[1]==="c"&&(r+=Ya(b/2)),S[3]==="b"&&(c-=f),S[4]==="r"&&(r-=u),S[3]==="c"&&(c-=Ya(f/2)),S[4]==="c"&&(r-=Ya(u/2)),Kb(r,c,u,f)},WY=(e,t,o,r)=>{for(let c=0;c<r.length;c++){const u=qb(e,t,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},h7=(e,t,o)=>Kb(e.x-t,e.y-o,e.w+t*2,e.h+o*2),KN=(e,t)=>{const o=Hy(e.x,t.x),r=Hy(e.y,t.y),c=g7(e.x+e.w,t.x+t.w),u=g7(e.y+e.h,t.y+t.h);return c-o<0||u-r<0?null:Kb(o,r,c-o,u-r)},p7=(e,t,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=t.x+t.w,v=t.y+t.h,S=Hy(0,t.x-r),O=Hy(0,t.y-c),R=Hy(0,u-b),P=Hy(0,f-v);return r+=S,c+=O,o&&(u+=S,f+=O,r-=R,c-=P),u-=R,f-=P,Kb(r,c,u-r,f-c)},Kb=(e,t,o,r)=>({x:e,y:t,w:o,h:r}),Jf={inflate:h7,relativePosition:qb,findBestRelativePosition:WY,intersect:KN,clamp:p7,create:Kb,fromClientRect:e=>Kb(e.left,e.top,e.width,e.height)},zy=(e,t,o=1e3)=>{let r=!1,c=null;const u=S=>(...O)=>{r||(r=!0,c!==null&&(window.clearTimeout(c),c=null),S.apply(null,O))},f=u(e),b=u(t);return{start:(...S)=>{!r&&c===null&&(c=window.setTimeout(()=>b.apply(null,S),o))},resolve:f,reject:b}},b7=(()=>{const e={},t={},o={};return{load:(v,S)=>{const O=`Script at URL "${S}" failed to load`,R=`Script at URL "${S}" did not call \`tinymce.Resource.add('${v}', data)\` within 1 second`;if(e[v]!==void 0)return e[v];{const P=new Promise((z,ee)=>{const W=zy(z,ee);t[v]=W.resolve,Po.ScriptLoader.loadScript(S).then(()=>W.start(R),()=>W.reject(O))});return e[v]=P,P}},add:(v,S)=>{t[v]!==void 0&&(t[v](S),delete t[v]),e[v]=Promise.resolve(S),o[v]=S},has:v=>v in o,get:v=>o[v],unload:v=>{delete e[v],delete o[v]}}})(),YN=()=>(()=>{let e={},t=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{t.push(r),e[r]=String(c)},key:r=>t[r],removeItem:r=>{t=t.filter(c=>c===r),delete e[r]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),o})();let Vy;try{const e="__storage_test__";Vy=window.localStorage,Vy.setItem(e,e),Vy.removeItem(e)}catch{Vy=YN()}var dh=Vy;const v7={geom:{Rect:Jf},util:{Delay:Hd,Tools:lt,VK:$t,URI:Wd,EventDispatcher:at,Observable:Jt,I18n:Ci,LocalStorage:dh,ImageUploader:U6},dom:{EventUtils:Wh,TreeWalker:nr,TextSeeker:Ad,DOMUtils:mo,ScriptLoader:Po,RangeUtils:Rm,Serializer:PO,StyleSheetLoader:$h,ControlSelection:mH,BookmarkManager:Fv,Selection:NO,Event:Wh.Event},html:{Styles:pm,Entities:vi,Node:Na,Schema:Aa,DomParser:Kv,Writer:HA,Serializer:pp},Env:po,AddOnManager:Zr,Annotator:P5,Formatter:Z6,UndoManager:zU,EditorCommands:Je,WindowManager:A6,NotificationManager:Ix,EditorObservable:Sn,Shortcuts:Ly,Editor:OS,FocusManager:I5,EditorManager:Zm,DOM:mo.DOM,ScriptLoader:Po.ScriptLoader,PluginManager:Ap,ThemeManager:Tb,ModelManager:sy,IconManager:qT,Resource:b7,FakeClipboard:NS,trim:lt.trim,isArray:lt.isArray,is:lt.is,toArray:lt.toArray,makeMap:lt.makeMap,each:lt.each,map:lt.map,grep:lt.grep,inArray:lt.inArray,extend:lt.extend,walk:lt.walk,resolve:lt.resolve,explode:lt.explode,_addCacheSuffix:lt._addCacheSuffix},XN=lt.extend(Zm,v7),y7=e=>{try{B.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(XN),y7(XN)})()}(E7)),E7.exports}WJ();var dX={},mX={},fX;function ZJ(){return fX||(fX=1,tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',"add-file":'<svg height="24" width="24"><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M2 7h2V4h3V2H4a2 2 0 0 0-2 2zm20 0h-2V4h-3V2h3a2 2 0 0 1 2 2zm0 2h-2v6h2zm0 8h-2v3h-3v2h3a2 2 0 0 0 2-2zM2 9h2v6H2zm0 8h2v3h3v2H4a2 2 0 0 1-2-2zm7 5v-2h6v2zm6-20v2H9V2zM6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/><path d="M6 17h12l-4-5-3 3.8-2-2.6z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',adjustments:'<svg width="24" height="24"><path d="M16 11a3 3 0 1 1 2.8-4H21v2h-2.2a3 3 0 0 1-2.8 2Zm0-2a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM3 9h8V7H3v2Zm5 10a3 3 0 1 0-2.8-4H3v2h2.2A3 3 0 0 0 8 19Zm0-2a1 1 0 1 0 0-2 1 1 0 0 0 0 2Zm13 0h-8v-2h8v2Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"alt-text":'<svg width="24" height="24"><path d="M3 20a2 2 0 0 1-1.4-.6A2 2 0 0 1 1 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 3 4h18c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H3Zm0-2h18V6H3v12Zm1.5-3H6v-1.5h1.5V15H9v-5a1 1 0 0 0-.3-.7A1 1 0 0 0 8 9H5.5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v5ZM6 12v-1.5h1.5V12H6Z"/><path d="M11 15V9h1.3v4.5h2V15H11Zm5.8-4.5V15h1.4v-4.5h1.3V9h-4v1.5h1.3Z"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',"auto-image-enhancement":'<svg width="24" height="24"><path d="M7.7 10.6a5.8 5.8 0 0 0 5.7 5.7A5.8 5.8 0 0 0 7.7 22 5.8 5.8 0 0 0 2 16.3a5.8 5.8 0 0 0 5.7-5.7ZM15.5 2c.3 3 3.3 6 6.5 6.4-3.2.5-6.2 3.4-6.5 6.5-.3-3.4-3-6-6.4-6.5 3.3-.5 6.1-3 6.4-6.4Z"/></svg>',blur:'<svg width="24" height="24"><path d="M19.3 9.3a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 20 9a1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 10a1 1 0 0 0-.3-.7A1 1 0 0 0 4 9a1 1 0 0 0-.7.3Zm16 6a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3Zm-16 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3A1 1 0 0 0 5 16a1 1 0 0 0-.3-.7A1 1 0 0 0 4 15a1 1 0 0 0-.7.3Zm5-11A1 1 0 0 0 8 5a1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 10 5a1 1 0 0 0-.3-.7A1 1 0 0 0 9 4a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7 1 1 0 0 0 1 1c.3 0 .5-.1.7-.3A1 1 0 0 0 16 5a1 1 0 0 0-.3-.7A1 1 0 0 0 15 4a1 1 0 0 0-.7.3Zm-6 16a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7A1 1 0 0 0 9 20a1 1 0 0 0-.7.3Zm6 0a1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3s.5-.1.7-.3a1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3ZM7.6 8.6A2 2 0 0 0 7 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 7 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 9 14a2 2 0 0 0-1.4.6Zm6-6A2 2 0 0 0 13 10c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 8a2 2 0 0 0-1.4.6Zm0 6A2 2 0 0 0 13 16c0 .6.2 1 .6 1.4.4.4.8.6 1.4.6s1-.2 1.4-.6c.4-.4.6-.8.6-1.4s-.2-1-.6-1.4A2 2 0 0 0 15 14a2 2 0 0 0-1.4.6Z"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',box:'<svg width="24" height="24"><path d="M3.8 7a1 1 0 0 0-.7.6l-.1 3V13.8a3.5 3.5 0 0 0 4 2.7c.8-.2 1.4-.5 2-1l.3-.3.3.2c.7.7 1.4 1 2.4 1.1 1.2 0 2.4-.6 3-1.6.9-1.2.8-2.8 0-4a3.7 3.7 0 0 0-2-1.2c-.4-.1-1.2-.1-1.6 0a3.4 3.4 0 0 0-1.7 1l-.3.2-.2-.1c-.4-.5-1.2-1-2-1.1-.6-.2-1.5 0-2 .2H5V9c0-1.3 0-1.3-.3-1.6a1 1 0 0 0-1-.3Zm12 2.6c-.3.2-.5.4-.6.8v.6l.9 1 .7 1v.1l-.8 1-.7 1a1 1 0 0 0 0 .7 1 1 0 0 0 1.3.6c.2 0 .3-.2 1-1l.5-.7.6.8.7.8c.4.3 1 .3 1.3 0l.2-.3a1 1 0 0 0 0-.8l-.8-1.2-.7-1a26 26 0 0 0 1.5-2 .8.8 0 0 0 .1-.4c0-.4-.1-.7-.5-.9H20c-.4 0-.5 0-1.2.8l-.7.8-.6-.7-.7-.9a1 1 0 0 0-1 0Zm-9 2 .4.1c.3.1.6.5.7.8l.1.6v.6c-.6 1-2 1.2-2.7.3-.3-.3-.3-.5-.3-1v-.5c.3-.5.7-.8 1.1-1a1.5 1.5 0 0 1 .7 0Zm5.7 0c.4 0 .8.4 1 .8l.2.6-.1.7c-.5.9-1.6 1.1-2.4.6a1.4 1.4 0 0 1-.6-1.1 1.4 1.4 0 0 1 .5-1.2 1.5 1.5 0 0 1 1.4-.4Z"/></svg>',brightness:'<svg width="24" height="24"><path d="M12.7 18.3a1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7 1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7v-1a1 1 0 0 0-.3-.7ZM11.3 5.7a1 1 0 0 0 .7.3 1 1 0 0 0 .7-.3A1 1 0 0 0 13 5V4a1 1 0 0 0-.3-.7A1 1 0 0 0 12 3a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v1a1 1 0 0 0 .3.7Zm9.4 5.6a1 1 0 0 0-.7-.3h-1a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.7Zm-15 1.4A1 1 0 0 0 6 12a1 1 0 0 0-.3-.7A1 1 0 0 0 5 11H4a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.7 1 1 0 0 0 .7.3h1a1 1 0 0 0 .7-.3Zm13 4.6-.7-.8a1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 .3.8l.7.7a1 1 0 0 0 .7.3 1 1 0 0 0 .8-.3 1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7ZM5.3 6.7l.7.8a1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3 1 1 0 0 0 .3-.7 1 1 0 0 0-.3-.8l-.7-.7A1 1 0 0 0 6 5a1 1 0 0 0-.8.3 1 1 0 0 0-.3.8 1 1 0 0 0 .3.6Zm12 1a1 1 0 0 0 .7-.2l.7-.7A1 1 0 0 0 19 6a1 1 0 0 0-.3-.8 1 1 0 0 0-.8-.3 1 1 0 0 0-.7.3l-.7.7a1 1 0 0 0-.3.8 1 1 0 0 0 .3.7 1 1 0 0 0 .7.2ZM6.7 16.4a1 1 0 0 0-.8.2l-.7.7a1 1 0 0 0-.3.7 1 1 0 0 0 .3.8 1 1 0 0 0 .8.3 1 1 0 0 0 .7-.3l.7-.7a1 1 0 0 0 .3-.8 1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3Z"/><path fill-rule="evenodd" d="M13.6 8.3A4 4 0 0 0 12 8a4 4 0 0 0-1.6.3A4 4 0 0 0 9 9.5a4 4 0 0 0-.6 1A4 4 0 0 0 8 12c0 .6.1 1 .3 1.6a4 4 0 0 0 2.1 2 4 4 0 0 0 1.6.4 4 4 0 0 0 1.6-.3 4 4 0 0 0 2-2.1A4 4 0 0 0 16 12a4 4 0 0 0-.3-1.6 4 4 0 0 0-2.1-2ZM14 12a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',camera:'<svg height="24" width="24"><g clip-rule="evenodd" fill-rule="evenodd"><path d="M10 5.4a1 1 0 0 1 .8-.4h4.4a1 1 0 0 1 .8.4l1.2 1.8h2.3A2.5 2.5 0 0 1 22 9.6v8a2.5 2.5 0 0 1-2.5 2.5h-13A2.5 2.5 0 0 1 4 17.6v-8a2.5 2.5 0 0 1 2.5-2.4h2.3zM11.4 7l-1.2 1.7a1 1 0 0 1-.8.5h-3a.5.5 0 0 0-.4.4v8a.5.5 0 0 0 .5.5h13a.5.5 0 0 0 .5-.5v-8a.5.5 0 0 0-.5-.4h-2.9a1 1 0 0 1-.8-.5L14.6 7z"/><path d="M13 11.4a2 2 0 1 0 0 3.8 2 2 0 0 0 0-3.8zm-4 1.9a4 4 0 1 1 8 0 4 4 0 0 1-8 0z"/></g></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',caption:'<svg height="24" width="24"><path d="M6 16h8v-2H6zm10 0h2v-2h-2zM4 20a2 2 0 0 1-1.5-.6A2 2 0 0 1 2 18V6c0-.6.2-1 .6-1.4A2 2 0 0 1 4 4h16c.6 0 1 .2 1.4.6.4.4.6.9.6 1.4v12c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm0-2h16V6H4z"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',"checkmark-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.8 5a1 1 0 0 0-1.4.3l-5.4 8-2-2.1a1 1 0 1 0-1.5 1.4l3 3a1 1 0 0 0 1.5-.2l6-9a1 1 0 0 0-.2-1.4Z"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',"close-filled":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20Zm4.7 5.3a1 1 0 0 0-1.3 0L12 10.6 8.6 7.3a1 1 0 0 0-1.3 1.3l3.3 3.4-3.3 3.4a1 1 0 0 0 1.3 1.3l3.4-3.3 3.4 3.3a1 1 0 0 0 1.3-1.3L13.4 12l3.3-3.4a1 1 0 0 0 0-1.3Z"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24" class="color-swatch-remove-color"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 0 1 19.4 9c.4 1 .6 2 .6 3.1s-.2 2.1-.6 3.1a8 8 0 0 1-1.7 2.6 8 8 0 0 1-2.6 1.7 7.8 7.8 0 0 1-3.1.6 7.8 7.8 0 0 1-3.1-.6 8 8 0 0 1-2.6-1.7A8 8 0 0 1 4.6 15 7.8 7.8 0 0 1 4 12c0-1.1.2-2.1.6-3.1a8 8 0 0 1 1.7-2.6A8 8 0 0 1 9 4.6 7.8 7.8 0 0 1 12 4Zm-6 8a6 6 0 0 0 1.8 4.2 6 6 0 0 0 1.9 1.3 5.8 5.8 0 0 0 2.3.5V6c-.8 0-1.6.2-2.3.5a6 6 0 0 0-2 1.3 6 6 0 0 0-1.2 1.9A5.8 5.8 0 0 0 6 12Z"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-gear-properties":'<svg height="24" width="24"><path d="M17.3 14.5a7.1 7.1 0 0 1 1.2.6l1.5-.5 1 1.8-1.2 1V18.7l1.2 1-1 1.6-1.5-.4a4.5 4.5 0 0 1-.6.3 7.1 7.1 0 0 1-.6.3L17 23h-2l-.3-1.5a7.4 7.4 0 0 1-.6-.3 4.5 4.5 0 0 1-.6-.3l-1.5.5-1-1.8 1.2-1a3.9 3.9 0 0 1 0-.6v-.7l-1.2-1 1-1.6 1.5.4a4.5 4.5 0 0 1 1.2-.6L15 13h2zM16 16a2 2 0 0 0-1.5.6A1.9 1.9 0 0 0 14 18c0 .6.2 1 .6 1.4s1 .6 1.5.6 1-.2 1.5-.6.6-.8.6-1.4-.2-1-.6-1.4A2 2 0 0 0 16 16z" fill-rule="evenodd"/><path d="M19 7.6V12h-2V9h-4V5H7v14h3v2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h7.4z"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',dropbox:'<svg height="24" width="24"><path clip-rule="evenodd" d="m6.4 9.3-3-2a1 1 0 0 1 0-1.6l4-2.5a1 1 0 0 1 1 0L12 5.5l3.6-2.3a1 1 0 0 1 1 0l4 2.5a1 1 0 0 1 0 1.7l-3 1.9 3 1.9a1 1 0 0 1 0 1.6l-2.9 1.9V16c0 .3-.1.6-.4.8l-4.5 3a1 1 0 0 1-1.2 0l-4.4-3a1 1 0 0 1-.5-.9v-1l-3.2-2.2a1 1 0 0 1 0-1.6zm3 0L12 7.5l2.6 1.8L12 11zM8.9 15v.4l3.3 2.3 3.4-2.3v-.2L12 13l-3.1 2zm-1-10-2 1.4 2 1.3 2-1.3zm8.2 0-2 1.4 2 1.3 2-1.3zm-2 6.9 2-1.3 2 1.3-2 1.3-2-1.3zm-8.3 0 2-1.3L10 12l-2 1.3-2-1.3z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',evernote:'<svg width="24" height="24"><path fill-rule="evenodd" d="m9.5 3-.3.1-2.6 2.6C3.8 8.5 4 8.2 4 8.7c0 1.3.3 3 .6 4.3.5 2 1.1 3.2 2 3.7l1.2.3c1 .2 1.5.2 2.2.2 1.3 0 1.7 0 2.2-.4.3-.2.3-.4.4-1a38.4 38.4 0 0 1 .3-.4l.3.1 1.8.1h1.6v-1.8H14l-.1-.2a6.8 6.8 0 0 1-.5-1c-.2-.4-.3-.6-.5-.7a.8.8 0 0 0-.5-.1.9.9 0 0 0-.8.5l-.4 1.6-.3 1.5H9.4l-2-.3a1 1 0 0 1-.1-.2A10.1 10.1 0 0 1 6 9.7v-.2h4l.5-.5V5H12c.4.2.7.7.8 1.1a1 1 0 0 0 .2.6c.2.2.3.2 1 .3 1.2 0 2 .2 2.5.6.4.2.8.7 1 1.2.3 1.2.5 4 .3 6.4 0 1.8-.4 3.4-.8 4h-.7a8 8 0 0 1-.8 0c-.2 0-.3-.3-.2-.5a.5.5 0 0 1 .4-.3h.9v-1.8H16c-.7 0-.9 0-1.2.2-.9.4-1.4 1.2-1.4 2.1l.1.4.1.2a1 1 0 0 1 .1.2c.3.7.8 1.2 1.4 1.3l1.2.1h1.2a2 2 0 0 0 1-.8 9 9 0 0 0 1.1-4.3c.2-3 0-6.3-.4-7.7A4.3 4.3 0 0 0 16 5.3a7 7 0 0 0-1.3-.2 7.2 7.2 0 0 1-.4 0 5.5 5.5 0 0 1 0-.3c-.2-.5-.6-1-1.2-1.4a3 3 0 0 0-.5-.2c-.4-.2-.5-.2-1.8-.2a26.5 26.5 0 0 0-1.3 0Zm-.8 4v.7H7.2l.7-.8.8-.7v.7Zm7 3.5c-.4 0-.7.5-.9 1v.7h.3c.7 0 1.1.2 1.5.6l.3.2.3-.6V11a1 1 0 0 0-.6-.4 2 2 0 0 0-.8 0Z" clip-rule="evenodd"/></svg>',"export-pdf":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H7v3H5V5c0-1.1.9-2 2-2Z"/><path d="M2.6 15.2v-1.9h1c.6 0 1-.2 1.4-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2a2 2 0 0 0-1.3-.4H1v5.2h1.6Zm.4-3h-.4v-1.1h.5l.6.1.2.5c0 .1 0 .3-.2.4l-.7.1Zm5.7 3 1-.1c.3 0 .5-.2.7-.4l.5-.8c.2-.3.2-.7.2-1.3v-1l-.5-.8c-.2-.3-.4-.5-.7-.6L8.7 10H6.3v5.2h2.4Zm-.4-1.1H8v-3h.4c.5 0 .8.2 1 .4l.2 1.1-.1 1-.3.3-.8.2Zm5.3 1.2V13h2v-1h-2v-1H16V10h-4v5.2h1.6Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',"export-word":'<svg width="24" height="24"><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V17h-2V9h-4V5H5c0-1.1.9-2 2-2ZM15 17a1 1 0 1 0-2 0v3.1l-1.4-1a1 1 0 1 0-1.2 1.7l3.6 2.4 3.6-2.4a1 1 0 0 0-1.2-1.6l-1.4 1V17Z"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',exposure:'<svg width="24" height="24"><path d="M5 21a2 2 0 0 1-1.4-.6A2 2 0 0 1 3 19V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h14c.6 0 1 .2 1.4.6.4.4.6.8.6 1.4v14c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6H5Zm0-2h14V5L5 19Zm9.5-1v-2h-2v-1.5h2v-2H16v2h2V16h-2v2h-1.5ZM6 8.5h5V7H6v1.5Z"/></svg>',fb:'<svg width="24" height="24"><path fill-rule="evenodd" d="M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-11 6.7V14H8.1v-2.5h2v-1C10 8.2 11.5 7 12.8 7H16v2.5h-2.4c-.8 0-1 .7-1 1.3v.7h3.2l-1 2.5h-2v5a7 7 0 1 0-2.8-.2Z" clip-rule="evenodd"/></svg>',feedback:'<svg width="24" height="24"><path fill-rule="evenodd" d="M16 6c1 0 2 1 2 2v5c0 1-1 2-2 2h-3l-4 3v-3H8c-1 0-2-1-2-2V8c0-1 1-2 2-2h8Zm-7 5v1h4v-1H9Zm0-2v1h6V9H9Z"/></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',flickr:'<svg width="24" height="24"><path d="M8.2 15.3c1.7 0 3.1-1.4 3.1-3.1A3.2 3.2 0 0 0 8.1 9 3.2 3.2 0 0 0 5 12.2c0 1.7 1.4 3 3.2 3Zm7.6 0c1.7 0 3.2-1.4 3.2-3.1a3.2 3.2 0 0 0-6.3 0c0 1.7 1.4 3 3.1 3Z"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',folder:'<svg width="24" height="24"><path fill-rule="evenodd" d="M5.6 6a.6.6 0 0 0-.6.6v11.2a.6.6 0 0 0 .6.6h12.8a.6.6 0 0 0 .6-.6V9a.6.6 0 0 0-.6-.6h-7.2a1 1 0 0 1-.8-.4L9 6H5.6ZM3.8 4.8A2.6 2.6 0 0 1 5.6 4h4a1 1 0 0 1 .8.4l1.3 2h6.7A2.6 2.6 0 0 1 21 9v8.8a2.6 2.6 0 0 1-2.6 2.6H5.6A2.6 2.6 0 0 1 3 17.8V6.6c0-.7.3-1.4.8-1.8Z" clip-rule="evenodd"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-code":'<svg width="24" height="24"><path d="m10 22 2-7H6l9-13h2l-2 8h7L12 22h-2ZM6 2h7l-1.4 2H6V2Zm4.2 4H4v2h4.8l1.4-2Zm-2.7 4H2v2h4l1.5-2Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg height="24" width="24"><path d="M11.5 16.3a.7.7 0 1 0 1.4 0V14l2.7-6a.7.7 0 1 0-1.2-.6l-2.2 5-2.3-4.9C9.6 7 8.7 7 8 7.2v1.1c.8-.2.9 0 1.2 1l2.3 4.7z"/><path d="M4 3h16a1 1 0 0 1 1 1v16a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm1 2h14v14H5z" fill-rule="evenodd"/></svg>',"google-drive":'<svg height="24" width="24"><path clip-rule="evenodd" d="M8.7 4.5a1 1 0 0 1 .9-.5h4.8a1 1 0 0 1 .9.5l5.6 9.7a1 1 0 0 1 0 1l-2.4 4.2a1 1 0 0 1-.9.5H6.4a1 1 0 0 1-.9-.5l-2.4-4.2a1 1 0 0 1 0-1zM10.2 6l-4.5 7.7h2.5L12.7 6h-2.5zm4.2 1 4.4 7.7-1.2 2.2-4.4-7.7zM12 11.2l-1.5 2.5h3zm2.6 4.5H5.7L7 17.9h8.9l-1.3-2.2z" fill-rule="evenodd"/></svg>',"google-photos":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12.4 3c-.8 0-1.4.7-1.4 1.4v3.2a5 5 0 0 0-8 4c0 .8.6 1.4 1.4 1.4h3.2a5 5 0 0 0-1 3 5 5 0 0 0 5 5c.8 0 1.4-.6 1.4-1.4v-3.2a5 5 0 0 0 8-4c0-.8-.7-1.4-1.4-1.4h-3.2a5 5 0 0 0-4-8Zm.6 8V5a3 3 0 0 1 2.4 3 3 3 0 0 1-2.4 3Zm-2 0H5a3 3 0 0 1 3-2.4 3 3 0 0 1 3 2.4Zm2 2a3 3 0 0 0 3 2.4 3 3 0 0 0 3-2.4h-6Zm-4.4 3a3 3 0 0 1 2.4-3v6a3 3 0 0 1-2.4-3Z" clip-rule="evenodd"/></svg>',grayscale:'<svg height="24" width="24"><path d="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm12.4 0H19v3.6zm-2.8 0h-2.2l8.6 8.6v-2.2zm-5 0H5l14 14v-2.6z" fill-rule="evenodd"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',huddle:'<svg height="24" width="24"><path d="M10.3 5.6V8h.8v-2l3.5 2 4.3-2.5L14.6 3l-4.3 2.6zM14.6 8v5.2l4.3-2.6V5.6L14.6 8zM6 13.3v2.5h.9v-2l3.4 2 4.3-2.5-4.3-2.6zm4.3 2.6V21l4.3-2.6v-5.1l-4.3 2.6z"/></svg>',"image-decorative":'<svg width="24" height="24"><path d="M12 10c.3 0 .5-.1.7-.3A1 1 0 0 0 13 9a1 1 0 0 0-.3-.7A1 1 0 0 0 12 8a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7 1 1 0 0 0 1 1Zm0 6a3 3 0 0 1-1.8-.5A3 3 0 0 1 9.1 14a2 2 0 0 0-.2 0 3 3 0 0 1-2.5-1 3 3 0 0 1-.9-2.2A3 3 0 0 1 6.2 9a3.4 3.4 0 0 1-.5-1 3 3 0 0 1-.2-1 3 3 0 0 1 1-2.2A3 3 0 0 1 8.8 4H9a3 3 0 0 1 1.1-1.4A3 3 0 0 1 12 2a3 3 0 0 1 1.8.5c.5.4.9.9 1.1 1.5h.2a3 3 0 0 1 2.5.8 3 3 0 0 1 .9 2.3c0 .3 0 .7-.2 1a2.8 2.8 0 0 1-.5.9l.5 1 .2 1a3 3 0 0 1-1 2.2 3 3 0 0 1-2.4.9 1.8 1.8 0 0 0-.2 0 3 3 0 0 1-1.1 1.4 3 3 0 0 1-1.8.5Zm0 7a8.7 8.7 0 0 1 .7-3.5 9.2 9.2 0 0 1 2-2.8 9.2 9.2 0 0 1 2.8-2A8.6 8.6 0 0 1 21 14a8.6 8.6 0 0 1-.7 3.5 9.2 9.2 0 0 1-2 2.8 9.2 9.2 0 0 1-2.8 2 8.6 8.6 0 0 1-3.5.7Zm2.5-2.5a6.8 6.8 0 0 0 2.4-1.5 6.8 6.8 0 0 0 1.7-2.6c-1 .4-1.8 1-2.6 1.7a6.8 6.8 0 0 0-1.5 2.4ZM12 23a8.6 8.6 0 0 0-.7-3.5 9.2 9.2 0 0 0-2-2.9 9.2 9.2 0 0 0-2.8-1.9A8.6 8.6 0 0 0 3 14a8.7 8.7 0 0 0 .7 3.5 9.2 9.2 0 0 0 2 2.9 9.2 9.2 0 0 0 2.8 1.9 8.6 8.6 0 0 0 3.5.7Zm-2.5-2.5A6.8 6.8 0 0 1 7.2 19a6.8 6.8 0 0 1-1.6-2.6c.9.4 1.7 1 2.5 1.7a6.8 6.8 0 0 1 1.6 2.4Zm5.9-8.4c.3 0 .5-.1.8-.4.2-.2.3-.5.3-.8 0-.2 0-.4-.2-.6a1.3 1.3 0 0 0-.5-.4l-.8-.4a3 3 0 0 1-.2.5 3.8 3.8 0 0 1-.2.5 2.5 2.5 0 0 1-.3.4 4 4 0 0 1-.4.4l.8.6a.8.8 0 0 0 .3.1h.4ZM15 8.5l.8-.4.5-.4.2-.6a1.1 1.1 0 0 0-.3-.8 1 1 0 0 0-.8-.4 1.1 1.1 0 0 0-.7.2l-.8.6.4.4.3.4a3.9 3.9 0 0 1 .4 1Zm-4-2.3a2.7 2.7 0 0 1 1-.2 2.7 2.7 0 0 1 1 .2l.2-1.1c0-.3-.1-.6-.4-.8A1.2 1.2 0 0 0 12 4c-.3 0-.6.1-.8.3-.3.2-.4.5-.3.8v1.1Zm1 7.8c.3 0 .6-.1.8-.3.3-.2.4-.5.3-.8v-1.1a2.7 2.7 0 0 1-1.1.2 2.7 2.7 0 0 1-1-.2l-.2 1.1c0 .3.1.6.4.8.2.2.5.3.8.3ZM9 8.5a3 3 0 0 1 .4-1l.3-.4.4-.4-.8-.6A.9.9 0 0 0 9 6a1.2 1.2 0 0 0-.3 0c-.4 0-.6 0-.9.3a1.1 1.1 0 0 0-.3.8c0 .2 0 .4.2.6l.5.4.9.4Zm-.3 3.6H9l.3-.2.8-.6a5.5 5.5 0 0 1-.4-.4 2.1 2.1 0 0 1-.3-.4 3.8 3.8 0 0 1-.2-.5 3 3 0 0 1-.1-.5l-1 .4-.4.4a1.1 1.1 0 0 0-.2.6c0 .3.2.6.4.8.2.2.4.4.7.4Z"/></svg>',"image-enhancements":'<svg height="24" width="24"><path d="M5.3 21a2 2 0 0 1-1.5-.6 2 2 0 0 1-.6-1.4V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5.2 3H13v2H5.2v14h14v-8h2v8c0 .6-.1 1-.5 1.4a2 2 0 0 1-1.4.6z"/><path d="M11 9a4 4 0 0 0 4 4 4 4 0 0 0-4 4 4 4 0 0 0-4-4 4 4 0 0 0 4-4zm5.5-6c.2 2.1 2.2 4.1 4.5 4.5-2.3.4-4.3 2.4-4.5 4.5A5.2 5.2 0 0 0 12 7.5 5.2 5.2 0 0 0 16.5 3z"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',"import-word":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 3h7.4L19 7.6V15h-2V9h-4V5H5c0-1.1.9-2 2-2Z"/><path d="M9.5 7A1.5 1.5 0 0 1 11 8.4v7.1A1.5 1.5 0 0 1 9.6 17H2.5A1.5 1.5 0 0 1 1 15.6V8.5A1.5 1.5 0 0 1 2.4 7h7.1Zm-1 2.8-1 2.6-1-2.5v-.1a.6.6 0 0 0-1 0l-.1.1-.9 2.5-1-2.5v-.1a.6.6 0 0 0-1 .4v.1l1.5 4v.1a.6.6 0 0 0 1 0v-.1l1-2.5.9 2.5v.1a.6.6 0 0 0 1 0H8l1.6-4v-.2a.6.6 0 0 0-1.1-.4Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M11.4 18.2a1 1 0 0 0 1.2 1.6l1.4-1V22a1 1 0 1 0 2 0v-3.1l1.4 1a1 1 0 0 0 1.2-1.7L15 15.8l-3.6 2.4Z"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',instagram:'<svg height="24" width="24"><path clip-rule="evenodd" d="M10.1 9a4 4 0 1 1 4.4 6.6A4 4 0 0 1 10.1 9zm2.2 1.3a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill-rule="evenodd"/><path d="M16 9.3a1.3 1.3 0 1 0 0-2.6 1.3 1.3 0 0 0 0 2.6z"/><path clip-rule="evenodd" d="M3 6a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v12a3 3 0 0 1-3 3H6a3 3 0 0 1-3-3zm3-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1z" fill-rule="evenodd"/></svg>',invert:'<svg height="24" width="24"><path d="M5 4 3.6 5.4l3.9 4C6.6 10.7 6 12.3 6 14a6 6 0 0 0 10.3 4.2l1.9 1.8 1.4-1.4z" fill-rule="evenodd"/><path d="M13.4 8.4c.9 1 1.6 2.1 2 3.2l2.6 2.6V14c0-5-6-10-6-10s-1 .8-2.1 2l1.4 1.5.7-.7 1.4 1.6z"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg height="48" width="48"><path d="M8 14a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0zM8 34a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-default":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M12 24a3 3 0 1 0 6 0 3 3 0 0 0-6 0zm5 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0z" fill-rule="evenodd"/><path d="M16 31h6v6h-6z"/><path d="M16 31h6v6h-6z"/><path d="M18 12h22v4H18zm4 10h18v4H22zm4 10h14v4H26z" opacity=".2"/></svg>',"list-bull-disc":'<svg height="48" width="48"><path d="M14 14a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm0 10a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-bull-square":'<svg height="48" width="48"><path d="M8 21h6v6H8zm0 10h6v6H8zm0-20h6v6H8z"/><path d="M18 12h22v4H18zm0 10h22v4H18zm0 10h22v4H18z" opacity=".2"/></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"math-equation":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 4.8c.1-.5.5-.8 1-.8h10a1 1 0 1 1 0 2h-9.2L8.3 19.2a1 1 0 0 1-1.7.4l-3.4-4.2a1 1 0 0 1 1.6-1.2l2 2.5L9 4.8Zm9.7 5.5c.4.4.4 1 0 1.4L17 13.5l1.8 1.8a1 1 0 1 1-1.4 1.4L15.5 15l-1.8 1.8a1 1 0 0 1-1.4-1.4l1.8-1.8-1.8-1.8a1 1 0 0 1 1.4-1.4l1.8 1.8 1.8-1.8a1 1 0 0 1 1.4 0Z"/></svg>',mentions:'<svg height="24" width="24"><path d="M12 21a8.8 8.8 0 0 1-3.5-.7 9 9 0 0 1-2.9-2 9 9 0 0 1-1.9-2.8A8.8 8.8 0 0 1 3 12c0-1.3.2-2.4.7-3.5a9 9 0 0 1 4.8-4.8A8.8 8.8 0 0 1 12 3c1.3 0 2.4.2 3.5.7a9.1 9.1 0 0 1 4.8 4.8A8.7 8.7 0 0 1 21 12v1.4a3 3 0 0 1-.9 2.2 3 3 0 0 1-2.2.9c-.5 0-1-.1-1.5-.4a3.8 3.8 0 0 1-1.1-1 4.8 4.8 0 0 1-1.5 1 4.3 4.3 0 0 1-1.8.4c-1.2 0-2.3-.4-3.2-1.3-.9-.9-1.3-2-1.3-3.2s.4-2.3 1.3-3.2c.9-.9 2-1.3 3.2-1.3s2.3.4 3.2 1.3c.9.9 1.3 2 1.3 3.2v1.4c0 .4.1.7.4 1 .3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1V12c0-2-.7-3.8-2.1-5.2S14 4.7 12 4.7s-3.8.7-5.2 2.1S4.7 10 4.7 12s.7 3.8 2.1 5.2 3.2 2.1 5.2 2.1h4.5V21zm0-6.2c.8 0 1.4-.3 2-.8a2.7 2.7 0 0 0 .8-2c0-.8-.3-1.4-.8-2a2.7 2.7 0 0 0-2-.8c-.8 0-1.4.3-2 .8a2.7 2.7 0 0 0-.8 2c0 .8.3 1.4.8 2a2.7 2.7 0 0 0 2 .8z"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',onedrive:'<svg height="24" width="24"><path d="M4 13.7h1zm16 .7h-1zm-11.7-4A4.4 4.4 0 0 1 12.1 8V6a6.4 6.4 0 0 0-5.6 3.4l1.8 1zM12.1 8c2 0 3.6 1.4 4 2.8l2-.5A6.3 6.3 0 0 0 12 6v2zm8.1 6.8-9.8-5.5-1 1.8 9.8 5.5 1-1.8zm-9.8-5.5A5 5 0 0 0 3 13.7h2A3 3 0 0 1 9.5 11l1-1.8zM3 13.7a5 5 0 0 0 1 2.8l1.5-1.1a3 3 0 0 1-.5-1.7zm15.8 1.6a2.3 2.3 0 0 1-2 1.4v2a4.3 4.3 0 0 0 3.9-2.6zm-2 1.4H8v2h8.7zm-8.8 0a3 3 0 0 1-2.5-1.3L4 16.5a5 5 0 0 0 4 2.2v-2zm12.7-.6c.2-.6.3-1.1.3-1.7h-2c0 .3 0 .6-.2.9zm.3-1.7c0-3-3.1-5.1-6-4l.8 1.9a2.3 2.3 0 0 1 3.2 2h2zm-6-4L4.4 15l.8 1.9 10.7-4.6-.7-1.8z"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',"photo-filter":'<svg height="24" width="24"><path d="M4.4 21c-.3 0-.6-.2-.9-.5-.3-.3-.4-.6-.5-.9L19.6 3c.3 0 .6.3.9.5l.5.9zM3 14.7v-2.8L11.9 3h2.8zM3 7V5c0-.6.2-1 .6-1.4A2 2 0 0 1 5 3h2zm14 14 4-4v2c0 .6-.2 1-.6 1.4a2 2 0 0 1-1.4.6zm-7.7 0L21 9.3v2.8L12 21z"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"revert-changes":'<svg height="24" width="24"><path d="m8.9 18.8.4 3.2H13v-2h-2v-2.6a4.6 4.6 0 0 1-1.6-.6 5.9 5.9 0 0 1-1.3-1l-2.5 1-1-1.7 2.2-1.6a4 4 0 0 1-.2-.7 5.9 5.9 0 0 1 0-.8v-.8l.2-.8-2.2-1.6 1-1.7 2.5 1a6 6 0 0 1 1.2-.9l1.4-.6.4-2.6h2l.3 2.6A5.6 5.6 0 0 1 16 8.2l2.5-1 1 1.6-2.2 1.7.2.7v.8a5 5 0 0 1 0 1h2a2.6 2.6 0 0 0 0-.5V11.3l2.6-2-2.8-4.7-3 1.3a8.2 8.2 0 0 0-.5-.4 3.8 3.8 0 0 0-.6-.3L14.8 2H9.3l-.4 3.2a5 5 0 0 0-1.2.7l-3-1.3L2 9.4l2.6 2V12.6l-2.6 2 2.7 4.7 3-1.3a8 8 0 0 0 1.2.7z"/><path d="m14.5 20.3 2.1-2-2.1-2.2 1.4-1.4 2.1 2.1 2.1-2 1.4 1.3-2 2.1 2 2.1-1.4 1.4-2.1-2-2.1 2zM12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></svg>',"revision-history":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',saturation:'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 20.5a6 6 0 1 1-5.9-10.2 6 6 0 1 1 11.8 0A6 6 0 1 1 12 20.5Zm-1.1-7.7a6 6 0 0 0-.2.3 4.3 4.3 0 0 1-2-1.3c.9.1 1.6.5 2.2 1Zm2.4.3a6 6 0 0 0-.2-.3 4.3 4.3 0 0 1 2.2-1 4.3 4.3 0 0 1-2 1.3ZM12.2 15a6.3 6.3 0 0 1-.4 0 4.3 4.3 0 0 0 .2 2.5 4.3 4.3 0 0 0 .2-2.5Zm.9 4.2a6 6 0 0 0 .8-4.5 6 6 0 0 0 3.4-2.8 4.3 4.3 0 0 1-1.3 8.4 4.3 4.3 0 0 1-2.9-1.1Zm-2.2 0a4.3 4.3 0 1 1-4.2-7.3 6 6 0 0 0 3.4 2.8 6 6 0 0 0 .8 4.5Zm-3-9.2a4.3 4.3 0 1 1 8.3 0 6 6 0 0 0-4.2 1.5A6 6 0 0 0 7.8 10Z"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path fill-rule="evenodd" d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',"suggestededits-badge":'<svg height="24" width="24"><path d="M11 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V9.7a6 6 0 0 1-2 .3v9H7V5h4a6 6 0 0 1 0-2z"/><path d="M15 13v-2h-4v2zm-3 2H9v2h3zm-1-8H9v2h2zm4 10v-2h-2v2z"/><path d="M21 4a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" class="tox-icon--badge"/></svg>',suggestededits:'<svg width="24" height="24"><path d="M7 3h7.4L19 7.6V19a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2Zm0 16h10V9h-3V5H7v14Z" clip-rule="evenodd"/><path d="M9 7h2v2H9V7Zm2 4h4v2h-4v-2Zm-2 4h3v2H9v-2Z"/><path d="M9 7h2v2H9V7Zm4 8h2v2h-2v-2Z"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"transform-image":'<svg height="24" width="24"><path d="M3 21v-6h2V9H3V3h6v2h6V3h6v6h-2v6h2v6h-6v-2H9v2zm6-4h6v-2h2V9h-2V7H9v2H7v6h2zM5 7h2V5H5zm12 0h2V5h-2zm0 12h2v-2h-2zM5 19h2v-2H5z"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',"upload-from-device":'<svg width="24" height="25"><path d="M11 19a1 1 0 1 0 2 0v-3.2l1.5 1a1 1 0 1 0 1-1.7L12 12.8l-3.5 2.3a1 1 0 0 0 1 1.7l1.5-1V19Z"/><path d="M9.6 4c.3 0 .6.2.8.5l1.3 2h6.7c.7 0 1.4.2 1.8.7.5.5.8 1.2.8 1.9v8.3c0 .7-.3 1.3-.8 1.8a2.6 2.6 0 0 1-1.8.8H16v-2h2.4a.6.6 0 0 0 .4-.2.6.6 0 0 0 .2-.4V9a.6.6 0 0 0-.2-.5.6.6 0 0 0-.4-.1h-7.2a1 1 0 0 1-.8-.5L9 6H5.6a.6.6 0 0 0-.4.2.6.6 0 0 0-.2.4v10.8c0 .1 0 .3.2.4a.6.6 0 0 0 .4.2H8v2H5.6a2.6 2.6 0 0 1-1.8-.8 2.7 2.7 0 0 1-.8-1.8V6.6c0-.7.3-1.3.8-1.8A2.6 2.6 0 0 1 5.6 4h4Z"/></svg>',"upload-from-link":'<svg height="25" width="24"><path d="M11.5 11.8a1 1 0 0 1 1.9-.5 5 5 0 0 1-1.3 4.8l-2.4 2.3A4 4 0 1 1 4 13L5 12a1 1 0 0 1 1.4 1.4l-.7.8A2 2 0 1 0 8.3 17l2.4-2.4a3 3 0 0 0 .8-2.8z"/><path d="M10.1 11.8a1 1 0 0 1-2 .5 5 5 0 0 1 1.4-4.8L12 5.1a4 4 0 0 1 5.5 5.6l-.7.8a1 1 0 0 1-1.5-1.4l.8-.8a2 2 0 1 0-2.7-2.7l-2.4 2.3a3 3 0 0 0-.8 3zm5.7 7.2a1 1 0 1 0 2 0v-3l1.4 1.1a1 1 0 0 0 1.2-1.5l-3.6-2.9-3.6 2.9a1 1 0 0 0 1.2 1.5l1.4-1z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',vibrance:'<svg height="24" width="24"><path d="M12 20 22 4H2zm2.6-8 1.3-2H8l1.3 2h5.2zm-1.2 2h-2.8l1.4 2.2zm5-8L17 8H7L5.6 6h12.8z" fill-rule="evenodd"/></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',vk:'<svg width="24" height="24"><path fill-rule="evenodd" d="M14.8 17.4a2 2 0 0 1-1.3.7 8 8 0 0 1-7.7-3.6c-1.4-2-2.2-4.4-2.6-5.7L3 8.6A2 2 0 0 1 5 6h2.5c.4 0 .8.1 1.2.4A2 2 0 0 1 9.8 6h3.5a2 2 0 0 1 1.4.6 2 2 0 0 1 1.5-.6h2.4a2 2 0 0 1 2 2.5c-.5 1.5-1.2 2.6-1.8 3.6a12.5 12.5 0 0 1 2 3.2A2 2 0 0 1 19 18h-2.6a2 2 0 0 1-1.3-.5 6.9 6.9 0 0 1-.3-.2Zm.5-2.5-1.2-1a3 3 0 0 0-.8-.2v2.4h-1.7a5.6 5.6 0 0 1-.3 0c-3-.7-4.7-3.7-5.6-6.1A38.1 38.1 0 0 1 5 8.1V8h2.5a80.5 80.5 0 0 1 1.2 2.5c.6 1.2 1.2 2 2 2.1V9l-.9-1h3.5v4.1a5 5 0 0 0 .4-.3c.7-.7 1.2-1.4 1.6-2.2l.2-.3.7-1.3h2.4a8.5 8.5 0 0 1-.8 2l-1.3 2-.3.3a10.5 10.5 0 0 1 2.8 3.8h-2.6l-.8-.9a20.6 20.6 0 0 0-.3-.3Z" clip-rule="evenodd"/></svg>',warmth:'<svg height="24" width="24"><path d="M12 21.1c-1.4 0-2.6-.5-3.6-1.5s-1.5-2.1-1.5-3.5c0-.8.2-1.6.6-2.2A5 5 0 0 1 8.9 12v-6c0-.8.3-1.5 1-2.1a2.9 2.9 0 0 1 2-.9c.9 0 1.6.3 2.2.9.5.6.8 1.3.8 2.1v6a5 5 0 0 1 1.5 1.8A4.9 4.9 0 0 1 17 16c0 1.4-.5 2.6-1.4 3.5s-2.2 1.5-3.6 1.5zm-3-5h6c0-.5-.2-1-.4-1.4a3 3 0 0 0-.9-1l-.8-.6v-7a1 1 0 0 0-.3-.7A1 1 0 0 0 12 5a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v7l-.8.6a2.9 2.9 0 0 0-.9 1 3 3 0 0 0-.3 1.4z"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})),mX}var gX;function GJ(){return gX||(gX=1,ZJ()),dX}GJ();var hX={},pX={},bX;function qJ(){return bX||(bX=1,function(){const B=Object.getPrototypeOf,Y=(n,s,a)=>a(n,s.prototype)?!0:n.constructor?.name===s.name,we=n=>{const s=typeof n;return n===null?"null":s==="object"&&Array.isArray(n)?"array":s==="object"&&Y(n,String,(a,i)=>i.isPrototypeOf(a))?"string":s},xe=n=>s=>we(s)===n,Ne=n=>s=>typeof s===n,Ee=n=>s=>n===s,Ce=(n,s)=>Oe(n)&&Y(n,s,(a,i)=>B(a)===i),de=xe("string"),Oe=xe("object"),Ze=n=>Ce(n,Object),Ct=xe("array"),Ke=Ee(null),Ot=Ne("boolean"),Ut=Ee(void 0),jt=n=>n==null,Dt=n=>!jt(n),qe=Ne("function"),En=Ne("number"),ft=(n,s)=>{if(Ct(n)){for(let a=0,i=n.length;a<i;++a)if(!s(n[a]))return!1;return!0}return!1},V=()=>{},Ye=n=>()=>n(),ut=(n,s)=>(...a)=>n(s.apply(null,a)),At=(n,s)=>a=>n(s(a)),se=n=>()=>n,nn=n=>n,Wn=(n,s)=>n===s;function Yt(n,...s){return(...a)=>{const i=s.concat(a);return n.apply(null,i)}}const X=n=>s=>!n(s),ce=n=>()=>{throw new Error(n)},Uo=n=>n(),dn=se(!1),_t=se(!0);class A{tag;value;static singletonNone=new A(!1);constructor(s,a){this.tag=s,this.value=a}static some(s){return new A(!0,s)}static none(){return A.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?A.some(s(this.value)):A.none()}bind(s){return this.tag?s(this.value):A.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:A.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return Dt(s)?A.some(s):A.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const co=Array.prototype.slice,it=Array.prototype.indexOf,Ro=Array.prototype.push,re=(n,s)=>it.call(n,s),ae=(n,s)=>{const a=re(n,s);return a===-1?A.none():A.some(a)},tt=(n,s)=>re(n,s)>-1,St=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return!0}return!1},wt=(n,s)=>{const a=[];for(let i=0;i<n;i++)a.push(s(i));return a},on=(n,s)=>{const a=[];for(let i=0;i<n.length;i+=s){const d=co.call(n,i,i+s);a.push(d)}return a},pe=(n,s)=>{const a=n.length,i=new Array(a);for(let d=0;d<a;d++){const g=n[d];i[d]=s(g,d)}return i},Te=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];s(d,a)}},M=(n,s)=>{for(let a=n.length-1;a>=0;a--){const i=n[a];s(i,a)}},wn=(n,s)=>{const a=[],i=[];for(let d=0,g=n.length;d<g;d++){const h=n[d];(s(h,d)?a:i).push(h)}return{pass:a,fail:i}},sn=(n,s)=>{const a=[];for(let i=0,d=n.length;i<d;i++){const g=n[i];s(g,i)&&a.push(g)}return a},Un=(n,s,a)=>(M(n,(i,d)=>{a=s(a,i,d)}),a),Tt=(n,s,a)=>(Te(n,(i,d)=>{a=s(a,i,d)}),a),rs=(n,s,a)=>{for(let i=0,d=n.length;i<d;i++){const g=n[i];if(s(g,i))return A.some(g);if(a(g,i))break}return A.none()},Wt=(n,s)=>rs(n,s,dn),io=(n,s)=>{for(let a=0,i=n.length;a<i;a++){const d=n[a];if(s(d,a))return A.some(a)}return A.none()},hn=n=>{const s=[];for(let a=0,i=n.length;a<i;++a){if(!Ct(n[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+n);Ro.apply(s,n[a])}return s},Ae=(n,s)=>hn(pe(n,s)),nt=(n,s)=>{for(let a=0,i=n.length;a<i;++a){const d=n[a];if(s(d,a)!==!0)return!1}return!0},gt=n=>{const s=co.call(n,0);return s.reverse(),s},Xe=(n,s)=>sn(n,a=>!tt(s,a)),ao=(n,s)=>{const a={};for(let i=0,d=n.length;i<d;i++){const g=n[i];a[String(g)]=s(g,i)}return a},Qn=n=>[n],Ho=(n,s)=>{const a=co.call(n,0);return a.sort(s),a},oi=(n,s)=>s>=0&&s<n.length?A.some(n[s]):A.none(),No=n=>oi(n,0),nl=n=>oi(n,n.length-1),Gm=qe(Array.from)?Array.from:n=>co.call(n),va=(n,s)=>{for(let a=0;a<n.length;a++){const i=s(n[a],a);if(i.isSome())return i}return A.none()},wo=Object.keys,Qa=Object.hasOwnProperty,gs=(n,s)=>{const a=wo(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];s(h,g)}},Ls=(n,s)=>Su(n,(a,i)=>({k:i,v:s(a,i)})),Su=(n,s)=>{const a={};return gs(n,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Oi=n=>(s,a)=>{n[a]=s},Xr=(n,s,a,i)=>{gs(n,(d,g)=>{(s(d,g)?a:i)(d,g)})},Gs=(n,s)=>{const a={},i={};return Xr(n,s,Oi(a),Oi(i)),{t:a,f:i}},hr=(n,s)=>{const a={};return Xr(n,s,Oi(a),V),a},is=(n,s)=>{const a=[];return gs(n,(i,d)=>{a.push(s(i,d))}),a},dc=(n,s)=>{const a=wo(n);for(let i=0,d=a.length;i<d;i++){const g=a[i],h=n[g];if(s(h,g,n))return A.some(h)}return A.none()},Ja=n=>is(n,nn),en=(n,s)=>ho(n,s)?A.from(n[s]):A.none(),ho=(n,s)=>Qa.call(n,s),qn=(n,s)=>ho(n,s)&&n[s]!==void 0&&n[s]!==null,Ia={generate:n=>{if(!Ct(n))throw new Error("cases must be an array");if(n.length===0)throw new Error("there must be at least one case");const s=[],a={};return Te(n,(i,d)=>{const g=wo(i);if(g.length!==1)throw new Error("one and only one name per case");const h=g[0],C=i[h];if(a[h]!==void 0)throw new Error("duplicate key detected:"+h);if(h==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Ct(C))throw new Error("case arguments must be an array");s.push(h),a[h]=(...x)=>{const T=x.length;if(T!==C.length)throw new Error("Wrong number of arguments to case "+h+". Expected "+C.length+" ("+C+"), got "+T);return{fold:(...N)=>{if(N.length!==n.length)throw new Error("Wrong number of arguments to fold. Expected "+n.length+", got "+N.length);return N[d].apply(null,x)},match:N=>{const H=wo(N);if(s.length!==H.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+H.join(","));if(!nt(s,Z=>tt(H,Z)))throw new Error("Not all branches were specified when using match. Specified: "+H.join(", ")+`
Required: `+s.join(", "));return N[h].apply(null,x)},log:N=>{console.log(N,{constructors:s,constructor:h,params:x})}}}}),a}},Zt=n=>{let s=n;return{get:()=>s,set:d=>{s=d}}},$l=n=>{let s=A.none(),a=[];const i=T=>$l(_=>{d(N=>{_(T(N))})}),d=T=>{h()?x(T):a.push(T)},g=T=>{h()||(s=A.some(T),C(a),a=[])},h=()=>s.isSome(),C=T=>{Te(T,x)},x=T=>{s.each(_=>{setTimeout(()=>{T(_)},0)})};return n(g),{get:d,map:i,isReady:h}},Il={nu:$l,pure:n=>$l(s=>{s(n)})},fc=n=>{setTimeout(()=>{throw n},0)},La=n=>{const s=x=>{n().then(x,fc)};return{map:x=>La(()=>n().then(x)),bind:x=>La(()=>n().then(T=>x(T).toPromise())),anonBind:x=>La(()=>n().then(()=>x.toPromise())),toLazy:()=>Il.nu(s),toCached:()=>{let x=null;return La(()=>(x===null&&(x=n()),x))},toPromise:n,get:s}},Ko={nu:n=>La(()=>new Promise(n)),pure:n=>La(()=>Promise.resolve(n))},ld=n=>{const s=g=>g(n),a=se(n),i=()=>d,d={tag:!0,inner:n,fold:(g,h)=>h(n),isValue:_t,isError:dn,map:g=>rn.value(g(n)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(n)},toOptional:()=>A.some(n)};return d},wu=n=>{const s=()=>a,a={tag:!1,inner:n,fold:(i,d)=>i(n),isValue:dn,isError:_t,map:s,mapError:i=>rn.error(i(n)),bind:s,exists:dn,forall:_t,getOr:nn,or:nn,getOrThunk:Uo,orThunk:Uo,getOrDie:ce(String(n)),each:V,toOptional:A.none};return a},rn={value:ld,error:wu,fromOption:(n,s)=>n.fold(()=>wu(s),ld)},Fa=n=>({...n,toCached:()=>Fa(n.toCached()),bindFuture:x=>Fa(n.bind(T=>T.fold(_=>Ko.pure(rn.error(_)),_=>x(_)))),bindResult:x=>Fa(n.map(T=>T.bind(x))),mapResult:x=>Fa(n.map(T=>T.map(x))),mapError:x=>Fa(n.map(T=>T.mapError(x))),foldResult:(x,T)=>n.map(_=>_.fold(x,T)),withTimeout:(x,T)=>Fa(Ko.nu(_=>{let N=!1;const H=setTimeout(()=>{N=!0,_(rn.error(T()))},x);n.get(j=>{N||(clearTimeout(H),_(j))})}))}),Mr=n=>Fa(Ko.nu(n)),qm=n=>Fa(Ko.pure(rn.value(n))),ud={nu:Mr,wrap:Fa,pure:qm,value:qm,error:n=>Fa(Ko.pure(rn.error(n))),fromResult:n=>Fa(Ko.pure(n)),fromFuture:n=>Fa(n.map(rn.value)),fromPromise:n=>Mr(s=>{n.then(a=>{s(rn.value(a))},a=>{s(rn.error(a))})})},ol=typeof window<"u"?window:Function("return this;")(),$c=(n,s,a,i)=>{const d=n+s;return d>i?a:d<a?i:d},rr=(n,s,a)=>Math.min(Math.max(n,s),a),Fl=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let Eu=0;const Mt=n=>{const a=new Date().getTime(),i=Math.floor(Fl()*1e9);return Eu++,n+"_"+i+Eu+String(a)},ec=(n,s)=>s,Tu=(n,s)=>Ze(n)&&Ze(s)?jo(n,s):s,Di=n=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)ho(d,g)&&(a[g]=n(a[g],d[g]))}return a},jo=Di(Tu),dd=Di(ec),gc=(n,s,a=Wn)=>n.exists(i=>a(i,s)),er=(n,s,a=Wn)=>Ha(n,s,a).getOr(n.isNone()&&s.isNone()),Ri=n=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<n.length;i++)n[i].each(a);return s},md=n=>{const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(i.isSome())s.push(i.getOrDie());else return A.none()}return A.some(s)},Ha=(n,s,a)=>n.isSome()&&s.isSome()?A.some(a(n.getOrDie(),s.getOrDie())):A.none(),Lr=(n,s,a,i)=>n.isSome()&&s.isSome()&&a.isSome()?A.some(i(n.getOrDie(),s.getOrDie(),a.getOrDie())):A.none(),ri=(n,s)=>n!=null?A.some(s(n)):A.none(),Fr=(n,s)=>n?A.some(s):A.none(),ph=n=>n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),nm=(n,s)=>{let a=s??ol;for(let i=0;i<n.length&&a!==void 0&&a!==null;++i)a=a[n[i]];return a},Ic=(n,s)=>{const a=n.split(".");return nm(a,s)};Ia.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Ni=n=>{const s=[],a=[];return Te(n,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},sl=n=>{const s=Zt(A.none()),a=()=>s.get().each(n);return{clear:()=>{a(),s.set(A.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:C=>{a(),s.set(A.some(C))}}},Km=()=>sl(n=>n.destroy()),Ds=()=>sl(n=>n.unbind()),kn=()=>{const n=sl(V);return{...n,on:a=>n.get().each(a)}},Qr=(n,s)=>n+s,Jr=(n,s)=>n.substring(s),Rs=(n,s,a)=>s===""||n.length>=s.length&&n.substr(a,a+s.length)===s,om=(n,s)=>rl(n,s)?Jr(n,s.length):n,Hl=(n,s)=>ai(n,s)?n:Qr(n,s),hs=(n,s,a=0,i)=>{const d=n.indexOf(s,a);return d!==-1?Ut(i)?!0:d+s.length<=i:!1},rl=(n,s)=>Rs(n,s,0),ai=(n,s)=>Rs(n,s,n.length-s.length),Rt=(n=>s=>s.replace(n,""))(/^\s+|\s+$/g),al=n=>n.length>0,ya=n=>!al(n),Lc=n=>{const s=parseFloat(n);return isNaN(s)?A.none():A.some(s)},Fs=(n,s)=>{let a=null,i=null;return{cancel:()=>{Ke(a)||(clearTimeout(a),a=null,i=null)},throttle:(...h)=>{i=h,Ke(a)&&(a=setTimeout(()=>{const C=i;a=null,i=null,n.apply(null,C)},s))}}},og=(n,s)=>{let a=null;return{cancel:()=>{Ke(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{Ke(a)&&(a=setTimeout(()=>{a=null,n.apply(null,g)},s))}}},tc=(n,s)=>{let a=null;const i=()=>{Ke(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,n.apply(null,g)},s)}}},Fc=n=>{let s=!1,a;return(...i)=>(s||(s=!0,a=n.apply(null,i)),a)},Ym="\uFEFF",sg=" ",cl=(n,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=n,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,n),new Error(d)}return il(i.childNodes[0])},rg=(n,s)=>{const i=(s||document).createElement(n);return il(i)},ku=(n,s)=>{const i=(s||document).createTextNode(n);return il(i)},il=n=>{if(n==null)throw new Error("Node cannot be null or undefined");return{dom:n}},ht={fromHtml:cl,fromTag:rg,fromText:ku,fromDom:il,fromPoint:(n,s,a)=>A.from(n.dom.elementFromPoint(s,a)).map(il)},zl=(n,s)=>{s.fold(a=>{n.setStartBefore(a.dom)},(a,i)=>{n.setStart(a.dom,i)},a=>{n.setStartAfter(a.dom)})},sm=(n,s)=>{s.fold(a=>{n.setEndBefore(a.dom)},(a,i)=>{n.setEnd(a.dom,i)},a=>{n.setEndAfter(a.dom)})},ci=(n,s,a)=>{const i=n.document.createRange();return zl(i,s),sm(i,a),i},hc=(n,s,a,i,d)=>{const g=n.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},fd=n=>({left:n.left,top:n.top,right:n.right,bottom:n.bottom,width:n.width,height:n.height}),Ca=n=>{const s=n.getClientRects(),a=s.length>0?s[0]:n.getBoundingClientRect();return a.width>0||a.height>0?A.some(a).map(fd):A.none()},Mi=n=>{const s=n.getBoundingClientRect();return s.width>0||s.height>0?A.some(s).map(fd):A.none()},Vl=Ia.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),ll=(n,s,a)=>s(ht.fromDom(a.startContainer),a.startOffset,ht.fromDom(a.endContainer),a.endOffset),Wo=(n,s)=>s.match({domRange:a=>({ltr:se(a),rtl:A.none}),relative:(a,i)=>({ltr:Fc(()=>ci(n,a,i)),rtl:Fc(()=>A.some(ci(n,i,a)))}),exact:(a,i,d,g)=>({ltr:Fc(()=>hc(n,a,i,d,g)),rtl:Fc(()=>A.some(hc(n,d,g,a,i)))})}),gd=(n,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>Vl.rtl(ht.fromDom(d.endContainer),d.endOffset,ht.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>ll(n,Vl.ltr,a)):ll(n,Vl.ltr,a)},$=(n,s)=>{const a=Wo(n,s);return gd(n,a)},G=(n,s)=>$(n,s).match({ltr:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(i.dom,d),C.setEnd(g.dom,h),C},rtl:(i,d,g,h)=>{const C=n.document.createRange();return C.setStart(g.dom,h),C.setEnd(i.dom,d),C}});Vl.ltr,Vl.rtl;const ie=9,ze=11,Qt=1,oo=3,Zo=(n,s)=>{const a=n.dom;if(a.nodeType!==Qt)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},kr=n=>n.nodeType!==Qt&&n.nodeType!==ie&&n.nodeType!==ze||n.childElementCount===0,ea=(n,s)=>{const a=s===void 0?document:s.dom;return kr(a)?[]:pe(a.querySelectorAll(n),ht.fromDom)},nc=(n,s)=>{const a=s===void 0?document:s.dom;return kr(a)?A.none():A.from(a.querySelector(n)).map(ht.fromDom)},L=(n,s)=>n.dom===s.dom,te=(n,s)=>{const a=n.dom,i=s.dom;return a===i?!1:a.contains(i)},he=(n,s,a,i)=>{const d=n.isiOS()&&/ipad/i.test(a)===!0,g=n.isiOS()&&!d,h=n.isiOS()||n.isAndroid(),C=h||i("(pointer:coarse)"),x=d||!g&&h&&i("(min-device-width:768px)"),T=g||h&&!x,_=s.isSafari()&&n.isiOS()&&/safari/i.test(a)===!1,N=!T&&!x&&!_;return{isiPad:se(d),isiPhone:se(g),isTablet:se(x),isPhone:se(T),isTouch:se(C),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:se(_),isDesktop:se(N)}},$e=(n,s)=>{for(let a=0;a<n.length;a++){const i=n[a];if(i.test(s))return i}},bt=(n,s)=>{const a=$e(n,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return ko(i(1),i(2))},Kt=(n,s)=>{const a=String(s).toLowerCase();return n.length===0?Hn():bt(n,a)},Hn=()=>ko(0,0),ko=(n,s)=>({major:n,minor:s}),uo={nu:ko,detect:Kt,unknown:Hn},xa=(n,s)=>va(s.brands,a=>{const i=a.brand.toLowerCase();return Wt(n,d=>i===d.brand?.toLowerCase()).map(d=>({current:d.name,version:uo.nu(parseInt(a.version,10),0)}))}),qs=(n,s)=>{const a=String(s).toLowerCase();return Wt(n,i=>i.search(a))},_u=(n,s)=>qs(n,s).map(a=>{const i=uo.detect(a.versionRegexes,s);return{current:a.name,version:i}}),Xm=(n,s)=>qs(n,s).map(a=>{const i=uo.detect(a.versionRegexes,s);return{current:a.name,version:i}}),rm=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pi=n=>s=>hs(s,n),Qb=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:n=>hs(n,"edge/")&&hs(n,"chrome")&&hs(n,"safari")&&hs(n,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rm],search:n=>hs(n,"chrome")&&!hs(n,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:n=>hs(n,"msie")||hs(n,"trident")},{name:"Opera",versionRegexes:[rm,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pi("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pi("firefox")},{name:"Safari",versionRegexes:[rm,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:n=>(hs(n,"safari")||hs(n,"mobile/"))&&hs(n,"applewebkit")}],Jb=[{name:"Windows",search:Pi("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:n=>hs(n,"iphone")||hs(n,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pi("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Pi("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pi("linux"),versionRegexes:[]},{name:"Solaris",search:Pi("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pi("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pi("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Vp={browsers:se(Qb),oses:se(Jb)},Bi="Edge",e0="Chromium",t0="IE",Zy="Opera",Ul="Firefox",Gy="Safari",qy=()=>Up({current:void 0,version:uo.unknown()}),Up=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Bi),isChromium:i(e0),isIE:i(t0),isOpera:i(Zy),isFirefox:i(Ul),isSafari:i(Gy)}},jp={unknown:qy,nu:Up},IS="Windows",Ky="iOS",Wp="Android",jl="Linux",ii="macOS",am="Solaris",Yy="FreeBSD",po="ChromeOS",Xy=()=>bh({current:void 0,version:uo.unknown()}),bh=n=>{const s=n.current,a=n.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(IS),isiOS:i(Ky),isAndroid:i(Wp),isMacOS:i(ii),isLinux:i(jl),isSolaris:i(am),isFreeBSD:i(Yy),isChromeOS:i(po)}},tr={unknown:Xy,nu:bh},Zp={detect:(n,s,a)=>{const i=Vp.browsers(),d=Vp.oses(),g=s.bind(x=>xa(i,x)).orThunk(()=>_u(i,n)).fold(jp.unknown,jp.nu),h=Xm(d,n).fold(tr.unknown,tr.nu),C=he(h,g,n,a);return{browser:g,os:h,deviceType:C}}},FS=n=>window.matchMedia(n).matches;let n0=Fc(()=>Zp.detect(window.navigator.userAgent,A.from(window.navigator.userAgentData),FS));const Ks=()=>n0(),cm=(n,s)=>Ic(n,s),Qy=(n,s)=>{const a=cm(n,s);if(a==null)throw new Error(n+" not available on this browser");return a},lt=Object.getPrototypeOf,Hc=n=>Qy("HTMLElement",n),ag=n=>{const s=Ic("ownerDocument.defaultView",n);return Oe(n)&&(Hc(s).prototype.isPrototypeOf(n)||/^HTML\w*Element$/.test(lt(n).constructor.name))},$i=n=>n.dom.nodeName.toLowerCase(),Qm=n=>n.dom.nodeType,Gp=n=>s=>Qm(s)===n,ne=n=>pc(n)&&ag(n.dom),pc=Gp(Qt),hd=Gp(oo),qp=Gp(ie),Jm=Gp(ze),Sa=n=>s=>pc(s)&&$i(s)===n,bc=n=>ht.fromDom(n.dom.ownerDocument),Kp=n=>qp(n)?n:bc(n),Yp=n=>ht.fromDom(Kp(n).dom.documentElement),cg=n=>ht.fromDom(Kp(n).dom.defaultView),vc=n=>A.from(n.dom.parentNode).map(ht.fromDom),Xp=n=>vc(n),Wl=n=>A.from(n.dom.parentElement).map(ht.fromDom),ig=(n,s)=>{const a=qe(s)?s:dn;let i=n.dom;const d=[];for(;i.parentNode!==null&&i.parentNode!==void 0;){const g=i.parentNode,h=ht.fromDom(g);if(d.push(h),a(h)===!0)break;i=g}return d},Qp=n=>A.from(n.dom.offsetParent).map(ht.fromDom),zc=n=>A.from(n.dom.previousSibling).map(ht.fromDom),Jp=n=>A.from(n.dom.nextSibling).map(ht.fromDom),ul=n=>pe(n.dom.childNodes,ht.fromDom),pd=(n,s)=>{const a=n.dom.childNodes;return A.from(a[s]).map(ht.fromDom)},no=n=>pd(n,0),oc=(n,s)=>({element:n,offset:s}),ef=(n,s)=>{const a=ul(n);return a.length>0&&s<a.length?oc(a[s],0):oc(n,s)},o0=(n,s,a,i)=>{const g=bc(n).dom.createRange();return g.setStart(n.dom,s),g.setEnd(a.dom,i),g},jn=(n,s,a,i)=>{const d=o0(n,s,a,i),g=L(n,a)&&s===i;return d.collapsed&&!g},Ou=n=>Jm(n)&&Dt(n.dom.host),pr=n=>ht.fromDom(n.dom.getRootNode()),dl=n=>Ou(n)?n:ht.fromDom(Kp(n).dom.body),ml=n=>Hs(n).isSome(),Hs=n=>{const s=pr(n);return Ou(s)?A.some(s):A.none()},Ao=n=>ht.fromDom(n.dom.host),Jy=n=>{if(Dt(n.target)){const s=ht.fromDom(n.target);if(pc(s)&&e2(s)&&n.composed&&n.composedPath){const a=n.composedPath();if(a)return No(a)}}return A.from(n.target)},e2=n=>Dt(n.dom.shadowRoot),br=(n,s,a,i,d,g,h)=>({target:n,x:s,y:a,stop:i,prevent:d,kill:g,raw:h}),Ii=n=>{const s=ht.fromDom(Jy(n).getOr(n.target)),a=()=>n.stopPropagation(),i=()=>n.preventDefault(),d=ut(i,a);return br(s,n.clientX,n.clientY,a,i,d,n)},Li=(n,s)=>a=>{n(a)&&s(Ii(a))},vr=(n,s,a,i,d)=>{const g=Li(a,i);return n.dom.addEventListener(s,g,d),{unbind:Yt(Vc,n,s,g,d)}},fl=(n,s,a,i)=>vr(n,s,a,i,!1),sc=(n,s,a,i)=>vr(n,s,a,i,!0),Vc=(n,s,a,i)=>{n.dom.removeEventListener(s,a,i)},wa=_t,Mo=(n,s,a)=>fl(n,s,wa,a),li=(n,s,a)=>sc(n,s,wa,a),rc=Ii,ta=()=>ht.fromDom(document),Hr=(n,s=!1)=>n.dom.focus({preventScroll:s}),Ns=n=>n.dom.blur(),Fi=n=>{const s=pr(n).dom;return n.dom===s.activeElement},zr=(n=ta())=>A.from(n.dom.activeElement).map(ht.fromDom),ar=n=>zr(pr(n)).filter(s=>n.dom.contains(s.dom)),bd=(n,s)=>{vc(n).each(i=>{i.dom.insertBefore(s.dom,n.dom)})},e1=(n,s)=>{Jp(n).fold(()=>{vc(n).each(d=>{Vr(d,s)})},i=>{bd(i,s)})},vh=(n,s)=>{no(n).fold(()=>{Vr(n,s)},i=>{n.dom.insertBefore(s.dom,i.dom)})},Vr=(n,s)=>{n.dom.appendChild(s.dom)},t1=(n,s,a)=>{pd(n,a).fold(()=>{Vr(n,s)},i=>{bd(i,s)})},s0=(n,s)=>{Te(s,a=>{Vr(n,a)})},im=(n,s,a)=>{if(de(a)||Ot(a)||En(a))n.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",n),new Error("Attribute value was not simple")},Cn=(n,s,a)=>{im(n.dom,s,a)},n1=(n,s)=>{const a=n.dom;gs(s,(i,d)=>{im(a,d,i)})},Pr=(n,s)=>{const a=n.dom.getAttribute(s);return a===null?void 0:a},na=(n,s)=>A.from(Pr(n,s)),oa=(n,s)=>{const a=n.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},ps=(n,s)=>{n.dom.removeAttribute(s)},vd=n=>Tt(n.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),yh=n=>{n.dom.textContent="",Te(ul(n),s=>{ui(s)})},ui=n=>{const s=n.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},gl=(n,s)=>ht.fromDom(n.dom.cloneNode(s)),lg=n=>gl(n,!1),Ch=n=>gl(n,!0),ug=(n,s)=>{const i=(s||document).createElement("div");return i.innerHTML=n,ul(ht.fromDom(i))},Zl=n=>n.dom.innerHTML,Hi=(n,s)=>{const i=bc(n).dom,d=ht.fromDom(i.createDocumentFragment()),g=ug(s,i);s0(d,g),yh(n),Vr(n,d)},o1=n=>{const s=ht.fromTag("div"),a=ht.fromDom(n.dom.cloneNode(!0));return Vr(s,a),Zl(s)},da=n=>{if(Ou(n))return"#shadow-root";{const s=lg(n);return o1(s)}},di=n=>new Promise((s,a)=>{const i=()=>{g(),s(n)},d=[Mo(n,"load",i),Mo(n,"error",()=>{g(),a("Unable to load data from image: "+n.dom.src)})],g=()=>Te(d,h=>h.unbind());n.dom.complete&&i()}),Gl=n=>n.style!==void 0&&qe(n.style.getPropertyValue),yo=n=>{const s=hd(n)?n.dom.parentNode:n.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return Hs(ht.fromDom(s)).fold(()=>a.body.contains(s),At(yo,Ao))},Uc=()=>r0(ht.fromDom(document)),r0=n=>{const s=n.dom.body;if(s==null)throw new Error("Body is not available yet");return ht.fromDom(s)},dg=(n,s,a)=>{if(!de(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",n),new Error("CSS value must be a string: "+a);Gl(n)&&n.style.setProperty(s,a)},mi=(n,s)=>{Gl(n)&&n.style.removeProperty(s)},Tn=(n,s,a)=>{const i=n.dom;dg(i,s,a)},Ts=(n,s)=>{const a=n.dom;gs(s,(i,d)=>{dg(a,d,i)})},sa=(n,s)=>{const a=n.dom;gs(s,(i,d)=>{i.fold(()=>{mi(a,d)},g=>{dg(a,d,g)})})},bs=(n,s)=>{const a=n.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!yo(n)?fi(a,s):d},fi=(n,s)=>Gl(n)?n.style.getPropertyValue(s):"",ws=(n,s)=>{const a=n.dom,i=fi(a,s);return A.from(i).filter(d=>d.length>0)},cr=n=>{const s={},a=n.dom;if(Gl(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},tf=(n,s,a)=>{const i=ht.fromTag(n);return Tn(i,s,a),ws(i,s).isSome()},Jn=(n,s)=>{const a=n.dom;mi(a,s),gc(na(n,"style").map(Rt),"")&&ps(n,"style")},zi=n=>n.dom.offsetWidth,Xo=(n,s)=>{const a=(C,x)=>{if(!En(x)&&!x.match(/^[0-9]+$/))throw new Error(n+".set accepts only positive integer values. Value was "+x);const T=C.dom;Gl(T)&&(T.style[n]=x+"px")},i=C=>{const x=s(C);if(x<=0||x===null){const T=bs(C,n);return parseFloat(T)||0}return x},d=i,g=(C,x)=>Tt(x,(T,_)=>{const N=bs(C,_),H=N===void 0?0:parseInt(N,10);return isNaN(H)?T:T+H},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(C,x,T)=>{const _=g(C,T);return x>_?x-_:0}}},yc=Xo("height",n=>{const s=n.dom;return yo(n)?s.getBoundingClientRect().height:s.offsetHeight}),yr=n=>yc.get(n),Cr=n=>yc.getOuter(n),ql=(n,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=yc.max(n,s,a);Tn(n,"max-height",i+"px")},nf=n=>n.offsetWidth<=0&&n.offsetHeight<=0,Du=n=>!nf(n.dom),yd=Xo("width",n=>{const s=n.dom;return yo(n)?s.getBoundingClientRect().width:s.offsetWidth}),Cd=(n,s)=>yd.set(n,s),ma=n=>yd.get(n),Ru=n=>yd.getOuter(n),t2=(n,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=yd.max(n,s,a);Tn(n,"max-width",i+"px")},xd=(n,s)=>({left:n,top:s,translate:(i,d)=>xd(n+i,s+d)}),$o=xd,s1=n=>{const s=n.getBoundingClientRect();return $o(s.left,s.top)},of=(n,s)=>n!==void 0?n:s!==void 0?s:0,Ea=n=>{const s=n.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===n.dom)return $o(a.offsetLeft,a.offsetTop);const g=of(i?.pageYOffset,d.scrollTop),h=of(i?.pageXOffset,d.scrollLeft),C=of(d.clientTop,a.clientTop),x=of(d.clientLeft,a.clientLeft);return Cc(n).translate(h-x,g-C)},Cc=n=>{const s=n.dom,i=s.ownerDocument.body;return i===s?$o(i.offsetLeft,i.offsetTop):yo(n)?s1(s):$o(0,0)},Vs=n=>{const s=n!==void 0?n.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return $o(a,i)},Nu=(n,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(n,s)},sf=((n,s)=>{const a=g=>{if(!n(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>n(g)?A.from(g.dom.nodeValue):A.none();return{get:a,getOption:i,set:(g,h)=>{if(!n(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=h}}})(hd,"text"),xh=n=>sf.get(n),r1=(n,s)=>a=>HS(a)==="rtl"?s:n,HS=n=>bs(n,"direction")==="rtl"?"rtl":"ltr",hl=(n,s)=>{const a=Pr(n,s);return a===void 0||a===""?[]:a.split(" ")},n2=(n,s,a)=>{const d=hl(n,s).concat([a]);return Cn(n,s,d.join(" ")),!0},a1=(n,s,a)=>{const i=sn(hl(n,s),d=>d!==a);return i.length>0?Cn(n,s,i.join(" ")):ps(n,s),!1};var pl=(n,s,a,i,d)=>n(a,i)?A.some(a):qe(d)&&d(a)?A.none():s(a,i,d);const a0=(n,s,a)=>{let i=n.dom;const d=qe(a)?a:dn;for(;i.parentNode;){i=i.parentNode;const g=ht.fromDom(i);if(s(g))return A.some(g);if(d(g))break}return A.none()},rf=(n,s,a)=>pl((d,g)=>g(d),a0,n,s,a),mg=(n,s)=>{const a=n.dom;return a.parentNode?fg(ht.fromDom(a.parentNode),i=>!L(n,i)&&s(i)):A.none()},fg=(n,s)=>{const a=d=>s(ht.fromDom(d));return Wt(n.dom.childNodes,a).map(ht.fromDom)},c1=(n,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=ht.fromDom(i.childNodes[d]);if(s(g))return A.some(g);const h=a(i.childNodes[d]);if(h.isSome())return h}return A.none()};return a(n.dom)},c0=n=>nc(n),Vi=(n,s,a)=>a0(n,i=>Zo(i,s),a),o2=(n,s)=>mg(n,a=>Zo(a,s)),Sd=(n,s)=>fg(n,a=>Zo(a,s)),Io=(n,s)=>nc(s,n),Ta=(n,s,a)=>pl((d,g)=>Zo(d,g),Vi,n,s,a),Kl=(n,s)=>{n.dom.checked=s},i1=n=>n.dom.checked,wd=n=>n.dom.classList!==void 0,l1=n=>hl(n,"class"),i0=(n,s)=>n2(n,"class",s),Yl=(n,s)=>a1(n,"class",s),Xl=(n,s)=>tt(l1(n),s)?Yl(n,s):i0(n,s),Go=(n,s)=>{wd(n)?n.dom.classList.add(s):i0(n,s)},l0=n=>{(wd(n)?n.dom.classList:l1(n)).length===0&&ps(n,"class")},Ms=(n,s)=>{wd(n)?n.dom.classList.remove(s):Yl(n,s),l0(n)},af=(n,s)=>{const a=wd(n)?n.dom.classList.toggle(s):Xl(n,s);return l0(n),a},lr=(n,s)=>wd(n)&&n.dom.classList.contains(s),Ql=(n,s)=>{Te(s,a=>{Go(n,a)})},fa=(n,s)=>{Te(s,a=>{Ms(n,a)})},Mu=(n,s)=>{Te(s,a=>{af(n,a)})},Sh=(n,s)=>nt(s,a=>lr(n,a)),u1=n=>{const s=n.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},d1=n=>wd(n)?u1(n):l1(n),s2=n=>n.dom.textContent,xc=n=>n.dom.value,bl=(n,s)=>{if(s===void 0)throw new Error("Value.set was undefined");n.dom.value=s},ur=(n,s,a)=>sn(ig(n,a),s),Ur=(n,s)=>ea(s,n),wh=(n,s,a)=>rf(n,s,a).isSome(),gg=(n,s,a)=>Ta(n,s,a).isSome(),Eh=n=>qe(n)?n:dn,u0=(n,s,a)=>{let i=n.dom;const d=Eh(a);for(;i.parentNode;){i=i.parentNode;const g=ht.fromDom(i),h=s(g);if(h.isSome())return h;if(d(g))break}return A.none()},Ui=(n,s,a)=>{const i=s(n),d=Eh(a);return i.orThunk(()=>d(n)?A.none():u0(n,s,d))},w={create:(n,s,a,i)=>({start:n,soffset:s,finish:a,foffset:i})},k=Ia.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),F=(n,s,a,i)=>n.fold(s,a,i),q=n=>n.fold(nn,nn,nn),ge=k.before,Fe=k.on,xt=k.after,an={before:ge,on:Fe,after:xt,cata:F,getStart:q},In=Ia.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Gn=n=>In.exact(n.start,n.soffset,n.finish,n.foffset),cs=n=>n.match({domRange:s=>ht.fromDom(s.startContainer),relative:(s,a)=>an.getStart(s),exact:(s,a,i,d)=>s}),ks=In.domRange,dr=In.relative,jc=In.exact,vl=n=>{const s=cs(n);return cg(s)},Pu=w.create,ji={domRange:ks,relative:dr,exact:jc,exactFromRange:Gn,getWin:vl,range:Pu},m1=n=>A.from(n.getSelection()),cf=n=>{if(n.rangeCount>0){const s=n.getRangeAt(0),a=n.getRangeAt(n.rangeCount-1);return A.some(w.create(ht.fromDom(s.startContainer),s.startOffset,ht.fromDom(a.endContainer),a.endOffset))}else return A.none()},hg=n=>{if(n.anchorNode===null||n.focusNode===null)return cf(n);{const s=ht.fromDom(n.anchorNode),a=ht.fromDom(n.focusNode);return jn(s,n.anchorOffset,a,n.focusOffset)?A.some(w.create(s,n.anchorOffset,a,n.focusOffset)):cf(n)}},pg=n=>m1(n).filter(s=>s.rangeCount>0).bind(hg),bg=(n,s)=>{const a=G(n,s);return Ca(a)},lf=(n,s)=>{const a=G(n,s);return Mi(a)},Th={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},r2=(()=>{const n="[0-9]+",a="[eE]"+("[+-]?"+n),i="\\.",d=C=>`(?:${C})?`,h=`[+-]?(?:${["Infinity",n+i+d(n)+d(a),i+n+d(a),n+d(a)].join("|")})`;return new RegExp(`^(${h})(.*)$`)})(),a2=(n,s)=>St(s,a=>St(Th[a],i=>n===i)),Co=(n,s)=>A.from(r2.exec(n)).bind(i=>{const d=Number(i[1]),g=i[2];return a2(g,s)?A.some({value:d,unit:g}):A.none()}),Us=(n,s)=>Co(n,s).map(({value:a,unit:i})=>a+i),Ys=n=>{const s=n===void 0?window:n;return Ks().browser.isFirefox()?A.none():A.from(s.visualViewport)},ka=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),kh=n=>{const s=n===void 0?window:n,a=s.document,i=Vs(ht.fromDom(a));return Ys(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,h=d.clientHeight;return ka(i.left,i.top,g,h)},d=>ka(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},vg=(n,s)=>n.view(s).fold(se([]),i=>{const d=n.owner(i),g=vg(n,d);return[i].concat(g)}),Ah=(n,s)=>{const a=s.owner(n),i=vg(s,a);return A.some(i)};var lm=Object.freeze({__proto__:null,view:n=>(n.dom===document?A.none():A.from(n.dom.defaultView?.frameElement)).map(ht.fromDom),owner:n=>bc(n)});const f1=n=>{const s=ta(),a=Vs(s);return Ah(n,lm).fold(Yt(Ea,n),d=>{const g=Cc(n),h=Un(d,(C,x)=>{const T=Cc(x);return{left:C.left+T.left,top:C.top+T.top}},{left:0,top:0});return $o(h.left+g.left+a.left,h.top+g.top+a.top)})},uf=(n,s,a)=>({point:n,width:s,height:a}),Uk=(n,s,a,i)=>({x:n,y:s,width:a,height:i}),Br=(n,s,a,i)=>({x:n,y:s,width:a,height:i,right:n+a,bottom:s+i}),Ar=n=>{const s=Ea(n),a=Ru(n),i=Cr(n);return Br(s.left,s.top,a,i)},df=n=>{const s=f1(n),a=Ru(n),i=Cr(n);return Br(s.left,s.top,a,i)},um=(n,s)=>{const a=Math.max(n.x,s.x),i=Math.max(n.y,s.y),d=Math.min(n.right,s.right),g=Math.min(n.bottom,s.bottom),h=d-a,C=g-i;return Br(a,i,h,C)},c2=(n,s)=>Tt(s,(a,i)=>um(a,i),n),za=()=>kh(window),i2=(n,s)=>L(n.element,s.event.target),mf=n=>(gc(ws(n,"position"),"fixed")?A.none():Qp(n)).orThunk(()=>{const i=ht.fromTag("span");return vc(n).bind(d=>{Vr(d,i);const g=Qp(i);return ui(i),g})}),d0=n=>mf(n).map(Ea).getOrThunk(()=>$o(0,0)),Wi=(n,s)=>{const a=A.from(Pr(n,"id")).getOrThunk(()=>{const i=Mt("aria");return Cn(s,"id",i),i});Cn(n,"aria-describedby",a)},l2=n=>{ps(n,"aria-describedby")};var gi;(function(n){n[n.Error=0]="Error",n[n.Value=1]="Value"})(gi||(gi={}));const nr=(n,s,a)=>n.stype===gi.Error?s(n.serror):a(n.svalue),m0=n=>{const s=[],a=[];return Te(n,i=>{nr(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Oh=(n,s)=>n.stype===gi.Error?{stype:gi.Error,serror:s(n.serror)}:n,US=(n,s)=>n.stype===gi.Value?{stype:gi.Value,svalue:s(n.svalue)}:n,u2=(n,s)=>n.stype===gi.Value?s(n.svalue):n,jS=(n,s)=>n.stype===gi.Error?s(n.serror):n,WS=n=>({stype:gi.Value,svalue:n}),f0=n=>({stype:gi.Error,serror:n}),kt={fromResult:n=>n.fold(f0,WS),toResult:n=>nr(n,rn.error,rn.value),svalue:WS,partition:m0,serror:f0,bind:u2,bindError:jS,map:US,mapError:Oh,fold:nr},Wc=n=>Oe(n)&&wo(n).length>100?" removed due to size":JSON.stringify(n,null,2),jk=n=>{const s=n.length>10?n.slice(0,10).concat([{path:[],getErrorInfo:se("... (only showing first ten failures)")}]):n;return pe(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},Sc=(n,s)=>kt.serror([{path:n,getErrorInfo:s}]),yl=(n,s,a)=>Sc(n,()=>'Could not find valid *required* value for "'+s+'" in '+Wc(a)),h0=(n,s)=>Sc(n,()=>'Choice schema did not contain choice key: "'+s+'"'),Wk=(n,s,a)=>Sc(n,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Wc(s)),ff=(n,s)=>Sc(n,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),Zk=(n,s)=>Sc(n,se(s)),Zc=n=>{const s=(i,d)=>kt.bindError(n(d),g=>Zk(i,g)),a=se("val");return{extract:s,toString:a}},ZS=Zc(kt.svalue),Cl=se(ZS),dt=(n,s)=>Zc(a=>{const i=typeof a;return n(a)?kt.svalue(a):kt.serror(`Expected type: ${s} but got: ${i}`)}),d2=dt(En,"number"),jr=dt(de,"string"),Zn=dt(Ot,"boolean"),dm=dt(qe,"function"),Rh=n=>{if(Object(n)!==n)return!0;switch({}.toString.call(n).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(n).every(s=>Rh(n[s]));default:return!1}},js=Zc(n=>Rh(n)?kt.svalue(n):kt.serror("Expected value to be acceptable for sending via postMessage")),xl=()=>({tag:"required",process:{}}),g1=n=>({tag:"defaultedThunk",process:n}),hi=n=>g1(se(n)),As=()=>({tag:"option",process:{}}),mm=n=>({tag:"mergeWithThunk",process:n}),Nh=n=>mm(se(n)),m2=(n,s,a,i)=>({tag:"field",key:n,newKey:s,presence:a,prop:i}),f2=(n,s)=>({tag:"custom",newKey:n,instantiator:s}),Sl=(n,s,a)=>{switch(n.tag){case"field":return s(n.key,n.newKey,n.presence,n.prop);case"custom":return a(n.newKey,n.instantiator)}},h1=(n,s)=>kt.svalue(jo(s,dd.apply(void 0,n))),p1=n=>ut(kt.serror,hn)(n),b1={consolidateObj:(n,s)=>{const a=kt.partition(n);return a.errors.length>0?p1(a.errors):h1(a.values,s)},consolidateArr:n=>{const s=kt.partition(n);return s.errors.length>0?p1(s.errors):kt.svalue(s.values)}},h2=(n,s,a,i)=>en(s,a).fold(()=>yl(n,a,s),i),p0=(n,s,a,i)=>{const d=en(n,s).getOrThunk(()=>a(n));return i(d)},qk=(n,s,a)=>a(en(n,s)),Kk=(n,s,a,i)=>{const d=en(n,s).map(g=>g===!0?a(n):g);return i(d)},p2=(n,s,a,i,d)=>{const g=C=>d.extract(s.concat([i]),C),h=C=>C.fold(()=>kt.svalue(A.none()),x=>{const T=d.extract(s.concat([i]),x);return kt.map(T,A.some)});switch(n.tag){case"required":return h2(s,a,i,g);case"defaultedThunk":return p0(a,i,n.process,g);case"option":return qk(a,i,h);case"defaultedOptionThunk":return Kk(a,i,n.process,h);case"mergeWithThunk":return p0(a,i,se({}),C=>{const x=jo(n.process(a),C);return g(x)})}},Yk=(n,s,a)=>{const i={},d=[];for(const g of a)Sl(g,(h,C,x,T)=>{const _=p2(x,n,s,h,T);kt.fold(_,N=>{d.push(...N)},N=>{i[C]=N})},(h,C)=>{i[h]=C(s)});return d.length>0?kt.serror(d):kt.svalue(i)},v1=n=>({extract:(i,d)=>n().extract(i,d),toString:()=>n().toString()}),u5=n=>wo(hr(n,Dt)),pi=n=>{const s=bn(n),a=Un(n,(d,g)=>Sl(g,h=>jo(d,{[h]:!0}),se(d)),{});return{extract:(d,g)=>{const h=Ot(g)?[]:u5(g),C=sn(h,x=>!qn(a,x));return C.length===0?s.extract(d,g):ff(d,C)},toString:s.toString}},bn=n=>({extract:(i,d)=>Yk(i,d,n),toString:()=>`obj{
`+pe(n,d=>Sl(d,(g,h,C,x)=>g+" -> "+x.toString(),(g,h)=>"state("+g+")")).join(`
`)+"}"}),or=n=>({extract:(i,d)=>{const g=pe(d,(h,C)=>n.extract(i.concat(["["+C+"]"]),h));return b1.consolidateArr(g)},toString:()=>"array("+n.toString()+")"}),Mh=(n,s)=>{const a=s!==void 0?s:nn;return{extract:(g,h)=>{const C=[];for(const x of n){const T=x.extract(g,h);if(T.stype===gi.Value)return{stype:gi.Value,svalue:a(T.svalue)};C.push(T)}return b1.consolidateArr(C)},toString:()=>"oneOf("+pe(n,g=>g.toString()).join(", ")+")"}},GS=(n,s)=>{const a=(g,h)=>or(Zc(n)).extract(g,h);return{extract:(g,h)=>{const C=wo(h),x=a(g,C);return kt.bind(x,T=>{const _=pe(T,N=>m2(N,N,xl(),s));return bn(_).extract(g,h)})},toString:()=>"setOf("+s.toString()+")"}},yg=(n,s)=>{const a=Fc(s);return{extract:(g,h)=>a().extract(g,h),toString:()=>a().toString()}},Ph=ut(or,bn),b2=(n,s,a,i)=>en(a,i).fold(()=>Wk(n,a,i),g=>g.extract(n.concat(["branch: "+i]),s)),Cg=(n,s)=>({extract:(d,g)=>en(g,n).fold(()=>h0(d,n),C=>b2(d,g,s,C)),toString:()=>"chooseOn("+n+"). Possible values: "+wo(s)}),qS=()=>or(ZS),Ed=n=>Zc(s=>n(s).fold(kt.serror,kt.svalue)),KS=(n,s)=>GS(a=>kt.fromResult(n(a)),s),v2=(n,s,a)=>{const i=s.extract([n],a);return kt.mapError(i,d=>({input:a,errors:d}))},zs=(n,s,a)=>kt.toResult(v2(n,s,a)),wl=n=>n.fold(s=>{throw new Error(Bh(s))},nn),wc=(n,s,a)=>wl(zs(n,s,a)),Bh=n=>`Errors: 
`+jk(n.errors).join(`
`)+`

Input object: `+Wc(n.input),Ec=(n,s)=>Cg(n,Ls(s,bn)),xg=(n,s)=>yg(n,s),ra=m2,Tc=f2,b0=n=>Ed(s=>tt(n,s)?rn.value(s):rn.error(`Unsupported value: "${s}", choose one of "${n.join(", ")}".`)),ot=n=>ra(n,n,xl(),Cl()),Gc=(n,s)=>ra(n,n,xl(),s),y1=n=>Gc(n,d2),Xs=n=>Gc(n,jr),Jl=(n,s)=>ra(n,n,xl(),b0(s)),bi=n=>Gc(n,dm),Xk=(n,s)=>ra(n,n,As(),Zc(a=>kt.serror("The field: "+n+" is forbidden. "+s))),Td=(n,s)=>ra(n,n,xl(),bn(s)),YS=(n,s)=>ra(n,n,xl(),Ph(s)),qc=(n,s)=>ra(n,n,xl(),or(s)),zo=n=>ra(n,n,As(),Cl()),Bu=(n,s)=>ra(n,n,As(),s),$h=n=>Bu(n,d2),Qs=n=>Bu(n,jr),y2=(n,s)=>Bu(n,b0(s)),C2=n=>Bu(n,Zn),eu=n=>Bu(n,dm),v0=(n,s)=>Bu(n,or(s)),Kc=(n,s)=>Bu(n,bn(s)),Qk=(n,s)=>Bu(n,pi(s)),De=(n,s)=>ra(n,n,hi(s),Cl()),Zi=(n,s,a)=>ra(n,n,hi(s),a),C1=(n,s)=>Zi(n,s,d2),Ws=(n,s)=>Zi(n,s,jr),kc=(n,s,a)=>Zi(n,s,b0(a)),Wr=(n,s)=>Zi(n,s,Zn),us=(n,s)=>Zi(n,s,dm),XS=(n,s)=>Zi(n,s,js),gf=(n,s,a)=>Zi(n,s,or(a)),hf=(n,s,a)=>Zi(n,s,bn(a)),Ih=(n,s)=>{const a={};return gs(n,(i,d)=>{tt(s,d)||(a[d]=i)}),a},x1=(n,s)=>({[n]:s}),x2=n=>{const s={};return Te(n,a=>{s[a.key]=a.value}),s},S2=(n,s)=>Ih(n,s),pf=(n,s)=>x1(n,s),Lh=n=>x2(n),QS=(n,s)=>n.length===0?rn.value(s):rn.value(jo(s,dd.apply(void 0,n))),w2=n=>rn.error(hn(n)),Jk=(n,s)=>{const a=Ni(n);return a.errors.length>0?w2(a.errors):QS(a.values,s)},Va=se,vi=Va("touchstart"),mr=Va("touchmove"),bf=Va("touchend"),S1=Va("touchcancel"),Yc=Va("mousedown"),Fh=Va("mousemove"),$r=Va("mouseout"),y0=Va("mouseup"),Gi=Va("mouseover"),tu=Va("focusin"),E2=Va("focusout"),aa=Va("keydown"),Hh=Va("keyup"),$u=Va("input"),Sg=Va("change"),wg=Va("click"),e3=Va("transitioncancel"),C0=Va("transitionend"),fm=Va("transitionstart"),w1=Va("selectstart"),ds=n=>se("alloy."+n),JS={tap:ds("tap")},gm=ds("focus"),zh=ds("blur.post"),x0=ds("paste.post"),hm=ds("receive"),Aa=ds("execute"),Eg=ds("focus.item"),Vh=JS.tap,S0=ds("longpress"),w0=ds("sandbox.close"),E0=ds("typeahead.cancel"),E1=ds("system.init"),ew=ds("system.touchmove"),T2=ds("system.touchend"),k2=ds("system.scroll"),Uh=ds("system.resize"),Iu=ds("system.attached"),El=ds("system.detached"),pm=ds("system.dismissRequested"),tw=ds("system.repositionRequested"),T0=ds("focusmanager.shifted"),A2=ds("slotcontainer.visibility"),nw=ds("system.external.element.scroll"),_2=ds("change.tab"),k0=ds("dismiss.tab"),A0=ds("highlight"),_0=ds("dehighlight"),Lu=n=>da(n),T1="unknown";var jh;(function(n){n[n.STOP=0]="STOP",n[n.NORMAL=1]="NORMAL",n[n.LOGGING=2]="LOGGING"})(jh||(jh={}));const Tg=Zt({}),ow=(n,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,h)=>{a.push({outcome:"cut",target:g,purpose:h})},logEventStopped:(d,g,h)=>{a.push({outcome:"stopped",target:g,purpose:h})},logNoParent:(d,g,h)=>{a.push({outcome:"no-parent",target:g,purpose:h})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,h)=>{a.push({outcome:"response",purpose:h,target:g})},write:()=>{const d=new Date().getTime();tt(["mousemove","mouseover","mouseout",E1()],n)||console.log(n,{event:n,time:d-i,target:s.dom,sequence:pe(a,g=>tt(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+Lu(g.target)+")":g.outcome)})}}},Wh=(n,s,a)=>{switch(en(Tg.get(),n).orThunk(()=>{const d=wo(Tg.get());return va(d,g=>n.indexOf(g)>-1?A.some(Tg.get()[g]):A.none())}).getOr(jh.NORMAL)){case jh.NORMAL:return a(O0());case jh.LOGGING:{const d=ow(n,s),g=a(d);return d.write(),g}case jh.STOP:return!0}},Ac=["alloy/data/Fields","alloy/debugging/Debugging"],t3=()=>{const n=new Error;if(n.stack!==void 0){const s=n.stack.split(`
`);return Wt(s,a=>a.indexOf("alloy")>0&&!St(Ac,i=>a.indexOf(i)>-1)).getOr(T1)}else return T1},O2={logEventCut:V,logEventStopped:V,logNoParent:V,logEventNoHandlers:V,logEventResponse:V,write:V},D2=(n,s,a)=>Wh(n,s,a),O0=se(O2),sw=se([ot("menu"),ot("selectedMenu")]),kg=se([ot("item"),ot("selectedItem")]);se(bn(kg().concat(sw())));const rw=se(bn(kg())),k1=Td("initSize",[ot("numColumns"),ot("numRows")]),R2=()=>Gc("markers",rw()),aw=()=>Td("markers",[ot("backgroundMenu")].concat(sw()).concat(kg())),mo=n=>Td("markers",pe(n,ot)),D0=(n,s,a)=>(t3(),ra(s,s,a,Ed(i=>rn.value((...d)=>i.apply(void 0,d))))),xo=n=>D0("onHandler",n,hi(V)),yi=n=>D0("onKeyboardHandler",n,hi(A.none)),vf=n=>D0("onHandler",n,xl()),A1=n=>D0("onKeyboardHandler",n,xl()),Po=(n,s)=>Tc(n,se(s)),cw=n=>Tc(n,nn),iw=se(k1),n3=(n,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),h=i.substring(g+1,d-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:Ag(h.slice(0,1).concat(h.slice(3)))}),n},Ag=n=>pe(n,s=>ai(s,"/*")?s.substring(0,s.length-2):s),_1=(n,s)=>{const a=n.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:s,parameters:Ag(g)}),n},lw=(n,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return n.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:Ag(g.slice(1))}),n},o3=(n,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{n.apply(null,g),a=null},s)}}},s3=5,uw=400,dw=n=>{const s=n.raw;return s.touches===void 0||s.touches.length!==1?A.none():A.some(s.touches[0])},r3=(n,s)=>{const a=Math.abs(n.clientX-s.x),i=Math.abs(n.clientY-s.y);return a>s3||i>s3},a3=n=>{const s=kn(),a=Zt(!1),i=o3(T=>{n.triggerEvent(S0(),T),a.set(!0)},uw),d=T=>(dw(T).each(_=>{i.cancel();const N={x:_.clientX,y:_.clientY,target:T.target};i.schedule(T),a.set(!1),s.set(N)}),A.none()),g=T=>(i.cancel(),dw(T).each(_=>{s.on(N=>{r3(_,N)&&s.clear()})}),A.none()),h=T=>{i.cancel();const _=N=>L(N.target,T.target);return s.get().filter(_).map(N=>a.get()?(T.prevent(),!1):n.triggerEvent(Vh(),T))},C=Lh([{key:vi(),value:d},{key:mr(),value:g},{key:bf(),value:h}]);return{fireIfReady:(T,_)=>en(C,_).bind(N=>N(T))}};var _g;(function(n){n.OnFocusMode="onFocus",n.OnEnterOrSpaceMode="onEnterOrSpace",n.OnApiMode="onApi"})(_g||(_g={}));const Ci="placeholder",Zr=Ia.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),yf=n=>ho(n,"uiType"),nu=(n,s,a,i)=>n.exists(d=>d!==a.owner)?Zr.single(!0,se(a)):en(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+wo(i)+`]
Namespace: `+n.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),kd=(n,s,a,i)=>yf(a)&&a.uiType===Ci?nu(n,s,a,i):Zr.single(!1,se(a)),Zh=(n,s,a,i)=>kd(n,s,a,i).fold((g,h)=>{const C=yf(a)?h(s,a.config,a.validated):h(s),x=en(C,"components").getOr([]),T=Ae(x,_=>Zh(n,s,_,i));return[{...C,components:T}]},(g,h)=>{if(yf(a)){const C=h(s,a.config,a.validated);return a.validated.preprocess.getOr(nn)(C)}else return h(s)}),Gh=(n,s,a,i)=>Ae(a,d=>Zh(n,s,d,i)),R0=(n,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+n);return a=!0,s},g=()=>s.fold((h,C)=>h,(h,C)=>h);return{name:se(n),required:g,used:i,replace:d}},c3=(n,s,a,i)=>{const d=Ls(i,(h,C)=>R0(C,h)),g=Gh(n,s,a,d);return gs(d,h=>{if(h.used()===!1&&h.required())throw new Error("Placeholder: "+h.name()+` was not found in components list
Namespace: `+n.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},N0=Zr.single,N2=Zr.multiple,M2=se(Ci),O1=Ia.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),bm=De("factory",{sketch:nn}),M0=De("schema",[]),D1=ot("name"),P0=ra("pname","pname",g1(n=>"<alloy."+Mt(n.name)+">"),Cl()),mw=Tc("schema",()=>[zo("preprocess")]),Ad=De("defaults",se({})),B0=De("overrides",se({})),fw=bn([bm,M0,D1,P0,Ad,B0]),i3=bn([bm,M0,D1,Ad,B0]),l3=bn([bm,M0,D1,P0,Ad,B0]),gw=bn([bm,mw,D1,ot("unit"),P0,Ad,B0]),P2=n=>n.fold(A.some,A.none,A.some,A.some),_d=n=>{const s=a=>a.name;return n.fold(s,s,s,s)},hw=n=>n.fold(nn,nn,nn,nn),ou=(n,s)=>a=>{const i=wc("Converting part type",s,a);return n(i)},ac=ou(O1.required,fw),Tl=ou(O1.external,i3),_c=ou(O1.optional,l3),$0=ou(O1.group,gw),Og=se("entirety");var I0=Object.freeze({__proto__:null,required:ac,external:Tl,optional:_c,group:$0,asNamedPart:P2,name:_d,asCommon:hw,original:Og});const B2=(n,s,a,i)=>jo(s.defaults(n,a,i),a,{uid:n.partUids[s.name]},s.overrides(n,a,i)),u3=(n,s,a)=>{const i={},d={};return Te(a,g=>{g.fold(h=>{i[h.pname]=N0(!0,(C,x,T)=>h.factory.sketch(B2(C,h,x,T)))},h=>{const C=s.parts[h.name];d[h.name]=se(h.factory.sketch(B2(s,h,C[Og()]),C))},h=>{i[h.pname]=N0(!1,(C,x,T)=>h.factory.sketch(B2(C,h,x,T)))},h=>{i[h.pname]=N2(!0,(C,x,T)=>{const _=C[h.name];return pe(_,N=>h.factory.sketch(jo(h.defaults(C,N,T),N,h.overrides(C,N))))})})}),{internals:se(i),externals:se(d)}},Cf=(n,s)=>{const a={};return Te(s,i=>{P2(i).each(d=>{const g=xf(n,d.pname);a[d.name]=h=>{const C=wc("Part: "+d.name+" in "+n,bn(d.schema),h);return{...g,config:h,validated:C}}})}),a},xf=(n,s)=>({uiType:M2(),owner:n,name:s}),$2=(n,s,a)=>({uiType:M2(),owner:n,name:s,config:a,validated:{}}),Gr=n=>Ae(n,s=>s.fold(A.none,A.some,A.none,A.none).map(a=>Td(a.name,a.schema.concat([cw(Og())]))).toArray()),R1=n=>pe(n,_d),Xc=(n,s,a)=>u3(n,s,a),L0=(n,s,a)=>c3(A.some(n),s,s.components,a),ns=(n,s,a)=>{const i=s.partUids[a];return n.getSystem().getByUid(i).toOptional()},Fu=(n,s,a)=>ns(n,s,a).getOrDie("Could not find part: "+a),vm=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return Te(a,h=>{i[h]=se(g.getByUid(d[h]))}),i},Hu=(n,s)=>{const a=n.getSystem();return Ls(s.partUids,(i,d)=>se(a.getByUid(i)))},qi=n=>wo(n.partUids),F0=(n,s,a)=>{const i={},d=s.partUids,g=n.getSystem();return Te(a,h=>{i[h]=se(g.getByUid(d[h]).getOrDie())}),i},pw=(n,s)=>{const a=R1(s);return Lh(pe(a,i=>({key:i,value:n+"-"+i})))},ym=n=>ra("partUids","partUids",mm(s=>pw(s.uid,n)),Cl());var Dg=Object.freeze({__proto__:null,generate:Cf,generateOne:$2,schemas:Gr,names:R1,substitutes:Xc,components:L0,defaultUids:pw,defaultUidsSchema:ym,getAllParts:Hu,getAllPartNames:qi,getPart:ns,getPartOrDie:Fu,getParts:vm,getPartsOrDie:F0});const I2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],xi=(n,s,a,i=1)=>{const d=n*i,g=s*i,h=x=>en(a,x).getOr([]),C=(x,T,_)=>{const N=Xe(I2,_);return{offset:$o(x,T),classesOn:Ae(_,h),classesOff:Ae(N,h)}};return{southeast:()=>C(-n,s,["top","alignLeft"]),southwest:()=>C(n,s,["top","alignRight"]),south:()=>C(-n/2,s,["top","alignCentre"]),northeast:()=>C(-n,-s,["bottom","alignLeft"]),northwest:()=>C(n,-s,["bottom","alignRight"]),north:()=>C(-n/2,-s,["bottom","alignCentre"]),east:()=>C(n,-s/2,["valignCentre","left"]),west:()=>C(-n,-s/2,["valignCentre","right"]),insetNortheast:()=>C(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>C(-d,g,["top","alignRight","inset"]),insetNorth:()=>C(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>C(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>C(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>C(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>C(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>C(d,-g/2,["valignCentre","left","inset"])}},Sf=()=>xi(0,0,{}),_a=(n,s,a,i,d,g,h,C=!1)=>({x:n,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${h}-${d}`,alwaysFit:C}),su=Ia.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),H0=(n,s,a,i,d,g,h,C,x)=>n.fold(s,a,i,d,g,h,C,x),Rg=(n,s,a,i)=>n.fold(s,s,i,i,s,i,a,a),wf=(n,s,a,i)=>n.fold(s,i,s,i,a,a,s,i),N1=su.southeast,L2=su.southwest,z0=su.northeast,Ng=su.northwest,Ef=su.south,F2=su.north,M1=su.east,H2=su.west,bw=(n,s)=>{switch(s){case 1:return n.x;case 0:return n.x+n.width;case 2:return n.y;case 3:return n.y+n.height}},qr=(n,s)=>ao(["left","right","top","bottom"],a=>en(s,a).map(i=>bw(n,i))),Tf=(n,s,a)=>{const i=(x,T)=>s[x].map(_=>{const N=x==="top"||x==="bottom",H=N?a.top:a.left,Z=(x==="left"||x==="top"?Math.max:Math.min)(_,T)+H;return N?rr(Z,n.y,n.bottom):rr(Z,n.x,n.right)}).getOr(T),d=i("left",n.x),g=i("top",n.y),h=i("right",n.right),C=i("bottom",n.bottom);return Br(d,g,h-d,C-g)},kf="layout",vw=n=>n.x,V0=(n,s)=>n.x+n.width/2-s.width/2,z2=(n,s)=>n.x+n.width-s.width,P1=(n,s)=>n.y-s.height,U0=n=>n.y+n.height,yw=(n,s)=>n.y+n.height/2-s.height/2,d3=n=>n.x+n.width,B1=(n,s)=>n.x-s.width,Ir=(n,s,a)=>_a(vw(n),U0(n),a.southeast(),N1(),"southeast",qr(n,{left:1,top:3}),kf),_r=(n,s,a)=>_a(z2(n,s),U0(n),a.southwest(),L2(),"southwest",qr(n,{right:0,top:3}),kf),Oa=(n,s,a)=>_a(vw(n),P1(n,s),a.northeast(),z0(),"northeast",qr(n,{left:1,bottom:2}),kf),ga=(n,s,a)=>_a(z2(n,s),P1(n,s),a.northwest(),Ng(),"northwest",qr(n,{right:0,bottom:2}),kf),Ps=(n,s,a)=>_a(V0(n,s),P1(n,s),a.north(),F2(),"north",qr(n,{bottom:2}),kf),Or=(n,s,a)=>_a(V0(n,s),U0(n),a.south(),Ef(),"south",qr(n,{top:3}),kf),qh=(n,s,a)=>_a(d3(n),yw(n,s),a.east(),M1(),"east",qr(n,{left:0}),kf),V2=(n,s,a)=>_a(B1(n,s),yw(n,s),a.west(),H2(),"west",qr(n,{right:1}),kf),U2=()=>[Ir,_r,Oa,ga,Or,Ps,qh,V2],Cw=()=>[_r,Ir,ga,Oa,Or,Ps,qh,V2],j0=()=>[Oa,ga,Ir,_r,Ps,Or],j2=()=>[ga,Oa,_r,Ir,Ps,Or],W2=()=>[Ir,_r,Oa,ga,Or,Ps],W0=()=>[_r,Ir,ga,Oa,Or,Ps],Z2="data-alloy-placement",Kh=(n,s)=>{Cn(n,Z2,s)},xw=n=>na(n,Z2),$1=n=>ps(n,Z2),zu="layout-inset",Z0=n=>n.x,I1=(n,s)=>n.x+n.width/2-s.width/2,Yh=(n,s)=>n.x+n.width-s.width,Mg=n=>n.y,L1=(n,s)=>n.y+n.height-s.height,G0=(n,s)=>n.y+n.height/2-s.height/2,F1=(n,s,a)=>_a(Yh(n,s),L1(n,s),a.insetSouthwest(),Ng(),"southwest",qr(n,{right:0,bottom:3}),zu),q0=(n,s,a)=>_a(Z0(n),L1(n,s),a.insetSoutheast(),z0(),"southeast",qr(n,{left:1,bottom:3}),zu),Pg=(n,s,a)=>_a(Yh(n,s),Mg(n),a.insetNorthwest(),L2(),"northwest",qr(n,{right:0,top:2}),zu),Oc=(n,s,a)=>_a(Z0(n),Mg(n),a.insetNortheast(),N1(),"northeast",qr(n,{left:1,top:2}),zu),Ua=(n,s,a)=>_a(I1(n,s),Mg(n),a.insetNorth(),Ef(),"north",qr(n,{top:2}),zu),Xh=(n,s,a)=>_a(I1(n,s),L1(n,s),a.insetSouth(),F2(),"south",qr(n,{bottom:3}),zu),Le=(n,s,a)=>_a(Yh(n,s),G0(n,s),a.insetEast(),H2(),"east",qr(n,{right:0}),zu),H1=(n,s,a)=>_a(Z0(n),G0(n,s),a.insetWest(),M1(),"west",qr(n,{left:1}),zu),m3=n=>{switch(n){case"north":return Ua;case"northeast":return Oc;case"northwest":return Pg;case"south":return Xh;case"southeast":return q0;case"southwest":return F1;case"east":return Le;case"west":return H1}},Dc=(n,s,a,i,d)=>xw(i).map(m3).getOr(Ua)(n,s,a,i,d),Qh=n=>{switch(n){case"north":return Xh;case"northeast":return q0;case"northwest":return F1;case"south":return Ua;case"southeast":return Oc;case"southwest":return Pg;case"east":return H1;case"west":return Le}},Vu=(n,s,a,i,d)=>xw(i).map(Qh).getOr(Ua)(n,s,a,i,d),G2=(n,s)=>{ql(n,Math.floor(s))},q2=se((n,s)=>{G2(n,s),Ts(n,{"overflow-x":"hidden","overflow-y":"auto"})}),Bg=se((n,s)=>{G2(n,s)}),z1=se((n,s)=>{t2(n,Math.floor(s))});var Cm;(function(n){n.TopToBottom="toptobottom",n.BottomToTop="bottomtotop"})(Cm||(Cm={}));const K0="data-alloy-vertical-dir",f3=n=>wh(n,s=>pc(s)&&Pr(s,"data-alloy-vertical-dir")===Cm.BottomToTop);var ja;(function(n){n[n.HighlightMenuAndItem=0]="HighlightMenuAndItem",n[n.HighlightJustMenu=1]="HighlightJustMenu",n[n.HighlightNone=2]="HighlightNone"})(ja||(ja={}));const Uu={init:()=>Si({readState:se("No State required")})},Si=n=>n,g3={can:_t,abort:dn,run:V},Jh=n=>{if(!qn(n,"can")&&!qn(n,"abort")&&!qn(n,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(n,null,2)+" does not have can, abort, or run!");return{...g3,...n}},Sw=(n,s)=>(...a)=>Tt(n,(i,d)=>i&&s(d).apply(void 0,a),!0),Y0=(n,s)=>(...a)=>Tt(n,(i,d)=>i||s(d).apply(void 0,a),!1),h3=n=>qe(n)?{can:_t,abort:dn,run:n}:n,ww=n=>{const s=Sw(n,d=>d.can),a=Y0(n,d=>d.abort);return{can:s,abort:a,run:(...d)=>{Te(n,g=>{g.run.apply(void 0,d)})}}},Yn=(n,s)=>{Q0(n,n.element,s,{})},pn=(n,s,a)=>{Q0(n,n.element,s,a)},ep=n=>{Yn(n,Aa())},X0=(n,s,a)=>{Q0(n,s,a,{})},Q0=(n,s,a,i)=>{const d={target:s,...i};n.getSystem().triggerEvent(a,s,d)},p3=(n,s,a,i)=>{const d={...i,target:s};n.getSystem().triggerEvent(a,s,d)},K2=(n,s,a,i)=>{n.getSystem().triggerEvent(a,s,i.event)},_s=n=>Lh(n),J0=(n,s)=>({key:n,value:Jh({abort:s})}),ev=(n,s)=>({key:n,value:Jh({can:s})}),Y2=n=>({key:n,value:Jh({run:(s,a)=>{a.event.prevent()}})}),je=(n,s)=>({key:n,value:Jh({run:s})}),tp=(n,s,a)=>({key:n,value:Jh({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),$g=n=>s=>je(n,s),Od=n=>s=>({key:n,value:Jh({run:(a,i)=>{i2(a,i)&&s(a,i)}})}),ru=(n,s)=>je(n,(a,i)=>{a.getSystem().getByUid(s).each(d=>{K2(d,d.element,n,i)})}),Dd=(n,s,a)=>{const i=s.partUids[a];return ru(n,i)},np=(n,s)=>je(n,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>Ui(d.target,C=>a.getSystem().getByDom(C).toOptional(),dn).getOr(a));s(a,g,i)}),Ig=n=>je(n,(s,a)=>{a.cut()}),b3=n=>je(n,(s,a)=>{a.stop()}),op=(n,s)=>Od(n)(s),vs=Od(Iu()),au=Od(El()),X2=Od(E1()),Af=$g(Aa()),ju=n=>({classes:Ut(n.classes)?[]:n.classes,attributes:Ut(n.attributes)?{}:n.attributes,styles:Ut(n.styles)?{}:n.styles}),Wa=(n,s)=>({...n,attributes:{...n.attributes,...s.attributes},styles:{...n.styles,...s.styles},classes:n.classes.concat(s.classes)}),Ew=(n,s,a)=>Af(i=>{a(i,n,s)}),Q2=(n,s,a)=>X2((i,d)=>{a(i,n,s)}),Tw=(n,s,a,i,d,g)=>{const h=pi(n),C=Kc(s,[Qk("config",n)]);return kw(h,C,s,a,i,d,g)},v3=(n,s,a,i,d,g)=>{const h=n,C=Kc(s,[Bu("config",n)]);return kw(h,C,s,a,i,d,g)},y3=(n,s,a)=>n3((d,...g)=>{const h=[d].concat(g);return d.config({name:se(n)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+n+". Using API: "+a)},C=>{const x=Array.prototype.slice.call(h,1);return s.apply(void 0,[d,C.config,C.state].concat(x))})},a,s),J2=n=>({key:n,value:void 0}),kw=(n,s,a,i,d,g,h)=>{const C=N=>qn(N,a)?N[a]():A.none(),x=Ls(d,(N,H)=>y3(a,N,H)),_={...Ls(g,(N,H)=>_1(N,H)),...x,revoke:Yt(J2,a),config:N=>{const H=wc(a+"-config",n,N);return{key:a,value:{config:H,me:_,configAsRaw:Fc(()=>wc(a+"-config",n,N)),initialConfig:N,state:h}}},schema:se(s),exhibit:(N,H)=>Ha(C(N),en(i,"exhibit"),(j,Z)=>Z(H,j.config,j.state)).getOrThunk(()=>ju({})),name:se(a),handlers:N=>C(N).map(H=>en(i,"events").getOr(()=>({}))(H.config,H.state)).getOr({})};return _},mt=n=>Lh(n),eC=pi([ot("fields"),ot("name"),De("active",{}),De("apis",{}),De("state",Uu),De("extra",{})]),ha=n=>{const s=wc("Creating behaviour: "+n.name,eC,n);return Tw(s.fields,s.name,s.active,s.apis,s.extra,s.state)},tC=pi([ot("branchKey"),ot("branches"),ot("name"),De("active",{}),De("apis",{}),De("state",Uu),De("extra",{})]),nC=n=>{const s=wc("Creating behaviour: "+n.name,tC,n);return v3(Ec(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},oC=se(void 0),C3=(n,s)=>{const a=_s(s);return ha({fields:[ot("enabled")],name:n,active:{events:se(a)}})},On=(n,s)=>{const a=C3(n,s);return{key:n,value:{config:{},me:a,configAsRaw:se({}),initialConfig:{},state:Uu}}},Aw=n=>({init:()=>{const a=Zt(n);return{get:()=>a.get(),set:C=>a.set(C),clear:()=>a.set(n),readState:()=>a.get()}}}),_w=(n,s)=>{s.ignore||(Hr(n.element),s.onFocus(n))};var Ow=Object.freeze({__proto__:null,focus:_w,blur:(n,s)=>{s.ignore||Ns(n.element)},isFocused:n=>Fi(n.element)}),Dw=Object.freeze({__proto__:null,exhibit:(n,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return ju(a)},events:n=>_s([je(gm(),(s,a)=>{_w(s,n),a.stop()})].concat(n.stopMousedown?[je(Yc(),(s,a)=>{a.event.prevent()})]:[]))}),w3=[xo("onFocus"),De("stopMousedown",!1),De("ignore",!1)];const Nn=ha({fields:w3,name:"focusing",active:Dw,apis:Ow}),sC=[8],xm=[9],kl=[13],tv=[27],Rc=[32],sp=[37],V1=[38],nv=[39],rp=[40],ap=se("tooltipping.close.all"),Rd=se("dismiss.popups"),Dr=se("reposition.popups"),Sm=se("mouse.released"),Rw=(n,s,a)=>{const i=gt(n.slice(0,s)),d=gt(n.slice(s+1));return Wt(i.concat(d),a)},rC=(n,s,a)=>{const i=gt(n.slice(0,s));return Wt(i,a)},Nw=(n,s,a)=>{const i=n.slice(0,s),d=n.slice(s+1);return Wt(d.concat(i),a)},E3=(n,s,a)=>{const i=n.slice(s+1);return Wt(i,a)},fo=n=>s=>{const a=s.raw;return tt(n,a.which)},cu=n=>s=>nt(n,a=>a(s)),_f=n=>n.raw.shiftKey===!0,m5=n=>n.raw.ctrlKey===!0,cp=X(_f),bo=(n,s)=>({matches:n,classification:s}),T3=(n,s)=>Wt(n,i=>i.matches(s)).map(i=>i.classification),k3=(n,s,a,i)=>{const d=Ur(n.element,"."+s.highlightClass);Te(d,g=>{St(i,C=>L(C.element,g))||(Ms(g,s.highlightClass),n.getSystem().getByDom(g).each(C=>{s.onDehighlight(n,C),Yn(C,_0())}))})},f5=(n,s,a)=>k3(n,s,a,[]),g5=(n,s,a,i)=>{W1(n,s,a,i)&&(Ms(i.element,s.highlightClass),s.onDehighlight(n,i),Yn(i,_0()))},U1=(n,s,a,i)=>{k3(n,s,a,[i]),W1(n,s,a,i)||(Go(i.element,s.highlightClass),s.onHighlight(n,i),Yn(i,A0()))},A3=(n,s,a)=>{ov(n,s).each(i=>{U1(n,s,a,i)})},_3=(n,s,a)=>{aC(n,s).each(i=>{U1(n,s,a,i)})},j1=(n,s,a,i)=>{D3(n,s,a,i).fold(d=>{throw d},d=>{U1(n,s,a,d)})},O3=(n,s,a,i)=>{const d=Bw(n,s);Wt(d,i).each(h=>{U1(n,s,a,h)})},W1=(n,s,a,i)=>lr(i.element,s.highlightClass),Mw=(n,s,a)=>Io(n.element,"."+s.highlightClass).bind(i=>n.getSystem().getByDom(i).toOptional()),D3=(n,s,a,i)=>{const d=Ur(n.element,"."+s.itemClass);return A.from(d[i]).fold(()=>rn.error(new Error("No element found with index "+i)),n.getSystem().getByDom)},ov=(n,s,a)=>Io(n.element,"."+s.itemClass).bind(i=>n.getSystem().getByDom(i).toOptional()),aC=(n,s,a)=>{const i=Ur(n.element,"."+s.itemClass);return(i.length>0?A.some(i[i.length-1]):A.none()).bind(g=>n.getSystem().getByDom(g).toOptional())},cC=(n,s,a,i)=>{const d=Ur(n.element,"."+s.itemClass);return io(d,h=>lr(h,s.highlightClass)).bind(h=>{const C=$c(h,i,0,d.length-1);return n.getSystem().getByDom(d[C]).toOptional()})},Pw=(n,s,a)=>cC(n,s,a,-1),R3=(n,s,a)=>cC(n,s,a,1),Bw=(n,s,a)=>{const i=Ur(n.element,"."+s.itemClass);return Ri(pe(i,d=>n.getSystem().getByDom(d).toOptional()))};var iC=Object.freeze({__proto__:null,dehighlightAll:f5,dehighlight:g5,highlight:U1,highlightFirst:A3,highlightLast:_3,highlightAt:j1,highlightBy:O3,isHighlighted:W1,getHighlighted:Mw,getFirst:ov,getLast:aC,getPrevious:Pw,getNext:R3,getCandidates:Bw}),$w=[ot("highlightClass"),ot("itemClass"),xo("onHighlight"),xo("onDehighlight")];const Eo=ha({fields:$w,name:"highlighting",apis:iC}),Iw=(n,s,a)=>{s.exists(d=>a.exists(g=>L(g,d)))||pn(n,T0(),{prevFocus:s,newFocus:a})},lC=()=>{const n=a=>ar(a.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().triggerFocus(i,a.element);const g=n(a);Iw(a,d,g)}}},sv=()=>{const n=a=>Eo.getHighlighted(a).map(i=>i.element);return{get:n,set:(a,i)=>{const d=n(a);a.getSystem().getByDom(i).fold(V,h=>{Eo.highlight(a,h)});const g=n(a);Iw(a,d,g)}}},wm=(n,s,a,i,d)=>{const g=()=>n.concat([De("focusManager",lC()),Zi("focusInside","onFocus",Ed(T=>tt(["onFocus","onEnterOrSpace","onApi"],T)?rn.value(T):rn.error("Invalid value for focusInside"))),Po("handler",x),Po("state",s),Po("sendFocusIn",d)]),h=(T,_,N,H,j)=>{const Z=N(T,_,H,j);return T3(Z,_.event).bind(oe=>oe(T,_,H,j))},x={schema:g,processKey:h,toEvents:(T,_)=>{const N=T.focusInside!==_g.OnFocusMode?A.none():d(T).map(Z=>je(gm(),(oe,le)=>{Z(oe,T,_),le.stop()})),H=(Z,oe)=>{const le=fo(Rc.concat(kl))(oe.event);T.focusInside===_g.OnEnterOrSpaceMode&&le&&i2(Z,oe)&&d(T).each(Q=>{Q(Z,T,_),oe.stop()})},j=[je(aa(),(Z,oe)=>{h(Z,oe,a,T,_).fold(()=>{H(Z,oe)},le=>{oe.stop()})}),je(Hh(),(Z,oe)=>{h(Z,oe,i,T,_).each(le=>{oe.stop()})})];return _s(N.toArray().concat(j))}};return x},uC=n=>{const s=[zo("onEscape"),zo("onEnter"),De("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),De("firstTabstop",0),De("useTabstopAt",_t),zo("visibilitySelector")].concat([n]),a=(Q,me)=>{const ve=Q.visibilitySelector.bind(Re=>Ta(me,Re)).getOr(me);return yr(ve)>0},i=(Q,me)=>{const ve=Ur(Q.element,me.selector),Re=sn(ve,Ie=>a(me,Ie));return A.from(Re[me.firstTabstop])},d=(Q,me)=>me.focusManager.get(Q).bind(ve=>Ta(ve,me.selector)),g=(Q,me)=>a(Q,me)&&Q.useTabstopAt(me),h=(Q,me,ve)=>{i(Q,me).each(Re=>{me.focusManager.set(Q,Re)})},C=(Q,me,ve,Re,Ie)=>Ie(me,ve,Et=>g(Re,Et)).fold(()=>Re.cyclic?A.some(!0):A.none(),Et=>(Re.focusManager.set(Q,Et),A.some(!0))),x=(Q,me,ve,Re)=>{const Ie=sn(Ur(Q.element,ve.selector),Et=>a(ve,Et));return d(Q,ve).bind(Et=>io(Ie,Yt(L,Et)).bind(ct=>C(Q,Ie,ct,ve,Re)))},T=(Q,me,ve)=>{const Re=ve.cyclic?Rw:rC;return x(Q,me,ve,Re)},_=(Q,me,ve)=>{const Re=ve.cyclic?Nw:E3;return x(Q,me,ve,Re)},N=Q=>Xp(Q).bind(no).exists(me=>L(me,Q)),H=(Q,me,ve)=>d(Q,ve).filter(Re=>!ve.useTabstopAt(Re)).bind(Re=>(N(Re)?T:_)(Q,me,ve)),j=(Q,me,ve)=>ve.onEnter.bind(Re=>Re(Q,me)),Z=(Q,me,ve)=>(Q.getSystem().broadcastOn([ap()],{closedTooltip:()=>{me.stop()}}),me.isStopped()?A.none():ve.onEscape.bind(Re=>Re(Q,me))),oe=se([bo(cu([_f,fo(xm)]),T),bo(fo(xm),_),bo(cu([cp,fo(kl)]),j)]),le=se([bo(fo(tv),Z),bo(fo(xm),H)]);return wm(s,Uu.init,oe,le,()=>A.some(h))};var N3=uC(Tc("cyclic",dn)),Lw=uC(Tc("cyclic",_t));const ip=n=>Sa("input")(n)&&Pr(n,"type")!=="radio"||Sa("textarea")(n),Fw=(n,s,a)=>(X0(n,a,Aa()),A.some(!0)),Z1=(n,s,a)=>ip(a)&&fo(Rc)(s.event)?A.none():Fw(n,s,a),G1=(n,s)=>A.some(!0),dC=[De("execute",Z1),De("useSpace",!1),De("useEnter",!0),De("useControlEnter",!1),De("useDown",!1)],Of=(n,s,a)=>a.execute(n,s,n.element),Hw=(n,s,a,i)=>{const d=a.useSpace&&!ip(n.element)?Rc:[],g=a.useEnter?kl:[],h=a.useDown?rp:[],C=d.concat(g).concat(h);return[bo(fo(C),Of)].concat(a.useControlEnter?[bo(cu([m5,fo(kl)]),Of)]:[])},zw=(n,s,a,i)=>a.useSpace&&!ip(n.element)?[bo(fo(Rc),G1)]:[];var Vw=wm(dC,Uu.init,Hw,zw,()=>A.none());const Uw=()=>{const n=kn();return Si({readState:()=>n.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{n.set({numRows:d,numColumns:g})},getNumRows:()=>n.get().map(d=>d.numRows),getNumColumns:()=>n.get().map(d=>d.numColumns)})};var jw=Object.freeze({__proto__:null,flatgrid:Uw,init:n=>n.state(n)});const rv=n=>(s,a,i,d)=>{const g=n(s.element);return iv(g,s,a,i,d)},av=(n,s)=>{const a=r1(n,s);return rv(a)},q1=(n,s)=>{const a=r1(s,n);return rv(a)},cv=n=>(s,a,i,d)=>iv(n,s,a,i,d),iv=(n,s,a,i,d)=>i.focusManager.get(s).bind(h=>n(s.element,h,i,d)).map(h=>(i.focusManager.set(s,h),!0)),zt=cv,Df=cv,Nd=cv,K1=(n,s)=>io(n,s).map(a=>({index:a,candidates:n})),Ww=(n,s,a)=>{const i=h=>L(h,s),d=Ur(n,a),g=sn(d,Du);return K1(g,i)},mC=(n,s)=>io(n,a=>L(s,a)),fC=(n,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(h=>{const C=h.row*a+h.column;return C>=0&&C<n.length?A.some(n[C]):A.none()})},Zw=(n,s,a,i,d)=>fC(n,s,i,(g,h)=>{const x=g===a-1?n.length-g*i:i,T=$c(h,d,0,x-1);return A.some({row:g,column:T})}),Gw=(n,s,a,i,d)=>fC(n,s,i,(g,h)=>{const C=$c(g,d,0,a-1),T=C===a-1?n.length-C*i:i,_=rr(h,0,T-1);return A.some({row:C,column:_})}),qw=(n,s,a,i)=>Zw(n,s,a,i,1),lv=(n,s,a,i)=>Zw(n,s,a,i,-1),Rr=(n,s,a,i)=>Gw(n,s,a,i,-1),iu=(n,s,a,i)=>Gw(n,s,a,i,1),uv=[ot("selector"),De("execute",Z1),yi("onEscape"),De("captureTab",!1),iw()],Kw=(n,s,a)=>{Io(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},Yw=(n,s)=>s.focusManager.get(n).bind(a=>Ta(a,s.selector)),Xw=(n,s,a,i)=>Yw(n,a).bind(d=>a.execute(n,s,d)),dv=n=>(s,a,i,d)=>Ww(s,a,i.selector).bind(g=>n(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),gC=(n,s,a)=>a.captureTab?A.some(!0):A.none(),Qw=(n,s,a)=>a.onEscape(n,s),Jw=dv(lv),Y1=dv(qw),hC=dv(Rr),mv=dv(iu),pC=se([bo(fo(sp),av(Jw,Y1)),bo(fo(nv),q1(Jw,Y1)),bo(fo(V1),zt(hC)),bo(fo(rp),Df(mv)),bo(cu([_f,fo(xm)]),gC),bo(cu([cp,fo(xm)]),gC),bo(fo(Rc.concat(kl)),Xw)]),M3=se([bo(fo(tv),Qw),bo(fo(Rc),G1)]);var eE=wm(uv,Uw,pC,M3,()=>A.some(Kw));const tE=(n,s,a,i,d)=>{const g=C=>$i(C)==="button"&&Pr(C,"disabled")==="disabled",h=(C,x,T)=>d(C,x,i,0,T.length-1,T[x],_=>g(T[_])?h(C,_,T):A.from(T[_]));return Ww(n,a,s).bind(C=>{const x=C.index,T=C.candidates;return h(x,x,T)})},fv=(n,s,a,i)=>tE(n,s,a,i,(d,g,h,C,x,T,_)=>{const N=rr(g+h,C,x);return N===d?A.from(T):_(N)}),Lg=(n,s,a,i)=>tE(n,s,a,i,(d,g,h,C,x,T,_)=>{const N=$c(g,h,C,x);return N===d?A.none():_(N)}),nE=[ot("selector"),De("getInitial",A.none),De("execute",Z1),yi("onEscape"),De("executeOnMove",!1),De("allowVertical",!0),De("allowHorizontal",!0),De("cycles",!0)],oE=(n,s)=>s.focusManager.get(n).bind(a=>Ta(a,s.selector)),gv=(n,s,a)=>oE(n,a).bind(i=>a.execute(n,s,i)),P3=(n,s,a)=>{s.getInitial(n).orThunk(()=>Io(n.element,s.selector)).each(i=>{s.focusManager.set(n,i)})},B3=(n,s,a)=>(a.cycles?Lg:fv)(n,a.selector,s,-1),Fg=(n,s,a)=>(a.cycles?Lg:fv)(n,a.selector,s,1),bC=n=>(s,a,i,d)=>n(s,a,i,d).bind(()=>i.executeOnMove?gv(s,a,i):A.some(!0)),$3=(n,s,a)=>a.onEscape(n,s),I3=(n,s,a,i)=>{const d=[...a.allowHorizontal?sp:[]].concat(a.allowVertical?V1:[]),g=[...a.allowHorizontal?nv:[]].concat(a.allowVertical?rp:[]);return[bo(fo(d),bC(av(B3,Fg))),bo(fo(g),bC(q1(B3,Fg))),bo(fo(kl),gv),bo(fo(Rc),gv)]},sE=se([bo(fo(Rc),G1),bo(fo(tv),$3)]);var L3=wm(nE,Uu.init,I3,sE,()=>A.some(P3));const vC=(n,s,a)=>A.from(n[s]).bind(i=>A.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),hv=(n,s,a,i)=>{const g=n[s].length,h=$c(a,i,0,g-1);return vC(n,s,h)},yC=(n,s,a,i)=>{const d=$c(a,i,0,n.length-1),g=n[d].length,h=rr(s,0,g-1);return vC(n,d,h)},Md=(n,s,a,i)=>{const g=n[s].length,h=rr(a+i,0,g-1);return vC(n,s,h)},rE=(n,s,a,i)=>{const d=rr(a+i,0,n.length-1),g=n[d].length,h=rr(s,0,g-1);return vC(n,d,h)},pv=(n,s,a)=>hv(n,s,a,1),F3=(n,s,a)=>hv(n,s,a,-1),Rf=(n,s,a)=>yC(n,a,s,-1),H3=(n,s,a)=>yC(n,a,s,1),z3=(n,s,a)=>Md(n,s,a,-1),p5=(n,s,a)=>Md(n,s,a,1),b5=(n,s,a)=>rE(n,a,s,-1),lp=(n,s,a)=>rE(n,a,s,1),X1=[Td("selectors",[ot("row"),ot("cell")]),De("cycles",!0),De("previousSelector",A.none),De("execute",Z1)],CC=(n,s,a)=>{s.previousSelector(n).orThunk(()=>{const d=s.selectors;return Io(n.element,d.cell)}).each(d=>{s.focusManager.set(n,d)})},V3=(n,s,a)=>ar(n.element).bind(i=>a.execute(n,s,i)),U3=(n,s)=>pe(n,a=>Ur(a,s.selectors.cell)),bv=(n,s)=>(a,i,d)=>{const g=d.cycles?n:s;return Ta(i,d.selectors.row).bind(h=>{const C=Ur(h,d.selectors.cell);return mC(C,i).bind(x=>{const T=Ur(a,d.selectors.row);return mC(T,h).bind(_=>{const N=U3(T,d);return g(N,_,x).map(H=>H.cell)})})})},aE=bv(F3,z3),cE=bv(pv,p5),Q1=bv(Rf,b5),vv=bv(H3,lp),xC=se([bo(fo(sp),av(aE,cE)),bo(fo(nv),q1(aE,cE)),bo(fo(V1),zt(Q1)),bo(fo(rp),Df(vv)),bo(fo(Rc.concat(kl)),V3)]),J1=se([bo(fo(Rc),G1)]);var SC=wm(X1,Uu.init,xC,J1,()=>A.some(CC));const j3=[ot("selector"),De("execute",Z1),De("moveOnTab",!1)],eb=(n,s,a)=>a.focusManager.get(n).bind(i=>a.execute(n,s,i)),iE=(n,s,a)=>{Io(n.element,s.selector).each(i=>{s.focusManager.set(n,i)})},yv=(n,s,a)=>Lg(n,a.selector,s,-1),Cv=(n,s,a)=>Lg(n,a.selector,s,1),Hg=(n,s,a,i)=>a.moveOnTab?Nd(yv)(n,s,a,i):A.none(),W3=(n,s,a,i)=>a.moveOnTab?Nd(Cv)(n,s,a,i):A.none(),Pd=se([bo(fo(V1),Nd(yv)),bo(fo(rp),Nd(Cv)),bo(cu([_f,fo(xm)]),Hg),bo(cu([cp,fo(xm)]),W3),bo(fo(kl),eb),bo(fo(Rc),eb)]),Z3=se([bo(fo(Rc),G1)]);var lE=wm(j3,Uu.init,Pd,Z3,()=>A.some(iE));const G3=[yi("onSpace"),yi("onEnter"),yi("onShiftEnter"),yi("onLeft"),yi("onRight"),yi("onTab"),yi("onShiftTab"),yi("onUp"),yi("onDown"),yi("onEscape"),De("stopSpaceKeyup",!1),zo("focusIn")],v5=(n,s,a)=>[bo(fo(Rc),a.onSpace),bo(cu([cp,fo(kl)]),a.onEnter),bo(cu([_f,fo(kl)]),a.onShiftEnter),bo(cu([_f,fo(xm)]),a.onShiftTab),bo(cu([cp,fo(xm)]),a.onTab),bo(fo(V1),a.onUp),bo(fo(rp),a.onDown),bo(fo(sp),a.onLeft),bo(fo(nv),a.onRight),bo(fo(Rc),a.onSpace)],xv=(n,s,a)=>[...a.stopSpaceKeyup?[bo(fo(Rc),G1)]:[],bo(fo(tv),a.onEscape)];var q3=wm(G3,Uu.init,v5,xv,n=>n.focusIn);const K3=N3.schema(),Y3=Lw.schema(),wC=L3.schema(),X3=eE.schema(),uE=SC.schema(),EC=Vw.schema(),Q3=lE.schema(),J3=q3.schema();var TC=Object.freeze({__proto__:null,acyclic:K3,cyclic:Y3,flow:wC,flatgrid:X3,matrix:uE,execution:EC,menu:Q3,special:J3});const dE=n=>qn(n,"setGridSize"),mn=nC({branchKey:"mode",branches:TC,name:"keying",active:{events:(n,s)=>n.handler.toEvents(n,s)},apis:{focusIn:(n,s,a)=>{s.sendFocusIn(s).fold(()=>{n.getSystem().triggerFocus(n.element,n.element)},i=>{i(n,s,a)})},setGridSize:(n,s,a,i,d)=>{dE(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:jw}),tb=Mt("alloy-premade"),mE=n=>(Object.defineProperty(n.element.dom,tb,{value:n.uid,writable:!0}),pf(tb,n)),eA=n=>ho(n.dom,tb),kC=n=>en(n,tb),nb=n=>lw((s,...a)=>n(s.getApis(),s,...a),n),Sv=n=>n.getSystem().isConnected(),ob=n=>{Yn(n,El());const s=n.components();Te(s,ob)},up=n=>{const s=n.components();Te(s,up),Yn(n,Iu())},AC=(n,s)=>{n.getSystem().addToWorld(s),yo(n.element)&&up(s)},_C=n=>{ob(n),n.getSystem().removeFromWorld(n)},fE=(n,s)=>{Vr(n.element,s.element)},OC=n=>{Te(n.components(),s=>ui(s.element)),yh(n.element),n.syncComponents()},gE=(n,s,a)=>{const i=n.components();OC(n);const d=a(s),g=Xe(i,d);Te(g,h=>{ob(h),n.getSystem().removeFromWorld(h)}),Te(d,h=>{Sv(h)?fE(n,h):(n.getSystem().addToWorld(h),fE(n,h),yo(n.element)&&up(h))}),n.syncComponents()},dp=(n,s,a)=>{const i=n.components(),d=Ae(s,C=>kC(C).toArray());Te(i,C=>{tt(d,C)||_C(C)});const g=a(s),h=Xe(i,g);Te(h,C=>{Sv(C)&&_C(C)}),Te(g,C=>{Sv(C)||AC(n,C)}),n.syncComponents()},Em=(n,s)=>{mp(n,s,Vr)},mp=(n,s,a)=>{n.getSystem().addToWorld(s),a(n.element,s.element),yo(n.element)&&up(s),n.syncComponents()},Tm=n=>{ob(n),ui(n.element),n.getSystem().removeFromWorld(n)},km=n=>{const s=vc(n.element).bind(a=>n.getSystem().getByDom(a).toOptional());Tm(n),s.each(a=>{a.syncComponents()})},hE=n=>{const s=n.components();Te(s,Tm),yh(n.element),n.syncComponents()},sb=(n,s)=>{pE(n,s,Vr)},lu=(n,s)=>{pE(n,s,e1)},pE=(n,s,a)=>{a(n,s.element);const i=ul(s.element);Te(i,d=>{s.getByDom(d).each(up)})},bE=n=>{const s=ul(n.element);Te(s,a=>{n.getByDom(a).each(ob)}),ui(n.element)},DC=(n,s,a)=>pd(n,s).map(d=>{if(a.exists(h=>!L(h,d))){const h=a.map($i).getOr("span"),C=ht.fromTag(h);return bd(d,C),C}else return d}),RC=(n,s,a)=>{a.fold(()=>Vr(n,s),i=>{L(i,s)||(bd(i,s),ui(i))})},vE=(n,s,a)=>{const i=pe(s,a),d=ul(n);return Te(d.slice(i.length),ui),i},yE=(n,s,a,i)=>{const d=pd(n,s),g=i(a,d),h=DC(n,s,d);return RC(n,g.element,h),g},tA=(n,s,a)=>vE(n,s,(i,d)=>yE(n,d,i,a)),CE=(n,s)=>vE(n,s,(a,i)=>{const d=pd(n,i);return RC(n,a,d),a}),zg=(n,s)=>{const a=pr(s),i=zr(a).bind(g=>{const h=C=>L(g,C);return h(s)?A.some(s):c1(s,h)}),d=n(s);return i.each(g=>{zr(a).filter(h=>L(h,g)).fold(()=>{Hr(g)},V)}),d},NC=(n,s)=>{zg(()=>{gE(n,s,()=>pe(s,n.getSystem().build))},n.element)},xE=(n,s)=>{zg(()=>{dp(n,s,()=>tA(n.element,s,n.getSystem().buildOrPatch))},n.element)},MC=(n,s,a,i)=>{_C(s);const d=yE(n.element,a,i,n.getSystem().buildOrPatch);AC(n,d),n.syncComponents()},PC=(n,s,a)=>{const i=n.getSystem().build(a);mp(n,i,s)},BC=(n,s,a,i)=>{km(s),PC(n,(d,g)=>t1(d,g,a),i)},nA=(n,s,a,i)=>(s.reuseDom?xE:NC)(n,i),Vg=(n,s,a,i)=>{PC(n,Vr,i)},Ug=(n,s,a,i)=>{PC(n,vh,i)},wv=(n,s,a,i)=>{const d=Ev(n);Wt(d,h=>L(i.element,h.element)).each(km)},Ev=(n,s)=>n.components(),SE=(n,s,a,i,d)=>{const g=Ev(n);return A.from(g[i]).map(h=>(d.fold(()=>km(h),C=>{(s.reuseDom?MC:BC)(n,h,i,C)}),h))};var wE=Object.freeze({__proto__:null,append:Vg,prepend:Ug,remove:wv,replaceAt:SE,replaceBy:(n,s,a,i,d)=>{const g=Ev(n);return io(g,i).bind(h=>SE(n,s,a,h,d))},set:nA,contents:Ev});const Bn=ha({fields:[Wr("reuseDom",!0)],name:"replacing",apis:wE}),Tv=(n,s,a)=>L(s,n.element)&&!L(s,a),Ki=_s([ev(gm(),(n,s)=>{const a=s.event,i=a.originator,d=a.target;return Tv(n,i,d)?(console.warn(gm()+` did not get interpreted by the desired target. 
Originator: `+Lu(i)+`
Target: `+Lu(d)+`
Check the `+gm()+" event handlers"),!1):!0})]);var rb=Object.freeze({__proto__:null,events:Ki});const sA=se("alloy-id-"),kv=se("data-alloy-id"),rA=sA(),$C=kv(),IC=(n,s)=>{const a=Mt(rA+n);return ab(s,a),a},ab=(n,s)=>{Object.defineProperty(n.dom,$C,{value:s,writable:!0})},Wu=n=>{const s=pc(n)?n.dom[$C]:null;return A.from(s)},fp=n=>Mt(n),aA=nn,jg=n=>{const s=d=>`The component must be in a context to execute: ${d}`+(n?`
`+Lu(n().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:se("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:dn}},cb=jg(),Av=(n,s)=>{const a=pe(s,d=>Kc(d.name(),[ot("config"),De("state",Uu)])),i=zs("component.behaviours",bn(a),n.behaviours).fold(d=>{throw new Error(Bh(d)+`
Complete spec:
`+JSON.stringify(n,null,2))},nn);return{list:s,data:Ls(i,d=>{const g=d.map(h=>({config:h.config,state:h.state.init(h.config)}));return se(g)})}},Kr=n=>n.list,cA=n=>n.data,LC=(n,s)=>{const a={};return gs(n,(i,d)=>{gs(i,(g,h)=>{const C=en(a,h).getOr([]);a[h]=C.concat([s(d,g)])})}),a},Nf=(n,s,a,i)=>{const d={...s};Te(a,_=>{d[_.name()]=_.exhibit(n,i)});const g=LC(d,(_,N)=>({name:_,modification:N})),h=_=>Un(_,(N,H)=>({...H.modification,...N}),{}),C=Un(g.classes,(_,N)=>N.modification.concat(_),[]),x=h(g.attributes),T=h(g.styles);return ju({classes:C,attributes:x,styles:T})},Bd=(n,s,a,i)=>{try{const d=Ho(a,(g,h)=>{const C=g[s],x=h[s],T=i.indexOf(C),_=i.indexOf(x);if(T===-1)throw new Error("The ordering for "+n+" does not have an entry for "+C+`.
Order specified: `+JSON.stringify(i,null,2));if(_===-1)throw new Error("The ordering for "+n+" does not have an entry for "+x+`.
Order specified: `+JSON.stringify(i,null,2));return T<_?-1:_<T?1:0});return rn.value(d)}catch(d){return rn.error([d])}},FC=(n,s)=>({handler:n,purpose:s}),EE=(n,s)=>({cHandler:n,purpose:s}),iA=(n,s)=>EE(Yt.apply(void 0,[n.handler].concat(s)),n.purpose),_v=n=>n.cHandler,ib=(n,s)=>({name:n,handler:s}),Mf=(n,s)=>{const a={};return Te(n,i=>{a[i.name()]=i.handlers(s)}),a},Ov=(n,s,a)=>{const i={...a,...Mf(s,n)};return LC(i,ib)},Dv=(n,s,a,i)=>{const d=Ov(n,a,i);return Rv(d,s)},Pf=n=>{const s=h3(n);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},lb=(n,s)=>rn.error(["The event ("+n+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(pe(s,a=>a.name),null,2)]),HC=(n,s,a)=>{const i=s[a];return i?Bd("Event: "+a,"name",n,i).map(d=>{const g=pe(d,h=>h.handler);return ww(g)}):lb(a,n)},Rv=(n,s)=>{const a=is(n,(i,d)=>(i.length===1?rn.value(i[0].handler):HC(i,s,d)).map(h=>{const C=Pf(h),x=i.length>1?sn(s[d],T=>St(i,_=>_.name===T)).join(" > "):i[0].name;return pf(d,FC(C,x))}));return Jk(a,{})},Zu="alloy.base.behaviour",TE=bn([ra("dom","dom",xl(),bn([ot("tag"),De("styles",{}),De("classes",[]),De("attributes",{}),zo("value"),zo("innerHtml")])),ot("components"),ot("uid"),De("events",{}),De("apis",{}),ra("eventOrder","eventOrder",Nh({[Aa()]:["disabling",Zu,"toggling","typeaheadevents"],[gm()]:[Zu,"focusing","keying"],[E1()]:[Zu,"disabling","toggling","representing","tooltipping"],[$u()]:[Zu,"representing","streaming","invalidating"],[El()]:[Zu,"representing","item-events","toolbar-button-events","tooltipping"],[Yc()]:["focusing",Zu,"item-type-events"],[vi()]:["focusing",Zu,"item-type-events"],[Gi()]:["item-type-events","tooltipping"],[hm()]:["receiving","reflecting","tooltipping"]}),Cl()),zo("domModification")]),$d=n=>zs("custom.definition",TE,n),zC=n=>({...n.dom,uid:n.uid,domChildren:pe(n.components,s=>s.element)}),Nv=n=>n.domModification.fold(()=>ju({}),ju),gp=n=>n.events,ub=(n,s)=>{const a=wo(n),i=wo(s),d=Xe(i,a),g=Gs(n,(h,C)=>!ho(s,C)||h!==s[C]).t;return{toRemove:d,toSet:g}},Mv=(n,s)=>{const{class:a,style:i,...d}=vd(s),{toSet:g,toRemove:h}=ub(n.attributes,d),C=()=>{Te(h,ve=>ps(s,ve)),n1(s,g)},x=cr(s),{toSet:T,toRemove:_}=ub(n.styles,x),N=()=>{Te(_,ve=>Jn(s,ve)),Ts(s,T)},H=d1(s),j=Xe(H,n.classes),Z=Xe(n.classes,H),oe=()=>{Ql(s,Z),fa(s,j)},le=ve=>{Hi(s,ve)},Q=()=>{const ve=n.domChildren;CE(s,ve)},me=()=>{const ve=s,Re=n.value.getOrUndefined();Re!==xc(ve)&&bl(ve,Re??"")};return C(),oe(),N(),n.innerHtml.fold(Q,le),me(),s},lA=n=>{const s=ht.fromTag(n.tag);n1(s,n.attributes),Ql(s,n.classes),Ts(s,n.styles),n.innerHtml.each(i=>Hi(s,i));const a=n.domChildren;return s0(s,a),n.value.each(i=>{bl(s,i)}),s},kE=(n,s)=>{try{const a=Mv(n,s);return A.some(a)}catch{return A.none()}},Pv=n=>n.innerHtml.isSome()&&n.domChildren.length>0,uA=(n,s)=>{const a=d=>$i(d)===n.tag&&!Pv(n)&&!eA(d),i=s.filter(a).bind(d=>kE(n,d)).getOrThunk(()=>lA(n));return ab(i,n.uid),i},VC=n=>{const s=en(n,"behaviours").getOr({});return Ae(wo(s),a=>{const i=s[a];return Dt(i)?[i.me]:[]})},Gu=(n,s)=>Av(n,s),UC=n=>{const s=VC(n);return Gu(n,s)},dA=(n,s,a)=>{const i=zC(n),d=Nv(n),g={"alloy.base.modification":d},h=s.length>0?Nf(a,g,s,i):d;return Wa(i,h)},AE=(n,s,a)=>{const i={"alloy.base.behaviour":gp(n)};return Dv(a,n.eventOrder,s,i).getOrDie()},_E=(n,s)=>{const a=()=>ve,i=Zt(cb),d=wl($d(n)),g=UC(n),h=Kr(g),C=cA(g),x=dA(d,h,C),T=uA(x,s),_=AE(d,h,C),N=Zt(d.components),H=Re=>{i.set(Re)},j=()=>{i.set(jg(a))},Z=()=>{const Re=ul(T),Ie=Ae(Re,Et=>i.get().getByDom(Et).fold(()=>[],Qn));N.set(Ie)},oe=Re=>{const Ie=C;return(qe(Ie[Re.name()])?Ie[Re.name()]:()=>{throw new Error("Could not find "+Re.name()+" in "+JSON.stringify(n,null,2))})()},le=Re=>qe(C[Re.name()]),Q=()=>d.apis,me=Re=>C[Re]().map(Ie=>Ie.state.readState()).getOr("not enabled"),ve={uid:n.uid,getSystem:i.get,config:oe,hasConfigured:le,spec:n,readState:me,getApis:Q,connect:H,disconnect:j,element:T,syncComponents:Z,components:N.get,events:_};return ve},OE=(n,s)=>{const a=en(n,"components").getOr([]);return s.fold(()=>pe(a,p),i=>pe(a,(d,g)=>m(d,pd(i,g))))},mA=(n,s)=>{const{events:a,...i}=aA(n),d=OE(i,s),g={...i,events:{...rb,...a},components:d};return rn.value(_E(g,s))},Es=n=>{const s=ht.fromText(n);return Yi({element:s})},Yi=n=>{const s=wc("external.component",pi([ot("element"),zo("uid")]),n),a=Zt(jg()),i=C=>{a.set(C)},d=()=>{a.set(jg(()=>h))},g=s.uid.getOrThunk(()=>fp("external"));ab(s.element,g);const h={uid:g,getSystem:a.get,config:A.none,hasConfigured:dn,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:n,readState:se("No state"),syncComponents:V,components:se([]),events:{}};return mE(h)},hp=fp,l=n=>ho(n,"uid"),m=(n,s)=>kC(n).getOrThunk(()=>{const a=l(n)?n:{uid:hp(""),...n};return mA(a,s).getOrDie()}),p=n=>m(n,A.none()),y=mE;var U=Object.freeze({__proto__:null,block:(n,s,a,i)=>{Cn(n.element,"aria-busy",!0);const d=s.getRoot(n).getOr(n),g=mt([mn.config({mode:"special",onTab:()=>A.some(!0),onShiftTab:()=>A.some(!0)}),Nn.config({})]),h=i(d,g),C=d.getSystem().build(h);Bn.append(d,y(C)),C.hasConfigured(mn)&&s.focus&&mn.focusIn(C),a.isBlocked()||s.onBlock(n),a.blockWith(()=>Bn.remove(d,C))},unblock:(n,s,a)=>{ps(n.element,"aria-busy"),a.isBlocked()&&s.onUnblock(n),a.clear()},isBlocked:(n,s,a)=>a.isBlocked()}),K=[us("getRoot",A.none),Wr("focus",!0),xo("onBlock"),xo("onUnblock")],ke=Object.freeze({__proto__:null,init:()=>{const n=Km(),s=a=>{n.set({destroy:a})};return Si({readState:n.isSet,blockWith:s,clear:n.clear,isBlocked:n.isSet})}});const st=ha({fields:K,name:"blocking",apis:U,state:ke});var Bt=Object.freeze({__proto__:null,getCurrent:(n,s,a)=>s.find(n)});const cn=[ot("find")],We=ha({fields:cn,name:"composing",apis:Bt});var Vn=Object.freeze({__proto__:null,getCoupled:(n,s,a,i)=>a.getOrCreate(n,s,i),getExistingCoupled:(n,s,a,i)=>a.getExisting(n,s,i)}),Gt=[Gc("others",KS(rn.value,Cl()))],Fo=Object.freeze({__proto__:null,init:()=>{const n={},s=(g,h)=>{if(wo(g.others).length===0)throw new Error("Cannot find any known coupled components");return en(n,h)},a=(g,h,C)=>s(h,C).getOrThunk(()=>{const T=en(h.others,C).getOrDie("No information found for coupled component: "+C)(g),_=g.getSystem().build(T);return n[C]=_,_}),i=(g,h,C)=>s(h,C).orThunk(()=>(en(h.others,C).getOrDie("No information found for coupled component: "+C),A.none())),d=se({});return Si({readState:d,getExisting:i,getOrCreate:a})}});const Ln=ha({fields:Gt,name:"coupling",apis:Vn,state:Fo}),xr=["input","button","textarea","select"],Al=(n,s,a)=>{(s.disabled()?cc:Xi)(n,s)},Am=(n,s)=>s.useNative===!0&&tt(xr,$i(n.element)),Bf=n=>oa(n.element,"disabled"),Wg=n=>{Cn(n.element,"disabled","disabled")},Qo=n=>{ps(n.element,"disabled")},Nc=n=>Pr(n.element,"aria-disabled")==="true",Js=n=>{Cn(n.element,"aria-disabled","true")},qu=n=>{Cn(n.element,"aria-disabled","false")},cc=(n,s,a)=>{s.disableClass.each(d=>{Go(n.element,d)}),(Am(n,s)?Wg:Js)(n),s.onDisabled(n)},Xi=(n,s,a)=>{s.disableClass.each(d=>{Ms(n.element,d)}),(Am(n,s)?Qo:qu)(n),s.onEnabled(n)},Da=(n,s)=>Am(n,s)?Bf(n):Nc(n);var db=Object.freeze({__proto__:null,enable:Xi,disable:cc,isDisabled:Da,onLoad:Al,set:(n,s,a,i)=>{(i?cc:Xi)(n,s)}}),fA=Object.freeze({__proto__:null,exhibit:(n,s)=>ju({classes:s.disabled()?s.disableClass.toArray():[]}),events:(n,s)=>_s([J0(Aa(),(a,i)=>Da(a,n)),Q2(n,s,Al)])}),DE=[us("disabled",dn),De("useNative",!0),zo("disableClass"),xo("onDisabled"),xo("onEnabled")];const Xt=ha({fields:DE,name:"disabling",active:fA,apis:db}),Qc=(n,s,a,i,d)=>{const g=h=>h+"px";return{position:n,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},gA=n=>({...n,position:A.some(n.position)}),$v=(n,s)=>{sa(n,gA(s))},RE=(n,s)=>{const a=n.element;Go(a,s.transitionClass),Ms(a,s.fadeOutClass),Go(a,s.fadeInClass),s.onShow(n)},Zg=(n,s)=>{const a=n.element;Go(a,s.transitionClass),Ms(a,s.fadeInClass),Go(a,s.fadeOutClass),s.onHide(n)},hA=(n,s)=>n.y<s.bottom&&n.bottom>s.y,NE=(n,s)=>n.y>=s.y,jC=(n,s)=>n.bottom<=s.bottom,WC=(n,s,a)=>({location:"top",leftX:s,topY:a.bounds.y-n.y}),ME=(n,s,a)=>({location:"bottom",leftX:s,bottomY:n.bottom-a.bounds.bottom}),ZC=n=>n.box.x-n.win.x,I7=(n,s,a)=>{const i=s.win,d=s.box,g=ZC(s);return va(n,h=>{switch(h){case"bottom":return jC(d,a.bounds)?A.none():A.some(ME(i,g,a));case"top":return NE(d,a.bounds)?A.none():A.some(WC(i,g,a));default:return A.none()}}).getOr({location:"no-dock"})},L7=(n,s,a)=>nt(n,i=>{switch(i){case"bottom":return jC(s,a.bounds);case"top":return NE(s,a.bounds)}}),F7=(n,s)=>{const a=s.optScrollEnv.fold(se(n.bounds.y),i=>i.scrollElmTop+(n.bounds.y-i.currentScrollTop));return $o(n.bounds.x,a)},GC=(n,s)=>{const a=s.optScrollEnv.fold(se(n.y),i=>n.y+i.currentScrollTop-i.scrollElmTop);return $o(n.x,a)},qC=(n,s,a)=>a.getInitialPos().map(i=>{const d=F7(i,s);return{box:Br(d.left,d.top,ma(n),yr(n)),location:i.location}}),y5=(n,s,a,i,d)=>{const g=GC(s,a),h=Br(g.left,g.top,s.width,s.height);i.setInitialPos({style:cr(n),position:bs(n,"position")||"static",bounds:h,location:d.location})},C5=(n,s,a,i,d)=>{i.getInitialPos().fold(()=>y5(n,s,a,i,d),()=>V)},x5=(n,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return A.some({morph:"static"});case"absolute":const d=mf(n).getOr(Uc()),g=Ar(d),h=d.dom.scrollTop??0;return A.some({morph:"absolute",positionCss:Qc("absolute",en(i.style,"left").map(C=>s.x-g.x),en(i.style,"top").map(C=>s.y-g.y+h),en(i.style,"right").map(C=>g.right-s.right),en(i.style,"bottom").map(C=>g.bottom-s.bottom))});default:return A.none()}}),S5=(n,s,a)=>qC(n,s,a).filter(({box:i})=>L7(a.getModes(),i,s)).bind(({box:i})=>x5(n,i,a)),KC=n=>{switch(n.location){case"top":return A.some({morph:"fixed",positionCss:Qc("fixed",A.some(n.leftX),A.some(n.topY),A.none(),A.none())});case"bottom":return A.some({morph:"fixed",positionCss:Qc("fixed",A.some(n.leftX),A.none(),A.none(),A.some(n.bottomY))});default:return A.none()}},Iv=(n,s,a)=>{const i=Ar(n),d=za(),g=I7(a.getModes(),{win:d,box:i},s);return g.location==="top"||g.location==="bottom"?(y5(n,i,s,a,g),KC(g)):A.none()},pA=(n,s,a)=>S5(n,s,a).orThunk(()=>s.optScrollEnv.bind(i=>qC(n,s,a)).bind(({box:i,location:d})=>{const g=za(),h=ZC({win:g,box:i}),C=d==="top"?WC(g,h,s):ME(g,h,s);return KC(C)})),H7=(n,s,a)=>{const i=n.element;return gc(ws(i,"position"),"fixed")?pA(i,s,a):Iv(i,s,a)},z7=(n,s,a)=>{const i=n.element;return qC(i,s,a).bind(({box:d})=>x5(i,d,a))},w5=(n,s,a,i)=>{const d=Ar(n),g=za(),h=ZC({win:g,box:d}),C=i(g,h,s);return C.location==="bottom"||C.location==="top"?(C5(n,d,s,a,C),KC(C)):A.none()},Gg=(n,s,a)=>{a.setDocked(!1),Te(["left","right","top","bottom","position"],i=>Jn(n.element,i)),s.onUndocked(n)},YC=(n,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),$v(n.element,i),(d?s.onDocked:s.onUndocked)(n)},PE=(n,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(n).each(h=>{const C=hA(h,i.bounds);C!==a.isVisible()&&(a.setVisible(C),d&&!C?(Ql(n.element,[g.fadeOutClass]),g.onHide(n)):(C?RE:Zg)(n,g))})})},XC=(n,s,a,i,d)=>{PE(n,s,a,i,!0),YC(n,s,a,d.positionCss)},E5=(n,s,a,i,d)=>{switch(d.morph){case"static":return Gg(n,s,a);case"absolute":return YC(n,s,a,d.positionCss);case"fixed":return XC(n,s,a,i,d)}},BE=(n,s,a)=>{const i=s.lazyViewport(n);PE(n,s,a,i),H7(n,i,a).each(d=>{E5(n,s,a,i,d)})},bA=(n,s,a)=>{const i=n.element;a.setDocked(!1);const d=s.lazyViewport(n);z7(n,d,a).each(g=>{switch(g.morph){case"static":{Gg(n,s,a);break}case"absolute":{YC(n,s,a,g.positionCss);break}}}),a.setVisible(!0),s.contextual.each(g=>{fa(i,[g.fadeInClass,g.fadeOutClass,g.transitionClass]),g.onShow(n)}),$E(n,s,a)},$E=(n,s,a)=>{n.getSystem().isConnected()&&BE(n,s,a)},T5=(n,s,a)=>{a.isDocked()&&bA(n,s,a)},Om=n=>(s,a,i)=>{const d=a.lazyViewport(s);w5(s.element,d,i,n).each(h=>{XC(s,a,i,d,h)})},V7=Om(WC),U7=Om(ME);var vA=Object.freeze({__proto__:null,refresh:$E,reset:T5,isDocked:(n,s,a)=>a.isDocked(),getModes:(n,s,a)=>a.getModes(),setModes:(n,s,a,i)=>a.setModes(i),forceDockToTop:V7,forceDockToBottom:U7}),k5=Object.freeze({__proto__:null,events:(n,s)=>_s([op(C0(),(a,i)=>{n.contextual.each(d=>{lr(a.element,d.transitionClass)&&(fa(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),je(k2(),(a,i)=>{$E(a,n,s)}),je(nw(),(a,i)=>{$E(a,n,s)}),je(Uh(),(a,i)=>{T5(a,n,s)})])}),yA=[Kc("contextual",[Xs("fadeInClass"),Xs("fadeOutClass"),Xs("transitionClass"),bi("lazyContext"),xo("onShow"),xo("onShown"),xo("onHide"),xo("onHidden")]),us("lazyViewport",()=>({bounds:za(),optScrollEnv:A.none()})),gf("modes",["top","bottom"],jr),xo("onDocked"),xo("onUndocked")],A5=Object.freeze({__proto__:null,init:n=>{const s=Zt(!1),a=Zt(!0),i=kn(),d=Zt(n.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Si({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const Bs=ha({fields:yA,name:"docking",active:k5,apis:vA,state:A5}),CA=Ia.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),IE=n=>s=>s.translate(-n.left,-n.top),JC=n=>s=>s.translate(n.left,n.top),$f=n=>(s,a)=>Tt(n,(i,d)=>d(i),$o(s,a)),LE=(n,s,a)=>n.fold($f([JC(a),IE(s)]),$f([IE(s)]),$f([])),Lv=(n,s,a)=>n.fold($f([JC(a)]),$f([]),$f([JC(s)])),xA=(n,s,a)=>n.fold($f([]),$f([IE(a)]),$f([JC(s),IE(a)])),_5=(n,s,a,i,d,g)=>{const h=Lv(n,d,g),C=Lv(s,d,g);return Math.abs(h.left-C.left)<=a&&Math.abs(h.top-C.top)<=i},O5=(n,s,a,i,d,g)=>{const h=Lv(n,d,g),C=Lv(s,d,g),x=Math.abs(h.left-C.left),T=Math.abs(h.top-C.top);return $o(x,T)},SA=(n,s,a)=>{const i=n.fold((d,g)=>({position:A.some("absolute"),left:A.some(d+"px"),top:A.some(g+"px")}),(d,g)=>({position:A.some("absolute"),left:A.some(d-a.left+"px"),top:A.some(g-a.top+"px")}),(d,g)=>({position:A.some("fixed"),left:A.some(d+"px"),top:A.some(g+"px")}));return{right:A.none(),bottom:A.none(),...i}},FE=(n,s,a)=>n.fold((i,d)=>If(i+s,d+a),(i,d)=>Ld(i+s,d+a),(i,d)=>mb(i+s,d+a)),HE=(n,s,a,i)=>{const d=(g,h)=>(C,x)=>{const T=g(s,a,i);return h(C.getOr(T.left),x.getOr(T.top))};return n.fold(d(xA,If),d(Lv,Ld),d(LE,mb))},If=CA.offset,Ld=CA.absolute,mb=CA.fixed,D5=(n,s)=>{const a=Pr(n,s);return Ut(a)?NaN:parseInt(a,10)},j7=(n,s)=>{const a=n.element,i=D5(a,s.leftAttr),d=D5(a,s.topAttr);return isNaN(i)||isNaN(d)?A.none():A.some($o(i,d))},W7=(n,s,a)=>{const i=n.element;Cn(i,s.leftAttr,a.left+"px"),Cn(i,s.topAttr,a.top+"px")},R5=(n,s)=>{const a=n.element;ps(a,s.leftAttr),ps(a,s.topAttr)},Z7=(n,s,a,i)=>j7(n,s).fold(()=>a,d=>mb(d.left+i.left,d.top+i.top)),N5=(n,s,a,i,d,g)=>{const h=Z7(n,s,a,i),C=s.mustSnap?P5(n,s,h,d,g):Fv(n,s,h,d,g),x=LE(h,d,g);return W7(n,s,x),C.fold(()=>({coord:mb(x.left,x.top),extra:A.none()}),T=>({coord:T.output,extra:T.extra}))},G7=(n,s)=>{R5(n,s)},M5=(n,s,a,i)=>va(n,d=>{const g=d.sensor;return _5(s,g,d.range.left,d.range.top,a,i)?A.some({output:HE(d.output,s,a,i),extra:d.extra}):A.none()}),P5=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return M5(g,a,i,d).orThunk(()=>Tt(g,(x,T)=>{const _=T.sensor,N=O5(a,_,T.range.left,T.range.top,i,d);return x.deltas.fold(()=>({deltas:A.some(N),snap:A.some(T)}),H=>{const j=(N.left+N.top)/2,Z=(H.left+H.top)/2;return j<=Z?{deltas:A.some(N),snap:A.some(T)}:x})},{deltas:A.none(),snap:A.none()}).snap.map(x=>({output:HE(x.output,a,i,d),extra:x.extra})))},Fv=(n,s,a,i,d)=>{const g=s.getSnapPoints(n);return M5(g,a,i,d)},B5=(n,s,a)=>({coord:HE(n.output,n.output,s,a),extra:n.extra});var K7=Object.freeze({__proto__:null,snapTo:(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=bc(n.element),h=Vs(g),C=d0(d),x=B5(i,h,C),T=SA(x.coord,h,C);sa(d,T)}}});const Ra=(n,s)=>hf(n,{},pe(s,a=>Xk(a.name(),"Cannot configure "+a.name()+" for "+n)).concat([Tc("dump",nn)])),ex=n=>n.dump,lc=(n,s)=>({...mt(s),...n.dump}),Fd={field:Ra,augment:lc,get:ex},Y7=(n,s)=>(n.length>0?[Td("parts",n)]:[]).concat([ot("uid"),De("dom",{}),De("components",[]),cw("originalSpec"),De("debug.sketcher",{})]).concat(s),$5=(n,s,a,i,d)=>{const g=Y7(i,d);return wc(n+" [SpecSchema]",pi(g.concat(s)),a)},X7=(n,s,a,i)=>{const d=VE(i),g=$5(n,s,d,[],[]);return a(g,d)},wA=(n,s,a,i,d)=>{const g=VE(d),h=Gr(a),C=ym(a),x=$5(n,s,g,h,[C]),T=Xc(n,x,a),_=L0(n,x,T.internals());return i(x,_,g,T.externals())},zE=n=>ho(n,"uid"),VE=n=>zE(n)?n:{...n,uid:fp("uid")},Q7=n=>n.uid!==void 0,hQ=pi([ot("name"),ot("factory"),ot("configFields"),De("apis",{}),De("extraApis",{})]),I5=pi([ot("name"),ot("factory"),ot("configFields"),ot("partFields"),De("apis",{}),De("extraApis",{})]),uu=n=>{const s=wc("Sketcher for "+n.name,hQ,n),a=g=>X7(s.name,s.configFields,s.factory,g),i=Ls(s.apis,nb),d=Ls(s.extraApis,(g,h)=>_1(g,h));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},wi=n=>{const s=wc("Sketcher for "+n.name,I5,n),a=h=>wA(s.name,s.configFields,s.partFields,s.factory,h),i=Cf(s.name,s.partFields),d=Ls(s.apis,nb),g=Ls(s.extraApis,(h,C)=>_1(h,C));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},Dm=uu({name:"Container",factory:n=>{const{attributes:s,...a}=n.dom;return{uid:n.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:n.components,behaviours:ex(n.containerBehaviours),events:n.events,domModification:n.domModification,eventOrder:n.eventOrder}},configFields:[De("components",[]),Ra("containerBehaviours",[]),De("events",{}),De("domModification",{}),De("eventOrder",{})]}),EA="data-initial-z-index",J7=n=>{vc(n.element).filter(pc).each(s=>{na(s,EA).fold(()=>Jn(s,"z-index"),a=>Tn(s,"z-index",a)),ps(s,EA)})},eH=n=>{vc(n.element).filter(pc).each(s=>{ws(s,"z-index").each(a=>{Cn(s,EA,a)}),Tn(s,"z-index",bs(n.element,"z-index"))})},L5=(n,s)=>{n.getSystem().addToGui(s),eH(s)},Hv=n=>{J7(n),n.getSystem().removeFromGui(n)},UE=(n,s,a)=>n.getSystem().build(Dm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var tH=Kc("snaps",[ot("getSnapPoints"),xo("onSensor"),ot("leftAttr"),ot("topAttr"),De("lazyViewport",za),De("mustSnap",!1)]);const tx=[De("useFixed",dn),ot("blockerClass"),De("getTarget",nn),De("onDrag",V),De("repositionTarget",!0),De("onDrop",V),us("getBounds",za),tH],jE=n=>Lr(ws(n,"left"),ws(n,"top"),ws(n,"position"),(s,a,i)=>(i==="fixed"?mb:If)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Ea(n);return Ld(s.left,s.top)}),TA=(n,s,a,i,d)=>{const g=d.bounds,h=Lv(s,a,i),C=rr(h.left,g.x,g.x+g.width-d.width),x=rr(h.top,g.y,g.y+g.height-d.height),T=Ld(C,x);return s.fold(()=>{const _=xA(T,a,i);return If(_.left,_.top)},se(T),()=>{const _=LE(T,a,i);return mb(_.left,_.top)})},nH=(n,s,a,i,d,g,h)=>{const C=s.fold(()=>{const x=FE(a,g.left,g.top),T=LE(x,i,d);return mb(T.left,T.top)},x=>{const T=N5(n,x,a,g,i,d);return T.extra.each(_=>{x.onSensor(n,_)}),T.coord});return TA(n,C,i,d,h)},oH=(n,s,a,i)=>{const d=s.getTarget(n.element);if(s.repositionTarget){const g=bc(n.element),h=Vs(g),C=d0(d),x=jE(d),T=nH(n,s.snaps,x,h,C,i,a),_=SA(T,h,C);sa(d,_)}s.onDrag(n,d,i)},F5=(n,s)=>({bounds:n.getBounds(),height:Cr(s.element),width:Ru(s.element)}),kA=(n,s,a,i,d)=>{const g=a.update(i,d),h=a.getStartData().getOrThunk(()=>F5(s,n));g.each(C=>{oH(n,s,h,C)})},H5=(n,s,a,i)=>{s.each(Hv),a.snaps.each(g=>{G7(n,g)});const d=a.getTarget(n.element);i.reset(),a.onDrop(n,d)},AA=n=>(s,a)=>{const i=d=>{a.setStartData(F5(s,d))};return _s([je(k2(),d=>{a.getStartData().each(()=>i(d))}),...n(s,a,i)])},sH=n=>_s([je(Yc(),n.forceDrop),je(y0(),n.drop),je(Fh(),(s,a)=>{n.move(a.event)}),je($r(),n.delayDrop)]);var aH=Object.freeze({__proto__:null,getData:n=>A.from($o(n.x,n.y)),getDelta:(n,s)=>$o(s.left-n.left,s.top-n.top)});const z5=(n,s,a)=>[je(Yc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const h=()=>H5(i,A.some(T),n,s),C=o3(h,200),x={drop:h,delayDrop:C.schedule,forceDrop:h,move:N=>{C.cancel(),kA(i,n,s,aH,N)}},T=UE(i,n.blockerClass,sH(x));(()=>{a(i),L5(i,T)})()})],cH=[...tx,Po("dragger",{handlers:AA(z5)})],iH=n=>_s([je(vi(),n.forceDrop),je(bf(),n.drop),je(S1(),n.drop),je(mr(),(s,a)=>{n.move(a.event)})]),zv=n=>{const s=n[0];return A.some($o(s.clientX,s.clientY))};var WE=Object.freeze({__proto__:null,getData:n=>{const a=n.raw.touches;return a.length===1?zv(a):A.none()},getDelta:(n,s)=>$o(s.left-n.left,s.top-n.top)});const U5=(n,s,a)=>{const i=kn(),d=g=>{H5(g,i.get(),n,s),i.clear()};return[je(vi(),(g,h)=>{h.stop();const C=()=>d(g),x={drop:C,delayDrop:V,forceDrop:C,move:N=>{kA(g,n,s,WE,N)}},T=UE(g,n.blockerClass,iH(x));i.set(T),(()=>{a(g),L5(g,T)})()}),je(mr(),(g,h)=>{h.stop(),kA(g,n,s,WE,h.event)}),je(bf(),(g,h)=>{h.stop(),d(g)}),je(S1(),d)]},$t=[...tx,Po("dragger",{handlers:AA(U5)})],fb=(n,s,a)=>[...z5(n,s,a),...U5(n,s,a)],lH=[...tx,Po("dragger",{handlers:AA(fb)})];var dH=Object.freeze({__proto__:null,mouse:cH,touch:$t,mouseOrTouch:lH}),W5=Object.freeze({__proto__:null,init:()=>{let n=A.none(),s=A.none();const a=()=>{n=A.none(),s=A.none()},i=(x,T)=>{const _=n.map(N=>x.getDelta(N,T));return n=A.some(T),_},d=(x,T)=>x.getData(T).bind(_=>i(x,_)),g=x=>{s=A.some(x)},h=()=>s,C=se({});return Si({readState:C,reset:a,update:d,getStartData:h,setStartData:g})}});const qg=nC({branchKey:"mode",branches:dH,name:"dragging",active:{events:(n,s)=>n.dragger.handlers(n,s)},extra:{snap:n=>({sensor:n.sensor,range:n.range,output:n.output,extra:A.from(n.extra)})},state:W5,apis:K7}),fH=["input","textarea"],DA=n=>{const s=$i(n);return tt(fH,s)},Z5=(n,s)=>{const a=s.getRoot(n).getOr(n.element);Ms(a,s.invalidClass),s.notify.each(i=>{DA(n.element)&&Cn(n.element,"aria-invalid",!1),i.getContainer(n).each(d=>{Hi(d,i.validHtml)}),i.onValid(n)})},G5=(n,s,a,i)=>{const d=s.getRoot(n).getOr(n.element);Go(d,s.invalidClass),s.notify.each(g=>{DA(n.element)&&Cn(n.element,"aria-invalid",!0),g.getContainer(n).each(h=>{Hi(h,i)}),g.onInvalid(n,i)})},RA=(n,s,a)=>s.validator.fold(()=>Ko.pure(rn.value(!0)),i=>i.validate(n)),NA=(n,s,a)=>(s.notify.each(i=>{i.onValidate(n)}),RA(n,s).map(i=>n.getSystem().isConnected()?i.fold(d=>(G5(n,s,a,d),rn.error(d)),d=>(Z5(n,s),rn.value(d))):rn.error("No longer in system")));var MA=Object.freeze({__proto__:null,markValid:Z5,markInvalid:G5,query:RA,run:NA,isInvalid:(n,s)=>{const a=s.getRoot(n).getOr(n.element);return lr(a,s.invalidClass)}}),ZE=Object.freeze({__proto__:null,events:(n,s)=>n.validator.map(a=>_s([je(a.onEvent,i=>{NA(i,n,s).get(nn)})].concat(a.validateOnLoad?[vs(i=>{NA(i,n,s).get(V)})]:[]))).getOr({})}),GE=[ot("invalidClass"),De("getRoot",A.none),Kc("notify",[De("aria","alert"),De("getContainer",A.none),De("validHtml",""),xo("onValid"),xo("onInvalid"),xo("onValidate")]),Kc("validator",[ot("validate"),De("onEvent","input"),De("validateOnLoad",!0)])];const Vv=(n,s,a)=>{s.store.manager.onLoad(n,s,a)},Rm=(n,s,a)=>{s.store.manager.onUnload(n,s,a)};var yQ=Object.freeze({__proto__:null,onLoad:Vv,onUnload:Rm,setValue:(n,s,a,i)=>{s.store.manager.setValue(n,s,a,i)},getValue:(n,s,a)=>s.store.manager.getValue(n,s,a),getState:(n,s,a)=>a}),pH=Object.freeze({__proto__:null,events:(n,s)=>{const a=n.resetOnDom?[vs((i,d)=>{Vv(i,n,s)}),au((i,d)=>{Rm(i,n,s)})]:[Q2(n,s,Vv)];return _s(a)}});const qE=()=>{const n=Zt(null),s=()=>({mode:"memory",value:n.get()}),a=()=>n.get()===null,i=()=>{n.set(null)};return Si({set:n.set,get:n.get,isNotSet:a,clear:i,readState:s})},bH=()=>Si({readState:V}),q5=()=>{const n=Zt({}),s=Zt({});return Si({readState:()=>({mode:"dataset",dataByValue:n.get(),dataByText:s.get()}),lookup:h=>en(n.get(),h).orThunk(()=>en(s.get(),h)),update:h=>{const C=n.get(),x=s.get(),T={},_={};Te(h,N=>{T[N.value]=N,en(N,"meta").each(H=>{en(H,"text").each(j=>{_[j]=N})})}),n.set({...C,...T}),s.set({...x,..._})},clear:()=>{n.set({}),s.set({})}})};var K5=Object.freeze({__proto__:null,memory:qE,dataset:q5,manual:bH,init:n=>n.store.manager.state(n)});const Y5=(n,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(n,i),s.onSetValue(n,i)},vH=(n,s,a)=>{const i=s.store,d=i.getDataKey(n);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},X5=(n,s,a)=>{s.store.initialValue.each(d=>{Y5(n,s,a,d)})},Q5=(n,s,a)=>{a.clear()};var yH=[zo("initialValue"),ot("getFallbackEntry"),ot("getDataKey"),ot("setValue"),Po("manager",{setValue:Y5,getValue:vH,onLoad:X5,onUnload:Q5,state:q5})];const J5=(n,s,a)=>s.store.getValue(n),CH=(n,s,a,i)=>{s.store.setValue(n,i),s.onSetValue(n,i)},PA=(n,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(n,i)})};var eM=[ot("getValue"),De("setValue",V),zo("initialValue"),Po("manager",{setValue:CH,getValue:J5,onLoad:PA,onUnload:V,state:Uu.init})];const tM=(n,s,a,i)=>{a.set(i),s.onSetValue(n,i)},nM=(n,s,a)=>a.get(),xH=(n,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},SH=(n,s,a)=>{a.clear()};var wH=[zo("initialValue"),Po("manager",{setValue:tM,getValue:nM,onLoad:xH,onUnload:SH,state:qE})],EH=[Zi("store",{mode:"memory"},Ec("mode",{memory:wH,manual:eM,dataset:yH})),xo("onSetValue"),De("resetOnDom",!1)];const Ft=ha({fields:EH,name:"representing",active:pH,apis:yQ,extra:{setValueFrom:(n,s)=>{const a=Ft.getValue(s);Ft.setValue(n,a)}},state:K5}),du=ha({fields:GE,name:"invalidating",active:ZE,apis:MA,extra:{validation:n=>s=>{const a=Ft.getValue(s);return Ko.pure(n(a))}}});var oM=Object.freeze({__proto__:null,exhibit:(n,s)=>ju({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const KE=Ia.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),BA=(n,s,a,i,d,g)=>{const h=s.rect,C=h.x-a,x=h.y-i,T=h.width,_=h.height,N=d-(C+T),H=g-(x+_),j=A.some(C),Z=A.some(x),oe=A.some(N),le=A.some(H),Q=A.none();return H0(s.direction,()=>Qc(n,j,Z,Q,Q),()=>Qc(n,Q,Z,oe,Q),()=>Qc(n,j,Q,Q,le),()=>Qc(n,Q,Q,oe,le),()=>Qc(n,j,Z,Q,Q),()=>Qc(n,j,Q,Q,le),()=>Qc(n,j,Z,Q,Q),()=>Qc(n,Q,Z,oe,Q))},$A=(n,s)=>n.fold(()=>{const a=s.rect;return Qc("absolute",A.some(a.x),A.some(a.y),A.none(),A.none())},(a,i,d,g)=>BA("absolute",s,a,i,d,g),(a,i,d,g)=>BA("fixed",s,a,i,d,g)),IA=(n,s)=>{const a=Yt(f1,s),i=n.fold(a,a,()=>{const h=Vs();return f1(s).translate(-h.left,-h.top)}),d=Ru(s),g=Cr(s);return Br(i.left,i.top,d,g)},kH=(n,s)=>s.fold(()=>n.fold(za,za,Br),a=>n.fold(se(a),se(a),()=>{const i=sM(n,a.x,a.y);return Br(i.left,i.top,a.width,a.height)})),sM=(n,s,a)=>{const i=$o(s,a),d=()=>{const g=Vs();return i.translate(-g.left,-g.top)};return n.fold(se(i),se(i),d)},LA=(n,s,a,i)=>n.fold(s,a,i);KE.none;const AH=KE.relative,YE=KE.fixed,_H=(n,s)=>({anchorBox:n,origin:s}),rM=(n,s)=>_H(n,s),Na=Ia.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),OH=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,right:x,bottom:T,width:_,height:N}=n,H=h>=a&&h<=d,j=C>=i&&C<=g,Z=H&&j,oe=x<=d&&x>=a,le=T<=g&&T>=i,Q=oe&&le,me=Math.min(_,h>=a?d-h:x-a),ve=Math.min(N,C>=i?g-C:T-i);return{originInBounds:Z,sizeInBounds:Q,visibleW:me,visibleH:ve}},aM=(n,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:h,y:C,width:x,height:T}=n,_=Math.max(a,d-x),N=Math.max(i,g-T),H=rr(h,a,_),j=rr(C,i,N),Z=Math.min(H+x,d)-H,oe=Math.min(j+T,g)-j;return Br(H,j,Z,oe)},cM=(n,s,a)=>{const i=se(s.bottom-a.y),d=se(a.bottom-s.y),g=Rg(n,d,d,i),h=se(s.right-a.x),C=se(a.right-s.x);return{maxWidth:wf(n,C,C,h),maxHeight:g}},DH=(n,s,a,i)=>{const d=n.bubble,g=d.offset,h=Tf(i,n.restriction,g),C=n.x+g.left,x=n.y+g.top,T=Br(C,x,s,a),{originInBounds:_,sizeInBounds:N,visibleW:H,visibleH:j}=OH(T,h),Z=_&&N,oe=Z?T:aM(T,h),le=oe.width>0&&oe.height>0,{maxWidth:Q,maxHeight:me}=cM(n.direction,oe,i),ve={rect:oe,maxHeight:me,maxWidth:Q,direction:n.direction,placement:n.placement,classes:{on:d.classesOn,off:d.classesOff},layout:n.label,testY:x};return Z||n.alwaysFit?Na.fit(ve):Na.nofit(ve,H,j,le)},iM=(n,s,a,i,d,g)=>{const h=i.width,C=i.height,x=(_,N,H,j,Z)=>{const oe=_(a,i,d,n,g),le=DH(oe,h,C,g);return le.fold(se(le),(Q,me,ve,Re)=>(Z===Re?ve>j||me>H:!Z&&Re)?le:Na.nofit(N,H,j,Z))};return Tt(s,(_,N)=>{const H=Yt(x,N);return _.fold(se(_),H)},Na.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:N1(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(nn,nn)},FA=["top","bottom","right","left"],XE="data-alloy-transition-timer",RH=(n,s)=>Sh(n,s.classes),NH=(n,s,a)=>a.exists(i=>{const d=n.mode;return d==="all"?!0:i[d]!==s[d]}),MH=(n,s)=>{const a=i=>parseFloat(i).toFixed(3);return dc(s,(i,d)=>{const g=n[d].map(a),h=i.map(a);return!er(g,h)}).isSome()},lM=n=>{const s=g=>{const C=bs(n,g).split(/\s*,\s*/);return sn(C,al)},a=g=>{if(de(g)&&/^[\d.]+/.test(g)){const h=parseFloat(g);return ai(g,"ms")?h:h*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return Tt(d,(g,h,C)=>{const x=a(i[C])+a(h);return Math.max(g,x)},0)},PH=(n,s)=>{const a=Ds(),i=Ds();let d;const g=T=>{const _=T.raw.pseudoElement??"";return L(T.target,n)&&ya(_)&&tt(FA,T.raw.propertyName)},h=T=>{if(jt(T)||g(T)){a.clear(),i.clear();const _=T?.raw.type;(jt(_)||_===C0())&&(clearTimeout(d),ps(n,XE),fa(n,s.classes))}},C=Mo(n,fm(),T=>{g(T)&&(C.unbind(),a.set(Mo(n,C0(),h)),i.set(Mo(n,e3(),h)))}),x=lM(n);window.requestAnimationFrame(()=>{d=setTimeout(h,x+17),Cn(n,XE,d)})},BH=(n,s)=>{Ql(n,s.classes),na(n,XE).each(a=>{clearTimeout(parseInt(a,10)),ps(n,XE)}),PH(n,s)},uM=(n,s,a,i,d,g)=>{const h=NH(i,d,g);if(h||RH(n,i)){Tn(n,"position",a.position);const C=IA(s,n),x=$A(s,{...d,rect:C}),T=ao(FA,_=>x[_]);MH(a,T)&&(sa(n,T),h&&BH(n,i),zi(n))}else fa(n,i.classes)},dM=n=>({width:Math.ceil(Ru(n)),height:Cr(n)}),mM=(n,s,a,i)=>{Jn(s,"max-height"),Jn(s,"max-width");const d=dM(s);return iM(s,i.preference,n,d,a,i.bounds)},$H=(n,s)=>{const a=s.classes;fa(n,a.off),Ql(n,a.on)},IH=(n,s,a)=>{const i=a.maxHeightFunction;i(n,s.maxHeight)},LH=(n,s,a)=>{const i=a.maxWidthFunction;i(n,s.maxWidth)},FH=(n,s,a)=>{const i=$A(a.origin,s);a.transition.each(d=>{uM(n,a.origin,i,d,s,a.lastPlacement)}),$v(n,i)},fM=(n,s)=>{Kh(n,s.placement)},HA=(n,s,a)=>n[s]===void 0?a:n[s],pp=(n,s,a,i,d,g,h,C)=>{const x=HA(h,"maxHeightFunction",q2()),T=HA(h,"maxWidthFunction",V),_=n.anchorBox,N=n.origin,H={bounds:kH(N,g),origin:N,preference:i,maxHeightFunction:x,maxWidthFunction:T,lastPlacement:d,transition:C};return gM(_,s,a,H)},gM=(n,s,a,i)=>{const d=mM(n,s,a,i);return FH(s,d,i),fM(s,d),$H(s,d),IH(s,d,i),LH(s,d,i),{layout:d.layout,placement:d.placement}},nx=nn,bp=()=>Kc("layouts",[ot("onLtr"),ot("onRtl"),zo("onBottomLtr"),zo("onBottomRtl")]),QE=(n,s,a,i,d,g,h)=>{const C=h.map(f3).getOr(!1),x=s.layouts.map(j=>j.onLtr(n)),T=s.layouts.map(j=>j.onRtl(n)),_=C?s.layouts.bind(j=>j.onBottomLtr.map(Z=>Z(n))).or(x).getOr(d):x.getOr(a),N=C?s.layouts.bind(j=>j.onBottomRtl.map(Z=>Z(n))).or(T).getOr(g):T.getOr(i);return r1(_,N)(n)},Uv=(n,s,a)=>{const i=s.hotspot,d=IA(a,i.element),g=QE(n.element,s,W2(),W0(),j0(),j2(),A.some(s.hotspot.element));return A.some(nx({anchorBox:d,bubble:s.bubble.getOr(Sf()),overrides:s.overrides,layouts:g}))};var HH=[ot("hotspot"),zo("bubble"),De("overrides",{}),bp(),Po("placement",Uv)];const zH=(n,s,a)=>{const i=sM(a,s.x,s.y),d=Br(i.left,i.top,s.width,s.height),g=QE(n.element,s,U2(),Cw(),U2(),Cw(),A.none());return A.some(nx({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g}))};var hM=[ot("x"),ot("y"),De("height",0),De("width",0),De("bubble",Sf()),De("overrides",{}),bp(),Po("placement",zH)];const pM=Ia.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),VH=n=>n.fold(nn,(s,a,i)=>s.translate(-a,-i)),UH=n=>n.fold(nn,nn),zA=n=>Tt(n,(s,a)=>s.translate(a.left,a.top),$o(0,0)),VA=n=>{const s=pe(n,VH);return zA(s)},JE=n=>{const s=pe(n,UH);return zA(s)},jH=pM.screen,vp=pM.absolute,bM=(n,s,a)=>{const i=cg(a.root).dom,d=g=>{const h=bc(g),C=bc(n.element);return L(h,C)};return A.from(i.frameElement).map(ht.fromDom).filter(d).map(Ea)},UA=(n,s,a)=>{const i=bc(n.element),d=Vs(i),g=bM(n,s,a).getOr(d);return vp(g,d.left,d.top)},jA=(n,s,a,i)=>{const d=jH($o(n,s));return A.some(uf(d,a,i))},vM=(n,s,a,i,d)=>n.map(g=>{const h=[s,g.point],C=LA(i,()=>JE(h),()=>JE(h),()=>VA(h)),x=Uk(C.left,C.top,g.width,g.height),T=a.showAbove?j0():W2(),_=a.showAbove?j2():W0(),N=QE(d,a,T,_,T,_,A.none());return nx({anchorBox:x,bubble:a.bubble.getOr(Sf()),overrides:a.overrides,layouts:N})}),ox=(n,s,a)=>{const i=UA(n,a,s);return s.node.filter(yo).bind(d=>{const g=d.dom.getBoundingClientRect(),h=jA(g.left,g.top,g.width,g.height),C=s.node.getOr(n.element);return vM(h,i,s,a,C)})};var sx=[ot("node"),ot("root"),zo("bubble"),bp(),De("overrides",{}),De("showAbove",!1),Po("placement",ox)];const rx=(n,s)=>({element:n,offset:s}),WA=(n,s)=>{const a=ul(n);if(a.length===0)return rx(n,s);if(s<a.length)return rx(a[s],0);{const i=a[a.length-1],d=hd(i)?xh(i).length:ul(i).length;return rx(i,d)}},Kg=(n,s)=>hd(n)?rx(n,s):WA(n,s),Lf=n=>n.foffset!==void 0,yM=(n,s)=>s.getSelection.getOrThunk(()=>()=>pg(n))().map(i=>{if(Lf(i)){const d=Kg(i.start,i.soffset),g=Kg(i.finish,i.foffset);return ji.range(d.element,d.offset,g.element,g.offset)}else return i}),WH=(n,s,a)=>{const i=cg(s.root).dom,d=UA(n,a,s),g=yM(i,s).bind(x=>{if(Lf(x))return lf(i,ji.exactFromRange(x)).orThunk(()=>{const _=ht.fromText(Ym);bd(x.start,_);const N=bg(i,ji.exact(_,0,_,1));return ui(_),N}).bind(_=>jA(_.left,_.top,_.width,_.height));{const T=Ls(x,N=>N.dom.getBoundingClientRect()),_={left:Math.min(T.firstCell.left,T.lastCell.left),right:Math.max(T.firstCell.right,T.lastCell.right),top:Math.min(T.firstCell.top,T.lastCell.top),bottom:Math.max(T.firstCell.bottom,T.lastCell.bottom)};return jA(_.left,_.top,_.right-_.left,_.bottom-_.top)}}),C=yM(i,s).bind(x=>Lf(x)?pc(x.start)?A.some(x.start):Wl(x.start):A.some(x.firstCell)).getOr(n.element);return vM(g,d,s,a,C)};var CM=[zo("getSelection"),ot("root"),zo("bubble"),bp(),De("overrides",{}),De("showAbove",!1),Po("placement",WH)];const zd="link-layout",eT=n=>n.x+n.width,xM=(n,s)=>n.x-s.width,ZA=(n,s)=>n.y-s.height+n.height,GA=n=>n.y,qA=(n,s,a)=>_a(eT(n),GA(n),a.southeast(),N1(),"southeast",qr(n,{left:0,top:2}),zd),tT=(n,s,a)=>_a(xM(n,s),GA(n),a.southwest(),L2(),"southwest",qr(n,{right:1,top:2}),zd),KA=(n,s,a)=>_a(eT(n),ZA(n,s),a.northeast(),z0(),"northeast",qr(n,{left:0,bottom:3}),zd),SM=(n,s,a)=>_a(xM(n,s),ZA(n,s),a.northwest(),Ng(),"northwest",qr(n,{right:1,bottom:3}),zd),wM=()=>[qA,tT,KA,SM],EM=()=>[tT,qA,SM,KA],nT=(n,s,a)=>{const i=IA(a,s.item.element),d=QE(n.element,s,wM(),EM(),wM(),EM(),A.none());return A.some(nx({anchorBox:i,bubble:Sf(),overrides:s.overrides,layouts:d}))};var YA=[ot("item"),bp(),De("overrides",{}),Po("placement",nT)],oT=Ec("type",{selection:CM,node:sx,hotspot:HH,submenu:YA,makeshift:hM});const TM=[qc("classes",jr),kc("mode","all",["all","layout","placement"])],ZH=[De("useFixed",dn),zo("getBounds")],kM=[Gc("anchor",oT),Kc("transition",TM)],AM=()=>{const n=document.documentElement;return YE(0,0,n.clientWidth,n.clientHeight)},_M=n=>{const s=Ea(n.element),a=n.element.dom.getBoundingClientRect();return AH(s.left,s.top,a.width,a.height)},OM=(n,s,a,i,d,g)=>{const h=rM(s.anchorBox,n);return pp(h,i.element,s.bubble,s.layouts,d,a,s.overrides,g)},GH=(n,s,a,i,d)=>{const g=A.none();sT(n,s,a,i,d,g)},sT=(n,s,a,i,d,g)=>{const h=wc("placement.info",bn(kM),d),C=h.anchor,x=i.element,T=a.get(i.uid);zg(()=>{Tn(x,"position","fixed");const _=ws(x,"visibility");Tn(x,"visibility","hidden");const N=s.useFixed()?AM():_M(n);C.placement(n,C,N).each(H=>{const j=g.orThunk(()=>s.getBounds.map(Uo)),Z=OM(N,H,j,i,T,h.transition);a.set(i.uid,Z)}),_.fold(()=>{Jn(x,"visibility")},H=>{Tn(x,"visibility",H)}),ws(x,"left").isNone()&&ws(x,"top").isNone()&&ws(x,"right").isNone()&&ws(x,"bottom").isNone()&&gc(ws(x,"position"),"fixed")&&Jn(x,"position")},x)};var qH=Object.freeze({__proto__:null,position:GH,positionWithinBounds:sT,getMode:(n,s,a)=>s.useFixed()?"fixed":"absolute",reset:(n,s,a,i)=>{const d=i.element;Te(["position","left","right","top","bottom"],g=>Jn(d,g)),$1(d),a.clear(i.uid)}}),DM=Object.freeze({__proto__:null,init:()=>{let n={};return Si({readState:()=>n,clear:d=>{Dt(d)?delete n[d]:n={}},set:(d,g)=>{n[d]=g},get:d=>en(n,d)})}});const Mc=ha({fields:ZH,name:"positioning",active:oM,apis:qH,state:DM}),KH=(n,s)=>s.universal?n:sn(n,a=>tt(s.channels,a));var ax=Object.freeze({__proto__:null,events:n=>_s([je(hm(),(s,a)=>{const i=n.channels,d=wo(i),g=a,h=KH(d,g);Te(h,C=>{const x=i[C],T=x.schema,_=wc("channel["+C+`] data
Receiver: `+Lu(s.element),T,g.data);x.onReceive(s,_)})})])}),XH=[Gc("channels",KS(rn.value,pi([vf("onReceive"),De("schema",Cl())])))];const Pc=ha({fields:XH,name:"receiving",active:ax});var NM=Object.freeze({__proto__:null,events:(n,s)=>{const a=(i,d)=>{n.updateState.each(g=>{const h=g(i,d);s.set(h)}),n.renderComponents.each(g=>{const h=g(d,s.get());(n.reuseDom?xE:NC)(i,h)})};return _s([je(hm(),(i,d)=>{const g=d;if(!g.universal){const h=n.channel;tt(g.channels,h)&&a(i,g.data)}}),vs((i,d)=>{n.initialData.each(g=>{a(i,g)})})])}}),JH=Object.freeze({__proto__:null,getState:(n,s,a)=>a}),ez=[ot("channel"),zo("renderComponents"),zo("updateState"),zo("initialData"),Wr("reuseDom",!0)],nz=Object.freeze({__proto__:null,init:()=>{const n=Zt(A.none()),s=()=>n.set(A.none());return{readState:()=>n.get().getOr("none"),get:n.get,set:n.set,clear:s}}});const Qi=ha({fields:ez,name:"reflecting",active:NM,apis:JH,state:nz}),MM=(n,s,a,i)=>{a.get().each(h=>{hE(n)});const d=s.getAttachPoint(n);Em(d,n);const g=n.getSystem().build(i);return Em(n,g),a.set(g),g},PM=(n,s,a,i)=>{const d=MM(n,s,a,i);return s.onOpen(n,d),d},BM=(n,s,a,i)=>a.get().map(()=>MM(n,s,a,i)),rT=(n,s,a,i,d)=>{XA(n,s),PM(n,s,a,i),d(),IM(n,s)},aT=(n,s,a)=>{a.get().each(i=>{hE(n),km(n),s.onClose(n,i),a.clear()})},cT=(n,s,a)=>a.isOpen(),oz=(n,s,a,i)=>cT(n,s,a)&&a.get().exists(d=>s.isPartOf(n,d,i)),sz=(n,s,a)=>a.get(),rz=(n,s,a,i)=>{ws(n.element,s).fold(()=>{ps(n.element,a)},d=>{Cn(n.element,a,d)}),Tn(n.element,s,i)},az=(n,s,a)=>{na(n.element,a).fold(()=>Jn(n.element,s),i=>Tn(n.element,s,i))},XA=(n,s,a)=>{const i=s.getAttachPoint(n);Tn(n.element,"position",Mc.getMode(i)),rz(n,"visibility",s.cloakVisibilityAttr,"hidden")},$M=n=>St(["top","left","right","bottom"],s=>ws(n,s).isSome()),IM=(n,s,a)=>{$M(n.element)||Jn(n.element,"position"),az(n,"visibility",s.cloakVisibilityAttr)};var cz=Object.freeze({__proto__:null,cloak:XA,decloak:IM,open:PM,openWhileCloaked:rT,close:aT,isOpen:cT,isPartOf:oz,getState:sz,setContent:BM}),iz=Object.freeze({__proto__:null,events:(n,s)=>_s([je(w0(),(a,i)=>{aT(a,n,s)})])}),lz=[xo("onOpen"),xo("onClose"),ot("isPartOf"),ot("getAttachPoint"),De("cloakVisibilityAttr","data-precloak-visibility")],LM=Object.freeze({__proto__:null,init:()=>{const n=kn(),s=se("not-implemented");return Si({readState:s,isOpen:n.isSet,clear:n.clear,set:n.set,get:n.get})}});const So=ha({fields:lz,name:"sandboxing",active:iz,apis:cz,state:LM}),cx=(n,s)=>s.getAnimationRoot.fold(()=>n.element,a=>a(n)),Yg=n=>n.dimension.property,gb=(n,s)=>n.dimension.getDimension(s),iT=(n,s)=>{const a=cx(n,s);fa(a,[s.shrinkingClass,s.growingClass])},Ff=(n,s)=>{Ms(n.element,s.openClass),Go(n.element,s.closedClass),Tn(n.element,Yg(s),"0px"),zi(n.element)},QA=(n,s)=>{Ms(n.element,s.closedClass),Go(n.element,s.openClass),Jn(n.element,Yg(s))},FM=(n,s,a,i)=>{a.setCollapsed(),Tn(n.element,Yg(s),gb(s,n.element)),iT(n,s),Ff(n,s),s.onStartShrink(n),s.onShrunk(n)},hb=(n,s,a,i)=>{const d=i.getOrThunk(()=>gb(s,n.element));a.setCollapsed(),Tn(n.element,Yg(s),d),zi(n.element);const g=cx(n,s);Ms(g,s.growingClass),Go(g,s.shrinkingClass),Ff(n,s),s.onStartShrink(n)},JA=(n,s,a)=>{const i=gb(s,n.element);(i==="0px"?FM:hb)(n,s,a,A.some(i))},HM=(n,s,a)=>{const i=cx(n,s),d=lr(i,s.shrinkingClass),g=gb(s,n.element);QA(n,s);const h=gb(s,n.element);(d?()=>{Tn(n.element,Yg(s),g),zi(n.element)}:()=>{Ff(n,s)})(),Ms(i,s.shrinkingClass),Go(i,s.growingClass),QA(n,s),Tn(n.element,Yg(s),h),a.setExpanded(),s.onStartGrow(n)},yp=(n,s,a)=>{if(a.isExpanded()){Jn(n.element,Yg(s));const i=gb(s,n.element);Tn(n.element,Yg(s),i)}},uz=(n,s,a)=>{a.isExpanded()||HM(n,s,a)},dz=(n,s,a)=>{a.isExpanded()&&JA(n,s,a)},Ku=(n,s,a)=>{a.isExpanded()&&FM(n,s,a)},zM=(n,s,a)=>a.isExpanded(),VM=(n,s,a)=>a.isCollapsed(),e_=(n,s,a)=>{const i=cx(n,s);return lr(i,s.growingClass)===!0},UM=(n,s,a)=>{const i=cx(n,s);return lr(i,s.shrinkingClass)===!0};var fz=Object.freeze({__proto__:null,refresh:yp,grow:uz,shrink:dz,immediateShrink:Ku,hasGrown:zM,hasShrunk:VM,isGrowing:e_,isShrinking:UM,isTransitioning:(n,s,a)=>e_(n,s)||UM(n,s),toggleGrow:(n,s,a)=>{(a.isExpanded()?JA:HM)(n,s,a)},disableTransitions:iT,immediateGrow:(n,s,a)=>{a.isExpanded()||(QA(n,s),Tn(n.element,Yg(s),gb(s,n.element)),iT(n,s),a.setExpanded(),s.onStartGrow(n),s.onGrown(n))}}),WM=Object.freeze({__proto__:null,exhibit:(n,s,a)=>{const i=s.expanded;return ju(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:pf(s.dimension.property,"0px")})},events:(n,s)=>_s([op(C0(),(a,i)=>{i.event.raw.propertyName===n.dimension.property&&(iT(a,n),s.isExpanded()&&Jn(a.element,n.dimension.property),(s.isExpanded()?n.onGrown:n.onShrunk)(a))})])}),ZM=[ot("closedClass"),ot("openClass"),ot("shrinkingClass"),ot("growingClass"),zo("getAnimationRoot"),xo("onShrunk"),xo("onStartShrink"),xo("onGrown"),xo("onStartGrow"),De("expanded",!1),Gc("dimension",Ec("property",{width:[Po("property","width"),Po("getDimension",n=>ma(n)+"px")],height:[Po("property","height"),Po("getDimension",n=>yr(n)+"px")]}))],hz=Object.freeze({__proto__:null,init:n=>{const s=Zt(n.expanded),a=()=>"expanded: "+s.get();return Si({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:Yt(s.set,!1),setExpanded:Yt(s.set,!0),readState:a})}});const Jc=ha({fields:ZM,name:"sliding",active:WM,apis:fz,state:hz});var bz=Object.freeze({__proto__:null,events:(n,s)=>{const i=n.stream.streams.setup(n,s);return _s([je(n.event,i),au(()=>s.cancel())].concat(n.cancelEvent.map(d=>[je(d,()=>s.cancel())]).getOr([])))}});const GM=n=>{const s=Zt(null);return Si({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var o_=Object.freeze({__proto__:null,throttle:GM,init:n=>n.stream.streams.state(n)});const vz=(n,s)=>{const a=n.stream,i=tc(n.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var ix=[Gc("stream",Ec("mode",{throttle:[ot("delay"),De("stopEvent",!0),Po("streams",{setup:vz,state:GM})]})),De("event","input"),zo("cancelEvent"),vf("onStream")];const jv=ha({fields:ix,name:"streaming",active:bz,state:o_});var qM=Object.freeze({__proto__:null,exhibit:(n,s)=>ju({attributes:Lh([{key:s.tabAttr,value:"true"}])})}),Cz=[De("tabAttr","data-alloy-tabstop")];const ms=ha({fields:Cz,name:"tabstopping",active:qM}),xz=(n,s,a)=>{const i=s.aria;i.update(n,i,a.get())},Sz=(n,s,a)=>{s.toggleClass.each(i=>{a.get()?Go(n.element,i):Ms(n.element,i)})},pb=(n,s,a,i)=>{const d=a.get();a.set(i),Sz(n,s,a),xz(n,s,a),d!==i&&s.onToggled(n,i)},s_=(n,s,a)=>{pb(n,s,a,!a.get())},KM=(n,s,a)=>{pb(n,s,a,!0)},r_=(n,s,a)=>{pb(n,s,a,!1)},wz=(n,s,a)=>a.get(),a_=(n,s,a)=>{pb(n,s,a,s.selected)};var Ez=Object.freeze({__proto__:null,onLoad:a_,toggle:s_,isOn:wz,on:KM,off:r_,set:pb}),YM=Object.freeze({__proto__:null,exhibit:()=>ju({}),events:(n,s)=>{const a=Ew(n,s,s_),i=Q2(n,s,a_);return _s(hn([n.toggleOnExecute?[a]:[],[i]]))}});const Tz=(n,s,a)=>{Cn(n.element,"aria-pressed",a),s.syncWithExpanded&&i_(n,s,a)},kz=(n,s,a)=>{Cn(n.element,"aria-selected",a)},c_=(n,s,a)=>{Cn(n.element,"aria-checked",a)},i_=(n,s,a)=>{Cn(n.element,"aria-expanded",a)};var XM=[De("selected",!1),zo("toggleClass"),De("toggleOnExecute",!0),xo("onToggled"),Zi("aria",{mode:"none"},Ec("mode",{pressed:[De("syncWithExpanded",!1),Po("update",Tz)],checked:[Po("update",c_)],expanded:[Po("update",i_)],selected:[Po("update",kz)],none:[Po("update",V)]}))];const so=ha({fields:XM,name:"toggling",active:YM,apis:Ez,state:Aw(!1)}),lT=Mt("tooltip.exclusive"),lx=Mt("tooltip.show"),ux=Mt("tooltip.hide"),dx=Mt("tooltip.immediateHide"),mx=Mt("tooltip.immediateShow"),QM=(n,s,a)=>{n.getSystem().broadcastOn([lT],{})};var _z=Object.freeze({__proto__:null,hideAllExclusive:QM,immediateOpenClose:(n,s,a,i)=>Yn(n,i?mx:dx),isEnabled:(n,s,a)=>a.isEnabled(),setComponents:(n,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&Bn.set(d,i)})},setEnabled:(n,s,a,i)=>a.setEnabled(i)}),Oz=Object.freeze({__proto__:null,events:(n,s)=>{const a=h=>{s.getTooltip().each(C=>{C.getSystem().isConnected()&&(km(C),n.onHide(h,C),s.clearTooltip())}),s.clearTimer()},i=h=>{if(!s.isShowing()&&s.isEnabled()){QM(h);const C=n.lazySink(h).getOrDie(),x=h.getSystem().build({dom:n.tooltipDom,components:n.tooltipComponents,events:_s(n.mode==="normal"?[je(Gi(),T=>{Yn(h,lx)}),je($r(),T=>{Yn(h,ux)})]:[]),behaviours:mt([Bn.config({})])});s.setTooltip(x),Em(C,x),n.onShow(h,x),Mc.position(C,x,{anchor:n.anchor(h)})}},d=h=>{s.getTooltip().each(C=>{const x=n.lazySink(h).getOrDie();Mc.position(x,C,{anchor:n.anchor(h)})})},g=()=>{switch(n.mode){case"normal":return[je(tu(),h=>{Yn(h,mx)}),je(zh(),h=>{Yn(h,dx)}),je(Gi(),h=>{Yn(h,lx)}),je($r(),h=>{Yn(h,ux)})];case"follow-highlight":return[je(A0(),(h,C)=>{Yn(h,lx)}),je(_0(),h=>{Yn(h,ux)})];case"children-normal":return[je(tu(),(h,C)=>{ar(h.element).each(x=>{Zo(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Yn(h,mx)},T=>{s.isShowing()&&(n.onShow(h,T),d(h))})})}),je(zh(),h=>{ar(h.element).fold(()=>{Yn(h,dx)},V)}),je(Gi(),h=>{Io(h.element,"[data-mce-tooltip]:hover").each(C=>{s.getTooltip().fold(()=>{Yn(h,lx)},x=>{s.isShowing()&&(n.onShow(h,x),d(h))})})}),je($r(),h=>{Io(h.element,"[data-mce-tooltip]:hover").fold(()=>{Yn(h,ux)},V)})];default:return[je(tu(),(h,C)=>{ar(h.element).each(x=>{Zo(C.event.target,"[data-mce-tooltip]")&&s.getTooltip().fold(()=>{Yn(h,mx)},T=>{s.isShowing()&&(n.onShow(h,T),d(h))})})}),je(zh(),h=>{ar(h.element).fold(()=>{Yn(h,dx)},V)})]}};return _s(hn([[X2(h=>{n.onSetup(h)}),je(lx,h=>{s.resetTimer(()=>{i(h)},n.delayForShow())}),je(ux,h=>{s.resetTimer(()=>{a(h)},n.delayForHide())}),je(mx,h=>{s.resetTimer(()=>{i(h)},0)}),je(dx,h=>{s.resetTimer(()=>{a(h)},0)}),je(hm(),(h,C)=>{const x=C;x.universal||(tt(x.channels,lT)||tt(x.channels,ap()))&&(x.data.closedTooltip&&s.isShowing()&&x.data.closedTooltip(),a(h))}),au(h=>{a(h)})],g()]))}}),Dz=[ot("lazySink"),ot("tooltipDom"),De("exclusive",!0),De("tooltipComponents",[]),us("delayForShow",se(300)),us("delayForHide",se(100)),us("onSetup",V),kc("mode","normal",["normal","follow-highlight","children-keyboard-focus","children-normal"]),De("anchor",n=>({type:"hotspot",hotspot:n,layouts:{onLtr:se([Or,Ps,Ir,Oa,_r,ga]),onRtl:se([Or,Ps,Ir,Oa,_r,ga])},bubble:xi(0,-2,{})})),xo("onHide"),xo("onShow")],Rz=Object.freeze({__proto__:null,init:()=>{const n=Zt(!0),s=kn(),a=kn(),i=()=>{s.on(clearTimeout)},d=(h,C)=>{i(),s.set(setTimeout(h,C))},g=se("not-implemented");return Si({getTooltip:a.get,isShowing:a.isSet,setTooltip:a.set,clearTooltip:a.clear,clearTimer:i,resetTimer:d,readState:g,isEnabled:()=>n.get(),setEnabled:h=>n.set(h)})}});const ys=ha({fields:Dz,name:"tooltipping",active:Oz,state:Rz,apis:_z});var u_=Object.freeze({__proto__:null,events:()=>_s([J0(w1(),_t)]),exhibit:()=>ju({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const Nm=ha({fields:[],name:"unselecting",active:u_}),Nz=n=>{const s=n.dom.attributes!==void 0?n.dom.attributes:[];return Tt(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},Mz=n=>Array.prototype.slice.call(n.dom.classList,0),Mm=n=>{const s=ht.fromHtml(n),a=ul(s),i=Nz(s),d=Mz(s),g=a.length===0?{}:{innerHtml:Zl(s)};return{tag:$i(s),classes:d,attributes:i,...g}},_o=n=>{const s=Q7(n)&&qn(n,"uid")?n.uid:fp("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...n,uid:s})}},pa=Dg,mu=I0,Pz=(n,s)=>{const a=Zt(!1),i=Zt(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:n,setSource:s.set,getSource:s.get}},eP=n=>{const s=Zt(!1);return{stop:()=>{s.set(!0)},cut:V,isStopped:s.get,isCut:dn,event:n,setSource:ce("Cannot set source of a broadcasted event"),getSource:ce("Cannot get source of a broadcasted event")}},tP=n=>n.raw.which===sC[0]&&!tt(["input","textarea"],$i(n.target))&&!gg(n.target,'[contenteditable="true"]'),nP=(n,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=a3(a),g=pe(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),j=>Mo(n,j,Z=>{d.fireIfReady(Z,j).each(le=>{le&&Z.kill()}),a.triggerEvent(j,Z)&&Z.kill()})),h=kn(),C=Mo(n,"paste",j=>{d.fireIfReady(j,"paste").each(oe=>{oe&&j.kill()}),a.triggerEvent("paste",j)&&j.kill(),h.set(setTimeout(()=>{a.triggerEvent(x0(),j)},0))}),x=Mo(n,"keydown",j=>{a.triggerEvent("keydown",j)?j.kill():a.stopBackspace&&tP(j)&&j.prevent()}),T=Mo(n,"focusin",j=>{a.triggerEvent("focusin",j)&&j.kill()}),_=kn(),N=Mo(n,"focusout",j=>{a.triggerEvent("focusout",j)&&j.kill(),_.set(setTimeout(()=>{a.triggerEvent(zh(),j)},0))});return{unbind:()=>{Te(g,j=>{j.unbind()}),x.unbind(),T.unbind(),N.unbind(),C.unbind(),h.on(clearTimeout),_.on(clearTimeout)}}},Hf=(n,s)=>{const a=en(n,"target").getOr(s);return Zt(a)},Yu=Ia.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),d_=(n,s,a,i,d,g)=>{const h=n(s,i),C=Pz(a,d);return h.fold(()=>(g.logEventNoHandlers(s,i),Yu.complete()),x=>{const T=x.descHandler;return _v(T)(C),C.isStopped()?(g.logEventStopped(s,x.element,T.purpose),Yu.stopped()):C.isCut()?(g.logEventCut(s,x.element,T.purpose),Yu.complete()):vc(x.element).fold(()=>(g.logNoParent(s,x.element,T.purpose),Yu.complete()),N=>(g.logEventResponse(s,x.element,T.purpose),Yu.resume(N)))})},bb=(n,s,a,i,d,g)=>d_(n,s,a,i,d,g).fold(_t,h=>bb(n,s,a,h,d,g),dn),Bz=(n,s,a,i,d)=>{const g=Hf(a,i);return d_(n,s,a,i,g,d)},m_=(n,s,a)=>{const i=eP(s);return Te(n,d=>{const g=d.descHandler;_v(g)(i)}),i.isStopped()},oP=(n,s,a,i)=>uT(n,s,a,a.target,i),uT=(n,s,a,i,d)=>{const g=Hf(a,i);return bb(n,s,a,i,g,d)},dT=(n,s)=>({element:n,descHandler:s}),sP=(n,s)=>({id:n,descHandler:s}),Xu=()=>{const n={},s=(h,C,x)=>{gs(x,(T,_)=>{const N=n[_]!==void 0?n[_]:{};N[C]=iA(T,h),n[_]=N})},a=(h,C)=>Wu(C).bind(x=>en(h,x)).map(x=>dT(C,x));return{registerId:s,unregisterId:h=>{gs(n,(C,x)=>{ho(C,h)&&delete C[h]})},filterByType:h=>en(n,h).map(C=>is(C,(x,T)=>sP(T,x))).getOr([]),find:(h,C,x)=>en(n,C).bind(T=>Ui(x,_=>a(T,_),h))}},f_=()=>{const n=Xu(),s={},a=T=>{const _=T.element;return Wu(_).getOrThunk(()=>IC("uid-",T.element))},i=(T,_)=>{const N=s[_];if(N===T)g(T);else throw new Error('The tagId "'+_+'" is already used by: '+Lu(N.element)+`
Cannot use it for: `+Lu(T.element)+`
The conflicting element is`+(yo(N.element)?" ":" not ")+"already in the DOM")},d=T=>{const _=a(T);qn(s,_)&&i(T,_);const N=[T];n.registerId(N,_,T.events),s[_]=T},g=T=>{Wu(T.element).each(_=>{delete s[_],n.unregisterId(_)})};return{find:(T,_,N)=>n.find(T,_,N),filter:T=>n.filterByType(T),register:d,unregister:g,getById:T=>en(s,T)}},g_=n=>{const s=Q=>vc(n.element).fold(_t,me=>L(Q,me)),a=f_(),i=(Q,me)=>a.find(s,Q,me),d=nP(n.element,{triggerEvent:(Q,me)=>D2(Q,me.target,ve=>oP(i,Q,me,ve))}),g={debugInfo:se("real"),triggerEvent:(Q,me,ve)=>{D2(Q,me,Re=>uT(i,Q,ve,me,Re))},triggerFocus:(Q,me)=>{Wu(Q).fold(()=>{Hr(Q)},ve=>{D2(gm(),Q,Re=>(Bz(i,gm(),{originator:me,kill:V,prevent:V,target:Q},Q,Re),!1))})},triggerEscape:(Q,me)=>{g.triggerEvent("keydown",Q.element,me.event)},getByUid:Q=>oe(Q),getByDom:Q=>le(Q),build:p,buildOrPatch:m,addToGui:Q=>{x(Q)},removeFromGui:Q=>{T(Q)},addToWorld:Q=>{h(Q)},removeFromWorld:Q=>{C(Q)},broadcast:Q=>{H(Q)},broadcastOn:(Q,me)=>{j(Q,me)},broadcastEvent:(Q,me)=>{Z(Q,me)},isConnected:_t},h=Q=>{Q.connect(g),hd(Q.element)||(a.register(Q),Te(Q.components(),h),g.triggerEvent(E1(),Q.element,{target:Q.element}))},C=Q=>{hd(Q.element)||(Te(Q.components(),C),a.unregister(Q)),Q.disconnect()},x=Q=>{Em(n,Q)},T=Q=>{km(Q)},_=()=>{d.unbind(),ui(n.element)},N=Q=>{const me=a.filter(hm());Te(me,ve=>{const Re=ve.descHandler;_v(Re)(Q)})},H=Q=>{N({universal:!0,data:Q})},j=(Q,me)=>{N({universal:!1,channels:Q,data:me})},Z=(Q,me)=>{const ve=a.filter(Q);return m_(ve,me)},oe=Q=>a.getById(Q).fold(()=>rn.error(new Error('Could not find component with uid: "'+Q+'" in system.')),rn.value),le=Q=>{const me=Wu(Q).getOr("not found");return oe(me)};return h(n),{root:n,element:n.element,destroy:_,add:x,remove:T,getByUid:oe,getByDom:le,addToWorld:h,removeFromWorld:C,broadcast:H,broadcastOn:j,broadcastEvent:Z}},rP=()=>{const n=(s,a)=>{a.stop(),ep(s)};return[je(wg(),n),je(Vh(),n),Ig(vi()),Ig(Yc())]},h_=n=>{const s=a=>Af((i,d)=>{a(i),d.stop()});return _s(hn([n.map(s).toArray(),rP()]))},ca=uu({name:"Button",factory:n=>{const s=h_(n.action),a=n.dom.tag,i=g=>en(n.dom,"attributes").bind(h=>en(h,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),h=i("role").map(C=>({role:C})).getOr({});return{type:g,...h}}else return{role:n.role.getOr(i("role").getOr("button"))}};return{uid:n.uid,dom:n.dom,components:n.components,events:s,behaviours:Fd.augment(n.buttonBehaviours,[Nn.config({}),mn.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:n.eventOrder}},configFields:[De("uid",void 0),ot("dom"),De("components",[]),Fd.field("buttonBehaviours",[Nn,mn]),zo("action"),zo("role"),De("eventOrder",{})]}),$z=se([De("shell",!1),ot("makeItem"),De("setupItem",V),Fd.field("listBehaviours",[Bn])]),p_=_c({name:"items",overrides:()=>({behaviours:mt([Bn.config({})])})}),Lz=se([p_]),b_=se("CustomList"),v_=(n,s,a,i)=>{const d=(C,x)=>{h(C).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},T=>{const _=Bn.contents(T),N=x.length,H=N-_.length,j=H>0?wt(H,()=>n.makeItem()):[],Z=_.slice(N);Te(Z,le=>Bn.remove(T,le)),Te(j,le=>Bn.append(T,le));const oe=Bn.contents(T);Te(oe,(le,Q)=>{n.setupItem(C,le,x[Q],Q)})})},g=n.shell?{behaviours:[Bn.config({})],components:[]}:{behaviours:[],components:s},h=C=>n.shell?A.some(C):ns(C,n,"items");return{uid:n.uid,dom:n.dom,components:g.components,behaviours:lc(n.listBehaviours,g.behaviours),apis:{setItems:d}}},aP=wi({name:b_(),configFields:$z(),partFields:Lz(),factory:v_,apis:{setItems:(n,s,a)=>{n.setItems(s,a)}}}),Wv="aria-controls",cP=n=>rf(n,a=>{if(!pc(a))return!1;const i=Pr(a,"id");return i!==void 0&&i.indexOf(Wv)>-1}).bind(a=>{const i=Pr(a,"id"),d=pr(a);return Io(d,`[${Wv}="${i}"]`)}),iP=()=>{const n=Mt(Wv);return{id:n,link:i=>{Cn(i,Wv,n)},unlink:i=>{ps(i,Wv)}}},lP=(n,s)=>cP(s).exists(a=>Cp(n,a)),Cp=(n,s)=>wh(s,a=>L(a,n.element),dn)||lP(n,s),uP="alloy.item-hover",dP="alloy.item-focus",mP="alloy.item-toggled",fP=n=>{(ar(n.element).isNone()||Nn.isFocused(n))&&(Nn.isFocused(n)||Nn.focus(n),pn(n,uP,{item:n}))},gP=n=>{pn(n,dP,{item:n})},hP=(n,s)=>{pn(n,mP,{item:n,state:s})},y_=se(uP),Fz=se(dP),pP=se(mP),bP=n=>n.role.fold(()=>n.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),nn),Hz=(n,s)=>({aria:{mode:s?"selected":"checked"},...hr(n,(a,i)=>i!=="exclusive"),onToggled:(a,i)=>{qe(n.onToggled)&&n.onToggled(a,i),hP(a,i)}}),zz=n=>({dom:n.dom,domModification:{...n.domModification,attributes:{role:bP(n),...n.domModification.attributes,"aria-haspopup":n.hasSubmenu,...n.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Fd.augment(n.itemBehaviours,[n.toggling.fold(so.revoke,s=>so.config(Hz(s,n.role.exists(a=>a==="option")))),Nn.config({ignore:n.ignoreFocus,stopMousedown:n.ignoreFocus,onFocus:s=>{gP(s)}}),mn.config({mode:"execution"}),Ft.config({store:{mode:"memory",initialValue:n.data}}),On("item-type-events",[...rP(),je(Gi(),fP),je(Eg(),Nn.focus)])]),components:n.components,eventOrder:n.eventOrder});var C_=[ot("data"),ot("components"),ot("dom"),De("hasSubmenu",!1),zo("toggling"),zo("role"),Fd.field("itemBehaviours",[so,Nn,mn,Ft]),De("ignoreFocus",!1),De("domModification",{}),Po("builder",zz),De("eventOrder",{})];const vP=n=>({dom:n.dom,components:n.components,events:_s([b3(Eg())])});var yP=[ot("dom"),ot("components"),Po("builder",vP)];const x_=se("item-widget"),S_=se([ac({name:"widget",overrides:n=>({behaviours:mt([Ft.config({store:{mode:"manual",getValue:s=>n.data,setValue:V}})])})})]),CP=n=>{const s=Xc(x_(),n,S_()),a=L0(x_(),n,s.internals()),i=g=>ns(g,n,"widget").map(h=>(mn.focusIn(h),h)),d=(g,h)=>ip(h.event.target)?A.none():(n.autofocus&&h.setSource(g.element),A.none());return{dom:n.dom,components:a,domModification:n.domModification,events:_s([Af((g,h)=>{i(g).each(C=>{h.stop()})}),je(Gi(),fP),je(Eg(),(g,h)=>{n.autofocus?i(g):Nn.focus(g)})]),behaviours:Fd.augment(n.widgetBehaviours,[Ft.config({store:{mode:"memory",initialValue:n.data}}),Nn.config({ignore:n.ignoreFocus,onFocus:g=>{gP(g)}}),mn.config({mode:"special",focusIn:n.autofocus?g=>{i(g)}:oC(),onLeft:d,onRight:d,onEscape:(g,h)=>!Nn.isFocused(g)&&!n.autofocus?(Nn.focus(g),A.some(!0)):(n.autofocus&&h.setSource(g.element),A.none())})])}};var w_=[ot("uid"),ot("data"),ot("components"),ot("dom"),De("autofocus",!1),De("ignoreFocus",!1),Fd.field("widgetBehaviours",[Ft,Nn,mn]),De("domModification",{}),ym(S_()),Po("builder",CP)];const SP=Ec("type",{widget:w_,item:C_,separator:yP}),wP=(n,s)=>({mode:"flatgrid",selector:"."+n.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:n.focusManager}),EP=(n,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+n.markers.item},previousSelector:s.previousSelector,focusManager:n.focusManager}),jz=(n,s)=>({mode:"menu",selector:"."+n.markers.item,moveOnTab:s.moveOnTab,focusManager:n.focusManager}),E_=se([$0({factory:{sketch:n=>{const s=wc("menu.spec item",SP,n);return s.builder(s)}},name:"items",unit:"item",defaults:(n,s)=>ho(s,"uid")?s:{...s,uid:fp("item")},overrides:(n,s)=>({type:s.type,ignoreFocus:n.fakeFocus,domModification:{classes:[n.markers.item]}})})]),Wz=se([Qs("role"),ot("value"),ot("items"),ot("dom"),ot("components"),De("eventOrder",{}),Ra("menuBehaviours",[Eo,Ft,We,mn]),Zi("movement",{mode:"menu",moveOnTab:!0},Ec("mode",{grid:[iw(),Po("config",wP)],matrix:[Po("config",EP),ot("rowSelector"),De("previousSelector",A.none)],menu:[De("moveOnTab",!0),Po("config",jz)]})),R2(),De("fakeFocus",!1),De("focusManager",lC()),xo("onHighlight"),xo("onDehighlight"),De("showMenuRole",!0)]),T_=se("alloy.menu-focus"),TP=(n,s)=>{const a=Ur(n.element,'[role="menuitemradio"][aria-checked="true"]');Te(a,i=>{L(i,s.element)||n.getSystem().getByDom(i).each(d=>{so.off(d)})})},vb=(n,s,a,i)=>({uid:n.uid,dom:n.dom,markers:n.markers,behaviours:lc(n.menuBehaviours,[Eo.config({highlightClass:n.markers.selectedItem,itemClass:n.markers.item,onHighlight:n.onHighlight,onDehighlight:n.onDehighlight}),Ft.config({store:{mode:"memory",initialValue:n.value}}),We.config({find:A.some}),mn.config(n.movement.config(n,n.movement))]),events:_s([je(Fz(),(d,g)=>{const h=g.event;d.getSystem().getByDom(h.target).each(C=>{Eo.highlight(d,C),g.stop(),pn(d,T_(),{menu:d,item:C})})}),je(y_(),(d,g)=>{const h=g.event.item;Eo.highlight(d,h)}),je(pP(),(d,g)=>{const{item:h,state:C}=g.event;C&&Pr(h.element,"role")==="menuitemradio"&&TP(d,h)})]),components:s,eventOrder:n.eventOrder,...n.showMenuRole?{domModification:{attributes:{role:n.role.getOr("menu")}}}:{}}),Xg=wi({name:"Menu",configFields:Wz(),partFields:E_(),factory:vb}),k_=n=>Su(n,(s,a)=>({k:s,v:a})),fx=(n,s,a,i)=>en(a,i).bind(d=>en(n,d).bind(g=>{const h=fx(n,s,a,g);return A.some([g].concat(h))})).getOr([]),Zz=(n,s)=>{const a={};gs(n,(h,C)=>{Te(h,x=>{a[x]=C})});const i=s,d=k_(s),g=Ls(d,(h,C)=>[C].concat(fx(a,i,d,C)));return Ls(a,h=>en(g,h).getOr([h]))},kP=()=>{const n=Zt({}),s=Zt({}),a=Zt({}),i=kn(),d=Zt({}),g=()=>{n.set({}),s.set({}),a.set({}),i.clear()},h=()=>i.get().isNone(),C=(Ie,Et)=>{s.set({...s.get(),[Ie]:{type:"prepared",menu:Et}})},x=(Ie,Et,Je,ct)=>{i.set(Ie),n.set(Je),s.set(Et),d.set(ct);const at=Zz(ct,Je);a.set(at)},T=Ie=>dc(n.get(),(Et,Je)=>Et===Ie),_=(Ie,Et,Je)=>oe(Ie).bind(ct=>T(Ie).bind(at=>Et(at).map(fn=>({triggeredMenu:ct,triggeringItem:fn,triggeringPath:Je})))),N=(Ie,Et)=>{const Je=sn(Q(Ie).toArray(),ct=>oe(ct).isSome());return en(a.get(),Ie).bind(ct=>{const at=gt(Je.concat(ct)),fn=Ae(at,(Jt,Kn)=>_(Jt,Et,at.slice(0,Kn+1)).fold(()=>gc(i.get(),Jt)?[]:[A.none()],gn=>[A.some(gn)]));return md(fn)})},H=Ie=>en(n.get(),Ie).map(Et=>{const Je=en(a.get(),Ie).getOr([]);return[Et].concat(Je)}),j=Ie=>en(a.get(),Ie).bind(Et=>Et.length>1?A.some(Et.slice(1)):A.none()),Z=Ie=>en(a.get(),Ie),oe=Ie=>le(Ie).bind(A_),le=Ie=>en(s.get(),Ie),Q=Ie=>en(n.get(),Ie);return{setMenuBuilt:C,setContents:x,expand:H,refresh:Z,collapse:j,lookupMenu:le,lookupItem:Q,otherMenus:Ie=>{const Et=d.get();return Xe(wo(Et),Ie)},getPrimary:()=>i.get().bind(oe),getMenus:()=>s.get(),clear:g,isClear:h,getTriggeringPath:N}},A_=n=>n.type==="prepared"?A.some(n.menu):A.none(),__={init:kP,extractPreparedMenu:A_},mT=Mt("tiered-menu-item-highlight"),O_=Mt("tiered-menu-item-dehighlight"),Gz=(n,s)=>{const a=kn(),i=(Qe,pt,Sn)=>Ls(Sn,(zn,ln)=>{const Fn=()=>Xg.sketch({...zn,value:ln,markers:n.markers,fakeFocus:n.fakeFocus,onHighlight:(es,Oo)=>{pn(es,mT,{menuComp:es,itemComp:Oo})},onDehighlight:(es,Oo)=>{pn(es,O_,{menuComp:es,itemComp:Oo})},focusManager:n.fakeFocus?sv():lC()});return ln===pt?{type:"prepared",menu:Qe.getSystem().build(Fn())}:{type:"notbuilt",nbMenu:Fn}}),d=__.init(),g=Qe=>{const pt=i(Qe,n.data.primary,n.data.menus),Sn=x();return d.setContents(n.data.primary,pt,n.data.expansions,Sn),d.getPrimary()},h=Qe=>Ft.getValue(Qe).value,C=(Qe,pt,Sn)=>va(pt,zn=>{if(!zn.getSystem().isConnected())return A.none();const ln=Eo.getCandidates(zn);return Wt(ln,Fn=>h(Fn)===Sn)}),x=Qe=>Ls(n.data.menus,(pt,Sn)=>Ae(pt.items,zn=>zn.type==="separator"?[]:[zn.data.value])),T=Eo.highlight,_=(Qe,pt)=>{T(Qe,pt),Eo.getHighlighted(pt).orThunk(()=>Eo.getFirst(pt)).each(Sn=>{n.fakeFocus?Eo.highlight(pt,Sn):X0(Qe,Sn.element,Eg())})},N=(Qe,pt)=>Ri(pe(pt,Sn=>Qe.lookupMenu(Sn).bind(zn=>zn.type==="prepared"?A.some(zn.menu):A.none()))),H=(Qe,pt,Sn)=>{const zn=N(pt,pt.otherMenus(Sn));Te(zn,ln=>{fa(ln.element,[n.markers.backgroundMenu]),n.stayInDom||Bn.remove(Qe,ln)})},j=Qe=>a.get().getOrThunk(()=>{const pt={},Sn=Ur(Qe.element,`.${n.markers.item}`),zn=sn(Sn,ln=>Pr(ln,"aria-haspopup")==="true");return Te(zn,ln=>{Qe.getSystem().getByDom(ln).each(Fn=>{const es=h(Fn);pt[es]=Fn})}),a.set(pt),pt}),Z=(Qe,pt)=>{const Sn=j(Qe);gs(Sn,(zn,ln)=>{const Fn=tt(pt,ln);Cn(zn.element,"aria-expanded",Fn)})},oe=(Qe,pt,Sn)=>A.from(Sn[0]).bind(zn=>pt.lookupMenu(zn).bind(ln=>{if(ln.type==="notbuilt")return A.none();{const Fn=ln.menu,es=N(pt,Sn.slice(1));return Te(es,Oo=>{Go(Oo.element,n.markers.backgroundMenu)}),yo(Fn.element)||Bn.append(Qe,y(Fn)),fa(Fn.element,[n.markers.backgroundMenu]),_(Qe,Fn),H(Qe,pt,Sn),A.some(Fn)}}));let le;(function(Qe){Qe[Qe.HighlightSubmenu=0]="HighlightSubmenu",Qe[Qe.HighlightParent=1]="HighlightParent"})(le||(le={}));const Q=(Qe,pt,Sn)=>{if(Sn.type==="notbuilt"){const zn=Qe.getSystem().build(Sn.nbMenu());return d.setMenuBuilt(pt,zn),zn}else return Sn.menu},me=(Qe,pt,Sn=le.HighlightSubmenu)=>{if(pt.hasConfigured(Xt)&&Xt.isDisabled(pt))return A.some(pt);{const zn=h(pt);return d.expand(zn).bind(ln=>(Z(Qe,ln),A.from(ln[0]).bind(Fn=>d.lookupMenu(Fn).bind(es=>{const Oo=Q(Qe,Fn,es);return yo(Oo.element)||Bn.append(Qe,y(Oo)),n.onOpenSubmenu(Qe,pt,Oo,gt(ln)),Sn===le.HighlightSubmenu?(Eo.highlightFirst(Oo),oe(Qe,d,ln)):(Eo.dehighlightAll(Oo),A.some(pt))}))))}},ve=(Qe,pt)=>{const Sn=h(pt);return d.collapse(Sn).bind(zn=>(Z(Qe,zn),oe(Qe,d,zn).map(ln=>(n.onCollapseMenu(Qe,pt,ln),ln))))},Re=(Qe,pt)=>{const Sn=h(pt);return d.refresh(Sn).bind(zn=>(Z(Qe,zn),oe(Qe,d,zn)))},Ie=(Qe,pt)=>ip(pt.element)?A.none():me(Qe,pt,le.HighlightSubmenu),Et=(Qe,pt)=>ip(pt.element)?A.none():ve(Qe,pt),Je=(Qe,pt)=>ve(Qe,pt).orThunk(()=>n.onEscape(Qe,pt).map(()=>Qe)),ct=Qe=>(pt,Sn)=>Ta(Sn.getSource(),`.${n.markers.item}`).bind(zn=>pt.getSystem().getByDom(zn).toOptional().bind(ln=>Qe(pt,ln).map(_t))),at=_s([je(T_(),(Qe,pt)=>{const Sn=pt.event.item;d.lookupItem(h(Sn)).each(()=>{const zn=pt.event.menu;Eo.highlight(Qe,zn);const ln=h(pt.event.item);d.refresh(ln).each(Fn=>H(Qe,d,Fn))})}),Af((Qe,pt)=>{const Sn=pt.event.target;Qe.getSystem().getByDom(Sn).each(zn=>{h(zn).indexOf("collapse-item")===0&&ve(Qe,zn),me(Qe,zn,le.HighlightSubmenu).fold(()=>{n.onExecute(Qe,zn)},V)})}),vs((Qe,pt)=>{g(Qe).each(Sn=>{Bn.append(Qe,y(Sn)),n.onOpenMenu(Qe,Sn),n.highlightOnOpen===ja.HighlightMenuAndItem?_(Qe,Sn):n.highlightOnOpen===ja.HighlightJustMenu&&T(Qe,Sn)})}),je(mT,(Qe,pt)=>{n.onHighlightItem(Qe,pt.event.menuComp,pt.event.itemComp)}),je(O_,(Qe,pt)=>{n.onDehighlightItem(Qe,pt.event.menuComp,pt.event.itemComp)}),...n.navigateOnHover?[je(y_(),(Qe,pt)=>{const Sn=pt.event.item;Re(Qe,Sn),me(Qe,Sn,le.HighlightParent),n.onHover(Qe,Sn)})]:[]]),fn=Qe=>Eo.getHighlighted(Qe).bind(Eo.getHighlighted),Jt=Qe=>{fn(Qe).each(pt=>{ve(Qe,pt)})},Kn=Qe=>{d.getPrimary().each(pt=>{_(Qe,pt)})},gn=Qe=>A.from(Qe.components()[0]).filter(pt=>Pr(pt.element,"role")==="menu"),tn={collapseMenu:Jt,highlightPrimary:Kn,repositionMenus:Qe=>{d.getPrimary().bind(Sn=>fn(Qe).bind(zn=>{const ln=h(zn),Fn=Ja(d.getMenus()),es=Ri(pe(Fn,__.extractPreparedMenu));return d.getTriggeringPath(ln,Oo=>C(Qe,es,Oo))}).map(zn=>({primary:Sn,triggeringPath:zn}))).fold(()=>{gn(Qe).each(Sn=>{n.onRepositionMenu(Qe,Sn,[])})},({primary:Sn,triggeringPath:zn})=>{n.onRepositionMenu(Qe,Sn,zn)})}};return{uid:n.uid,dom:n.dom,markers:n.markers,behaviours:lc(n.tmenuBehaviours,[mn.config({mode:"special",onRight:ct(Ie),onLeft:ct(Et),onEscape:ct(Je),focusIn:(Qe,pt)=>{d.getPrimary().each(Sn=>{X0(Qe,Sn.element,Eg())})}}),Eo.config({highlightClass:n.markers.selectedMenu,itemClass:n.markers.menu}),We.config({find:Qe=>Eo.getHighlighted(Qe)}),Bn.config({})]),eventOrder:n.eventOrder,apis:tn,events:at}},AP=se("collapse-item"),_P=(n,s,a)=>({primary:n,menus:s,expansions:a}),OP=(n,s)=>({primary:n,menus:pf(n,s),expansions:{}}),DP=n=>({value:Mt(AP()),meta:{text:n}}),yb=uu({name:"TieredMenu",configFields:[A1("onExecute"),A1("onEscape"),vf("onOpenMenu"),vf("onOpenSubmenu"),xo("onRepositionMenu"),xo("onCollapseMenu"),De("highlightOnOpen",ja.HighlightMenuAndItem),Td("data",[ot("primary"),ot("menus"),ot("expansions")]),De("fakeFocus",!1),xo("onHighlightItem"),xo("onDehighlightItem"),xo("onHover"),aw(),ot("dom"),De("navigateOnHover",!0),De("stayInDom",!1),Ra("tmenuBehaviours",[mn,Eo,We,Bn]),De("eventOrder",{})],apis:{collapseMenu:(n,s)=>{n.collapseMenu(s)},highlightPrimary:(n,s)=>{n.highlightPrimary(s)},repositionMenus:(n,s)=>{n.repositionMenus(s)}},factory:Gz,extraApis:{tieredData:_P,singleData:OP,collapseItem:DP}}),fT=se("sink"),qz=se(_c({name:fT(),overrides:se({dom:{tag:"div"},behaviours:mt([Mc.config({useFixed:_t})]),events:_s([Ig(aa()),Ig(Yc()),Ig(wg())])})})),Kz=pi([De("isExtraPart",dn),Kc("fireEventInstead",[De("event",pm())])]),D_=n=>{const s=wc("Dismissal",Kz,n);return{[Rd()]:{schema:pi([ot("target")]),onReceive:(a,i)=>{So.isOpen(a)&&(So.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>So.close(a),g=>Yn(a,g.event)))}}}},Yz=pi([Kc("fireEventInstead",[De("event",tw())]),bi("doReposition")]),gT=n=>{const s=wc("Reposition",Yz,n);return{[Dr()]:{onReceive:a=>{So.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Yn(a,i.event))}}}},RP=(n,s)=>{const a=n.getHotspot(s).getOr(s),i="hotspot",d=n.getAnchorOverrides();return n.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},gx=(n,s,a)=>{const i=n.fetch;return i(a).map(s)},NP=(n,s,a,i,d,g,h)=>{const C=gx(n,s,i),x=MP(i,n);return C.map(T=>T.bind(_=>{const N=_.menus[_.primary];return A.from(N).each(H=>{n.listRole.each(j=>{H.role=j})}),A.from(yb.sketch({...g.menu(),uid:fp(""),data:_,highlightOnOpen:h,onOpenMenu:(H,j)=>{const Z=x().getOrDie();Mc.position(Z,j,{anchor:a}),So.decloak(d)},onOpenSubmenu:(H,j,Z)=>{const oe=x().getOrDie();Mc.position(oe,Z,{anchor:{type:"submenu",item:j}}),So.decloak(d)},onRepositionMenu:(H,j,Z)=>{const oe=x().getOrDie();Mc.position(oe,j,{anchor:a}),Te(Z,le=>{Mc.position(oe,le.triggeredMenu,{anchor:{type:"submenu",item:le.triggeringItem}})})},onEscape:()=>(Nn.focus(i),So.close(d),A.some(!0))}))}))},hT=(n,s,a,i,d,g,h)=>{const C=RP(n,a);return NP(n,s,C,a,i,d,h).map(T=>(T.fold(()=>{So.isOpen(i)&&So.close(i)},_=>{So.cloak(i),So.open(i,_),g(i)}),i))},Xz=(n,s,a,i,d,g,h)=>(So.close(i),Ko.pure(i)),pT=(n,s,a,i,d,g)=>{const h=Ln.getCoupled(a,"sandbox");return(So.isOpen(h)?Xz:hT)(n,s,a,h,i,d,g)},Qz=(n,s,a)=>{const i=We.getCurrent(s).getOr(s),d=ma(n.element);a?Tn(i.element,"min-width",d+"px"):Cd(i.element,d)},MP=(n,s)=>n.getSystem().getByUid(s.uid+"-"+fT()).map(a=>()=>rn.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>rn.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(n))),PP=n=>{So.getState(n).each(s=>{yb.repositionMenus(s)})},BP=(n,s,a)=>{const i=iP(),d=(C,x)=>{const T=RP(n,s);i.link(s.element),n.matchWidth&&Qz(T.hotspot,x,n.useMinWidth),n.onOpen(T,C,x),a!==void 0&&a.onOpen!==void 0&&a.onOpen(C,x)},g=(C,x)=>{i.unlink(s.element),h().getOr(x).element.dom.dispatchEvent(new window.FocusEvent("focusout")),a!==void 0&&a.onClose!==void 0&&a.onClose(C,x)},h=MP(s,n);return{dom:{tag:"div",classes:n.sandboxClasses,attributes:{id:i.id}},behaviours:Fd.augment(n.sandboxBehaviours,[Ft.config({store:{mode:"memory",initialValue:s}}),So.config({onOpen:d,onClose:g,isPartOf:(C,x,T)=>Cp(x,T)||Cp(s,T),getAttachPoint:()=>h().getOrDie()}),We.config({find:C=>So.getState(C).bind(x=>We.getCurrent(x))}),Pc.config({channels:{...D_({isExtraPart:dn}),...gT({doReposition:PP})}})])}},Jz=n=>{const s=Ln.getCoupled(n,"sandbox");PP(s)},R_=()=>[De("sandboxClasses",[]),Fd.field("sandboxBehaviours",[We,Pc,So,Ft])],e9=se([ot("dom"),ot("fetch"),xo("onOpen"),yi("onExecute"),De("getHotspot",A.some),De("getAnchorOverrides",se({})),bp(),Ra("dropdownBehaviours",[so,Ln,mn,Nn]),ot("toggleClass"),De("eventOrder",{}),zo("lazySink"),De("matchWidth",!1),De("useMinWidth",!1),zo("role"),zo("listRole")].concat(R_())),t9=se([Tl({schema:[aw(),De("fakeFocus",!1)],name:"menu",defaults:n=>({onExecute:n.onExecute})}),qz()]),n9=(n,s,a,i)=>{const d=_=>en(n.dom,"attributes").bind(N=>en(N,_)),g=_=>{So.getState(_).each(N=>{yb.highlightPrimary(N)})},h=(_,N,H)=>pT(n,nn,_,i,N,H),C=_=>{h(_,g,ja.HighlightMenuAndItem).get(V)},x={expand:_=>{so.isOn(_)||h(_,V,ja.HighlightNone).get(V)},open:_=>{so.isOn(_)||h(_,V,ja.HighlightMenuAndItem).get(V)},refetch:_=>Ln.getExistingCoupled(_,"sandbox").fold(()=>h(_,V,ja.HighlightMenuAndItem).map(V),H=>hT(n,nn,_,H,i,V,ja.HighlightMenuAndItem).map(V)),isOpen:so.isOn,close:_=>{so.isOn(_)&&h(_,V,ja.HighlightMenuAndItem).get(V)},repositionMenus:_=>{so.isOn(_)&&Jz(_)}},T=(_,N)=>(ep(_),A.some(!0));return{uid:n.uid,dom:n.dom,components:s,behaviours:lc(n.dropdownBehaviours,[so.config({toggleClass:n.toggleClass,aria:{mode:"expanded"}}),Ln.config({others:{sandbox:_=>BP(n,_,{onOpen:()=>so.on(_),onClose:()=>so.off(_)})}}),mn.config({mode:"special",onSpace:T,onEnter:T,onDown:(_,N)=>{if(Ji.isOpen(_)){const H=Ln.getCoupled(_,"sandbox");g(H)}else Ji.open(_);return A.some(!0)},onEscape:(_,N)=>Ji.isOpen(_)?(Ji.close(_),A.some(!0)):A.none()}),Nn.config({})]),events:h_(A.some(C)),eventOrder:{...n.eventOrder,[Aa()]:["disabling","toggling","alloy.base.behaviour"]},apis:x,domModification:{attributes:{"aria-haspopup":n.listRole.getOr("true"),...n.role.fold(()=>({}),_=>({role:_})),...n.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},Ji=wi({name:"Dropdown",configFields:e9(),partFields:t9(),factory:n9,apis:{open:(n,s)=>n.open(s),refetch:(n,s)=>n.refetch(s),expand:(n,s)=>n.expand(s),close:(n,s)=>n.close(s),isOpen:(n,s)=>n.isOpen(s),repositionMenus:(n,s)=>n.repositionMenus(s)}}),$P="form",o9=[Ra("formBehaviours",[Ft])],N_=n=>"<alloy.field."+n+">",s9=n=>{const s=(()=>{const g=[];return{field:(C,x)=>(g.push(C),$2($P,N_(C),x)),record:se(g)}})(),a=n(s),i=s.record(),d=pe(i,g=>ac({name:g,pname:N_(g)}));return wA($P,o9,d,LP,a)},IP=(n,s)=>n.fold(()=>rn.error(s),rn.value),LP=(n,s)=>({uid:n.uid,dom:n.dom,components:s,behaviours:lc(n.formBehaviours,[Ft.config({store:{mode:"manual",getValue:a=>{const i=Hu(a,n);return Ls(i,(d,g)=>d().bind(h=>{const C=We.getCurrent(h);return IP(C,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+Lu(h.element)))}).map(Ft.getValue))},setValue:(a,i)=>{gs(i,(d,g)=>{ns(a,n,g).each(h=>{We.getCurrent(h).each(C=>{Ft.setValue(C,d)})})})}}})]),apis:{getField:(a,i)=>ns(a,n,i).bind(We.getCurrent)}}),xp={getField:nb((n,s,a)=>n.getField(s,a)),sketch:s9},Zv=se([ot("dom"),De("shell",!0),Ra("toolbarBehaviours",[Bn])]),a9=se([_c({name:"groups",overrides:()=>({behaviours:mt([Bn.config({})])})})]),hx=(n,s,a,i)=>{const d=(C,x)=>{g(C).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},T=>{Bn.set(T,x)})},g=C=>n.shell?A.some(C):ns(C,n,"groups"),h=n.shell?{behaviours:[Bn.config({})],components:[]}:{behaviours:[],components:s};return{uid:n.uid,dom:n.dom,components:h.components,behaviours:lc(n.toolbarBehaviours,h.behaviours),apis:{setGroups:d,refresh:V},domModification:{attributes:{role:"group"}}}},Pm=wi({name:"Toolbar",configFields:Zv(),partFields:a9(),factory:hx,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)}}}),c9=se([mo(["toggledClass"]),ot("lazySink"),bi("fetch"),eu("getBounds"),Kc("fireDismissalEventInstead",[De("event",pm())]),bp(),xo("onToggled")]),i9=se([Tl({name:"button",overrides:n=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:mt([so.config({toggleClass:n.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:n.onToggled})])})}),Tl({factory:Pm,schema:Zv(),name:"toolbar",overrides:n=>({toolbarBehaviours:mt([mn.config({mode:"cyclic",onEscape:s=>(ns(s,n,"button").each(Nn.focus),A.none())})])})})]),Gv=kn(),FP=(n,s)=>{Gv.set(!0),M_(n,s),Gv.clear()},M_=(n,s)=>{const a=Ln.getCoupled(n,"toolbarSandbox");So.isOpen(a)?So.close(a):So.open(a,s.toolbar())},px=(n,s,a,i)=>{const d=a.getBounds.map(h=>h()),g=a.lazySink(n).getOrDie();Mc.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:n,layouts:i,overrides:{maxWidthFunction:z1()}}},d)},HP=(n,s,a,i,d)=>{Pm.setGroups(s,d),px(n,s,a,i),so.on(n)},l9=(n,s,a)=>{const i=iP(),d=(h,C)=>{const x=Gv.get().getOr(!1);a.fetch().get(T=>{HP(n,C,a,s.layouts,T),i.link(n.element),x||mn.focusIn(C)})},g=()=>{so.off(n),Gv.get().getOr(!1)||Nn.focus(n),i.unlink(n.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:mt([mn.config({mode:"special",onEscape:h=>(So.close(h),A.some(!0))}),So.config({onOpen:d,onClose:g,isPartOf:(h,C,x)=>Cp(C,x)||Cp(n,x),getAttachPoint:()=>a.lazySink(n).getOrDie()}),Pc.config({channels:{...D_({isExtraPart:dn,...a.fireDismissalEventInstead.map(h=>({fireEventInstead:{event:h.event}})).getOr({})}),...gT({doReposition:()=>{So.getState(Ln.getCoupled(n,"toolbarSandbox")).each(h=>{px(n,h,a,s.layouts)})}})}})])}},Qg=wi({name:"FloatingToolbarButton",factory:(n,s,a,i)=>({...ca.sketch({...i.button(),action:d=>{M_(d,i)},buttonBehaviours:Fd.augment({dump:i.button().buttonBehaviours},[Ln.config({others:{toolbarSandbox:d=>l9(d,a,n)}})])}),apis:{setGroups:(d,g)=>{So.getState(Ln.getCoupled(d,"toolbarSandbox")).each(h=>{HP(d,h,n,a.layouts,g)})},reposition:d=>{So.getState(Ln.getCoupled(d,"toolbarSandbox")).each(g=>{px(d,g,n,a.layouts)})},toggle:d=>{M_(d,i)},toggleWithoutFocusing:d=>{FP(d,i)},getToolbar:d=>So.getState(Ln.getCoupled(d,"toolbarSandbox")),isOpen:d=>So.isOpen(Ln.getCoupled(d,"toolbarSandbox"))}}),configFields:c9(),partFields:i9(),apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggleWithoutFocusing(s)},getToolbar:(n,s)=>n.getToolbar(s),isOpen:(n,s)=>n.isOpen(s)}}),zP=se([De("prefix","form-field"),Ra("fieldBehaviours",[We,Ft])]),u9=se([_c({schema:[ot("dom")],name:"label"}),_c({factory:{sketch:n=>({uid:n.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:n.text}})},schema:[ot("text")],name:"aria-descriptor"}),ac({factory:{sketch:n=>{const s=S2(n,["factory"]);return n.factory.sketch(s)}},schema:[ot("factory")],name:"field"})]),d9=(n,s,a,i)=>{const d=lc(n.fieldBehaviours,[We.config({find:C=>ns(C,n,"field")}),Ft.config({store:{mode:"manual",getValue:C=>We.getCurrent(C).bind(Ft.getValue),setValue:(C,x)=>{We.getCurrent(C).each(T=>{Ft.setValue(T,x)})}}})]),g=_s([vs((C,x)=>{const T=vm(C,n,["label","field","aria-descriptor"]);T.field().each(_=>{const N=Mt(n.prefix);T.label().each(H=>{Cn(H.element,"for",N),Cn(_.element,"id",N)}),T["aria-descriptor"]().each(H=>{const j=Mt(n.prefix);Cn(H.element,"id",j),Cn(_.element,"aria-describedby",j)})})})]),h={getField:C=>ns(C,n,"field"),getLabel:C=>ns(C,n,"label")};return{uid:n.uid,dom:n.dom,components:s,behaviours:d,events:g,apis:h}},eo=wi({name:"FormField",configFields:zP(),partFields:u9(),factory:d9,apis:{getField:(n,s)=>n.getField(s),getLabel:(n,s)=>n.getLabel(s)}}),m9=se([De("field1Name","field1"),De("field2Name","field2"),vf("onLockedChange"),mo(["lockClass"]),De("locked",!1),Fd.field("coupledFieldBehaviours",[We,Ft]),us("onInput",V)]),f9=(n,s,a)=>ns(n,s,a).bind(We.getCurrent),VP=(n,s)=>ac({factory:eo,name:n,overrides:a=>({fieldBehaviours:mt([On("coupled-input-behaviour",[je($u(),i=>{f9(i,a,s).each(d=>{ns(i,a,"lock").each(g=>{so.isOn(g)&&a.onLockedChange(i,d,g),a.onInput(i)})})})])])})}),g9=se([VP("field1","field2"),VP("field2","field1"),ac({factory:ca,schema:[ot("dom")],name:"lock",overrides:n=>({buttonBehaviours:mt([so.config({selected:n.locked,toggleClass:n.markers.lockClass,aria:{mode:"pressed"}})])})})]),h9=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:Fd.augment(n.coupledFieldBehaviours,[We.config({find:A.some}),Ft.config({store:{mode:"manual",getValue:d=>{const g=F0(d,n,["field1","field2"]);return{[n.field1Name]:Ft.getValue(g.field1()),[n.field2Name]:Ft.getValue(g.field2())}},setValue:(d,g)=>{const h=F0(d,n,["field1","field2"]);qn(g,n.field1Name)&&Ft.setValue(h.field1(),g[n.field1Name]),qn(g,n.field2Name)&&Ft.setValue(h.field2(),g[n.field2Name])}}})]),apis:{getField1:d=>ns(d,n,"field1"),getField2:d=>ns(d,n,"field2"),getLock:d=>ns(d,n,"lock")}}),Sr=wi({name:"FormCoupledInputs",configFields:m9(),partFields:g9(),factory:h9,apis:{getField1:(n,s)=>n.getField1(s),getField2:(n,s)=>n.getField2(s),getLock:(n,s)=>n.getLock(s)}}),p9=(n,s)=>{const a=pe(n.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=n.data.map(d=>pf("initialValue",d)).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:a,behaviours:lc(n.selectBehaviours,[Nn.config({}),Ft.config({store:{mode:"manual",getValue:d=>xc(d.element),setValue:(d,g)=>{const h=No(n.options);Wt(n.options,x=>x.value===g).isSome()?bl(d.element,g):d.element.dom.selectedIndex===-1&&g===""&&h.each(x=>bl(d.element,x.value))},...i}})])}},B_=uu({name:"HtmlSelect",configFields:[ot("options"),Ra("selectBehaviours",[Nn,Ft]),De("selectClasses",[]),De("selectAttributes",{}),zo("data")],factory:p9}),UP=(n,s,a,i,d)=>{const g=()=>n.lazySink(s),h=i.type==="horizontal"?{layouts:{onLtr:()=>W2(),onRtl:()=>W0()}}:{},C=T=>T.length===2,x=T=>C(T)?h:{};return yb.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(So.close(s),n.onEscape.map(T=>T(s)),A.some(!0)),onExecute:()=>A.some(!0),onOpenMenu:(T,_)=>{Mc.positionWithinBounds(g().getOrDie(),_,a,d())},onOpenSubmenu:(T,_,N,H)=>{const j=g().getOrDie();Mc.position(j,N,{anchor:{type:"submenu",item:_,...x(H)}})},onRepositionMenu:(T,_,N)=>{const H=g().getOrDie();Mc.positionWithinBounds(H,_,a,d()),Te(N,j=>{const Z=x(j.triggeringPath);Mc.position(H,j.triggeredMenu,{anchor:{type:"submenu",item:j.triggeringItem,...Z}})})}})},b9=(n,s)=>{const a=(H,j)=>n.getRelated(H).exists(oe=>Cp(oe,j)),i=(H,j)=>{So.setContent(H,j)},d=(H,j,Z)=>{const oe=A.none;g(H,j,Z,oe)},g=(H,j,Z,oe)=>{const le=n.lazySink(H).getOrDie();So.openWhileCloaked(H,j,()=>Mc.positionWithinBounds(le,H,Z,oe())),Ft.setValue(H,A.some({mode:"position",config:Z,getBounds:oe}))},h=(H,j,Z)=>{C(H,j,Z,A.none)},C=(H,j,Z,oe)=>{const le=UP(n,H,j,Z,oe);So.open(H,le),Ft.setValue(H,A.some({mode:"menu",menu:le}))},x=H=>{So.isOpen(H)&&(Ft.setValue(H,A.none()),So.close(H))},T=H=>So.getState(H),_=H=>{So.isOpen(H)&&Ft.getValue(H).each(j=>{switch(j.mode){case"menu":So.getState(H).each(yb.repositionMenus);break;case"position":const Z=n.lazySink(H).getOrDie();Mc.positionWithinBounds(Z,H,j.config,j.getBounds());break}})},N={setContent:i,showAt:d,showWithinBounds:g,showMenuAt:h,showMenuWithinBounds:C,hide:x,getContent:T,reposition:_,isOpen:So.isOpen};return{uid:n.uid,dom:n.dom,behaviours:lc(n.inlineBehaviours,[So.config({isPartOf:(H,j,Z)=>Cp(j,Z)||a(H,Z),getAttachPoint:H=>n.lazySink(H).getOrDie(),onOpen:H=>{n.onShow(H)},onClose:H=>{n.onHide(H)}}),Ft.config({store:{mode:"memory",initialValue:A.none()}}),Pc.config({channels:{...D_({isExtraPart:s.isExtraPart,...n.fireDismissalEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({})}),...gT({...n.fireRepositionEventInstead.map(H=>({fireEventInstead:{event:H.event}})).getOr({}),doReposition:_})}})]),eventOrder:n.eventOrder,apis:N}},Zs=uu({name:"InlineView",configFields:[ot("lazySink"),xo("onShow"),xo("onHide"),eu("onEscape"),Ra("inlineBehaviours",[So,Ft,Pc]),Kc("fireDismissalEventInstead",[De("event",pm())]),Kc("fireRepositionEventInstead",[De("event",tw())]),De("getRelated",A.none),De("isExtraPart",dn),De("eventOrder",A.none)],factory:b9,apis:{showAt:(n,s,a,i)=>{n.showAt(s,a,i)},showWithinBounds:(n,s,a,i,d)=>{n.showWithinBounds(s,a,i,d)},showMenuAt:(n,s,a,i)=>{n.showMenuAt(s,a,i)},showMenuWithinBounds:(n,s,a,i,d)=>{n.showMenuWithinBounds(s,a,i,d)},hide:(n,s)=>{n.hide(s)},isOpen:(n,s)=>n.isOpen(s),getContent:(n,s)=>n.getContent(s),setContent:(n,s,a)=>{n.setContent(s,a)},reposition:(n,s)=>{n.reposition(s)}}}),$_=se([Ws("type","text"),zo("data"),De("inputAttributes",{}),De("inputStyles",{}),De("tag","input"),De("inputClasses",[]),xo("onSetValue"),us("fromInputValue",nn),us("toInputValue",nn),De("styles",{}),De("eventOrder",{}),Ra("inputBehaviours",[Ft,Nn]),De("selectOnFocus",!0)]),jP=n=>mt([Nn.config({onFocus:n.selectOnFocus?s=>{const a=s.element,i=xc(a);n.type!=="range"&&a.dom.setSelectionRange(0,i.length)}:V})]),v9=n=>({...jP(n),...lc(n.inputBehaviours,[Ft.config({store:{mode:"manual",...n.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>n.fromInputValue(xc(s.element)),setValue:(s,a)=>{xc(s.element)!==a&&bl(s.element,n.toInputValue(a))}},onSetValue:n.onSetValue})])}),I_=n=>({tag:n.tag,attributes:{type:n.type,...n.inputAttributes},styles:n.inputStyles,classes:n.inputClasses}),WP=(n,s)=>({uid:n.uid,dom:I_(n),components:[],behaviours:v9(n),eventOrder:n.eventOrder}),zf=uu({name:"Input",configFields:$_(),factory:WP}),L_=Cf(x_(),S_()),y9=(n,s)=>{const a=na(n,"id").fold(()=>{const i=Mt("dialog-label");return Cn(s,"id",i),i},nn);Cn(n,"aria-labelledby",a)},C9=se([ot("lazySink"),zo("dragBlockClass"),us("getBounds",za),De("useTabstopAt",_t),De("firstTabstop",0),De("eventOrder",{}),Ra("modalBehaviours",[mn]),yi("onExecute"),A1("onEscape")]),bT={sketch:nn},F_=se([_c({name:"draghandle",overrides:(n,s)=>({behaviours:mt([qg.config({mode:"mouse",getTarget:a=>Vi(a,'[role="dialog"]').getOr(a),blockerClass:n.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:n.getDragBounds})])})}),ac({schema:[ot("dom")],name:"title"}),ac({factory:bT,schema:[ot("dom")],name:"close"}),ac({factory:bT,schema:[ot("dom")],name:"body"}),_c({factory:bT,schema:[ot("dom")],name:"footer"}),Tl({factory:{sketch:(n,s)=>({...n,dom:s.dom,components:s.components})},schema:[De("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),De("components",[])],name:"blocker"})]),x9=(n,s,a,i)=>{const d=kn(),g=Z=>{d.set(Z);const oe=n.lazySink(Z).getOrDie(),le=i.blocker(),Q=oe.getSystem().build({...le,components:le.components.concat([y(Z)]),behaviours:mt([Nn.config({}),On("dialog-blocker-events",[op(tu(),()=>{st.isBlocked(Z)?V():mn.focusIn(Z)})])])});Em(oe,Q),mn.focusIn(Z)},h=Z=>{d.clear(),vc(Z.element).each(oe=>{Z.getSystem().getByDom(oe).each(le=>{km(le)})})},C=Z=>Fu(Z,n,"body"),x=Z=>ns(Z,n,"footer"),T=(Z,oe)=>{st.block(Z,oe)},_=Z=>{st.unblock(Z)},N=Mt("modal-events"),H={...n.eventOrder,[Iu()]:[N].concat(n.eventOrder["alloy.system.attached"]||[])},j=Ks();return{uid:n.uid,dom:n.dom,components:s,apis:{show:g,hide:h,getBody:C,getFooter:x,setIdle:_,setBusy:T},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:lc(n.modalBehaviours,[Bn.config({}),mn.config({mode:"cyclic",onEnter:n.onExecute,onEscape:n.onEscape,useTabstopAt:n.useTabstopAt,firstTabstop:n.firstTabstop}),st.config({getRoot:d.get}),On(N,[vs(Z=>{const oe=Fu(Z,n,"title").element,le=s2(oe);j.os.isMacOS()&&Dt(le)?Cn(Z.element,"aria-label",le):y9(Z.element,oe)})])])}},ia=wi({name:"ModalDialog",configFields:C9(),partFields:F_(),factory:x9,apis:{show:(n,s)=>{n.show(s)},hide:(n,s)=>{n.hide(s)},getBody:(n,s)=>n.getBody(s),getFooter:(n,s)=>n.getFooter(s),setBusy:(n,s,a)=>{n.setBusy(s,a)},setIdle:(n,s)=>{n.setIdle(s)}}}),S9=_c({schema:[ot("dom")],name:"label"}),Sp=n=>_c({name:""+n+"-edge",overrides:s=>s.model.manager.edgeActions[n].fold(()=>({}),i=>({events:_s([tp(vi(),(d,g,h)=>i(d,h),[s]),tp(Yc(),(d,g,h)=>i(d,h),[s]),tp(Fh(),(d,g,h)=>{h.mouseIsDown.get()&&i(d,h)},[s])])}))}),w9=Sp("top-left"),E9=Sp("top"),ZP=Sp("top-right"),GP=Sp("right"),T9=Sp("bottom-right"),k9=Sp("bottom"),A9=Sp("bottom-left"),_l=Sp("left"),Vd=ac({name:"thumb",defaults:se({dom:{styles:{position:"absolute"}}}),overrides:n=>({events:_s([Dd(vi(),n,"spectrum"),Dd(mr(),n,"spectrum"),Dd(bf(),n,"spectrum"),Dd(Yc(),n,"spectrum"),Dd(Fh(),n,"spectrum"),Dd(y0(),n,"spectrum")])})}),bx=n=>_f(n.event),H_=ac({schema:[Tc("mouseIsDown",()=>Zt(!1))],name:"spectrum",overrides:n=>{const a=n.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(h=>a.setValueFrom(d,n,h));return{behaviours:mt([mn.config({mode:"special",onLeft:(d,g)=>a.onLeft(d,n,bx(g)),onRight:(d,g)=>a.onRight(d,n,bx(g)),onUp:(d,g)=>a.onUp(d,n,bx(g)),onDown:(d,g)=>a.onDown(d,n,bx(g))}),ms.config({}),Nn.config({})]),events:_s([je(vi(),i),je(mr(),i),je(Yc(),i),je(Fh(),(d,g)=>{n.mouseIsDown.get()&&i(d,g)})])}}});var z_=[S9,_l,GP,E9,k9,w9,ZP,A9,T9,Vd,H_];const vx=se("slider.change.value"),qP=n=>n.type.indexOf("touch")!==-1,Cb=n=>{const s=n.event.raw;if(qP(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?A.some(a.touches[0]).map(i=>$o(i.clientX,i.clientY)):A.none()}else{const a=s;return a.clientX!==void 0?A.some(a).map(i=>$o(i.clientX,i.clientY)):A.none()}},_9="top",vT="right",U_="bottom",KP="left",Bm=n=>n.model.minX,xb=n=>n.model.minY,yT=n=>n.model.minX-1,fu=n=>n.model.minY-1,Ga=n=>n.model.maxX,$m=n=>n.model.maxY,ei=n=>n.model.maxX+1,CT=n=>n.model.maxY+1,fs=(n,s,a)=>s(n)-a(n),j_=n=>fs(n,Ga,Bm),Im=n=>fs(n,$m,xb),qv=n=>j_(n)/2,W_=n=>Im(n)/2,wp=(n,s)=>s?n.stepSize*n.speedMultiplier:n.stepSize,xT=n=>n.snapToGrid,YP=n=>n.snapStart,ST=n=>n.rounded,wT=(n,s)=>n[s+"-edge"]!==void 0,Z_=n=>wT(n,KP),G_=n=>wT(n,vT),ET=n=>wT(n,_9),q_=n=>wT(n,U_),Ud=n=>n.model.value.get(),Ep=(n,s)=>({x:n,y:s}),jd=(n,s)=>{pn(n,vx(),{value:s})},O9=(n,s)=>{jd(n,Ep(yT(s),fu(s)))},D9=(n,s)=>{jd(n,fu(s))},R9=(n,s)=>{jd(n,Ep(qv(s),fu(s)))},XP=(n,s)=>{jd(n,Ep(ei(s),fu(s)))},N9=(n,s)=>{jd(n,ei(s))},M9=(n,s)=>{jd(n,Ep(ei(s),W_(s)))},QP=(n,s)=>{jd(n,Ep(ei(s),CT(s)))},P9=(n,s)=>{jd(n,CT(s))},JP=(n,s)=>{jd(n,Ep(qv(s),CT(s)))},yx=(n,s)=>{jd(n,Ep(yT(s),CT(s)))},B9=(n,s)=>{jd(n,yT(s))},$9=(n,s)=>{jd(n,Ep(yT(s),W_(s)))},TT=(n,s,a,i)=>n<s?n:n>a?a:n===s?s-1:Math.max(s,n-i),kT=(n,s,a,i)=>n>a?n:n<s?s:n===a?a+1:Math.min(a,n+i),AT=(n,s,a)=>Math.max(s,Math.min(a,n)),eB=(n,s,a,i,d)=>d.fold(()=>{const g=n-s,h=Math.round(g/i)*i;return AT(s+h,s-1,a+1)},g=>{const h=(n-g)%i,C=Math.round(h/i),x=Math.floor((n-g)/i),T=Math.floor((a-g)/i),_=Math.min(T,x+C),N=g+_*i;return Math.max(g,N)}),I9=(n,s,a)=>Math.min(a,Math.max(n,s))-s,tB=n=>{const{min:s,max:a,range:i,value:d,step:g,snap:h,snapStart:C,rounded:x,hasMinEdge:T,hasMaxEdge:_,minBound:N,maxBound:H,screenRange:j}=n,Z=T?s-1:s,oe=_?a+1:a;if(d<N)return Z;if(d>H)return oe;{const le=I9(d,N,H),Q=AT(le/j*i+s,Z,oe);return h&&Q>=s&&Q<=a?eB(Q,s,a,g,C):x?Math.round(Q):Q}},nB=n=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:h,maxBound:C,maxOffset:x,centerMinEdge:T,centerMaxEdge:_}=n;return d<s?g?0:T:d>a?h?C:_:(d-s)/i*x},K_="top",oB="right",sB="bottom",_T="left",Wd="width",L9="height",Zd=n=>n.element.dom.getBoundingClientRect(),Qu=(n,s)=>n[s],Cx=n=>{const s=Zd(n);return Qu(s,_T)},rB=n=>{const s=Zd(n);return Qu(s,oB)},xx=n=>{const s=Zd(n);return Qu(s,K_)},Y_=n=>{const s=Zd(n);return Qu(s,sB)},X_=n=>{const s=Zd(n);return Qu(s,Wd)},aB=n=>{const s=Zd(n);return Qu(s,L9)},cB=(n,s,a)=>(n+s)/2-a,iB=(n,s)=>{const a=Zd(n),i=Zd(s),d=Qu(a,_T),g=Qu(a,oB),h=Qu(i,_T);return cB(d,g,h)},lB=(n,s)=>{const a=Zd(n),i=Zd(s),d=Qu(a,K_),g=Qu(a,sB),h=Qu(i,K_);return cB(d,g,h)},OT=(n,s)=>{pn(n,vx(),{value:s})},Q_=(n,s,a)=>{const i={min:Bm(s),max:Ga(s),range:j_(s),value:a,step:wp(s),snap:xT(s),snapStart:YP(s),rounded:ST(s),hasMinEdge:Z_(s),hasMaxEdge:G_(s),minBound:Cx(n),maxBound:rB(n),screenRange:X_(n)};return tB(i)},F9=(n,s,a)=>{const i=Q_(n,s,a);return OT(n,i),i},uB=(n,s)=>{const a=Bm(s);OT(n,a)},dB=(n,s)=>{const a=Ga(s);OT(n,a)},mB=(n,s,a,i)=>{const g=(n>0?kT:TT)(Ud(a),Bm(a),Ga(a),wp(a,i));return OT(s,g),A.some(g)},J_=n=>(s,a,i)=>mB(n,s,a,i).map(_t),H9=n=>Cb(n).map(a=>a.left),z9=(n,s,a,i,d)=>{const h=X_(n),C=i.bind(_=>A.some(iB(_,n))).getOr(0),x=d.bind(_=>A.some(iB(_,n))).getOr(h),T={min:Bm(s),max:Ga(s),range:j_(s),value:a,hasMinEdge:Z_(s),hasMaxEdge:G_(s),minBound:Cx(n),maxBound:rB(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:x};return nB(T)},eO=(n,s,a,i,d,g)=>{const h=z9(s,g,a,i,d);return Cx(s)-Cx(n)+h},fB=(n,s,a,i)=>{const d=Ud(a),g=eO(n,i.getSpectrum(n),d,i.getLeftEdge(n),i.getRightEdge(n),a),h=ma(s.element)/2;Tn(s.element,"left",g-h+"px")},Kv=J_(-1),DT=J_(1),V9=A.none,gB=A.none,hB={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some(N9),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some(B9)};var pB=Object.freeze({__proto__:null,setValueFrom:F9,setToMin:uB,setToMax:dB,findValueOfOffset:Q_,getValueFromEvent:H9,findPositionOfValue:eO,setPositionFromValue:fB,onLeft:Kv,onRight:DT,onUp:V9,onDown:gB,edgeActions:hB});const Sx=(n,s)=>{pn(n,vx(),{value:s})},wx=(n,s,a)=>{const i={min:xb(s),max:$m(s),range:Im(s),value:a,step:wp(s),snap:xT(s),snapStart:YP(s),rounded:ST(s),hasMinEdge:ET(s),hasMaxEdge:q_(s),minBound:xx(n),maxBound:Y_(n),screenRange:aB(n)};return tB(i)},tO=(n,s,a)=>{const i=wx(n,s,a);return Sx(n,i),i},U9=(n,s)=>{const a=xb(s);Sx(n,a)},j9=(n,s)=>{const a=$m(s);Sx(n,a)},W9=(n,s,a,i)=>{const g=(n>0?kT:TT)(Ud(a),xb(a),$m(a),wp(a,i));return Sx(s,g),A.some(g)},nO=n=>(s,a,i)=>W9(n,s,a,i).map(_t),bB=n=>Cb(n).map(a=>a.top),Z9=(n,s,a,i,d)=>{const h=aB(n),C=i.bind(_=>A.some(lB(_,n))).getOr(0),x=d.bind(_=>A.some(lB(_,n))).getOr(h),T={min:xb(s),max:$m(s),range:Im(s),value:a,hasMinEdge:ET(s),hasMaxEdge:q_(s),minBound:xx(n),maxBound:Y_(n),maxOffset:h,centerMinEdge:C,centerMaxEdge:x};return nB(T)},oO=(n,s,a,i,d,g)=>{const h=Z9(s,g,a,i,d);return xx(s)-xx(n)+h},vB=(n,s,a,i)=>{const d=Ud(a),g=oO(n,i.getSpectrum(n),d,i.getTopEdge(n),i.getBottomEdge(n),a),h=yr(s.element)/2;Tn(s.element,"top",g-h+"px")},G9=A.none,q9=A.none,K9=nO(-1),Y9=nO(1),X9={"top-left":A.none(),top:A.some(D9),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some(P9),"bottom-left":A.none(),left:A.none()};var Q9=Object.freeze({__proto__:null,setValueFrom:tO,setToMin:U9,setToMax:j9,findValueOfOffset:wx,getValueFromEvent:bB,findPositionOfValue:oO,setPositionFromValue:vB,onLeft:G9,onRight:q9,onUp:K9,onDown:Y9,edgeActions:X9});const RT=(n,s)=>{pn(n,vx(),{value:s})},Ex=(n,s)=>({x:n,y:s}),yB=(n,s,a)=>{const i=Q_(n,s,a.left),d=wx(n,s,a.top),g=Ex(i,d);return RT(n,g),g},J9=(n,s,a,i,d)=>{const g=n>0?kT:TT,h=s?Ud(i).x:g(Ud(i).x,Bm(i),Ga(i),wp(i,d)),C=s?g(Ud(i).y,xb(i),$m(i),wp(i,d)):Ud(i).y;return RT(a,Ex(h,C)),A.some(h)},NT=(n,s)=>(a,i,d)=>J9(n,s,a,i,d).map(_t),eV=(n,s)=>{const a=Bm(s),i=xb(s);RT(n,Ex(a,i))},CB=(n,s)=>{const a=Ga(s),i=$m(s);RT(n,Ex(a,i))},tV=n=>Cb(n),nV=(n,s,a,i)=>{const d=Ud(a),g=eO(n,i.getSpectrum(n),d.x,i.getLeftEdge(n),i.getRightEdge(n),a),h=oO(n,i.getSpectrum(n),d.y,i.getTopEdge(n),i.getBottomEdge(n),a),C=ma(s.element)/2,x=yr(s.element)/2;Tn(s.element,"left",g-C+"px"),Tn(s.element,"top",h-x+"px")},oV=NT(-1,!1),MT=NT(1,!1),sV=NT(-1,!0),rV=NT(1,!0),aV={"top-left":A.some(O9),top:A.some(R9),"top-right":A.some(XP),right:A.some(M9),"bottom-right":A.some(QP),bottom:A.some(JP),"bottom-left":A.some(yx),left:A.some($9)};var cV=Object.freeze({__proto__:null,setValueFrom:yB,setToMin:eV,setToMax:CB,getValueFromEvent:tV,setPositionFromValue:nV,onLeft:oV,onRight:MT,onUp:sV,onDown:rV,edgeActions:aV});const iV=[De("stepSize",1),De("speedMultiplier",10),De("onChange",V),De("onChoose",V),De("onInit",V),De("onDragStart",V),De("onDragEnd",V),De("snapToGrid",!1),De("rounded",!0),zo("snapStart"),Gc("model",Ec("mode",{x:[De("minX",0),De("maxX",100),Tc("value",n=>Zt(n.mode.minX)),ot("getInitialValue"),Po("manager",pB)],y:[De("minY",0),De("maxY",100),Tc("value",n=>Zt(n.mode.minY)),ot("getInitialValue"),Po("manager",Q9)],xy:[De("minX",0),De("maxX",100),De("minY",0),De("maxY",100),Tc("value",n=>Zt({x:n.mode.minX,y:n.mode.minY})),ot("getInitialValue"),Po("manager",cV)]})),Ra("sliderBehaviours",[mn,Ft]),Tc("mouseIsDown",()=>Zt(!1))],Gd=wi({name:"Slider",configFields:iV,partFields:z_,factory:(n,s,a,i)=>{const d=Ie=>Fu(Ie,n,"thumb"),g=Ie=>Fu(Ie,n,"spectrum"),h=Ie=>ns(Ie,n,"left-edge"),C=Ie=>ns(Ie,n,"right-edge"),x=Ie=>ns(Ie,n,"top-edge"),T=Ie=>ns(Ie,n,"bottom-edge"),_=n.model,N=_.manager,H=(Ie,Et)=>{N.setPositionFromValue(Ie,Et,n,{getLeftEdge:h,getRightEdge:C,getTopEdge:x,getBottomEdge:T,getSpectrum:g})},j=(Ie,Et)=>{_.value.set(Et);const Je=d(Ie);H(Ie,Je)},Z=(Ie,Et)=>{j(Ie,Et);const Je=d(Ie);return n.onChange(Ie,Je,Et),A.some(!0)},oe=Ie=>{N.setToMin(Ie,n)},le=Ie=>{N.setToMax(Ie,n)},Q=Ie=>{const Et=()=>{ns(Ie,n,"thumb").each(ct=>{const at=_.value.get();n.onChoose(Ie,ct,at)})},Je=n.mouseIsDown.get();n.mouseIsDown.set(!1),Je&&Et()},me=(Ie,Et)=>{Et.stop(),n.mouseIsDown.set(!0),n.onDragStart(Ie,d(Ie))},ve=(Ie,Et)=>{Et.stop(),n.onDragEnd(Ie,d(Ie)),Q(Ie)},Re=Ie=>{ns(Ie,n,"spectrum").map(mn.focusIn)};return{uid:n.uid,dom:n.dom,components:s,behaviours:lc(n.sliderBehaviours,[mn.config({mode:"special",focusIn:Re}),Ft.config({store:{mode:"manual",getValue:Ie=>_.value.get(),setValue:j}}),Pc.config({channels:{[Sm()]:{onReceive:Q}}})]),events:_s([je(vx(),(Ie,Et)=>{Z(Ie,Et.event.value)}),vs((Ie,Et)=>{const Je=_.getInitialValue();_.value.set(Je);const ct=d(Ie);H(Ie,ct);const at=g(Ie);n.onInit(Ie,ct,at,_.value.get())}),je(vi(),me),je(bf(),ve),je(Yc(),(Ie,Et)=>{Re(Ie),me(Ie,Et)}),je(y0(),ve)]),apis:{resetToMin:oe,resetToMax:le,setValue:j,refresh:H},domModification:{styles:{position:"relative"}}}},apis:{setValue:(n,s,a)=>{n.setValue(s,a)},resetToMin:(n,s)=>{n.resetToMin(s)},resetToMax:(n,s)=>{n.resetToMax(s)},refresh:(n,s)=>{n.refresh(s)}}}),xB="container",lV=[Ra("slotBehaviours",[])],SB=n=>"<alloy.field."+n+">",uV=n=>{const s=(()=>{const g=[];return{slot:(C,x)=>(g.push(C),$2(xB,SB(C),x)),record:se(g)}})(),a=n(s),i=s.record(),d=pe(i,g=>ac({name:g,pname:SB(g)}));return wA(xB,lV,d,dV,a)},dV=(n,s)=>{const a=oe=>qi(n),i=(oe,le)=>ns(oe,n,le),d=(oe,le)=>(Q,me)=>ns(Q,n,me).map(ve=>oe(ve,me)).getOr(le),g=oe=>(le,Q)=>{Te(Q,me=>oe(le,me))},h=(oe,le)=>Pr(oe.element,"aria-hidden")!=="true",C=(oe,le)=>{if(!h(oe)){const Q=oe.element;Jn(Q,"display"),ps(Q,"aria-hidden"),pn(oe,A2(),{name:le,visible:!0})}},x=(oe,le)=>{if(h(oe)){const Q=oe.element;Tn(Q,"display","none"),Cn(Q,"aria-hidden","true"),pn(oe,A2(),{name:le,visible:!1})}},T=d(h,!1),_=d(x),N=g(_),H=oe=>N(oe,a()),j=d(C),Z={getSlotNames:a,getSlot:i,isShowing:T,hideSlot:_,hideAllSlots:H,showSlot:j};return{uid:n.uid,dom:n.dom,components:s,behaviours:ex(n.slotBehaviours),apis:Z}},qa={...Ls({getSlotNames:(n,s)=>n.getSlotNames(s),getSlot:(n,s,a)=>n.getSlot(s,a),isShowing:(n,s,a)=>n.isShowing(s,a),hideSlot:(n,s,a)=>n.hideSlot(s,a),hideAllSlots:(n,s)=>n.hideAllSlots(s),showSlot:(n,s,a)=>n.showSlot(s,a)},n=>nb(n)),sketch:uV},mV=(n,s)=>Tt(n,(d,g)=>s(g,d.len).fold(se(d),C=>({len:C.finish,list:d.list.concat([C])})),{len:0,list:[]}).list,sO=(n,s,a)=>({within:n,extra:s,withinWidth:a}),wB=(n,s,a)=>{const i=mV(n,(C,x)=>{const T=a(C);return A.some({element:C,start:x,finish:x+T,width:T})}),d=sn(i,C=>C.finish<=s),g=Un(d,(C,x)=>C+x.width,0),h=i.slice(d.length);return{within:d,extra:h,withinWidth:g}},Tx=n=>pe(n,s=>s.element),fV=(n,s,a)=>{const i=Tx(n.concat(s));return sO(i,[],a)},gV=(n,s,a,i)=>{const d=Tx(n).concat([a]);return sO(d,Tx(s),i)},hV=(n,s,a)=>sO(Tx(n),[],a),pV=(n,s,a)=>{const i=wB(s,n,a);return i.extra.length===0?A.some(i):A.none()},bV=(n,s,a,i)=>{const d=pV(n,s,a).getOrThunk(()=>wB(s,n-a(i),a)),g=d.within,h=d.extra,C=d.withinWidth;return h.length===1&&h[0].width<=a(i)?fV(g,h,C):h.length>=1?gV(g,h,i,C):hV(g,h,C)},EB=(n,s)=>{const a=pe(s,i=>y(i));Pm.setGroups(n,a)},rO=n=>va(n,s=>ar(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),TB=(n,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Fu(n,s,"primary"),g=Ln.getCoupled(n,"overflowGroup");Tn(d.element,"visibility","hidden");const h=i.concat([g]),C=rO(h);a([]),EB(d,h);const x=ma(d.element),T=bV(x,s.builtGroups.get(),_=>Math.ceil(_.element.dom.getBoundingClientRect().width),g);T.extra.length===0?(Bn.remove(d,g),a([])):(EB(d,T.within),a(T.extra)),Jn(d.element,"visibility"),zi(d.element),C.each(Nn.focus)},kB=se([Ra("splitToolbarBehaviours",[Ln]),Tc("builtGroups",()=>Zt([]))]),vV=se([mo(["overflowToggledClass"]),eu("getOverflowBounds"),ot("lazySink"),Tc("overflowGroups",()=>Zt([])),xo("onOpened"),xo("onClosed")].concat(kB())),yV=se([ac({factory:Pm,schema:Zv(),name:"primary"}),Tl({schema:Zv(),name:"overflow"}),Tl({name:"overflow-button"}),Tl({name:"overflow-group"})]),CV=se([ot("items"),mo(["itemSelector"]),Ra("tgroupBehaviours",[mn])]),xV=se([$0({name:"items",unit:"item"})]),SV=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,behaviours:lc(n.tgroupBehaviours,[mn.config({mode:"flow",selector:n.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),PT=wi({name:"ToolbarGroup",configFields:CV(),partFields:xV(),factory:SV}),AB=n=>pe(n,s=>y(s)),_B=(n,s,a)=>{TB(n,a,i=>{a.overflowGroups.set(i),s.getOpt(n).each(d=>{Qg.setGroups(d,AB(i))})})},wV=(n,s,a,i)=>{const d=_o(Qg.sketch({fetch:()=>Ko.nu(g=>{g(AB(n.overflowGroups.get()))}),layouts:{onLtr:()=>[_r,Ir],onRtl:()=>[Ir,_r],onBottomLtr:()=>[ga,Oa],onBottomRtl:()=>[Oa,ga]},getBounds:a.getOverflowBounds,lazySink:n.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:n.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,h)=>n[h?"onOpened":"onClosed"](g)}));return{uid:n.uid,dom:n.dom,components:s,behaviours:lc(n.splitToolbarBehaviours,[Ln.config({others:{overflowGroup:()=>PT.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,h)=>{n.builtGroups.set(pe(h,g.getSystem().build)),_B(g,d,n)},refresh:g=>_B(g,d,n),toggle:g=>{d.getOpt(g).each(h=>{Qg.toggle(h)})},toggleWithoutFocusing:g=>{d.getOpt(g).each(Qg.toggleWithoutFocusing)},isOpen:g=>d.getOpt(g).map(Qg.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(h=>{Qg.reposition(h)})},getOverflow:g=>d.getOpt(g).bind(Qg.getToolbar)},domModification:{attributes:{role:"group"}}}},OB=wi({name:"SplitFloatingToolbar",configFields:vV(),partFields:yV(),factory:wV,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},reposition:(n,s)=>{n.reposition(s)},toggle:(n,s)=>{n.toggle(s)},toggleWithoutFocusing:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s),getOverflow:(n,s)=>n.getOverflow(s)}}),EV=se([mo(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),xo("onOpened"),xo("onClosed")].concat(kB())),TV=se([ac({factory:Pm,schema:Zv(),name:"primary"}),ac({factory:Pm,schema:Zv(),name:"overflow",overrides:n=>({toolbarBehaviours:mt([Jc.config({dimension:{property:"height"},closedClass:n.markers.closedClass,openClass:n.markers.openClass,shrinkingClass:n.markers.shrinkingClass,growingClass:n.markers.growingClass,onShrunk:s=>{ns(s,n,"overflow-button").each(a=>{so.off(a)}),n.onClosed(s)},onGrown:s=>{n.onOpened(s)},onStartGrow:s=>{ns(s,n,"overflow-button").each(so.on)}}),mn.config({mode:"acyclic",onEscape:s=>(ns(s,n,"overflow-button").each(Nn.focus),A.some(!0))})])})}),Tl({name:"overflow-button",overrides:n=>({buttonBehaviours:mt([so.config({toggleClass:n.markers.overflowToggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])})}),Tl({name:"overflow-group"})]),kV=(n,s)=>ns(n,s,"overflow").map(Jc.hasGrown).getOr(!1),kx=(n,s,a)=>{ns(n,s,"overflow-button").each(i=>{ns(n,s,"overflow").each(d=>{if(aO(n,s),Jc.hasShrunk(d)){const g=s.onOpened;s.onOpened=h=>{a||mn.focusIn(d),g(h),s.onOpened=g}}else{const g=s.onClosed;s.onClosed=h=>{a||Nn.focus(i),g(h),s.onClosed=g}}Jc.toggleGrow(d)})})},aO=(n,s)=>{ns(n,s,"overflow").each(a=>{TB(n,s,i=>{const d=pe(i,g=>y(g));Pm.setGroups(a,d)}),ns(n,s,"overflow-button").each(i=>{Jc.hasGrown(a)&&so.on(i)}),Jc.refresh(a)})},AV=(n,s,a,i)=>{const d="alloy.toolbar.toggle",g=(h,C)=>{const x=pe(C,h.getSystem().build);n.builtGroups.set(x)};return{uid:n.uid,dom:n.dom,components:s,behaviours:lc(n.splitToolbarBehaviours,[Ln.config({others:{overflowGroup:h=>PT.sketch({...i["overflow-group"](),items:[ca.sketch({...i["overflow-button"](),action:C=>{Yn(h,d)}})]})}}),On("toolbar-toggle-events",[je(d,h=>{kx(h,n,!1)})])]),apis:{setGroups:(h,C)=>{g(h,C),aO(h,n)},refresh:h=>aO(h,n),toggle:h=>{kx(h,n,!1)},toggleWithoutFocusing:h=>{kx(h,n,!0)},isOpen:h=>kV(h,n)},domModification:{attributes:{role:"group"}}}},cO=wi({name:"SplitSlidingToolbar",configFields:EV(),partFields:TV(),factory:AV,apis:{setGroups:(n,s,a)=>{n.setGroups(s,a)},refresh:(n,s)=>{n.refresh(s)},toggle:(n,s)=>{n.toggle(s)},isOpen:(n,s)=>n.isOpen(s)}}),Ax=(n,s)=>({uid:n.uid,dom:n.dom,components:n.components,events:h_(n.action),behaviours:lc(n.tabButtonBehaviours,[Nn.config({}),mn.config({mode:"execution",useSpace:!0,useEnter:!0}),Ft.config({store:{mode:"memory",initialValue:n.value}})]),domModification:n.domModification}),DB=uu({name:"TabButton",configFields:[De("uid",void 0),ot("value"),ra("dom","dom",mm(()=>({attributes:{role:"tab",id:Mt("aria"),"aria-selected":"false"}})),Cl()),zo("action"),De("domModification",{}),Ra("tabButtonBehaviours",[Nn,mn,Ft]),ot("view")],factory:Ax}),_V=se([ot("tabs"),ot("dom"),De("clickToDismiss",!1),Ra("tabbarBehaviours",[Eo,mn]),mo(["tabClass","selectedClass"])]),OV=$0({factory:DB,name:"tabs",unit:"tab",overrides:n=>{const s=(i,d)=>{Eo.dehighlight(i,d),pn(i,k0(),{tabbar:i,button:d})},a=(i,d)=>{Eo.highlight(i,d),pn(i,_2(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(n.uid).getOrDie(),g=Eo.isHighlighted(d,i);(g&&n.clickToDismiss?s:g?V:a)(d,i)},domModification:{classes:[n.markers.tabClass]}}}}),RB=se([OV]),DV=(n,s,a,i)=>({uid:n.uid,dom:n.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:lc(n.tabbarBehaviours,[Eo.config({highlightClass:n.markers.selectedClass,itemClass:n.markers.tabClass,onHighlight:(d,g)=>{Cn(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{Cn(g.element,"aria-selected","false")}}),mn.config({mode:"flow",getInitial:d=>Eo.getHighlighted(d).map(g=>g.element),selector:"."+n.markers.tabClass,executeOnMove:!0})])}),NB=wi({name:"Tabbar",configFields:_V(),partFields:RB(),factory:DV}),RV=(n,s)=>({uid:n.uid,dom:n.dom,behaviours:lc(n.tabviewBehaviours,[Bn.config({})]),domModification:{attributes:{role:"tabpanel"}}}),NV=uu({name:"Tabview",configFields:[Ra("tabviewBehaviours",[Bn])],factory:RV}),MV=se([De("selectFirst",!0),xo("onChangeTab"),xo("onDismissTab"),De("tabs",[]),Ra("tabSectionBehaviours",[])]),PV=ac({factory:NB,schema:[ot("dom"),Td("markers",[ot("tabClass"),ot("selectedClass")])],name:"tabbar",defaults:n=>({tabs:n.tabs})}),BV=ac({factory:NV,name:"tabview"}),$V=se([PV,BV]),MB=(n,s,a,i)=>{const d=h=>{const C=Ft.getValue(h);ns(h,n,"tabview").each(x=>{Wt(n.tabs,_=>_.value===C).each(_=>{const N=_.view();na(h.element,"id").each(H=>{Cn(x.element,"aria-labelledby",H)}),Bn.set(x,N),n.onChangeTab(x,h,N)})})},g=(h,C)=>{ns(h,n,"tabbar").each(x=>{C(x).each(ep)})};return{uid:n.uid,dom:n.dom,components:s,behaviours:ex(n.tabSectionBehaviours),events:_s(hn([n.selectFirst?[vs((h,C)=>{g(h,Eo.getFirst)})]:[],[je(_2(),(h,C)=>{const x=C.event.button;d(x)}),je(k0(),(h,C)=>{const x=C.event.button;n.onDismissTab(h,x)})]])),apis:{getViewItems:h=>ns(h,n,"tabview").map(C=>Bn.contents(C)).getOr([]),showTab:(h,C)=>{g(h,T=>{const _=Eo.getCandidates(T);return Wt(_,H=>Ft.getValue(H)===C).filter(H=>!Eo.isHighlighted(T,H))})}}}},Sb=wi({name:"TabSection",configFields:MV(),partFields:$V(),factory:MB,apis:{getViewItems:(n,s)=>n.getViewItems(s),showTab:(n,s,a)=>{n.showTab(s,a)}}}),BT=(n,s,a)=>{const i=Ft.getValue(a);Ft.setValue(s,i),lO(s)},iO=(n,s)=>{const a=n.element,i=xc(a),d=a.dom;Pr(a,"type")!=="number"&&s(d,i)},lO=n=>{iO(n,(s,a)=>s.setSelectionRange(a.length,a.length))},PB=(n,s)=>{iO(n,(a,i)=>a.setSelectionRange(s,i.length))},BB=(n,s,a)=>{if(n.selectsOver){const i=Ft.getValue(s),d=n.getDisplayText(i),g=Ft.getValue(a);return n.getDisplayText(g).indexOf(d)===0?A.some(()=>{BT(n,s,a),PB(s,d.length)}):A.none()}else return A.none()},uO=se("alloy.typeahead.itemexecute"),IV=(n,s,a,i)=>{const d=(N,H,j)=>{n.previewing.set(!1);const Z=Ln.getCoupled(N,"sandbox");if(So.isOpen(Z))We.getCurrent(Z).each(oe=>{Eo.getHighlighted(oe).fold(()=>{j(oe)},()=>{K2(Z,oe.element,"keydown",H)})});else{const oe=le=>{We.getCurrent(le).each(j)};hT(n,h(N),N,Z,i,oe,ja.HighlightMenuAndItem).get(V)}},g=jP(n),h=N=>H=>H.map(j=>{const Z=Ja(j.menus),oe=Ae(Z,Q=>sn(Q.items,me=>me.type==="item"));return Ft.getState(N).update(pe(oe,Q=>Q.data)),j}),C=N=>We.getCurrent(N),x="typeaheadevents",T=[Nn.config({}),Ft.config({onSetValue:n.onSetValue,store:{mode:"dataset",getDataKey:N=>xc(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,H)=>{bl(N.element,n.model.getDisplayText(H))},...n.initialData.map(N=>pf("initialValue",N)).getOr({})}}),jv.config({stream:{mode:"throttle",delay:n.responseTime,stopEvent:!1},onStream:(N,H)=>{const j=Ln.getCoupled(N,"sandbox");if(Nn.isFocused(N)&&xc(N.element).length>=n.minChars){const oe=C(j).bind(Q=>Eo.getHighlighted(Q).map(Ft.getValue));n.previewing.set(!0);const le=Q=>{C(j).each(me=>{oe.fold(()=>{n.model.selectsOver&&Eo.highlightFirst(me)},ve=>{Eo.highlightBy(me,Re=>Ft.getValue(Re).value===ve.value),Eo.getHighlighted(me).orThunk(()=>(Eo.highlightFirst(me),A.none()))})})};hT(n,h(N),N,j,i,le,ja.HighlightJustMenu).get(V)}},cancelEvent:E0()}),mn.config({mode:"special",onDown:(N,H)=>(d(N,H,Eo.highlightFirst),A.some(!0)),onEscape:N=>{const H=Ln.getCoupled(N,"sandbox");return So.isOpen(H)?(So.close(H),A.some(!0)):A.none()},onUp:(N,H)=>(d(N,H,Eo.highlightLast),A.some(!0)),onEnter:N=>{const H=Ln.getCoupled(N,"sandbox"),j=So.isOpen(H);if(j&&!n.previewing.get())return C(H).bind(Z=>Eo.getHighlighted(Z)).map(Z=>(pn(N,uO(),{item:Z}),!0));{const Z=Ft.getValue(N);return Yn(N,E0()),n.onExecute(H,N,Z),j&&So.close(H),A.some(!0)}}}),so.config({toggleClass:n.markers.openClass,aria:{mode:"expanded"}}),Ln.config({others:{sandbox:N=>BP(n,N,{onOpen:()=>so.on(N),onClose:()=>{n.lazyTypeaheadComp.get().each(H=>ps(H.element,"aria-activedescendant")),so.off(N)}})}}),On(x,[vs(N=>{n.lazyTypeaheadComp.set(A.some(N))}),au(N=>{n.lazyTypeaheadComp.set(A.none())}),Af(N=>{const H=V;pT(n,h(N),N,i,H,ja.HighlightMenuAndItem).get(V)}),je(uO(),(N,H)=>{const j=Ln.getCoupled(N,"sandbox");BT(n.model,N,H.event.item),Yn(N,E0()),n.onItemExecute(N,j,H.event.item,Ft.getValue(N)),So.close(j),lO(N)})].concat(n.dismissOnBlur?[je(zh(),N=>{const H=Ln.getCoupled(N,"sandbox");ar(H.element).isNone()&&So.close(H)})]:[]))],_={[El()]:[Ft.name(),jv.name(),x],...n.eventOrder};return{uid:n.uid,dom:I_(jo(n,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...lc(n.typeaheadBehaviours,T)},eventOrder:_}},LV=se([zo("lazySink"),ot("fetch"),De("minChars",5),De("responseTime",1e3),xo("onOpen"),De("getHotspot",A.some),De("getAnchorOverrides",se({})),De("layouts",A.none()),De("eventOrder",{}),hf("model",{},[De("getDisplayText",n=>n.meta!==void 0&&n.meta.text!==void 0?n.meta.text:n.value),De("selectsOver",!0),De("populateFromBrowse",!0)]),xo("onSetValue"),yi("onExecute"),xo("onItemExecute"),De("inputClasses",[]),De("inputAttributes",{}),De("inputStyles",{}),De("matchWidth",!0),De("useMinWidth",!1),De("dismissOnBlur",!0),mo(["openClass"]),zo("initialData"),zo("listRole"),Ra("typeaheadBehaviours",[Nn,Ft,jv,mn,so,Ln]),Tc("lazyTypeaheadComp",()=>Zt(A.none)),Tc("previewing",()=>Zt(!0))].concat($_()).concat(R_())),FV=se([Tl({schema:[aw()],name:"menu",overrides:n=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{n.previewing.get()?n.lazyTypeaheadComp.get().each(d=>{BB(n.model,d,i).fold(()=>{n.model.selectsOver?(Eo.dehighlight(a,i),n.previewing.set(!0)):n.previewing.set(!1)},g=>{g(),n.previewing.set(!1)})}):n.lazyTypeaheadComp.get().each(d=>{n.model.populateFromBrowse&&BT(n.model,d,i),na(i.element,"id").each(g=>Cn(d.element,"aria-activedescendant",g))})},onExecute:(s,a)=>n.lazyTypeaheadComp.get().map(i=>(pn(i,uO(),{item:a}),!0)),onHover:(s,a)=>{n.previewing.set(!1),n.lazyTypeaheadComp.get().each(i=>{n.model.populateFromBrowse&&BT(n.model,i,a)})}})})]),dO=wi({name:"Typeahead",configFields:LV(),partFields:FV(),factory:IV});var $B=tinymce.util.Tools.resolve("tinymce.ThemeManager"),$T=tinymce.util.Tools.resolve("tinymce.util.Delay"),Yv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),HV=tinymce.util.Tools.resolve("tinymce.EditorManager"),Xv=tinymce.util.Tools.resolve("tinymce.Env"),gu;(function(n){n.default="wrap",n.floating="floating",n.sliding="sliding",n.scrolling="scrolling"})(gu||(gu={}));var Qv;(function(n){n.auto="auto",n.top="top",n.bottom="bottom"})(Qv||(Qv={}));const Jo=n=>s=>s.options.get(n),Jv=n=>s=>A.from(n(s)),IB=n=>{const s=Xv.deviceType.isPhone(),a=Xv.deviceType.isTablet()||s,i=n.options.register,d=h=>de(h)||h===!1,g=h=>de(h)||En(h);i("skin",{processor:h=>de(h)||h===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(n.getElement().offsetHeight,400)}),i("width",{processor:g,default:Yv.DOM.getStyle(n.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("font_size_input_default_unit",{processor:"string",default:"pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:h=>de(h)||Ot(h),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:h=>Ot(h)||de(h)||Ct(h)?{value:h,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),wt(9,h=>{i("toolbar"+(h+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:Qv.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:n.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("ui_mode",{processor:"string",default:"combined"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:h=>h==="both"||Ot(h),default:!Xv.deviceType.isTouch()}),i("sidebar_show",{processor:"string"}),i("help_accessibility",{processor:"boolean",default:n.hasPlugin("help")}),i("default_font_stack",{processor:"string[]",default:[]})},LB=Jo("readonly"),IT=Jo("disabled"),mO=Jo("height"),fO=Jo("width"),gO=Jv(Jo("min_width")),hO=Jv(Jo("min_height")),LT=Jv(Jo("max_width")),pO=Jv(Jo("max_height")),FB=Jv(Jo("style_formats")),HB=Jo("style_formats_merge"),bO=Jo("style_formats_autohide"),zB=Jo("content_langs"),VB=Jo("removed_menuitems"),wb=Jo("toolbar_mode"),UB=Jo("toolbar_groups"),vO=Jo("toolbar_location"),FT=Jo("fixed_toolbar_container"),jB=Jo("fixed_toolbar_container_target"),WB=Jo("toolbar_persist"),ZB=Jo("toolbar_sticky_offset"),GB=Jo("menubar"),HT=Jo("toolbar"),qB=Jo("file_picker_callback"),KB=Jo("file_picker_validator_handler"),zT=Jo("font_size_input_default_unit"),yO=Jo("file_picker_types"),CO=Jo("typeahead_urls"),YB=Jo("anchor_top"),xO=Jo("anchor_bottom"),XB=Jo("draggable_modal"),QB=Jo("statusbar"),JB=Jo("elementpath"),SO=Jo("branding"),e6=Jo("resize"),t6=Jo("paste_as_text"),n6=Jo("sidebar_show"),o6=Jo("promotion"),s6=Jo("help_accessibility"),r6=Jo("default_font_stack"),_x=Jo("skin"),Ox=n=>n.options.get("skin")===!1,ey=n=>n.options.get("menubar")!==!1,wO=n=>{const s=n.options.get("skin_url");if(Ox(n))return s;if(s)return n.documentBaseURI.toAbsolute(s);{const a=n.options.get("skin");return HV.baseURL+"/skins/ui/"+a}},zV=n=>A.from(n.options.get("skin_url")),a6=n=>n.options.get("line_height_formats").split(" "),ty=n=>{const s=HT(n),a=de(s),i=Ct(s)&&s.length>0;return!Tp(n)&&(i||a||s===!0)},Dx=n=>{const s=wt(9,i=>n.options.get("toolbar"+(i+1))),a=sn(s,de);return Fr(a.length>0,a)},Tp=n=>Dx(n).fold(()=>{const s=HT(n);return ft(s,de)&&s.length>0},_t),VT=n=>vO(n)===Qv.bottom,c6=n=>{if(!n.inline)return A.none();const s=FT(n)??"";if(s.length>0)return Io(Uc(),s);const a=jB(n);return Dt(a)?A.some(ht.fromDom(a)):A.none()},ny=n=>n.inline&&c6(n).isSome(),EO=n=>c6(n).getOrThunk(()=>dl(pr(ht.fromDom(n.getElement())))),TO=n=>n.inline&&!ey(n)&&!ty(n)&&!Tp(n),oy=n=>(n.options.get("toolbar_sticky")||n.inline)&&!ny(n)&&!TO(n),kp=n=>!ny(n)&&n.options.get("ui_mode")==="split",i6=n=>{const s=n.options.get("menu");return Ls(s,a=>({...a,items:a.items}))};var VV=Object.freeze({__proto__:null,get ToolbarMode(){return gu},get ToolbarLocation(){return Qv},register:IB,getSkinUrl:wO,getSkinUrlOption:zV,isReadOnly:LB,isDisabled:IT,getSkin:_x,isSkinDisabled:Ox,getHeightOption:mO,getWidthOption:fO,getMinWidthOption:gO,getMinHeightOption:hO,getMaxWidthOption:LT,getMaxHeightOption:pO,getUserStyleFormats:FB,shouldMergeStyleFormats:HB,shouldAutoHideStyleFormats:bO,getLineHeightFormats:a6,getContentLanguages:zB,getRemovedMenuItems:VB,isMenubarEnabled:ey,isMultipleToolbars:Tp,isToolbarEnabled:ty,isToolbarPersist:WB,getMultipleToolbarsOption:Dx,getUiContainer:EO,useFixedContainer:ny,isSplitUiMode:kp,getToolbarMode:wb,isDraggableModal:XB,isDistractionFree:TO,isStickyToolbar:oy,getStickyToolbarOffset:ZB,getToolbarLocation:vO,isToolbarLocationBottom:VT,getToolbarGroups:UB,getMenus:i6,getMenubar:GB,getToolbar:HT,getFilePickerCallback:qB,getFilePickerTypes:yO,useTypeaheadUrls:CO,getAnchorTop:YB,getAnchorBottom:xO,getFilePickerValidatorHandler:KB,getFontSizeInputDefaultUnit:zT,useStatusBar:QB,useElementPath:JB,promotionEnabled:o6,useBranding:SO,getResize:e6,getPasteAsText:t6,getSidebarShow:n6,useHelpAccessibility:s6,getDefaultFontStack:r6});const UV=["visible","hidden","clip"],l6=n=>Rt(n).length>0&&!tt(UV,n),u6=n=>{if(ne(n)){const s=bs(n,"overflow-x"),a=bs(n,"overflow-y");return l6(s)||l6(a)}else return!1},d6=n=>n.plugins.fullscreen&&n.plugins.fullscreen.isFullscreen(),jV=(n,s)=>{const a=ur(s,u6),i=a.length===0?Hs(s).map(Ao).map(d=>ur(d,u6)).getOr([]):a;return No(i).map(d=>({element:d,others:i.slice(1),isFullscreen:()=>d6(n)}))},Jg=(n,s)=>kp(n)?jV(n,s):A.none(),Eb=n=>{const s=[...pe(n.others,Ar),za()];return n.isFullscreen()?za():c2(Ar(n.element),s)};/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:m6,setPrototypeOf:Lm,isFrozen:WV,getPrototypeOf:ZV,getOwnPropertyDescriptor:kO}=Object;let{freeze:Cs,seal:qd,create:f6}=Object,{apply:AO,construct:_O}=typeof Reflect<"u"&&Reflect;Cs||(Cs=function(s){return s}),qd||(qd=function(s){return s}),AO||(AO=function(s,a,i){return s.apply(a,i)}),_O||(_O=function(s,a){return new s(...a)});const UT=Dl(Array.prototype.forEach),GV=Dl(Array.prototype.lastIndexOf),g6=Dl(Array.prototype.pop),Rx=Dl(Array.prototype.push),qV=Dl(Array.prototype.splice),jT=Dl(String.prototype.toLowerCase),OO=Dl(String.prototype.toString),h6=Dl(String.prototype.match),Nx=Dl(String.prototype.replace),KV=Dl(String.prototype.indexOf),YV=Dl(String.prototype.trim),Fm=Dl(Object.prototype.hasOwnProperty),Ol=Dl(RegExp.prototype.test),Mx=XV(TypeError);function Dl(n){return function(s){s instanceof RegExp&&(s.lastIndex=0);for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return AO(n,s,i)}}function XV(n){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return _O(n,a)}}function xs(n,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:jT;Lm&&Lm(n,null);let i=s.length;for(;i--;){let d=s[i];if(typeof d=="string"){const g=a(d);g!==d&&(WV(s)||(s[i]=g),d=g)}n[d]=!0}return n}function QV(n){for(let s=0;s<n.length;s++)Fm(n,s)||(n[s]=null);return n}function eh(n){const s=f6(null);for(const[a,i]of m6(n))Fm(n,a)&&(Array.isArray(i)?s[a]=QV(i):i&&typeof i=="object"&&i.constructor===Object?s[a]=eh(i):s[a]=i);return s}function Px(n,s){for(;n!==null;){const i=kO(n,s);if(i){if(i.get)return Dl(i.get);if(typeof i.value=="function")return Dl(i.value)}n=ZV(n)}function a(){return null}return a}const p6=Cs(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),WT=Cs(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),DO=Cs(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),b6=Cs(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),RO=Cs(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),v6=Cs(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),y6=Cs(["#text"]),NO=Cs(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),MO=Cs(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C6=Cs(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ZT=Cs(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),JV=qd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eU=qd(/<%[\w\W]*|[\w\W]*%>/gm),tU=qd(/\$\{[\w\W]*/gm),nU=qd(/^data-[\-\w.\u00B7-\uFFFF]+$/),oU=qd(/^aria-[\-\w]+$/),x6=qd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sU=qd(/^(?:\w+script|data):/i),rU=qd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),S6=qd(/^html$/i),aU=qd(/^[a-z][.\w]*(-[.\w]+)+$/i);var PO=Object.freeze({__proto__:null,ARIA_ATTR:oU,ATTR_WHITESPACE:rU,CUSTOM_ELEMENT:aU,DATA_ATTR:nU,DOCTYPE_NAME:S6,ERB_EXPR:eU,IS_ALLOWED_URI:x6,IS_SCRIPT_OR_DATA:sU,MUSTACHE_EXPR:JV,TMPLIT_EXPR:tU});const Bx={element:1,text:3,progressingInstruction:7,comment:8,document:9},cU=function(){return typeof window>"u"?null:window},iU=function(s,a){if(typeof s!="object"||typeof s.createPolicy!="function")return null;let i=null;const d="data-tt-policy-suffix";a&&a.hasAttribute(d)&&(i=a.getAttribute(d));const g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}},w6=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function E6(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:cU();const s=t=>E6(t);if(s.version="3.2.6",s.removed=[],!n||!n.document||n.document.nodeType!==Bx.document||!n.Element)return s.isSupported=!1,s;let{document:a}=n;const i=a,d=i.currentScript,{DocumentFragment:g,HTMLTemplateElement:h,Node:C,Element:x,NodeFilter:T,NamedNodeMap:_=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:N,DOMParser:H,trustedTypes:j}=n,Z=x.prototype,oe=Px(Z,"cloneNode"),le=Px(Z,"remove"),Q=Px(Z,"nextSibling"),me=Px(Z,"childNodes"),ve=Px(Z,"parentNode");if(typeof h=="function"){const t=a.createElement("template");t.content&&t.content.ownerDocument&&(a=t.content.ownerDocument)}let Re,Ie="";const{implementation:Et,createNodeIterator:Je,createDocumentFragment:ct,getElementsByTagName:at}=a,{importNode:fn}=i;let Jt=w6();s.isSupported=typeof m6=="function"&&typeof ve=="function"&&Et&&Et.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Kn,ERB_EXPR:gn,TMPLIT_EXPR:$n,DATA_ATTR:tn,ARIA_ATTR:Qe,IS_SCRIPT_OR_DATA:pt,ATTR_WHITESPACE:Sn,CUSTOM_ELEMENT:zn}=PO;let{IS_ALLOWED_URI:ln}=PO,Fn=null;const es=xs({},[...p6,...WT,...DO,...RO,...y6]);let Oo=null;const uc=xs({},[...NO,...MO,...C6,...ZT]);let $s=Object.seal(f6(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),el=null,Pa=null,vu=!0,Ka=!0,ad=!1,Lp=!0,Xf=!1,Py=!0,Qf=!1,_S=!1,WN=!1,By=!1,$y=!1,Iy=!1,m7=!0,ZN=!1;const UY="user-content-";let GN=!0,Ly=!1,Fy={},Qd=null;const qN=xs({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let f7=null;const OS=xs({},["audio","video","img","source","image","track"]);let Fp=null;const DS=xs({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),RS="http://www.w3.org/1998/Math/MathML",Gb="http://www.w3.org/2000/svg",ua="http://www.w3.org/1999/xhtml";let uh=ua,kk=!1,Ak=null;const jY=xs({},[RS,Gb,ua],OO);let _k=xs({},["mi","mo","mn","ms","mtext"]),Zm=xs({},["annotation-xml"]);const aJ=xs({},["title","style","font","a","script"]);let NS=null;const g7=["application/xhtml+xml","text/html"],Hy="text/html";let Ya=null,qb=null;const WY=a.createElement("form"),h7=function(o){return o instanceof RegExp||o instanceof Function},KN=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(qb&&qb===o)){if((!o||typeof o!="object")&&(o={}),o=eh(o),NS=g7.indexOf(o.PARSER_MEDIA_TYPE)===-1?Hy:o.PARSER_MEDIA_TYPE,Ya=NS==="application/xhtml+xml"?OO:jT,Fn=Fm(o,"ALLOWED_TAGS")?xs({},o.ALLOWED_TAGS,Ya):es,Oo=Fm(o,"ALLOWED_ATTR")?xs({},o.ALLOWED_ATTR,Ya):uc,Ak=Fm(o,"ALLOWED_NAMESPACES")?xs({},o.ALLOWED_NAMESPACES,OO):jY,Fp=Fm(o,"ADD_URI_SAFE_ATTR")?xs(eh(DS),o.ADD_URI_SAFE_ATTR,Ya):DS,f7=Fm(o,"ADD_DATA_URI_TAGS")?xs(eh(OS),o.ADD_DATA_URI_TAGS,Ya):OS,Qd=Fm(o,"FORBID_CONTENTS")?xs({},o.FORBID_CONTENTS,Ya):qN,el=Fm(o,"FORBID_TAGS")?xs({},o.FORBID_TAGS,Ya):eh({}),Pa=Fm(o,"FORBID_ATTR")?xs({},o.FORBID_ATTR,Ya):eh({}),Fy=Fm(o,"USE_PROFILES")?o.USE_PROFILES:!1,vu=o.ALLOW_ARIA_ATTR!==!1,Ka=o.ALLOW_DATA_ATTR!==!1,ad=o.ALLOW_UNKNOWN_PROTOCOLS||!1,Lp=o.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Xf=o.SAFE_FOR_TEMPLATES||!1,Py=o.SAFE_FOR_XML!==!1,Qf=o.WHOLE_DOCUMENT||!1,By=o.RETURN_DOM||!1,$y=o.RETURN_DOM_FRAGMENT||!1,Iy=o.RETURN_TRUSTED_TYPE||!1,WN=o.FORCE_BODY||!1,m7=o.SANITIZE_DOM!==!1,ZN=o.SANITIZE_NAMED_PROPS||!1,GN=o.KEEP_CONTENT!==!1,Ly=o.IN_PLACE||!1,ln=o.ALLOWED_URI_REGEXP||x6,uh=o.NAMESPACE||ua,_k=o.MATHML_TEXT_INTEGRATION_POINTS||_k,Zm=o.HTML_INTEGRATION_POINTS||Zm,$s=o.CUSTOM_ELEMENT_HANDLING||{},o.CUSTOM_ELEMENT_HANDLING&&h7(o.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($s.tagNameCheck=o.CUSTOM_ELEMENT_HANDLING.tagNameCheck),o.CUSTOM_ELEMENT_HANDLING&&h7(o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($s.attributeNameCheck=o.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),o.CUSTOM_ELEMENT_HANDLING&&typeof o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($s.allowCustomizedBuiltInElements=o.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xf&&(Ka=!1),$y&&(By=!0),Fy&&(Fn=xs({},y6),Oo=[],Fy.html===!0&&(xs(Fn,p6),xs(Oo,NO)),Fy.svg===!0&&(xs(Fn,WT),xs(Oo,MO),xs(Oo,ZT)),Fy.svgFilters===!0&&(xs(Fn,DO),xs(Oo,MO),xs(Oo,ZT)),Fy.mathMl===!0&&(xs(Fn,RO),xs(Oo,C6),xs(Oo,ZT))),o.ADD_TAGS&&(Fn===es&&(Fn=eh(Fn)),xs(Fn,o.ADD_TAGS,Ya)),o.ADD_ATTR&&(Oo===uc&&(Oo=eh(Oo)),xs(Oo,o.ADD_ATTR,Ya)),o.ADD_URI_SAFE_ATTR&&xs(Fp,o.ADD_URI_SAFE_ATTR,Ya),o.FORBID_CONTENTS&&(Qd===qN&&(Qd=eh(Qd)),xs(Qd,o.FORBID_CONTENTS,Ya)),GN&&(Fn["#text"]=!0),Qf&&xs(Fn,["html","head","body"]),Fn.table&&(xs(Fn,["tbody"]),delete el.tbody),o.TRUSTED_TYPES_POLICY){if(typeof o.TRUSTED_TYPES_POLICY.createHTML!="function")throw Mx('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof o.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Mx('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');Re=o.TRUSTED_TYPES_POLICY,Ie=Re.createHTML("")}else Re===void 0&&(Re=iU(j,d)),Re!==null&&typeof Ie=="string"&&(Ie=Re.createHTML(""));Cs&&Cs(o),qb=o}},p7=xs({},[...WT,...DO,...b6]),Kb=xs({},[...RO,...v6]),cJ=function(o){let r=ve(o);(!r||!r.tagName)&&(r={namespaceURI:uh,tagName:"template"});const c=jT(o.tagName),u=jT(r.tagName);return Ak[o.namespaceURI]?o.namespaceURI===Gb?r.namespaceURI===ua?c==="svg":r.namespaceURI===RS?c==="svg"&&(u==="annotation-xml"||_k[u]):!!p7[c]:o.namespaceURI===RS?r.namespaceURI===ua?c==="math":r.namespaceURI===Gb?c==="math"&&Zm[u]:!!Kb[c]:o.namespaceURI===ua?r.namespaceURI===Gb&&!Zm[u]||r.namespaceURI===RS&&!_k[u]?!1:!Kb[c]&&(aJ[c]||!p7[c]):!!(NS==="application/xhtml+xml"&&Ak[o.namespaceURI]):!1},Jf=function(o){Rx(s.removed,{element:o});try{ve(o).removeChild(o)}catch{le(o)}},zy=function(o,r){try{Rx(s.removed,{attribute:r.getAttributeNode(o),from:r})}catch{Rx(s.removed,{attribute:null,from:r})}if(r.removeAttribute(o),o==="is")if(By||$y)try{Jf(r)}catch{}else try{r.setAttribute(o,"")}catch{}},ZY=function(o){let r=null,c=null;if(WN)o="<remove></remove>"+o;else{const b=h6(o,/^[\r\n\t ]+/);c=b&&b[0]}NS==="application/xhtml+xml"&&uh===ua&&(o='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+o+"</body></html>");const u=Re?Re.createHTML(o):o;if(uh===ua)try{r=new H().parseFromString(u,NS)}catch{}if(!r||!r.documentElement){r=Et.createDocument(uh,"template",null);try{r.documentElement.innerHTML=kk?Ie:u}catch{}}const f=r.body||r.documentElement;return o&&c&&f.insertBefore(a.createTextNode(c),f.childNodes[0]||null),uh===ua?at.call(r,Qf?"html":"body")[0]:Qf?r.documentElement:f},b7=function(o){return Je.call(o.ownerDocument||o,o,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT|T.SHOW_PROCESSING_INSTRUCTION|T.SHOW_CDATA_SECTION,null)},YN=function(o){return o instanceof N&&(typeof o.nodeName!="string"||typeof o.textContent!="string"||typeof o.removeChild!="function"||!(o.attributes instanceof _)||typeof o.removeAttribute!="function"||typeof o.setAttribute!="function"||typeof o.namespaceURI!="string"||typeof o.insertBefore!="function"||typeof o.hasChildNodes!="function")},Vy=function(o){return typeof C=="function"&&o instanceof C};function dh(t,o,r){UT(t,c=>{c.call(s,o,r,qb)})}const v7=function(o){let r=null;if(dh(Jt.beforeSanitizeElements,o,null),YN(o))return Jf(o),!0;const c=Ya(o.nodeName);if(dh(Jt.uponSanitizeElement,o,{tagName:c,allowedTags:Fn}),Py&&o.hasChildNodes()&&!Vy(o.firstElementChild)&&Ol(/<[/\w!]/g,o.innerHTML)&&Ol(/<[/\w!]/g,o.textContent)||o.nodeType===Bx.progressingInstruction||Py&&o.nodeType===Bx.comment&&Ol(/<[/\w]/g,o.data))return Jf(o),!0;if(!Fn[c]||el[c]){if(!el[c]&&y7(c)&&($s.tagNameCheck instanceof RegExp&&Ol($s.tagNameCheck,c)||$s.tagNameCheck instanceof Function&&$s.tagNameCheck(c)))return!1;if(GN&&!Qd[c]){const u=ve(o)||o.parentNode,f=me(o)||o.childNodes;if(f&&u){const b=f.length;for(let v=b-1;v>=0;--v){const S=oe(f[v],!0);S.__removalCount=(o.__removalCount||0)+1,u.insertBefore(S,Q(o))}}}return Jf(o),!0}return o instanceof x&&!cJ(o)||(c==="noscript"||c==="noembed"||c==="noframes")&&Ol(/<\/no(script|embed|frames)/i,o.innerHTML)?(Jf(o),!0):(Xf&&o.nodeType===Bx.text&&(r=o.textContent,UT([Kn,gn,$n],u=>{r=Nx(r,u," ")}),o.textContent!==r&&(Rx(s.removed,{element:o.cloneNode()}),o.textContent=r)),dh(Jt.afterSanitizeElements,o,null),!1)},XN=function(o,r,c){if(m7&&(r==="id"||r==="name")&&(c in a||c in WY))return!1;if(!(Ka&&!Pa[r]&&Ol(tn,r))){if(!(vu&&Ol(Qe,r))){if(!Oo[r]||Pa[r]){if(!(y7(o)&&($s.tagNameCheck instanceof RegExp&&Ol($s.tagNameCheck,o)||$s.tagNameCheck instanceof Function&&$s.tagNameCheck(o))&&($s.attributeNameCheck instanceof RegExp&&Ol($s.attributeNameCheck,r)||$s.attributeNameCheck instanceof Function&&$s.attributeNameCheck(r))||r==="is"&&$s.allowCustomizedBuiltInElements&&($s.tagNameCheck instanceof RegExp&&Ol($s.tagNameCheck,c)||$s.tagNameCheck instanceof Function&&$s.tagNameCheck(c))))return!1}else if(!Fp[r]){if(!Ol(ln,Nx(c,Sn,""))){if(!((r==="src"||r==="xlink:href"||r==="href")&&o!=="script"&&KV(c,"data:")===0&&f7[o])){if(!(ad&&!Ol(pt,Nx(c,Sn,"")))){if(c)return!1}}}}}}return!0},y7=function(o){return o!=="annotation-xml"&&h6(o,zn)},GY=function(o){dh(Jt.beforeSanitizeAttributes,o,null);const{attributes:r}=o;if(!r||YN(o))return;const c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Oo,forceKeepAttr:void 0};let u=r.length;for(;u--;){const f=r[u],{name:b,namespaceURI:v,value:S}=f,O=Ya(b),R=S;let P=b==="value"?R:YV(R);if(c.attrName=O,c.attrValue=P,c.keepAttr=!0,c.forceKeepAttr=void 0,dh(Jt.uponSanitizeAttribute,o,c),P=c.attrValue,ZN&&(O==="id"||O==="name")&&(zy(b,o),P=UY+P),Py&&Ol(/((--!?|])>)|<\/(style|title)/i,P)){zy(b,o);continue}if(c.forceKeepAttr)continue;if(!c.keepAttr){zy(b,o);continue}if(!Lp&&Ol(/\/>/i,P)){zy(b,o);continue}Xf&&UT([Kn,gn,$n],ee=>{P=Nx(P,ee," ")});const z=Ya(o.nodeName);if(!XN(z,O,P)){zy(b,o);continue}if(Re&&typeof j=="object"&&typeof j.getAttributeType=="function"&&!v)switch(j.getAttributeType(z,O)){case"TrustedHTML":{P=Re.createHTML(P);break}case"TrustedScriptURL":{P=Re.createScriptURL(P);break}}if(P!==R)try{v?o.setAttributeNS(v,b,P):o.setAttribute(b,P),YN(o)?Jf(o):g6(s.removed)}catch{zy(b,o)}}dh(Jt.afterSanitizeAttributes,o,null)},e=function t(o){let r=null;const c=b7(o);for(dh(Jt.beforeSanitizeShadowDOM,o,null);r=c.nextNode();)dh(Jt.uponSanitizeShadowNode,r,null),v7(r),GY(r),r.content instanceof g&&t(r.content);dh(Jt.afterSanitizeShadowDOM,o,null)};return s.sanitize=function(t){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=null,c=null,u=null,f=null;if(kk=!t,kk&&(t="<!-->"),typeof t!="string"&&!Vy(t))if(typeof t.toString=="function"){if(t=t.toString(),typeof t!="string")throw Mx("dirty is not a string, aborting")}else throw Mx("toString is not a function");if(!s.isSupported)return t;if(_S||KN(o),s.removed=[],typeof t=="string"&&(Ly=!1),Ly){if(t.nodeName){const S=Ya(t.nodeName);if(!Fn[S]||el[S])throw Mx("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof C)r=ZY("<!---->"),c=r.ownerDocument.importNode(t,!0),c.nodeType===Bx.element&&c.nodeName==="BODY"||c.nodeName==="HTML"?r=c:r.appendChild(c);else{if(!By&&!Xf&&!Qf&&t.indexOf("<")===-1)return Re&&Iy?Re.createHTML(t):t;if(r=ZY(t),!r)return By?null:Iy?Ie:""}r&&WN&&Jf(r.firstChild);const b=b7(Ly?t:r);for(;u=b.nextNode();)v7(u),GY(u),u.content instanceof g&&e(u.content);if(Ly)return t;if(By){if($y)for(f=ct.call(r.ownerDocument);r.firstChild;)f.appendChild(r.firstChild);else f=r;return(Oo.shadowroot||Oo.shadowrootmode)&&(f=fn.call(i,f,!0)),f}let v=Qf?r.outerHTML:r.innerHTML;return Qf&&Fn["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&Ol(S6,r.ownerDocument.doctype.name)&&(v="<!DOCTYPE "+r.ownerDocument.doctype.name+`>
`+v),Xf&&UT([Kn,gn,$n],S=>{v=Nx(v,S," ")}),Re&&Iy?Re.createHTML(v):v},s.setConfig=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};KN(t),_S=!0},s.clearConfig=function(){qb=null,_S=!1},s.isValidAttribute=function(t,o,r){qb||KN({});const c=Ya(t),u=Ya(o);return XN(c,u,r)},s.addHook=function(t,o){typeof o=="function"&&Rx(Jt[t],o)},s.removeHook=function(t,o){if(o!==void 0){const r=GV(Jt[t],o);return r===-1?void 0:qV(Jt[t],r,1)[0]}return g6(Jt[t])},s.removeHooks=function(t){Jt[t]=[]},s.removeAllHooks=function(){Jt=w6()},s}var BO=E6();const $x=n=>BO().sanitize(n);var Bc=tinymce.util.Tools.resolve("tinymce.util.I18n");const GT={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-disc":!0,"list-bull-default":!0,"list-bull-square":!0},T6="temporary-placeholder",$O=n=>()=>en(n,T6).getOr("!not found!"),IO=(n,s)=>{const a=n.toLowerCase();if(Bc.isRtl()){const i=Hl(a,"-rtl");return ho(s,i)?i:a}else return a},k6=(n,s)=>en(s,IO(n,s)),lU=(n,s)=>{const a=s();return k6(n,a).getOrThunk($O(a))},qT=(n,s,a)=>{const i=s();return k6(n,i).or(a).getOrThunk($O(i))},sy=n=>Bc.isRtl()?ho(GT,n):!1,LO=()=>On("add-focusable",[vs(n=>{Sd(n.element,"svg").each(s=>Cn(s,"focusable","false"))})]),FO=(n,s,a,i)=>{const d=sy(s)?["tox-icon--flip"]:[],g=en(a,IO(s,a)).or(i).getOrThunk($O(a));return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes.concat(d),innerHtml:g},behaviours:mt([...n.behaviours??[],LO()]),eventOrder:n.eventOrder??{}}},hu=(n,s,a,i=A.none())=>FO(s,n,a(),i),uU=(n,s,a)=>{const i=a(),d=Wt(n,g=>ho(i,IO(g,i)));return FO(s,d.getOr(T6),i,A.none())},dU={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},HO=uu({name:"Notification",factory:n=>{const s=Mt("notification-text"),a=_o({dom:Mm(`<p id=${s}>${$x(n.backstageProvider.translate(n.text))}</p>`),behaviours:mt([Bn.config({})])}),i=Z=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${Z}%`}}}),d=Z=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${Z}%`}}),g=_o({dom:{tag:"div",classes:n.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},d(0)],behaviours:mt([Bn.config({})])}),x={updateProgress:(Z,oe)=>{Z.getSystem().isConnected()&&g.getOpt(Z).each(le=>{Bn.set(le,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(oe)]},d(oe)])})},updateText:(Z,oe)=>{if(Z.getSystem().isConnected()){const le=a.get(Z);Bn.set(le,[Es(oe)])}}},T=hn([n.icon.toArray(),[n.level],A.from(dU[n.level]).toArray()]),_=_o(ca.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":n.backstageProvider.translate("Close")}},components:[hu("close",{tag:"span",classes:["tox-icon"]},n.iconProvider)],buttonBehaviours:mt([ms.config({}),ys.config({...n.backstageProvider.tooltips.getConfig({tooltipText:n.backstageProvider.translate("Close")})})]),action:Z=>{n.onAction(Z)}})),N=uU(T,{tag:"div",classes:["tox-notification__icon"]},n.iconProvider),H={dom:{tag:"div",classes:["tox-notification__body"]},components:[a.asSpec()],behaviours:mt([Bn.config({})])},j=[N,H];return{uid:n.uid,dom:{tag:"div",attributes:{role:"alert","aria-labelledby":s},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},behaviours:mt([ms.config({}),Nn.config({}),mn.config({mode:"special",onEscape:Z=>(n.onAction(Z),A.some(!0))})]),components:j.concat(n.progress?[g.asSpec()]:[]).concat([_.asSpec()]),apis:x}},configFields:[kc("level","info",["success","error","warning","warn","info"]),ot("progress"),zo("icon"),ot("onAction"),ot("text"),ot("iconProvider"),ot("backstageProvider")],apis:{updateProgress:(n,s,a)=>{n.updateProgress(s,a)},updateText:(n,s,a)=>{n.updateText(s,a)}}});var mU=(n,s,a,i)=>{const d=s.backstage.shared,g=()=>ht.fromDom(n.queryCommandValue("ToggleView")===""?n.getContentAreaContainer():n.getContainer()),h=()=>{const N=Ar(g());return A.some(N)},C=N=>{h().each(H=>{Te(N,j=>{Jn(j.element,"width"),ma(j.element)>H.width&&Tn(j.element,"width",H.width+"px")})})};return{open:(N,H,j)=>{const Z=()=>{const ve=Je=>{Bn.remove(Je,le),Q()},Re=(Je,ct)=>{ul(Je.element).length===0?Ie(Je,ct):Et(Je,ct)},Ie=(Je,ct)=>{Zs.hide(Je),i.clear(),ct&&n.focus()},Et=(Je,ct)=>{ct&&mn.focusIn(Je)};i.on(Je=>{H();const ct=j();ve(Je),Re(Je,ct)})},oe=()=>!oy(n)||!d.header.isPositionedAtTop(),le=p(HO.sketch({text:N.text,level:tt(["success","error","warning","warn","info"],N.type)?N.type:void 0,progress:N.progressBar===!0,icon:N.icon,onAction:Z,iconProvider:d.providers.icons,backstageProvider:d.providers}));if(i.isSet()){const ve=y(le);i.on(Re=>{Bn.append(Re,ve),Zs.reposition(Re),le.hasConfigured(Bs)&&Bs.refresh(Re),C(Re.components())})}else{const ve=p(Zs.sketch({dom:{tag:"div",classes:["tox-notifications-container"],attributes:{"aria-label":"Notifications",role:"region"}},lazySink:d.getSink,fireDismissalEventInstead:{},...d.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}},inlineBehaviours:mt([mn.config({mode:"cyclic",selector:".tox-notification, .tox-notification a, .tox-notification button"}),Bn.config({}),...oe()?[Bs.config({contextual:{lazyContext:()=>A.some(Ar(g())),fadeInClass:"tox-notification-container-dock-fadein",fadeOutClass:"tox-notification-container-dock-fadeout",transitionClass:"tox-notification-container-dock-transition"},modes:["top"],lazyViewport:Je=>Jg(n,Je.element).map(at=>({bounds:Eb(at),optScrollEnv:A.some({currentScrollTop:at.element.dom.scrollTop,scrollElmTop:Ea(at.element).top})})).getOrThunk(()=>({bounds:za(),optScrollEnv:A.none()}))})]:[]])})),Re=y(le),Ie={maxHeightFunction:Bg()},Et={...d.anchors.banner(),overrides:Ie};i.set(ve),a.add(ve),Zs.showWithinBounds(ve,Re,{anchor:Et},h)}En(N.timeout)&&N.timeout>0&&$T.setEditorTimeout(n,()=>{Z()},N.timeout);const Q=()=>{i.on(ve=>{Zs.reposition(ve),ve.hasConfigured(Bs)&&Bs.refresh(ve),C(ve.components())})};return{close:Z,reposition:Q,text:ve=>{HO.updateText(le,ve)},settings:N,getEl:()=>le.element.dom,progressBar:{value:ve=>{HO.updateProgress(le,ve)}}}},close:N=>{N.close()},getArgs:N=>N.settings}};const fU={setup:(n,s)=>{const a=(d,g)=>{pn(d,aa(),{raw:g})},i=()=>n.getMenu().bind(Eo.getHighlighted);s.on("keydown",d=>{const g=d.which;n.isActive()&&(n.isMenuOpen()?g===13?(i().each(ep),d.preventDefault()):g===40?(i().fold(()=>{n.getMenu().each(Eo.highlightFirst)},h=>{a(h,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(h=>{a(h,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&n.cancelIfNecessary())}),s.on("NodeChange",()=>{n.isActive()&&!n.isProcessingAction()&&!s.queryCommandState("mceAutoCompleterInRange")&&n.cancelIfNecessary()})}};var zO;(function(n){n[n.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",n[n.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(zO||(zO={}));var Kd=zO;const VO="tox-menu-nav__js",Ix="tox-collection__item",Ap="tox-swatch",Tb={normal:VO,color:Ap},UO="tox-collection__item--enabled",A6="tox-collection__group-heading",jO="tox-collection__item-icon",KT="tox-collection__item-image",gU="tox-collection__item-image-selector",th="tox-collection__item-label",kb="tox-collection__item-accessory",_6="tox-collection__item-caret",hU="tox-collection__item-checkmark",Ab="tox-collection__item--active",O6="tox-collection__item-container",pU="tox-collection__item-container--column",D6="tox-collection__item-container--row",bU="tox-collection__item-container--align-right",vU="tox-collection__item-container--align-left",YT="tox-collection__item-container--valign-top",R6="tox-collection__item-container--valign-middle",yU="tox-collection__item-container--valign-bottom",WO=n=>en(Tb,n).getOr(VO),CU=n=>n==="color"?"tox-swatches":"tox-menu",ZO=n=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:CU(n),tieredMenu:"tox-tiered-menu"}),Vf=n=>{const s=ZO(n);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:WO(n)}},zQ=(n,s,a)=>{const i=ZO(a);return{tag:"div",classes:hn([[i.menu,`tox-menu-${s}-column`],n?[i.hasIcons]:[]])}},GO=[Xg.parts.items({})],Lx=(n,s,a)=>{const i=ZO(a);return{dom:{tag:"div",classes:hn([[i.tieredMenu]])},markers:Vf(a)}},N6=Mt("refetch-trigger-event"),M6=Mt("redirect-menu-item-interaction"),P6="tox-menu__searcher",Fx=n=>Io(n.element,`.${P6}`).bind(s=>n.getSystem().getByDom(s).toOptional()),B6=Fx,xU=(n,s)=>{Ft.setValue(n,s.fetchPattern),n.element.dom.selectionStart=s.selectionStart,n.element.dom.selectionEnd=s.selectionEnd},qO=n=>{const s=Ft.getValue(n),a=n.element.dom.selectionStart,i=n.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},$6=(n,s)=>{na(s.element,"id").each(a=>Cn(n.element,"aria-activedescendant",a))},SU=n=>{const s=(d,g)=>(g.cut(),A.none()),a=(d,g)=>{const h={interactionEvent:g.event,eventType:g.event.raw.type};return pn(d,M6,h),A.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[Ix]},components:[zf.sketch({inputClasses:[P6,"tox-textfield"],inputAttributes:{...n.placeholder.map(d=>({placeholder:n.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:mt([On(i,[je($u(),d=>{Yn(d,N6)}),je(aa(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),mn.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,mn.name()]}})]}},XT="tox-collection--results__js",Hx=n=>n.dom?{...n,dom:{...n.dom,attributes:{...n.dom.attributes??{},id:Mt("aria-item-search-result-id"),"aria-selected":"false"}}}:n,KO="Use arrow keys to navigate.",YO=(n,s)=>a=>{const i=on(a,s);return pe(i,d=>({dom:n,components:d}))},XO=n=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"],attributes:{"aria-label":Bc.translate(KO)}},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Xg.parts.items({preprocess:n!=="auto"?YO({tag:"div",classes:["tox-swatches__row"]},n):nn})]}]}),wU=n=>({dom:{tag:"div",classes:["tox-menu","tox-image-selector-menu"]},components:[{dom:{tag:"div",classes:["tox-image-selector"]},components:[Xg.parts.items({preprocess:n!=="auto"?YO({tag:"div",classes:["tox-image-selector__row"]},n):nn})]}]}),QO=n=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Xg.parts.items({preprocess:YO({tag:"div",classes:["tox-collection__group"]},n)})]}),I6=(n,s)=>{const a=[];let i=[];return Te(n,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(ho(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),pe(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},JO=(n,s,a)=>Xg.parts.items({preprocess:i=>{const d=pe(i,a);return n!=="auto"&&n>1?YO({tag:"div",classes:["tox-collection__group"]},n)(d):I6(d,(g,h)=>s[h].type==="separator")}}),L6=n=>St(n,s=>s.type==="widget"),eD=(n,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{...L6(s)?{"aria-label":Bc.translate(KO)}:{}}},components:[JO(n,s,nn)]}),F6=(n,s,a=!0)=>{const i=Mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",XT].concat(n===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[JO(n,s,Hx)]}},nh=(n,s,a)=>{const i=Mt("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(n===1?["tox-collection--list"]:["tox-collection--grid"])},components:[SU({i18n:Bc.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...n===1?["tox-collection--list"]:["tox-collection--grid"],XT],attributes:{id:i}},components:[JO(n,s,Hx)]}]}},_b=(n,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Xg.parts.items({preprocess:a=>I6(a,(i,d)=>n[d].type==="separator")})]}),zx=n=>St(n,s=>"icon"in s&&s.icon!==void 0),Hm=n=>(console.error(Bh(n)),console.log(n),A.none()),H6=(n,s,a,i,d)=>{const g=_b(a);return{value:n,dom:g.dom,components:g.components,items:a}},tD=(n,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?eD(i,a):d.searchMode.searchMode==="search-with-field"?nh(i,a,d.searchMode):F6(i,a);if(d.menuType==="color"){const h=XO(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="imageselector"&&i!=="auto"){const h=wU(i);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const h=eD(i,a);return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const h=g();return{value:n,dom:h.dom,components:h.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const h=QO(i);return{value:n,dom:h.dom,components:h.components,items:a}}else return{value:n,dom:zQ(s,i,d.menuType),components:GO,items:a}},sr=Xs("type"),nD=Xs("name"),QT=Xs("label"),oh=Xs("text"),z6=Xs("title"),oD=Xs("icon"),EU=Xs("url"),ry=Xs("value"),TU=bi("fetch"),kU=bi("getSubmenuItems"),_p=bi("onAction"),AU=bi("onItemAction"),Ob=us("onSetup",()=>V),_U=Qs("name"),sh=Qs("text"),OU=Qs("role"),Ju=Qs("icon"),Db=Qs("tooltip"),V6=Qs("chevronTooltip"),Vx=Qs("label"),sD=Qs("shortcut"),DU=eu("select"),ay=Wr("active",!1),RU=Wr("borderless",!1),ed=Wr("enabled",!0),Ux=Wr("primary",!1),U6=n=>De("columns",n),rD=De("meta",{}),aD=us("onAction",V),Rb=n=>Ws("type",n),cD=n=>ra("name","name",g1(()=>Mt(`${n}-name`)),jr),j6=n=>ra("value","value",g1(()=>Mt(`${n}-value`)),Cl()),cy=[sr,oh,Jl("level",["info","warn","error","success"]),oD,De("url","")],NU=bn(cy),MU=n=>[sr,n],PU=[sr,oh,ed,cD("button"),Ju,RU,y2("buttonType",["primary","secondary","toolbar"]),Ux,Ws("context","mode:design")],JT=bn(PU),ti=[sr,nD],td=ti.concat([Vx]),W6=ti.concat([QT,ed,Ws("context","mode:design")]),BU=bn(W6),$U=Zn,IU=td.concat([U6("auto"),Ws("context","mode:design")]),LU=bn(IU),Z6=Ph([ry,oh,oD]),G6=td.concat([Ws("storageKey","default"),Ws("context","mode:design")]),FU=bn(G6),HU=jr,VU=bn(td),q6=jr,K6=ti.concat([Ws("tag","textarea"),Xs("scriptId"),Xs("scriptUrl"),eu("onFocus"),XS("settings",void 0)]),Y6=ti.concat([Ws("tag","textarea"),bi("init")]),UU=Ed(n=>zs("customeditor.old",pi(Y6),n).orThunk(()=>zs("customeditor.new",pi(K6),n))),jU=jr,Op=[ed,sh,OU,sD,j6("menuitem"),rD,Ws("context","mode:design")],WU=bn([sr,nD].concat(Op)),ZU=Zn,iy=[cD("button"),Ju,kc("align","end",["start","end"]),Ux,ed,y2("buttonType",["primary","secondary"]),Ws("context","mode:design")],zm=[...iy,oh],e4=[Jl("type",["submit","cancel","custom"]),...zm],nd=[Jl("type",["menu"]),sh,Db,Ju,qc("items",WU),...iy],GU=[...iy,Jl("type",["togglebutton"]),Db,Ju,sh,Wr("active",!1)],t4=Ec("type",{submit:e4,cancel:e4,custom:e4,menu:nd,togglebutton:GU}),qU=td.concat([Ws("context","mode:design"),Qs("dropAreaLabel"),Qs("buttonLabel"),Qs("allowedFileTypes"),v0("allowedFileExtensions",jr)]),Nb=bn(qU),KU=qS(),iD=n=>[sr,y1("columns"),n],lD=[sr,Xs("html"),kc("presets","presentation",["presentation","document"]),us("onInit",V),Wr("stretched",!1)],YU=bn(lD),XU=td.concat([Wr("border",!1),Wr("sandboxed",!0),Wr("streamContent",!1),Wr("transparent",!0)]),Mb=bn(XU),X6=jr,Q6=bn(ti.concat([Qs("height")])),QU=bn([Xs("url"),$h("zoom"),$h("cachedWidth"),$h("cachedHeight")]),uD=td.concat([Qs("inputMode"),Qs("placeholder"),Wr("maximized",!1),ed,Ws("context","mode:design")]),J6=bn(uD),dD=jr,e$=n=>[sr,QT,n,kc("align","start",["start","center","end"]),Qs("for")],t$=[oh,ry],jx=[oh,qc("items",xg("items",()=>n$))],n$=Mh([bn(t$),bn(jx)]),JU=td.concat([qc("items",n$),ed,Ws("context","mode:design")]),ej=bn(JU),tj=jr,mD=td.concat([YS("items",[oh,ry]),C1("size",1),ed,Ws("context","mode:design")]),nj=bn(mD),fD=jr,oj=td.concat([Wr("constrain",!0),ed,Ws("context","mode:design")]),Wx=bn(oj),o$=bn([Xs("width"),Xs("height")]),s$=ti.concat([QT,C1("min",0),C1("max",0)]),sj=bn(s$),rj=d2,aj=[sr,qc("header",jr),qc("cells",or(jr))],cj=bn(aj),n4=td.concat([Qs("placeholder"),Wr("maximized",!1),ed,Ws("context","mode:design"),C2("spellcheck")]),r$=bn(n4),ij=jr,gD=[Ws("buttonType","default"),Qs("text"),Qs("tooltip"),Qs("icon"),Zi("search",!1,Mh([Zn,bn([Qs("placeholder")])],n=>Ot(n)?n?A.some({placeholder:A.none()}):A.none():A.some(n))),bi("fetch"),us("onSetup",()=>V),Ws("context","mode:design")],Dp=bn([sr,...gD]),hD=n=>zs("menubutton",Dp,n),ly=[Jl("type",["directory","leaf"]),z6,Xs("id"),Bu("menu",Dp),Qs("customStateIcon"),Qs("customStateIconTooltip")],pD=bn(ly),lj=ly.concat([qc("children",xg("children",()=>Cg("type",{directory:a$,leaf:pD})))]),a$=bn(lj),Pb=Cg("type",{directory:a$,leaf:pD}),c$=[sr,qc("items",Pb),eu("onLeafAction"),eu("onToggleExpand"),gf("defaultExpandedIds",[],jr),Qs("defaultSelectedId")],uj=bn(c$),i$=td.concat([kc("filetype","file",["image","media","file"]),ed,Qs("picker_text"),Ws("context","mode:design")]),dj=bn(i$),mj=bn([ry,rD]),bD=n=>ra("items","items",xl(),or(Ed(s=>zs(`Checking item of ${n}`,o4,s).fold(a=>rn.error(Bh(a)),a=>rn.value(a))))),o4=v1(()=>Cg("type",{alertbanner:NU,bar:bn(MU(bD("bar"))),button:JT,checkbox:BU,colorinput:FU,colorpicker:VU,dropzone:Nb,grid:bn(iD(bD("grid"))),iframe:Mb,input:J6,listbox:ej,selectbox:nj,sizeinput:Wx,slider:sj,textarea:r$,urlinput:dj,customeditor:UU,htmlpanel:YU,imagepreview:Q6,collection:LU,label:bn(e$(bD("label"))),table:cj,tree:uj,panel:l$})),fj=[sr,De("classes",[]),qc("items",o4)],l$=bn(fj),gj=[cD("tab"),z6,qc("items",o4)],hj=[sr,YS("tabs",gj)],pj=bn(hj),bj=zm,vj=t4,yj=bn([Xs("title"),Gc("body",Cg("type",{panel:l$,tabpanel:pj})),Ws("size","normal"),gf("buttons",[],vj),De("initialData",{}),us("onAction",V),us("onChange",V),us("onSubmit",V),us("onClose",V),us("onCancel",V),us("onTabChange",V)]),u$=n=>zs("dialog",yj,n),Cj=bn([Jl("type",["cancel","custom"]),...bj]),xj=bn([Xs("title"),Xs("url"),$h("height"),$h("width"),v0("buttons",Cj),us("onAction",V),us("onCancel",V),us("onClose",V),us("onMessage",V)]),Sj=n=>zs("dialog",xj,n),vD=n=>Oe(n)?[n].concat(Ae(Ja(n),vD)):Ct(n)?Ae(n,vD):[],wj=n=>de(n.type)&&de(n.name),Ej={checkbox:$U,colorinput:HU,colorpicker:q6,dropzone:KU,input:dD,iframe:X6,imagepreview:QU,selectbox:fD,sizeinput:o$,slider:rj,listbox:tj,size:o$,textarea:ij,urlinput:mj,customeditor:jU,collection:Z6,togglemenuitem:ZU},d$=n=>A.from(Ej[n.type]),m$=n=>sn(vD(n),wj),Tj=n=>{const s=m$(n),a=Ae(s,i=>d$(i).fold(()=>[],d=>[Gc(i.name,d)]));return bn(a)},Zx=n=>{const s=wl(u$(n)),a=Tj(n),i=n.initialData??{};return{internalDialog:s,dataValidator:a,initialData:i}},Bb={open:(n,s)=>{const a=Zx(s);return n(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(n,s)=>{const a=wl(Sj(s));return n(a)},redial:n=>Zx(n)},f$=bn([sr,sh]),kj=n=>zs("separatormenuitem",f$,n),Aj=bn([Rb("autocompleteitem"),ay,ed,rD,ry,sh,Ju]),_j=n=>zs("Autocompleter.Separator",f$,n),Oj=n=>zs("Autocompleter.Item",Aj,n),uy=[ed,Db,Ju,sh,Ob,Ws("context","mode:design")],Dj=bn([sr,_p,sD].concat(uy)),Uf=n=>zs("toolbarbutton",Dj,n),yD=[ay].concat(uy),Rj=bn(yD.concat([sr,_p,sD])),CD=n=>zs("ToggleButton",Rj,n),s4=[us("predicate",dn),kc("scope","node",["node","editor"]),kc("position","selection",["node","selection","line"])],Nj=uy.concat([Rb("contextformbutton"),Ws("align","end"),Ux,_p,Tc("original",nn)]),Mj=yD.concat([Rb("contextformbutton"),Ws("align","end"),Ux,_p,Tc("original",nn)]),Pj=uy.concat([Rb("contextformbutton")]),xD=yD.concat([Rb("contextformtogglebutton")]),g$=Ec("type",{contextformbutton:Nj,contextformtogglebutton:Mj}),Gx=[Vx,qc("commands",g$),Bu("launch",Ec("type",{contextformbutton:Pj,contextformtogglebutton:xD})),us("onInput",V),us("onSetup",V)],r4=[...s4,...Gx,Jl("type",["contextform"]),us("initValue",se("")),Qs("placeholder")],dy=[...s4,...Gx,Jl("type",["contextsliderform"]),us("initValue",se(0)),us("min",se(0)),us("max",se(100))],Bj=[...s4,...Gx,Jl("type",["contextsizeinputform"]),us("initValue",se({width:"",height:""}))],h$=Ec("type",{contextform:r4,contextsliderform:dy,contextsizeinputform:Bj}),$j=n=>zs("ContextForm",h$,n),my=uy.concat([Rb("contexttoolbarbutton")]),Ij=bn([Rb("contexttoolbar"),Kc("launch",my),Gc("items",Mh([jr,Ph([Qs("name"),Qs("label"),qc("items",jr)])]))].concat(s4)),a4=n=>({name:n.name.getOrUndefined(),label:n.label.getOrUndefined(),items:n.items}),SD=n=>({...n,launch:n.launch.getOrUndefined(),items:de(n.items)?n.items:pe(n.items,a4)}),Lj=n=>zs("ContextToolbar",Ij,n),Fj=[sr,Xs("src"),Qs("alt"),gf("classes",[],jr)],Hj=bn(Fj),wD=[sr,oh,_U,gf("classes",["tox-collection__item-label"],jr)],zj=bn(wD),p$=v1(()=>Cg("type",{cardimage:Hj,cardtext:zj,cardcontainer:Vj})),Vj=bn([sr,Ws("direction","horizontal"),Ws("align","left"),Ws("valign","middle"),qc("items",p$)]),b$=bn([sr,Vx,qc("items",p$),Ob,aD].concat(Op)),ED=n=>zs("cardmenuitem",b$,n),Uj=bn([sr,ay,Ju,Vx].concat(Op)),jj=n=>zs("choicemenuitem",Uj,n),TD=[sr,Xs("fancytype"),aD],v$=[De("initData",{})].concat(TD),Wj=[eu("select"),hf("initData",{},[Wr("allowCustomColors",!0),Ws("storageKey","default"),v0("colors",Cl())])].concat(TD),kD=[eu("select"),Td("initData",[y1("columns"),gf("items",[],Cl())])].concat(TD),y$=Ec("fancytype",{inserttable:v$,colorswatch:Wj,imageselect:kD}),C$=n=>zs("fancymenuitem",y$,n),Zj=bn([sr,ay,EU,Vx,Db].concat(Op)),Gj=bn([sr,ay,oD,QT,Db,ry].concat(Op)),x$=n=>zs("imagemenuitem",Zj,n),AD=n=>zs("resetimageitem",Gj,n),qj=bn([sr,Ob,aD,Ju].concat(Op)),Kj=n=>zs("menuitem",qj,n),Yj=bn([sr,kU,Ob,Ju].concat(Op)),Xj=n=>zs("nestedmenuitem",Yj,n),Qj=bn([sr,Ju,ay,Ob,_p].concat(Op)),Jj=n=>zs("togglemenuitem",Qj,n),eW=bn([Ju,Db,us("onShow",V),us("onHide",V),Ob]),_D=n=>zs("sidebar",eW,n),tW=bn([sr,Gc("items",Mh([Ph([nD,qc("items",jr)]),jr]))].concat(uy)),OD=n=>zs("GroupToolbarButton",tW,n),nW=bn([sr,Db,V6,Ju,sh,DU,TU,Ob,kc("presets","normal",["normal","color","listpreview"]),U6(1),_p,AU,Ws("context","mode:design")]),oW=n=>zs("SplitButton",nW,n),c4=[sh,Ju,Qs("tooltip"),kc("buttonType","secondary",["primary","secondary"]),Wr("borderless",!1),bi("onAction"),Ws("context","mode:design")],sW=[...c4,oh,Jl("type",["button"])],rW=[...c4,Wr("active",!1),Jl("type",["togglebutton"])],DD={button:sW,togglebutton:rW},aW=[Jl("type",["group"]),gf("buttons",[],Ec("type",DD))],cW=Ec("type",{...DD,group:aW}),iW=bn([gf("buttons",[],cW),bi("onShow"),bi("onHide")]),lW=n=>zs("view",iW,n),RD=(n,s,a)=>{const i=Ur(n.element,"."+a);if(i.length>0){const d=io(i,g=>{const h=g.dom.getBoundingClientRect().top,C=i[0].dom.getBoundingClientRect().top;return Math.abs(h-C)>s}).getOr(i.length);return A.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return A.none()},S$=(n,s)=>mt([On(n,s)]),fy={namedEvents:S$,unnamedEvents:n=>S$(Mt("unnamed-events"),n)},Vm={item:n=>Xt.config({disabled:n,disableClass:"tox-collection__item--state-disabled"}),button:n=>Xt.config({disabled:n}),splitButton:n=>Xt.config({disabled:n,disableClass:"tox-tbtn--disabled"}),toolbarButton:n=>Xt.config({disabled:n,disableClass:"tox-tbtn--disabled",useNative:!1})},qx=(n,s)=>{const a=n.getApi(s);return i=>{i(a)}},Um=(n,s)=>vs(a=>{qe(n.onBeforeSetup)&&n.onBeforeSetup(a),qx(n,a)(d=>{const g=n.onSetup(d);qe(g)&&s.set(g)})}),Rp=(n,s)=>au(a=>qx(n,a)(s.get())),i4=(n,s,a)=>au(i=>(a.set(Ft.getValue(i)),qx(n,i)(s.get()))),ND="silver.uistate",$b="setDisabled",dW="setEnabled",MD="init",mW=["switchmode",MD],Kx=(n,s)=>{const a=n.mainUi.outerContainer,i=[n.mainUi.mothership,...n.uiMotherships];s===$b&&Te(i,d=>{d.broadcastOn([Rd()],{target:a.element})}),Te(i,d=>{d.broadcastOn([ND],s)})},w$=(n,s)=>{n.on("init SwitchMode",a=>{Kx(s,a.type)}),n.on("DisabledStateChange",a=>{if(!a.isDefaultPrevented()){const i=a.state?$b:MD;Kx(s,i),a.state||n.nodeChanged()}}),n.on("NodeChange",a=>{const i=n.ui.isEnabled()?a.type:$b;Kx(s,i)}),LB(n)&&n.mode.set("readonly")},wr=n=>Pc.config({channels:{[ND]:{onReceive:(s,a)=>{if(a===$b||a===dW){Xt.set(s,a===$b);return}const{contextType:i,shouldDisable:d}=n();i==="mode"&&!tt(mW,a)||Xt.set(s,d)}}}}),rh=(n,s)=>Af((a,i)=>{qx(n,a)(n.onAction),!n.triggersSubmenu&&s===Kd.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Yn(a,w0()),i.stop())}),fW={[Aa()]:["disabling","alloy.base.behaviour","toggling","item-events"]},jf=Ri,Ib=(n,s,a,i)=>{const d=Zt(V);return{type:"item",dom:s.dom,components:jf(s.optComponents),data:n.data,eventOrder:fW,hasSubmenu:n.triggersSubmenu,itemBehaviours:mt([On("item-events",[rh(n,a),Um(n,d),Rp(n,d)]),Vm.item(()=>!n.enabled||i.checkUiComponentContext(n.context).shouldDisable),wr(()=>i.checkUiComponentContext(n.context)),Bn.config({})].concat(n.itemBehaviours))}},ah=n=>({value:n.value,meta:{text:n.text.getOr(""),...n.meta}}),gW=(n,s)=>{const a=ht.fromTag("div");Go(a,"tox-image-selector-loading-spinner");const i=g=>{Go(g,"tox-image-selector-loading-spinner-wrapper"),Vr(g,a)},d=g=>{Ms(g,"tox-image-selector-loading-spinner-wrapper"),ui(a)};return{dom:{tag:n.tag,attributes:n.attributes??{},classes:n.classes},components:[{dom:{tag:"div",classes:["tox-image-selector-image-wrapper"]},components:[{dom:{tag:"img",attributes:{src:s},classes:["tox-image-selector-image-img"]}}]},...n.checkMark.toArray()],behaviours:mt([...n.behaviours??[],On("render-image-events",[vs(g=>{i(g.element),Io(g.element,"img").each(h=>{di(h).catch(C=>{console.error(C)}).finally(()=>{d(g.element)})})})])])}},hW=(n,s)=>gW(s,n),PD=n=>{const s=Xv.os.isMacOS()||Xv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=n.split("+"),h=pe(g,C=>{const x=C.toLowerCase().trim();return ho(d,x)?d[x]:C});return s?h.join(""):h.join("+")},l4=(n,s,a=[jO])=>hu(n,{tag:"div",classes:a},s),E$=n=>({dom:{tag:"div",classes:[th]},components:[Es(Bc.translate(n))]}),u4=(n,s)=>({dom:{tag:"div",classes:s,innerHtml:n}}),BD=(n,s)=>({dom:{tag:"div",classes:[th]},components:[{dom:{tag:n.tag,styles:n.styles},components:[Es(Bc.translate(s))]}]}),$D=n=>({dom:{tag:"div",classes:[kb]},components:[Es(PD(n))]}),ID=n=>l4("checkmark",n,[hU]),pu=n=>l4("chevron-right",n,[_6]),pW=n=>l4("chevron-down",n,[_6]),bW=(n,s)=>{const a=n.direction==="vertical"?pU:D6,i=n.align==="left"?vU:bU;return{dom:{tag:"div",classes:[O6,a,i,(()=>{switch(n.valign){case"top":return YT;case"middle":return R6;case"bottom":return yU}})()]},components:s}},T$=(n,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:n,alt:a.getOr("")}}}),k$=(n,s,a)=>{const i="custom",d="remove",g=n.value,h=n.iconContent.map(T=>qT(T,s.icons,a)),C=n.ariaLabel.map(T=>({"aria-label":s.translate(T),"data-mce-name":T})).getOr({});return{dom:(()=>{const T=Ap,_=h.getOr(""),N={tag:"div",attributes:C,classes:[T]};return g===i?{...N,tag:"button",classes:[...N.classes,"tox-swatches__picker-btn"],innerHtml:_}:g===d?{...N,classes:[...N.classes,"tox-swatch--remove"],innerHtml:_}:Dt(g)?{...N,attributes:{...N.attributes,"data-mce-color":g},styles:{"background-color":g},innerHtml:_}:N})(),optComponents:[]}},LD=(n,s)=>{const a=n.map(i=>({attributes:{id:Mt("menu-item"),"aria-label":Bc.translate(i)}})).getOr({});return{tag:"div",classes:[VO,Ix].concat(s),...a}},A$=n=>({dom:{tag:"label"},components:[Es(n)]}),vW=(n,s,a,i)=>{const d={tag:"div",classes:[jO]},g=H=>hu(H,d,s.icons,i),h=()=>A.some({dom:d}),C=a?n.iconContent.map(g).orThunk(h):A.none(),x=n.checkMark,T=A.from(n.meta).fold(()=>E$,H=>ho(H,"style")?Yt(BD,H.style):E$),_=n.htmlContent.fold(()=>n.textContent.map(T),H=>A.some(u4(H,[th])));return{dom:LD(n.ariaLabel,[]),optComponents:[C,_,n.shortcutContent.map($D),x,n.caret,n.labelContent.map(A$)]}},yW=n=>({dom:LD(n.ariaLabel,[gU]),optComponents:[A.some(hW(n.iconContent.getOrDie(),{tag:"div",classes:[KT],checkMark:n.checkMark})),n.labelContent.map(A$)]}),gy=(n,s,a,i=A.none())=>n.presets==="color"?k$(n,s,i):n.presets==="img"?yW(n):vW(n,s,a,i),_$=(n,s,a)=>en(n,"tooltipWorker").map(i=>[ys.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:d=>({type:"submenu",item:d,overrides:{maxHeightFunction:Bg}}),mode:"follow-highlight",onShow:(d,g)=>{i(h=>{ys.setComponents(d,[Yi({element:ht.fromDom(h)})])})}})]).getOrThunk(()=>a.map(i=>[ys.config({...s.providers.tooltips.getConfig({tooltipText:i}),mode:"follow-highlight"})]).getOr([])),CW=n=>Yv.DOM.encode(n),FD=(n,s)=>{const a=Bc.translate(n),i=CW(a);if(s.length>0){const d=new RegExp(ph(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},xW=(n,s,a,i,d,g,h,C=!0)=>{const x=gy({presets:i,textContent:A.none(),htmlContent:a?n.text.map(_=>FD(_,s)):A.none(),ariaLabel:n.text,labelContent:A.none(),iconContent:n.icon,shortcutContent:A.none(),checkMark:A.none(),caret:A.none(),value:n.value},h.providers,C,n.icon),T=n.text.filter(_=>!a&&_!=="");return Ib({context:"mode:design",data:ah(n),enabled:n.enabled,getApi:se({}),onAction:_=>d(n.value,n.meta),onSetup:se(V),triggersSubmenu:!1,itemBehaviours:_$(n,h,T)},x,g,h.providers)},O$=(n,s)=>pe(n,a=>{switch(a.type){case"cardcontainer":return bW(a,O$(a.items,s));case"cardimage":return T$(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>tt(s.cardText.highlightOn,g))?A.from(s.cardText.matchText).getOr(""):"";return u4(FD(a.text,d),a.classes)}}),SW=(n,s,a,i)=>{const d=h=>({isEnabled:()=>!Xt.isDisabled(h),setEnabled:C=>{Xt.set(h,!C),Te(Ur(h.element,"*"),x=>{h.getSystem().getByDom(x).each(T=>{T.hasConfigured(Xt)&&Xt.set(T,!C)})})}}),g={dom:LD(n.label,[]),optComponents:[A.some({dom:{tag:"div",classes:[O6,D6]},components:O$(n.items,i)})]};return Ib({context:"mode:design",data:ah({text:A.none(),...n}),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(i.itemBehaviours).getOr([])},g,s,a.providers)},HD=(n,s,a,i,d,g,h,C=!0)=>{const x=N=>({setActive:H=>{so.set(N,H)},isActive:()=>so.isOn(N),isEnabled:()=>!Xt.isDisabled(N),setEnabled:H=>Xt.set(N,!H)}),T=gy({presets:a,textContent:s?n.text:A.none(),htmlContent:A.none(),labelContent:n.label,ariaLabel:n.text,iconContent:n.icon,shortcutContent:s?n.shortcut:A.none(),checkMark:s?A.some(ID(h.icons)):A.none(),caret:A.none(),value:n.value},h,C),_=n.text.filter(se(!s)).map(N=>ys.config(h.tooltips.getConfig({tooltipText:h.translate(N)})));return jo(Ib({context:n.context,data:ah(n),enabled:n.enabled,getApi:x,onAction:N=>i(n.value),onSetup:N=>(N.setActive(d),V),triggersSubmenu:!1,itemBehaviours:[..._.toArray()]},T,g,h),{toggling:{toggleClass:UO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},d4=n=>({value:Lb(n)}),m4=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,D$=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,f4=n=>m4.test(n)||D$.test(n),Lb=n=>om(n,"#").toUpperCase(),R$=n=>f4(n)?A.some({value:Lb(n)}):A.none(),N$=n=>({value:n.value.replace(m4,(a,i,d,g)=>i+i+d+d+g+g)}),M$=n=>{const s=N$(n),a=D$.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},zD=n=>{const s=n.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Yx=n=>{const s=zD(n.red)+zD(n.green)+zD(n.blue);return d4(s)},Np=(n,s,a)=>({hue:n,saturation:s,value:a}),VD=n=>{let s=0,a=0,i=0;const d=n.red/255,g=n.green/255,h=n.blue/255,C=Math.min(d,Math.min(g,h)),x=Math.max(d,Math.max(g,h));if(C===x)return i=C,Np(0,0,i*100);const T=d===C?g-h:h===C?d-g:h-d;return s=d===C?3:h===C?1:5,s=60*(s-T/(x-C)),a=(x-C)/x,i=x,Np(Math.round(s),Math.round(a*100),Math.round(i*100))},P$=Math.min,UD=Math.max,Xx=Math.round,jD=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,B$=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,ba=(n,s,a,i)=>({red:n,green:s,blue:a,alpha:i}),g4=n=>{const s=parseInt(n,10);return s.toString()===n&&s>=0&&s<=255},$$=n=>{let s,a,i;const d=(n.hue||0)%360;let g=n.saturation/100,h=n.value/100;if(g=UD(0,P$(g,1)),h=UD(0,P$(h,1)),g===0)return s=a=i=Xx(255*h),ba(s,a,i,1);const C=d/60,x=h*g,T=x*(1-Math.abs(C%2-1)),_=h-x;switch(Math.floor(C)){case 0:s=x,a=T,i=0;break;case 1:s=T,a=x,i=0;break;case 2:s=0,a=x,i=T;break;case 3:s=0,a=T,i=x;break;case 4:s=T,a=0,i=x;break;case 5:s=x,a=0,i=T;break;default:s=a=i=0}return s=Xx(255*(s+_)),a=Xx(255*(a+_)),i=Xx(255*(i+_)),ba(s,a,i,1)},Qx=n=>{const s=M$(n),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return ba(a,i,d,1)},WD=(n,s,a,i)=>{const d=parseInt(n,10),g=parseInt(s,10),h=parseInt(a,10),C=parseFloat(i);return ba(d,g,h,C)},ZD=n=>{const s=jD.exec(n);if(s!==null)return A.some(WD(s[1],s[2],s[3],"1"));const a=B$.exec(n);return a!==null?A.some(WD(a[1],a[2],a[3],a[4])):A.none()},I$=n=>`rgba(${n.red},${n.green},${n.blue},${n.alpha})`,L$=ba(255,0,0,1),F$=n=>VD(Qx(n)),jm=n=>Yx($$(n)),GD=n=>R$(n).orThunk(()=>ZD(n).map(Yx)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=n,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],h=i[2],C=i[3];return Yx(ba(d,g,h,C))}),H$=n=>{n.dispatch("SkinLoaded")},h4=(n,s)=>{n.dispatch("SkinLoadError",s)},qD=n=>{n.dispatch("ResizeEditor")},KD=(n,s)=>{n.dispatch("ResizeContent",s)},wW=(n,s)=>{n.dispatch("ScrollContent",s)},z$=(n,s)=>{n.dispatch("TextColorChange",s)},EW=(n,s)=>{n.dispatch("AfterProgressState",{state:s})},TW=(n,s)=>n.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),kW=(n,s)=>{n.dispatch("ToggleToolbarDrawer",{state:s})},AW=(n,s)=>{n.dispatch("StylesTextUpdate",s)},V$=(n,s)=>{n.dispatch("AlignTextUpdate",s)},_W=(n,s)=>{n.dispatch("FontSizeTextUpdate",s)},Wf=(n,s)=>{n.dispatch("FontSizeInputTextUpdate",s)},p4=(n,s)=>{n.dispatch("BlocksTextUpdate",s)},OW=(n,s)=>{n.dispatch("FontFamilyTextUpdate",s)},DW=n=>{n.dispatch("ToggleSidebar")},U$=n=>{n.dispatch("ToggleView")},YD=n=>{n.dispatch("ContextToolbarClose")},XD=n=>{n.dispatch("ContextFormSlideBack")},Fb=(n,s)=>()=>{n(),s()},Ma=(n,s=_t)=>Mp(n,"NodeChange",a=>{a.setEnabled(n.selection.isEditable()&&s())}),Jx=(n,s)=>a=>{const i=Ds(),d=()=>{a.setActive(n.formatter.match(s));const g=n.formatter.formatChanged(s,a.setActive);i.set(g)};return n.initialized?d():n.once("init",d),()=>{n.off("init",d),i.clear()}},eS=(n,s)=>a=>{const i=Ma(n)(a),d=Jx(n,s)(a);return()=>{i(),d()}},Mp=(n,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),n.on(s,d)};return n.initialized?g():n.once("init",g),()=>{n.off("init",g),n.off(s,d)}},b4=n=>s=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("mceToggleFormat",!1,s.format)})},Ei=(n,s)=>()=>n.execCommand(s);var Hb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const j$={},W$=(n,s=10)=>{const a=Hb.getItem(n),i=de(a)?JSON.parse(a):[],g=(T=>s-T.length<0?T.slice(0,s):T)(i),h=T=>{ae(g,T).each(C),g.unshift(T),g.length>s&&g.pop(),Hb.setItem(n,JSON.stringify(g))},C=T=>{g.splice(T,1)};return{add:h,state:()=>g.slice(0)}},QD=n=>en(j$,n).getOrThunk(()=>{const s=`tinymce-custom-colors-${n}`,a=Hb.getItem(s);if(jt(a)){const d=Hb.getItem("tinymce-custom-colors");Hb.setItem(s,Dt(d)?d:"[]")}const i=W$(s,10);return j$[n]=i,i}),RW=n=>pe(QD(n).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),JD=(n,s)=>{QD(n).add(s)},v4="forecolor",eR="hilitecolor",Z$=5,NW=n=>tR(n.map((s,a)=>a%2===0?"#"+GD(s).value:s)),tR=n=>{const s=[];for(let a=0;a<n.length;a+=2)s.push({text:n[a+1],value:n[a],icon:"checkmark",type:"choiceitem"});return s},Ti=n=>s=>s.options.get(n),nR="#000000",G$=n=>{const s=n.options.register,a=g=>ft(g,de)?{value:NW(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},i=g=>ft(g,de)?{value:tR(g),valid:!0}:{valid:!1,message:"Must be an array of strings."},d=g=>En(g)&&g>0?{value:g,valid:!0}:{valid:!1,message:"Must be a positive number."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_raw",{processor:i}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:d,default:oR(n)}),s("color_cols_foreground",{processor:d,default:q$(n,v4)}),s("color_cols_background",{processor:d,default:q$(n,eR)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:nR}),s("color_default_background",{processor:"string",default:nR})},y4=(n,s)=>s===v4&&n.options.isSet("color_map_foreground")?Ti("color_map_foreground")(n):s===eR&&n.options.isSet("color_map_background")?Ti("color_map_background")(n):n.options.isSet("color_map_raw")?Ti("color_map_raw")(n):Ti("color_map")(n),oR=(n,s="default")=>Math.max(Z$,Math.ceil(Math.sqrt(y4(n,s).length))),q$=(n,s)=>{const a=Ti("color_cols")(n),i=oR(n,s);return a===oR(n)?i:a},K$=(n,s="default")=>Math.round(s===v4?Ti("color_cols_foreground")(n):s===eR?Ti("color_cols_background")(n):Ti("color_cols")(n)),sR=Ti("custom_colors"),MW=Ti("color_default_foreground"),Y$=Ti("color_default_background"),rR="rgba(0, 0, 0, 0)",Zf=n=>ZD(n).exists(s=>s.alpha!==0),aR=n=>Ui(n,s=>{if(pc(s)){const a=bs(s,"background-color");return Fr(Zf(a),a)}else return A.none()}).getOr(rR),cR=(n,s)=>{const a=ht.fromDom(n.selection.getStart()),i=s==="hilitecolor"?aR(a):bs(a,"color");return ZD(i).map(d=>"#"+Yx(d).value)},X$=(n,s,a)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.apply(s,{value:a}),n.nodeChanged()})},Q$=(n,s)=>{n.undoManager.transact(()=>{n.focus(),n.formatter.remove(s,{value:null},void 0,!0),n.nodeChanged()})},J$=n=>{n.addCommand("mceApplyTextcolor",(s,a)=>{X$(n,s,a)}),n.addCommand("mceRemoveTextcolor",s=>{Q$(n,s)})},C4=n=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return n?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},x4=(n,s,a,i)=>{a==="custom"?uR(n)(g=>{g.each(h=>{JD(s,h),n.execCommand("mceApplyTextcolor",s,h),i(h)})},cR(n,s).getOr(nR)):a==="remove"?(i(""),n.execCommand("mceRemoveTextcolor",s)):(i(a),n.execCommand("mceApplyTextcolor",s,a))},hy=(n,s,a)=>n.concat(RW(s).concat(C4(a))),iR=(n,s,a)=>i=>{i(hy(n,s,a))},S4=(n,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";n.setIconFill(i,a)},eI=(n,s)=>{n.setTooltip(s)},tI=(n,s)=>a=>{const i=cR(n,s);return gc(i,a.toUpperCase())},lR=(n,s,a)=>{if(ya(a))return s==="forecolor"?"Text color":"Background color";const i=s==="forecolor"?"Text color {0}":"Background color {0}",d=hy(y4(n,s),s,!1),g=Wt(d,h=>h.value===a).getOr({text:""}).text;return n.translate([i,n.translate(g)])},nI=(n,s,a,i)=>{n.ui.registry.addSplitButton(s,{tooltip:lR(n,a,i.get()),chevronTooltip:s==="forecolor"?"Text color menu":"Background color menu",presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:tI(n,a),columns:K$(n,a),fetch:iR(y4(n,a),a,sR(n)),onAction:d=>{x4(n,a,i.get(),V)},onItemAction:(d,g)=>{x4(n,a,g,h=>{i.set(h),z$(n,{name:s,color:h})})},onSetup:d=>{S4(d,s,i.get());const g=h=>{h.name===s&&(S4(d,h.name,h.color),eI(d,lR(n,a,h.color)))};return n.on("TextColorChange",g),Fb(Ma(n)(d),()=>{n.off("TextColorChange",g)})}})},oI=(n,s,a,i,d)=>{n.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",onSetup:g=>(eI(g,lR(n,a,d.get())),S4(g,s,d.get()),Ma(n)(g)),getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",select:tI(n,a),initData:{storageKey:a},onAction:g=>{x4(n,a,g.value,h=>{d.set(h),z$(n,{name:s,color:h})})}}]})},uR=n=>(s,a)=>{let i=!1;const d=C=>{const T=C.getData().colorpicker;i?(s(A.from(T)),C.close()):n.windowManager.alert(n.translate(["Invalid hex color code: {0}",T]))},g=(C,x)=>{x.name==="hex-valid"&&(i=x.value)},h={colorpicker:a};n.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:h,onAction:g,onSubmit:d,onClose:V,onCancel:()=>{s(A.none())}})},sI=n=>{J$(n);const s=MW(n),a=Y$(n),i=Zt(s),d=Zt(a);nI(n,"forecolor","forecolor",i),nI(n,"backcolor","hilitecolor",d),oI(n,"forecolor","forecolor","Text color",i),oI(n,"backcolor","hilitecolor","Background color",d)},PW=(n,s,a,i,d)=>{const g=x=>({setActive:T=>{so.set(x,T)},isActive:()=>so.isOn(x),isEnabled:()=>!Xt.isDisabled(x),setEnabled:T=>Xt.set(x,!T)}),h=gy({presets:"img",textContent:A.none(),htmlContent:A.none(),ariaLabel:n.tooltip,iconContent:A.some(n.url),labelContent:n.label,shortcutContent:A.none(),checkMark:A.some(ID(d.icons)),caret:A.none(),value:n.value},d,!0),C=n.tooltip.map(x=>ys.config(d.tooltips.getConfig({tooltipText:d.translate(x)})));return jo(Ib({context:n.context,data:ah(n),enabled:n.enabled,getApi:g,onAction:x=>{s(n.value),x.setActive(!0)},onSetup:x=>(x.setActive(a),V),triggersSubmenu:!1,itemBehaviours:[...C.toArray()]},h,i,d),{toggling:{toggleClass:UO,toggleOnExecute:!1,selected:n.active,exclusive:!0}})},w4=(n,s,a,i,d,g,h,C)=>{const x=zx(s),_=BW(s,a,i,d!=="color"?"normal":"color",g,h,C);return tD(n,x,_,i,{menuType:d})},BW=(n,s,a,i,d,g,h)=>Ri(pe(n,C=>C.type==="choiceitem"?jj(C).fold(Hm,x=>A.some(HD(x,a===1,i,s,g(x.value),d,h,zx(n)))):C.type==="imageitem"?x$(C).fold(Hm,x=>A.some(PW(x,s,g(x.value),d,h))):C.type==="resetimage"?AD(C).fold(Hm,x=>A.some(HD({...x,text:x.tooltip,icon:A.some(x.icon),label:A.some(x.label)},a===1,i,s,g(x.value),d,h,zx(n)))):A.none())),Pp=(n,s)=>{const a=Vf(s);return n===1?{mode:"menu",moveOnTab:!0}:n==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+{color:"tox-swatches__row",imageselector:"tox-image-selector__row",listpreview:"tox-collection__group",normal:"tox-collection__group"}[s],previousSelector:d=>s==="color"?Io(d.element,"[aria-checked=true]"):A.none()}},$W=(n,s)=>n===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:n==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${Ap}`:`.${Ix}`}},IW=(n,s)=>{const a=rI(n,s),i=s.colorinput.getColorCols(n.initData.storageKey),d="color",h={...w4(Mt("menu-value"),a,C=>{n.onAction({value:C})},i,d,Kd.CLOSE_ON_EXECUTE,n.select.getOr(dn),s.shared.providers),markers:Vf(d),movement:Pp(i,d),showMenuRole:!1};return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[L_.widget(Xg.sketch(h))]}},rI=(n,s)=>{const a=n.initData.allowCustomColors&&s.colorinput.hasCustomColors();return n.initData.colors.fold(()=>hy(s.colorinput.getColors(n.initData.storageKey),n.initData.storageKey,a),i=>i.concat(C4(a)))},aI=(n,s)=>{const a="imageselector",i=n.initData.columns,g={...w4(Mt("menu-value"),n.initData.items,h=>{n.onAction({value:h})},i,a,Kd.CLOSE_ON_EXECUTE,n.select.getOr(dn),s.shared.providers),markers:Vf(a),movement:Pp(i,a),showMenuRole:!1};return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem","tox-collection--toolbar"]},autofocus:!0,components:[L_.widget(Xg.sketch(g))]}},cI=Mt("cell-over"),iI=Mt("cell-execute"),dR=n=>(s,a)=>n.shared.providers.translate(["{0} columns, {1} rows",a,s]),LW=(n,s,a)=>{const i=h=>pn(h,cI,{row:n,col:s}),d=h=>pn(h,iI,{row:n,col:s}),g=(h,C)=>{C.stop(),d(h)};return p({dom:{tag:"div",attributes:{role:"button","aria-label":a}},behaviours:mt([On("insert-table-picker-cell",[je(Gi(),Nn.focus),je(Aa(),d),je(wg(),g),je(Vh(),g)]),so.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Nn.config({onFocus:i})])})},lI=(n,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let h=0;h<a;h++){const C=n(d+1,h+1);g.push(LW(d,h,C))}i.push(g)}return i},FW=(n,s,a,i,d)=>{for(let g=0;g<i;g++)for(let h=0;h<d;h++)so.set(n[g][h],g<=s&&h<=a)},HW=n=>Ae(n,s=>pe(s,y)),uI=(n,s)=>Es(`${s}x${n}`),mR={inserttable:(n,s)=>{const d=dR(s),g=lI(d,10,10),h=uI(0,0),C=_o({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[h],behaviours:mt([Bn.config({})])});return{type:"widget",data:{value:Mt("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[L_.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:HW(g).concat(C.asSpec()),behaviours:mt([On("insert-table-picker",[vs(x=>{Bn.set(C.get(x),[h])}),np(cI,(x,T,_)=>{const{row:N,col:H}=_.event;FW(g,N,H,10,10),Bn.set(C.get(x),[uI(N+1,H+1)])}),np(iI,(x,T,_)=>{const{row:N,col:H}=_.event;Yn(x,w0()),n.onAction({numRows:N+1,numColumns:H+1})})]),mn.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:IW,imageselect:aI},VW=(n,s)=>en(mR,n.fancytype).map(a=>a(n,s)),UW=(n,s,a,i=!0,d=!1)=>{const g=d?pW(a.icons):pu(a.icons),h=x=>({isEnabled:()=>!Xt.isDisabled(x),setEnabled:T=>Xt.set(x,!T),setIconFill:(T,_)=>{Io(x.element,`svg path[class="${T}"], rect[class="${T}"]`).each(N=>{Cn(N,"fill",_)})},setTooltip:T=>{const _=a.translate(T);Cn(x.element,"aria-label",_)}}),C=gy({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:A.none(),ariaLabel:n.text,labelContent:A.none(),caret:A.some(g),checkMark:A.none(),shortcutContent:n.shortcut},a,i);return Ib({context:n.context,data:ah(n),getApi:h,enabled:n.enabled,onAction:V,onSetup:n.onSetup,triggersSubmenu:!0,itemBehaviours:[]},C,s,a)},jW=(n,s,a,i=!0)=>{const d=h=>({isEnabled:()=>!Xt.isDisabled(h),setEnabled:C=>Xt.set(h,!C)}),g=gy({presets:"normal",iconContent:n.icon,textContent:n.text,htmlContent:A.none(),labelContent:A.none(),ariaLabel:n.text,caret:A.none(),checkMark:A.none(),shortcutContent:n.shortcut},a,i);return Ib({context:n.context,data:ah(n),getApi:d,enabled:n.enabled,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},WW=n=>({type:"separator",dom:{tag:"div",classes:[Ix,A6]},components:n.text.map(Es).toArray()}),dI=(n,s,a,i=!0)=>{const d=h=>({setActive:C=>{so.set(h,C)},isActive:()=>so.isOn(h),isEnabled:()=>!Xt.isDisabled(h),setEnabled:C=>Xt.set(h,!C)}),g=gy({iconContent:n.icon,textContent:n.text,htmlContent:A.none(),labelContent:A.none(),ariaLabel:n.text,checkMark:A.some(ID(a.icons)),caret:A.none(),shortcutContent:n.shortcut,presets:"normal",meta:n.meta},a,i);return jo(Ib({context:n.context,data:ah(n),enabled:n.enabled,getApi:d,onAction:n.onAction,onSetup:n.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:UO,toggleOnExecute:!1,selected:n.active},role:n.role.getOrUndefined()})},mI=xW,fR=WW,ZW=jW,GW=UW,qW=dI,KW=VW,YW=SW,XW=n=>{switch(n.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:n}}},QW=n=>{const s=Ft.getValue(n),a=Fx(n).map(qO);Ji.refetch(s).get(()=>{const i=Ln.getCoupled(s,"sandbox");a.each(d=>Fx(i).each(g=>xU(g,d)))})},JW=(n,s)=>{eZ(n).each(a=>{p3(n,a.element,s.event.eventType,s.event.interactionEvent)})},eZ=n=>So.getState(n).bind(Eo.getHighlighted).bind(Eo.getHighlighted),gR=n=>lr(n.element,XT)?A.some(n.element):Io(n.element,"."+XT),fI=(n,s,a)=>{B6(n).each(i=>{$6(i,a),gR(s).each(g=>{na(g,"id").each(h=>Cn(i.element,"aria-controls",h))})}),Cn(a.element,"aria-selected","true")},tZ=(n,s,a)=>{Cn(a.element,"aria-selected","false")},nZ=n=>{B6(n).each(s=>Nn.focus(s))},tS=n=>Ln.getExistingCoupled(n,"sandbox").bind(Fx).map(qO).map(a=>a.fetchPattern).getOr("");var py;(function(n){n[n.ContentFocus=0]="ContentFocus",n[n.UiFocus=1]="UiFocus"})(py||(py={}));const oZ=(n,s,a,i,d)=>{const g=a.shared.providers,h=C=>d?{...C,shortcut:A.none(),icon:C.text.isSome()?A.none():C.icon}:C;switch(n.type){case"menuitem":return Kj(n).fold(Hm,C=>A.some(ZW(h(C),s,g,i)));case"nestedmenuitem":return Xj(n).fold(Hm,C=>A.some(GW(h(C),s,g,i,d)));case"togglemenuitem":return Jj(n).fold(Hm,C=>A.some(qW(h(C),s,g,i)));case"separator":return kj(n).fold(Hm,C=>A.some(fR(C)));case"fancymenuitem":return C$(n).fold(Hm,C=>KW(C,a));default:return console.error("Unknown item in general menu",n),A.none()}},sZ=(n,s,a,i,d,g,h)=>{const C=i===1,x=!C||zx(n);return Ri(pe(n,T=>{switch(T.type){case"separator":return _j(T).fold(Hm,_=>A.some(fR(_)));case"cardmenuitem":return ED(T).fold(Hm,_=>A.some(YW({..._,onAction:N=>{_.onAction(N),a(_.value,_.meta)}},d,g,{itemBehaviours:_$(_.meta,g,A.none()),cardText:{matchText:s,highlightOn:h}})));case"autocompleteitem":default:return Oj(T).fold(Hm,_=>A.some(mI(_,s,C,"normal",a,d,g,x)))}}))},E4=(n,s,a,i,d,g)=>{const h=zx(s),C=Ri(pe(s,_=>{const N=j=>d?!ho(j,"text"):h,H=j=>oZ(j,a,i,N(j),d);return _.type==="nestedmenuitem"&&_.getSubmenuItems().length<=0?H({..._,enabled:!1}):H(_)})),x=XW(g);return(d?H6:tD)(n,h,C,1,x)},hR=n=>yb.singleData(n.value,n),pR=(n,s,a,i)=>{const d=Pp(s,i),g=Vf(i);return{data:hR({...n,movement:d,menuBehaviours:fy.unnamedEvents(s!=="auto"?[]:[vs((h,C)=>{RD(h,4,g.item).each(({numColumns:x,numRows:T})=>{mn.setGridSize(h,T,x)})})])}),menu:{markers:Vf(i),fakeFocus:a===py.ContentFocus}}},gI=n=>w.create(ht.fromDom(n.startContainer),n.startOffset,ht.fromDom(n.endContainer),n.endOffset),rZ={register:(n,s)=>{const a=Mt("autocompleter"),i=Zt(!1),d=Zt(!1),g=kn(),h=p(Zs.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:a}},components:[],fireDismissalEventInstead:{},inlineBehaviours:mt([On("dismissAutocompleter",[je(pm(),()=>N()),je(A0(),(Q,me)=>{na(me.event.target,"id").each(ve=>Cn(ht.fromDom(n.getBody()),"aria-activedescendant",ve))})])]),lazySink:s.getSink})),C=()=>Zs.isOpen(h),x=d.get,T=()=>{if(C()){Zs.hide(h),n.dom.remove(a,!1);const Q=ht.fromDom(n.getBody());na(Q,"aria-owns").filter(me=>me===a).each(()=>{ps(Q,"aria-owns"),ps(Q,"aria-activedescendant")})}},_=()=>Zs.getContent(h).bind(Q=>oi(Q.components(),0)),N=()=>n.execCommand("mceAutocompleterClose"),H=Q=>{const me=va(Q,ve=>A.from(ve.columns)).getOr(1);return Ae(Q,ve=>{const Re=ve.items;return sZ(Re,ve.matchText,(Ie,Et)=>{const Je={hide:()=>N(),reload:ct=>{T(),n.execCommand("mceAutocompleterReload",!1,{fetchOptions:ct})}};n.execCommand("mceAutocompleterRefreshActiveRange"),g.get().each(ct=>{i.set(!0),ve.onAction(Je,ct,Ie,Et),i.set(!1)})},me,Kd.BUBBLE_TO_SANDBOX,s,ve.highlightOn)})},j=(Q,me)=>{const ve=va(Q,Re=>A.from(Re.columns)).getOr(1);Zs.showMenuAt(h,{anchor:{type:"selection",getSelection:()=>g.get().map(gI),root:ht.fromDom(n.getBody())}},pR(tD("autocompleter-value",!0,me,ve,{menuType:"normal"}),ve,py.ContentFocus,"normal")),_().each(Eo.highlightFirst)},Z=Q=>{const me=H(Q);me.length>0?(j(Q,me),Cn(ht.fromDom(n.getBody()),"aria-owns",a),n.inline||oe()):T()},oe=()=>{n.dom.get(a)&&n.dom.remove(a,!1);const Q=n.getDoc().documentElement,me=n.selection.getNode(),ve=Ch(h.element);Ts(ve,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:`${me.offsetTop}px`,left:`${me.offsetLeft}px`}),n.dom.add(Q,ve.dom),Io(ve,'[role="menu"]').each(Re=>{Jn(Re,"position"),Jn(Re,"max-height")})};n.on("AutocompleterStart",({lookupData:Q})=>{d.set(!0),i.set(!1),Z(Q)}),n.on("AutocompleterUpdate",({lookupData:Q})=>Z(Q)),n.on("AutocompleterUpdateActiveRange",({range:Q})=>g.set(Q)),n.on("AutocompleterEnd",()=>{T(),d.set(!1),i.set(!1),g.clear()});const le={cancelIfNecessary:N,isMenuOpen:C,isActive:x,isProcessingAction:i.get,getMenu:_};fU.setup(le,n)}},hI=(n,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:pe(n.items,s.interpreter)});var aZ=tinymce.util.Tools.resolve("tinymce.html.Entities");const by=(n,s,a,i)=>{const d=pI(n,s,a,i);return eo.sketch(d)},cZ=(n,s)=>by(n,s,[],[]),pI=(n,s,a,i)=>({dom:vI(a),components:n.toArray().concat([s]),fieldBehaviours:mt(i)}),bI=()=>vI([]),vI=n=>({tag:"div",classes:["tox-form__group"].concat(n)}),ch=(n,s)=>eo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Es(s.translate(n))]}),ki=Mt("form-component-change"),yI=Mt("form-component-input"),zb=Mt("form-close"),ih=Mt("form-cancel"),Yd=Mt("form-action"),nS=Mt("form-submit"),bR=Mt("form-block"),T4=Mt("form-unblock"),CI=Mt("form-tabchange"),vR=Mt("form-resize"),iZ=(n,s,a)=>{const i=n.label.map(j=>ch(j,s)),d=s.icons(),g=j=>d[j]??j,h=j=>(Z,oe)=>{Ta(oe.event.target,"[data-collection-item-value]").each(le=>{j(Z,oe,le,Pr(le,"data-collection-item-value"))})},C=(j,Z)=>{const le=s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()?" tox-collection__item--state-disabled":"",Q=pe(Z,Re=>{const Ie=Bc.translate(Re.text),Et=n.columns===1?`<div class="tox-collection__item-label">${Ie}</div>`:"",Je=`<div class="tox-collection__item-icon">${g(Re.icon)}</div>`,ct={_:" "," - ":" ","-":" "},at=Ie.replace(/\_| \- |\-/g,fn=>ct[fn]);return`<div data-mce-tooltip="${at}" class="tox-collection__item${le}" tabindex="-1" data-collection-item-value="${aZ.encodeAllRaw(Re.value)}" aria-label="${at}">${Je}${Et}</div>`}),me=n.columns!=="auto"&&n.columns>1?on(Q,n.columns):[Q],ve=pe(me,Re=>`<div class="tox-collection__group">${Re.join("")}</div>`);Hi(j.element,ve.join(""))},x=h((j,Z,oe,le)=>{Z.stop(),s.checkUiComponentContext("mode:design").shouldDisable||s.isDisabled()||pn(j,Yd,{name:n.name,value:le})}),T=[je(Gi(),h((j,Z,oe)=>{Hr(oe,!0)})),je(wg(),x),je(Vh(),x),je(tu(),h((j,Z,oe)=>{Io(j.element,"."+Ab).each(le=>{Ms(le,Ab)}),Go(oe,Ab)})),je(E2(),h(j=>{Io(j.element,"."+Ab).each(Z=>{Ms(Z,Ab),Ns(Z)})})),Af(h((j,Z,oe,le)=>{pn(j,Yd,{name:n.name,value:le})}))],_=(j,Z)=>pe(Ur(j.element,".tox-collection__item"),Z),N=eo.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(n.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:nn},behaviours:mt([Xt.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable,onDisabled:j=>{_(j,Z=>{Go(Z,"tox-collection__item--state-disabled"),Cn(Z,"aria-disabled",!0)})},onEnabled:j=>{_(j,Z=>{Ms(Z,"tox-collection__item--state-disabled"),ps(Z,"aria-disabled")})}}),wr(()=>s.checkUiComponentContext(n.context)),Bn.config({}),ys.config({...s.tooltips.getConfig({tooltipText:"",onShow:j=>{Io(j.element,"."+Ab+"[data-mce-tooltip]").each(Z=>{na(Z,"data-mce-tooltip").each(oe=>{ys.setComponents(j,s.tooltips.getComponents({tooltipText:oe}))})})}}),mode:"children-keyboard-focus",anchor:j=>({type:"node",node:Io(j.element,"."+Ab).orThunk(()=>c0(".tox-collection__item")),root:j.element,layouts:{onLtr:se([Or,Ps,Ir,Oa,_r,ga]),onRtl:se([Or,Ps,Ir,Oa,_r,ga])},bubble:xi(0,-2,{})})}),Ft.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(j,Z)=>{C(j,Z),n.columns==="auto"&&RD(j,5,"tox-collection__item").each(({numRows:oe,numColumns:le})=>{mn.setGridSize(j,oe,le)}),Yn(j,vR)}}),ms.config({}),mn.config($W(n.columns,"normal")),On("collection-events",T)]),eventOrder:{[Aa()]:["disabling","alloy.base.behaviour","collection-events"],[tu()]:["collection-events","tooltipping"]}});return by(i,N,["tox-form__group--collection"],[])},lZ=(n,s)=>Ji.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:mt([Vm.button(()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable),wr(()=>s.providers.checkUiComponentContext(n.context)),Nm.config({}),ms.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>Ko.nu(i=>n.fetch(i)).map(i=>A.from(hR(jo(w4(Mt("menu-value"),i,d=>{n.onItemAction(a,d)},n.columns,n.presets,Kd.CLOSE_ON_EXECUTE,dn,s.providers),{movement:Pp(n.columns,n.presets)})))),parts:{menu:Lx(!1,1,n.presets)}}),k4=Mt("color-input-change"),xI=Mt("color-swatch-change"),SI=Mt("color-picker-cancel"),uZ=(n,s,a,i)=>{const d=eo.parts.field({factory:zf,inputClasses:["tox-textfield"],data:i,onSetValue:T=>du.run(T).get(V),inputBehaviours:mt([Xt.config({disabled:()=>s.providers.isDisabled()||s.providers.checkUiComponentContext(n.context).shouldDisable}),wr(()=>s.providers.checkUiComponentContext(n.context)),ms.config({}),du.config({invalidClass:"tox-textbox-field-invalid",getRoot:T=>Wl(T.element),notify:{onValid:T=>{const _=Ft.getValue(T);pn(T,k4,{color:_})}},validator:{validateOnLoad:!1,validate:T=>{const _=Ft.getValue(T);if(_.length===0)return Ko.pure(rn.value(!0));{const N=ht.fromTag("span");Tn(N,"background-color",_);const H=ws(N,"background-color").fold(()=>rn.error("blah"),j=>rn.value(_));return Ko.pure(H)}}}})]),selectOnFocus:!1}),g=n.label.map(T=>ch(T,s.providers)),h=(T,_)=>{pn(T,xI,{value:_})},C=(T,_)=>{x.getOpt(T).each(N=>{_==="custom"?a.colorPicker(H=>{H.fold(()=>Yn(N,SI),j=>{h(N,j),JD(n.storageKey,j)})},"#ffffff"):_==="remove"?h(N,""):h(N,_)})},x=_o(lZ({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[_r,Ir,Or],onLtr:()=>[Ir,_r,Or]},components:[],fetch:iR(a.getColors(n.storageKey),n.storageKey,a.hasCustomColors()),columns:a.getColorCols(n.storageKey),presets:"color",onItemAction:C,context:n.context},s));return eo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,x.asSpec()]}]),fieldBehaviours:mt([On("form-field-events",[je(k4,(T,_)=>{x.getOpt(T).each(N=>{Tn(N.element,"background-color",_.event.color)}),pn(T,ki,{name:n.name})}),je(xI,(T,_)=>{eo.getField(T).each(N=>{Ft.setValue(N,_.event.value),We.getCurrent(T).each(Nn.focus)})}),je(SI,(T,_)=>{eo.getField(T).each(N=>{We.getCurrent(T).each(Nn.focus)})})])])})},Xd={self:()=>We.config({find:A.some}),memento:n=>We.config({find:n.getOpt}),childAt:n=>We.config({find:s=>pd(s.element,n).bind(a=>s.getSystem().getByDom(a).toOptional())})},EI=bn([De("preprocess",nn),De("postprocess",nn)]),mZ=(n,s)=>{const a=wc("RepresentingConfigs.memento processors",EI,s);return Ft.config({store:{mode:"manual",getValue:i=>{const d=n.get(i),g=Ft.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),h=n.get(i);Ft.setValue(h,g)}}})},Vb=(n,s,a)=>Ft.config({store:{mode:"manual",...n.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),TI=(n,s,a)=>Vb(n,i=>s(i.element),(i,d)=>a(i.element,d)),fZ=n=>TI(n,Zl,Hi),A4=n=>Ft.config({store:{mode:"memory",initialValue:n}}),_4=Mt("rgb-hex-update"),kI=Mt("slider-update"),AI=Mt("palette-update"),_I=(n,s)=>{const a=Gd.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=Gd.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return Gd.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:se(0)},components:[a,i],sliderBehaviours:mt([Nn.config({})]),onChange:(d,g,h)=>{Cn(d.element,"aria-valuenow",Math.floor(360-h*3.6)),pn(d,kI,{value:h})}})},OI=Mt("valid-input"),DI=Mt("invalid-input"),RI=Mt("validating-input"),O4="colorcustom.rgb.",gZ={isEnabled:_t,setEnabled:V,immediatelyShow:V,immediatelyHide:V},hZ=(n,s,a,i,d,g)=>{const h=(oe,le)=>{const Q=le.get();oe!==Q.isEnabled()&&(Q.setEnabled(oe),oe?Q.immediatelyShow():Q.immediatelyHide())},C=(oe,le,Q)=>du.config({invalidClass:s("invalid"),notify:{onValidate:me=>{pn(me,RI,{type:oe})},onValid:me=>{h(!1,Q),pn(me,OI,{type:oe,value:Ft.getValue(me)})},onInvalid:me=>{h(!0,Q),pn(me,DI,{type:oe,value:Ft.getValue(me)})}},validator:{validate:me=>{const ve=Ft.getValue(me),Re=le(ve)?rn.value(!0):rn.error(n("aria.input.invalid"));return Ko.pure(Re)},validateOnLoad:!1}}),x=(oe,le,Q,me,ve)=>{const Re=Zt(gZ),Ie=n(O4+"range"),Et=eo.parts.label({dom:{tag:"label"},components:[Es(Q)]}),Je=eo.parts.field({data:ve,factory:zf,inputAttributes:{type:"text","aria-label":me,...le==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:mt([C(le,oe,Re),ms.config({}),ys.config({...d({tooltipText:"",onSetup:$n=>{Re.set({isEnabled:()=>ys.isEnabled($n),setEnabled:tn=>ys.setEnabled($n,tn),immediatelyShow:()=>ys.immediateOpenClose($n,!0),immediatelyHide:()=>ys.immediateOpenClose($n,!1)}),ys.setEnabled($n,!1)},onShow:($n,tn)=>{ys.setComponents($n,[{dom:{tag:"p",classes:[s("rgb-warning-note")]},components:[Es(n(le==="hex"?"colorcustom.rgb.invalidHex":"colorcustom.rgb.invalid"))]}])}})})]),onSetValue:$n=>{du.isInvalid($n)&&du.run($n).get(V)}}),ct=Mt("aria-invalid"),at=_o(g("invalid",A.some(ct),"warning")),fn=_o({dom:{tag:"div",classes:[s("invalid-icon")]},components:[at.asSpec()]}),Jt=[Et,Je,fn.asSpec()],Kn=le!=="hex"?[eo.parts["aria-descriptor"]({text:Ie})]:[],gn=Jt.concat(Kn);return{dom:{tag:"div",attributes:{role:"presentation"},classes:[s("rgb-container")]},components:gn}},T=(oe,le)=>{const Q=Yx(le);return xp.getField(oe,"hex").each(me=>{Nn.isFocused(me)||Ft.setValue(oe,{hex:Q.value})}),Q},_=(oe,le)=>{const Q=le.red,me=le.green,ve=le.blue;Ft.setValue(oe,{red:Q,green:me,blue:ve})},N=_o({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),H=(oe,le)=>{N.getOpt(oe).each(Q=>{Tn(Q.element,"background-color","#"+le.value)})};return uu({factory:()=>{const oe={red:Zt(A.some(255)),green:Zt(A.some(255)),blue:Zt(A.some(255)),hex:Zt(A.some("ffffff"))},le=(tn,Qe)=>{const pt=Qx(Qe);_(tn,pt),Re(pt)},Q=tn=>oe[tn].get(),me=(tn,Qe)=>{oe[tn].set(Qe)},ve=()=>Q("red").bind(tn=>Q("green").bind(Qe=>Q("blue").map(pt=>ba(tn,Qe,pt,1)))),Re=tn=>{const Qe=tn.red,pt=tn.green,Sn=tn.blue;me("red",A.some(Qe)),me("green",A.some(pt)),me("blue",A.some(Sn))},Ie=(tn,Qe)=>{const pt=Qe.event;pt.type!=="hex"?me(pt.type,A.none()):i(tn)},Et=(tn,Qe)=>{a(tn);const pt=d4(Qe);me("hex",A.some(pt.value));const Sn=Qx(pt);_(tn,Sn),Re(Sn),pn(tn,_4,{hex:pt}),H(tn,pt)},Je=(tn,Qe,pt)=>{const Sn=parseInt(pt,10);me(Qe,A.some(Sn)),ve().each(zn=>{const ln=T(tn,zn);pn(tn,_4,{hex:ln}),H(tn,ln)})},ct=tn=>tn.type==="hex",at=(tn,Qe)=>{const pt=Qe.event;ct(pt)?Et(tn,pt.value):Je(tn,pt.type,pt.value)},fn=tn=>({label:n(O4+tn+".label"),description:n(O4+tn+".description")}),Jt=fn("red"),Kn=fn("green"),gn=fn("blue"),$n=fn("hex");return jo(xp.sketch(tn=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":n("aria.color.picker")}},components:[tn.field("red",eo.sketch(x(g4,"red",Jt.label,Jt.description,255))),tn.field("green",eo.sketch(x(g4,"green",Kn.label,Kn.description,255))),tn.field("blue",eo.sketch(x(g4,"blue",gn.label,gn.description,255))),tn.field("hex",eo.sketch(x(f4,"hex",$n.label,$n.description,"ffffff"))),N.asSpec()],formBehaviours:mt([du.config({invalidClass:s("form-invalid")}),On("rgb-form-events",[je(OI,at),je(DI,Ie),je(RI,Ie)])])})),{apis:{updateHex:(tn,Qe)=>{Ft.setValue(tn,{hex:Qe.value}),le(tn,Qe),H(tn,Qe)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(oe,le,Q)=>{oe.updateHex(le,Q)}},extraApis:{}})},pZ=(n,s)=>{const a=Gd.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=Gd.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(T,_)=>{const{width:N,height:H}=T,j=T.getContext("2d");if(j===null)return;j.fillStyle=_,j.fillRect(0,0,N,H);const Z=j.createLinearGradient(0,0,N,0);Z.addColorStop(0,"rgba(255,255,255,1)"),Z.addColorStop(1,"rgba(255,255,255,0)"),j.fillStyle=Z,j.fillRect(0,0,N,H);const oe=j.createLinearGradient(0,0,0,H);oe.addColorStop(0,"rgba(0,0,0,0)"),oe.addColorStop(1,"rgba(0,0,0,1)"),j.fillStyle=oe,j.fillRect(0,0,N,H)},g=(T,_)=>{const N=T.components()[0].element.dom,H=Np(_,100,100),j=$$(H);d(N,I$(j))},h=(T,_)=>{const N=VD(Qx(_));Gd.setValue(T,{x:N.saturation,y:100-N.value}),Cn(T.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",N.saturation,N.value]))};return uu({factory:T=>{const _=se({x:0,y:0}),N=(Z,oe,le)=>{En(le)||Cn(Z.element,"aria-valuetext",n(["Saturation {0}%, Brightness {1}%",Math.floor(le.x),Math.floor(100-le.y)])),pn(Z,AI,{value:le})},H=(Z,oe,le,Q)=>{d(le.element.dom,I$(L$))},j=mt([We.config({find:A.some}),Nn.config({})]);return Gd.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":n(["Saturation {0}%, Brightness {1}%",0,0])},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:_},rounded:!1,components:[a,i],onChange:N,onInit:H,sliderBehaviours:j})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(T,_,N)=>{g(_,N)},setThumb:(T,_,N)=>{h(_,N)}},extraApis:{}})},NI=(n,s,a,i)=>{const d=h=>{const C=hZ(n,s,h.onValidHex,h.onInvalidHex,a,i),x=pZ(n,s),T=ct=>(100-ct)/100*360,_=ct=>100-ct/360*100,N={paletteRgba:Zt(L$),paletteHue:Zt(0)},H=_o(_I(n,s)),j=_o(x.sketch({})),Z=_o(C.sketch({})),oe=(ct,at,fn)=>{j.getOpt(ct).each(Jt=>{x.setHue(Jt,fn)})},le=(ct,at)=>{Z.getOpt(ct).each(fn=>{C.updateHex(fn,at)})},Q=(ct,at,fn)=>{H.getOpt(ct).each(Jt=>{Gd.setValue(Jt,_(fn))})},me=(ct,at)=>{j.getOpt(ct).each(fn=>{x.setThumb(fn,at)})},ve=(ct,at)=>{const fn=Qx(ct);N.paletteRgba.set(fn),N.paletteHue.set(at)},Re=(ct,at,fn,Jt)=>{ve(at,fn),Te(Jt,Kn=>{Kn(ct,at,fn)})},Ie=()=>{const ct=[le];return(at,fn)=>{const Jt=fn.event.value,Kn=N.paletteHue.get(),gn=Np(Kn,Jt.x,100-Jt.y),$n=jm(gn);Re(at,$n,Kn,ct)}},Et=()=>{const ct=[oe,le];return(at,fn)=>{const Jt=T(fn.event.value),Kn=N.paletteRgba.get(),gn=VD(Kn),$n=Np(Jt,gn.saturation,gn.value),tn=jm($n);Re(at,tn,Jt,ct)}},Je=()=>{const ct=[oe,Q,me];return(at,fn)=>{const Jt=fn.event.hex,Kn=F$(Jt);Re(at,Jt,Kn.hue,ct)}};return{uid:h.uid,dom:h.dom,components:[j.asSpec(),H.asSpec(),Z.asSpec()],behaviours:mt([On("colour-picker-events",[je(_4,Je()),je(AI,Ie()),je(kI,Et())]),We.config({find:ct=>Z.getOpt(ct)}),mn.config({mode:"acyclic"})])}};return uu({name:"ColourPicker",configFields:[ot("dom"),De("onValidHex",V),De("onInvalidHex",V)],factory:d})},MI={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red channel","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green channel","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue channel","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.rgb.invalid":"Numbers only, 0 to 255","colorcustom.rgb.invalidHex":"Hexadecimal only, 000000 to FFFFFF","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},PI=n=>s=>de(s)?n.translate(MI[s]):n.translate(s),D4=(n,s,a)=>{const i=T=>"tox-"+T,d=(T,_,N=T,H=T)=>hu(N,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+T],attributes:{title:s.translate(H),"aria-live":"polite",..._.fold(()=>({}),j=>({id:j}))}},s.icons),g=NI(PI(s),i,s.tooltips.getConfig,d),h=T=>{pn(T,Yd,{name:"hex-valid",value:!0})},C=T=>{pn(T,Yd,{name:"hex-valid",value:!1})},x=_o(g.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:h,onInvalidHex:C}));return{dom:{tag:"div"},components:[x.asSpec()],behaviours:mt([Vb(a,T=>{const _=x.get(T);return We.getCurrent(_).bind(j=>Ft.getValue(j).hex).map(j=>"#"+om(j,"#")).getOr("")},(T,_)=>{const N=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,H=A.from(N.exec(_)).bind(oe=>oi(oe,1)),j=x.get(T);We.getCurrent(j).fold(()=>{console.log("Can not find form")},oe=>{Ft.setValue(oe,{hex:H.getOr("")}),xp.getField(oe,"hex").each(le=>{Yn(le,$u())})})}),Xd.self()])}};var BI=tinymce.util.Tools.resolve("tinymce.Resource");const $I=n=>ho(n,"init"),bZ=n=>{const s=kn(),a=_o({dom:{tag:n.tag}}),i=kn(),d=!$I(n)&&n.onFocus.isSome()?[Nn.config({onFocus:g=>{n.onFocus.each(h=>{h(g.element.dom)})}}),ms.config({})]:[];return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:mt([On("custom-editor-events",[vs(g=>{a.getOpt(g).each(h=>{($I(n)?n.init(h.element.dom):BI.load(n.scriptId,n.scriptUrl).then(C=>C(h.element.dom,n.settings))).then(C=>{i.on(x=>{C.setValue(x)}),i.clear(),s.set(C)})})})]),Vb(A.none(),()=>s.get().fold(()=>i.get().getOr(""),g=>g.getValue()),(g,h)=>{s.get().fold(()=>i.set(h),C=>C.setValue(h))}),Xd.self()].concat(d)),components:[a.asSpec()]}};var Gf=tinymce.util.Tools.resolve("tinymce.util.Tools");const yR=Mt("browse.files.event"),vZ=(n,s,a)=>{const i=Gf.explode(s.getOption("images_file_types")),d=g=>a.fold(()=>St(i,h=>ai(g.name.toLowerCase(),`.${h.toLowerCase()}`)),h=>St(h,C=>ai(g.name.toLowerCase(),`.${C.toLowerCase()}`)));return sn(Gm(n),d)},yZ=(n,s,a)=>{const i=(H,j)=>{j.stop()},d=H=>(j,Z)=>{Te(H,oe=>{oe(j,Z)})},g=(H,j)=>{if(!Xt.isDisabled(H)){const Z=j.event.raw;pn(H,yR,{files:Z.dataTransfer?.files})}},h=(H,j)=>{const Z=j.event.raw.target;pn(H,yR,{files:Z.files})},C=(H,j)=>{j&&(Ft.setValue(H,vZ(j,s,n.allowedFileExtensions)),pn(H,ki,{name:n.name}))},x=_o({dom:{tag:"input",attributes:{type:"file",accept:n.allowedFileTypes.getOr("image/*")},styles:{display:"none"}},behaviours:mt([On("input-file-events",[Ig(wg()),Ig(Vh())])])}),T=n.label.map(H=>ch(H,s)),_=eo.parts.field({factory:ca,dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Es(s.translate(n.buttonLabel.getOr("Browse for an image"))),x.asSpec()],action:H=>{x.get(H).element.dom.click()},buttonBehaviours:mt([Xd.self(),A4(a.getOr([])),ms.config({}),Vm.button(()=>s.checkUiComponentContext(n.context).shouldDisable),wr(()=>s.checkUiComponentContext(n.context))])}),N={dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:mt([Xt.config({disabled:()=>s.checkUiComponentContext(n.context).shouldDisable}),wr(()=>s.checkUiComponentContext(n.context)),so.config({toggleClass:"dragenter",toggleOnExecute:!1}),On("dropzone-events",[je("dragenter",d([i,so.toggle])),je("dragleave",d([i,so.toggle])),je("dragover",i),je("drop",d([i,g])),je(Sg(),h)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Es(s.translate(n.dropAreaLabel.getOr("Drop an image here")))]},_]}]};return by(T,N,["tox-form__group--stretched"],[On("handle-files",[je(yR,(H,j)=>{eo.getField(H).each(Z=>{C(Z,j.event.files)})})])])},CZ=(n,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${n.columns}col`]},components:pe(n.items,s.interpreter)}),R4=Mt("alloy-fake-before-tabstop"),CR=Mt("alloy-fake-after-tabstop"),II=n=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:n},behaviours:mt([Nn.config({ignore:!0}),ms.config({})])}),LI=(n,s)=>({dom:{tag:"div",classes:["tox-navobj",...n.getOr([])]},components:[II([R4]),s,II([CR])],behaviours:mt([Xd.childAt(1)])}),xR=(n,s)=>{pn(n,aa(),{raw:{which:9,shiftKey:s}})},FI=(n,s)=>{const a=s.element;lr(a,R4)?xR(n,!0):lr(a,CR)&&xR(n,!1)},oS=n=>gg(n,["."+R4,"."+CR].join(","),dn),N4=Mt("update-dialog"),SR=Mt("update-title"),HI=Mt("update-body"),zI=Mt("update-footer"),_n=Mt("body-send-message"),Bp=Mt("dialog-focus-shifted"),M4=Ks().browser,vy=M4.isSafari(),VI=M4.isFirefox(),wR=vy||VI,xZ=M4.isChromium(),UI=({scrollTop:n,scrollHeight:s,clientHeight:a})=>Math.ceil(n)+a>=s,jI=(n,s)=>n.scrollTo(0,s==="bottom"?99999999:s),SZ=(n,s)=>{const a=n.body;return A.from(!/^<!DOCTYPE (html|HTML)/.test(s)&&(!xZ&&!vy||Dt(a)&&(a.scrollTop!==0||Math.abs(a.scrollHeight-a.clientHeight)>1))?a:n.documentElement)},WI=(n,s,a)=>{const i=n.dom;A.from(i.contentDocument).fold(a,d=>{let g=0;const h=SZ(d,s).map(x=>(g=x.scrollTop,x)).forall(UI),C=()=>{const x=i.contentWindow;Dt(x)&&(h?jI(x,"bottom"):!h&&wR&&g!==0&&jI(x,g))};vy&&i.addEventListener("load",C,{once:!0}),d.open(),d.write(s),d.close(),vy||C()})},ZI=Fr(wR,vy?500:200).map(n=>Fs(WI,n)),YQ=(n,s)=>{const a=Zt(n.getOr(""));return{getValue:i=>a.get(),setValue:(i,d)=>{if(a.get()!==d){const g=i.element,h=()=>Cn(g,"srcdoc",d);s?ZI.fold(se(WI),C=>C.throttle)(g,d,h):h()}a.set(d)}}},sS=(n,s,a)=>{const i="tox-dialog__iframe",d=n.transparent?[]:[`${i}--opaque`],g=n.border?["tox-navobj-bordered"]:[],h={...n.label.map(N=>({title:N})).getOr({}),...a.map(N=>({srcdoc:N})).getOr({}),...n.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}},C=YQ(a,n.streamContent),x=n.label.map(N=>ch(N,s)),T=N=>LI(A.from(g),{uid:N.uid,dom:{tag:"iframe",attributes:h,classes:[i,...d]},behaviours:mt([ms.config({}),Nn.config({}),Vb(a,C.getValue,C.setValue),Pc.config({channels:{[Bp]:{onReceive:(H,j)=>{j.newFocus.each(Z=>{Wl(H.element).each(oe=>{(L(H.element,Z)?Go:Ms)(oe,"tox-navobj-bordered-focus")})})}}}})])}),_=eo.parts.field({factory:{sketch:T}});return by(x,_,["tox-form__group--stretched"],[])},ER=(n,s,a,i,d)=>{const g=a*d,h=i*d,C=Math.max(0,n/2-g/2),x=Math.max(0,s/2-h/2);return{left:C.toString()+"px",top:x.toString()+"px",width:g.toString()+"px",height:h.toString()+"px"}},GI=(n,s,a)=>{const i=ma(n),d=yr(n);return Math.min(i/s,d/a,1)},EZ=(n,s)=>{const a=Zt(s.getOr({url:""})),i=_o({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(x=>({src:x.url})).getOr({})}}),d=_o({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(x,T)=>{const _={url:T.url};T.zoom.each(H=>_.zoom=H),T.cachedWidth.each(H=>_.cachedWidth=H),T.cachedHeight.each(H=>_.cachedHeight=H),a.set(_);const N=()=>{const{cachedWidth:H,cachedHeight:j,zoom:Z}=_;if(!Ut(H)&&!Ut(j)){if(Ut(Z)){const le=GI(x.element,H,j);_.zoom=le}const oe=ER(ma(x.element),yr(x.element),H,j,_.zoom);d.getOpt(x).each(le=>{Ts(le.element,oe)})}};i.getOpt(x).each(H=>{const j=H.element;T.url!==Pr(j,"src")&&(Cn(j,"src",T.url),Ms(x.element,"tox-imagepreview__loaded")),N(),di(j).then(Z=>{x.getSystem().isConnected()&&(Go(x.element,"tox-imagepreview__loaded"),_.cachedWidth=Z.dom.naturalWidth,_.cachedHeight=Z.dom.naturalHeight,N())})})},h={};n.height.each(x=>h.height=x);const C=s.map(x=>({url:x.url,zoom:A.from(x.zoom),cachedWidth:A.from(x.cachedWidth),cachedHeight:A.from(x.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:h,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:mt([Xd.self(),Vb(C,()=>a.get(),g)])}},TZ=(n,s,a)=>{const i="tox-label",d=n.align==="center"?[`${i}--center`]:[],g=n.align==="end"?[`${i}--end`]:[],h=_o({dom:{tag:"label",classes:[i,...d,...g]},components:[Es(s.providers.translate(n.label))]}),C=pe(n.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[h.asSpec(),...C],behaviours:mt([Xd.self(),Bn.config({}),fZ(A.none()),mn.config({mode:"acyclic"}),On("label",[vs(x=>{n.for.each(T=>{a(T).each(_=>{h.getOpt(x).each(N=>{const H=Pr(_.element,"id")??Mt("form-field");Cn(_.element,"id",H),Cn(N.element,"for",H)})})})})])])}},TR=Mt("toolbar.button.execute"),kZ=n=>Af((s,a)=>{qx(n,s)(i=>{pn(s,TR,{buttonApi:i}),n.onAction(i)})}),qf=Mt("common-button-display-events"),kR={[Aa()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events","tooltipping"],[Iu()]:["toolbar-button-events",qf],[El()]:["toolbar-button-events","dropdown-events","tooltipping"],[Yc()]:["focusing","alloy.base.behaviour",qf]},P4=n=>Tn(n.element,"width",bs(n.element,"width")),qI=(n,s,a)=>hu(n,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),AR=(n,s)=>qI(n,s,[]),$p=(n,s)=>qI(n,s,[Bn.config({})]),_R=(n,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Es(a.translate(n))],behaviours:mt([Bn.config({})])}),od=Mt("update-menu-text"),Ub=Mt("update-menu-icon"),B4=Mt("update-tooltip-text"),OR=(n,s,a,i)=>{const d=Zt(V),g=Zt(n.tooltip),h=n.text.map(le=>_o(_R(le,s,a.providers))),C=n.icon.map(le=>_o($p(le,a.providers.icons))),x=(le,Q)=>{const me=Ft.getValue(le);return Nn.focus(me),pn(me,"keydown",{raw:Q.event.raw}),Ji.close(me),A.some(!0)},T=n.role.fold(()=>({}),le=>({role:le})),_=A.from(n.listRole).map(le=>({listRole:le})).getOr({}),N=n.ariaLabel.fold(()=>({}),le=>({"aria-label":a.providers.translate(le)})),H=hu("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons),j=Mt("common-button-display-events"),Z="dropdown-events";return _o(Ji.sketch({...n.uid?{uid:n.uid}:{},...T,..._,dom:{tag:"button",classes:[s,`${s}--select`].concat(pe(n.classes,le=>`${s}--${le}`)),attributes:{...N,...Dt(i)?{"data-mce-name":i}:{}}},components:jf([C.map(le=>le.asSpec()),h.map(le=>le.asSpec()),A.some(H)]),matchWidth:!0,useMinWidth:!0,onOpen:(le,Q,me)=>{n.searchable&&nZ(me)},dropdownBehaviours:mt([...n.dropdownBehaviours,Vm.button(()=>n.disabled||a.providers.checkUiComponentContext(n.context).shouldDisable),wr(()=>a.providers.checkUiComponentContext(n.context)),Nm.config({}),Bn.config({}),...n.tooltip.map(le=>ys.config(a.providers.tooltips.getConfig({tooltipText:a.providers.translate(le),onShow:Q=>{if(Ha(g.get(),n.tooltip,(me,ve)=>ve!==me).getOr(!1)){const me=a.providers.translate(g.get().getOr(""));ys.setComponents(Q,a.providers.tooltips.getComponents({tooltipText:me}))}}}))).toArray(),On(Z,[Um(n,d),Rp(n,d)]),On(j,[vs((le,Q)=>{n.listRole!=="listbox"&&P4(le)})]),On("update-dropdown-width-variable",[je(Uh(),(le,Q)=>Ji.close(le))]),On("menubutton-update-display-text",[je(od,(le,Q)=>{h.bind(me=>me.getOpt(le)).each(me=>{Bn.set(me,[Es(a.providers.translate(Q.event.text))])})}),je(Ub,(le,Q)=>{C.bind(me=>me.getOpt(le)).each(me=>{Bn.set(me,[$p(Q.event.icon,a.providers.icons)])})}),je(B4,(le,Q)=>{const me=a.providers.translate(Q.event.text);Cn(le.element,"aria-label",me),g.set(A.some(Q.event.text))})])]),eventOrder:jo(kR,{[Yc()]:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"],[Iu()]:["toolbar-button-events",ys.name(),Z,j]}),sandboxBehaviours:mt([mn.config({mode:"special",onLeft:x,onRight:x}),On("dropdown-sandbox-events",[je(N6,(le,Q)=>{QW(le),Q.stop()}),je(M6,(le,Q)=>{JW(le,Q),Q.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Lx(!1,n.columns,n.presets),fakeFocus:n.searchable,...n.listRole==="listbox"?{}:{onHighlightItem:fI,onCollapseMenu:(le,Q,me)=>{Eo.getHighlighted(me).each(ve=>{fI(le,me,ve)})},onDehighlightItem:tZ}}},getAnchorOverrides:()=>({maxHeightFunction:(le,Q)=>{q2()(le,Q-10)}}),fetch:le=>Ko.nu(Yt(n.fetch,le))})).asSpec()},$4=n=>de(n),KI=n=>n.type==="separator",YI=n=>ho(n,"getSubmenuItems"),AZ={type:"separator"},_Z=(n,s)=>{const a=Tt(n,(i,d)=>$4(d)?d===""?i:d==="|"?i.length>0&&!KI(i[i.length-1])?i.concat([AZ]):i:ho(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&KI(a[a.length-1])&&a.pop(),a},XQ=(n,s)=>{const a=n.getSubmenuItems(),i=XI(a,s),d=jo(i.menus,{[n.value]:i.items}),g=jo(i.expansions,{[n.value]:n.value});return{item:n,menus:d,expansions:g}},OZ=n=>{const s=en(n,"value").getOrThunk(()=>Mt("generated-menu-item"));return jo({value:s},n)},XI=(n,s)=>{const a=_Z(de(n)?n.split(" "):n,s);return Un(a,(i,d)=>{if(YI(d)){const g=OZ(d),h=XQ(g,s);return{menus:jo(i.menus,h.menus),items:[h.item,...i.items],expansions:jo(i.expansions,h.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},DR=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),DZ=n=>n.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),lh=(n,s,a,i)=>{const d=Mt("primary-menu"),g=XI(n,a.shared.providers.menuItems());if(g.items.length===0)return A.none();const h=DR(i),C=E4(d,g.items,s,a,i.isHorizontalMenu,h),x=DZ(i),T=Ls(g.menus,(N,H)=>E4(H,N,s,a,!1,x)),_=jo(T,pf(d,C));return A.from(yb.tieredData(d,_,g.expansions))},rS=n=>!ho(n,"items"),RR="data-value",I4=(n,s,a,i,d)=>pe(a,g=>rS(g)?{type:"togglemenuitem",...d?{}:{role:"option"},text:g.text,value:g.value,active:g.value===i,onAction:()=>{Ft.setValue(n,g.value),pn(n,ki,{name:s}),Nn.focus(n)}}:{type:"nestedmenuitem",text:g.text,getSubmenuItems:()=>I4(n,s,g.items,i,d)}),NR=(n,s)=>va(n,a=>rS(a)?Fr(a.value===s,a):NR(a.items,s)),QI=(n,s,a)=>{const i=St(n.items,T=>!rS(T)),d=s.shared.providers,g=a.bind(T=>NR(n.items,T)).orThunk(()=>No(n.items).filter(rS)),h=n.label.map(T=>ch(T,d)),C=eo.parts.field({dom:{},factory:{sketch:T=>OR({context:n.context,uid:T.uid,text:g.map(_=>_.text),icon:A.none(),tooltip:A.none(),role:Fr(!i,"combobox"),...i?{}:{listRole:"listbox"},ariaLabel:n.label,fetch:(_,N)=>{const H=I4(_,n.name,n.items,Ft.getValue(_),i);N(lh(H,Kd.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:A.none()}))},onSetup:se(V),getApi:se({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[ms.config({}),Vb(g.map(_=>_.value),_=>Pr(_.element,RR),(_,N)=>{NR(n.items,N).each(H=>{Cn(_.element,RR,H.value),pn(_,od,{text:H.text})})})]},"tox-listbox",s.shared)}}),x={dom:{tag:"div",classes:["tox-listboxfield"]},components:[C]};return eo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:hn([h.toArray(),[x]]),fieldBehaviours:mt([Xt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:T=>{eo.getField(T).each(Xt.disable)},onEnabled:T=>{eo.getField(T).each(Xt.enable)}})])})},yy=(n,s)=>({dom:{tag:"div",classes:n.classes},components:pe(n.items,s.shared.interpreter)}),JI=(n,s,a)=>{const i=pe(n.items,x=>({text:s.translate(x.text),value:x.value})),d=n.label.map(x=>ch(x,s)),g=eo.parts.field({dom:{},...a.map(x=>({data:x})).getOr({}),selectAttributes:{size:n.size},options:i,factory:B_,selectBehaviours:mt([Xt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),ms.config({}),On("selectbox-change",[je(Sg(),(x,T)=>{pn(x,ki,{name:n.name})})])])}),h=n.size>1?A.none():A.some(hu("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),C={dom:{tag:"div",classes:["tox-selectfield"]},components:hn([[g],h.toArray()])};return eo.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:hn([d.toArray(),[C]]),fieldBehaviours:mt([Xt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{eo.getField(x).each(Xt.disable)},onEnabled:x=>{eo.getField(x).each(Xt.enable)}}),wr(()=>s.checkUiComponentContext(n.context))])})},eL=n=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=n.value.toFixed(a(n.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+n.unit},L4=n=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(n);if(a!==null){const i=parseFloat(a[1]),d=a[2];return rn.value({value:i,unit:d})}else return rn.error(n)},tL=(n,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>ho(a,d);return n.unit===s?A.some(n.value):i(n.unit)&&i(s)?a[n.unit]===a[s]?A.some(n.value):A.some(n.value/a[n.unit]*a[s]):A.none()},Cy=n=>A.none(),RZ=(n,s)=>a=>tL(a,s).map(i=>({value:i*n,unit:s})),nL=(n,s)=>{const a=L4(n).toOptional(),i=L4(s).toOptional();return Ha(a,i,(d,g)=>tL(d,g.unit).map(h=>g.value/h).map(h=>RZ(h,g.unit)).getOr(Cy)).getOr(Cy)},oL=(n,s)=>{let a=Cy;const i=Mt("ratio-event"),d=oe=>hu(oe,{tag:"span",classes:["tox-icon","tox-lock-icon__"+oe]},s.icons),g=()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,h=wr(()=>s.checkUiComponentContext(n.context)),C=n.label.getOr("Constrain proportions"),x=s.translate(C),T=Sr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":x,"data-mce-name":C}},components:[d("lock"),d("unlock")],buttonBehaviours:mt([Xt.config({disabled:g}),h,ms.config({}),ys.config(s.tooltips.getConfig({tooltipText:x}))])}),_=oe=>({dom:{tag:"div",classes:["tox-form__group"]},components:oe}),N=oe=>eo.parts.field({factory:zf,inputClasses:["tox-textfield"],inputBehaviours:mt([Xt.config({disabled:g}),h,ms.config({}),On("size-input-events",[je(tu(),(le,Q)=>{pn(le,i,{isField1:oe})}),je(Sg(),(le,Q)=>{pn(le,ki,{name:n.name})})])]),selectOnFocus:!1}),H=oe=>({dom:{tag:"label",classes:["tox-label"]},components:[Es(s.translate(oe))]}),j=Sr.parts.field1(_([eo.parts.label(H("Width")),N(!0)])),Z=Sr.parts.field2(_([eo.parts.label(H("Height")),N(!1)]));return Sr.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[j,Z,_([H(sg),T])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(oe,le,Q)=>{L4(Ft.getValue(oe)).each(me=>{a(me).each(ve=>{Ft.setValue(le,eL(ve))})})},coupledFieldBehaviours:mt([Xt.config({disabled:g,onDisabled:oe=>{Sr.getField1(oe).bind(eo.getField).each(Xt.disable),Sr.getField2(oe).bind(eo.getField).each(Xt.disable),Sr.getLock(oe).each(Xt.disable)},onEnabled:oe=>{Sr.getField1(oe).bind(eo.getField).each(Xt.enable),Sr.getField2(oe).bind(eo.getField).each(Xt.enable),Sr.getLock(oe).each(Xt.enable)}}),wr(()=>s.checkUiComponentContext("mode:design")),On("size-input-events2",[je(i,(oe,le)=>{const Q=le.event.isField1,me=Q?Sr.getField1(oe):Sr.getField2(oe),ve=Q?Sr.getField2(oe):Sr.getField1(oe),Re=me.map(Ft.getValue).getOr(""),Ie=ve.map(Ft.getValue).getOr("");a=nL(Re,Ie)})])])})},NZ=(n,s,a)=>{const i=Gd.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Es(s.translate(n.label))]}),d=Gd.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=Gd.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Gd.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n.min,maxX:n.max,getInitialValue:se(a.getOrThunk(()=>(Math.abs(n.max)-Math.abs(n.min))/2))},components:[i,d,g],sliderBehaviours:mt([Xd.self(),Nn.config({})]),onChoose:(h,C,x)=>{pn(h,ki,{name:n.name,value:x})},onChange:(h,C,x)=>{pn(h,ki,{name:n.name,value:x})}})},MZ=(n,s)=>{const a=C=>({dom:{tag:"th",innerHtml:s.translate(C)}}),i=C=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:pe(C,a)}]}),d=C=>({dom:{tag:"td",innerHtml:s.translate(C)}}),g=C=>({dom:{tag:"tr"},components:pe(C,d)}),h=C=>({dom:{tag:"tbody"},components:pe(C,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(n.header),h(n.cells)],behaviours:mt([ms.config({}),Nn.config({})])}},sL=(n,s)=>{const a=n.label.map(Z=>ch(Z,s)),i=[Xt.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable}),wr(()=>s.checkUiComponentContext(n.context)),mn.config({mode:"execution",useEnter:n.multiline!==!0,useControlEnter:n.multiline===!0,execute:Z=>(Yn(Z,nS),A.some(!0))}),On("textfield-change",[je($u(),(Z,oe)=>{pn(Z,ki,{name:n.name})}),je(x0(),(Z,oe)=>{pn(Z,ki,{name:n.name})})]),ms.config({})],d=n.validation.map(Z=>du.config({getRoot:oe=>Wl(oe.element),invalidClass:"tox-invalid",validator:{validate:oe=>{const le=Ft.getValue(oe),Q=Z.validator(le);return Ko.pure(Q===!0?rn.value(le):rn.error(Q))},validateOnLoad:Z.validateOnLoad}})).toArray(),g=n.placeholder.fold(se({}),Z=>({placeholder:s.translate(Z)})),h=n.inputMode.fold(se({}),Z=>({inputmode:Z})),x={...n.spellcheck.fold(se({}),Z=>({spellcheck:Z})),...g,...h,"data-mce-name":n.name},T=eo.parts.field({tag:n.multiline===!0?"textarea":"input",...n.data.map(Z=>({data:Z})).getOr({}),inputAttributes:x,inputClasses:[n.classname],inputBehaviours:mt(hn([i,d])),selectOnFocus:!1,factory:zf}),_=n.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[T]}:T,H=(n.flex?["tox-form__group--stretched"]:[]).concat(n.maximized?["tox-form-group--maximize"]:[]),j=[Xt.config({disabled:()=>n.disabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:Z=>{eo.getField(Z).each(Xt.disable)},onEnabled:Z=>{eo.getField(Z).each(Xt.enable)}}),wr(()=>s.checkUiComponentContext(n.context))];return by(a,_,H,j)},rL=(n,s,a)=>sL({name:n.name,multiline:!1,label:n.label,inputMode:n.inputMode,placeholder:n.placeholder,flex:!1,disabled:!n.enabled,classname:"tox-textfield",validation:A.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:A.none()},s),PZ=(n,s,a)=>sL({name:n.name,multiline:!0,label:n.label,inputMode:A.none(),placeholder:n.placeholder,flex:!0,disabled:!n.enabled,classname:"tox-textarea",validation:A.none(),maximized:n.maximized,data:a,context:n.context,spellcheck:n.spellcheck},s),aL=n=>({isEnabled:()=>!Xt.isDisabled(n),setEnabled:s=>Xt.set(n,!s),setActive:s=>{const a=n.element;s?(Go(a,"tox-tbtn--enabled"),Cn(a,"aria-pressed",!0)):(Ms(a,"tox-tbtn--enabled"),ps(a,"aria-pressed"))},isActive:()=>lr(n.element,"tox-tbtn--enabled"),setTooltip:s=>{pn(n,B4,{text:s})},setText:s=>{pn(n,od,{text:s})},setIcon:s=>pn(n,Ub,{icon:s})}),aS=(n,s,a,i,d=!0,g)=>{const h=n.buttonType==="bordered"?["bordered"]:[];return OR({text:n.text,icon:n.icon,tooltip:n.tooltip,ariaLabel:n.tooltip,searchable:n.search.isSome(),role:i,fetch:(C,x)=>{const T={pattern:n.search.isSome()?tS(C):""};n.fetch(_=>{x(lh(_,Kd.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:n.search}))},T,aL(C))},onSetup:n.onSetup,getApi:C=>aL(C),columns:1,presets:"normal",classes:h,dropdownBehaviours:[...d?[ms.config({})]:[]],context:n.context},s,a.shared,g)},BZ=(n,s,a)=>{const i=g=>h=>{const C=!h.isActive();h.setActive(C),g.storage.set(C),a.shared.getSink().each(x=>{s().getOpt(x).each(T=>{Hr(T.element),pn(T,Yd,{name:g.name,value:g.storage.get()})})})},d=g=>h=>{h.setActive(g.storage.get())};return g=>{g(pe(n,h=>{const C=h.text.fold(()=>({}),x=>({text:x}));return{type:h.type,active:!1,...C,context:h.context,onAction:i(h),onSetup:d(h)}}))}},cL=n=>({dom:{tag:"span",classes:["tox-tree__label"],attributes:{"aria-label":n}},components:[Es(n)]}),iL=(n,s,a)=>{n.customStateIcon.each(i=>s.push(uL(i,a.shared.providers.icons,n.customStateIconTooltip.fold(()=>[],d=>[ys.config(a.shared.providers.tooltips.getConfig({tooltipText:d}))]),["tox-icon-custom-state"])))},lL=Mt("leaf-label-event-id"),MR=({leaf:n,onLeafAction:s,visible:a,treeId:i,selectedId:d,backstage:g})=>{const h=n.menu.map(x=>aS(x,"tox-mbtn",g,A.none(),a)),C=[cL(n.title)];return iL(n,C,g),h.each(x=>C.push(x)),ca.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(a?["tox-tree--leaf__label--visible"]:[])},components:C,role:"treeitem",action:x=>{s(n.id),x.getSystem().broadcastOn([`update-active-item-${i}`],{value:n.id})},eventOrder:{[aa()]:[lL,"keying"]},buttonBehaviours:mt([...a?[ms.config({})]:[],so.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Pc.config({channels:{[`update-active-item-${i}`]:{onReceive:(x,T)=>{(T.value===n.id?so.on:so.off)(x)}}}}),On(lL,[vs((x,T)=>{d.each(_=>{(_===n.id?so.on:so.off)(x)})}),je(aa(),(x,T)=>{const _=T.event.raw.code==="ArrowLeft",N=T.event.raw.code==="ArrowRight";_?(Vi(x.element,".tox-tree--directory").each(H=>{x.getSystem().getByDom(H).each(j=>{Sd(H,".tox-tree--directory__label").each(Z=>{j.getSystem().getByDom(Z).each(Nn.focus)})})}),T.stop()):N&&T.stop()})])])})},uL=(n,s,a,i,d)=>hu(n,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"].concat(i||[]),behaviours:a,attributes:d},s),$Z=(n,s)=>uL(n,s,[]),dL=Mt("directory-label-event-id"),mL=({directory:n,visible:s,noChildren:a,backstage:i})=>{const d=n.menu.map(C=>aS(C,"tox-mbtn",i,A.none())),g=[{dom:{tag:"div",classes:["tox-chevron"]},components:[$Z("chevron-right",i.shared.providers.icons)]},cL(n.title)];iL(n,g,i),d.each(C=>{g.push(C)});const h=C=>{Vi(C.element,".tox-tree--directory").each(x=>{C.getSystem().getByDom(x).each(T=>{const _=!so.isOn(T);so.toggle(T),pn(C,"expand-tree-node",{expanded:_,node:n.id})})})};return ca.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(s?["tox-tree--directory__label--visible"]:[])},components:g,action:h,eventOrder:{[aa()]:[dL,"keying"]},buttonBehaviours:mt([...s?[ms.config({})]:[],On(dL,[je(aa(),(C,x)=>{const T=x.event.raw.code==="ArrowRight",_=x.event.raw.code==="ArrowLeft";T&&a&&x.stop(),(T||_)&&Vi(C.element,".tox-tree--directory").each(N=>{C.getSystem().getByDom(N).each(H=>{!so.isOn(H)&&T||so.isOn(H)&&_?(h(C),x.stop()):_&&!so.isOn(H)&&(Vi(H.element,".tox-tree--directory").each(j=>{Sd(j,".tox-tree--directory__label").each(Z=>{H.getSystem().getByDom(Z).each(Nn.focus)})}),x.stop())})})})])])})},IZ=({children:n,onLeafAction:s,visible:a,treeId:i,expandedIds:d,selectedId:g,backstage:h})=>({dom:{tag:"div",classes:["tox-tree--directory__children"]},components:n.map(C=>C.type==="leaf"?MR({leaf:C,selectedId:g,onLeafAction:s,visible:a,treeId:i,backstage:h}):PR({directory:C,expandedIds:d,selectedId:g,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:h})),behaviours:mt([Jc.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:a}),Bn.config({})])}),LZ=Mt("directory-event-id"),PR=({directory:n,onLeafAction:s,labelTabstopping:a,treeId:i,backstage:d,expandedIds:g,selectedId:h})=>{const{children:C}=n,x=Zt(g),T=N=>C.map(H=>H.type==="leaf"?MR({leaf:H,selectedId:h,onLeafAction:s,visible:N,treeId:i,backstage:d}):PR({directory:H,expandedIds:x.get(),selectedId:h,onLeafAction:s,labelTabstopping:N,treeId:i,backstage:d})),_=g.includes(n.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[mL({directory:n,visible:a,noChildren:n.children.length===0,backstage:d}),IZ({children:C,expandedIds:g,selectedId:h,onLeafAction:s,visible:_,treeId:i,backstage:d})],behaviours:mt([On(LZ,[vs((N,H)=>{so.set(N,_)}),je("expand-tree-node",(N,H)=>{const{expanded:j,node:Z}=H.event;x.set(j?[...x.get(),Z]:x.get().filter(oe=>oe!==Z))})]),so.config({...n.children.length>0?{aria:{mode:"expanded"}}:{},toggleClass:"tox-tree--directory--expanded",onToggled:(N,H)=>{const j=N.components()[1],Z=T(H);H?Jc.grow(j):Jc.shrink(j),Bn.set(j,Z)}})])}},FZ=Mt("tree-event-id"),HZ=(n,s)=>{const a=n.onLeafAction.getOr(V),i=n.onToggleExpand.getOr(V),d=n.defaultExpandedIds,g=Zt(d),h=Zt(n.defaultSelectedId),C=Mt("tree-id"),x=(T,_)=>n.items.map(N=>N.type==="leaf"?MR({leaf:N,selectedId:T,onLeafAction:a,visible:!0,treeId:C,backstage:s}):PR({directory:N,selectedId:T,onLeafAction:a,expandedIds:_,labelTabstopping:!0,treeId:C,backstage:s}));return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:x(h.get(),g.get()),behaviours:mt([mn.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),On(FZ,[je("expand-tree-node",(T,_)=>{const{expanded:N,node:H}=_.event;g.set(N?[...g.get(),H]:g.get().filter(j=>j!==H)),i(g.get(),{expanded:N,node:H})})]),Pc.config({channels:{[`update-active-item-${C}`]:{onReceive:(T,_)=>{h.set(A.some(_.value)),Bn.set(T,x(A.some(_.value),g.get()))}}}}),Bn.config({})])}},F4=(n,s,a=[],i,d,g,h)=>{const C=s.fold(()=>({}),_=>({action:_})),x={buttonBehaviours:mt([Vm.item(()=>!n.enabled||h.checkUiComponentContext(n.context).shouldDisable),wr(()=>h.checkUiComponentContext(n.context)),ms.config({}),...g.map(_=>ys.config(h.tooltips.getConfig({tooltipText:h.translate(_)}))).toArray(),On("button press",[Y2("click")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...C},T=jo(x,{dom:i});return jo(T,{components:d})},fL=(n,s,a,i=[],d)=>{const g=n.tooltip.map(T=>({"aria-label":a.translate(T)})).getOr({}),h={tag:"button",classes:["tox-tbtn"],attributes:{...g,"data-mce-name":d}},C=n.icon.map(T=>AR(T,a.icons)),x=jf([C]);return F4(n,s,i,h,x,n.tooltip,a)},BR=n=>{switch(n){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},$R=(n,s,a,i=[],d=[])=>{const g=a.translate(n.text),h=n.icon.map(j=>AR(j,a.icons)),C=[h.getOrThunk(()=>Es(g))],x=n.buttonType.getOr(!n.primary&&!n.borderless?"secondary":"primary"),N={tag:"button",classes:[...BR(x),...h.isSome()?["tox-button--icon"]:[],...n.borderless?["tox-button--naked"]:[],...d],attributes:{"aria-label":g,"data-mce-name":n.text}},H=n.icon.map(se(g));return F4(n,s,i,N,C,H,a)},gL=(n,s,a,i=[],d=[])=>{const g=$R(n,A.some(s),a,i,d);return ca.sketch(g)},IR=(n,s)=>a=>{s==="custom"?pn(a,Yd,{name:n,value:{}}):s==="submit"?Yn(a,nS):s==="cancel"?Yn(a,ih):console.error("Unknown button type: ",s)},hL=(n,s)=>s==="menu",LR=(n,s)=>s==="custom"||s==="cancel"||s==="submit",zZ=(n,s)=>s==="togglebutton",VZ=(n,s,a)=>{const i=n.icon.map(Q=>$p(Q,s.icons)).map(_o),d=Q=>{pn(Q,Yd,{name:n.name,value:{setIcon:me=>{i.map(ve=>ve.getOpt(Q).each(Re=>{Bn.set(Re,[$p(me,s.icons)])}))}}})},g=n.buttonType.getOr(n.primary?"primary":"secondary"),h={...n,name:n.name??"",tooltip:n.tooltip,enabled:n.enabled??!1},C=h.tooltip.or(n.text).map(Q=>({"aria-label":s.translate(Q)})).getOr({}),x=BR(g??"secondary"),T=n.icon.isSome()&&n.text.isSome(),_={tag:"button",classes:[...x.concat(n.icon.isSome()?["tox-button--icon"]:[]),...n.active?["tox-button--enabled"]:[],...T?["tox-button--icon-and-text"]:[]],attributes:{...C,...Dt(a)?{"data-mce-name":a}:{}}},N=[],H=s.translate(n.text.getOr("")),j=Es(H),oe=[...jf([i.map(Q=>Q.asSpec())]),...n.text.isSome()?[j]:[]],le=F4(h,A.some(d),N,_,oe,n.tooltip,s);return ca.sketch(le)},cS=(n,s,a)=>{if(hL(n,s)){const i=()=>h,d=n,g={...n,buttonType:"default",type:"menubutton",search:A.none(),onSetup:C=>(C.setEnabled(n.enabled),V),fetch:BZ(d.items,i,a)},h=_o(aS(g,"tox-tbtn",a,A.none(),!0,n.text.or(n.tooltip).getOrUndefined()));return h.asSpec()}else if(LR(n,s)){const i=IR(n.name,s),d={...n,context:s==="cancel"?"any":n.context,borderless:!1};return gL(d,i,a.shared.providers,[])}else{if(zZ(n,s))return VZ(n,a.shared.providers,n.text.or(n.tooltip).getOrUndefined());throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")}},UZ=(n,s)=>{const a=IR(n.name,"custom");return cZ(A.none(),eo.parts.field({factory:ca,...$R(n,A.some(a),s,[A4(""),Xd.self()])}))},pL={type:"separator"},jZ=n=>({type:"menuitem",value:n.url,text:n.title,meta:{attach:n.attach},onAction:V}),xy=(n,s)=>({type:"menuitem",value:s,text:n,meta:{attach:void 0},onAction:V}),WZ=n=>pe(n,jZ),bL=(n,s)=>sn(s,a=>a.type===n),vL=(n,s)=>WZ(bL(n,s)),ZZ=n=>vL("header",n.targets),Wm=n=>vL("anchor",n.targets),H4=n=>A.from(n.anchorTop).map(s=>xy("<top>",s)).toArray(),z4=n=>A.from(n.anchorBottom).map(s=>xy("<bottom>",s)).toArray(),GZ=n=>pe(n,s=>xy(s,s)),FR=n=>Tt(n,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(pL,a),[]),HR=(n,s)=>{const a=n.toLowerCase();return sn(s,i=>{const d=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,g=i.value??"";return hs(d.toLowerCase(),a)||hs(g.toLowerCase(),a)})},zR=(n,s,a)=>{const i=Ft.getValue(s),d=i?.meta?.text??i.value;return a.getLinkInformation().fold(()=>[],h=>{const C=HR(d,GZ(a.getHistory(n)));return n==="file"?FR([C,HR(d,ZZ(h)),HR(d,hn([H4(h),Wm(h),z4(h)]))]):C})},VR=Mt("aria-invalid"),UR=(n,s,a,i)=>{const d=s.shared.providers,g=me=>{const ve=Ft.getValue(me);a.addToHistory(ve.value,n.filetype)},h={...i.map(me=>({initialData:me})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{type:"url"},minChars:0,responseTime:0,fetch:me=>{const ve=zR(n.filetype,me,a),Re=lh(ve,Kd.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:A.none()});return Ko.pure(Re)},getHotspot:me=>Z.getOpt(me),onSetValue:(me,ve)=>{me.hasConfigured(du)&&du.run(me).get(V)},typeaheadBehaviours:mt([...a.getValidationHandler().map(me=>du.config({getRoot:ve=>Wl(ve.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(ve,Re)=>{_.getOpt(ve).each(Ie=>{Cn(Ie.element,"title",d.translate(Re))})}},validator:{validate:ve=>{const Re=Ft.getValue(ve);return ud.nu(Ie=>{me({type:n.filetype,url:Re.value},Et=>{if(Et.status==="invalid"){Cn(ve.element,"aria-errormessage",VR);const Je=rn.error(Et.message);Ie(Je)}else{ps(ve.element,"aria-errormessage");const Je=rn.value(Et.message);Ie(Je)}})})},validateOnLoad:!1}})).toArray(),Xt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable}),ms.config({}),On("urlinput-events",[je($u(),me=>{const ve=xc(me.element),Re=ve.trim();Re!==ve&&bl(me.element,Re),n.filetype==="file"&&pn(me,ki,{name:n.name})}),je(Sg(),me=>{pn(me,ki,{name:n.name}),g(me)}),je(x0(),me=>{pn(me,ki,{name:n.name}),g(me)})])]),eventOrder:{[$u()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:me=>me.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Lx(!1,1,"normal")},onExecute:(me,ve,Re)=>{pn(ve,nS,{})},onItemExecute:(me,ve,Re,Ie)=>{g(me),pn(me,ki,{name:n.name})}},C=eo.parts.field({...h,factory:dO}),x=n.label.map(me=>ch(me,d)),_=_o(((me,ve,Re=me,Ie=me)=>hu(Re,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+me],attributes:{title:d.translate(Ie),"aria-live":"polite",...ve.fold(()=>({}),Et=>({id:Et}))}},d.icons))("invalid",A.some(VR),"warning")),N=_o({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[_.asSpec()]}),H=a.getUrlPicker(n.filetype),j=Mt("browser.url.event"),Z=_o({dom:{tag:"div",classes:["tox-control-wrap"]},components:[C,N.asSpec()],behaviours:mt([Xt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable})])}),oe=_o(gL({context:n.context,name:n.name,icon:A.some("browse"),text:n.picker_text.or(n.label).getOr(""),enabled:n.enabled,primary:!1,buttonType:A.none(),borderless:!0},me=>Yn(me,j),d,[],["tox-browse-url"])),le=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:hn([[Z.asSpec()],H.map(()=>oe.asSpec()).toArray()])}),Q=me=>{We.getCurrent(me).each(ve=>{const Re=Ft.getValue(ve),Ie={fieldname:n.name,...Re};H.each(Et=>{Et(Ie).get(Je=>{Ft.setValue(ve,Je),pn(me,ki,{name:n.name})})})})};return eo.sketch({dom:bI(),components:x.toArray().concat([le()]),fieldBehaviours:mt([Xt.config({disabled:()=>!n.enabled||d.checkUiComponentContext(n.context).shouldDisable,onDisabled:me=>{eo.getField(me).each(Xt.disable),oe.getOpt(me).each(Xt.disable)},onEnabled:me=>{eo.getField(me).each(Xt.enable),oe.getOpt(me).each(Xt.enable)}}),wr(()=>d.checkUiComponentContext(n.context)),On("url-input-events",[je(j,Q)])])})},qZ=(n,s)=>{const a=lU(n.icon,s.icons);return Dm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${n.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:n.url?void 0:a},components:n.url?[ca.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:a,attributes:{title:s.translate(n.iconTooltip)}},action:i=>pn(i,Yd,{name:"alert-banner",value:n.url}),buttonBehaviours:mt([LO()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(n.text)}}]})},KZ=(n,s,a)=>{const i=x=>(x.element.dom.click(),A.some(!0)),d=eo.parts.field({factory:{sketch:nn},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:mt([Xd.self(),Xt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable,onDisabled:x=>{Wl(x.element).each(T=>Go(T,"tox-checkbox--disabled"))},onEnabled:x=>{Wl(x.element).each(T=>Ms(T,"tox-checkbox--disabled"))}}),ms.config({}),Nn.config({}),TI(a,i1,Kl),mn.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),On("checkbox-events",[je(Sg(),(x,T)=>{pn(x,ki,{name:n.name})})])])}),g=eo.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Es(s.translate(n.label))],behaviours:mt([Nm.config({})])}),h=x=>hu(x==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+x]},s.icons),C=_o({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[h("checked"),h("unchecked")]});return eo.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,C.asSpec(),g],fieldBehaviours:mt([Xt.config({disabled:()=>!n.enabled||s.checkUiComponentContext(n.context).shouldDisable}),wr(()=>s.checkUiComponentContext(n.context))])})},yL=(n,s)=>{const a=["tox-form__group",...n.stretched?["tox-form__group--stretched"]:[]],i=On("htmlpanel",[vs(d=>{n.onInit(d.element.dom)})]);return n.presets==="presentation"?Dm.sketch({dom:{tag:"div",classes:a,innerHtml:n.html},containerBehaviours:mt([ys.config({...s.tooltips.getConfig({tooltipText:"",onShow:d=>{Io(d.element,"[data-mce-tooltip]:hover").orThunk(()=>ar(d.element)).each(g=>{na(g,"data-mce-tooltip").each(h=>{ys.setComponents(d,s.tooltips.getComponents({tooltipText:h}))})})}}),mode:"children-normal",anchor:d=>({type:"node",node:Io(d.element,"[data-mce-tooltip]:hover").orThunk(()=>ar(d.element).filter(g=>na(g,"data-mce-tooltip").isSome())),root:d.element,layouts:{onLtr:se([Or,Ps,Ir,Oa,_r,ga]),onRtl:se([Or,Ps,Ir,Oa,_r,ga])},bubble:xi(0,-2,{})})}),i])}):Dm.sketch({dom:{tag:"div",classes:a,innerHtml:n.html,attributes:{role:"document"}},containerBehaviours:mt([ms.config({}),Nn.config({}),i])})},la=n=>(s,a,i,d,g)=>en(a,"name").fold(()=>n(a,d,A.none(),g),h=>s.field(h,n(a,d,en(i,h),g))),YZ=n=>(s,a,i,d,g)=>{const h=jo(a,{source:"dynamic"});return la(n)(s,h,i,d,g)},jR={bar:la((n,s)=>hI(n,s.shared)),collection:la((n,s,a)=>iZ(n,s.shared.providers,a)),alertbanner:la((n,s)=>qZ(n,s.shared.providers)),input:la((n,s,a)=>rL(n,s.shared.providers,a)),textarea:la((n,s,a)=>PZ(n,s.shared.providers,a)),label:la((n,s,a,i)=>TZ(n,s.shared,i)),iframe:YZ((n,s,a)=>sS(n,s.shared.providers,a)),button:la((n,s)=>UZ(n,s.shared.providers)),checkbox:la((n,s,a)=>KZ(n,s.shared.providers,a)),colorinput:la((n,s,a)=>uZ(n,s.shared,s.colorinput,a)),colorpicker:la((n,s,a)=>D4(n,s.shared.providers,a)),dropzone:la((n,s,a)=>yZ(n,s.shared.providers,a)),grid:la((n,s)=>CZ(n,s.shared)),listbox:la((n,s,a)=>QI(n,s,a)),selectbox:la((n,s,a)=>JI(n,s.shared.providers,a)),sizeinput:la((n,s)=>oL(n,s.shared.providers)),slider:la((n,s,a)=>NZ(n,s.shared.providers,a)),urlinput:la((n,s,a)=>UR(n,s,s.urlinput,a)),customeditor:la(bZ),htmlpanel:la((n,s)=>yL(n,s.shared.providers)),imagepreview:la((n,s,a)=>EZ(n,a)),table:la((n,s)=>MZ(n,s.shared.providers)),tree:la((n,s)=>HZ(n,s)),panel:la((n,s)=>yy(n,s))},XZ={field:(n,s)=>s,record:se([])},CL=(n,s,a,i,d)=>{const g=jo(i,{shared:{interpreter:h=>V4(n,h,a,g,d)}});return V4(n,s,a,g,d)},V4=(n,s,a,i,d)=>en(jR,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),g=>g(n,s,a,i,d)),WR=(n,s,a,i)=>V4(XZ,n,s,a,i),iS={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},QZ=(n,s,a)=>{const d={maxHeightFunction:Bg()},g=()=>({type:"node",root:dl(pr(n())),node:A.from(n()),bubble:xi(12,12,iS),layouts:{onRtl:()=>[Oc],onLtr:()=>[Pg]},overrides:d}),h=()=>({type:"hotspot",hotspot:s(),bubble:xi(-12,12,iS),layouts:{onRtl:()=>[Ir,_r,Or],onLtr:()=>[_r,Ir,Or]},overrides:d});return()=>a()?g():h()},JZ=(n,s,a,i)=>{const g={maxHeightFunction:Bg()},h=()=>({type:"node",root:dl(pr(s())),node:A.from(s()),bubble:xi(12,12,iS),layouts:{onRtl:()=>[Ua],onLtr:()=>[Ua]},overrides:g}),C=()=>n?{type:"node",root:dl(pr(s())),node:A.from(s()),bubble:xi(0,-Cr(s()),iS),layouts:{onRtl:()=>[Ps],onLtr:()=>[Ps]},overrides:g}:{type:"hotspot",hotspot:a(),bubble:xi(0,0,iS),layouts:{onRtl:()=>[Ps],onLtr:()=>[Ps]},overrides:g};return()=>i()?h():C()},eG=(n,s,a)=>{const i=()=>({type:"node",root:dl(pr(n())),node:A.from(n()),layouts:{onRtl:()=>[Ua],onLtr:()=>[Ua]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Or],onLtr:()=>[Or]}});return()=>a()?i():d()},xL=(n,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=n.selection.getRng(),i=n.model.table.getSelectedCells();if(i.length>1){const d=i[0],g=i[i.length-1],h={firstCell:ht.fromDom(d),lastCell:ht.fromDom(g)};return A.some(h)}return A.some(ji.range(ht.fromDom(a.startContainer),a.startOffset,ht.fromDom(a.endContainer),a.endOffset))}}),tG=n=>s=>({type:"node",root:n(),node:s}),nG=(n,s,a,i)=>{const d=ny(n),g=()=>ht.fromDom(n.getBody()),h=()=>ht.fromDom(n.getContentAreaContainer()),C=()=>d||!i();return{inlineDialog:QZ(h,s,C),inlineBottomDialog:JZ(n.inline,h,a,C),banner:eG(h,s,C),cursor:xL(n,g),node:tG(g)}},oG=n=>(s,a)=>{uR(n)(s,a)},sG=n=>()=>sR(n),rG=n=>s=>y4(n,s),aG=n=>s=>K$(n,s),cG=n=>({colorPicker:oG(n),hasCustomColors:sG(n),getColors:rG(n),getColorCols:aG(n)}),iG=n=>()=>XB(n),lG=n=>({isDraggableModal:iG(n)}),uG=n=>{const s=Zt(VT(n)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},dG=n=>qn(n,"items"),SL=n=>qn(n,"format"),ZR=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],wL=n=>ho(n,"items"),U4=n=>ho(n,"block"),EL=n=>ho(n,"inline"),mG=n=>ho(n,"selector"),TL=n=>Tt(n,(s,a)=>{if(wL(a)){const i=TL(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(EL(a)||U4(a)||mG(a)){const d=`custom-${de(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),fG=(n,s)=>{const a=TL(s),i=d=>{Te(d,g=>{n.formatter.has(g.name)||n.formatter.register(g.name,g.format)})};return n.formatter?i(a.customFormats):n.on("init",()=>{i(a.customFormats)}),a.formats},kL=n=>FB(n).map(s=>{const a=fG(n,s);return HB(n)?ZR.concat(a):a}).getOr(ZR),gG=n=>{const s=wo(n);return s.length===1&&tt(s,"title")},AL=(n,s,a)=>({...n,type:"formatter",isSelected:s(n.format),getStylePreview:a(n.format)}),_L=(n,s,a,i)=>{const d=x=>AL(x,a,i),g=x=>{const T=C(x.items);return{...x,type:"submenu",getStyleItems:se(T)}},h=x=>{const T=de(x.name)?x.name:Mt(x.title),_=`custom-${T}`,N={...x,type:"formatter",format:_,isSelected:a(_),getStylePreview:i(_)};return n.formatter.register(T,N),N},C=x=>pe(x,T=>dG(T)?g(T):SL(T)?d(T):gG(T)?{...T,type:"separator"}:h(T));return C(s)},OL=n=>{const s=C=>()=>n.formatter.match(C),a=C=>()=>{const x=n.formatter.get(C);return x!==void 0?A.some({tag:x.length>0&&(x[0].inline||x[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(C))}):A.none()},i=Zt([]),d=Zt([]),g=Zt(!1);return n.on("PreInit",C=>{const x=kL(n),T=_L(n,x,s,a);i.set(T)}),n.on("addStyleModifications",C=>{const x=_L(n,C.items,s,a);d.set(x),g.set(C.replace)}),{getData:()=>{const C=g.get()?[]:i.get(),x=d.get();return C.concat(x)}}},DL=n=>{let i=0;const d=()=>i>0,g=C=>[{dom:{tag:"div",classes:["tox-tooltip__body"]},components:[Es(C.tooltipText)]}];return{getConfig:C=>({delayForShow:()=>d()?60:300,delayForHide:se(300),exclusive:!0,lazySink:n,tooltipDom:{tag:"div",classes:["tox-tooltip","tox-tooltip--up"]},tooltipComponents:g(C),onShow:(x,T)=>{i++,C.onShow&&C.onShow(x,T)},onHide:(x,T)=>{i--,C.onHide&&C.onHide(x,T)},onSetup:C.onSetup}),getComponents:g}},hG=n=>Dt(n)&&n.nodeType===1,RL=Gf.trim,NL=n=>s=>!!(hG(s)&&(s.contentEditable===n||s.getAttribute("data-mce-contenteditable")===n)),pG=NL("true"),bG=NL("false"),Ip=(n,s,a,i,d)=>({type:n,title:s,url:a,level:i,attach:d}),ML=n=>{let s=n;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return pG(s)}return!1},lS=(n,s)=>pe(Ur(ht.fromDom(s),n),a=>a.dom),uS=n=>n.innerText||n.textContent,PL=n=>n.id?n.id:Mt("h"),BL=n=>n&&n.nodeName==="A"&&(n.id||n.name)!==void 0,$L=n=>BL(n)&&IL(n),vG=n=>n&&/^(H[1-6])$/.test(n.nodeName),IL=n=>ML(n)&&!bG(n),yG=n=>vG(n)&&IL(n),CG=n=>vG(n)?parseInt(n.nodeName.substr(1),10):0,xG=n=>{const s=PL(n),a=()=>{n.id=s};return Ip("header",uS(n)??"","#"+s,CG(n),a)},SG=n=>{const s=n.id||n.name,a=uS(n);return Ip("anchor",a||"#"+s,"#"+s,0,V)},wG=n=>pe(sn(n,yG),xG),Sy=n=>pe(sn(n,$L),SG),dS=n=>lS("h1,h2,h3,h4,h5,h6,a:not([href])",n),GR=n=>RL(n.title).length>0,EG={find:n=>{const s=dS(n);return sn(wG(s).concat(Sy(s)),GR)}},wy="tinymce-url-history",LL=5,Ey=n=>de(n)&&/^https?/.test(n),FL=n=>Ct(n)&&n.length<=LL&&nt(n,Ey),HL=n=>Oe(n)&&dc(n,s=>!FL(s)).isNone(),zL=()=>{const n=Hb.getItem(wy);if(n===null)return{};let s;try{s=JSON.parse(n)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+wy+" was not valid JSON",a),{};throw a}return HL(s)?s:(console.log("Local storage "+wy+" was not valid format",s),{})},TG=n=>{if(!HL(n))throw new Error(`Bad format for history:
`+JSON.stringify(n));Hb.setItem(wy,JSON.stringify(n))},kG=n=>{const s=zL();return en(s,n).getOr([])},AG=(n,s)=>{if(!Ey(n))return;const a=zL(),i=en(a,s).getOr([]),d=sn(i,g=>g!==n);a[s]=[n].concat(d).slice(0,LL),TG(a)},VL=n=>!!n,UL=n=>Ls(Gf.makeMap(n,/[, ]/),VL),j4=n=>A.from(qB(n)),qR=n=>{const s=A.from(yO(n)).filter(VL).map(UL);return j4(n).fold(dn,a=>s.fold(_t,i=>wo(i).length>0?i:!1))},_G=(n,s)=>{const a=qR(n);return Ot(a)?a?j4(n):A.none():a[s]?j4(n):A.none()},W4=(n,s)=>_G(n,s).map(a=>i=>Ko.nu(d=>{const g=(C,x)=>{if(!de(C))throw new Error("Expected value to be string");if(x!==void 0&&!Oe(x))throw new Error("Expected meta to be a object");d({value:C,meta:x})},h={filetype:s,fieldname:i.fieldname,...A.from(i.meta).getOr({})};a.call(n,g,i.value,h)})),mS=n=>A.from(n).filter(de).getOrUndefined(),jL=n=>CO(n)?A.some({targets:EG.find(n.getBody()),anchorTop:mS(YB(n)),anchorBottom:mS(xO(n))}):A.none(),OG=n=>A.from(KB(n)),DG=n=>({getHistory:kG,addToHistory:AG,getLinkInformation:()=>jL(n),getValidationHandler:()=>OG(n),getUrlPicker:s=>W4(n,s)}),RG=(n,s,a,i)=>{const d=Zt(!1),g=uG(s),h={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Bc.translate,isDisabled:()=>!s.ui.isEnabled(),getOption:s.options.get,tooltips:DL(n.dialog),checkUiComponentContext:Q=>{if(IT(s))return{contextType:"disabled",shouldDisable:!0};const[me,ve=""]=Q.split(":"),Re=s.ui.registry.getAll().contexts,Ie=en(Re,me).fold(()=>en(Re,"mode").map(Et=>Et("design")).getOr(!1),Et=>ve.charAt(0)==="!"?!Et(ve.slice(1)):Et(ve));return{contextType:me,shouldDisable:!Ie}}},C=DG(s),x=OL(s),T=cG(s),_=lG(s),N=()=>d.get(),H=Q=>d.set(Q),j={shared:{providers:h,anchors:nG(s,a,i,g.isPositionedAtTop),header:g},urlinput:C,styles:x,colorinput:T,dialog:_,isContextMenuOpen:N,setContextMenuState:H},Z=Q=>A.none(),oe={...j,shared:{...j.shared,interpreter:Q=>WR(Q,{},oe,Z),getSink:n.popup}},le={...j,shared:{...j.shared,interpreter:Q=>WR(Q,{},le,Z),getSink:n.dialog}};return{popup:oe,dialog:le}},KR={skipFocus:"ToggleToolbarDrawer skipFocus is deprecated see migration guide: https://www.tiny.cloud/docs/tinymce/latest/migration-from-7x/"},NG=n=>{console.warn(KR[n],new Error().stack)},YR=(n,s,a)=>{const i=(at,fn)=>{Te([s,...a],Jt=>{Jt.broadcastEvent(at,fn)})},d=(at,fn)=>{Te([s,...a],Jt=>{Jt.broadcastOn([at],fn)})},g=at=>d(Rd(),{target:at.target}),h=at=>{d(ap(),{closedTooltip:()=>{at.preventDefault()}})},C=ta(),x=Mo(C,"touchstart",g),T=Mo(C,"touchmove",at=>i(ew(),at)),_=Mo(C,"touchend",at=>i(T2(),at)),N=Mo(C,"mousedown",g),H=Mo(C,"mouseup",at=>{at.raw.button===0&&d(Sm(),{target:at.target})}),j=at=>d(Rd(),{target:ht.fromDom(at.target)}),Z=at=>{at.button===0&&d(Sm(),{target:ht.fromDom(at.target)})},oe=()=>{Te(n.editorManager.get(),at=>{n!==at&&at.dispatch("DismissPopups",{relatedTarget:n})})},le=at=>i(k2(),rc(at)),Q=at=>{d(Dr(),{}),i(Uh(),rc(at))},me=pr(ht.fromDom(n.getElement())),ve=li(me,"scroll",at=>{requestAnimationFrame(()=>{const fn=n.getContainer();if(fn!=null){const Kn=Jg(n,s.element).map(gn=>[gn.element,...gn.others]).getOr([]);St(Kn,gn=>L(gn,at.target))&&(n.dispatch("ElementScroll",{target:at.target.dom}),i(nw(),at))}})}),Re=()=>d(Dr(),{}),Ie=at=>{at.state&&d(Rd(),{target:ht.fromDom(n.getContainer())})},Et=at=>{d(Rd(),{target:ht.fromDom(at.relatedTarget.getContainer())})},Je=at=>n.dispatch("focusin",at),ct=at=>n.dispatch("focusout",at);n.on("PostRender",()=>{n.on("click",j),n.on("tap",j),n.on("mouseup",Z),n.on("mousedown",oe),n.on("ScrollWindow",le),n.on("ResizeWindow",Q),n.on("ResizeEditor",Re),n.on("AfterProgressState",Ie),n.on("DismissPopups",Et),n.on("CloseActiveTooltips",h),Te([s,...a],at=>{at.element.dom.addEventListener("focusin",Je),at.element.dom.addEventListener("focusout",ct)})}),n.on("remove",()=>{n.off("click",j),n.off("tap",j),n.off("mouseup",Z),n.off("mousedown",oe),n.off("ScrollWindow",le),n.off("ResizeWindow",Q),n.off("ResizeEditor",Re),n.off("AfterProgressState",Ie),n.off("DismissPopups",Et),n.off("CloseActiveTooltips",h),Te([s,...a],at=>{at.element.dom.removeEventListener("focusin",Je),at.element.dom.removeEventListener("focusout",ct)}),N.unbind(),x.unbind(),T.unbind(),_.unbind(),H.unbind(),ve.unbind()}),n.on("detach",()=>{Te([s,...a],bE),Te([s,...a],at=>at.destroy())})},MG=V,XR=dn,WL=se([]);var PG=Object.freeze({__proto__:null,setup:MG,isDocked:XR,getBehaviours:WL});const QR=se(Mt("toolbar-height-change")),Kf={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},ZL="tox-tinymce--toolbar-sticky-on",BG="tox-tinymce--toolbar-sticky-off",eJ=(n,s)=>{const a=bc(s),d=cg(s).dom.innerHeight,g=Vs(a),h=ht.fromDom(n.elm),C=df(h),x=yr(h),T=C.y,_=T+x,N=Ea(s),H=yr(s),j=N.top,Z=j+H,oe=Math.abs(j-g.top)<2,le=Math.abs(Z-(g.top+d))<2;if(oe&&T<Z)Nu(g.left,T-H,a);else if(le&&_>j){const Q=T-d+x+H;Nu(g.left,Q,a)}},fS=(n,s)=>tt(Bs.getModes(n),s),JR=n=>{const s=i=>Cr(i)+(parseInt(bs(i,"margin-top"),10)||0)+(parseInt(bs(i,"margin-bottom"),10)||0),a=n.element;Wl(a).each(i=>{const d="padding-"+Bs.getModes(n)[0];if(Bs.isDocked(n)){const g=ma(i);Tn(a,"width",g+"px"),Tn(i,d,s(a)+"px")}else Jn(a,"width"),Jn(i,d)})},eN=(n,s)=>{s?(Ms(n,Kf.fadeOutClass),Ql(n,[Kf.transitionClass,Kf.fadeInClass])):(Ms(n,Kf.fadeInClass),Ql(n,[Kf.fadeOutClass,Kf.transitionClass]))},GL=(n,s)=>{const a=ht.fromDom(n.getContainer());s?(Go(a,ZL),Ms(a,BG)):(Go(a,BG),Ms(a,ZL))},$G=(n,s)=>{const a=bc(s);zr(a).filter(i=>!L(s,i)).filter(i=>L(i,ht.fromDom(a.dom.body))||te(n,i)).each(()=>Hr(s))},IG=(n,s)=>ar(n).orThunk(()=>s().toOptional().bind(a=>ar(a.element))),LG=(n,s,a)=>{n.inline||(s.header.isPositionedAtTop()||n.on("ResizeEditor",()=>{a().each(Bs.reset)}),n.on("ResizeWindow ResizeEditor",()=>{a().each(JR)}),n.on("SkinLoaded",()=>{a().each(i=>{Bs.isDocked(i)?Bs.reset(i):Bs.refresh(i)})}),n.on("FullscreenStateChanged",()=>{a().each(Bs.reset)})),n.on("AfterScrollIntoView",i=>{a().each(d=>{Bs.refresh(d);const g=d.element;Du(g)&&eJ(i,g)})}),n.on("PostRender",()=>{GL(n,!1)})},FG=n=>n().map(Bs.isDocked).getOr(!1),qL=()=>[Pc.config({channels:{[QR()]:{onReceive:JR}}})],KL=(n,s)=>{const a=kn(),i=s.getSink,d=C=>{i().each(x=>C(x.element))},g=C=>{n.inline||JR(C),GL(n,Bs.isDocked(C)),C.getSystem().broadcastOn([Dr()],{}),i().each(x=>x.getSystem().broadcastOn([Dr()],{}))},h=n.inline?[]:qL();return[Nn.config({}),Bs.config({contextual:{lazyContext:C=>{const x=Cr(C.element),T=n.inline?n.getContentAreaContainer():n.getContainer();return A.from(T).map(_=>{const N=Ar(ht.fromDom(_));return Jg(n,C.element).fold(()=>{const j=N.height-x,Z=N.y+(fS(C,"top")?0:x);return Br(N.x,Z,N.width,j)},j=>{const Z=um(N,Eb(j)),oe=fS(C,"top")?Z.y:Z.y+x;return Br(Z.x,oe,Z.width,Z.height-x)})})},onShow:()=>{d(C=>eN(C,!0))},onShown:C=>{d(x=>fa(x,[Kf.transitionClass,Kf.fadeInClass])),a.get().each(x=>{$G(C.element,x),a.clear()})},onHide:C=>{IG(C.element,i).fold(a.clear,a.set),d(x=>eN(x,!1))},onHidden:()=>{d(C=>fa(C,[Kf.transitionClass]))},...Kf},lazyViewport:C=>Jg(n,C.element).fold(()=>{const T=za(),_=ZB(n),N=T.y+(fS(C,"top")&&!d6(n)?_:0),H=T.height-(fS(C,"bottom")?_:0);return{bounds:Br(T.x,N,T.width,H),optScrollEnv:A.none()}},T=>({bounds:Eb(T),optScrollEnv:A.some({currentScrollTop:T.element.dom.scrollTop,scrollElmTop:Ea(T.element).top})})),modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...h]};var HG=Object.freeze({__proto__:null,setup:LG,isDocked:FG,getBehaviours:KL});const zG=n=>{const s=n.editor,a=n.sticky?KL:WL;return{uid:n.uid,dom:n.dom,components:n.components,behaviours:mt(a(s,n.sharedBackstage))}};var YL=uu({factory:(n,s)=>{const a=(d,g)=>{const h=pe(g,C=>{const x={type:"menubutton",text:C.text,fetch:_=>{_(C.getItems())},context:"any"},T=hD(x).mapError(_=>Bh(_)).getOrDie();return aS(T,"tox-mbtn",s.backstage,A.some("menuitem"))});Bn.set(d,h)},i={focus:mn.focusIn,setMenus:a};return{uid:n.uid,dom:n.dom,components:[],behaviours:mt([Bn.config({}),On("menubar-events",[vs(d=>{n.onSetup(d)}),je(Gi(),(d,g)=>{Io(d.element,".tox-mbtn--active").each(h=>{Ta(g.event.target,".tox-mbtn").each(C=>{L(h,C)||d.getSystem().getByDom(h).each(x=>{d.getSystem().getByDom(C).each(T=>{Ji.expand(T),Ji.close(x),Nn.focus(T)})})})})}),je(T0(),(d,g)=>{g.event.prevFocus.bind(h=>d.getSystem().getByDom(h).toOptional()).each(h=>{g.event.newFocus.bind(C=>d.getSystem().getByDom(C).toOptional()).each(C=>{Ji.isOpen(h)&&(Ji.expand(C),Ji.close(h))})})})]),mn.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(n.onEscape(d),A.some(!0))}),ms.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[ot("dom"),ot("uid"),ot("onEscape"),ot("backstage"),De("onSetup",V)],apis:{focus:(n,s)=>{n.focus(s)},setMenus:(n,s,a)=>{n.setMenus(s,a)}}});const XL="💝 Get all features",QL="https://www.tiny.cloud/tinymce-upgrade-to-cloud/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",VG=n=>{const s=n.promotionLink?[{dom:{tag:"a",attributes:{href:QL,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:XL}}]:[];return{uid:n.uid,dom:n.dom,components:s}},UG=n=>{const{sidebars:s}=n.ui.registry.getAll();Te(wo(s),a=>{const i=s[a],d=()=>gc(A.from(n.queryCommandValue("ToggleSidebar")),a);n.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{n.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const h=()=>g.setActive(d());return n.on("ToggleSidebar",h),()=>{n.off("ToggleSidebar",h)}},context:"any"})})},bu=n=>({element:()=>n.element.dom}),jG=(n,s)=>{const a=pe(wo(s),i=>{const d=s[i],g=wl(_D(d));return{name:i,getApi:bu,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return pe(a,i=>{const d=Zt(V);return n.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:fy.unnamedEvents([Um(i,d),Rp(i,d),je(A2(),(g,h)=>{const C=h.event;Wt(a,T=>T.name===C.name).each(T=>{(C.visible?T.onShow:T.onHide)(T.getApi(g))})})])})})},JL=n=>qa.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:jG(s,n),slotBehaviours:fy.unnamedEvents([vs(a=>qa.hideAllSlots(a))])})),eF=(n,s,a)=>{We.getCurrent(n).each(d=>{Bn.set(d,[JL(s)]);const g=a?.toLowerCase();de(g)&&ho(s,g)&&We.getCurrent(d).each(h=>{qa.showSlot(h,g),Jc.immediateGrow(d),Jn(d.element,"width"),Z4(n.element,"region")})})},Z4=(n,s)=>{Cn(n,"role",s)},gS=(n,s)=>{We.getCurrent(n).each(i=>{We.getCurrent(i).each(g=>{Jc.hasGrown(i)?qa.isShowing(g,s)?(Jc.shrink(i),Z4(n.element,"presentation")):(qa.hideAllSlots(g),qa.showSlot(g,s),Z4(n.element,"region")):(qa.hideAllSlots(g),qa.showSlot(g,s),Jc.grow(i),Z4(n.element,"region"))})})},WG=n=>We.getCurrent(n).bind(a=>Jc.isGrowing(a)||Jc.hasGrown(a)?We.getCurrent(a).bind(g=>Wt(qa.getSlotNames(g),h=>qa.isShowing(g,h))):A.none()),Ty=Mt("FixSizeEvent"),tN=Mt("AutoSizeEvent"),G4=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:mt([ms.config({}),Nn.config({}),Jc.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{We.getCurrent(s).each(qa.hideAllSlots),Yn(s,tN)},onGrown:s=>{Yn(s,tN)},onStartGrow:s=>{pn(s,Ty,{width:ws(s.element,"width").getOr("")})},onStartShrink:s=>{pn(s,Ty,{width:ma(s.element)+"px"})}}),Bn.config({}),We.config({find:s=>{const a=Bn.contents(s);return No(a)}})])}],behaviours:mt([Xd.childAt(0),On("sidebar-sliding-events",[je(Ty,(s,a)=>{Tn(s.element,"width",a.event.width)}),je(tN,(s,a)=>{Jn(s.element,"width")})])])}),ZG=n=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":n.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:Mm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),tF=n=>We.getCurrent(n).each(s=>Hr(s.element,!0)),sd=(n,s)=>{const a="tabindex",i=`data-mce-${a}`;A.from(n.iframeElement).map(ht.fromDom).each(d=>{s?(na(d,a).each(g=>Cn(d,i,g)),Cn(d,a,-1)):(ps(d,a),na(d,i).each(g=>{Cn(d,a,g),ps(d,i)}))})},GG=(n,s,a,i)=>{const d=s.element;if(sd(n,a),a)st.block(s,ZG(i)),Jn(d,"display"),ps(d,"aria-hidden"),n.hasFocus()&&tF(s);else{const g=We.getCurrent(s).exists(h=>Fi(h.element));st.unblock(s),Tn(d,"display","none"),Cn(d,"aria-hidden","true"),g&&n.focus()}},q4=n=>({uid:n.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:mt([Bn.config({}),st.config({focus:!1}),We.config({find:s=>No(s.components())})]),components:[]}),nF=n=>n.type==="focusin",oF=n=>nF(n)?(n.composed?No(n.composedPath()):A.from(n.target)).map(ht.fromDom).filter(pc).exists(a=>lr(a,"mce-pastebin")):!1,qG=(n,s,a)=>{const i=Zt(!1),d=kn(),g=C=>{i.get()&&!oF(C)&&(C.preventDefault(),tF(s()),n.editorManager.setActive(n))};n.inline||n.on("PreInit",()=>{n.dom.bind(n.getWin(),"focusin",g),n.on("BeforeExecCommand",C=>{C.command.toLowerCase()==="mcefocus"&&C.value!==!0&&g(C)})});const h=C=>{C!==i.get()&&(i.set(C),GG(n,s(),C,a.providers),EW(n,C))};n.on("ProgressState",C=>{if(d.on(clearTimeout),En(C.time)){const x=$T.setEditorTimeout(n,()=>h(C.state),C.time);d.set(x)}else h(C.state),d.clear()})},nN=n=>{const s=n.label.isNone()?n.title.fold(()=>({}),a=>({attributes:{"aria-label":a}})):n.label.fold(()=>({}),a=>({attributes:{"aria-label":a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"].concat(n.label.isSome()?["tox-toolbar__group_with_label"]:[]),...s},components:[...n.label.map(a=>({dom:{tag:"span",classes:["tox-label","tox-label--context-toolbar"]},components:[Es(a)]})).toArray(),PT.parts.items({})],items:n.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-toolbar-nav-item:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:mt([ms.config({}),Nn.config({ignore:!0})])}},K4=n=>PT.sketch(nN(n)),sF=(n,s)=>{const a=vs(i=>{const d=pe(n.initGroups,K4);Pm.setGroups(i,d)});return mt([Vm.toolbarButton(()=>n.providers.checkUiComponentContext("any").shouldDisable),wr(()=>n.providers.checkUiComponentContext("any")),mn.config({mode:s,onEscape:n.onEscape,visibilitySelector:".tox-toolbar__overflow",selector:".tox-toolbar__group"}),On("toolbar-events",[a])])},rF=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return{uid:n.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":nN({title:A.none(),label:A.none(),items:[]}),"overflow-button":fL({context:"any",icon:A.some("more-drawer"),enabled:!0,tooltip:A.some("Reveal or hide additional toolbar items")},A.none(),n.providers,[],"overflow-button")},splitToolbarBehaviours:sF(n,s)}},KG=n=>{const s=rF(n),a=4,i=OB.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return OB.sketch({...s,lazySink:n.getSink,getOverflowBounds:()=>{const d=n.moreDrawerData.lazyHeader().element,g=df(d),h=Yp(d),C=df(h),x=Math.max(h.dom.scrollHeight,C.height);return Br(g.x+a,C.y,g.width-a*2,x)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:n.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>n.onToggled(d,!0),onClosed:d=>n.onToggled(d,!1)})},YG=n=>{const s=cO.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=cO.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=rF(n);return cO.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([QR()],{type:"opened"}),n.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([QR()],{type:"closed"}),n.onToggled(d,!1)}})},Y4=n=>{const s=n.cyclicKeying?"cyclic":"acyclic";return Pm.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(n.type===gu.scrolling?["tox-toolbar--scrolling"]:[])},components:[Pm.parts.groups({})],toolbarBehaviours:sF(n,s)})},XG=(n,s)=>{const a=n.type==="togglebutton",i=n.icon.map(Q=>$p(Q,s.icons)).map(_o),g=Q=>{const me=Et=>{i.map(Je=>Je.getOpt(Q).each(ct=>{Bn.set(ct,[$p(Et,s.icons)])}))},ve=Et=>{const Je=Q.element;Et?(Go(Je,"tox-button--enabled"),Cn(Je,"aria-pressed",!0)):(Ms(Je,"tox-button--enabled"),ps(Je,"aria-pressed"))},Re=()=>lr(Q.element,"tox-button--enabled"),Ie=()=>Hr(Q.element);if(a)return n.onAction({setIcon:me,setActive:ve,isActive:Re,focus:Ie});if(n.type==="button")return n.onAction({setIcon:me})},h={...n,name:a?n.text.getOr(n.icon.getOr("")):n.text??n.icon.getOr(""),primary:n.buttonType==="primary",buttonType:A.from(n.buttonType),tooltip:n.tooltip,icon:n.icon,enabled:!0,borderless:n.borderless},C=BR(n.buttonType??"secondary"),x=a?n.text.map(s.translate):A.some(s.translate(n.text)),T=x.map(Es),_=h.tooltip.or(x).map(Q=>({"aria-label":s.translate(Q)})).getOr({}),N=i.map(Q=>Q.asSpec()),H=jf([N,T]),j=n.icon.isSome()&&T.isSome(),Z={tag:"button",classes:C.concat(...n.icon.isSome()&&!j?["tox-button--icon"]:[]).concat(...j?["tox-button--icon-and-text"]:[]).concat(...n.borderless?["tox-button--naked"]:[]).concat(...n.type==="togglebutton"&&n.active?["tox-button--enabled"]:[]),attributes:_},oe=[],le=F4(h,A.some(g),oe,Z,H,n.tooltip,s);return ca.sketch(le)},oN=(n,s)=>XG(n,s),aF=(n,s)=>({dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:pe(n.buttons,a=>oN(a,s))}),sN=Ks().deviceType,QG=sN.isPhone(),cF=sN.isTablet(),JG=n=>{let s=!1;const a=pe(n.buttons,i=>i.type==="group"?(s=!0,aF(i,n.providers)):oN(i,n.providers));return{uid:n.uid,dom:{tag:"div",classes:[s?"tox-view__toolbar":"tox-view__header",...QG||cF?["tox-view--mobile","tox-view--scrolling"]:[]]},behaviours:mt([Nn.config({}),mn.config({mode:"flow",selector:"button, .tox-button",focusInside:_g.OnEnterOrSpaceMode})]),components:s?a:[Dm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Dm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:a})]}},eq=n=>({uid:n.uid,behaviours:mt([Nn.config({}),ms.config({})]),dom:{tag:"div",classes:["tox-view__pane"]}}),iF=(n,s,a,i)=>{const d={getPane:g=>pa.getPart(g,n,"pane"),getOnShow:g=>n.viewConfig.onShow,getOnHide:g=>n.viewConfig.onHide};return{uid:n.uid,dom:n.dom,components:s,behaviours:mt([Nn.config({}),mn.config({mode:"cyclic",focusInside:_g.OnEnterOrSpaceMode})]),apis:d}};var jb=wi({name:"silver.View",configFields:[ot("viewConfig")],partFields:[_c({factory:{sketch:JG},schema:[ot("buttons"),ot("providers")],name:"header"}),_c({factory:{sketch:eq},schema:[],name:"pane"})],factory:iF,apis:{getPane:(n,s)=>n.getPane(s),getOnShow:(n,s)=>n.getOnShow(s),getOnHide:(n,s)=>n.getOnHide(s)}});const lF=(n,s,a)=>is(s,(i,d)=>{const g=wl(lW(i));return n.slot(d,jb.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[jb.parts.header({buttons:g.buttons,providers:a})]:[],jb.parts.pane({})]}))}),tq=(n,s)=>qa.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:lF(a,n,s),slotBehaviours:fy.unnamedEvents([vs(i=>qa.hideAllSlots(i))])})),uF=n=>Wt(qa.getSlotNames(n),s=>qa.isShowing(n,s)),nq=n=>{const s=n.element;Tn(s,"display","none"),Cn(s,"aria-hidden","true")},dF=n=>{const s=n.element;Jn(s,"display"),ps(s,"aria-hidden")},oq=n=>({getContainer:se(n)}),mF=(n,s,a)=>{qa.getSlot(n,s).each(i=>{jb.getPane(i).each(d=>{a(i)(oq(d.element.dom))})})},sq=(n,s)=>mF(n,s,jb.getOnShow),rq=(n,s)=>mF(n,s,jb.getOnHide);var X4=uu({factory:(n,s)=>{const g={setViews:(h,C)=>{Bn.set(h,[tq(C,s.backstage.shared.providers)])},whichView:h=>We.getCurrent(h).bind(uF),toggleView:(h,C,x,T)=>We.getCurrent(h).exists(_=>{const N=uF(_),H=N.exists(Z=>T===Z),j=qa.getSlot(_,T).isSome();return j&&(qa.hideAllSlots(_),H?(nq(h),C()):(x(),dF(h),qa.showSlot(_,T),sq(_,T)),N.each(Z=>rq(_,Z))),j})};return{uid:n.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:mt([Bn.config({}),We.config({find:h=>{const C=Bn.contents(h);return No(C)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[ot("backstage")],apis:{setViews:(n,s,a)=>n.setViews(s,a),toggleView:(n,s,a,i,d)=>n.toggleView(s,a,i,d),whichView:(n,s)=>n.whichView(s)}});const aq=(n,s,a)=>{let i=!1;const d=h=>{o2(h,".tox-statusbar").each(C=>{bs(C,"display")==="none"&&Pr(C,"aria-hidden")==="true"?(Jn(C,"display"),ps(C,"aria-hidden")):(Tn(C,"display","none"),Cn(C,"aria-hidden","true"))})},g={getSocket:h=>pa.getPart(h,n,"socket"),setSidebar:(h,C,x)=>{pa.getPart(h,n,"sidebar").each(T=>eF(T,C,x))},toggleSidebar:(h,C)=>{pa.getPart(h,n,"sidebar").each(x=>gS(x,C))},whichSidebar:h=>pa.getPart(h,n,"sidebar").bind(WG).getOrNull(),getHeader:h=>pa.getPart(h,n,"header"),getToolbar:h=>pa.getPart(h,n,"toolbar"),setToolbar:(h,C)=>{pa.getPart(h,n,"toolbar").each(x=>{const T=pe(C,K4);x.getApis().setGroups(x,T)})},setToolbars:(h,C)=>{pa.getPart(h,n,"multiple-toolbar").each(x=>{const T=pe(C,_=>pe(_,K4));aP.setItems(x,T)})},refreshToolbar:h=>{pa.getPart(h,n,"toolbar").each(x=>x.getApis().refresh(x))},toggleToolbarDrawer:h=>{pa.getPart(h,n,"toolbar").each(C=>{ri(C.getApis().toggle,x=>x(C))})},toggleToolbarDrawerWithoutFocusing:h=>{pa.getPart(h,n,"toolbar").each(C=>{ri(C.getApis().toggleWithoutFocusing,x=>x(C))})},isToolbarDrawerToggled:h=>pa.getPart(h,n,"toolbar").bind(C=>A.from(C.getApis().isOpen).map(x=>x(C))).getOr(!1),getThrobber:h=>pa.getPart(h,n,"throbber"),focusToolbar:h=>{pa.getPart(h,n,"toolbar").orThunk(()=>pa.getPart(h,n,"multiple-toolbar")).each(x=>{mn.focusIn(x)})},setMenubar:(h,C)=>{pa.getPart(h,n,"menubar").each(x=>{YL.setMenus(x,C)})},focusMenubar:h=>{pa.getPart(h,n,"menubar").each(C=>{YL.focus(C)})},setViews:(h,C)=>{pa.getPart(h,n,"viewWrapper").each(x=>{X4.setViews(x,C)})},toggleView:(h,C)=>pa.getPart(h,n,"viewWrapper").exists(x=>X4.toggleView(x,()=>g.showMainView(h),()=>g.hideMainView(h),C)),whichView:h=>pa.getPart(h,n,"viewWrapper").bind(X4.whichView).getOrNull(),hideMainView:h=>{i=g.isToolbarDrawerToggled(h),i&&g.toggleToolbarDrawer(h),pa.getPart(h,n,"editorContainer").each(C=>{const x=C.element;d(x),Tn(x,"display","none"),Cn(x,"aria-hidden","true")})},showMainView:h=>{i&&g.toggleToolbarDrawer(h),pa.getPart(h,n,"editorContainer").each(C=>{const x=C.element;d(x),Jn(x,"display"),ps(x,"aria-hidden")})}};return{uid:n.uid,dom:n.dom,components:s,apis:g,behaviours:n.behaviours}},cq=mu.optional({factory:YL,name:"menubar",schema:[ot("backstage")]}),iq=n=>n.type===gu.sliding?YG:n.type===gu.floating?KG:Y4,lq=mu.optional({factory:{sketch:n=>aP.sketch({uid:n.uid,dom:n.dom,listBehaviours:mt([mn.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Y4({type:n.type,uid:Mt("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:n.providers,onEscape:()=>(n.onEscape(),A.some(!0))}),setupItem:(s,a,i,d)=>{Pm.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[ot("dom"),ot("onEscape")]}),rN=mu.optional({factory:{sketch:n=>{const s=iq(n),a={type:n.type,uid:n.uid,onEscape:()=>(n.onEscape(),A.some(!0)),onToggled:(i,d)=>n.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:n.getSink,providers:n.providers,moreDrawerData:{lazyToolbar:n.lazyToolbar,lazyMoreButton:n.lazyMoreButton,lazyHeader:n.lazyHeader},attributes:n.attributes};return s(a)}},name:"toolbar",schema:[ot("dom"),ot("onEscape"),ot("getSink")]}),uq=mu.optional({factory:{sketch:zG},name:"header",schema:[ot("dom")]}),dq=mu.optional({factory:{sketch:VG},name:"promotion",schema:[ot("dom"),ot("promotionLink")]}),fF=mu.optional({name:"socket",schema:[ot("dom")]}),gF=mu.optional({factory:{sketch:G4},name:"sidebar",schema:[ot("dom")]}),mq=mu.optional({factory:{sketch:q4},name:"throbber",schema:[ot("dom")]}),fq=mu.optional({factory:X4,name:"viewWrapper",schema:[ot("backstage")]}),gq=n=>({uid:n.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:n.components}),hq=mu.optional({factory:{sketch:gq},name:"editorContainer",schema:[]});var os=wi({name:"OuterContainer",factory:aq,configFields:[ot("dom"),ot("behaviours")],partFields:[uq,cq,rN,lq,fF,gF,dq,mq,fq,hq],apis:{getSocket:(n,s)=>n.getSocket(s),setSidebar:(n,s,a,i)=>{n.setSidebar(s,a,i)},toggleSidebar:(n,s,a)=>{n.toggleSidebar(s,a)},whichSidebar:(n,s)=>n.whichSidebar(s),getHeader:(n,s)=>n.getHeader(s),getToolbar:(n,s)=>n.getToolbar(s),setToolbar:(n,s,a)=>{n.setToolbar(s,a)},setToolbars:(n,s,a)=>{n.setToolbars(s,a)},refreshToolbar:(n,s)=>n.refreshToolbar(s),toggleToolbarDrawer:(n,s)=>{n.toggleToolbarDrawer(s)},toggleToolbarDrawerWithoutFocusing:(n,s)=>{n.toggleToolbarDrawerWithoutFocusing(s)},isToolbarDrawerToggled:(n,s)=>n.isToolbarDrawerToggled(s),getThrobber:(n,s)=>n.getThrobber(s),setMenubar:(n,s,a)=>{n.setMenubar(s,a)},focusMenubar:(n,s)=>{n.focusMenubar(s)},focusToolbar:(n,s)=>{n.focusToolbar(s)},setViews:(n,s,a)=>{n.setViews(s,a)},toggleView:(n,s,a)=>n.toggleView(s,a),whichView:(n,s)=>n.whichView(s)}});const pq="file edit view insert format tools table help",aN={file:{title:"File",items:"newdocument restoredraft | preview | importword exportpdf exportword | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code suggestededits revisionhistory | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image video link media addcomment pageembed inserttemplate codesample inserttable accordion math | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Q4=(n,s,a)=>{const i=VB(a).split(/[ ,]/);return{text:n.title,getItems:()=>Ae(n.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:St(i,h=>h===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},hS=n=>n.split(" "),hF=(n,s)=>{const a={...aN,...s.menus},i=wo(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?hS(pq):hS(s.menubar===!1?"":s.menubar),g=sn(d,C=>{const x=ho(aN,C);return i?x||en(s.menus,C).exists(T=>ho(T,"items")):x}),h=pe(g,C=>{const x=a[C];return Q4({title:x.title,items:hS(x.items)},s,n)});return sn(h,C=>{const x=T=>de(T)||T.type!=="separator";return C.getItems().length>0&&St(C.getItems(),x)})},bq=n=>{const s=()=>{n._skinLoaded=!0,H$(n)};return()=>{n.initialized?s():n.on("init",s)}},pF=(n,s)=>()=>h4(n,{message:s}),vq=n=>{const s=_x(n);return s?A.from(s):A.none()},bF=(n,s,a)=>(n.on("remove",()=>a.unload(s)),a.load(s)),J4=(n,s,a,i)=>(n.on("remove",()=>i.unloadRawCss(s)),i.loadRawCss(s,a)),vF=(n,s)=>"ui/"+n+"/"+s,yq=n=>A.from(tinymce.Resource.get(n)).filter(de),cN=(n,s,a="")=>{const i=vq(n).map(g=>vF(g,`${s}.css`)),d=i.bind(yq);return Ha(i,d,(g,h)=>({_kind:"load-raw",key:g,css:h})).getOrThunk(()=>{const g=n.editorManager.suffix;return{_kind:"load-stylesheet",url:a+`/${s}${g}.css`}})},iN=(n,s)=>{const a=n.ui.styleSheetLoader,i=cN(n,"skin",s);switch(i._kind){case"load-raw":const{key:d,css:g}=i;return J4(n,d,g,a),Promise.resolve();case"load-stylesheet":const{url:h}=i;return bF(n,h,a);default:return Promise.resolve()}},Cq=(n,s)=>{if(ml(ht.fromDom(n.getElement()))){const i=Yv.DOM.styleSheetLoader,d=cN(n,"skin.shadowdom",s);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return J4(n,g,h,i),Promise.resolve();case"load-stylesheet":const{url:C}=d;return bF(n,C,i);default:return Promise.resolve()}}else return Promise.resolve()},xq=(n,s,a)=>{const d=cN(n,s?"content.inline":"content",a);switch(d._kind){case"load-raw":const{key:g,css:h}=d;return s?J4(n,g,h,n.ui.styleSheetLoader):n.on("PostRender",()=>{J4(n,g,h,n.dom.styleSheetLoader)}),Promise.resolve();case"load-stylesheet":const{url:C}=d;return a&&n.contentCSS.push(C),Promise.resolve();default:return Promise.resolve()}},yF=async(n,s)=>{const a=wO(s);if(await xq(s,n,a),!Ox(s)&&de(a))return Promise.all([iN(s,a),Cq(s,a)]).then()},CF=(n,s)=>yF(n,s).then(bq(s),pF(s,"Skin could not be loaded")),xF=Yt(CF,!1),Sq=Yt(CF,!0),lN=n=>({isEnabled:()=>!Xt.isDisabled(n),setEnabled:s=>Xt.set(n,!s),setText:s=>pn(n,od,{text:s}),setIcon:s=>pn(n,Ub,{icon:s})}),wq=n=>({setActive:s=>{so.set(n,s)},isActive:()=>so.isOn(n),isEnabled:()=>!Xt.isDisabled(n),setEnabled:s=>Xt.set(n,!s),setText:s=>pn(n,od,{text:s}),setIcon:s=>pn(n,Ub,{icon:s})}),Eq=(n,s)=>n.map(a=>({"aria-label":s.translate(a)})).getOr({}),Tq=Mt("focus-button"),ek=(n,s,a,i,d,g,h)=>{const C=s.map(T=>_o(_R(T,"tox-tbtn",d))),x=n.map(T=>_o($p(T,d.icons)));return{dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:{...Eq(a,d),...Dt(h)?{"data-mce-name":h}:{}}},components:jf([x.map(T=>T.asSpec()),C.map(T=>T.asSpec())]),eventOrder:{[Yc()]:["focusing","alloy.base.behaviour",qf],[Iu()]:[qf,"toolbar-group-button-events"],[El()]:[qf,"toolbar-group-button-events","tooltipping"]},buttonBehaviours:mt([Vm.toolbarButton(()=>d.checkUiComponentContext(g).shouldDisable),wr(()=>d.checkUiComponentContext(g)),On(qf,[vs((T,_)=>P4(T)),je(od,(T,_)=>{C.bind(N=>N.getOpt(T)).each(N=>{Bn.set(N,[Es(d.translate(_.event.text))])})}),je(Ub,(T,_)=>{x.bind(N=>N.getOpt(T)).each(N=>{Bn.set(N,[$p(_.event.icon,d.icons)])})}),je(Yc(),(T,_)=>{_.event.prevent(),Yn(T,Tq)})])].concat(i.getOr([])))}},kq=(n,s,a,i,d)=>{const g=s.shared,h=Zt(V),C={toolbarButtonBehaviours:[],getApi:lN,onSetup:n.onSetup},x=[On("toolbar-group-button-events",[Um(C,h),Rp(C,h)]),...n.tooltip.map(T=>ys.config(s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(T)}))).toArray()];return Qg.sketch({lazySink:g.getSink,fetch:()=>Ko.nu(T=>{T(pe(a(n.items),K4))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:ek(n.icon,n.text,n.tooltip,A.some(x),g.providers,n.context,d),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},SF=(n,s,a,i)=>{const d=Zt(V),g=ek(n.icon,n.text,n.tooltip,A.none(),a,n.context,i);return ca.sketch({dom:g.dom,components:g.components,eventOrder:kR,buttonBehaviours:{...mt([On("toolbar-button-events",[kZ({onAction:n.onAction,getApi:s.getApi}),Um(s,d),Rp(s,d)]),...n.tooltip.map(h=>ys.config(a.tooltips.getConfig({tooltipText:a.translate(h)+n.shortcut.map(C=>` (${PD(C)})`).getOr("")}))).toArray(),Vm.toolbarButton(()=>!n.enabled||a.checkUiComponentContext(n.context).shouldDisable),wr(()=>a.checkUiComponentContext(n.context))].concat(s.toolbarButtonBehaviours)),[qf]:g.buttonBehaviours?.[qf]}})},Aq=(n,s,a)=>pS(n,s,[],a),pS=(n,s,a,i)=>SF(n,{toolbarButtonBehaviours:a.length>0?[On("toolbarButtonWith",a)]:[],getApi:lN,onSetup:n.onSetup},s,i),uN=(n,s,a)=>wF(n,s,[],a),wF=(n,s,a,i)=>SF(n,{toolbarButtonBehaviours:[Bn.config({}),so.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[On("toolbarToggleButtonWith",a)]:[]),getApi:wq,onSetup:n.onSetup},s,i),_q=(n,s,a)=>i=>Ko.nu(d=>s.fetch(d)).map(d=>A.from(hR(jo(w4(Mt("menu-value"),d,g=>{s.onItemAction(n(i),g)},s.columns,s.presets,Kd.CLOSE_ON_EXECUTE,s.select.getOr(dn),a),{movement:Pp(s.columns,s.presets),menuBehaviours:fy.unnamedEvents(s.columns!=="auto"?[]:[vs((g,h)=>{RD(g,4,WO(s.presets)).each(({numRows:C,numColumns:x})=>{mn.setGridSize(g,C,x)})})])})))),Oq=(n,s,a)=>i=>{const d=i.getSystem(),g=i.element,h=()=>{const x=lr(g,"tox-split-button__chevron"),T=x?zc(g).bind(N=>d.getByDom(N).toOptional()):A.some(i),_=x?A.some(i):Jp(g).bind(N=>d.getByDom(N).toOptional().filter(H=>lr(H.element,"tox-split-button__chevron")));return{mainOpt:T,chevronOpt:_}},C=x=>{const{mainOpt:T,chevronOpt:_}=h();T.each(x),_.each(x)};return{isEnabled:()=>{const{mainOpt:x}=h();return x.exists(T=>!Xt.isDisabled(T))},setEnabled:x=>C(T=>Xt.set(T,!x)),setText:x=>{const{mainOpt:T}=h();T.each(_=>pn(_,od,{text:x}))},setIcon:x=>{const{mainOpt:T}=h();T.each(_=>pn(_,Ub,{icon:x}))},setIconFill:(x,T)=>C(_=>{Io(_.element,`svg path[class="${x}"], rect[class="${x}"]`).each(N=>{Cn(N,"fill",T)})}),isActive:()=>{const{mainOpt:x}=h();return x.exists(T=>so.isOn(T))},setActive:x=>{const{mainOpt:T}=h();T.each(_=>so.set(_,x))},setTooltip:x=>{n.set(x);const{mainOpt:T,chevronOpt:_}=h();T.each(H=>Cn(H.element,"aria-label",s.providers.translate(x)));const N=a.chevronTooltip.map(H=>s.providers.translate(H)).getOr(s.providers.translate(x));_.each(H=>Cn(H.element,"aria-label",N))}}},Dq=(n,s,a)=>{const i=Zt(V),d=Zt(n.tooltip.getOr("")),g=Oq(d,s,n),h=Mt("tox-split-menu"),C=Zt(!1),x=()=>({"aria-haspopup":"menu","aria-expanded":String(C.get()),"aria-controls":h}),T=()=>n.tooltip.map(oe=>s.providers.translate(oe)).getOr(s.providers.translate("Text color")),_=()=>n.chevronTooltip.map(oe=>s.providers.translate(oe)).getOrThunk(()=>{const oe=T();return s.providers.translate(["{0} menu",oe])}),N=(oe,le)=>{C.set(oe),Cn(le.element,"aria-expanded",String(oe))},H=Ji.sketch({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:lU("chevron-down",s.providers.icons),attributes:{"aria-label":_(),...Dt(a)?{"data-mce-name":a+"-chevron"}:{},...x()}},components:[],toggleClass:"tox-tbtn--enabled",dropdownBehaviours:mt([On("split-dropdown-events",[vs((oe,le)=>P4(oe)),Um({getApi:g,onSetup:n.onSetup},i),je("alloy-dropdown-open",oe=>N(!0,oe)),je("alloy-dropdown-close",oe=>N(!1,oe))]),Vm.toolbarButton(()=>s.providers.checkUiComponentContext(n.context).shouldDisable),wr(()=>s.providers.checkUiComponentContext(n.context)),Nm.config({}),ys.config(s.providers.tooltips.getConfig({tooltipText:_(),onShow:oe=>{if(d.get()!==n.tooltip.getOr("")){const le=n.chevronTooltip.map(Q=>s.providers.translate(Q)).getOr(`${s.providers.translate(d.get())} menu`);ys.setComponents(oe,s.providers.tooltips.getComponents({tooltipText:le}))}}}))]),lazySink:s.getSink,fetch:_q(g,n,s.providers),getHotspot:oe=>zc(oe.element).bind(le=>oe.getSystem().getByDom(le).toOptional()),onOpen:(oe,le,Q)=>{Eo.highlightBy(Q,me=>lr(me.element,"tox-collection__item--active")),Eo.getHighlighted(Q).each(mn.focusIn)},parts:{menu:{...Lx(!1,n.columns,n.presets),dom:{...Lx(!1,n.columns,n.presets).dom,tag:"div",attributes:{id:h}}}}}),j=ek(n.icon,n.text,A.none(),A.some([so.config({toggleClass:"tox-tbtn--enabled",aria:n.presets==="color"?{mode:"none"}:{mode:"pressed"},toggleOnExecute:!1}),...n.tooltip.isSome()?[ys.config(s.providers.tooltips.getConfig({tooltipText:s.providers.translate(n.tooltip.getOr("")),onShow:oe=>{if(d.get()!==n.tooltip.getOr("")){const le=s.providers.translate(d.get());ys.setComponents(oe,s.providers.tooltips.getComponents({tooltipText:le}))}}}))]:[]]),s.providers,n.context,a);return[ca.sketch({dom:{...j.dom,classes:["tox-tbtn","tox-split-button__main"].concat(n.text.isSome()?["tox-tbtn--select"]:[]),attributes:{"aria-label":T(),...Dt(a)?{"data-mce-name":a}:{}}},components:j.components,eventOrder:j.eventOrder,buttonBehaviours:j.buttonBehaviours,action:oe=>{if(n.onAction){const le=g(oe);le.isEnabled()&&n.onAction(le)}}}),H]},Rq=".tox-toolbar-slider__input,.tox-toolbar-textfield",EF=n=>{Zs.getContent(n).each(s=>{Io(s.element,Rq).fold(()=>mn.focusIn(s),Hr)})},Nq=n=>ar(n.element).each(s=>{Vi(s,'[tabindex="-1"]').each(a=>{Hr(a)})}),TF=Mt("forward-slide"),tk=Mt("backward-slide"),nk=Mt("change-slide-event"),ky="tox-pop--resizing",dN=n=>{const s=Zt([]);return{sketch:Zs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:i=>{s.set([]),Zs.getContent(i).each(d=>{Jn(d.element,"visibility")}),Ms(i.element,ky),Jn(i.element,"width")},onHide:()=>{s.set([]),n.onHide()},inlineBehaviours:mt([On("context-toolbar-events",[op(C0(),(i,d)=>{d.event.raw.propertyName==="width"&&(Ms(i.element,ky),Jn(i.element,"width"))}),je(nk,(i,d)=>{const g=i.element;Jn(g,"width");const h=ma(g),C=ar(i.element).isSome();Jn(g,"left"),Jn(g,"right"),Jn(g,"max-width"),Zs.setContent(i,d.event.contents),Go(g,ky);const x=ma(g);Tn(g,"transition","none"),Zs.reposition(i),Jn(g,"transition"),Tn(g,"width",h+"px"),d.event.focus.fold(()=>{C&&EF(i)},T=>{zr(pr(i.element)).fold(()=>Hr(T),_=>{L(_,T)||n.focusElement(T)})}),setTimeout(()=>{Tn(i.element,"width",x+"px")},0)}),je(TF,(i,d)=>{Zs.getContent(i).each(g=>{s.set(s.get().concat([{bar:g,focus:zr(pr(i.element))}]))}),pn(i,nk,{contents:d.event.forwardContents,focus:A.none()})}),je(tk,(i,d)=>{n.onBack(),nl(s.get()).each(g=>{s.set(s.get().slice(0,s.get().length-1)),pn(i,nk,{contents:y(g.bar),focus:g.focus})})})]),mn.config({mode:"special",onEscape:i=>nl(s.get()).fold(()=>n.onEscape(),d=>(Yn(i,tk),A.some(!0)))})]),lazySink:()=>rn.value(n.sink)}),inSubtoolbar:()=>s.get().length>0}},kF=(n,s)=>{const a=wl(Uf({type:"button",icon:"chevron-left",tooltip:"Back",onAction:V}));return pS(a,s.shared.providers,[je(TR,i=>{Yn(i,tk)})])},rd=(n,s,a)=>ya(a)?n.translate(s):n.translate([s,n.translate(a)]),AF=(n,s)=>{const a=(h,C,x,T)=>{const _=n.shared.providers.translate(h.title);if(h.type==="separator")return A.some({type:"separator",text:_});if(h.type==="submenu"){const N=Ae(h.getStyleItems(),H=>i(H,C,T));return C===0&&N.length<=0?A.none():A.some({type:"nestedmenuitem",text:_,enabled:N.length>0,getSubmenuItems:()=>Ae(h.getStyleItems(),H=>i(H,C,T))})}else return A.some({type:"togglemenuitem",text:_,icon:h.icon,active:h.isSelected(T),enabled:!x,onAction:s.onAction(h),...h.getStylePreview().fold(()=>({}),N=>({meta:{style:N}}))})},i=(h,C,x)=>{const T=h.type==="formatter"&&s.isInvalid(h);return C===0?T?[]:a(h,C,!1,x).toArray():a(h,C,T,x).toArray()},d=h=>{const C=s.getCurrentValue(),x=s.shouldHide?0:1;return Ae(h,T=>i(T,x,C))};return{validateItems:d,getFetch:(h,C)=>(x,T)=>{const _=C(),N=d(_),H=lh(N,Kd.CLOSE_ON_EXECUTE,h,{isHorizontalMenu:!1,search:A.none()});T(H)}}},Ay=(n,s)=>{const a=s.dataset,i=a.type==="basic"?()=>pe(a.data,d=>AL(d,s.isSelectedFor,s.getPreviewFor)):a.getData;return{items:AF(n,s),getStyleItems:i}},bS=(n,s,a,i,d,g)=>{const{items:h,getStyleItems:C}=Ay(s,a),x=Zt(a.tooltip),T=N=>({getComponent:se(N),setTooltip:H=>{const j=s.shared.providers.translate(H);Cn(N.element,"aria-label",j),x.set(H)}}),_=N=>{const H=j=>N.setTooltip(rd(n,i(j.value),j.value));return n.on(d,H),Fb(Mp(n,"NodeChange",j=>{const Z=j.getComponent();a.updateText(Z),Xt.set(j.getComponent(),!n.selection.isEditable()||C().length===0)})(N),()=>n.off(d,H))};return OR({context:"mode:design",text:a.icon.isSome()?A.none():a.text,icon:a.icon,ariaLabel:A.some(a.tooltip),tooltip:A.none(),role:A.none(),fetch:h.getFetch(s,C),onSetup:_,getApi:T,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[ys.config({...s.shared.providers.tooltips.getConfig({tooltipText:s.shared.providers.translate(a.tooltip),onShow:N=>{if(a.tooltip!==x.get()){const H=s.shared.providers.translate(x.get());ys.setComponents(N,s.shared.providers.tooltips.getComponents({tooltipText:H}))}}})})]},"tox-tbtn",s.shared,g)},Mq=n=>pe(n,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),Pq=n=>({type:"basic",data:n});var _y;(function(n){n[n.SemiColon=0]="SemiColon",n[n.Space=1]="Space"})(_y||(_y={}));const Bq=(n,s)=>s===_y.SemiColon?n.replace(/;$/,"").split(";"):n.split(" "),mN=(n,s,a)=>{const i=n.options.get(s);return{type:"basic",data:Mq(Bq(i,a))}},_F="Align",OF=se("Alignment {0}"),DF="left",vS=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],RF=n=>{const s=()=>Wt(vS,C=>n.formatter.match(C.format)),a=C=>()=>n.formatter.match(C),i=C=>A.none,d=C=>{const T=s().fold(se(DF),_=>_.title.toLowerCase());pn(C,Ub,{icon:`align-${T}`}),V$(n,{value:T})},g=Pq(vS),h=C=>()=>Wt(vS,x=>x.format===C.format).each(x=>n.execCommand(x.command));return{tooltip:rd(n,OF(),DF),text:A.none(),icon:A.some("align-left"),isSelectedFor:a,getCurrentValue:A.none,getPreviewFor:i,onAction:h,updateText:d,dataset:g,shouldHide:!1,isInvalid:C=>!n.formatter.canApply(C.format)}},$q=(n,s)=>bS(n,s,RF(n),OF,"AlignTextUpdate","align"),Iq=(n,s)=>{const a=Ay(s,RF(n));n.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate(_F),onSetup:Ma(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},NF=(n,s)=>{const a=s(),i=pe(a,d=>d.format);return A.from(n.formatter.closest(i)).bind(d=>Wt(a,g=>g.format===d))},Lq="Blocks",MF=se("Block {0}"),ok="Paragraph",fN=n=>{const s=g=>()=>n.formatter.match(g),a=g=>()=>{const h=n.formatter.get(g);return h?A.some({tag:h.length>0&&(h[0].inline||h[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(g))}):A.none()},i=g=>{const C=NF(n,()=>d.data).fold(se(ok),x=>x.title);pn(g,od,{text:C}),p4(n,{value:C})},d=mN(n,"block_formats",_y.SemiColon);return{tooltip:rd(n,MF(),ok),text:A.some(ok),icon:A.none(),isSelectedFor:s,getCurrentValue:A.none,getPreviewFor:a,onAction:b4(n),updateText:i,dataset:d,shouldHide:!1,isInvalid:g=>!n.formatter.canApply(g.format)}},PF=(n,s)=>bS(n,s,fN(n),MF,"BlocksTextUpdate","blocks"),Fq=(n,s)=>{const a=Ay(s,fN(n));n.ui.registry.addNestedMenuItem("blocks",{text:Lq,onSetup:Ma(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},BF="Fonts",$F=se("Font {0}"),gN="System Font",Hq=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],hN=n=>{const s=n.split(/\s*,\s*/);return pe(s,a=>a.replace(/^['"]+|['"]+$/g,""))},IF=(n,s)=>s.length>0&&nt(s,a=>n.indexOf(a.toLowerCase())>-1),LF=(n,s)=>{if(n.indexOf("-apple-system")===0||s.length>0){const a=hN(n.toLowerCase());return IF(a,Hq)||IF(a,s)}else return!1},FF=n=>{const s=()=>{const x=Z=>Z?hN(Z)[0]:"",T=n.queryCommandValue("FontName"),_=C.data,N=T?T.toLowerCase():"",H=r6(n);return{matchOpt:Wt(_,Z=>{const oe=Z.format;return oe.toLowerCase()===N||x(oe).toLowerCase()===x(N).toLowerCase()}).orThunk(()=>Fr(LF(N,H),{title:gN,format:N})),font:T}},a=x=>T=>T.exists(_=>_.format===x),i=()=>{const{matchOpt:x}=s();return x},d=x=>()=>A.some({tag:"div",styles:x.indexOf("dings")===-1?{"font-family":x}:{}}),g=x=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontName",!1,x.format)})},h=x=>{const{matchOpt:T,font:_}=s(),N=T.fold(se(_),H=>H.title);pn(x,od,{text:N}),OW(n,{value:N})},C=mN(n,"font_family_formats",_y.SemiColon);return{tooltip:rd(n,$F(),gN),text:A.some(gN),icon:A.none(),isSelectedFor:a,getCurrentValue:i,getPreviewFor:d,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:dn}},zq=(n,s)=>bS(n,s,FF(n),$F,"FontFamilyTextUpdate","fontfamily"),Vq=(n,s)=>{const a=Ay(s,FF(n));n.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate(BF),onSetup:Ma(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})};var sk=tinymce.util.Tools.resolve("tinymce.util.VK");const Uq=(n,s,a,i)=>{let d=A.none();const g=ve=>ve.map(Re=>Ft.getValue(Re)).getOr(""),h=Mp(n,"NodeChange SwitchMode DisabledStateChange",ve=>{const Re=ve.getComponent();d=A.some(Re),a.updateInputValue(Re),Xt.set(Re,!n.selection.isEditable()||IT(n))}),C=ve=>({getComponent:se(ve)}),x=Zt(V),T=Mt("custom-number-input-events"),_=(ve,Re,Ie)=>{const Et=g(d),Je=a.getNewValue(Et,ve),ct=Et.length-`${Je}`.length,at=d.map(Jt=>Jt.element.dom.selectionStart-ct),fn=d.map(Jt=>Jt.element.dom.selectionEnd-ct);a.onAction(Je,Ie),d.each(Jt=>{Ft.setValue(Jt,Je),Re&&(at.each(Kn=>Jt.element.dom.selectionStart=Kn),fn.each(Kn=>Jt.element.dom.selectionEnd=Kn))})},N=(ve,Re)=>_((Ie,Et)=>Ie-Et,ve,Re),H=(ve,Re)=>_((Ie,Et)=>Ie+Et,ve,Re),j=ve=>Wl(ve.element).fold(A.none,Re=>(Hr(Re),A.some(!0))),Z=ve=>Fi(ve.element)?(no(ve.element).each(Re=>Hr(Re)),A.some(!0)):A.none(),oe=(ve,Re,Ie,Et)=>{const Je=Zt(V),ct=s.shared.providers.translate(Ie),at=Mt("altExecuting"),fn=Mp(n,"NodeChange SwitchMode DisabledStateChange",Kn=>{Xt.set(Kn.getComponent(),!n.selection.isEditable()||IT(n))}),Jt=Kn=>{Xt.isDisabled(Kn)||ve(!0)};return ca.sketch({dom:{tag:"button",attributes:{"aria-label":ct,"data-mce-name":Re},classes:Et.concat(Re)},components:[AR(Re,s.shared.providers.icons)],buttonBehaviours:mt([Xt.config({}),ys.config(s.shared.providers.tooltips.getConfig({tooltipText:ct})),On(at,[Um({onSetup:fn,getApi:C},Je),Rp({getApi:C},Je),je(aa(),(Kn,gn)=>{(gn.event.raw.keyCode===sk.SPACEBAR||gn.event.raw.keyCode===sk.ENTER)&&(Xt.isDisabled(Kn)||ve(!1))}),je(wg(),Jt),je(bf(),Jt)])]),eventOrder:{[aa()]:[at,"keying"],[wg()]:[at,"alloy.base.behaviour"],[bf()]:[at,"alloy.base.behaviour"],[Iu()]:["alloy.base.behaviour",at,"tooltipping"],[El()]:[at,"tooltipping"]}})},le=_o(oe(ve=>N(!1,ve),"minus","Decrease font size",[])),Q=_o(oe(ve=>H(!1,ve),"plus","Increase font size",[])),me=_o({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[zf.sketch({inputBehaviours:mt([Xt.config({}),On(T,[Um({onSetup:h,getApi:C},x),Rp({getApi:C},x)]),On("input-update-display-text",[je(od,(ve,Re)=>{Ft.setValue(ve,Re.event.text)}),je(E2(),ve=>{a.onAction(Ft.getValue(ve))}),je(Sg(),ve=>{a.onAction(Ft.getValue(ve))})]),mn.config({mode:"special",onEnter:ve=>(_(nn,!0,!0),A.some(!0)),onEscape:j,onUp:ve=>(H(!0,!1),A.some(!0)),onDown:ve=>(N(!0,!1),A.some(!0)),onLeft:(ve,Re)=>(Re.cut(),A.none()),onRight:(ve,Re)=>(Re.cut(),A.none())})])})],behaviours:mt([Nn.config({}),mn.config({mode:"special",onEnter:Z,onSpace:Z,onEscape:j}),On("input-wrapper-events",[je(Gi(),ve=>{Te([le,Q],Re=>{const Ie=ht.fromDom(Re.get(ve).element.dom);Fi(Ie)&&Ns(Ie)})})])])});return{dom:{tag:"div",classes:["tox-number-input"],attributes:{...Dt(i)?{"data-mce-name":i}:{}}},components:[le.asSpec(),me.asSpec(),Q.asSpec()],behaviours:mt([Nn.config({}),mn.config({mode:"flow",focusInside:_g.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:ve=>Fi(ve.element)?A.none():(Hr(ve.element),A.some(!0))})])}},jq="Font sizes",HF=se("Font size {0}"),pN="12pt",Wq={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},Zq={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},Gq=(n,s)=>{const a=Math.pow(10,s);return Math.round(n*a)/a},qq=(n,s)=>/[0-9.]+px$/.test(n)?Gq(parseInt(n,10)*72/96,s||0)+"pt":en(Zq,n).getOr(n),Kq=n=>en(Wq,n).getOr(""),zF=n=>{const s=()=>{let x=A.none();const T=C.data,_=n.queryCommandValue("FontSize");if(_)for(let N=3;x.isNone()&&N>=0;N--){const H=qq(_,N),j=Kq(H);x=Wt(T,Z=>Z.format===_||Z.format===H||Z.format===j)}return{matchOpt:x,size:_}},a=x=>T=>T.exists(_=>_.format===x),i=()=>{const{matchOpt:x}=s();return x},d=se(A.none),g=x=>()=>{n.undoManager.transact(()=>{n.focus(),n.execCommand("FontSize",!1,x.format)})},h=x=>{const{matchOpt:T,size:_}=s(),N=T.fold(se(_),H=>H.title);pn(x,od,{text:N}),_W(n,{value:N})},C=mN(n,"font_size_formats",_y.Space);return{tooltip:rd(n,HF(),pN),text:A.some(pN),icon:A.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:h,dataset:C,shouldHide:!1,isInvalid:dn}},Yq=(n,s)=>bS(n,s,zF(n),HF,"FontSizeTextUpdate","fontsize"),VF=n=>{const s={step:1};return{em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[n]??s},Xq=16,Qq=n=>n>=0,UF=n=>{const s=()=>n.queryCommandValue("FontSize");return{updateInputValue:i=>pn(i,od,{text:s()}),onAction:(i,d)=>n.execCommand("FontSize",!1,i,{skip_focus:!d}),getNewValue:(i,d)=>{Co(i,["unsupportedLength","empty"]);const g=s(),h=Co(i,["unsupportedLength","empty"]).or(Co(g,["unsupportedLength","empty"])),C=h.map(H=>H.value).getOr(Xq),x=zT(n),T=h.map(H=>H.unit).filter(H=>H!=="").getOr(x),_=d(C,VF(T).step),N=`${Qq(_)?_:C}${T}`;return N!==g&&Wf(n,{value:N}),N}}},Jq=(n,s)=>Uq(n,s,UF(n),"fontsizeinput"),jF=(n,s)=>{const a=Ay(s,zF(n));n.ui.registry.addNestedMenuItem("fontsize",{text:jq,onSetup:Ma(n),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},WF="Formats",ZF=n=>ya(n)?"Formats":"Format {0}",GF=(n,s)=>{const a="Formats",i=h=>()=>n.formatter.match(h),d=h=>()=>{const C=n.formatter.get(h);return C!==void 0?A.some({tag:C.length>0&&(C[0].inline||C[0].block)||"div",styles:n.dom.parseStyle(n.formatter.getCssText(h))}):A.none()},g=h=>{const C=N=>dG(N)?Ae(N.items,C):SL(N)?[{title:N.title,format:N.format}]:[],x=Ae(kL(n),C),_=NF(n,se(x)).fold(se({title:a,tooltipLabel:""}),N=>({title:N.title,tooltipLabel:N.title}));pn(h,od,{text:_.title}),AW(n,{value:_.tooltipLabel})};return{tooltip:rd(n,ZF(""),""),text:A.some(a),icon:A.none(),isSelectedFor:i,getCurrentValue:A.none,getPreviewFor:d,onAction:b4(n),updateText:g,shouldHide:bO(n),isInvalid:h=>!n.formatter.canApply(h.format),dataset:s}},eK=(n,s)=>{const a={type:"advanced",...s.styles};return bS(n,s,GF(n,a),ZF,"StylesTextUpdate","styles")},Oy=(n,s)=>{const a={type:"advanced",...s.styles},i=Ay(s,GF(n,a));n.ui.registry.addNestedMenuItem("styles",{text:WF,onSetup:Ma(n,()=>i.getStyleItems().length>0),getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})},tK=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],yS=(n,s)=>(a,i,d,g)=>{const h=n(a).mapError(C=>Bh(C)).getOrDie();return s(h,i,d,g)},nK={button:yS(Uf,(n,s,a,i)=>Aq(n,s.shared.providers,i)),togglebutton:yS(CD,(n,s,a,i)=>uN(n,s.shared.providers,i)),menubutton:yS(hD,(n,s,a,i)=>aS(n,"tox-tbtn",s,A.none(),!1,i)),splitbutton:yS(oW,(n,s,a,i)=>Dq(n,s.shared,i)),grouptoolbarbutton:yS(OD,(n,s,a,i)=>{const d=a.ui.registry.getAll().buttons,g=C=>rk(a,{buttons:d,toolbar:C,allowToolbarGroups:!1},s,A.none()),h={[K0]:s.shared.header.isPositionedAtTop()?Cm.TopToBottom:Cm.BottomToTop};switch(wb(a)){case gu.floating:return kq(n,s,g,h,i);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},oK=(n,s,a,i)=>en(nK,n.type).fold(()=>(console.error("skipping button defined by",n),A.none()),d=>A.some(d(n,s,a,i))),qF={styles:eK,fontsize:Yq,fontsizeinput:Jq,fontfamily:zq,blocks:PF,align:$q,navigateback:kF},sK=n=>{const s=pe(tK,a=>{const i=sn(a.items,d=>ho(n,d)||ho(qF,d));return{name:a.name,items:i}});return sn(s,a=>a.items.length>0)},rK=n=>{const s=n.split("|");return pe(s,a=>({items:a.trim().split(" ")}))},aK=n=>ft(n,s=>(ho(s,"name")||ho(s,"label"))&&ho(s,"items")),bN=n=>{const s=n.toolbar,a=n.buttons;return s===!1?[]:s===void 0||s===!0?sK(a):de(s)?rK(s):aK(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},cK=(n,s,a,i,d,g)=>en(s,a.toLowerCase()).orThunk(()=>g.bind(h=>va(h,C=>en(s,C+a.toLowerCase())))).fold(()=>en(qF,a.toLowerCase()).map(h=>h(n,d)),h=>h.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),A.none()):oK(h,d,n,a.toLowerCase())),rk=(n,s,a,i)=>{const d=bN(s),g=pe(d,h=>{const C=Ae(h.items,x=>x.trim().length===0?[]:cK(n,s.buttons,x,s.allowToolbarGroups,a,i).map(T=>Array.isArray(T)?T:[T]).getOr([]));return{title:A.from(n.translate(h.name)),label:Fr(h.label!==void 0,n.translate(h.label)),items:C}});return sn(g,h=>h.items.length>0)},vN=(n,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,h=a.buttons;if(ft(g,de)){const C=g.map(x=>{const T={toolbar:x,buttons:h,allowToolbarGroups:a.allowToolbarGroups};return rk(n,T,i,A.none())});os.setToolbars(d,C)}else os.setToolbar(d,rk(n,a,i,A.none()))},yN=Ks(),iK=yN.os.isiOS()&&yN.os.version.major<=12,lK=(n,s)=>{const{uiMotherships:a}=s,i=n.dom;let d=n.getWin();const g=n.getDoc().documentElement,h=Zt($o(d.innerWidth,d.innerHeight)),C=Zt($o(g.offsetWidth,g.offsetHeight)),x=()=>{const H=h.get();(H.left!==d.innerWidth||H.top!==d.innerHeight)&&(h.set($o(d.innerWidth,d.innerHeight)),KD(n))},T=()=>{const H=n.getDoc().documentElement,j=C.get();(j.left!==H.offsetWidth||j.top!==H.offsetHeight)&&(C.set($o(H.offsetWidth,H.offsetHeight)),KD(n))},_=H=>{wW(n,H)};i.bind(d,"resize",x),i.bind(d,"scroll",_);const N=li(ht.fromDom(n.getBody()),"load",T);n.on("hide",()=>{Te(a,H=>{Tn(H.element,"display","none")})}),n.on("show",()=>{Te(a,H=>{Jn(H.element,"display")})}),n.on("NodeChange",T),n.on("remove",()=>{N.unbind(),i.unbind(d,"resize",x),i.unbind(d,"scroll",_),d=null})},uK=(n,s,a)=>{kp(n)&&lu(a.mainUi.mothership.element,a.popupUi.mothership),sb(s,a.dialogUi.mothership)};var dK=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=s,C=Zt(0),x=g.outerContainer;xF(n);const T=ht.fromDom(d.targetNode),_=dl(pr(T));lu(T,g.mothership),uK(n,_,s),n.on("PostRender",()=>{os.setSidebar(x,a.sidebar,n6(n)),os.setViews(x,a.views)}),n.on("SkinLoaded",()=>{vN(n,s,a,i),C.set(n.getWin().innerWidth),os.setMenubar(x,hF(n,a)),lK(n,s)});const N=os.getSocket(x).getOrDie("Could not find expected socket element");if(iK){Ts(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const oe=og(()=>{n.dispatch("ScrollContent")},20),le=Mo(N.element,"scroll",oe.throttle);n.on("remove",le.unbind)}w$(n,s),n.addCommand("ToggleSidebar",(oe,le)=>{os.toggleSidebar(x,le),DW(n)}),n.addQueryValueHandler("ToggleSidebar",()=>os.whichSidebar(x)??""),n.addCommand("ToggleView",(oe,le)=>{if(os.toggleView(x,le)){const Q=x.element;g.mothership.broadcastOn([Rd()],{target:Q}),Te(h,me=>{me.broadcastOn([Rd()],{target:Q})}),Ke(os.whichView(x))&&(n.focus(),n.nodeChanged(),os.refreshToolbar(x)),U$(n)}}),n.addQueryValueHandler("ToggleView",()=>os.whichView(x)??"");const H=wb(n),j=()=>{os.refreshToolbar(s.mainUi.outerContainer)};(H===gu.sliding||H===gu.floating)&&n.on("ResizeWindow ResizeEditor ResizeContent",()=>{const oe=n.getWin().innerWidth;oe!==C.get()&&(j(),C.set(oe))});const Z={setEnabled:oe=>{Kx(s,oe?"setEnabled":"setDisabled")},isEnabled:()=>!Xt.isDisabled(x)};return{iframeContainer:N.element.dom,editorContainer:x.element.dom,api:Z}}});const mK=n=>/^[0-9\.]+(|px)$/i.test(""+n)?A.some(parseInt(""+n,10)):A.none(),ak=n=>En(n)?n+"px":n,ck=(n,s,a)=>{const i=s.filter(g=>n<g),d=a.filter(g=>n>g);return i.or(d).getOr(n)},fK=(n,s)=>{if(typeof s=="number")return A.from(s);const a=/^([0-9.]+)(pt|em|px)$/.exec(s.trim());if(a){const i=a[2],d=Number.parseFloat(a[1]);if(Number.isNaN(d)||d<0)return A.none();if(i==="em")return A.from(d*Number.parseFloat(window.getComputedStyle(n.dom).fontSize));if(i==="pt")return A.from(d*(72/96));if(i==="px")return A.from(d)}return A.none()},gK=n=>{const s=fK(ht.fromDom(n.targetElm),mO(n)),a=hO(n),i=pO(n);return s.map(d=>ck(d,a,i))},hK=n=>gK(n).getOr(mO(n)),CS=n=>{const s=fO(n),a=gO(n),i=LT(n);return mK(s).map(d=>ck(d,a,i))},pK=n=>CS(n).getOr(fO(n)),{ToolbarLocation:Dy,ToolbarMode:xS}=VV,KF=40,bK=(n,s,a,i,d)=>{const{mainUi:g,uiMotherships:h}=a,C=Yv.DOM,x=ny(n),T=oy(n),_=LT(n).or(CS(n)),N=i.shared.header,H=N.isPositionedAtTop,j=150,Z=wb(n),oe=Z===xS.sliding||Z===xS.floating,le=Zt(!1),Q=()=>le.get()&&!n.removed,me=tn=>oe?tn.fold(se(0),Qe=>Qe.components().length>1?yr(Qe.components()[1].element):0):0,ve=tn=>{switch(vO(n)){case Dy.auto:const Qe=os.getToolbar(g.outerContainer),pt=me(Qe),Sn=yr(tn.element)-pt,zn=Ar(s);if(zn.y>Sn)return"top";{const Fn=Yp(s),es=Math.max(Fn.dom.scrollHeight,yr(Fn));return zn.bottom<es-Sn||za().bottom<zn.bottom-Sn?"bottom":"top"}case Dy.bottom:return"bottom";case Dy.top:default:return"top"}},Re=tn=>{d.on(Qe=>{Bs.setModes(Qe,[tn]),N.setDockingMode(tn);const pt=H()?Cm.TopToBottom:Cm.BottomToTop;Cn(Qe.element,K0,pt)})},Ie=()=>{d.on(tn=>{const Qe=_.getOrThunk(()=>kh().width-Cc(s).left-10);Tn(tn.element,"max-width",Qe+"px")})},Et=(tn,Qe)=>{d.on(pt=>{const Sn=os.getToolbar(g.outerContainer),zn=me(Sn),ln=Ar(s),Fn=Je(n,g.outerContainer.element),es=()=>Fn.fold(()=>ln.x,Pa=>{const vu=Ar(Pa);return L(Pa,Uc())?ln.x:ln.x-vu.x}),Oo=()=>Fn.fold(()=>H()?Math.max(ln.y-yr(pt.element)+zn,0):ln.bottom,Pa=>{const vu=Ar(Pa),Ka=Pa.dom.scrollTop??0,Lp=L(Pa,Uc())?Math.max(ln.y-yr(pt.element)+zn,0):ln.y-vu.y+Ka-yr(pt.element)+zn;return H()?Lp:ln.bottom}),uc=es(),$s=Fr(tn,Math.ceil(g.outerContainer.element.dom.getBoundingClientRect().width)).filter(Pa=>Pa>j).map(Pa=>{const vu=Qe.getOr(Vs()),Ka=window.innerWidth-(uc-vu.left),ad=Math.max(Math.min(Pa,Ka),j);return Ka<Pa&&Tn(g.outerContainer.element,"width",ad+"px"),{width:ad+"px"}}).getOr({width:"max-content"}),el={position:"absolute",left:Math.round(uc)+"px",top:Oo()+"px"};Ts(g.outerContainer.element,{...el,...$s})})},Je=(tn,Qe)=>kp(tn)?mf(Qe):A.none(),ct=()=>{Te(h,tn=>{tn.broadcastOn([Dr()],{})})},at=()=>!x&&(Ea(g.outerContainer.element).left+Ru(g.outerContainer.element)>=window.innerWidth-KF||ws(g.outerContainer.element,"width").isSome())?(Tn(g.outerContainer.element,"position","absolute"),Tn(g.outerContainer.element,"left","0px"),Jn(g.outerContainer.element,"width"),!0):!1,fn=tn=>{if(!Q())return;x||Ie();const Qe=Vs(),pt=x?!1:at();if(oe&&os.refreshToolbar(g.outerContainer),!x){const Sn=Vs(),zn=Fr(Qe.left!==Sn.left,Qe);Et(pt,zn),zn.each(ln=>{Nu(ln.left,Sn.top)})}T&&d.on(tn),ct()},Jt=()=>x||!T||!Q()?!1:d.get().exists(tn=>{const Qe=N.getDockingMode(),pt=ve(tn);return pt!==Qe?(Re(pt),!0):!1});return{isVisible:Q,isPositionedAtTop:H,show:()=>{le.set(!0),Tn(g.outerContainer.element,"display","flex"),C.addClass(n.getBody(),"mce-edit-focus"),Te(h,tn=>{Jn(tn.element,"display")}),Jt(),kp(n)?fn(tn=>Bs.isDocked(tn)?Bs.reset(tn):Bs.refresh(tn)):fn(Bs.refresh)},hide:()=>{le.set(!1),Tn(g.outerContainer.element,"display","none"),C.removeClass(n.getBody(),"mce-edit-focus"),Te(h,tn=>{Tn(tn.element,"display","none")})},update:fn,updateMode:()=>{Jt()&&fn(Bs.reset)},repositionPopups:ct}},YF=(n,s)=>{const a=Ar(n);return{pos:s?a.y:a.bottom,bounds:a}},vK=(n,s,a,i)=>{const d=Zt(YF(s,a.isPositionedAtTop())),g=T=>{const{pos:_,bounds:N}=YF(s,a.isPositionedAtTop()),{pos:H,bounds:j}=d.get(),Z=N.height!==j.height||N.width!==j.width;d.set({pos:_,bounds:N}),Z&&KD(n,T),a.isVisible()&&(H!==_?a.update(Bs.reset):Z&&(a.updateMode(),a.repositionPopups()))};i||(n.on("activate",a.show),n.on("deactivate",a.hide)),n.on("SkinLoaded ResizeWindow",()=>a.update(Bs.reset)),n.on("NodeChange keydown",T=>{requestAnimationFrame(()=>g(T))});let h=0;const C=tc(()=>a.update(Bs.refresh),33);n.on("ScrollWindow",()=>{const T=Vs().left;T!==h&&(h=T,C.throttle()),a.updateMode()}),kp(n)&&n.on("ElementScroll",T=>{a.update(Bs.refresh)});const x=Ds();x.set(li(ht.fromDom(n.getBody()),"load",T=>g(T.raw))),n.on("remove",()=>{x.clear()})};var yK=Object.freeze({__proto__:null,render:(n,s,a,i,d)=>{const{mainUi:g}=s,h=kn(),C=ht.fromDom(d.targetNode),x=bK(n,C,s,i,h),T=WB(n);Sq(n);const _=()=>{if(h.isSet()){x.show();return}h.set(os.getHeader(g.outerContainer).getOrDie());const H=EO(n);kp(n)?(lu(C,g.mothership),lu(C,s.popupUi.mothership)):sb(H,g.mothership),sb(H,s.dialogUi.mothership);const j=()=>{vN(n,s,a,i),os.setMenubar(g.outerContainer,hF(n,a)),x.show(),vK(n,C,x,T),n.nodeChanged()};T?n.once("SkinLoaded",j):j()};n.on("show",_),n.on("hide",x.hide),T||(n.on("focus",_),n.on("blur",x.hide)),n.on("init",()=>{(n.hasFocus()||T)&&_()}),w$(n,s);const N={show:_,hide:x.hide,setEnabled:H=>{Kx(s,H?"setEnabled":"setDisabled")},isEnabled:()=>!Xt.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const ik=()=>{const n=kn(),s=kn(),a=kn();return{dialogUi:n,popupUi:s,mainUi:a,getUiMotherships:()=>{const g=n.get().map(C=>C.mothership),h=s.get().map(C=>C.mothership);return g.fold(()=>h.toArray(),C=>h.fold(()=>[C],x=>L(C.element,x.element)?[C]:[C,x]))},lazyGetInOuterOrDie:(g,h)=>()=>a.get().bind(C=>h(C.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},XF="contexttoolbar-show",CN="contexttoolbar-hide",lk=(n,s,a)=>({setInputEnabled:i=>{!i&&a&&Hr(a),Xt.set(n,!i)},isInputEnabled:()=>!Xt.isDisabled(n),hide:()=>{Yn(n,w0())},back:()=>{Yn(n,tk)},getValue:()=>s.get().getOrThunk(()=>Ft.getValue(n)),setValue:i=>{n.getSystem().isConnected()?Ft.setValue(n,i):s.set(i)}}),SS=(n,s,a)=>{const d=vc(n.element).bind(g=>n.getSystem().getByDom(g).toOptional());return lk(d.getOr(n),s,a)},QF=(n,s,a)=>je(TR,(i,d)=>{const g=n.get(i),h=lk(g,a,i.element);s.onAction(h,d.event.buttonApi)}),JF=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=wl(Uf({...g,type:"button",onAction:V}));return pS(h,a,[QF(n,s,i)])},CK=(n,s,a,i)=>{const{primary:d,...g}=s.original,h=wl(CD({...g,type:"togglebutton",onAction:V}));return wF(h,a,[QF(n,s,i)])},xK=n=>n.type==="contextformtogglebutton",SK=(n,s,a,i)=>xK(s)?CK(n,s,a,i):JF(n,s,a,i),e8=(n,s,a,i)=>{const d=pe(s,C=>_o(SK(n,C,a,i)));return{asSpecs:()=>pe(d,C=>C.asSpec()),findPrimary:C=>va(s,(x,T)=>x.primary?A.from(d[T]).bind(_=>_.getOpt(C)).filter(X(Xt.isDisabled)):A.none())}},wK=(n,s,a,i)=>{const{width:d,height:g}=n.initValue();let h=Cy;const C=Mt("ratio-event"),x=Je=>lk(Je,i),T=Je=>hu(Je,{tag:"span",classes:["tox-icon","tox-lock-icon__"+Je]},s.icons),_=()=>!1,N=n.label.getOr("Constrain proportions"),H=s.translate(N),j=Sr.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-lock-context-form-size-input","tox-button","tox-button--naked","tox-button--icon"],attributes:{"aria-label":H,"data-mce-name":N}},components:[T("lock"),T("unlock")],buttonBehaviours:mt([Xt.config({disabled:_}),ms.config({}),ys.config(s.tooltips.getConfig({tooltipText:H}))])}),Z=Je=>({dom:{tag:"div",classes:["tox-context-form__group"]},components:Je}),oe=Je=>Vi(Je.element,"div.tox-focusable-wrapper").fold(A.none,at=>(Hr(at),A.some(!0))),le=Je=>eo.parts.field({factory:zf,inputClasses:["tox-textfield","tox-toolbar-textfield","tox-textfield-size"],data:Je?d:g,inputBehaviours:mt([Xt.config({disabled:_}),ms.config({}),On("size-input-toolbar-events",[je(tu(),(ct,at)=>{pn(ct,C,{isField1:Je})})]),mn.config({mode:"special",onEnter:a,onEscape:oe})]),selectOnFocus:!1}),Q=Je=>({dom:{tag:"label",classes:["tox-label"]},components:[Es(s.translate(Je))]}),me=Je=>({dom:{tag:"div",classes:["tox-focusable-wrapper","tox-toolbar-nav-item"]},components:[Je],behaviours:mt([ms.config({}),Nn.config({}),mn.config({mode:"special",onEnter:ct=>Io(ct.element,"input").fold(A.none,fn=>(Hr(fn),A.some(!0)))})])}),ve=me(Sr.parts.field1(Z([eo.parts.label(Q("Width:")),le(!0)]))),Re=me(Sr.parts.field2(Z([eo.parts.label(Q("Height:")),le(!1)]))),Ie=Zt(V),Et=[Um({onBeforeSetup:Je=>Io(Je.element,"input").each(Hr),onSetup:n.onSetup,getApi:x},Ie),i4({getApi:x},Ie,i)];return Sr.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[ve,Z([j]),Re],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(Je,ct,at)=>{L4(Ft.getValue(Je)).each(fn=>{h(fn).each(Jt=>{Ft.setValue(ct,eL(Jt))})})},onInput:Je=>Yn(Je,yI),coupledFieldBehaviours:mt([Nn.config({}),mn.config({mode:"flow",focusInside:_g.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-focusable-wrapper"}),Xt.config({disabled:_,onDisabled:Je=>{Sr.getField1(Je).bind(eo.getField).each(Xt.disable),Sr.getField2(Je).bind(eo.getField).each(Xt.disable),Sr.getLock(Je).each(Xt.disable)},onEnabled:Je=>{Sr.getField1(Je).bind(eo.getField).each(Xt.enable),Sr.getField2(Je).bind(eo.getField).each(Xt.enable),Sr.getLock(Je).each(Xt.enable)}}),wr(()=>s.checkUiComponentContext("mode:design")),On("size-input-toolbar-events2",[je(C,(Je,ct)=>{const at=ct.event.isField1,fn=at?Sr.getField1(Je):Sr.getField2(Je),Jt=at?Sr.getField2(Je):Sr.getField1(Je),Kn=fn.map(Ft.getValue).getOr(""),gn=Jt.map(Ft.getValue).getOr("");h=nL(Kn,gn)}),je(yI,Je=>n.onInput(x(Je))),...Et])])})},Ry=(n,s,a)=>eo.sketch({dom:{tag:"div",classes:["tox-context-form__group"]},components:[...n.toArray(),s],fieldBehaviours:mt([Xt.config({disabled:()=>a.checkUiComponentContext("mode:design").shouldDisable,onDisabled:i=>{Nq(i),eo.getField(i).each(Xt.disable)},onEnabled:i=>{eo.getField(i).each(Xt.enable)}})])}),EK=(n,s,a,i)=>{const d=Zt(V),g=x=>SS(x,i),h=n.label.map(x=>eo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Es(s.translate(x))]})),C=eo.parts.field({factory:zf,type:"range",inputClasses:["tox-toolbar-slider__input","tox-toolbar-nav-item"],inputAttributes:{min:String(n.min()),max:String(n.max())},data:n.initValue().toString(),fromInputValue:x=>Lc(x).getOr(n.min()),toInputValue:x=>String(x),inputBehaviours:mt([Xt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),wr(()=>s.checkUiComponentContext("mode:design")),mn.config({mode:"special",onEnter:a,onLeft:(x,T)=>(T.cut(),A.none()),onRight:(x,T)=>(T.cut(),A.none())}),On("slider-events",[Um({onSetup:n.onSetup,getApi:g,onBeforeSetup:mn.focusIn},d),i4({getApi:g},d,i),je($u(),x=>{n.onInput(g(x))})])])});return Ry(h,C,s)},TK=(n,s,a,i)=>{const d=Zt(V),g=_=>SS(_,i),h=n.label.map(_=>eo.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Es(s.translate(_))]})),x={...n.placeholder.map(_=>({placeholder:s.translate(_)})).getOr({})},T=eo.parts.field({factory:zf,inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-item"],inputAttributes:x,data:n.initValue(),selectOnFocus:!0,inputBehaviours:mt([Xt.config({disabled:()=>s.checkUiComponentContext("mode:design").shouldDisable}),wr(()=>s.checkUiComponentContext("mode:design")),mn.config({mode:"special",onEnter:a,onLeft:(_,N)=>(N.cut(),A.none()),onRight:(_,N)=>(N.cut(),A.none())}),On("input-events",[Um({onSetup:n.onSetup,getApi:_=>Vi(_.element,".tox-toolbar").bind(H=>Io(H,"button:enabled")).fold(()=>SS(_,i),H=>SS(_,i,H)),onBeforeSetup:mn.focusIn},d),i4({getApi:g},d,i),je($u(),_=>{n.onInput(g(_))})])])});return Ry(h,T,s)},xN=(n,s,a)=>{const i=kn(),g=_o(n(a,T=>C.findPrimary(T).orThunk(()=>x.findPrimary(T)).map(_=>(ep(_),!0)),i)),h=wn(s.commands,T=>T.align==="start"),C=e8(g,h.pass,a,i),x=e8(g,h.fail,a,i);return sn([{title:A.none(),label:A.none(),items:C.asSpecs()},{title:A.none(),label:A.none(),items:[g.asSpec()]},{title:A.none(),label:A.none(),items:x.asSpecs()}],T=>T.items.length>0)},SN=(n,s)=>{switch(n.type){case"contextform":return xN(Yt(TK,n),n,s);case"contextsliderform":return xN(Yt(EK,n),n,s);case"contextsizeinputform":return xN(Yt(wK,n),n,s)}},t8={renderContextForm:(n,s,a)=>Y4({type:n,uid:Mt("context-toolbar"),initGroups:SN(s,a),onEscape:A.none,cyclicKeying:!0,providers:a}),buildInitGroups:SN},n8=(n,s,a)=>s.bottom-n.y>=a&&n.bottom-s.y>=a,kK=n=>{const s=n.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=ef(ht.fromDom(n.startContainer),n.startOffset).element;return(hd(a)?vc(a):A.some(a)).filter(pc).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},wN=n=>{const s=n.selection.getRng(),a=kK(s);if(n.inline){const i=Vs();return Br(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=df(ht.fromDom(n.getBody()));return Br(i.x+a.left,i.y+a.top,a.width,a.height)}},AK=(n,s)=>s.filter(a=>yo(a)&&ne(a)).map(df).getOrThunk(()=>wN(n)),_K=(n,s,a)=>{const i=Math.max(n.x+a,s.x),d=Math.min(n.right-a,s.right);return{x:i,width:d-i}},wS=(n,s,a,i,d,g)=>{const h=ht.fromDom(n.getContainer()),C=Io(h,".tox-editor-header").getOr(h),x=Ar(C),T=x.y>=s.bottom,_=i&&!T;if(n.inline&&_)return{y:Math.max(x.bottom+g,a.y),bottom:a.bottom};if(n.inline&&!_)return{y:a.y,bottom:Math.min(x.y-g,a.bottom)};const N=d==="line"?Ar(h):s;return _?{y:Math.max(x.bottom+g,a.y),bottom:Math.min(N.bottom-g,a.bottom)}:{y:Math.max(N.y+g,a.y),bottom:Math.min(x.y-g,a.bottom)}},EN=(n,s,a,i=0)=>{const d=kh(window),g=Ar(ht.fromDom(n.getContentAreaContainer())),h=ey(n)||ty(n)||Tp(n),{x:C,width:x}=_K(g,d,i);if(n.inline&&!h)return Br(C,d.y,x,d.height);{const T=s.header.isPositionedAtTop(),{y:_,bottom:N}=wS(n,g,d,T,a,i);return Br(C,_,x,N-_)}},uk=12,o8={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},TN={maxHeightFunction:Bg(),maxWidthFunction:z1()},kN=(n,s)=>{const a=n.selection.getRng(),i=ef(ht.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&L(i.element,s)},s8=(n,s,a)=>{const i=ws(n,"position");Tn(n,"position",s);const d=a(n);return i.each(g=>Tn(n,"position",g)),d},AN=n=>n==="node",OK=(n,s,a,i,d)=>{const g=wN(n),h=i.lastElement().exists(C=>L(a,C));if(kN(n,a))return h?Dc:Ua;if(h)return s8(s,i.getMode(),()=>n8(g,Ar(s),-20)&&!i.isReposition()?Vu:Dc);{const C=i.getMode()==="fixed"?d.y+Vs().top:d.y,x=yr(s)+uk;return C+x<=g.y?Ua:Xh}},Ny=(n,s,a,i)=>{const d=x=>(T,_,N,H,j)=>{const Z=OK(n,H,x,a,j),oe={...T,y:j.y,height:j.height};return{...Z(oe,_,N,H,j),alwaysFit:!0}},g=x=>AN(i)?[d(x)]:[];return s?{onLtr:x=>[Or,Ir,_r,Oa,ga,Ps].concat(g(x)),onRtl:x=>[Or,_r,Ir,ga,Oa,Ps].concat(g(x))}:{onLtr:x=>[Ps,Or,Oa,Ir,ga,_r].concat(g(x)),onRtl:x=>[Ps,Or,ga,_r,Oa,Ir].concat(g(x))}},dk=(n,s,a,i)=>s==="line"?{bubble:xi(uk,0,o8),layouts:{onLtr:()=>[qh],onRtl:()=>[V2]},overrides:TN}:{bubble:xi(0,uk,o8,1/uk),layouts:Ny(n,a,i,s),overrides:TN},My=(n,s)=>{const a=sn(s,g=>g.predicate(n.dom)),{pass:i,fail:d}=wn(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},_N=n=>{if(n.length<=1)return n;{const s=g=>St(n,h=>h.position===g),a=g=>sn(n,h=>h.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),h=pe(a("selection"),C=>({...C,position:"node"}));return g.concat(h)}else return a(i?"selection":"node");else return a("line")}},ON=n=>{if(n.length<=1)return n;{const s=i=>Wt(n,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>sn(n,d=>d.position===i))}},r8=(n,s,a)=>{const i=My(n,s);if(i.contextForms.length>0)return A.some({elem:n,toolbars:[i.contextForms[0]]});{const d=My(n,a);if(d.contextForms.length>0)return A.some({elem:n,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=_N(i.contextToolbars.concat(d.contextToolbars));return A.some({elem:n,toolbars:g})}else return A.none()}},mk=(n,s,a)=>n(s)?A.none():u0(s,i=>{if(pc(i)){const{contextToolbars:d,contextForms:g}=My(i,a.inNodeScope),h=g.length>0?g:ON(d);return h.length>0?A.some({elem:i,toolbars:h}):A.none()}else return A.none()},n),a8=(n,s)=>{const a=ht.fromDom(s.getBody()),i=h=>L(h,a),d=h=>!i(h)&&!te(a,h),g=ht.fromDom(s.selection.getNode());return d(g)?A.none():r8(g,n.inNodeScope,n.inEditorScope).orThunk(()=>mk(i,g,n))},c8=(n,s)=>{const a={},i=[],d=[],g={},h={},C=(_,N)=>{const H=wl($j(N));a[_]=H,H.launch.map(j=>{g["form:"+_]={...N.launch,type:j.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(H)}}}),H.scope==="editor"?d.push(H):i.push(H),h[_]=H},x=(_,N)=>{Lj(N).each(H=>{H.launch.isSome()&&(g["toolbar:"+_]={...N.launch,type:"button",onAction:()=>{s(H)}}),N.scope==="editor"?d.push(H):i.push(H),h[_]=H})},T=wo(n);return Te(T,_=>{const N=n[_];N.type==="contextform"||N.type==="contextsliderform"||N.type==="contextsizeinputform"?C(_,N):N.type==="contexttoolbar"&&x(_,N)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:h,formNavigators:g}},ES="tox-pop--transition",DK=n=>n===sk.ENTER||n===sk.SPACEBAR,i8=(n,s,a,i)=>{const d=i.backstage,g=d.shared,h=Ks().deviceType.isTouch,C=kn(),x=kn(),T=kn(),_=dN({sink:a,onEscape:()=>(n.focus(),YD(n),A.some(!0)),onHide:()=>{YD(n)},onBack:()=>{XD(n)},focusElement:gn=>{n.getBody().contains(gn.dom)?n.focus():Hr(gn)}}),N=p(_.sketch),H=()=>{const gn=T.get().getOr("node"),$n=AN(gn)?1:0;return EN(n,g,gn,$n)},j=()=>!n.removed&&!(h()&&d.isContextMenuOpen()),Z=gn=>gc(Ha(gn,C.get(),L),!0),oe=()=>{if(j()){const gn=H(),$n=gc(T.get(),"node")?AK(n,C.get()):wN(n);return gn.height<=0||!n8($n,gn,.01)}else return!0},le=()=>{C.clear(),x.clear(),T.clear(),Zs.hide(N)},Q=()=>{if(Zs.isOpen(N)){const gn=N.element;Jn(gn,"display"),oe()?Tn(gn,"display","none"):(x.set(0),Zs.reposition(N))}},me=gn=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[gn],behaviours:mt([mn.config({mode:"acyclic"}),On("pop-dialog-wrap-events",[vs($n=>{n.shortcuts.add("ctrl+F9","focus statusbar",()=>mn.focusIn($n))}),au($n=>{n.shortcuts.remove("ctrl+F9")})])])}),ve=gn=>{const $n=Je([gn]);pn(N,TF,{forwardContents:me($n)})},Re=Fc(()=>c8(s,ve)),Ie=(gn,$n)=>rk(n,{buttons:gn,toolbar:$n.items,allowToolbarGroups:!1},i.backstage,A.some(["form:","toolbar:"])),Et=(gn,$n)=>t8.buildInitGroups(gn,$n),Je=gn=>{const{buttons:$n}=n.ui.registry.getAll(),tn=Re(),Qe={...$n,...tn.formNavigators},pt=wb(n)===gu.scrolling?gu.scrolling:gu.default,Sn=hn(pe(gn,zn=>zn.type==="contexttoolbar"?Ie(Qe,SD(zn)):Et(zn,g.providers)));return Y4({type:pt,uid:Mt("context-toolbar"),initGroups:Sn,onEscape:A.none,cyclicKeying:!0,providers:g.providers})},ct=(gn,$n)=>{const tn=gn==="node"?g.anchors.node($n):g.anchors.cursor(),Qe=dk(n,gn,h(),{lastElement:C.get,isReposition:()=>gc(x.get(),0),getMode:()=>Mc.getMode(a)});return jo(tn,Qe)},at=(gn,$n)=>{if(Kn.cancel(),!j())return;const tn=Je(gn),Qe=gn[0].position,pt=ct(Qe,$n);T.set(Qe),x.set(1);const Sn=N.element;Jn(Sn,"display"),Z($n)||(Ms(Sn,ES),Mc.reset(a,N)),Zs.showWithinBounds(N,me(tn),{anchor:pt,transition:{classes:[ES],mode:"placement"}},()=>A.some(H())),$n.fold(C.clear,C.set),oe()&&Tn(Sn,"display","none")},fn=()=>{Tn(N.element,"transition","none"),Q(),Jn(N.element,"transition")};let Jt=!1;const Kn=tc(()=>{if(!(!n.hasFocus()||n.removed||Jt))if(lr(N.element,ES))Kn.throttle();else{const gn=Re();a8(gn,n).fold(le,$n=>{at($n.toolbars,A.some($n.elem))})}},17);n.on("init",()=>{n.on("remove",le),n.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",Q),n.on("click focus SetContent",Kn.throttle),n.on("keyup",gn=>{(!DK(gn.keyCode)||!_.inSubtoolbar())&&Kn.throttle()}),n.on(CN,le),n.on(XF,gn=>{const $n=Re();en($n.lookupTable,gn.toolbarKey).each(tn=>{at([tn],Fr(gn.target!==n,gn.target)),EF(N)})}),n.on("focusout",gn=>{$T.setEditorTimeout(n,()=>{ar(a.element).isNone()&&ar(N.element).isNone()&&!n.hasFocus()&&le()},0)}),n.on("SwitchMode",()=>{n.mode.isReadOnly()&&le()}),n.on("DisabledStateChange",gn=>{gn.state&&le()}),n.on("ExecCommand",({command:gn})=>{gn.toLowerCase()==="toggleview"&&le()}),n.on("AfterProgressState",gn=>{gn.state?le():n.hasFocus()&&Kn.throttle()}),n.on("dragstart",()=>{Jt=!0}),n.on("dragend drop",()=>{Jt=!1}),n.on("NodeChange",gn=>{_.inSubtoolbar()?fn():ar(N.element).fold(Kn.throttle,V)})})},RK=n=>{Te([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{n.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:Ei(n,a.cmd),onSetup:eS(n,a.name)})}),n.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Ma(n),onAction:Ei(n,"JustifyNone")})},l8=(n,s)=>{const a=()=>{const i=s.getOptions(n),d=s.getCurrent(n).map(s.hash),g=kn();return pe(i,h=>({type:"togglemenuitem",text:s.display(h),onSetup:C=>{const x=_=>{_&&(g.on(N=>N.setActive(!1)),g.set(C)),C.setActive(_)};x(gc(d,s.hash(h)));const T=s.watcher(n,h,x);return()=>{g.clear(),T()}},onAction:()=>s.setCurrent(n,h)}))};n.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),n.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},fk=n=>({name:"lineheight",text:"Line height",icon:"line-height",getOptions:a6,hash:s=>Us(s,["fixed","relative","empty"]).getOr(s),display:nn,watcher:(s,a,i)=>s.formatter.formatChanged("lineheight",i,!1,{value:a}).unbind,getCurrent:s=>A.from(s.queryCommandValue("LineHeight")),setCurrent:(s,a)=>s.execCommand("LineHeight",!1,a),onToolbarSetup:Ma(n),onMenuSetup:Ma(n)}),u8=n=>A.from(zB(n)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:se(a),hash:i=>Ut(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:d.customCode??null}).unbind,getCurrent:i=>{const d=ht.fromDom(i.selection.getNode());return Ui(d,g=>A.some(g).filter(pc).bind(h=>na(h,"lang").map(x=>{const T=na(h,"data-mce-lang").getOrUndefined();return{code:x,customCode:T,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=Ds();return i.setActive(n.formatter.match("lang",{},void 0,!0)),d.set(n.formatter.formatChanged("lang",i.setActive,!0)),Fb(d.clear,Ma(n)(i))},onMenuSetup:Ma(n)})),NK=n=>{l8(n,fk(n)),u8(n).each(s=>l8(n,s))},MK=(n,s)=>{Iq(n,s),Vq(n,s),Oy(n,s),Fq(n,s),jF(n,s)},PK=n=>{n.ui.registry.addContext("editable",()=>n.selection.isEditable()),n.ui.registry.addContext("mode",s=>n.mode.get()===s),n.ui.registry.addContext("any",_t),n.ui.registry.addContext("formatting",s=>n.formatter.canApply(s)),n.ui.registry.addContext("insert",s=>n.schema.isValidChild(n.selection.getNode().tagName,s))},BK=n=>Mp(n,"NodeChange",s=>{s.setEnabled(n.queryCommandState("outdent")&&n.selection.isEditable())}),$K=n=>{n.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:BK(n),onAction:Ei(n,"outdent")}),n.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Ma(n,()=>n.queryCommandState("indent")),onAction:Ei(n,"indent")})},d8=n=>{$K(n)},DN=(n,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return n.on("PastePlainTextToggle",i),Fb(()=>n.off("PastePlainTextToggle",i),Ma(n)(a))},m8=n=>{const s=Zt(t6(n)),a=()=>n.execCommand("mceTogglePlainTextPaste");n.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:DN(n,s)}),n.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:DN(n,s)})},gk=(n,s)=>()=>{n.execCommand("mceToggleFormat",!1,s)},IK=n=>{Gf.each([{name:"bold",text:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:eS(n,s.name),onAction:gk(n,s.name),shortcut:s.shortcut})});for(let s=1;s<=6;s++){const a="h"+s,i=`Access+${s}`;n.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:eS(n,a),onAction:gk(n,a),shortcut:i})}},f8=n=>{Gf.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy",context:"any"},{name:"help",text:"Help",action:"mceHelp",icon:"help",shortcut:"Alt+0",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ei(n,s.action),shortcut:s.shortcut,context:s.context})}),Gf.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Ma(n),onAction:Ei(n,s.action)})})},g8=n=>{Gf.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{n.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:Ei(n,s.action),onSetup:eS(n,s.name)})})},LK=n=>{IK(n),f8(n),g8(n)},rJ=n=>{Gf.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C",context:"any"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A",context:"any"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P",context:"any"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:Ei(n,s.action),context:s.context})}),Gf.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{n.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onSetup:Ma(n),onAction:Ei(n,s.action)})}),n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Ma(n),onAction:gk(n,"code")})},FK=n=>{LK(n),rJ(n)},hk=(n,s)=>Mp(n,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!n.mode.isReadOnly()&&n.undoManager[s]())}),HK=n=>{n.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:hk(n,"hasUndo"),onAction:Ei(n,"undo")}),n.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:hk(n,"hasRedo"),onAction:Ei(n,"redo")})},zK=n=>{n.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:hk(n,"hasUndo"),onAction:Ei(n,"undo"),shortcut:"Meta+Z"}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:hk(n,"hasRedo"),onAction:Ei(n,"redo"),shortcut:"Meta+Y"})},VK=n=>{HK(n),zK(n)},UK=n=>Mp(n,"VisualAid",s=>{s.setActive(n.hasVisual)}),jK=n=>{n.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:UK(n),onAction:Ei(n,"mceToggleVisualAid"),context:"any"})},WK=n=>{n.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ei(n,"mceToggleVisualAid"),context:"any"})},ZK=n=>{WK(n),jK(n)},GK=(n,s)=>{RK(n),FK(n),MK(n,s),VK(n),sI(n),ZK(n),d8(n),NK(n),m8(n),PK(n)},qK=n=>de(n)?n.split(/[ ,]/):n,h8=n=>s=>s.options.get(n),KK=n=>{const s=n.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:de(a)||ft(a,de)?{value:qK(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},RN=h8("contextmenu_never_use_native"),YK=h8("contextmenu_avoid_overlap"),XK=n=>p8(n).length===0,p8=n=>{const s=n.ui.registry.getAll().contextMenus,a=n.options.get("contextmenu");return n.options.isSet("contextmenu")?a:sn(a,i=>ho(s,i))},TS=(n,s)=>({type:"makeshift",x:n,y:s}),QK=(n,s,a)=>TS(n.x+s,n.y+a),NN=n=>n.type==="longpress"||n.type.indexOf("touch")===0,MN=n=>{if(NN(n)){const s=n.touches[0];return TS(s.pageX,s.pageY)}else return TS(n.pageX,n.pageY)},JK=n=>{if(NN(n)){const s=n.touches[0];return TS(s.clientX,s.clientY)}else return TS(n.clientX,n.clientY)},b8=(n,s)=>{const a=Yv.DOM.getPos(n);return QK(s,a.x,a.y)},eY=(n,s)=>s.type==="contextmenu"||s.type==="longpress"?n.inline?MN(s):b8(n.getContentAreaContainer(),JK(s)):v8(n),v8=n=>({type:"selection",root:ht.fromDom(n.selection.getNode())}),tY=n=>({type:"node",node:A.some(ht.fromDom(n.selection.getNode())),root:ht.fromDom(n.getBody())}),y8=(n,s,a)=>{switch(a){case"node":return tY(n);case"point":return eY(n,s);case"selection":return v8(n)}},nY=(n,s,a,i,d,g)=>{const h=a(),C=y8(n,s,g);lh(h,Kd.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:A.none()}).map(x=>{s.preventDefault(),Zs.showMenuAt(d,{anchor:C},{menu:{markers:Vf("normal")},data:x})})},PN={onLtr:()=>[Or,Ir,_r,Oa,ga,Ps,Ua,Xh,Oc,q0,Pg,F1],onRtl:()=>[Or,_r,Ir,ga,Oa,Ps,Ua,Xh,Pg,F1,Oc,q0]},oY=12,sY={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},BN=(n,s)=>{const a=n.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return bg(n.getWin(),ji.domRange(d)).exists(h=>h.left<=i.clientX&&h.right>=i.clientX&&h.top<=i.clientY&&h.bottom>=i.clientY)}},C8=n=>{const s=n.selection.getRng(),a=()=>{$T.setEditorTimeout(n,()=>{n.selection.setRng(s)},10),g()};n.once("touchend",a);const i=h=>{h.preventDefault(),h.stopImmediatePropagation()};n.on("mousedown",i,!0);const d=()=>g();n.once("longpresscancel",d);const g=()=>{n.off("touchend",a),n.off("longpresscancel",d),n.off("mousedown",i)}},x8=(n,s,a)=>{const i=y8(n,s,a);return{bubble:xi(0,a==="point"?oY:0,sY),layouts:PN,overrides:{maxWidthFunction:z1(),maxHeightFunction:Bg()},...i}},rY=(n,s,a,i,d,g,h)=>{const C=x8(n,s,g);lh(a,Kd.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:A.none()}).map(x=>{s.preventDefault();const T=h?ja.HighlightMenuAndItem:ja.HighlightNone;Zs.showMenuWithinBounds(d,{anchor:C},{menu:{markers:Vf("normal"),highlightOnOpen:T},data:x,type:"horizontal"},()=>A.some(EN(n,i.shared,g==="node"?"node":"selection"))),n.dispatch(CN)})},aY=(n,s,a,i,d,g)=>{const h=Ks(),C=h.os.isiOS(),x=h.os.isMacOS(),T=h.os.isAndroid(),_=h.deviceType.isTouch(),N=()=>!(T||C||x&&_),H=()=>{const j=a();rY(n,s,j,i,d,g,N())};if((x||C)&&g!=="node"){const j=()=>{C8(n),H()};BN(n,s)?j():(n.once("selectionchange",j),n.once("touchend",()=>n.off("selectionchange",j)))}else H()},S8=n=>de(n)?n==="|":n.type==="separator",$N={type:"separator"},w8=n=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(de(n))return n;switch(n.type){case"separator":return $N;case"submenu":return{type:"nestedmenuitem",...s(n),getSubmenuItems:()=>{const i=n.getSubmenuItems();return de(i)?i:pe(i,w8)}};default:const a=n;return{type:"menuitem",...s(a),onAction:Ye(a.onAction)}}},pk=(n,s)=>{if(s.length===0)return n;const i=nl(n).filter(d=>!S8(d)).fold(()=>[],d=>[$N]);return n.concat(i).concat(s).concat([$N])},cY=(n,s,a)=>{const i=Tt(s,(d,g)=>en(n,g.toLowerCase()).map(h=>{const C=h.update(a);if(de(C)&&al(Rt(C)))return pk(d,C.split(" "));if(Ct(C)&&C.length>0){const x=pe(C,w8);return pk(d,x)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&S8(i[i.length-1])&&i.pop(),i},E8=(n,s)=>s.ctrlKey&&!RN(n),iY=n=>n.type==="longpress"||ho(n,"touches"),T8=(n,s)=>!iY(s)&&(s.button!==2||s.target===n.getBody()&&s.pointerType===""),bk=(n,s)=>T8(n,s)?n.selection.getStart(!0):s.target,lY=(n,s)=>{const a=YK(n),i=T8(n,s)?"selection":"point";if(al(a)){const d=bk(n,s);return gg(ht.fromDom(d),a)?"node":i}else return i},k8=(n,s,a)=>{const d=Ks().deviceType.isTouch,g=p(Zs.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>n.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:mt([On("dismissContextMenu",[je(pm(),(x,T)=>{So.close(x),n.focus()})])])})),h=()=>Zs.hide(g),C=x=>{if(RN(n)&&x.preventDefault(),E8(n,x)||XK(n))return;const T=lY(n,x),_=()=>{const H=bk(n,x),j=n.ui.registry.getAll(),Z=p8(n);return cY(j.contextMenus,Z,H)};(d()?aY:nY)(n,x,_,a,g,T)};n.on("init",()=>{const x="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");n.on(x,h),n.on("longpress contextmenu",C)})},kS=40,vk=kS/2,A8=(n,s,a,i,d,g)=>n.fold(()=>qg.snap({sensor:Ld(a-vk,i-vk),range:$o(d,g),output:Ld(A.some(a),A.some(i)),extra:{td:s}}),h=>{const C=a-vk,x=i-vk,T=kS,_=kS,N=h.element.dom.getBoundingClientRect();return qg.snap({sensor:Ld(C,x),range:$o(T,_),output:Ld(A.some(a-N.width/2),A.some(i-N.height/2)),extra:{td:s}})}),_8=(n,s,a)=>{const i=(d,g)=>d.exists(h=>L(h,g));return{getSnapPoints:n,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const h=g.td;i(s.get(),h)||(s.set(h),a(h))},mustSnap:!0}},O8=n=>_o(ca.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:mt([qg.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:n}),Nm.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),uY=(n,s)=>{const a=Zt([]),i=Zt([]),d=Zt(!1),g=kn(),h=kn(),C=Je=>{const ct=df(Je);return A8(j.getOpt(s),Je,ct.x,ct.y,ct.width,ct.height)},x=()=>pe(a.get(),Je=>C(Je)),T=Je=>{const ct=df(Je);return A8(Z.getOpt(s),Je,ct.right,ct.bottom,ct.width,ct.height)},_=()=>pe(i.get(),Je=>T(Je)),N=_8(x,g,Je=>{h.get().each(ct=>{n.dispatch("TableSelectorChange",{start:Je,finish:ct})})}),H=_8(_,h,Je=>{g.get().each(ct=>{n.dispatch("TableSelectorChange",{start:ct,finish:Je})})}),j=O8(N),Z=O8(H),oe=p(j.asSpec()),le=p(Z.asSpec()),Q=(Je,ct,at,fn)=>{const Jt=ct.dom.getBoundingClientRect();Jn(Je.element,"display");const Kn=cg(ht.fromDom(n.getBody())).dom.innerHeight,gn=at(Jt),$n=fn(Jt,Kn);(gn||$n)&&Tn(Je.element,"display","none")},me=(Je,ct,at,fn)=>{const Jt=at(ct);qg.snapTo(Je,Jt),Q(Je,ct,$n=>$n[fn]<0,($n,tn)=>$n[fn]>tn)},ve=Je=>me(oe,Je,C,"top"),Re=()=>g.get().each(ve),Ie=Je=>me(le,Je,T,"bottom"),Et=()=>h.get().each(Ie);if(Ks().deviceType.isTouch()){const Je=ct=>pe(ct,ht.fromDom);n.on("TableSelectionChange",ct=>{d.get()||(Em(s,oe),Em(s,le),d.set(!0));const at=ht.fromDom(ct.start),fn=ht.fromDom(ct.finish);g.set(at),h.set(fn),A.from(ct.otherCells).each(Jt=>{a.set(Je(Jt.upOrLeftCells)),i.set(Je(Jt.downOrRightCells)),ve(at),Ie(fn)})}),n.on("ResizeEditor ResizeWindow ScrollContent",()=>{Re(),Et()}),n.on("TableSelectionClear",()=>{d.get()&&(km(oe),km(le),d.set(!1)),g.clear(),h.clear()})}};var D8=`<svg height="16" viewBox="0 0 80 16" width="80" xmlns="http://www.w3.org/2000/svg"><g opacity=".8"><path d="m80 3.537v-2.202h-7.976v11.585h7.976v-2.25h-5.474v-2.621h4.812v-2.069h-4.812v-2.443zm-10.647 6.929c-.493.217-1.13.337-1.864.337s-1.276-.156-1.805-.47a3.732 3.732 0 0 1 -1.3-1.298c-.324-.554-.48-1.191-.48-1.877s.156-1.335.48-1.877a3.635 3.635 0 0 1 1.3-1.299 3.466 3.466 0 0 1 1.805-.481c.65 0 .914.06 1.263.18.36.12.698.277.986.47.289.192.578.384.842.6l.12.085v-2.586l-.023-.024c-.385-.35-.855-.614-1.384-.818-.53-.205-1.155-.313-1.877-.313-.721 0-1.6.144-2.333.445a5.773 5.773 0 0 0 -1.937 1.251 5.929 5.929 0 0 0 -1.324 1.9c-.324.735-.48 1.565-.48 2.455s.156 1.72.48 2.454c.325.734.758 1.383 1.324 1.913.553.53 1.215.938 1.937 1.25a6.286 6.286 0 0 0 2.333.434c.819 0 1.384-.108 1.961-.313.59-.216 1.083-.505 1.468-.866l.024-.024v-2.49l-.12.096c-.41.337-.878.626-1.396.866zm-14.869-4.15-4.8-5.04-.024-.025h-.902v11.67h2.502v-6.847l2.827 3.08.385.409.397-.41 2.791-3.067v6.845h2.502v-11.679h-.902l-4.788 5.052z"/><path clip-rule="evenodd" d="m15.543 5.137c0-3.032-2.466-5.113-4.957-5.137-.36 0-.745.024-1.094.096-.157.024-3.85.758-3.85.758-3.032.602-4.62 2.466-4.704 4.788-.024.89-.024 4.27-.024 4.27.036 3.165 2.406 5.138 5.017 5.126.337 0 1.119-.109 1.287-.145.144-.024.385-.084.746-.144.661-.12 1.684-.325 3.067-.602 2.37-.409 4.103-2.009 4.44-4.33.156-1.023.084-4.692.084-4.692zm-3.213 3.308-2.346.457v2.31l-5.859 1.143v-5.75l2.346-.458v3.441l3.513-.686v-3.44l-3.513.685v-2.297l5.859-1.143v5.75zm20.09-3.296-.083-1.023h-2.13v8.794h2.346v-4.884c0-1.107.95-1.985 2.057-1.997 1.095 0 1.901.89 1.901 1.997v4.884h2.346v-5.245c-.012-2.105-1.588-3.777-3.67-3.765a3.764 3.764 0 0 0 -2.778 1.25l.012-.011zm-6.014-4.102 2.346-.458v2.298l-2.346.457z" fill-rule="evenodd"/><path d="m28.752 4.126h-2.346v8.794h2.346z"/><path clip-rule="evenodd" d="m43.777 15.483 4.043-11.357h-2.418l-1.54 4.355-.445 1.324-.36-1.324-1.54-4.355h-2.418l3.151 8.794-1.083 3.08zm-21.028-5.51c0 .722.541 1.034.878 1.034s.638-.048.95-.144l.518 1.708c-.217.145-.879.518-2.13.518a2.565 2.565 0 0 1 -2.562-2.587c-.024-1.082-.024-2.49 0-4.21h-1.54v-2.142h1.54v-1.912l2.346-.458v2.37h2.201v2.142h-2.2v3.693-.012z" fill-rule="evenodd"/></g></svg>
`;const dY=n=>n.nodeName==="BR"||!!n.getAttribute("data-mce-bogus")||n.getAttribute("data-mce-type")==="bookmark",mY=(n,s,a)=>{const i=s.delimiter??"›",d=(x,T,_)=>ca.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":_}},components:[Es(x)],action:N=>{n.focus(),n.selection.select(T),n.nodeChanged()},buttonBehaviours:mt([ys.config({...a.tooltips.getConfig({tooltipText:a.translate(["Select the {0} element",T.nodeName.toLowerCase()]),onShow:(N,H)=>{Wi(N.element,H.element)},onHide:N=>{l2(N.element)}})}),Vm.button(a.isDisabled),wr(()=>a.checkUiComponentContext("any"))])}),g=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Es(` ${i} `)]}),h=x=>Tt(x,(T,_,N)=>{const H=d(_.name,_.element,N);return N===0?T.concat([H]):T.concat([g(),H])},[]),C=x=>{const T=[];let _=x.length;for(;_-- >0;){const N=x[_];if(N.nodeType===1&&!dY(N)){const H=TW(n,N);if(H.isDefaultPrevented()||T.push({name:H.name,element:N}),H.isPropagationStopped())break}}return T};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:mt([mn.config({mode:"flow",selector:"div[role=button]"}),Xt.config({disabled:a.isDisabled}),wr(()=>a.checkUiComponentContext("any")),ms.config({}),Bn.config({}),On("elementPathEvents",[vs((x,T)=>{n.shortcuts.add("alt+F11","focus statusbar elementpath",()=>mn.focusIn(x)),n.on("NodeChange",_=>{const N=C(_.parents),H=N.length>0?h(N):[];Bn.set(x,H)})})])]),components:[]}};var Yf;(function(n){n[n.None=0]="None",n[n.Both=1]="Both",n[n.Vertical=2]="Vertical"})(Yf||(Yf={}));const R8=n=>{const s=ht.fromDom(n.getContainer()),a=yr(s),i=ma(s);return{height:a,width:i}},fY=(n,s,a,i)=>{const d=ck(i.height+s.top,hO(n),pO(n));return a===Yf.Both?{height:d,width:ck(i.width+s.left,gO(n),LT(n))}:{height:d}},N8=(n,s,a)=>{const i=ht.fromDom(n.getContainer()),d=R8(n),g=fY(n,s,a,d);return gs(g,(h,C)=>{En(h)&&Tn(i,C,ak(h))}),qD(n),g},gY=n=>{const s=e6(n);return s===!1?Yf.None:s==="both"?Yf.Both:Yf.Vertical},hY=(n,s)=>s===Yf.Both?Bc.translate(["Editor's height: {0} pixels, Editor's width: {1} pixels",n.height,n.width]):Bc.translate(["Editor's height: {0} pixels",n.height]),IN=(n,s,a)=>{Cn(n.element,"aria-valuetext",hY(s,a))},yk=(n,s,a,i,d)=>{const h=$o(i*20,d*20),C=N8(n,h,a);return IN(s,C,a),A.some(!0)},M8=(n,s)=>{const a=gY(n);if(a===Yf.None)return A.none();const i=a===Yf.Both?Bc.translate("Press the arrow keys to resize the editor."):Bc.translate("Press the Up and Down arrow keys to resize the editor."),d=a===Yf.Both?"tox-statusbar__resize-cursor-both":"tox-statusbar__resize-cursor-default";return A.some(hu("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle",d],attributes:{"aria-label":s.translate(i),"data-mce-name":"resize-handle",role:"separator"},behaviours:[qg.config({mode:"mouse",repositionTarget:!1,onDrag:(g,h,C)=>{const x=N8(n,C,a);IN(g,x,a)},blockerClass:"tox-blocker"}),mn.config({mode:"special",onLeft:g=>yk(n,g,a,-1,0),onRight:g=>yk(n,g,a,1,0),onUp:g=>yk(n,g,a,0,-1),onDown:g=>yk(n,g,a,0,1)}),ms.config({}),Nn.config({}),ys.config(s.tooltips.getConfig({tooltipText:s.translate("Resize")})),On("set-aria-valuetext",[vs(g=>{const h=()=>{IN(g,R8(n),a)};n._skinLoaded?h():n.once("SkinLoaded",h)})])],eventOrder:{[Iu()]:["add-focusable","set-aria-valuetext"]}},s.icons))},pY=(n,s)=>{const a=(i,d,g)=>Bn.set(i,[Es(s.translate(["{0} "+g,d[g]]))]);return ca.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:mt([Vm.button(s.isDisabled),wr(()=>s.checkUiComponentContext("any")),ms.config({}),Bn.config({}),Ft.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),On("wordcount-events",[Af(i=>{const d=Ft.getValue(i),g=d.mode==="words"?"characters":"words";Ft.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),vs(i=>{n.on("wordCountUpdate",d=>{const{mode:g}=Ft.getValue(i);Ft.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[Aa()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},P8=(n,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v7",rel:"noopener",target:"_blank","aria-label":n.translate(["Build with {0}","TinyMCE"])},innerHtml:n.translate(["Build with {0}",D8.trim()])},behaviours:mt([Nn.config({})])}]}),i=()=>{const C=PD("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Es(Bc.translate(["Press {0} for help",C]))]}},d=()=>{const C=[];return n.hasPlugin("wordcount")&&C.push(pY(n,s)),SO(n)&&C.push(a()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:C}},g=()=>{const C=[],x=s6(n),T=JB(n),_=SO(n)||n.hasPlugin("wordcount"),N=()=>{const H="tox-statusbar__text-container--flex-start",j="tox-statusbar__text-container--flex-end",Z="tox-statusbar__text-container--space-around";if(x){const oe="tox-statusbar__text-container-3-cols";return!_&&!T?[oe,Z]:_&&!T?[oe,j]:[oe,H]}return[_&&!T?j:H]};return T&&C.push(mY(n,{},s)),x&&C.push(i()),_&&C.push(d()),C.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container",...N()]},components:C}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const C=g(),x=M8(n,s);return C.concat(x.toArray())})()}},B8=(n,s)=>s.get().getOrDie(`UI for ${n} has not been rendered`),bY=(n,s)=>{const a=n.inline,i=a?yK:dK,d=oy(n)?HG:PG,g=ik(),h=kn(),C=kn(),x=kn(),H=Ks().deviceType.isTouch()?["tox-platform-touch"]:[],j=VT(n),Z=wb(n),oe=_o({dom:{tag:"div",classes:["tox-anchorbar"]}}),le=_o({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),Q=()=>g.mainUi.get().map(ln=>ln.outerContainer).bind(os.getHeader),me=()=>rn.fromOption(g.dialogUi.get().map(ln=>ln.sink),"UI has not been rendered"),ve=()=>rn.fromOption(g.popupUi.get().map(ln=>ln.sink),"(popup) UI has not been rendered"),Re=g.lazyGetInOuterOrDie("anchor bar",oe.getOpt),Ie=g.lazyGetInOuterOrDie("bottom anchor bar",le.getOpt),Et=g.lazyGetInOuterOrDie("toolbar",os.getToolbar),Je=g.lazyGetInOuterOrDie("throbber",os.getThrobber),ct=RG({popup:ve,dialog:me},n,Re,Ie),at=()=>{const ln={attributes:{[K0]:j?Cm.BottomToTop:Cm.TopToBottom}},Fn=os.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:ct.popup,onEscape:()=>{n.focus()}}),es=os.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:ct.popup.shared.getSink,providers:ct.popup.shared.providers,onEscape:()=>{n.focus()},onToolbarToggled:Xf=>{kW(n,Xf)},type:Z,lazyToolbar:Et,lazyHeader:()=>Q().getOrDie("Could not find header element"),...ln}),Oo=os.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:ct.popup.shared.providers,onEscape:()=>{n.focus()},type:Z}),uc=Tp(n),$s=ty(n),el=ey(n),Pa=o6(n),vu=fn(Pa),Ka=uc||$s||el,ad=()=>uc?[Oo]:$s?[es]:[],Lp=[vu,Fn];return os.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(Ka?[]:["tox-editor-header--empty"]),...ln},components:hn([el?Lp:[],ad(),ny(n)?[]:[oe.asSpec()]]),sticky:oy(n),editor:n,sharedBackstage:ct.popup.shared})},fn=ln=>os.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]},promotionLink:ln}),Jt=()=>{const ln=os.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),Fn=os.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[ln,Fn]}},Kn=()=>{const ln=EO(n),Fn=L(Uc(),ln)&&bs(ln,"display")==="grid",es={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(H),attributes:{...Bc.isRtl()?{dir:"rtl"}:{}}},behaviours:mt([Mc.config({useFixed:()=>d.isDocked(Q)})])},Oo={dom:{styles:{width:document.body.clientWidth+"px"}},events:_s([je(Uh(),el=>{Tn(el.element,"width",document.body.clientWidth+"px")})])},uc=p(jo(es,Fn?Oo:{})),$s=g_(uc);return C.set($s),{sink:uc,mothership:$s}},gn=()=>{const ln={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(H),attributes:{...Bc.isRtl()?{dir:"rtl"}:{}}},behaviours:mt([Mc.config({useFixed:()=>d.isDocked(Q),getBounds:()=>s.getPopupSinkBounds()})])},Fn=p(ln),es=g_(Fn);return x.set(es),{sink:Fn,mothership:es}},$n=()=>{const ln=at(),Fn=Jt(),es=os.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:ct.popup}),Oo=os.parts.viewWrapper({backstage:ct.popup}),uc=QB(n)&&!a?A.some(P8(n,ct.popup.shared.providers)):A.none(),$s=hn([j?[]:[ln],a?[]:[Fn],j?[ln]:[]]),el=os.parts.editorContainer({components:hn([$s,a?[]:[le.asSpec()]])}),Pa=TO(n),vu={role:"application",...Bc.isRtl()?{dir:"rtl"}:{},...Pa?{"aria-hidden":"true"}:{}},Ka=p(os.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(a?["tox-tinymce-inline"]:[]).concat(j?["tox-tinymce--toolbar-bottom"]:[]).concat(H),styles:{visibility:"hidden",...Pa?{opacity:"0",border:"0"}:{}},attributes:vu},components:[el,...a?[]:[Oo,...uc.toArray()],es],behaviours:mt([wr(()=>ct.popup.shared.providers.checkUiComponentContext("any")),Xt.config({disableClass:"tox-tinymce--disabled"}),mn.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),ad=g_(Ka);return h.set(ad),{mothership:ad,outerContainer:Ka}},tn=ln=>{const Fn=ak(hK(n)),es=ak(pK(n));return n.inline||(tf("div","width",es)&&Tn(ln.element,"width",es),tf("div","height",Fn)?Tn(ln.element,"height",Fn):Tn(ln.element,"height","400px")),Fn},Qe=ln=>{n.addShortcut("alt+F9","focus menubar",()=>{os.focusMenubar(ln)}),n.addShortcut("alt+F10","focus toolbar",()=>{os.focusToolbar(ln)}),n.addCommand("ToggleToolbarDrawer",(Fn,es,Oo)=>{es?.skipFocus?(NG("skipFocus"),os.toggleToolbarDrawerWithoutFocusing(ln)):Oo?.skip_focus?os.toggleToolbarDrawerWithoutFocusing(ln):os.toggleToolbarDrawer(ln)}),n.addQueryStateHandler("ToggleToolbarDrawer",()=>os.isToolbarDrawerToggled(ln)),n.on("blur",()=>{wb(n)===gu.floating&&os.isToolbarDrawerToggled(ln)&&os.toggleToolbarDrawerWithoutFocusing(ln)})},pt=ln=>{const{mainUi:Fn,popupUi:es,uiMotherships:Oo}=ln;Ls(UB(n),(Qf,_S)=>{n.ui.registry.addGroupToolbarButton(_S,Qf)});const{buttons:uc,menuItems:$s,contextToolbars:el,sidebars:Pa,views:vu}=n.ui.registry.getAll(),Ka=Dx(n),ad={menuItems:$s,menus:i6(n),menubar:GB(n),toolbar:Ka.getOrThunk(()=>HT(n)),allowToolbarGroups:Z===gu.floating,buttons:uc,sidebar:Pa,views:vu};Qe(Fn.outerContainer),YR(n,Fn.mothership,Oo),d.setup(n,ct.popup.shared,Q),GK(n,ct.popup),k8(n,ct.popup.shared.getSink,ct.popup),UG(n),qG(n,Je,ct.popup.shared),i8(n,el,es.sink,{backstage:ct.popup}),uY(n,es.sink);const Lp=n.getElement(),Xf=tn(Fn.outerContainer),Py={targetNode:Lp,height:Xf};return i.render(n,ln,ad,ct.popup,Py)},Sn=ln=>(x.set(ln.mothership),ln),zn=()=>{const ln=$n(),Fn=Kn(),es=kp(n)?gn():Sn(Fn);g.dialogUi.set(Fn),g.popupUi.set(es),g.mainUi.set(ln);const Oo={popupUi:es,dialogUi:Fn,mainUi:ln,uiMotherships:g.getUiMotherships()};return pt(Oo)};return{popups:{backstage:ct.popup,getMothership:()=>B8("popups",x)},dialogs:{backstage:ct.dialog,getMothership:()=>B8("dialogs",C)},renderUI:zn}},$8=n=>{const s=[],a={};return gs(n,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?rn.error(s):rn.value(a)},Wb=(n,s,a,i)=>{const d=_o(xp.sketch(g=>({dom:{tag:"div",classes:["tox-form"].concat(n.classes)},components:pe(n.items,h=>CL(g,h,s,a,i))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[d.asSpec()]}],behaviours:mt([mn.config({mode:"acyclic",useTabstopAt:X(oS)}),Xd.memento(d),mZ(d,{postprocess:g=>$8(g).fold(h=>(console.error(h),{}),nn)}),On("dialog-body-panel",[je(tu(),(g,h)=>{g.getSystem().broadcastOn([Bp],{newFocus:A.some(h.event.target)})})])])}},I8=(n,s,a)=>pe(n,(i,d)=>{Bn.set(a,n[d].view());const g=s.dom.getBoundingClientRect();return Bn.set(a,[]),g.height}),vY=n=>No(Ho(n,(s,a)=>s>a?-1:s<a?1:0)),yY=(n,s,a)=>{const i=Yp(n).dom,d=Vi(n,".tox-dialog-wrap").getOr(n),g=bs(d,"position")==="fixed";let h;g?h=Math.max(i.clientHeight,window.innerHeight):h=Math.max(i.offsetHeight,i.scrollHeight);const C=yr(s),T=s.dom.offsetLeft>=a.dom.offsetLeft+ma(a)?Math.max(yr(a),C):C,_=parseInt(bs(n,"margin-top"),10)||0,N=parseInt(bs(n,"margin-bottom"),10)||0,j=yr(n)+_+N-T;return h-j},CY=(n,s)=>{No(n).each(a=>Sb.showTab(s,a.value))},L8=(n,s)=>{Tn(n,"height",s+"px"),Tn(n,"flex-basis",s+"px")},Ck=(n,s,a)=>{Vi(n,'[role="dialog"]').each(i=>{Io(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Tn(s,"height","0"),Tn(s,"flex-basis","0"),Math.min(g,yY(i,s,d)))).each(g=>{L8(s,g)})})})},xk=n=>Io(n,'[role="tabpanel"]'),xY=n=>{const s=kn();return{extraEvents:[vs(d=>{const g=d.element;xk(g).each(h=>{Tn(h,"visibility","hidden"),d.getSystem().getByDom(h).toOptional().each(C=>{const x=I8(n,h,C);vY(x).fold(s.clear,s.set)}),Ck(g,h,s),Jn(h,"visibility"),CY(n,d),requestAnimationFrame(()=>{Ck(g,h,s)})})}),je(Uh(),d=>{const g=d.element;xk(g).each(h=>{Ck(g,h,s)})}),je(vR,(d,g)=>{const h=d.element;xk(h).each(C=>{const x=zr(pr(C));Tn(C,"visibility","hidden");const T=ws(C,"height").map(H=>parseInt(H,10));Jn(C,"height"),Jn(C,"flex-basis");const _=C.dom.getBoundingClientRect().height;T.forall(H=>_>H)?(s.set(_),Ck(h,C,s)):T.each(H=>{L8(C,H)}),Jn(C,"visibility"),x.each(Hr)})})],selectFirst:!1}},F8="send-data-to-section",H8="send-data-to-view",SY=(n,s,a,i)=>{const d=Zt({}),g=_=>{const N=Ft.getValue(_),H=$8(N).getOr({}),j=d.get(),Z=jo(j,H);d.set(Z)},h=_=>{const N=d.get();Ft.setValue(_,N)},C=Zt(null),x=pe(n.tabs,_=>({value:_.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Es(a.shared.providers.translate(_.title))],view:()=>[xp.sketch(N=>({dom:{tag:"div",classes:["tox-form"]},components:pe(_.items,H=>CL(N,H,s,a,i)),formBehaviours:mt([mn.config({mode:"acyclic",useTabstopAt:X(oS)}),On("TabView.form.events",[vs(h),au(g)]),Pc.config({channels:Lh([{key:F8,value:{onReceive:g}},{key:H8,value:{onReceive:h}}])})])}))]})),T=xY(x);return Sb.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(_,N,H)=>{const j=Ft.getValue(N);pn(_,CI,{name:j,oldName:C.get()}),C.set(j)},tabs:x,components:[Sb.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[NB.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:mt([ms.config({})])}),Sb.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:mt([On("tabpanel",T.extraEvents),mn.config({mode:"acyclic"}),We.config({find:_=>No(Sb.getViewItems(_))}),Vb(A.none(),_=>(_.getSystem().broadcastOn([F8],{}),d.get()),(_,N)=>{d.set(N),_.getSystem().broadcastOn([H8],{})})])})},z8=(n,s,a,i,d,g)=>{const h=T=>{const _=T.body;switch(_.type){case"tabpanel":return[SY(_,T.initialData,i,g)];default:return[Wb(_,T.initialData,i,g)]}},C=(T,_)=>A.some({isTabPanel:()=>_.body.type==="tabpanel"}),x={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?x:{}}},components:[],behaviours:mt([Xd.childAt(0),Qi.config({channel:`${HI}-${s}`,updateState:C,renderComponents:h,initialData:n})])}},wY=(n,s,a,i,d,g)=>z8(n,s,A.some(a),i,d,g),EY=(n,s,a,i)=>{const d=z8(n,s,A.none(),a,!1,i);return ia.parts.body(d)},V8=n=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[LI(A.none(),{dom:{tag:"iframe",attributes:{src:n.url}},behaviours:mt([ms.config({}),Nn.config({})])})]}],behaviours:mt([mn.config({mode:"acyclic",useTabstopAt:X(oS)})])};return ia.parts.body(s)},TY=Xv.deviceType.isTouch(),U8=(n,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[n,s]}),j8=(n,s)=>ia.parts.close(ca.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:n,buttonBehaviours:mt([ms.config({})])})),W8=()=>ia.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),Z8=(n,s)=>ia.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:Mm(`<p>${$x(s.translate(n))}</p>`)}]}]}),Sk=n=>ia.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:n}),G8=(n,s)=>[Dm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:n}),Dm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],LN=n=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return ia.sketch({lazySink:n.lazySink,onEscape:g=>(n.onEscape(g),A.some(!0)),useTabstopAt:g=>!oS(g),firstTabstop:n.firstTabstop,dom:{tag:"div",classes:[s].concat(n.extraClasses),styles:{position:"relative",...n.extraStyles}},components:[n.header,n.body,...n.footer.toArray()],parts:{blocker:{dom:Mm(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:TY?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:mt([Nn.config({}),On("dialog-events",n.dialogEvents.concat([op(tu(),(g,h)=>{st.isBlocked(g)?V():mn.focusIn(g)}),je(T0(),(g,h)=>{g.getSystem().broadcastOn([Bp],{newFocus:h.event.newFocus})})])),On("scroll-lock",[vs(()=>{Go(Uc(),d)}),au(()=>{Ms(Uc(),d)})]),...n.extraBehaviours]),eventOrder:{[Aa()]:["dialog-events"],[Iu()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[El()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...n.eventOrder}})},q8=n=>ca.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close"),"data-mce-name":"close"}},buttonBehaviours:mt([ms.config({}),ys.config(n.tooltips.getConfig({tooltipText:n.translate("Close")}))]),components:[hu("close",{tag:"span",classes:["tox-icon"]},n.icons)],action:s=>{Yn(s,ih)}}),K8=(n,s,a,i)=>{const d=g=>[Es(i.translate(g.title))];return{dom:{tag:"h1",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:mt([Qi.config({channel:`${SR}-${s}`,initialData:n,renderComponents:d})])}},Y8=()=>({dom:Mm('<div class="tox-dialog__draghandle"></div>')}),kY=(n,s,a,i)=>Dm.sketch({dom:Mm('<div class="tox-dialog__header"></div>'),components:[K8(n,s,A.some(a),i),Y8(),q8(i)],containerBehaviours:mt([qg.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>Ta(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"},onDrag:(d,g)=>{d.getSystem().broadcastOn([Dr()],{target:g})}})])}),AY=(n,s,a)=>{const i=ia.parts.title(K8(n,s,A.none(),a)),d=ia.parts.draghandle(Y8()),g=ia.parts.close(q8(a)),h=[i].concat(n.draggable?[d]:[]).concat([g]);return Dm.sketch({dom:Mm('<div class="tox-dialog__header"></div>'),components:h})},X8=(n,s,a)=>AY({title:a.shared.providers.translate(n),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),FN=(n,s,a,i)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(n)},styles:{left:"0px",right:"0px",bottom:"0px",top:`${i.getOr(0)}px`,position:"absolute"}},behaviours:s,components:[{dom:Mm('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),HN=(n,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{const d=Io(n().element,".tox-dialog__header").map(g=>yr(g));ia.setBusy(n(),(g,h)=>FN(i.message,h,s,d))},onUnblock:()=>{ia.setIdle(n())}}),Q8="tox-dialog--fullscreen",Zb="tox-dialog--width-lg",zN="tox-dialog--width-md",wk=n=>{switch(n){case"large":return A.some(Zb);case"medium":return A.some(zN);default:return A.none()}},Ek=(n,s)=>{const a=ht.fromDom(s.element.dom);lr(a,Q8)||(fa(a,[Zb,zN]),wk(n).each(i=>Go(a,i)))},J8=(n,s)=>{const a=ht.fromDom(n.element.dom),i=d1(a),d=Wt(i,g=>g===Zb||g===zN).or(wk(s));Mu(a,[Q8,...d.toArray()])},e7=(n,s,a)=>p(LN({...n,firstTabstop:1,lazySink:a.shared.getSink,extraBehaviours:[A4({}),...n.extraBehaviours],onEscape:i=>{Yn(i,ih)},dialogEvents:s,eventOrder:{[hm()]:[Qi.name(),Pc.name()],[Iu()]:["scroll-lock",Qi.name(),"messages","dialog-events","alloy.base.behaviour"],[El()]:["alloy.base.behaviour","dialog-events","messages",Qi.name(),"scroll-lock"]}})),VN=(n,s={})=>{const a=i=>{const d=pe(i.items,g=>{const h=en(s,g.name).getOr(Zt(!1));return{...g,storage:h}});return{...i,items:d}};return pe(n,i=>i.type==="menu"?a(i):i)},t7=n=>Tt(n,(s,a)=>a.type==="menu"?Tt(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),n7=(n,s)=>[np(tu(),FI),n(zb,(a,i,d,g)=>{Fi(g.element)&&zr(pr(g.element)).each(Ns),s.onClose(),i.onClose()}),n(ih,(a,i,d,g)=>{i.onCancel(a),Yn(g,zb)}),je(T4,(a,i)=>s.onUnblock()),je(bR,(a,i)=>s.onBlock(i.event))],_Y=(n,s)=>{const a=(d,g)=>je(d,(h,C)=>{i(h,(x,T)=>{g(n(),x,C.event,h)})}),i=(d,g)=>{Qi.getState(d).get().each(h=>{g(h,d)})};return[...n7(a,s),a(Yd,(d,g,h)=>{g.onAction(d,{name:h.name})})]},o7=(n,s,a)=>{const i=(g,h)=>je(g,(C,x)=>{d(C,(T,_)=>{h(n(),T,x.event,C)})}),d=(g,h)=>{Qi.getState(g).get().each(C=>{h(C.internalDialog,g)})};return[...n7(i,s),i(nS,(g,h)=>h.onSubmit(g)),i(ki,(g,h,C)=>{h.onChange(g,{name:C.name})}),i(Yd,(g,h,C,x)=>{const T=()=>x.getSystem().isConnected()?mn.focusIn(x):void 0,_=j=>oa(j,"disabled")||na(j,"aria-disabled").exists(Z=>Z==="true"),N=pr(x.element),H=zr(N);h.onAction(g,{name:C.name,value:C.value}),zr(N).fold(T,j=>{_(j)||H.exists(Z=>te(j,Z)&&_(Z))?T():a().toOptional().filter(Z=>!te(Z.element,j)).each(T)})}),i(CI,(g,h,C)=>{h.onTabChange(g,{newTabName:C.name,oldTabName:C.oldName})}),au(g=>{const h=n();Ft.setValue(g,h.getData())})]},OY=(n,s)=>cS(n,n.type,s),DY=(n,s,a)=>Wt(s,i=>i.name===a).bind(i=>i.memento.getOpt(n)),RY=(n,s)=>{const a=s.map(C=>C.footerButtons).getOr([]),i=wn(a,C=>C.align==="start"),d=(C,x)=>Dm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${C}`]},components:pe(x,T=>T.memento.asSpec())}),g=d("start",i.pass),h=d("end",i.fail);return[g,h]},s7=(n,s,a)=>{const i=(d,g)=>{const h=pe(g.buttons,x=>{const T=_o(OY(x,a));return{name:x.name,align:x.align,memento:T}}),C=x=>DY(d,h,x);return A.some({lookupByName:C,footerButtons:h})};return{dom:Mm('<div class="tox-dialog__footer"></div>'),components:[],behaviours:mt([Qi.config({channel:`${zI}-${s}`,initialData:n,updateState:i,renderComponents:RY})])}},NY=(n,s,a)=>s7(n,s,a),r7=(n,s,a)=>ia.parts.footer(s7(n,s,a)),Tk=(n,s)=>{if(n.getRoot().getSystem().isConnected()){const i=We.getCurrent(n.getFormWrapper()).getOr(n.getFormWrapper());return xp.getField(i,s).orThunk(()=>n.getFooter().bind(h=>Qi.getState(h).get()).bind(h=>h.lookupByName(s)))}else return A.none()},MY=(n,s)=>{const a=n.getRoot();return Qi.getState(a).get().map(i=>wl(zs("data",i.dataValidator,s))).getOr(s)},a7=(n,s,a)=>{const i=Z=>{const oe=n.getRoot();oe.getSystem().isConnected()&&Z(oe)},j={getData:()=>{const Z=n.getRoot(),oe=Z.getSystem().isConnected()?n.getFormWrapper():Z,le=Ft.getValue(oe),Q=Ls(a,me=>me.get());return{...le,...Q}},setData:Z=>{i(oe=>{const le=j.getData(),Q=jo(le,Z),me=MY(n,Q),ve=n.getFormWrapper();Ft.setValue(ve,me),gs(a,(Re,Ie)=>{ho(Q,Ie)&&Re.set(Q[Ie])})})},setEnabled:(Z,oe)=>{Tk(n,Z).each(oe?Xt.enable:Xt.disable)},focus:Z=>{Tk(n,Z).each(Nn.focus)},block:Z=>{if(!de(Z))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(oe=>{pn(oe,bR,{message:Z})})},unblock:()=>{i(Z=>{Yn(Z,T4)})},showTab:Z=>{i(oe=>{const le=n.getBody();Qi.getState(le).get().exists(me=>me.isTabPanel())&&We.getCurrent(le).each(me=>{Sb.showTab(me,Z)})})},redial:Z=>{i(oe=>{const le=n.getId(),Q=s(Z),me=VN(Q.internalDialog.buttons,a);oe.getSystem().broadcastOn([`${N4}-${le}`],Q),oe.getSystem().broadcastOn([`${SR}-${le}`],Q.internalDialog),oe.getSystem().broadcastOn([`${HI}-${le}`],Q.internalDialog),oe.getSystem().broadcastOn([`${zI}-${le}`],{...Q.internalDialog,buttons:me}),j.setData(Q.initialData)})},close:()=>{i(Z=>{Yn(Z,zb)})},toggleFullscreen:n.toggleFullscreen};return j},PY=(n,s,a)=>{const i=Mt("dialog"),d=n.internalDialog,g=X8(d.title,i,a),h=Zt(d.size),C=ve=>Tk(Q,ve),x=wk(h.get()).toArray(),T=(ve,Re)=>(h.set(Re.internalDialog.size),Ek(Re.internalDialog.size,ve),A.some(Re)),_=EY({body:d.body,initialData:d.initialData},i,a,C),N=VN(d.buttons),H=t7(N),j=Fr(N.length!==0,r7({buttons:N},i,a)),Z=o7(()=>me,HN(()=>le,a.shared.providers,s),a.shared.getSink),oe={id:i,header:g,body:_,footer:j,extraClasses:x,extraBehaviours:[Qi.config({channel:`${N4}-${i}`,updateState:T,initialData:n})],extraStyles:{}},le=e7(oe,Z,a),Q=(()=>{const ve=()=>{const Ie=ia.getBody(le);return We.getCurrent(Ie).getOr(Ie)},Re=()=>{J8(le,h.get())};return{getId:se(i),getRoot:se(le),getBody:()=>ia.getBody(le),getFooter:()=>ia.getFooter(le),getFormWrapper:ve,toggleFullscreen:Re}})(),me=a7(Q,s.redial,H);return{dialog:le,instanceApi:me}},AS=(n,s,a,i=!1,d)=>{const g=Mt("dialog"),h=Mt("dialog-label"),C=Mt("dialog-content"),x=n.internalDialog,T=at=>Tk(Je,at),_=Zt(x.size),N=wk(_.get()).toArray(),H=(at,fn)=>(_.set(fn.internalDialog.size),Ek(fn.internalDialog.size,at),d(),A.some(fn)),j=_o(kY({title:x.title,draggable:!0},g,h,a.shared.providers)),Z=_o(wY({body:x.body,initialData:x.initialData},g,C,a,i,T)),oe=VN(x.buttons),le=t7(oe),Q=Fr(oe.length!==0,_o(NY({buttons:oe},g,a))),me=o7(()=>ct,{onBlock:at=>{st.block(Ie,(fn,Jt)=>{const Kn=j.getOpt(Ie).map(gn=>yr(gn.element));return FN(at.message,Jt,a.shared.providers,Kn)})},onUnblock:()=>{st.unblock(Ie)},onClose:()=>s.closeWindow()},a.shared.getSink),ve="tox-dialog-inline",Re=Ks().os,Ie=p({dom:{tag:"div",classes:["tox-dialog",ve,...N],attributes:{role:"dialog",...Re.isMacOS()?{"aria-label":x.title}:{"aria-labelledby":h}}},eventOrder:{[hm()]:[Qi.name(),Pc.name()],[Aa()]:["execute-on-form"],[Iu()]:["reflecting","execute-on-form"]},behaviours:mt([mn.config({mode:"cyclic",onEscape:at=>(Yn(at,zb),A.some(!0)),useTabstopAt:at=>!oS(at)&&($i(at)!=="button"||Pr(at,"disabled")!=="disabled"),firstTabstop:1}),Qi.config({channel:`${N4}-${g}`,updateState:H,initialData:n}),Nn.config({}),On("execute-on-form",me.concat([op(tu(),(at,fn)=>{mn.focusIn(at)}),je(T0(),(at,fn)=>{at.getSystem().broadcastOn([Bp],{newFocus:fn.event.newFocus})})])),st.config({getRoot:()=>A.some(Ie)}),Bn.config({}),A4({})]),components:[j.asSpec(),Z.asSpec(),...Q.map(at=>at.asSpec()).toArray()]}),Et=()=>{J8(Ie,_.get())},Je={getId:se(g),getRoot:se(Ie),getFooter:()=>Q.map(at=>at.get(Ie)),getBody:()=>Z.get(Ie),getFormWrapper:()=>{const at=Z.get(Ie);return We.getCurrent(at).getOr(at)},toggleFullscreen:Et},ct=a7(Je,s.redial,le);return{dialog:Ie,instanceApi:ct}};var UN=tinymce.util.Tools.resolve("tinymce.util.URI");const BY=n=>{const s=h=>{n.getSystem().isConnected()&&h(n)};return{block:h=>{if(!de(h))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(C=>{pn(C,bR,{message:h})})},unblock:()=>{s(h=>{Yn(h,T4)})},close:()=>{s(h=>{Yn(h,zb)})},sendMessage:h=>{s(C=>{C.getSystem().broadcastOn([_n],h)})}}},$Y=["insertContent","setContent","execCommand","close","block","unblock"],c7=n=>Oe(n)&&$Y.indexOf(n.mceAction)!==-1,IY=n=>!c7(n)&&Oe(n)&&ho(n,"mceAction"),LY=(n,s,a)=>{switch(a.mceAction){case"insertContent":n.insertContent(a.content);break;case"setContent":n.setContent(a.content);break;case"execCommand":const i=Ot(a.ui)?a.ui:!1;n.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},i7=(n,s,a,i)=>{const d=Mt("dialog"),g=X8(n.title,d,i),h=V8(n),C=n.buttons.bind(ve=>ve.length===0?A.none():A.some(r7({buttons:ve},d,i))),x=_Y(()=>me,HN(()=>Q,i.shared.providers,s)),T={...n.height.fold(()=>({}),ve=>({height:ve+"px","max-height":ve+"px"})),...n.width.fold(()=>({}),ve=>({width:ve+"px","max-width":ve+"px"}))},_=n.width.isNone()&&n.height.isNone()?["tox-dialog--width-lg"]:[],N=new UN(n.url,{base_uri:new UN(window.location.href)}),H=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,j=Ds(),Z=(ve,Re)=>A.some(Re),oe=[Qi.config({channel:`${N4}-${d}`,updateState:Z,initialData:n}),On("messages",[vs(()=>{const ve=Mo(ht.fromDom(window),"message",Re=>{if(N.isSameOrigin(new UN(Re.raw.origin))){const Ie=Re.raw.data;c7(Ie)?LY(a,me,Ie):IY(Ie)&&n.onMessage(me,Ie)}});j.set(ve)}),au(j.clear)]),Pc.config({channels:{[_n]:{onReceive:(ve,Re)=>{Io(ve.element,"iframe").each(Ie=>{const Et=Ie.dom.contentWindow;Dt(Et)&&Et.postMessage(Re,H)})}}}})],Q=e7({id:d,header:g,body:h,footer:C,extraClasses:_,extraBehaviours:oe,extraStyles:T},x,i),me=BY(Q);return{dialog:Q,instanceApi:me}},FY=n=>{const s=n.shared;return{open:(i,d)=>{const g=()=>{ia.hide(T),d()},h=_o(cS({context:"any",name:"close-alert",text:"OK",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"cancel",n)),C=W8(),x=j8(g,s.providers),T=p(LN({lazySink:()=>s.getSink(),header:U8(C,x),body:Z8(i,s.providers),footer:A.some(Sk(G8([],[h.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[je(ih,g)],eventOrder:{}}));ia.show(T);const _=h.get(T);Nn.focus(_)}}},HY=n=>{const s=n.shared;return{open:(i,d)=>{const g=H=>{ia.hide(_),d(H)},h=_o(cS({context:"any",name:"yes",text:"Yes",primary:!0,buttonType:A.some("primary"),align:"end",enabled:!0,icon:A.none()},"submit",n)),C=cS({context:"any",name:"no",text:"No",primary:!1,buttonType:A.some("secondary"),align:"end",enabled:!0,icon:A.none()},"cancel",n),x=W8(),T=j8(()=>g(!1),s.providers),_=p(LN({lazySink:()=>s.getSink(),header:U8(x,T),body:Z8(i,s.providers),footer:A.some(Sk(G8([],[C,h.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[je(ih,()=>g(!1)),je(nS,()=>g(!0))],eventOrder:{}}));ia.show(_);const N=h.get(_);Nn.focus(N)}}},l7=(n,s)=>wl(zs("data",s,n)),u7=n=>gg(n,".tox-alert-dialog")||gg(n,".tox-confirm-dialog"),zY=(n,s,a,i)=>s&&a?[]:[Bs.config({contextual:{lazyContext:()=>A.some(Ar(ht.fromDom(n.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition",onHide:i},modes:["top"],lazyViewport:d=>Jg(n,d.element).map(h=>({bounds:Eb(h),optScrollEnv:A.some({currentScrollTop:h.element.dom.scrollTop,scrollElmTop:Ea(h.element).top})})).getOrThunk(()=>({bounds:za(),optScrollEnv:A.none()}))})],jN=n=>{const s=n.editor,a=oy(s),i=FY(n.backstages.dialog),d=HY(n.backstages.dialog),g=(Z,oe,le)=>{if(!Ut(oe)){if(oe.inline==="toolbar")return T(Z,n.backstages.popup.shared.anchors.inlineDialog(),le,oe);if(oe.inline==="bottom")return _(Z,n.backstages.popup.shared.anchors.inlineBottomDialog(),le,oe);if(oe.inline==="cursor")return T(Z,n.backstages.popup.shared.anchors.cursor(),le,oe)}return x(Z,le)},h=(Z,oe)=>C(Z,oe),C=(Z,oe)=>{const le=Q=>{const me=i7(Q,{closeWindow:()=>{ia.hide(me.dialog),oe(me.instanceApi)}},s,n.backstages.dialog);return ia.show(me.dialog),me.instanceApi};return Bb.openUrl(le,Z)},x=(Z,oe)=>{const le=(Q,me,ve)=>{const Re=me,Et=PY({dataValidator:ve,initialData:Re,internalDialog:Q},{redial:Bb.redial,closeWindow:()=>{ia.hide(Et.dialog),oe(Et.instanceApi)}},n.backstages.dialog);return ia.show(Et.dialog),Et.instanceApi.setData(Re),Et.instanceApi};return Bb.open(le,Z)},T=(Z,oe,le,Q)=>{const me=(ve,Re,Ie)=>{const Et=l7(Re,Ie),Je=kn(),ct=n.backstages.popup.shared.header.isPositionedAtTop(),at={dataValidator:Ie,initialData:Et,internalDialog:ve},fn=()=>Je.on(Qe=>{Zs.reposition(Qe),(!a||!ct)&&Bs.refresh(Qe)}),Jt=AS(at,{redial:Bb.redial,closeWindow:()=>{Je.on(Zs.hide),s.off("ResizeEditor",fn),s.off("ScrollWindow",Kn),Je.clear(),le(Jt.instanceApi)}},n.backstages.popup,Q.ariaAttrs,fn),Kn=()=>Jt.dialog.getSystem().broadcastOn([Dr()],{target:Jt.dialog.element}),gn=()=>Jt.dialog.getSystem().broadcastOn([Rd()],{target:Jt.dialog.element}),$n=p(Zs.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Q.persistent?{event:"doNotDismissYet"}:{},...ct?{}:{fireRepositionEventInstead:{}},inlineBehaviours:mt([On("window-manager-inline-events",[je(pm(),(Qe,pt)=>{Yn(Jt.dialog,ih)})]),...zY(s,a,ct,gn)]),isExtraPart:(Qe,pt)=>u7(pt)}));Je.set($n);const tn=()=>{const Qe=s.inline?Uc():ht.fromDom(s.getContainer()),pt=Ar(Qe);return A.some(pt)};return Zs.showWithinBounds($n,y(Jt.dialog),{anchor:oe},tn),(!a||!ct)&&(Bs.refresh($n),s.on("ResizeEditor",fn)),s.on("ScrollWindow",Kn),Jt.instanceApi.setData(Et),mn.focusIn(Jt.dialog),Jt.instanceApi};return Bb.open(me,Z)},_=(Z,oe,le,Q)=>{const me=(ve,Re,Ie)=>{const Et=l7(Re,Ie),Je=kn(),ct=n.backstages.popup.shared.header.isPositionedAtTop(),at={dataValidator:Ie,initialData:Et,internalDialog:ve},fn=()=>Je.on($n=>{Zs.reposition($n),Bs.refresh($n)}),Jt=AS(at,{redial:Bb.redial,closeWindow:()=>{Je.on(Zs.hide),s.off("ResizeEditor ScrollWindow ElementScroll",fn),Je.clear(),le(Jt.instanceApi)}},n.backstages.popup,Q.ariaAttrs,fn),Kn=p(Zs.sketch({lazySink:n.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:Q.persistent?{event:"doNotDismissYet"}:{},...ct?{}:{fireRepositionEventInstead:{}},inlineBehaviours:mt([On("window-manager-inline-events",[je(pm(),($n,tn)=>{Yn(Jt.dialog,ih)})]),Bs.config({contextual:{lazyContext:()=>A.some(Ar(ht.fromDom(s.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:$n=>Jg(s,$n.element).map(Qe=>({bounds:Eb(Qe),optScrollEnv:A.some({currentScrollTop:Qe.element.dom.scrollTop,scrollElmTop:Ea(Qe.element).top})})).getOrThunk(()=>({bounds:za(),optScrollEnv:A.none()}))})]),isExtraPart:($n,tn)=>u7(tn)}));Je.set(Kn);const gn=()=>n.backstages.popup.shared.getSink().toOptional().bind($n=>{const tn=Jg(s,$n.element),Qe=15,pt=tn.map(ln=>Eb(ln)).getOr(za()),Sn=Ar(ht.fromDom(s.getContentAreaContainer())),zn=um(Sn,pt);return A.some(Br(zn.x,zn.y,zn.width,zn.height-Qe))});return Zs.showWithinBounds(Kn,y(Jt.dialog),{anchor:oe},gn),Bs.refresh(Kn),s.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",fn),Jt.instanceApi.setData(Et),mn.focusIn(Jt.dialog),Jt.instanceApi};return Bb.open(me,Z)};return{open:g,openUrl:h,alert:(Z,oe)=>{i.open(Z,oe)},close:Z=>{Z.close()},confirm:(Z,oe)=>{d.open(Z,oe)}}},d7=n=>{IB(n),G$(n),KK(n)};var VY=()=>{$B.add("silver",n=>{d7(n);let s=()=>za();const{dialogs:a,popups:i,renderUI:d}=bY(n,{getPopupSinkBounds:()=>s()}),g=()=>{const _=d();return Jg(n,i.getMothership().element).each(H=>{s=()=>Eb(H)}),_};rZ.register(n,i.backstage.shared);const h=jN({editor:n,backstages:{popup:i.backstage,dialog:a.backstage}}),C=kn(),x=()=>mU(n,{backstage:i.backstage},i.getMothership(),C),T=()=>Io(ht.fromDom(n.getContainer()),".tox-promotion").map(_=>_.dom).getOrNull();return{renderUI:g,getWindowManagerImpl:se(h),getNotificationManagerImpl:x,getPromotionElement:T}})};VY()}()),pX}var vX;function KJ(){return vX||(vX=1,qJ()),hX}KJ();var yX={},CX={},xX;function YJ(){return xX||(xX=1,function(){var B=tinymce.util.Tools.resolve("tinymce.ModelManager");const Y=(l,m,p)=>p(l,m.prototype)?!0:l.constructor?.name===m.name,we=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&Y(l,String,(p,y)=>y.isPrototypeOf(p))?"string":m},xe=l=>m=>we(m)===l,Ne=l=>m=>typeof m===l,Ee=l=>m=>l===m,Ce=xe("string"),de=xe("object"),Oe=xe("array"),Ze=Ee(null),Ct=Ne("boolean"),Ke=Ee(void 0),Ot=l=>l==null,Ut=l=>!Ot(l),jt=Ne("function"),Dt=Ne("number"),qe=()=>{},En=(l,m)=>(...p)=>l(m.apply(null,p)),ft=(l,m)=>p=>l(m(p)),V=l=>()=>l,Ye=l=>l,ut=(l,m)=>l===m;function At(l,...m){return(...p)=>{const y=m.concat(p);return l.apply(null,y)}}const se=l=>m=>!l(m),nn=l=>()=>{throw new Error(l)},Wn=l=>l(),Yt=V(!1),X=V(!0);class ce{tag;value;static singletonNone=new ce(!1);constructor(m,p){this.tag=m,this.value=p}static some(m){return new ce(!0,m)}static none(){return ce.singletonNone}fold(m,p){return this.tag?p(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ce.some(m(this.value)):ce.none()}bind(m){return this.tag?m(this.value):ce.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ce.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Ut(m)?ce.some(m):ce.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Uo=Array.prototype.slice,dn=Array.prototype.indexOf,_t=Array.prototype.push,A=(l,m)=>dn.call(l,m),co=(l,m)=>A(l,m)>-1,it=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return!0}return!1},Ro=(l,m)=>{const p=[];for(let y=0;y<l;y++)p.push(m(y));return p},re=(l,m)=>{const p=l.length,y=new Array(p);for(let E=0;E<p;E++){const D=l[E];y[E]=m(D,E)}return y},ae=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];m(E,p)}},tt=(l,m)=>{for(let p=l.length-1;p>=0;p--){const y=l[p];m(y,p)}},St=(l,m)=>{const p=[],y=[];for(let E=0,D=l.length;E<D;E++){const I=l[E];(m(I,E)?p:y).push(I)}return{pass:p,fail:y}},wt=(l,m)=>{const p=[];for(let y=0,E=l.length;y<E;y++){const D=l[y];m(D,y)&&p.push(D)}return p},on=(l,m,p)=>(tt(l,(y,E)=>{p=m(p,y,E)}),p),pe=(l,m,p)=>(ae(l,(y,E)=>{p=m(p,y,E)}),p),Te=(l,m,p)=>{for(let y=0,E=l.length;y<E;y++){const D=l[y];if(m(D,y))return ce.some(D);if(p(D,y))break}return ce.none()},M=(l,m)=>Te(l,m,Yt),wn=(l,m)=>{for(let p=0,y=l.length;p<y;p++){const E=l[p];if(m(E,p))return ce.some(p)}return ce.none()},sn=l=>{const m=[];for(let p=0,y=l.length;p<y;++p){if(!Oe(l[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+l);_t.apply(m,l[p])}return m},Un=(l,m)=>sn(re(l,m)),Tt=(l,m)=>{for(let p=0,y=l.length;p<y;++p){const E=l[p];if(m(E,p)!==!0)return!1}return!0},rs=l=>{const m=Uo.call(l,0);return m.reverse(),m},Wt=(l,m)=>{const p={};for(let y=0,E=l.length;y<E;y++){const D=l[y];p[String(D)]=m(D,y)}return p},io=(l,m)=>{const p=Uo.call(l,0);return p.sort(m),p},hn=(l,m)=>m>=0&&m<l.length?ce.some(l[m]):ce.none(),Ae=l=>hn(l,0),nt=l=>hn(l,l.length-1),gt=(l,m)=>{for(let p=0;p<l.length;p++){const y=m(l[p],p);if(y.isSome())return y}return ce.none()},Xe=Object.keys,ao=Object.hasOwnProperty,Qn=(l,m)=>{const p=Xe(l);for(let y=0,E=p.length;y<E;y++){const D=p[y],I=l[D];m(I,D)}},Ho=(l,m)=>oi(l,(p,y)=>({k:y,v:m(p,y)})),oi=(l,m)=>{const p={};return Qn(l,(y,E)=>{const D=m(y,E);p[D.k]=D.v}),p},No=l=>(m,p)=>{l[p]=m},nl=(l,m,p,y)=>{Qn(l,(E,D)=>{(m(E,D)?p:y)(E,D)})},Gm=(l,m)=>{const p={};return nl(l,m,No(p),qe),p},va=(l,m)=>{const p=[];return Qn(l,(y,E)=>{p.push(m(y,E))}),p},wo=l=>va(l,Ye),Qa=(l,m)=>gs(l,m)?ce.from(l[m]):ce.none(),gs=(l,m)=>ao.call(l,m),Ls=(l,m)=>gs(l,m)&&l[m]!==void 0&&l[m]!==null,Su=l=>{for(const m in l)if(ao.call(l,m))return!1;return!0},Xr={generate:l=>{if(!Oe(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],p={};return ae(l,(y,E)=>{const D=Xe(y);if(D.length!==1)throw new Error("one and only one name per case");const I=D[0],U=y[I];if(p[I]!==void 0)throw new Error("duplicate key detected:"+I);if(I==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Oe(U))throw new Error("case arguments must be an array");m.push(I),p[I]=(...K)=>{const ue=K.length;if(ue!==U.length)throw new Error("Wrong number of arguments to case "+I+". Expected "+U.length+" ("+U+"), got "+ue);return{fold:(...st)=>{if(st.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+st.length);return st[E].apply(null,K)},match:st=>{const It=Xe(st);if(m.length!==It.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+It.join(","));if(!Tt(m,cn=>co(It,cn)))throw new Error("Not all branches were specified when using match. Specified: "+It.join(", ")+`
Required: `+m.join(", "));return st[I].apply(null,K)},log:st=>{console.log(st,{constructors:m,constructor:I,params:K})}}}}),p}},Gs=l=>{let m=l;return{get:()=>m,set:E=>{m=E}}},hr=l=>l.slice(0).sort(),is=(l,m)=>{throw new Error("All required keys ("+hr(l).join(", ")+") were not specified. Specified keys were: "+hr(m).join(", ")+".")},dc=l=>{throw new Error("Unsupported keys for object: "+hr(l).join(", "))},Ja=(l,m)=>{if(!Oe(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");ae(m,p=>{if(!Ce(p))throw new Error("The value "+p+" in the "+l+" fields was not a string.")})},en=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+hr(l).join(", ")+") were not.")},ho=l=>{const m=hr(l);M(m,(y,E)=>E<m.length-1&&y===m[E+1]).each(y=>{throw new Error("The field: "+y+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},qn=(l,m)=>mc(l,m,{validate:jt,label:"function"}),mc=(l,m,p)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Ja("required",m),ho(m),y=>{const E=Xe(y);Tt(m,U=>co(E,U))||is(m,E),l(m,E);const I=wt(m,U=>!p.validate(y[U],U));return I.length>0&&en(I,p.label),y}},Ia=(l,m)=>{const p=wt(m,y=>!co(l,y));p.length>0&&dc(p)},Zt=l=>qn(Ia,l),$l=l=>{const m=D=>D(l),p=V(l),y=()=>E,E={tag:!0,inner:l,fold:(D,I)=>I(l),isValue:X,isError:Yt,map:D=>fc.value(D(l)),mapError:y,bind:m,exists:m,forall:m,getOr:p,or:y,getOrThunk:p,orThunk:y,getOrDie:p,each:D=>{D(l)},toOptional:()=>ce.some(l)};return E},ls=l=>{const m=()=>p,p={tag:!1,inner:l,fold:(y,E)=>y(l),isValue:Yt,isError:X,map:m,mapError:y=>fc.error(y(l)),bind:m,exists:Yt,forall:X,getOr:Ye,or:Ye,getOrThunk:Wn,orThunk:Wn,getOrDie:nn(String(l)),each:qe,toOptional:ce.none};return p},fc={value:$l,error:ls,fromOption:(l,m)=>l.fold(()=>ls(m),$l)},La=typeof window<"u"?window:Function("return this;")(),qo=l=>{const m=l.replace(/\./g,"-");return{resolve:y=>m+"-"+y}},Pn=(l,m,p=ut)=>l.exists(y=>p(y,m)),Ko=l=>{const m=[],p=y=>{m.push(y)};for(let y=0;y<l.length;y++)l[y].each(p);return m},ld=(l,m)=>l!=null?m(l):ce.none(),wu=(l,m)=>l?ce.some(m):ce.none(),si=(l,m)=>{let p=m??La;for(let y=0;y<l.length&&p!==void 0&&p!==null;++y)p=p[l[y]];return p},rn=(l,m)=>{const p=l.split(".");return si(p,m)},Fa=l=>{const m=Gs(ce.none()),p=()=>m.get().each(l);return{clear:()=>{p(),m.set(ce.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:U=>{p(),m.set(ce.some(U))}}},Mr=()=>{const l=Fa(qe);return{...l,on:p=>l.get().each(p)}},qm=(l,m)=>l.substring(m),Tr=(l,m,p)=>m===""||l.length>=m.length&&l.substr(p,p+m.length)===m,tm=(l,m)=>Ll(l,m)?qm(l,m.length):l,as=(l,m,p=0,y)=>{const E=l.indexOf(m,p);return E!==-1?Ke(y)?!0:E+m.length<=y:!1},Ll=(l,m)=>Tr(l,m,0),ud=(l,m)=>Tr(l,m,l.length-m.length),$c=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),rr=l=>l.length>0,Fl=l=>{const m=parseFloat(l);return isNaN(m)?ce.none():ce.some(m)},Eu=(l,m)=>{let p=null;const y=()=>{Ze(p)||(clearTimeout(p),p=null)};return{cancel:y,throttle:(...D)=>{y(),p=setTimeout(()=>{p=null,l.apply(null,D)},m)}}},Mt=l=>{let m=!1,p;return(...y)=>(m||(m=!0,p=l.apply(null,y)),p)},ec=" ",Tu=["tfoot","thead","tbody","colgroup"],Di=l=>co(Tu,l),jo=(l,m)=>({rows:l,columns:m}),dd=(l,m)=>({row:l,column:m}),gc=(l,m,p)=>({element:l,rowspan:m,colspan:p}),er=(l,m,p,y)=>({element:l,rowspan:m,colspan:p,isNew:y}),Ri=(l,m,p,y,E,D)=>({element:l,rowspan:m,colspan:p,row:y,column:E,isLocked:D}),md=(l,m,p)=>({element:l,cells:m,section:p}),Ha=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Lr=(l,m,p)=>({element:l,isNew:m,isLocked:p}),ri=(l,m,p,y)=>({element:l,cells:m,section:p,isNew:y}),Fr=(l,m,p,y)=>({startRow:l,startCol:m,finishRow:p,finishCol:y}),ph=(l,m,p)=>({element:l,colspan:m,column:p}),nm=(l,m)=>({element:l,columns:m}),Ic=(l,m,p)=>{const y=l.cells,E=y.slice(0,m),D=y.slice(m),I=E.concat(p).concat(D);return Km(l,I)},Ni=(l,m,p)=>Ic(l,m,[p]),sl=(l,m,p)=>{const y=l.cells;y[m]=p},Km=(l,m)=>ri(l.element,m,l.section,l.isNew),Ds=(l,m)=>{const p=l.cells,y=re(p,m);return ri(l.element,y,l.section,l.isNew)},kn=(l,m)=>l.cells[m],Qr=(l,m)=>kn(l,m).element,Jr=l=>l.cells.length,Rs=l=>{const m=St(l,p=>p.section==="colgroup");return{rows:m.fail,cols:m.pass}},om=(l,m,p)=>{const y=re(l.cells,p);return ri(m(l.element),y,l.section,!0)},Hl=(l,m)=>{const y=(m||document).createElement("div");if(y.innerHTML=l,!y.hasChildNodes()||y.childNodes.length>1){const E="HTML does not have a single root node";throw console.error(E,l),new Error(E)}return ai(y.childNodes[0])},hs=(l,m)=>{const y=(m||document).createElement(l);return ai(y)},rl=(l,m)=>{const y=(m||document).createTextNode(l);return ai(y)},ai=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},Rt={fromHtml:Hl,fromTag:hs,fromText:rl,fromDom:ai,fromPoint:(l,m,p)=>ce.from(l.dom.elementFromPoint(m,p)).map(ai)},al=(l,m)=>{const p=l.document.createRange();return p.selectNode(m.dom),p},ya=(l,m)=>{const p=l.document.createRange();return Lc(p,m),p},Lc=(l,m)=>l.selectNodeContents(m.dom),Fs=(l,m)=>{m.fold(p=>{l.setStartBefore(p.dom)},(p,y)=>{l.setStart(p.dom,y)},p=>{l.setStartAfter(p.dom)})},og=(l,m)=>{m.fold(p=>{l.setEndBefore(p.dom)},(p,y)=>{l.setEnd(p.dom,y)},p=>{l.setEndAfter(p.dom)})},tc=(l,m,p)=>{const y=l.document.createRange();return Fs(y,m),og(y,p),y},Fc=(l,m,p,y,E)=>{const D=l.document.createRange();return D.setStart(m.dom,p),D.setEnd(y.dom,E),D},Ym=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),sg=l=>{const m=l.getClientRects(),p=m.length>0?m[0]:l.getBoundingClientRect();return p.width>0||p.height>0?ce.some(p).map(Ym):ce.none()},cl=Xr.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),rg=(l,m,p)=>m(Rt.fromDom(p.startContainer),p.startOffset,Rt.fromDom(p.endContainer),p.endOffset),ku=(l,m)=>m.match({domRange:p=>({ltr:V(p),rtl:ce.none}),relative:(p,y)=>({ltr:Mt(()=>tc(l,p,y)),rtl:Mt(()=>ce.some(tc(l,y,p)))}),exact:(p,y,E,D)=>({ltr:Mt(()=>Fc(l,p,y,E,D)),rtl:Mt(()=>ce.some(Fc(l,E,D,p,y)))})}),il=(l,m)=>{const p=m.ltr();return p.collapsed?m.rtl().filter(E=>E.collapsed===!1).map(E=>cl.rtl(Rt.fromDom(E.endContainer),E.endOffset,Rt.fromDom(E.startContainer),E.startOffset)).getOrThunk(()=>rg(l,cl.ltr,p)):rg(l,cl.ltr,p)},Au=(l,m)=>{const p=ku(l,m);return il(l,p)},ht=(l,m)=>Au(l,m).match({ltr:(y,E,D,I)=>{const U=l.document.createRange();return U.setStart(y.dom,E),U.setEnd(D.dom,I),U},rtl:(y,E,D,I)=>{const U=l.document.createRange();return U.setStart(D.dom,I),U.setEnd(y.dom,E),U}});cl.ltr,cl.rtl;const zl=8,sm=9,ci=11,hc=1,fd=3,Ca=(l,m)=>{const p=l.dom;if(p.nodeType!==hc)return!1;{const y=p;if(y.matches!==void 0)return y.matches(m);if(y.msMatchesSelector!==void 0)return y.msMatchesSelector(m);if(y.webkitMatchesSelector!==void 0)return y.webkitMatchesSelector(m);if(y.mozMatchesSelector!==void 0)return y.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},Mi=l=>l.nodeType!==hc&&l.nodeType!==sm&&l.nodeType!==ci||l.childElementCount===0,Vl=(l,m)=>{const p=m===void 0?document:m.dom;return Mi(p)?[]:re(p.querySelectorAll(l),Rt.fromDom)},ll=(l,m)=>{const p=m===void 0?document:m.dom;return Mi(p)?ce.none():ce.from(p.querySelector(l)).map(Rt.fromDom)},Wo=(l,m)=>l.dom===m.dom,gd=(l,m)=>{const p=l.dom,y=m.dom;return p===y?!1:p.contains(y)},$=Ca,G=(l,m,p,y)=>{const E=l.isiOS()&&/ipad/i.test(p)===!0,D=l.isiOS()&&!E,I=l.isiOS()||l.isAndroid(),U=I||y("(pointer:coarse)"),K=E||!D&&I&&y("(min-device-width:768px)"),ue=D||I&&!K,ke=m.isSafari()&&l.isiOS()&&/safari/i.test(p)===!1,st=!ue&&!K&&!ke;return{isiPad:V(E),isiPhone:V(D),isTablet:V(K),isPhone:V(ue),isTouch:V(U),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:V(ke),isDesktop:V(st)}},ie=(l,m)=>{for(let p=0;p<l.length;p++){const y=l[p];if(y.test(m))return y}},ze=(l,m)=>{const p=ie(l,m);if(!p)return{major:0,minor:0};const y=E=>Number(m.replace(p,"$"+E));return Zo(y(1),y(2))},Qt=(l,m)=>{const p=String(m).toLowerCase();return l.length===0?oo():ze(l,p)},oo=()=>Zo(0,0),Zo=(l,m)=>({major:l,minor:m}),kr={nu:Zo,detect:Qt,unknown:oo},ea=(l,m)=>gt(m.brands,p=>{const y=p.brand.toLowerCase();return M(l,E=>y===E.brand?.toLowerCase()).map(E=>({current:E.name,version:kr.nu(parseInt(p.version,10),0)}))}),nc=(l,m)=>{const p=String(m).toLowerCase();return M(l,y=>y.search(p))},L=(l,m)=>nc(l,m).map(p=>{const y=kr.detect(p.versionRegexes,m);return{current:p.name,version:y}}),te=(l,m)=>nc(l,m).map(p=>{const y=kr.detect(p.versionRegexes,m);return{current:p.name,version:y}}),he=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,$e=l=>m=>as(m,l),bt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>as(l,"edge/")&&as(l,"chrome")&&as(l,"safari")&&as(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,he],search:l=>as(l,"chrome")&&!as(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>as(l,"msie")||as(l,"trident")},{name:"Opera",versionRegexes:[he,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:$e("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:$e("firefox")},{name:"Safari",versionRegexes:[he,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(as(l,"safari")||as(l,"mobile/"))&&as(l,"applewebkit")}],Kt=[{name:"Windows",search:$e("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>as(l,"iphone")||as(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:$e("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:$e("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:$e("linux"),versionRegexes:[]},{name:"Solaris",search:$e("sunos"),versionRegexes:[]},{name:"FreeBSD",search:$e("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:$e("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Hn={browsers:V(bt),oses:V(Kt)},ko="Edge",uo="Chromium",xa="IE",qs="Opera",_u="Firefox",Xm="Safari",rm=()=>Pi({current:void 0,version:kr.unknown()}),Pi=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isEdge:y(ko),isChromium:y(uo),isIE:y(xa),isOpera:y(qs),isFirefox:y(_u),isSafari:y(Xm)}},Qb={unknown:rm,nu:Pi},Jb="Windows",Vp="iOS",Bi="Android",e0="Linux",t0="macOS",Zy="Solaris",Ul="FreeBSD",Gy="ChromeOS",qy=()=>Up({current:void 0,version:kr.unknown()}),Up=l=>{const m=l.current,p=l.version,y=E=>()=>m===E;return{current:m,version:p,isWindows:y(Jb),isiOS:y(Vp),isAndroid:y(Bi),isMacOS:y(t0),isLinux:y(e0),isSolaris:y(Zy),isFreeBSD:y(Ul),isChromeOS:y(Gy)}},jp={unknown:qy,nu:Up},Ky={detect:(l,m,p)=>{const y=Hn.browsers(),E=Hn.oses(),D=m.bind(K=>ea(y,K)).orThunk(()=>L(y,l)).fold(Qb.unknown,Qb.nu),I=te(E,l).fold(jp.unknown,jp.nu),U=G(I,D,l,p);return{browser:D,os:I,deviceType:U}}},Wp=l=>window.matchMedia(l).matches;let jl=Mt(()=>Ky.detect(window.navigator.userAgent,ce.from(window.navigator.userAgentData),Wp));const ii=()=>jl(),am=(l,m)=>rn(l,m),Yy=(l,m)=>{const p=am(l,m);if(p==null)throw new Error(l+" not available on this browser");return p},po=Object.getPrototypeOf,Xy=l=>Yy("HTMLElement",l),bh=l=>{const m=rn("ownerDocument.defaultView",l);return de(l)&&(Xy(m).prototype.isPrototypeOf(l)||/^HTML\w*Element$/.test(po(l).constructor.name))},tr=l=>l.dom.nodeName.toLowerCase(),LS=l=>l.dom.nodeType,Zp=l=>m=>LS(m)===l,FS=l=>LS(l)===zl||tr(l)==="#comment",n0=l=>Ks(l)&&bh(l.dom),Ks=Zp(hc),cm=Zp(fd),Qy=Zp(sm),lt=Zp(ci),Hc=l=>m=>Ks(m)&&tr(m)===l,ag=l=>Rt.fromDom(l.dom.ownerDocument),$i=l=>Qy(l)?l:ag(l),Qm=l=>Rt.fromDom($i(l).dom.documentElement),Gp=l=>Rt.fromDom($i(l).dom.defaultView),ne=l=>ce.from(l.dom.parentNode).map(Rt.fromDom),pc=l=>ce.from(l.dom.parentElement).map(Rt.fromDom),hd=(l,m)=>{const p=jt(m)?m:Yt;let y=l.dom;const E=[];for(;y.parentNode!==null&&y.parentNode!==void 0;){const D=y.parentNode,I=Rt.fromDom(D);if(E.push(I),p(I)===!0)break;y=D}return E},qp=l=>ce.from(l.dom.previousSibling).map(Rt.fromDom),Jm=l=>ce.from(l.dom.nextSibling).map(Rt.fromDom),Sa=l=>re(l.dom.childNodes,Rt.fromDom),bc=(l,m)=>{const p=l.dom.childNodes;return ce.from(p[m]).map(Rt.fromDom)},Kp=l=>bc(l,0),Yp=(l,m,p,y)=>{const D=ag(l).dom.createRange();return D.setStart(l.dom,m),D.setEnd(p.dom,y),D},cg=(l,m,p,y)=>{const E=Yp(l,m,p,y),D=Wo(l,p)&&m===y;return E.collapsed&&!D},vc=l=>lt(l)&&Ut(l.dom.host),Xp=l=>Rt.fromDom(l.dom.getRootNode()),Wl=l=>vc(l)?l:Rt.fromDom($i(l).dom.body),ig=l=>{const m=Xp(l);return vc(m)?ce.some(m):ce.none()},Qp=l=>Rt.fromDom(l.dom.host),zc=l=>{if(Ut(l.target)){const m=Rt.fromDom(l.target);if(Ks(m)&&Jp(m)&&l.composed&&l.composedPath){const p=l.composedPath();if(p)return Ae(p)}}return ce.from(l.target)},Jp=l=>Ut(l.dom.shadowRoot),ul=(l,m,p,y,E,D,I)=>({target:l,x:m,y:p,stop:y,prevent:E,kill:D,raw:I}),pd=l=>{const m=Rt.fromDom(zc(l).getOr(l.target)),p=()=>l.stopPropagation(),y=()=>l.preventDefault(),E=En(y,p);return ul(m,l.clientX,l.clientY,p,y,E,l)},no=(l,m)=>p=>{l(p)&&m(pd(p))},oc=(l,m,p,y,E)=>{const D=no(p,y);return l.dom.addEventListener(m,D,E),{unbind:At(o0,l,m,D,E)}},ef=(l,m,p,y)=>oc(l,m,p,y,!1),o0=(l,m,p,y)=>{l.dom.removeEventListener(m,p,y)},jn=X,Ou=(l,m,p)=>ef(l,m,jn,p),pr=pd,dl=(l,m)=>{ne(l).each(y=>{y.dom.insertBefore(m.dom,l.dom)})},ml=(l,m)=>{Jm(l).fold(()=>{ne(l).each(E=>{Ao(E,m)})},y=>{dl(y,m)})},Hs=(l,m)=>{Kp(l).fold(()=>{Ao(l,m)},y=>{l.dom.insertBefore(m.dom,y.dom)})},Ao=(l,m)=>{l.dom.appendChild(m.dom)},Jy=(l,m,p)=>{bc(l,p).fold(()=>{Ao(l,m)},y=>{dl(y,m)})},e2=(l,m)=>{dl(l,m),Ao(m,l)},br=(l,m)=>{ae(m,(p,y)=>{const E=y===0?l:m[y-1];ml(E,p)})},Ii=(l,m)=>{ae(m,p=>{Ao(l,p)})},Li=(l,m,p)=>{if(Ce(p)||Ct(p)||Dt(p))l.setAttribute(m,p+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",p,":: Element ",l),new Error("Attribute value was not simple")},vr=(l,m,p)=>{Li(l.dom,m,p)},fl=(l,m)=>{const p=l.dom;Qn(m,(y,E)=>{Li(p,E,y)})},sc=(l,m)=>{Qn(m,(p,y)=>{p.fold(()=>{Mo(l,y)},E=>{Li(l.dom,y,E)})})},Vc=(l,m)=>{const p=l.dom.getAttribute(m);return p===null?void 0:p},wa=(l,m)=>ce.from(Vc(l,m)),Mo=(l,m)=>{l.dom.removeAttribute(m)},li=l=>pe(l.dom.attributes,(m,p)=>(m[p.name]=p.value,m),{}),rc=l=>{l.dom.textContent="",ae(Sa(l),m=>{ta(m)})},ta=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Hr=l=>{const m=Sa(l);m.length>0&&br(l,m),ta(l)},Ns=(l,m)=>Rt.fromDom(l.dom.cloneNode(m)),Fi=l=>Ns(l,!1),zr=l=>Ns(l,!0),ar=(l,m)=>{const p=Rt.fromTag(m),y=li(l);return fl(p,y),p},bd=(l,m)=>{const p=ar(l,m),y=Sa(zr(l));return Ii(p,y),p},e1=(l,m)=>{const p=ar(l,m);ml(l,p);const y=Sa(l);return Ii(p,y),ta(l),p},vh=(l,m)=>{const y=document.createElement("div");return y.innerHTML=l,Sa(Rt.fromDom(y))},Vr=l=>re(l,Rt.fromDom),t1=l=>l.dom.innerHTML,s0=l=>{const m=Rt.fromTag("div"),p=Rt.fromDom(l.dom.cloneNode(!0));return Ao(m,p),t1(m)},im=l=>l.style!==void 0&&jt(l.style.getPropertyValue),Cn=l=>{const m=cm(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const p=m.ownerDocument;return ig(Rt.fromDom(m)).fold(()=>p.body.contains(m),ft(Cn,Qp))},n1=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return Rt.fromDom(m)},Pr=(l,m,p)=>{if(!Ce(p))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",p,":: Element ",l),new Error("CSS value must be a string: "+p);im(l)&&l.style.setProperty(m,p)},na=(l,m)=>{im(l)&&l.style.removeProperty(m)},oa=(l,m,p)=>{const y=l.dom;Pr(y,m,p)},ps=(l,m)=>{const p=l.dom;Qn(m,(y,E)=>{Pr(p,E,y)})},vd=(l,m)=>{const p=l.dom,E=window.getComputedStyle(p).getPropertyValue(m);return E===""&&!Cn(l)?yh(p,m):E},yh=(l,m)=>im(l)?l.style.getPropertyValue(m):"",ui=(l,m)=>{const p=l.dom,y=yh(p,m);return ce.from(y).filter(E=>E.length>0)},gl=(l,m)=>{const p=l.dom;na(p,m),Pn(wa(l,"style").map($c),"")&&Mo(l,"style")},lg=(l,m)=>{const p=l.dom,y=m.dom;im(p)&&im(y)&&(y.style.cssText=p.style.cssText)},Ch=(l,m)=>{const p=(U,K)=>{if(!Dt(K)&&!K.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+K);const ue=U.dom;im(ue)&&(ue.style[l]=K+"px")},y=U=>{const K=m(U);if(K<=0||K===null){const ue=vd(U,l);return parseFloat(ue)||0}return K},E=y,D=(U,K)=>pe(K,(ue,ke)=>{const st=vd(U,ke),It=st===void 0?0:parseInt(st,10);return isNaN(It)?ue:ue+It},0);return{set:p,get:y,getOuter:E,aggregate:D,max:(U,K,ue)=>{const ke=D(U,ue);return K>ke?K-ke:0}}},ug=(l,m)=>Fl(l).getOr(m),Zl=(l,m,p)=>ug(vd(l,m),p),Hi=(l,m,p,y)=>{const E=Zl(l,`padding-${p}`,0),D=Zl(l,`padding-${y}`,0),I=Zl(l,`border-${p}-width`,0),U=Zl(l,`border-${y}-width`,0);return m-E-D-I-U},o1=(l,m)=>{const p=l.dom,y=p.getBoundingClientRect().width||p.offsetWidth;return Hi(l,y,"left","right")},da=l=>Zl(l,"height",l.dom.offsetHeight),di=l=>Zl(l,"width",l.dom.offsetWidth),Gl=l=>o1(l),yo=Ch("height",l=>{const m=l.dom;return Cn(l)?m.getBoundingClientRect().height:m.offsetHeight}),Uc=l=>yo.get(l),r0=l=>yo.getOuter(l),dg=da,mi=Ch("width",l=>{const m=l.dom;return Cn(l)?m.getBoundingClientRect().width:m.offsetWidth}),Tn=l=>mi.get(l),Ts=l=>mi.getOuter(l),sa=Gl,bs=di,fi=(l,m)=>({left:l,top:m,translate:(y,E)=>fi(l+y,m+E)}),ws=fi,cr=l=>{const m=l.getBoundingClientRect();return ws(m.left,m.top)},tf=(l,m)=>l!==void 0?l:m!==void 0?m:0,Jn=l=>{const m=l.dom.ownerDocument,p=m.body,y=m.defaultView,E=m.documentElement;if(p===l.dom)return ws(p.offsetLeft,p.offsetTop);const D=tf(y?.pageYOffset,E.scrollTop),I=tf(y?.pageXOffset,E.scrollLeft),U=tf(E.clientTop,p.clientTop),K=tf(E.clientLeft,p.clientLeft);return zi(l).translate(I-K,D-U)},zi=l=>{const m=l.dom,y=m.ownerDocument.body;return y===m?ws(y.offsetLeft,y.offsetTop):Cn(l)?cr(m):ws(0,0)},Xo=l=>{const m=l!==void 0?l.dom:document,p=m.body.scrollLeft||m.documentElement.scrollLeft,y=m.body.scrollTop||m.documentElement.scrollTop;return ws(p,y)},yc=(l,m,p)=>{const E=(p!==void 0?p.dom:document).defaultView;E&&E.scrollBy(l,m)},Cr=((l,m)=>{const p=D=>{if(!l(D))throw new Error("Can only get "+m+" value of a "+m+" node");return y(D).getOr("")},y=D=>l(D)?ce.from(D.dom.nodeValue):ce.none();return{get:p,getOption:y,set:(D,I)=>{if(!l(D))throw new Error("Can only set raw "+m+" value of a "+m+" node");D.dom.nodeValue=I}}})(cm,"text"),ql=l=>Cr.get(l),nf=l=>Cr.getOption(l),Du=(l,m)=>Cr.set(l,m),yd=(l,m)=>p=>Cd(p)==="rtl"?m:l,Cd=l=>vd(l,"direction")==="rtl"?"rtl":"ltr",ma=(l,m)=>{const p=Vc(l,m);return p===void 0||p===""?[]:p.split(" ")},Ru=(l,m,p)=>{const E=ma(l,m).concat([p]);return vr(l,m,E.join(" ")),!0},t2=(l,m,p)=>{const y=wt(ma(l,m),E=>E!==p);return y.length>0?vr(l,m,y.join(" ")):Mo(l,m),!1};var xd=(l,m,p,y,E)=>l(p,y)?ce.some(p):jt(E)&&E(p)?ce.none():m(p,y,E);const $o=(l,m,p)=>{let y=l.dom;const E=jt(p)?p:Yt;for(;y.parentNode;){y=y.parentNode;const D=Rt.fromDom(y);if(m(D))return ce.some(D);if(E(D))break}return ce.none()},s1=(l,m,p)=>xd((E,D)=>D(E),$o,l,m,p),of=(l,m)=>{const p=E=>m(Rt.fromDom(E));return M(l.dom.childNodes,p).map(Rt.fromDom)},Ea=(l,m)=>{const p=y=>{for(let E=0;E<y.childNodes.length;E++){const D=Rt.fromDom(y.childNodes[E]);if(m(D))return ce.some(D);const I=p(y.childNodes[E]);if(I.isSome())return I}return ce.none()};return p(l.dom)},Cc=(l,m,p)=>$o(l,y=>Ca(y,m),p),Vs=(l,m)=>of(l,p=>Ca(p,m)),Nu=(l,m)=>ll(m,l),ir=(l,m,p)=>xd((E,D)=>Ca(E,D),Cc,l,m,p),sf=l=>l.dom.classList!==void 0,xh=l=>ma(l,"class"),r1=(l,m)=>Ru(l,"class",m),HS=(l,m)=>t2(l,"class",m),hl=(l,m)=>{sf(l)?l.dom.classList.add(m):r1(l,m)},n2=l=>{(sf(l)?l.dom.classList:xh(l)).length===0&&Mo(l,"class")},a1=(l,m)=>{sf(l)?l.dom.classList.remove(m):HS(l,m),n2(l)},pl=(l,m)=>sf(l)&&l.dom.classList.contains(m),a0=(l,m)=>{ae(m,p=>{a1(l,p)})},rf=l=>ir(l,"[contenteditable]"),mg=(l,m=!1)=>Cn(l)?l.dom.isContentEditable:rf(l).fold(V(m),p=>fg(p)==="true"),fg=l=>l.dom.contentEditable,c1=l=>m=>{hl(m,l)},c0=l=>m=>{a0(m,l)},Vi=(l,m,p)=>wt(hd(l,p),m),o2=(l,m)=>wt(Sa(l),m),Sd=(l,m)=>{let p=[];return ae(Sa(l),y=>{m(y)&&(p=p.concat([y])),p=p.concat(Sd(y,m))}),p},Io=(l,m,p)=>Vi(l,y=>Ca(y,m),p),Ta=(l,m)=>o2(l,p=>Ca(p,m)),Kl=(l,m)=>Vl(m,l),i1=(l,m,p,y)=>({parent:l,children:m,element:p,index:y}),wd=l=>ne(l).bind(m=>{const p=Sa(m);return l1(p,l).map(y=>i1(m,p,l,y))}),l1=(l,m)=>wn(l,At(Wo,m)),i0=(l,m,p)=>$o(l,m,p).isSome(),Yl=l=>tr(l)==="img"?1:nf(l).fold(()=>Sa(l).length,m=>m.length),Xl=l=>nf(l).filter(m=>m.trim().length!==0||m.indexOf(ec)>-1).isSome(),Go=l=>n0(l)&&Vc(l,"contenteditable")==="false",l0=["img","br"],Ms=l=>Xl(l)||co(l0,tr(l))||Go(l),af=l=>Ea(l,Ms),lr=l=>Ql(l,Ms),Ql=(l,m)=>{const p=y=>{const E=Sa(y);for(let D=E.length-1;D>=0;D--){const I=E[D];if(m(I))return ce.some(I);const U=p(I);if(U.isSome())return U}return ce.none()};return p(l)},Mu={create:(l,m,p,y)=>({start:l,soffset:m,finish:p,foffset:y})},Sh=Xr.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),u1=(l,m,p,y)=>l.fold(m,p,y),d1=l=>l.fold(Ye,Ye,Ye),s2=Sh.before,xc=Sh.on,bl=Sh.after,ur={before:s2,on:xc,after:bl,cata:u1,getStart:d1},Ur=Xr.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),wh=l=>Ur.exact(l.start,l.soffset,l.finish,l.foffset),gg=l=>l.match({domRange:m=>Rt.fromDom(m.startContainer),relative:(m,p)=>ur.getStart(m),exact:(m,p,y,E)=>m}),Eh=Ur.domRange,u0=Ur.relative,Ui=Ur.exact,zS=l=>{const m=gg(l);return Gp(m)},w=Mu.create,k={domRange:Eh,relative:u0,exact:Ui,exactFromRange:wh,getWin:zS,range:w},F=(l,m,p)=>ce.from(l.caretPositionFromPoint?.(m,p)).bind(y=>{if(y.offsetNode===null)return ce.none();const E=l.createRange();return E.setStart(y.offsetNode,y.offset),E.collapse(),ce.some(E)}),q=(l,m,p)=>ce.from(l.caretRangeFromPoint?.(m,p)),ge=(l,m,p)=>l.caretPositionFromPoint?F(l,m,p):l.caretRangeFromPoint?q(l,m,p):ce.none(),Fe=(l,m,p)=>{const y=l.document;return ge(y,m,p).map(E=>Mu.create(Rt.fromDom(E.startContainer),E.startOffset,Rt.fromDom(E.endContainer),E.endOffset))},xt=(l,m)=>{const p=tr(l);return p==="input"?ur.after(l):co(["br","img"],p)?m===0?ur.before(l):ur.after(l):ur.on(l,m)},an=(l,m)=>{const p=l.fold(ur.before,xt,ur.after),y=m.fold(ur.before,xt,ur.after);return k.relative(p,y)},In=(l,m,p,y)=>{const E=xt(l,m),D=xt(p,y);return k.relative(E,D)},Gn=l=>ce.from(l.getSelection()),cs=(l,m)=>{Gn(l).each(p=>{p.removeAllRanges(),p.addRange(m)})},ks=(l,m,p,y,E)=>{const D=Fc(l,m,p,y,E);cs(l,D)},dr=(l,m,p,y,E,D)=>{m.collapse(p.dom,y),m.extend(E.dom,D)},jc=(l,m)=>Au(l,m).match({ltr:(p,y,E,D)=>{ks(l,p,y,E,D)},rtl:(p,y,E,D)=>{Gn(l).each(I=>{if(I.setBaseAndExtent)I.setBaseAndExtent(p.dom,y,E.dom,D);else if(I.extend)try{dr(l,I,p,y,E,D)}catch{ks(l,E,D,p,y)}else ks(l,E,D,p,y)})}}),vl=(l,m,p,y,E)=>{const D=In(m,p,y,E);jc(l,D)},Pu=(l,m,p)=>{const y=an(m,p);jc(l,y)},ji=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),p=l.getRangeAt(l.rangeCount-1);return ce.some(Mu.create(Rt.fromDom(m.startContainer),m.startOffset,Rt.fromDom(p.endContainer),p.endOffset))}else return ce.none()},m1=l=>{if(l.anchorNode===null||l.focusNode===null)return ji(l);{const m=Rt.fromDom(l.anchorNode),p=Rt.fromDom(l.focusNode);return cg(m,l.anchorOffset,p,l.focusOffset)?ce.some(Mu.create(m,l.anchorOffset,p,l.focusOffset)):ji(l)}},cf=(l,m,p=!0)=>{const E=(p?ya:al)(l,m);cs(l,E)},hg=l=>Gn(l).filter(m=>m.rangeCount>0).bind(m1),pg=l=>hg(l).map(m=>k.exact(m.start,m.soffset,m.finish,m.foffset)),bg=(l,m)=>{const p=ht(l,m);return sg(p)},lf=(l,m,p)=>Fe(l,m,p),Th=l=>{Gn(l).each(m=>m.removeAllRanges())},r2={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},a2=(()=>{const l="[0-9]+",p="[eE]"+("[+-]?"+l),y="\\.",E=U=>`(?:${U})?`,I=`[+-]?(?:${["Infinity",l+y+E(l)+E(p),y+l+E(p),l+E(p)].join("|")})`;return new RegExp(`^(${I})(.*)$`)})(),Co=(l,m)=>it(m,p=>it(r2[p],y=>l===y)),Us=(l,m)=>ce.from(a2.exec(l)).bind(y=>{const E=Number(y[1]),D=y[2];return Co(D,m)?ce.some({value:E,unit:D}):ce.none()}),Ys=l=>re(l,V(0)),ka=(l,m,p,y,E)=>E(l.slice(0,m)).concat(y).concat(E(l.slice(p))),kh=l=>(m,p,y,E)=>{if(l(y)){const D=Math.max(E,m[p]-Math.abs(y)),I=Math.abs(D-m[p]);return y>=0?I:-I}else return y},vg=kh(l=>l<0),Ah=kh(X),_h=()=>{const l=(U,K,ue,ke,st)=>{const It=vg(U,K,ke,st);return ka(U,K,ue+1,[It,0],Ys)},m=(U,K,ue,ke)=>{const st=(100+ue)/100,It=Math.max(ke,(U[K]+ue)/st);return re(U,(Bt,cn)=>(cn===K?It:Bt/st)-Bt)},p=(U,K,ue,ke,st,It)=>It?m(U,K,ke,st):l(U,K,ue,ke,st);return{resizeTable:(U,K)=>U(K),clampTableDelta:vg,calcLeftEdgeDeltas:p,calcMiddleDeltas:(U,K,ue,ke,st,It,Bt)=>p(U,ue,ke,st,It,Bt),calcRightEdgeDeltas:(U,K,ue,ke,st,It)=>{if(It)return m(U,ue,ke,st);{const Bt=vg(U,ue,ke,st);return Ys(U.slice(0,ue)).concat([Bt])}},calcRedestributedWidths:(U,K,ue,ke)=>{if(ke){const It=(K+ue)/K,Bt=re(U,cn=>cn/It);return{delta:It*100-100,newSizes:Bt}}else return{delta:ue,newSizes:U}}}},VS=()=>{const l=(I,U,K,ue,ke)=>{const st=ue>=0?K:U,It=Ah(I,st,ue,ke);return ka(I,U,K+1,[It,-It],Ys)};return{resizeTable:(I,U,K)=>{K&&I(U)},clampTableDelta:(I,U,K,ue,ke)=>{if(ke){if(K>=0)return K;{const st=pe(I,(It,Bt)=>It+Bt-ue,0);return Math.max(-st,K)}}else return vg(I,U,K,ue)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(I,U,K,ue,ke,st)=>l(I,K,ue,ke,st),calcRightEdgeDeltas:(I,U,K,ue,ke,st)=>{if(st)return Ys(I);{const It=ue/I.length;return re(I,V(It))}},calcRedestributedWidths:(I,U,K,ue)=>({delta:0,newSizes:I})}},lm=(l,m,p=0)=>wa(l,m).map(y=>parseInt(y,10)).getOr(p),f1=(l,m)=>lm(l,m,1),uf=l=>Hc("col")(l)?lm(l,"span",1)>1:f1(l,"colspan")>1,Uk=l=>f1(l,"rowspan")>1,Br=(l,m)=>parseInt(vd(l,m),10),Ar=V(10),df=V(10),um=(l,m)=>c2(l,m,X),c2=(l,m,p)=>Un(Sa(l),y=>Ca(y,m)?p(y)?[y]:[]:c2(y,m,p)),za=(l,m,p=Yt)=>{if(p(m))return ce.none();if(co(l,tr(m)))return ce.some(m);const y=E=>Ca(E,"table")||p(E);return Cc(m,l.join(","),y)},i2=(l,m)=>za(["td","th"],l,m),mf=l=>um(l,"th,td"),d0=l=>Ca(l,"colgroup")?Ta(l,"col"):Un(gi(l),m=>Ta(m,"col")),Wi=(l,m)=>ir(l,"table",m),l2=l=>um(l,"tr"),gi=l=>Wi(l).fold(V([]),m=>Ta(m,"colgroup")),nr=Hc("th"),m0=l=>Tt(l,m=>nr(m.element)),Oh=(l,m)=>l&&m?"sectionCells":l?"section":"cells",US=l=>{const m=l.section==="thead",p=Pn(u2(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||p?{type:"header",subType:Oh(m,p)}:{type:"body"}},u2=l=>{const m=wt(l,p=>nr(p.element));return m.length===0?ce.some("td"):m.length===l.length?ce.some("th"):ce.none()},jS=l=>{const m=re(l,E=>US(E).type),p=co(m,"header"),y=co(m,"footer");if(!p&&!y)return ce.some("body");{const E=co(m,"body");return p&&!E&&!y?ce.some("header"):!p&&!E&&y?ce.some("footer"):ce.none()}},WS=l=>gt(l.all,m=>{const p=US(m);return p.type==="header"?ce.from(p.subType):ce.none()}),f0=(l,m)=>re(l,p=>{if(tr(p)==="colgroup"){const y=re(d0(p),E=>{const D=lm(E,"span",1);return gc(E,1,D)});return md(p,y,"colgroup")}else{const y=re(mf(p),E=>{const D=lm(E,"rowspan",1),I=lm(E,"colspan",1);return gc(E,D,I)});return md(p,y,m(p))}}),Dh=l=>ne(l).map(m=>{const p=tr(m);return Di(p)?p:"tbody"}).getOr("tbody"),g0=l=>{const m=l2(l),y=[...gi(l),...m];return f0(y,Dh)},kt=(l,m)=>f0(l,()=>m),Wc="data-snooker-locked-cols",jk=l=>wa(l,Wc).bind(m=>ce.from(m.match(/\d+/g))).map(m=>Wt(m,X)),Sc=l=>{const m=pe(Rs(l).rows,(y,E)=>(ae(E.cells,(D,I)=>{D.isLocked&&(y[I]=!0)}),y),{}),p=va(m,(y,E)=>parseInt(E,10));return io(p)},yl=(l,m)=>l+","+m,h0=(l,m,p)=>ce.from(l.access[yl(m,p)]),Wk=(l,m,p)=>{const y=ff(l,E=>p(m,E.element));return y.length>0?ce.some(y[0]):ce.none()},ff=(l,m)=>{const p=Un(l.all,y=>y.cells);return wt(p,m)},Zk=l=>{const m={};let p=0;return ae(l.cells,y=>{const E=y.colspan;Ro(E,D=>{const I=p+D;m[I]=ph(y.element,E,I)}),p+=E}),m},Zc=l=>{const m={},p=[],E=Ae(l).map(Bt=>Bt.element).bind(Wi).bind(jk).getOr({});let D=0,I=0,U=0;const{pass:K,fail:ue}=St(l,Bt=>Bt.section==="colgroup");ae(ue,Bt=>{const cn=[];ae(Bt.cells,We=>{let rt=0;for(;m[yl(U,rt)]!==void 0;)rt++;const xn=Ls(E,rt.toString()),Vn=Ri(We.element,We.rowspan,We.colspan,U,rt,xn);for(let Gt=0;Gt<We.colspan;Gt++)for(let Lo=0;Lo<We.rowspan;Lo++){const Fo=U+Lo,Ln=rt+Gt,xr=yl(Fo,Ln);m[xr]=Vn,I=Math.max(I,Ln+1)}cn.push(Vn)}),D++,p.push(md(Bt.element,cn,Bt.section)),U++});const{columns:ke,colgroups:st}=nt(K).map(Bt=>{const cn=Zk(Bt);return{colgroups:[nm(Bt.element,wo(cn))],columns:cn}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:jo(D,I),access:m,all:p,columns:ke,colgroups:st}},Zn={fromTable:l=>{const m=g0(l);return Zc(m)},generate:Zc,getAt:h0,findItem:Wk,filterItems:ff,justCells:l=>Un(l.all,m=>m.cells),justColumns:l=>wo(l.columns),hasColumns:l=>Xe(l.columns).length>0,getColumnAt:(l,m)=>ce.from(l.columns[m])},dm=(l,m,p)=>Lr(p(l.element,m),!0,l.isLocked),Rh=(l,m)=>l.section!==m?ri(l.element,l.cells,m,l.isNew):l,js=()=>({transformRow:Rh,transformCell:(l,m,p)=>{const y=p(l.element,m),E=tr(y)!=="td"?e1(y,"td"):y;return Lr(E,l.isNew,l.isLocked)}}),xl=()=>({transformRow:Rh,transformCell:dm}),g1=()=>({transformRow:(l,m)=>Rh(l,m==="thead"?"tbody":m),transformCell:dm}),mm={getTableSectionType:(l,m)=>{const p=Zn.fromTable(l);switch(WS(p).getOr(m)){case"section":return js();case"sectionCells":return xl();case"cells":return g1()}},section:js,sectionCells:xl,cells:g1,fallback:()=>({transformRow:Ye,transformCell:dm})},Nh=(l,m=X)=>{const p=l.grid,y=Ro(p.columns,Ye),E=Ro(p.rows,Ye);return re(y,D=>m2(()=>Un(E,ue=>Zn.getAt(l,ue,D).filter(ke=>ke.column===D).toArray()),ue=>ue.colspan===1&&m(ue.element),()=>Zn.getAt(l,0,D)))},m2=(l,m,p)=>{const y=l();return M(y,m).orThunk(()=>ce.from(y[0]).orThunk(p)).map(I=>I.element)},f2=l=>{const m=l.grid,p=Ro(m.rows,Ye),y=Ro(m.columns,Ye);return re(p,E=>m2(()=>Un(y,K=>Zn.getAt(l,E,K).filter(ue=>ue.row===E).fold(V([]),ue=>[ue])),K=>K.rowspan===1,()=>Zn.getAt(l,E,0)))},Sl=(l,m)=>{if(m<0||m>=l.length-1)return ce.none();const p=l[m].fold(()=>{const E=rs(l.slice(0,m));return gt(E,(D,I)=>D.map(U=>({value:U,delta:I+1})))},E=>ce.some({value:E,delta:0})),y=l[m+1].fold(()=>{const E=l.slice(m+1);return gt(E,(D,I)=>D.map(U=>({value:U,delta:I+1})))},E=>ce.some({value:E,delta:1}));return p.bind(E=>y.map(D=>{const I=D.delta+E.delta;return Math.abs(D.value-E.value)/I}))},h1=(l,m)=>({row:l,y:m}),p1=(l,m)=>({col:l,x:m}),Gk=l=>Jn(l).left+Ts(l),g2=l=>Jn(l).left,b1=(l,m)=>p1(l,g2(m)),h2=(l,m)=>p1(l,Gk(m)),p0=l=>Jn(l).top,qk=(l,m)=>h1(l,p0(m)),Kk=(l,m)=>h1(l,p0(m)+r0(m)),p2=(l,m,p)=>{if(p.length===0)return[];const y=re(p.slice(1),(D,I)=>D.map(U=>l(I,U))),E=p[p.length-1].map(D=>m(p.length-1,D));return y.concat([E])},Yk=l=>-l,v1={delta:Ye,positions:l=>p2(qk,Kk,l),edge:p0},bn=yd({delta:Ye,edge:g2,positions:l=>p2(b1,h2,l)},{delta:Yk,edge:Gk,positions:l=>p2(h2,b1,l)}),or={delta:(l,m)=>bn(m).delta(l,m),positions:(l,m)=>bn(m).positions(l,m),edge:l=>bn(l).edge(l)},Mh=/(\d+(\.\d+)?)%/,GS=/(\d+(\.\d+)?)px|em/,yg=Hc("col"),Ph=Hc("tr"),b2=(l,m,p)=>{const y=pc(l).getOrThunk(()=>n1(ag(l)));return m(l)/p(y)*100},Cg=(l,m)=>{oa(l,"width",m+"px")},qS=(l,m)=>{oa(l,"width",m+"%")},Ed=(l,m)=>{oa(l,"height",m+"px")},KS=l=>{gl(l,"height")},v2=l=>dg(l)+"px",zs=(l,m,p,y)=>{const E=Wi(l).map(D=>{const I=p(D);return Math.floor(m/100*I)}).getOr(m);return y(l,E),E},wl=(l,m,p,y)=>{const E=parseFloat(l);return ud(l,"%")&&tr(m)!=="table"?zs(m,E,p,y):E},wc=l=>{const m=v2(l);return m?wl(m,l,Uc,Ed):Uc(l)},Bh=(l,m,p)=>{const y=p(l),E=f1(l,m);return y/E},Ec=(l,m)=>ui(l,m).orThunk(()=>wa(l,m).map(p=>p+"px")),xg=l=>Ec(l,"width"),ra=l=>Ec(l,"height"),Tc=l=>b2(l,Tn,sa),b0=l=>yg(l)?Math.round(Tn(l)):bs(l),ot=l=>Ph(l)?Uc(l):Bh(l,"rowspan",wc),Gc=l=>xg(l).bind(p=>Us(p,["fixed","relative","empty"])),y1=(l,m,p)=>{oa(l,"width",m+p)},Xs=l=>Tn(l)+"px",Jl=l=>Uc(l)+"px",bi=l=>b2(l,Tn,sa)+"%",Xk=l=>xg(l).exists(m=>Mh.test(m)),Td=l=>xg(l).exists(m=>GS.test(m)),YS=l=>xg(l).isNone(),qc=V(Mh),zo=Hc("col"),Bu=l=>xg(l).getOrThunk(()=>b0(l)+"px"),$h=l=>ra(l).getOrThunk(()=>ot(l)+"px"),Qs=l=>re(Zn.justColumns(l),m=>ce.from(m.element)),y2=l=>{const m=ii().browser,p=m.isChromium()||m.isFirefox();return zo(l)?p:!0},C2=(l,m,p,y,E,D)=>l.filter(y).fold(()=>D(Sl(p,m)),I=>E(I)),eu=(l,m,p,y)=>{const E=Nh(l),D=Zn.hasColumns(l)?Qs(l):E,I=[ce.some(or.edge(m))].concat(re(or.positions(E,m),K=>K.map(ue=>ue.x))),U=se(uf);return re(D,(K,ue)=>C2(K,ue,I,U,ke=>{if(y2(ke))return p(ke);{const st=ld(E[ue],Ye);return C2(st,ue,I,U,It=>y(ce.some(Math.round(Tn(It)))),y)}},y))},v0=l=>l.map(m=>m+"px").getOr(""),Kc=(l,m)=>eu(l,m,Bu,v0),Qk=(l,m,p)=>eu(l,m,Tc,y=>y.fold(()=>p.minCellWidth(),E=>E/p.pixelWidth()*100)),De=(l,m,p)=>eu(l,m,b0,y=>y.getOrThunk(p.minCellWidth)),Zi=(l,m,p,y)=>{const E=f2(l),D=re(l.all,U=>ce.some(U.element)),I=[ce.some(v1.edge(m))].concat(re(v1.positions(E,m),U=>U.map(K=>K.y)));return re(D,(U,K)=>C2(U,K,I,X,p,y))},C1=(l,m)=>Zi(l,m,ot,p=>p.getOrThunk(df)),Ws=(l,m)=>Zi(l,m,$h,v0),kc=(l,m)=>()=>Cn(l)?m(l):parseFloat(ui(l,"width").getOr("0")),Wr=l=>{const m=kc(l,Tn),p=V(0);return{width:m,pixelWidth:m,getWidths:(E,D)=>De(E,l,D),getCellDelta:p,singleColumnWidth:V([0]),minCellWidth:p,setElementWidth:qe,adjustTableWidth:qe,isRelative:!0,label:"none"}},us=l=>{const m=kc(l,K=>parseFloat(bi(K))),p=kc(l,Tn);return{width:m,pixelWidth:p,getWidths:(K,ue)=>Qk(K,l,ue),getCellDelta:K=>K/p()*100,singleColumnWidth:(K,ue)=>[100-K],minCellWidth:()=>Ar()/p()*100,setElementWidth:qS,adjustTableWidth:K=>{const ue=m(),ke=K/100*ue,st=ue+ke;qS(l,st)},isRelative:!0,label:"percent"}},XS=l=>{const m=kc(l,Tn);return{width:m,pixelWidth:m,getWidths:(I,U)=>De(I,l,U),getCellDelta:Ye,singleColumnWidth:(I,U)=>[Math.max(Ar(),I+U)-I],minCellWidth:Ar,setElementWidth:Cg,adjustTableWidth:I=>{const U=m()+I;Cg(l,U)},isRelative:!1,label:"pixel"}},gf=(l,m)=>qc().exec(m)!==null?us(l):XS(l),Ih={getTableSize:l=>xg(l).fold(()=>Wr(l),p=>gf(l,p)),pixelSize:XS,percentageSize:us,noneSize:Wr},x1=(l,m,p,y)=>{p===y?Mo(l,m):vr(l,m,p)},x2=(l,m,p)=>{nt(Ta(l,m)).fold(()=>Hs(l,p),y=>ml(y,p))},S2=(l,m)=>{const p=Vs(l,m).getOrThunk(()=>{const y=Rt.fromTag(m,ag(l).dom);return m==="thead"?x2(l,"caption,colgroup",y):m==="colgroup"?x2(l,"caption",y):Ao(l,y),y});return rc(p),p},pf=(l,m)=>{const p=[],y=[],E=Bt=>re(Bt,cn=>{cn.isNew&&p.push(cn.element);const We=cn.element;return rc(We),ae(cn.cells,rt=>{rt.isNew&&y.push(rt.element),x1(rt.element,"colspan",rt.colspan,1),x1(rt.element,"rowspan",rt.rowspan,1),Ao(We,rt.element)}),We}),D=Bt=>Un(Bt,cn=>re(cn.cells,We=>(x1(We.element,"span",We.colspan,1),We.element))),I=(Bt,cn)=>{const We=S2(l,cn),xn=(cn==="colgroup"?D:E)(Bt);Ii(We,xn)},U=Bt=>{Vs(l,Bt).each(ta)},K=(Bt,cn)=>{Bt.length>0?I(Bt,cn):U(cn)},ue=[],ke=[],st=[],It=[];return ae(m,Bt=>{switch(Bt.section){case"thead":ue.push(Bt);break;case"tbody":ke.push(Bt);break;case"tfoot":st.push(Bt);break;case"colgroup":It.push(Bt);break}}),K(It,"colgroup"),K(ue,"thead"),K(ke,"tbody"),K(st,"tfoot"),{newRows:p,newCells:y}},Lh=l=>re(l,m=>{const p=Fi(m.element);return ae(m.cells,y=>{const E=zr(y.element);x1(E,"colspan",y.colspan,1),x1(E,"rowspan",y.rowspan,1),Ao(p,E)}),p}),QS=(l,m)=>re(l,p=>kn(p,m)),w2=(l,m)=>l[m],Jk=(l,m)=>{if(l.length===0)return 0;const p=l[0];return wn(l,E=>!m(p.element,E.element)).getOr(l.length)},Va=(l,m,p,y)=>{const E=w2(l,m),D=E.section==="colgroup",I=Jk(E.cells.slice(p),y),U=D?1:Jk(QS(l.slice(m),p),y);return{colspan:I,rowspan:U}},vi=(l,m)=>{const p=re(l,E=>re(E.cells,Yt)),y=(E,D,I,U)=>{for(let K=E;K<E+I;K++)for(let ue=D;ue<D+U;ue++)p[K][ue]=!0};return re(l,(E,D)=>{const I=Un(E.cells,(U,K)=>{if(p[D][K]===!1){const ue=Va(l,D,K,m);return y(D,K,ue.rowspan,ue.colspan),[er(U.element,ue.rowspan,ue.colspan,U.isNew)]}else return[]});return Ha(E.element,I,E.section,E.isNew)})},mr=(l,m,p)=>{const y=[];ae(l.colgroups,E=>{const D=[];for(let I=0;I<l.grid.columns;I++){const U=Zn.getColumnAt(l,I).map(K=>Lr(K.element,p,!1)).getOrThunk(()=>Lr(m.colGap(),!0,!1));D.push(U)}y.push(ri(E.element,D,"colgroup",p))});for(let E=0;E<l.grid.rows;E++){const D=[];for(let K=0;K<l.grid.columns;K++){const ue=Zn.getAt(l,E,K).map(ke=>Lr(ke.element,p,ke.isLocked)).getOrThunk(()=>Lr(m.gap(),!0,!1));D.push(ue)}const I=l.all[E],U=ri(I.element,D,I.section,p);y.push(U)}return y},bf=(l,m)=>mr(l,m,!1),S1=l=>vi(l,Wo),Yc=(l,m)=>gt(l.all,p=>M(p.cells,y=>Wo(m,y.element))),Fh=(l,m,p)=>{const y=re(m.selection,D=>i2(D).bind(I=>Yc(l,I)).filter(p)),E=Ko(y);return wu(E.length>0,E)},$r=(l,m,p,y,E,D,I,U,K)=>{const ue=Zn.fromTable(D),ke=ce.from(K?.section).getOrThunk(mm.fallback);return m(ue,I).map(It=>{const Bt=bf(ue,U),cn=l(Bt,It,Wo,E(U),ke),We=Sc(cn.grid),rt=S1(cn.grid);return{info:It,grid:rt,cursor:cn.cursor,lockedColumns:We}}).bind(It=>{const Bt=pf(D,It.grid),cn=ce.from(K?.sizing).getOrThunk(()=>Ih.getTableSize(D)),We=ce.from(K?.resize).getOrThunk(VS);return p(D,It.grid,It.info,{sizing:cn,resize:We,section:ke}),y(D),Mo(D,Wc),It.lockedColumns.length>0&&vr(D,Wc,It.lockedColumns.join(",")),ce.some({cursor:It.cursor,newRows:Bt.newRows,newCells:Bt.newCells})})},y0=(l,m)=>i2(m.element).bind(p=>Yc(l,p).map(y=>({...y,generators:m.generators,clipboard:m.clipboard}))),Gi=(l,m)=>Fh(l,m,X).map(p=>({cells:p,generators:m.generators,clipboard:m.clipboard})),tu=(l,m)=>m.mergable,E2=(l,m)=>m.unmergable,aa=(l,m)=>Fh(l,m,X),Hh=(l,m)=>Fh(l,m,p=>!p.isLocked),$u=(l,m)=>Yc(l,m).exists(p=>!p.isLocked),Sg=(l,m)=>Tt(m,p=>$u(l,p)),wg=(l,m)=>tu(l,m).filter(p=>Sg(l,p.cells)),e3=(l,m)=>E2(l,m).filter(p=>Sg(l,p)),fm={...Xr.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},w1=(l,m)=>l.length===0?fm.none():l.length===1?fm.only(0):m===0?fm.left(0,1):m===l.length-1?fm.right(m-1,m):m>0&&m<l.length-1?fm.middle(m-1,m,m+1):fm.none(),ds=(l,m,p,y,E)=>{const D=l.slice(0),I=w1(l,m),U=V(re(D,V(0))),K=It=>y.singleColumnWidth(D[It],p),ue=(It,Bt)=>E.calcLeftEdgeDeltas(D,It,Bt,p,y.minCellWidth(),y.isRelative),ke=(It,Bt,cn)=>E.calcMiddleDeltas(D,It,Bt,cn,p,y.minCellWidth(),y.isRelative),st=(It,Bt)=>E.calcRightEdgeDeltas(D,It,Bt,p,y.minCellWidth(),y.isRelative);return I.fold(U,K,ue,ke,st)},JS=(l,m,p)=>{let y=0;for(let E=l;E<m;E++)y+=p[E]!==void 0?p[E]:0;return y},gm=(l,m)=>{const p=Zn.justCells(l);return re(p,y=>{const E=JS(y.column,y.column+y.colspan,m);return{element:y.element,width:E,colspan:y.colspan}})},zh=(l,m)=>{const p=Zn.justColumns(l);return re(p,(y,E)=>({element:y.element,width:m[E],colspan:y.colspan}))},x0=(l,m)=>re(l.all,(p,y)=>({element:p.element,height:m[y]})),hm=l=>on(l,(m,p)=>m+p,0),Aa=(l,m)=>Zn.hasColumns(l)?zh(l,m):gm(l,m),Eg=(l,m,p)=>{const y=Aa(l,m);ae(y,E=>{p.setElementWidth(E.element,E.width)})},Vh=(l,m,p,y,E)=>{const D=Zn.fromTable(l),I=E.getCellDelta(m),U=E.getWidths(D,E),K=p===D.grid.columns-1,ue=y.clampTableDelta(U,p,I,E.minCellWidth(),K),ke=ds(U,p,ue,E,y),st=re(ke,(It,Bt)=>It+U[Bt]);Eg(D,st,E),y.resizeTable(E.adjustTableWidth,ue,K)},S0=(l,m,p)=>{const y=Zn.fromTable(l),E=C1(y,l),D=re(E,(K,ue)=>p===ue?Math.max(m+K,df()):K),I=x0(y,D);ae(I,K=>{Ed(K.element,K.height)}),ae(Zn.justCells(y),K=>{KS(K.element)});const U=hm(D);Ed(l,U)},w0=(l,m,p,y,E)=>{const D=Zn.generate(m),I=y.getWidths(D,y),U=y.pixelWidth(),{newSizes:K,delta:ue}=E.calcRedestributedWidths(I,U,p.pixelDelta,y.isRelative);Eg(D,K,y),y.adjustTableWidth(ue)},E0=(l,m,p,y)=>{const E=Zn.generate(m),D=y.getWidths(E,y);Eg(E,D,y)},E1=(l,m)=>{uf(l)||Gc(l).each(y=>{const E=y.value/2;y1(l,E,y.unit),y1(m,E,y.unit)})},ew=(l,m,p)=>{const y=lm(l,m,1);p===1||y<=1?Mo(l,m):vr(l,m,Math.min(p,y))},T2=(l,m)=>p=>{const y=p.column+p.colspan-1,E=p.column;return y>=l&&E<m},k2=(l,m,p)=>{if(Zn.hasColumns(l)){const y=wt(Zn.justColumns(l),T2(m,p)),E=re(y,I=>{const U=zr(I.element);return ew(U,"span",p-m),U}),D=Rt.fromTag("colgroup");return Ii(D,E),[D]}else return[]},Uh=(l,m,p)=>re(l.all,y=>{const E=wt(y.cells,T2(m,p)),D=re(E,U=>{const K=zr(U.element);return ew(K,"colspan",p-m),K}),I=Rt.fromTag("tr");return Ii(I,D),I}),Iu=(l,m)=>{const p=Zn.fromTable(l);return Hh(p,m).map(E=>{const D=E[E.length-1],I=E[0].column,U=D.column+D.colspan,K=k2(p,I,U),ue=Uh(p,I,U);return[...K,...ue]})},El=(l,m,p)=>{const y=Zn.fromTable(l);return aa(y,m).bind(D=>{const I=mr(y,p,!1),K=Rs(I).rows.slice(D[0].row,D[D.length-1].row+D[D.length-1].rowspan),ue=Un(K,st=>{const It=wt(st.cells,Bt=>!Bt.isLocked);return It.length>0?[{...st,cells:It}]:[]}),ke=S1(ue);return wu(ke.length>0,ke)}).map(D=>Lh(D))},pm=(l,m,p,y,E,D)=>({minRow:l,minCol:m,maxRow:p,maxCol:y,allCells:E,selectedCells:D}),tw=(l,m)=>{const p=l.grid.columns;let E=l.grid.rows,D=p,I=0,U=0;const K=[],ue=[];return Qn(l.access,ke=>{if(K.push(ke),m(ke)){ue.push(ke);const st=ke.row,It=st+ke.rowspan-1,Bt=ke.column,cn=Bt+ke.colspan-1;st<E?E=st:It>I&&(I=It),Bt<D?D=Bt:cn>U&&(U=cn)}}),pm(E,D,I,U,K,ue)},T0=(l,m,p)=>{const y=l[p].element,E=Rt.fromTag("td");Ao(E,Rt.fromTag("br")),(m?Ao:Hs)(y,E)},A2=(l,m,p,y)=>{const E=wt(l,U=>U.section!=="colgroup"),D=m.grid.columns,I=m.grid.rows;for(let U=0;U<I;U++){let K=!1;for(let ue=0;ue<D;ue++)U<p.minRow||U>p.maxRow||ue<p.minCol||ue>p.maxCol||(Zn.getAt(m,U,ue).filter(y).isNone()?T0(E,K,U):K=!0)}},nw=(l,m,p,y)=>{Qn(p.columns,I=>{(I.column<m.minCol||I.column>m.maxCol)&&ta(I.element)});const E=wt(um(l,"tr"),I=>I.dom.childElementCount===0);ae(E,ta),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&ae(um(l,"th,td"),I=>{Mo(I,"rowspan"),Mo(I,"colspan")}),Mo(l,Wc),Mo(l,"data-snooker-col-series"),Ih.getTableSize(l).adjustTableWidth(y)},_2=(l,m,p,y)=>{if(y.minCol===0&&m.grid.columns===y.maxCol+1)return 0;const E=De(m,l,p),D=pe(E,(ue,ke)=>ue+ke,0),K=pe(E.slice(y.minCol,y.maxCol+1),(ue,ke)=>ue+ke,0)/D*p.pixelWidth()-p.pixelWidth();return p.getCellDelta(K)},k0=(l,m)=>{const p=It=>Ca(It.element,m),y=zr(l),E=g0(y),D=Ih.getTableSize(l),I=Zn.generate(E),U=tw(I,p),K="th:not("+m+"),td:not("+m+")",ue=c2(y,"th,td",It=>Ca(It,K));ae(ue,ta),A2(E,I,U,p);const ke=Zn.fromTable(l),st=_2(l,ke,D,U);return nw(y,U,I,st),y},A0=Hc("col"),_0=Hc("colgroup"),Lu=l=>tr(l)==="tr"||_0(l),T1=l=>{const m=lm(l,"colspan",1),p=lm(l,"rowspan",1);return{element:l,colspan:m,rowspan:p}},jh=(l,m=T1)=>{const p=U=>A0(U.element)?l.col(U):l.cell(U),y=U=>_0(U.element)?l.colgroup(U):l.row(U),E=U=>{if(Lu(U))return y({element:U});{const K=U,ue=p(m(K));return D=ce.some({item:K,replacement:ue}),ue}};let D=ce.none();return{getOrInit:(U,K)=>D.fold(()=>E(U),ue=>K(U,ue.item)?ue.replacement:E(U))}},Tg=l=>m=>{const p=[],y=(I,U)=>M(p,K=>U(K.item,I)),E=I=>{const U=l==="td"?{scope:null}:{},K=m.replace(I,l,U);return p.push({item:I,sub:K}),K};return{replaceOrInit:(I,U)=>{if(Lu(I)||A0(I))return I;{const K=I;return y(K,U).fold(()=>E(K),ue=>U(I,ue.item)?ue.sub:E(K))}}}},ow=l=>wa(l,"scope").map(m=>m.substr(0,3)),Ac={modification:jh,transform:Tg,merging:l=>({unmerge:y=>{const E=ow(y);return E.each(D=>vr(y,"scope",D)),()=>{const D=l.cell({element:y,colspan:1,rowspan:1});return gl(D,"width"),gl(y,"width"),E.each(I=>vr(D,"scope",I)),D}},merge:y=>{const E=()=>{const D=Ko(re(y,ow));if(D.length===0)return ce.none();{const I=D[0],U=["row","col"];return it(D,ue=>ue!==I&&co(U,ue))?ce.none():ce.from(I)}};return gl(y[0],"width"),E().fold(()=>Mo(y[0],"scope"),D=>vr(y[0],"scope",D+"group")),V(y[0])}})},t3=(l,m)=>{const p=l.slice(0,m[m.length-1].row+1),y=S1(p);return Un(y,E=>{const D=E.cells.slice(0,m[m.length-1].column+1);return re(D,I=>I.element)})},O2=(l,m)=>{const p=l.slice(m[0].row+m[0].rowspan-1,l.length),y=S1(p);return Un(y,E=>{const D=E.cells.slice(m[0].column+m[0].colspan-1,E.cells.length);return re(D,I=>I.element)})},D2=(l,m,p)=>{const y=Zn.fromTable(l);return aa(y,m).map(D=>{const I=mr(y,p,!1),{rows:U}=Rs(I),K=t3(U,D),ue=O2(U,D);return{upOrLeftCells:K,downOrRightCells:ue}})},rw={only:(l,m)=>{const p=Qy(l)?Qm(l):l;return{parent:V(p),view:V(l),dragContainer:V(p),origin:V(ws(0,0)),isResizable:m}},detached:(l,m,p)=>{const y=()=>Jn(m);return{parent:V(m),view:V(l),dragContainer:V(m),origin:y,isResizable:p}},body:(l,m)=>({parent:V(l),view:V(l),dragContainer:V(l),origin:()=>Jn(l),isResizable:m})},k1=Xr.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),R2=(l,m,p)=>{const y=p.substring(0,p.length-l.length),E=parseFloat(y);return y===E.toString()?m(E):k1.invalid(p)},mo={...k1,from:l=>ud(l,"%")?R2("%",k1.percent,l):ud(l,"px")?R2("px",k1.pixels,l):k1.invalid(l)},D0=(l,m)=>re(l,p=>mo.from(p).fold(()=>p,E=>E/m*100+"%",E=>E+"%")),xo=(l,m,p)=>{const y=p/m;return re(l,E=>mo.from(E).fold(()=>E,I=>I*y+"px",I=>I/100*p+"px"))},yi=(l,m)=>{const p=l.fold(()=>V(""),y=>{const E=y/m;return V(E+"px")},()=>{const y=100/m;return V(y+"%")});return Ro(m,p)},vf=(l,m,p)=>l.fold(()=>m,y=>xo(m,p,y),y=>D0(m,p)),A1=(l,m,p)=>{const y=mo.from(p),E=Tt(l,D=>D==="0px")?yi(y,l.length):vf(y,l,m);return n3(E)},Po=(l,m)=>l.length===0?m:on(l,(p,y)=>mo.from(y).fold(V(0),Ye,Ye)+p,0),cw=(l,m)=>{const p=Math.floor(l);return{value:p+m,remainder:l-p}},iw=(l,m)=>mo.from(l).fold(V(l),p=>p+m+"px",p=>p+m+"%"),n3=l=>{if(l.length===0)return l;const m=on(l,(y,E)=>{const D=mo.from(E).fold(()=>({value:E,remainder:0}),I=>cw(I,"px"),I=>({value:I+"%",remainder:0}));return{output:[D.value].concat(y.output),remainder:y.remainder+D.remainder}},{output:[],remainder:0}),p=m.output;return p.slice(0,p.length-1).concat([iw(p[p.length-1],Math.round(m.remainder))])},Ag=mo.from,_1=(l,m,p)=>{ae(m,y=>{const E=l.slice(y.column,y.colspan+y.column),D=Po(E,Ar());oa(y.element,"width",D+p)})},lw=(l,m,p)=>{ae(m,(y,E)=>{const D=Po([l[E]],Ar());oa(y.element,"width",D+p)})},o3=(l,m,p)=>{ae(p,y=>{gl(y.element,"height")}),ae(m,(y,E)=>{oa(y.element,"height",l[E])})},s3=l=>Ag(l).fold(V("px"),V("px"),V("%")),uw=(l,m,p)=>{const y=Zn.fromTable(l),E=y.all,D=Zn.justCells(y),I=Zn.justColumns(y);m.each(U=>{const K=s3(U),ue=Tn(l),ke=Kc(y,l),st=A1(ke,ue,U);Zn.hasColumns(y)?lw(st,I,K):_1(st,D,K),oa(l,"width",U)}),p.each(U=>{const K=Uc(l),ue=Ws(y,l),ke=A1(ue,K,U);o3(ke,E,D),oa(l,"height",U)})},dw=Xk,r3=Td,a3=YS;var _g=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Ci=()=>{const l=ue=>Rt.fromDom(ue.dom.cloneNode(!1)),m=ue=>$i(ue).dom,p=ue=>Ks(ue)?tr(ue)==="body"?!0:co(_g,tr(ue)):!1,y=ue=>Ks(ue)?co(["br","img","hr","input"],tr(ue)):!1,E=ue=>Ks(ue)&&Vc(ue,"contenteditable")==="false",D=(ue,ke)=>ue.dom.compareDocumentPosition(ke.dom),I=(ue,ke)=>{const st=li(ue);fl(ke,st)},U=ue=>{const ke=tr(ue);return co(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ke)},K=ue=>Ks(ue)?wa(ue,"lang"):ce.none();return{up:V({selector:Cc,closest:ir,predicate:$o,all:hd}),down:V({selector:Kl,predicate:Sd}),styles:V({get:vd,getRaw:ui,set:oa,remove:gl}),attrs:V({get:Vc,set:vr,remove:Mo,copyTo:I}),insert:V({before:dl,after:ml,afterAll:br,append:Ao,appendAll:Ii,prepend:Hs,wrap:e2}),remove:V({unwrap:Hr,remove:ta}),create:V({nu:Rt.fromTag,clone:l,text:Rt.fromText}),query:V({comparePosition:D,prevSibling:qp,nextSibling:Jm}),property:V({children:Sa,name:tr,parent:ne,document:m,isText:cm,isComment:FS,isElement:Ks,isSpecial:U,getLanguage:K,getText:ql,setText:Du,isBoundary:p,isEmptyTag:y,isNonEditable:E}),eq:Wo,is:$}};const Zr=(l,m)=>({item:l,mode:m}),yf=(l,m,p,y=nu)=>l.property().parent(m).map(E=>Zr(E,y)),nu=(l,m,p,y=kd)=>p.sibling(l,m).map(E=>Zr(E,y)),kd=(l,m,p,y=kd)=>{const E=l.property().children(m);return p.first(E).map(I=>Zr(I,y))},Zh=[{current:yf,next:nu,fallback:ce.none()},{current:nu,next:kd,fallback:ce.some(yf)},{current:kd,next:kd,fallback:ce.some(nu)}],Gh=(l,m,p,y,E=Zh)=>M(E,I=>I.current===p).bind(I=>I.current(l,m,y,I.next).orThunk(()=>I.fallback.bind(U=>Gh(l,m,U,y)))),N0={left:()=>({sibling:(p,y)=>p.query().prevSibling(y),first:p=>p.length>0?ce.some(p[p.length-1]):ce.none()}),right:()=>({sibling:(p,y)=>p.query().nextSibling(y),first:p=>p.length>0?ce.some(p[0]):ce.none()})},N2=(l,m,p,y,E,D)=>Gh(l,m,y,E).bind(U=>D(U.item)?ce.none():p(U.item)?ce.some(U.item):N2(l,U.item,p,U.mode,E,D)),M2=(l,m,p,y)=>N2(l,m,p,nu,N0.left(),y),O1=(l,m,p,y)=>N2(l,m,p,nu,N0.right(),y),bm=(l,m)=>({element:l,offset:m}),M0=(l,m,p)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?p(m).bind(y=>M0(l,y,p).orThunk(()=>ce.some(y))):ce.none(),D1=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,P0=(l,m)=>{const p=M0(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(p))return bm(p,D1(l,p));const y=l.property().children(p);return y.length>0?P0(l,y[y.length-1]):bm(p,D1(l,p))},mw=P0,Ad=Ci(),B0=l=>mw(Ad,l),fw=l=>m=>l.property().children(m).length===0,i3=(l,m,p)=>gw(l,m,fw(l),p),l3=(l,m,p)=>P2(l,m,fw(l),p),gw=M2,P2=O1,_d=Ci(),hw=(l,m)=>i3(_d,l,m),ou=(l,m)=>l3(_d,l,m),ac=(l,m,p)=>gw(_d,l,m,p),Tl=(l,m,p)=>P2(_d,l,m,p),_c=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],$0=(l,m)=>{const p=l.property().name(m);return co(["ol","ul"],p)},Og=(l,m)=>{const p=l.property().name(m);return co(_c,p)},I0=(l,m)=>co(["br","img","hr","input"],l.property().name(m)),B2=(l,m,p,y)=>{const E=p[0],D=p.slice(1);return y(l,m,E,D)},u3=(l,m,p)=>p.length>0?B2(l,m,p,Cf):ce.none(),Cf=(l,m,p,y)=>{const E=m(l,p);return on(y,(D,I)=>{const U=m(l,I);return xf(l,D,U)},E)},xf=(l,m,p)=>m.bind(y=>p.filter(At(l.eq,y))),$2=(l,m)=>At(l.eq,m),Gr=(l,m,p,y=Yt)=>{const E=[m].concat(l.up().all(m)),D=[p].concat(l.up().all(p)),I=ke=>wn(ke,y).fold(()=>ke,It=>ke.slice(0,It+1)),U=I(E),K=I(D),ue=M(U,ke=>it(K,$2(l,ke)));return{firstpath:U,secondpath:K,shared:ue}},R1=u3,Xc=Gr,L0=Ci(),ns=(l,m)=>R1(L0,(p,y)=>l(y),m),Fu=(l,m,p)=>Xc(L0,l,m,p),vm=Ci(),Hu=l=>Og(vm,l),qi=l=>$0(vm,l),F0=l=>I0(vm,l),pw=l=>{const m=Hc("br"),p=K=>Tt(K,ue=>m(ue)||cm(ue)&&ql(ue).trim().length===0),y=K=>tr(K)==="li"||$o(K,qi).isSome(),E=K=>Jm(K).map(ue=>Hu(ue)?!0:F0(ue)?tr(ue)!=="img":!1).getOr(!1),D=K=>lr(K).bind(ue=>{const ke=E(ue);return ne(ue).map(st=>ke===!0||y(st)||m(ue)||Hu(st)&&!Wo(K,st)?[]:[Rt.fromTag("br")])}).getOr([]),U=(()=>{const K=Un(l,ue=>{const ke=Sa(ue);return p(ke)?[]:ke.concat(D(ue))});return K.length===0?[Rt.fromTag("br")]:K})();rc(l[0]),Ii(l[0],U)},ym=l=>{Mo(l,"width"),Mo(l,"height")},Dg=l=>{const m=bi(l);uw(l,ce.some(m),ce.none()),ym(l)},I2=l=>{const m=Xs(l);uw(l,ce.some(m),ce.none()),ym(l)},xi=l=>{const m=Jl(l);uw(l,ce.none(),ce.some(m)),ym(l)},Sf=l=>{gl(l,"width");const m=d0(l),p=m.length>0?m:mf(l);ae(p,y=>{gl(y,"width"),ym(y)}),ym(l)},_a={scope:["row","col"]},su=l=>()=>{const m=Rt.fromTag("td",l.dom);return Ao(m,Rt.fromTag("br",l.dom)),m},H0=l=>()=>Rt.fromTag("col",l.dom),Rg=l=>()=>Rt.fromTag("colgroup",l.dom),wf=l=>()=>Rt.fromTag("tr",l.dom),N1=(l,m,p)=>{const y=bd(l,m);return Qn(p,(E,D)=>{E===null?Mo(y,D):vr(y,D,E)}),y},L2=l=>l,z0=(l,m,p)=>af(l).map(E=>{const D=p.join(","),I=Io(E,D,U=>Wo(U,l));return on(I,(U,K)=>{const ue=Fi(K);return Ao(U,ue),ue},m)}).getOr(m),Ng=(l,m)=>{Qn(_a,(p,y)=>wa(l,y).filter(E=>co(p,E)).each(E=>vr(m,y,E)))},Ef=(l,m,p)=>{const y=(I,U)=>{lg(I.element,U),gl(U,"height"),I.colspan!==1&&gl(U,"width")},E=I=>{const U=Rt.fromTag(tr(I.element),m.dom),K=p.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),ue=K.length>0?z0(I.element,U,K):U;return Ao(ue,Rt.fromTag("br")),y(I,U),Ng(I.element,U),l(I.element,U),U};return{col:I=>{const U=Rt.fromTag(tr(I.element),m.dom);return y(I,U),l(I.element,U),U},colgroup:Rg(m),row:wf(m),cell:E,replace:N1,colGap:H0(m),gap:su(m)}},F2=l=>({col:H0(l),colgroup:Rg(l),row:wf(l),cell:su(l),replace:L2,colGap:H0(l),gap:su(l)}),M1=l=>Zn.fromTable(l).grid,H2=(l,m,p,y)=>{const E=Rs(l).rows;if(E.length===0)return l;for(let D=m.startRow;D<=m.finishRow;D++)for(let I=m.startCol;I<=m.finishCol;I++){const U=E[D],K=kn(U,I).isLocked;sl(U,I,Lr(y(),!1,K))}return l},bw=(l,m,p,y)=>{const E=Rs(l).rows;let D=!0;for(let I=0;I<E.length;I++)for(let U=0;U<Jr(E[0]);U++){const K=E[I],ue=kn(K,U),ke=ue.element,st=p(ke,m);st&&!D?sl(K,U,Lr(y(),!0,ue.isLocked)):st&&(D=!1)}return l},qr=(l,m)=>pe(l,(p,y)=>it(p,E=>m(E.element,y.element))?p:p.concat([y]),[]),Tf=(l,m,p,y)=>(m>0&&m<l[0].cells.length&&ae(l,E=>{const D=E.cells[m-1];let I=0;const U=y();for(;E.cells.length>m+I&&p(D.element,E.cells[m+I].element);)sl(E,m+I,Lr(U,!0,E.cells[m+I].isLocked)),I++}),l),kf=(l,m,p,y)=>{const E=Rs(l).rows;if(m>0&&m<E.length){const D=E[m-1].cells,I=qr(D,p);ae(I,U=>{let K=ce.none();for(let ue=m;ue<E.length;ue++)for(let ke=0;ke<Jr(E[0]);ke++){const st=E[ue],It=kn(st,ke);p(It.element,U.element)&&(K.isNone()&&(K=ce.some(y())),K.each(cn=>{sl(st,ke,Lr(cn,!0,It.isLocked))}))}})}return l},vw=(l,m,p)=>{if(l.row>=m.length||l.column>Jr(m[0]))return fc.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const y=m.slice(l.row),E=y[0].cells.slice(l.column),D=Jr(p[0]),I=p.length;return fc.value({rowDelta:y.length-I,colDelta:E.length-D})},V0=(l,m)=>{const p=Jr(l[0]),y=Jr(m[0]);return{rowDelta:0,colDelta:p-y}},z2=(l,m)=>{const p=l.length,y=m.length;return{rowDelta:p-y,colDelta:0}},P1=(l,m,p,y)=>{const E=m.section==="colgroup"?p.col:p.cell;return Ro(l,D=>Lr(E(),!0,y(D)))},U0=(l,m,p,y)=>{const E=l[l.length-1];return l.concat(Ro(m,()=>{const D=E.section==="colgroup"?p.colgroup:p.row,I=om(E,D,Ye),U=P1(I.cells.length,I,p,K=>gs(y,K.toString()));return Km(I,U)}))},yw=(l,m,p,y)=>re(l,E=>{const D=P1(m,E,p,Yt);return Ic(E,y,D)}),d3=(l,m,p)=>re(l,y=>pe(p,(E,D)=>{const I=P1(1,y,m,X)[0];return Ni(E,D,I)},y)),B1=(l,m,p)=>{const y=m.colDelta<0?yw:Ye,E=m.rowDelta<0?U0:Ye,D=Sc(l),I=Jr(l[0]),U=it(D,ke=>ke===I-1),K=y(l,Math.abs(m.colDelta),p,U?I-1:I),ue=Sc(K);return E(K,Math.abs(m.rowDelta),p,Wt(ue,X))},Ir=(l,m,p,y)=>{const E=kn(l[m],p),D=At(y,E.element),I=l[m];return l.length>1&&Jr(I)>1&&(p>0&&D(Qr(I,p-1))||p<I.cells.length-1&&D(Qr(I,p+1))||m>0&&D(Qr(l[m-1],p))||m<l.length-1&&D(Qr(l[m+1],p)))},_r=(l,m,p,y,E,D)=>{const I=l.row,U=l.column,K=p.length,ue=Jr(p[0]),ke=I+K,st=U+ue+D.length,It=Wt(D,X);for(let Bt=I;Bt<ke;Bt++){let cn=0;for(let We=U;We<st;We++){if(It[We]){cn++;continue}Ir(m,Bt,We,E)&&bw(m,Qr(m[Bt],We),E,y.cell);const rt=We-U-cn,xn=kn(p[Bt-I],rt),Vn=xn.element,Gt=y.replace(Vn);sl(m[Bt],We,Lr(Gt,!0,xn.isLocked))}}return m},Oa=(l,m,p)=>{const y=Jr(m[0]),E=Rs(m).cols.length+l.row,D=Ro(y-l.column,U=>U+l.column),I=M(D,U=>Tt(p,K=>K!==U)).getOr(y-1);return{row:E,column:I}},ga=(l,m,p)=>wt(p,y=>y>=l.column&&y<=Jr(m[0])+l.column),Ps=(l,m,p,y,E)=>{const D=Sc(m),I=Oa(l,m,D),U=Rs(p).rows,K=ga(I,U,D);return vw(I,m,U).map(ke=>{const st={...ke,colDelta:ke.colDelta-K.length},It=B1(m,st,y),Bt=Sc(It),cn=ga(I,U,Bt);return _r(I,It,U,y,E,cn)})},Or=(l,m,p,y,E)=>{Tf(m,l,E,y.cell);const D=z2(p,m),I=B1(p,D,y),U=z2(m,I),K=B1(m,U,y);return re(K,(ue,ke)=>Ic(ue,l,I[ke].cells))},qh=(l,m,p,y,E)=>{kf(m,l,E,y.cell);const D=Sc(m),I=V0(m,p),U={...I,colDelta:I.colDelta-D.length},K=B1(m,U,y),{cols:ue,rows:ke}=Rs(K),st=Sc(K),It=V0(p,m),Bt={...It,colDelta:It.colDelta+st.length},cn=d3(p,y,st),We=B1(cn,Bt,y);return[...ue,...ke.slice(0,l),...We,...ke.slice(l,ke.length)]},V2=(l,m,p,y)=>om(l,E=>y(E,p),m),U2=(l,m,p,y,E)=>{const{rows:D,cols:I}=Rs(l),U=D.slice(0,m),K=D.slice(m),ue=V2(D[p],(ke,st)=>m>0&&m<D.length&&y(Qr(D[m-1],st),Qr(D[m],st))?kn(D[m],st):Lr(E(ke.element,y),!0,ke.isLocked),y,E);return[...I,...U,ue,...K]},Cw=(l,m,p,y,E,D,I)=>{if(p==="colgroup"||!y){const U=kn(l,E);return Lr(I(U.element,D),!0,!1)}else return kn(l,m)},j0=(l,m,p,y,E)=>re(l,D=>{const I=m>0&&m<Jr(D)&&y(Qr(D,m-1),Qr(D,m)),U=Cw(D,m,D.section,I,p,y,E);return Ni(D,m,U)}),j2=(l,m)=>Un(l,p=>{const y=p.cells,E=on(m,(D,I)=>I>=0&&I<D.length?D.slice(0,I).concat(D.slice(I+1)):D,y);return E.length>0?[ri(p.element,E,p.section,p.isNew)]:[]}),W2=(l,m,p)=>{const{rows:y,cols:E}=Rs(l);return[...E,...y.slice(0,m),...y.slice(p+1)]},W0=(l,m,p,y)=>Qr(l[m],p)!==void 0&&m>0&&y(Qr(l[m-1],p),Qr(l[m],p)),Z2=(l,m,p)=>m>0&&p(Qr(l,m-1),Qr(l,m)),Kh=(l,m,p,y)=>W0(l,m,p,y)||Z2(l[m],p,y),xw=(l,m)=>Tt(m,Ye)&&m0(l.cells)?X:(y,E,D)=>!(tr(y.element)==="th"&&m[D]),$1=(l,m)=>Tt(m,Ye)&&m0(l)?X:(y,E,D)=>!(tr(y.element)==="th"&&m[E]),zu=(l,m,p,y)=>{const E=I=>I==="row"?Uk(m):uf(m),D=I=>E(I)?`${I}group`:I;return l?nr(m)?D(p):null:y&&nr(m)?D(p==="row"?"col":"row"):null},Z0=(l,m)=>(p,y,E)=>ce.some(zu(l,p.element,"col",m[E])),I1=(l,m)=>(p,y)=>ce.some(zu(l,p.element,"row",m[y])),Yh=(l,m,p)=>Lr(p(l.element,m),!0,l.isLocked),Mg=(l,m,p,y,E,D,I)=>{const U=K=>it(m,ue=>p(K.element,ue.element));return re(l,(K,ue)=>Ds(K,(ke,st)=>{if(U(ke)){const It=I(ke,ue,st)?E(ke,p,y):ke;return D(It,ue,st).each(Bt=>{sc(It.element,{scope:ce.from(Bt)})}),It}else return ke}))},L1=(l,m,p)=>Un(l,(y,E)=>Kh(l,E,m,p)?[]:[kn(y,m)]),G0=(l,m,p)=>{const y=l[m];return Un(y.cells,(E,D)=>Kh(l,m,D,p)?[]:[E])},F1=(l,m,p,y,E)=>{const D=Rs(l).rows,I=Un(m,ke=>L1(D,ke,y)),U=re(D,ke=>m0(ke.cells)),K=$1(I,U),ue=I1(p,U);return Mg(l,I,y,E,Yh,ue,K)},q0=(l,m,p,y,E,D,I)=>{const{cols:U,rows:K}=Rs(l),ue=K[m[0]],ke=Un(m,rt=>G0(K,rt,E)),st=re(ue.cells,(rt,xn)=>m0(L1(K,xn,E))),It=[...K];ae(m,rt=>{It[rt]=I.transformRow(K[rt],p)});const Bt=[...U,...It],cn=xw(ue,st),We=Z0(y,st);return Mg(Bt,ke,E,D,I.transformCell,We,cn)},Pg=(l,m,p,y)=>{const E=Rs(l).rows,D=re(m,I=>kn(E[I.row],I.column));return Mg(l,D,p,y,Yh,ce.none,X)},Oc=l=>pe(l,(p,y)=>it(p,D=>D.column===y.column)?p:p.concat([y]),[]).sort((p,y)=>p.column-y.column),Ua=l=>mg(l,!0),Xh=l=>{mf(l).length===0&&ta(l)},Le=(l,m)=>({grid:l,cursor:m}),H1=l=>gt(l,m=>gt(m.cells,p=>{const y=p.element;return wu(Ua(y),y)})),m3=(l,m,p)=>{const y=Rs(l).rows;return ce.from(y[m]?.cells[p]?.element).filter(Ua).orThunk(()=>H1(y))},Dc=(l,m,p)=>{const y=m3(l,m,p);return Le(l,y)},Qh=l=>pe(l,(p,y)=>it(p,D=>D.row===y.row)?p:p.concat([y]),[]).sort((p,y)=>p.row-y.row),Vu=(l,m,p,y)=>{const E=m[0].row,D=Qh(m),I=on(D,(U,K)=>({grid:U2(U.grid,E,K.row+U.delta,p,y.getOrInit),delta:U.delta+1}),{grid:l,delta:0}).grid;return Dc(I,E,m[0].column)},G2=(l,m,p,y)=>{const E=Qh(m),D=E[E.length-1],I=D.row+D.rowspan,U=on(E,(K,ue)=>U2(K,I,ue.row,p,y.getOrInit),l);return Dc(U,I,m[0].column)},q2=(l,m,p,y)=>{const E=m.details,D=Oc(E),I=D[0].column,U=on(D,(K,ue)=>({grid:j0(K.grid,I,ue.column+K.delta,p,y.getOrInit),delta:K.delta+1}),{grid:l,delta:0}).grid;return Dc(U,E[0].row,I)},Bg=(l,m,p,y)=>{const E=m.details,D=E[E.length-1],I=D.column+D.colspan,U=Oc(E),K=on(U,(ue,ke)=>j0(ue,I,ke.column,p,y.getOrInit),l);return Dc(K,E[0].row,I)},z1=(l,m,p,y)=>{const E=Oc(m),D=re(E,U=>U.column),I=F1(l,D,!0,p,y.replaceOrInit);return Dc(I,m[0].row,m[0].column)},Cm=(l,m,p,y)=>{const E=Pg(l,m,p,y.replaceOrInit);return Dc(E,m[0].row,m[0].column)},K0=(l,m,p,y)=>{const E=Oc(m),D=re(E,U=>U.column),I=F1(l,D,!1,p,y.replaceOrInit);return Dc(I,m[0].row,m[0].column)},f3=(l,m,p,y)=>{const E=Pg(l,m,p,y.replaceOrInit);return Dc(E,m[0].row,m[0].column)},ja=(l,m)=>(p,y,E,D,I)=>{const U=Qh(y),K=re(U,ke=>ke.row),ue=q0(p,K,l,m,E,D.replaceOrInit,I);return Dc(ue,y[0].row,y[0].column)},Uu=ja("thead",!0),Si=ja("tbody",!1),g3=ja("tfoot",!1),Jh=(l,m,p,y)=>{const E=Oc(m.details),D=j2(l,re(E,U=>U.column)),I=D.length>0?D[0].cells.length-1:0;return Dc(D,E[0].row,Math.min(E[0].column,I))},Sw=(l,m,p,y)=>{const E=Qh(m),D=W2(l,E[0].row,E[E.length-1].row),I=Math.max(Rs(D).rows.length-1,0);return Dc(D,Math.min(m[0].row,I),m[0].column)},Y0=(l,m,p,y)=>{const E=m.cells;pw(E);const D=H2(l,m.bounds,p,y.merge(E));return Le(D,ce.from(E[0]))},h3=(l,m,p,y)=>{const D=on(m,(I,U)=>bw(I,U,p,y.unmerge(U)),l);return Le(D,ce.from(m[0]))},ww=(l,m,p,y)=>{const D=((K,ue)=>{const ke=Zn.fromTable(K);return mr(ke,ue,!0)})(m.clipboard,m.generators),I=dd(m.row,m.column);return Ps(I,l,D,m.generators,p).fold(()=>Le(l,ce.some(m.element)),K=>Dc(K,m.row,m.column))},Yn=(l,m,p)=>{const y=kt(l,p.section),E=Zn.generate(y);return mr(E,m,!0)},pn=(l,m,p,y)=>{const E=Rs(l).rows,D=m.cells[0].column,I=E[m.cells[0].row],U=Yn(m.clipboard,m.generators,I),K=Or(D,l,U,m.generators,p);return Dc(K,m.cells[0].row,m.cells[0].column)},ep=(l,m,p,y)=>{const E=Rs(l).rows,D=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,I=E[m.cells[0].row],U=Yn(m.clipboard,m.generators,I),K=Or(D,l,U,m.generators,p);return Dc(K,m.cells[0].row,D)},X0=(l,m,p,y)=>{const E=Rs(l).rows,D=m.cells[0].row,I=E[D],U=Yn(m.clipboard,m.generators,I),K=qh(D,l,U,m.generators,p);return Dc(K,m.cells[0].row,m.cells[0].column)},Q0=(l,m,p,y)=>{const E=Rs(l).rows,D=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,I=E[m.cells[0].row],U=Yn(m.clipboard,m.generators,I),K=qh(D,l,U,m.generators,p);return Dc(K,D,m.cells[0].column)},p3=(l,m)=>{const p=Zn.fromTable(l);return aa(p,m).bind(E=>{const D=E[E.length-1],I=E[0].column,U=D.column+D.colspan,K=sn(re(p.all,ue=>wt(ue.cells,ke=>ke.column>=I&&ke.column<U)));return u2(K)}).getOr("")},K2=(l,m)=>{const p=Zn.fromTable(l);return aa(p,m).bind(u2).getOr("")},_s=(l,m)=>{const p=Zn.fromTable(l);return aa(p,m).bind(E=>{const D=E[E.length-1],I=E[0].row,U=D.row+D.rowspan,K=p.all.slice(I,U);return jS(K)}).getOr("")},J0=(l,m,p,y)=>E0(l,m,p,y.sizing),ev=(l,m,p,y)=>w0(l,m,p,y.sizing,y.resize),Y2=(l,m)=>it(m,p=>p.column===0&&p.isLocked),je=(l,m)=>it(m,p=>p.column+p.colspan>=l.grid.columns&&p.isLocked),tp=(l,m)=>{const p=Nh(l),y=Oc(m);return pe(y,(E,D)=>{const U=p[D.column].map(Ts).getOr(0);return E+U},0)},$g=l=>(m,p)=>aa(m,p).filter(y=>!(l?Y2:je)(m,y)).map(y=>({details:y,pixelDelta:tp(m,y)})),Od=(l,m)=>Hh(l,m).map(p=>({details:p,pixelDelta:-tp(l,p)})),ru=l=>(m,p)=>Gi(m,p).filter(y=>!(l?Y2:je)(m,y.cells)),Dd=Ac.transform("th"),np=Ac.transform("td"),Ig=(l,m,p,y)=>$r(Vu,aa,qe,qe,Ac.modification,l,m,p,y),b3=(l,m,p,y)=>$r(G2,aa,qe,qe,Ac.modification,l,m,p,y),op=(l,m,p,y)=>$r(q2,$g(!0),ev,qe,Ac.modification,l,m,p,y),vs=(l,m,p,y)=>$r(Bg,$g(!1),ev,qe,Ac.modification,l,m,p,y),au=(l,m,p,y)=>$r(Jh,Od,ev,Xh,Ac.modification,l,m,p,y),X2=(l,m,p,y)=>$r(Sw,aa,qe,Xh,Ac.modification,l,m,p,y),Af=(l,m,p,y)=>$r(z1,Hh,qe,qe,Dd,l,m,p,y),ju=(l,m,p,y)=>$r(K0,Hh,qe,qe,np,l,m,p,y),Wa=(l,m,p,y)=>$r(Uu,aa,qe,qe,Dd,l,m,p,y),Ew=(l,m,p,y)=>$r(Si,aa,qe,qe,np,l,m,p,y),Q2=(l,m,p,y)=>$r(g3,aa,qe,qe,np,l,m,p,y),Tw=(l,m,p,y)=>$r(Cm,Hh,qe,qe,Dd,l,m,p,y),v3=(l,m,p,y)=>$r(f3,Hh,qe,qe,np,l,m,p,y),y3=(l,m,p,y)=>$r(Y0,wg,J0,qe,Ac.merging,l,m,p,y),J2=(l,m,p,y)=>$r(h3,e3,J0,qe,Ac.merging,l,m,p,y),kw=(l,m,p,y)=>$r(ww,y0,J0,qe,Ac.modification,l,m,p,y),mt=(l,m,p,y)=>$r(pn,ru(!0),qe,qe,Ac.modification,l,m,p,y),eC=(l,m,p,y)=>$r(ep,ru(!1),qe,qe,Ac.modification,l,m,p,y),ha=(l,m,p,y)=>$r(X0,Gi,qe,qe,Ac.modification,l,m,p,y),tC=(l,m,p,y)=>$r(Q0,Gi,qe,qe,Ac.modification,l,m,p,y),nC=p3,oC=K2,C3=_s,On=(l,m)=>{const p=m.column,y=m.column+m.colspan-1,E=m.row,D=m.row+m.rowspan-1;return p<=l.finishCol&&y>=l.startCol&&E<=l.finishRow&&D>=l.startRow},Aw=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,_w=(l,m)=>{let p=!0;const y=At(Aw,m);for(let E=m.startRow;E<=m.finishRow;E++)for(let D=m.startCol;D<=m.finishCol;D++)p=p&&Zn.getAt(l,E,D).exists(y);return p?ce.some(m):ce.none()},x3=(l,m)=>Fr(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),S3=(l,m,p)=>{const y=Zn.findItem(l,m,Wo),E=Zn.findItem(l,p,Wo);return y.bind(D=>E.map(I=>x3(D,I)))},Ow=(l,m,p)=>S3(l,m,p).bind(y=>_w(l,y)),$7=(l,m,p,y)=>Zn.findItem(l,m,Wo).bind(E=>{const D=p>0?E.row+E.rowspan-1:E.row,I=y>0?E.column+E.colspan-1:E.column;return Zn.getAt(l,D+p,I+y).map(K=>K.element)}),d5=(l,m,p)=>S3(l,m,p).map(y=>{const E=Zn.filterItems(l,At(On,y));return re(E,D=>D.element)}),Dw=(l,m)=>{const p=(y,E)=>gd(E,y);return Zn.findItem(l,m,p).map(y=>y.element)},w3=(l,m,p)=>Wi(l).bind(y=>{const E=kl(y);return $7(E,l,m,p)}),Nn=(l,m,p)=>{const y=kl(l);return d5(y,m,p)},sC=(l,m,p,y,E)=>{const D=kl(l),I=Wo(l,p)?ce.some(m):Dw(D,m),U=Wo(l,E)?ce.some(y):Dw(D,y);return I.bind(K=>U.bind(ue=>d5(D,K,ue)))},xm=(l,m,p)=>{const y=kl(l);return Ow(y,m,p)},kl=Zn.fromTable,tv={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Rc=()=>Rt.fromTag("th"),sp=()=>Rt.fromTag("td"),V1=()=>Rt.fromTag("col"),nv=(l,m,p,y)=>{const E=Rt.fromTag("tr");for(let D=0;D<l;D++){const I=y<m||D<p?Rc():sp();D<p&&vr(I,"scope","row"),y<m&&vr(I,"scope","col"),Ao(I,Rt.fromTag("br")),Ao(E,I)}return E},rp=l=>{const m=Rt.fromTag("colgroup");return Ro(l,()=>Ao(m,V1())),m},ap=(l,m,p,y)=>Ro(l,E=>nv(m,p,y,E)),Rd=(l,m,p,y,E,D=tv)=>{const I=Rt.fromTag("table"),U=E!=="cells";ps(I,D.styles),fl(I,D.attributes),D.colGroups&&Ao(I,rp(m));const K=Math.min(l,p);if(U&&p>0){const Bt=Rt.fromTag("thead");Ao(I,Bt);const We=ap(p,m,E==="sectionCells"?K:0,y);Ii(Bt,We)}const ue=Rt.fromTag("tbody");Ao(I,ue);const ke=U?l-K:l,It=ap(ke,m,U?0:p,y);return Ii(ue,It),I},Dr=l=>{let m=[];return{bind:D=>{if(D===void 0)throw new Error("Event bind error: undefined handler");m.push(D)},unbind:D=>{m=wt(m,I=>I!==D)},trigger:(...D)=>{const I={};ae(l,(U,K)=>{I[U]=D[K]}),ae(m,U=>{U(I)})}}},Sm=l=>{const m=Ho(l,y=>({bind:y.bind,unbind:y.unbind})),p=Ho(l,y=>y.trigger);return{registry:m,trigger:p}},Rw=Zt(["compare","extract","mutate","sink"]),rC=Zt(["element","start","stop","destroy"]),Nw=Zt(["forceDrop","drop","move","delayDrop"]),E3=()=>{let l=ce.none();const m=()=>{l=ce.none()},p=(D,I)=>{const U=l.map(K=>D.compare(K,I));return l=ce.some(I),U},y=(D,I)=>{I.extract(D).each(K=>{p(I,K).each(ke=>{E.trigger.move(ke)})})},E=Sm({move:Dr(["info"])});return{onEvent:y,reset:m,events:E.registry}},fo=()=>{const l=Sm({move:Dr(["info"])});return{onEvent:qe,reset:qe,events:l.registry}},cu=()=>{const l=fo(),m=E3();let p=l;return{on:()=>{p.reset(),p=m},off:()=>{p.reset(),p=l},isOn:()=>p===m,onEvent:(U,K)=>{p.onEvent(U,K)},events:m.events}},_f=(l,m,p)=>{let y=!1;const E=Sm({start:Dr([]),stop:Dr([])}),D=cu(),I=()=>{cn.stop(),D.isOn()&&(D.off(),E.trigger.stop())},U=Eu(I,200),K=rt=>{cn.start(rt),D.on(),E.trigger.start()},ue=rt=>{U.cancel(),D.onEvent(rt,m)};D.events.move.bind(rt=>{m.mutate(l,rt.info)});const ke=()=>{y=!0},st=()=>{y=!1},It=()=>y,Bt=rt=>(...xn)=>{y&&rt.apply(null,xn)},cn=m.sink(Nw({forceDrop:I,drop:Bt(I),move:Bt(ue),delayDrop:Bt(U.throttle)}),p),We=()=>{cn.destroy()};return{element:cn.element,go:K,on:ke,off:st,isActive:It,destroy:We,events:E.registry}},cp=qo("ephox-dragster").resolve,bo=l=>{const m={layerClass:cp("blocker"),...l},p=Rt.fromTag("div");return vr(p,"role","presentation"),vr(p,"data-mce-bogus","all"),ps(p,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),hl(p,cp("blocker")),hl(p,m.layerClass),{element:V(p),destroy:()=>{ta(p)}}};var U1=Rw({compare:(l,m)=>ws(m.left-l.left,m.top-l.top),extract:l=>ce.some(ws(l.x,l.y)),sink:(l,m)=>{const p=bo(m),y=Ou(p.element(),"mousedown",l.forceDrop),E=Ou(p.element(),"mouseup",l.drop),D=Ou(p.element(),"mousemove",l.move),I=Ou(p.element(),"mouseout",l.delayDrop),U=()=>{p.destroy(),E.unbind(),D.unbind(),I.unbind(),y.unbind()},K=ke=>{Ao(ke,p.element())},ue=()=>{ta(p.element())};return rC({element:p.element,start:K,stop:ue,destroy:U})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const A3=(l,m={})=>{const p=m.mode??U1;return _f(l,p,m)},j1=qo("ephox-snooker").resolve,O3=()=>{const l=Sm({drag:Dr(["xDelta","yDelta"])});return{mutate:(p,y)=>{l.trigger.drag(p,y)},events:l.registry}},W1=()=>{const l=Sm({drag:Dr(["xDelta","yDelta","target"])});let m=ce.none();const p=O3();return p.events.drag.bind(D=>{m.each(I=>{l.trigger.drag(D.xDelta,D.yDelta,I)})}),{assign:D=>{m=ce.some(D)},get:()=>m,mutate:p.mutate,events:l.registry}},Mw=(l,m,p,y,E)=>{const D=Rt.fromTag("div");return ps(D,{position:"absolute",left:m-y/2+"px",top:p+"px",height:E+"px",width:y+"px"}),fl(D,{"data-mce-bogus":"all","data-column":l,role:"presentation"}),D},D3=(l,m,p,y,E)=>{const D=Rt.fromTag("div");return ps(D,{position:"absolute",left:m+"px",top:p-E/2+"px",height:E+"px",width:y+"px"}),fl(D,{"data-mce-bogus":"all","data-row":l,role:"presentation"}),D},ov=j1("resizer-bar"),aC=j1("resizer-rows"),cC=j1("resizer-cols"),Pw=7,R3=(l,m)=>Un(l.all,(p,y)=>m(p.element)?[y]:[]),Bw=(l,m)=>{const p=[];return Ro(l.grid.columns,y=>{Zn.getColumnAt(l,y).map(D=>D.element).forall(m)&&p.push(y)}),wt(p,y=>{const E=Zn.filterItems(l,D=>D.column===y);return Tt(E,D=>m(D.element))})},iC=l=>{const m=Kl(l.parent(),"."+ov);ae(m,ta)},$w=(l,m,p)=>{const y=l.origin();ae(m,E=>{E.each(D=>{const I=p(y,D);hl(I,ov),Ao(l.parent(),I)})})},Eo=(l,m,p,y)=>{$w(l,m,(E,D)=>{const I=Mw(D.col,D.x-E.left,p.top-E.top,Pw,y);return hl(I,cC),I})},Iw=(l,m,p,y)=>{$w(l,m,(E,D)=>{const I=D3(D.row,p.left-E.left,D.y-E.top,y,Pw);return hl(I,aC),I})},lC=(l,m,p,y,E)=>{const D=Jn(p),I=m.isResizable,U=y.length>0?v1.positions(y,p):[],K=U.length>0?R3(l,I):[],ue=wt(U,(Bt,cn)=>it(K,We=>cn===We));Iw(m,ue,D,Ts(p));const ke=E.length>0?or.positions(E,p):[],st=ke.length>0?Bw(l,I):[],It=wt(ke,(Bt,cn)=>it(st,We=>cn===We));Eo(m,It,D,r0(p))},sv=(l,m)=>{if(iC(l),l.isResizable(m)){const p=Zn.fromTable(m),y=f2(p),E=Nh(p);lC(p,l,m,y,E)}},wm=(l,m)=>{const p=Kl(l.parent(),"."+ov);ae(p,m)},uC=l=>{wm(l,m=>{oa(m,"display","none")})},N3=l=>{wm(l,m=>{oa(m,"display","block")})},Lw=l=>pl(l,aC),ip=l=>pl(l,cC),Fw=j1("resizer-bar-dragging"),Z1=l=>{const m=W1(),p=A3(m,{});let y=ce.none();const E=(We,rt)=>ce.from(Vc(We,rt));m.events.drag.bind(We=>{E(We.target,"data-row").each(rt=>{const xn=Br(We.target,"top");oa(We.target,"top",xn+We.yDelta+"px")}),E(We.target,"data-column").each(rt=>{const xn=Br(We.target,"left");oa(We.target,"left",xn+We.xDelta+"px")})});const D=(We,rt)=>{const xn=Br(We,rt),Vn=lm(We,"data-initial-"+rt,0);return xn-Vn};p.events.stop.bind(()=>{m.get().each(We=>{y.each(rt=>{E(We,"data-row").each(xn=>{const Vn=D(We,"top");Mo(We,"data-initial-top"),cn.trigger.adjustHeight(rt,Vn,parseInt(xn,10))}),E(We,"data-column").each(xn=>{const Vn=D(We,"left");Mo(We,"data-initial-left"),cn.trigger.adjustWidth(rt,Vn,parseInt(xn,10))}),sv(l,rt)})})});const I=(We,rt)=>{cn.trigger.startAdjust(),m.assign(We),vr(We,"data-initial-"+rt,Br(We,rt)),hl(We,Fw),oa(We,"opacity","0.2"),p.go(l.dragContainer())},U=Ou(l.parent(),"mousedown",We=>{Lw(We.target)&&I(We.target,"top"),ip(We.target)&&I(We.target,"left")}),K=We=>Wo(We,l.view()),ue=We=>ir(We,"table",K).filter(mg),ke=We=>pl(We,"ephox-snooker-resizer-bar")||pl(We,"ephox-dragster-blocker"),st=Ou(l.view(),"mouseover",We=>{ue(We.target).fold(()=>{Cn(We.target)&&!ke(We.target)&&iC(l)},rt=>{p.isActive()&&(y=ce.some(rt),sv(l,rt))})}),It=()=>{U.unbind(),st.unbind(),p.destroy(),iC(l)},Bt=We=>{sv(l,We)},cn=Sm({adjustHeight:Dr(["table","delta","row"]),adjustWidth:Dr(["table","delta","column"]),startAdjust:Dr([])});return{destroy:It,refresh:Bt,on:p.on,off:p.off,hideBars:At(uC,l),showBars:At(N3,l),events:cn.registry}},dC={create:(l,m,p)=>{const y=v1,E=or,D=Z1(l),I=Sm({beforeResize:Dr(["table","type"]),afterResize:Dr(["table","type"]),startDrag:Dr([])});return D.events.adjustHeight.bind(U=>{const K=U.table;I.trigger.beforeResize(K,"row");const ue=y.delta(U.delta,K);S0(K,ue,U.row),I.trigger.afterResize(K,"row")}),D.events.startAdjust.bind(U=>{I.trigger.startDrag()}),D.events.adjustWidth.bind(U=>{const K=U.table;I.trigger.beforeResize(K,"col");const ue=E.delta(U.delta,K),ke=p(K);Vh(K,ue,U.column,m,ke),I.trigger.afterResize(K,"col")}),{on:D.on,off:D.off,refreshBars:D.refresh,hideBars:D.hideBars,showBars:D.showBars,destroy:D.destroy,events:I.registry}}},Of=l=>m=>m.options.get(l),Hw="100%",zw=l=>{const m=l.dom,p=m.getParent(l.selection.getStart(),m.isBlock)??l.getBody();return sa(Rt.fromDom(p))+"px"},Vw=(l,m)=>K1(l)||!mC(l)?m:Nd(l)?{...m,width:zw(l)}:{...m,width:Hw},Uw=(l,m)=>K1(l)||mC(l)?m:Nd(l)?{...m,width:zw(l)}:{...m,width:Hw},h5=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:p=>{const y=co(["section","cells","sectionCells","auto"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:p=>{const y=co(["preservetable","resizetable"],p);return y?{value:p,valid:y}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0}),m("table_merge_content_on_paste",{processor:"boolean",default:!0})},jw=l=>ce.from(l.options.get("table_clone_elements")),rv=l=>{const m=l.options.get("object_resizing");return co(m.split(","),"table")},av=Of("table_header_type"),q1=Of("table_column_resizing"),cv=l=>q1(l)==="preservetable",iv=l=>q1(l)==="resizetable",zt=Of("table_sizing_mode"),Df=l=>zt(l)==="relative",Nd=l=>zt(l)==="fixed",K1=l=>zt(l)==="responsive",Ww=Of("table_resize_bars"),mC=Of("table_style_by_css"),fC=Of("table_merge_content_on_paste"),Zw=l=>{const m=l.options,p=m.get("table_default_attributes");return m.isSet("table_default_attributes")?p:Uw(l,p)},Gw=l=>{const m=l.options,p=m.get("table_default_styles");return m.isSet("table_default_styles")?p:Vw(l,p)},qw=Of("table_use_colgroups"),lv=l=>Rt.fromDom(l.getBody()),Rr=l=>m=>Wo(m,lv(l)),iu=l=>{Mo(l,"data-mce-style");const m=p=>Mo(p,"data-mce-style");ae(mf(l),m),ae(d0(l),m),ae(l2(l),m)},uv=l=>Rt.fromDom(l.selection.getStart()),Kw=l=>l.getBoundingClientRect().width,Yw=l=>l.getBoundingClientRect().height,Xw=l=>(m,p)=>{const y=m.dom.getStyle(p,l)||m.dom.getAttrib(p,l);return ce.from(y).filter(rr)},dv=Xw("width"),gC=Xw("height"),Qw=l=>/^(\d+(\.\d+)?)%$/.test(l),Jw=l=>/^(\d+(\.\d+)?)px$/.test(l),Y1=l=>s1(l,Hc("table")).exists(mg),hC=l=>Cc(l,"table"),mv=(l,m,p)=>{const y=E=>D=>p!==void 0&&p(D)||Wo(D,E);return Wo(l,m)?ce.some({boxes:ce.some([l]),start:l,finish:m}):hC(l).bind(E=>hC(m).bind(D=>{if(Wo(E,D))return ce.some({boxes:Nn(E,l,m),start:l,finish:m});if(gd(E,D)){const I=Io(m,"td,th",y(E)),U=I.length>0?I[I.length-1]:m;return ce.some({boxes:sC(E,l,E,m,D),start:l,finish:U})}else if(gd(D,E)){const I=Io(l,"td,th",y(D)),U=I.length>0?I[I.length-1]:l;return ce.some({boxes:sC(D,l,E,m,D),start:l,finish:U})}else return Fu(l,m).shared.bind(I=>ir(I,"table",p).bind(U=>{const K=Io(m,"td,th",y(U)),ue=K.length>0?K[K.length-1]:m,ke=Io(l,"td,th",y(U)),st=ke.length>0?ke[ke.length-1]:l;return ce.some({boxes:sC(U,l,E,m,D),start:st,finish:ue})}))}))},pC=(l,m)=>{const p=Kl(l,m);return p.length>0?ce.some(p):ce.none()},M3=(l,m)=>M(l,p=>Ca(p,m)),eE=(l,m,p)=>Nu(l,m).bind(y=>Nu(l,p).bind(E=>ns(hC,[y,E]).map(D=>({first:y,last:E,table:D})))),tE=(l,m)=>Cc(l,"table").bind(p=>Nu(p,m).bind(y=>mv(y,l).bind(E=>E.boxes.map(D=>({boxes:D,start:E.start,finish:E.finish}))))),fv=(l,m,p,y,E)=>M3(l,E).bind(D=>w3(D,m,p).bind(I=>tE(I,y))),Lg=(l,m)=>pC(l,m),nE=(l,m,p)=>eE(l,m,p).bind(y=>{const E=K=>Wo(l,K),D="thead,tfoot,tbody,table",I=Cc(y.first,D,E),U=Cc(y.last,D,E);return I.bind(K=>U.bind(ue=>Wo(K,ue)?xm(y.table,y.first,y.last):ce.none()))}),oE=Ye,gv=l=>{const m=(y,E)=>wa(y,E).exists(D=>parseInt(D,10)>1),p=y=>m(y,"rowspan")||m(y,"colspan");return l.length>0&&Tt(l,p)?ce.some(l):ce.none()},P3=(l,m,p)=>m.length<=1?ce.none():nE(l,p.firstSelectedSelector,p.lastSelectedSelector).map(y=>({bounds:y,cells:m})),Fg={create:(l,m)=>({selection:l,kill:m})},bC=(l,m,p,y)=>{switch(l.tag){case"none":return m();case"single":return y(l.element);case"multiple":return p(l.elements)}},$3=()=>({tag:"none"}),I3=l=>({tag:"multiple",elements:l}),sE=l=>({tag:"single",element:l}),L3=(l,m,p)=>({get:()=>Lg(l(),p).fold(()=>m().fold($3,sE),I3)}),hv={create:(l,m,p,y)=>({start:ur.on(l,m),finish:ur.on(p,y)})},yC=(l,m)=>{const p=ht(l,m);return Mu.create(Rt.fromDom(p.startContainer),p.startOffset,Rt.fromDom(p.endContainer),p.endOffset)},Md=hv.create,rE=(l,m,p,y,E,D,I)=>Wo(p,E)&&y===D?ce.none():ir(p,"td,th",m).bind(U=>ir(E,"td,th",m).bind(K=>pv(l,m,U,K,I))),pv=(l,m,p,y,E)=>Wo(p,y)?ce.none():mv(p,y,m).bind(D=>{const I=D.boxes.getOr([]);return I.length>1?(E(l,I,D.start,D.finish),ce.some(Fg.create(ce.some(Md(p,0,p,Yl(p))),!0))):ce.none()}),F3=(l,m,p,y,E)=>{const D=I=>(E.clearBeforeUpdate(p),E.selectRange(p,I.boxes,I.start,I.finish),I.boxes);return fv(y,l,m,E.firstSelectedSelector,E.lastSelectedSelector).map(D)},Rf=Xr.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),H3=(l,m,p)=>{const y=l.getRect(m),E=l.getRect(p);return E.right>y.left&&E.left<y.right},z3=l=>ir(l,"tr"),lp={...Rf,verify:(l,m,p,y,E,D,I)=>ir(y,"td,th",I).bind(U=>ir(m,"td,th",I).map(K=>Wo(U,K)?Wo(y,U)&&Yl(U)===E?D(K):Rf.none("in same cell"):ns(z3,[U,K]).fold(()=>H3(l,K,U)?Rf.success():D(K),ue=>D(K)))).getOr(Rf.none("default")),cata:(l,m,p,y,E)=>l.fold(m,p,y,E)},X1=Hc("br"),CC=(l,m,p)=>m(l,p).bind(y=>cm(y)&&ql(y).trim().length===0?CC(y,m,p):ce.some(y)),V3=(l,m,p)=>p.traverse(m).orThunk(()=>CC(m,p.gather,l)).map(p.relative),U3=(l,m)=>bc(l,m).filter(X1).orThunk(()=>bc(l,m-1).filter(X1)),bv=(l,m,p,y)=>U3(m,p).bind(E=>y.traverse(E).fold(()=>CC(E,y.gather,l).map(y.relative),D=>wd(D).map(I=>ur.on(I.parent,I.index)))),aE=(l,m,p,y)=>(X1(m)?V3(l,m,y):bv(l,m,p,y)).map(D=>({start:D,finish:D})),cE=l=>lp.cata(l,m=>ce.none(),()=>ce.none(),m=>ce.some(bm(m,0)),m=>ce.some(bm(m,Yl(m)))),Q1=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),vv=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),xC=(l,m,p)=>({left:l.left+m,top:l.top+p,right:l.right+m,bottom:l.bottom+p}),J1=l=>l.top,SC=l=>l.bottom,j3=(l,m,p)=>p>=0&&p<Yl(m)?l.getRangedRect(m,p,m,p+1):p>0?l.getRangedRect(m,p-1,m,p):ce.none(),eb=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),iE=(l,m)=>ce.some(l.getRect(m)),yv=(l,m,p)=>Ks(m)?iE(l,m).map(eb):cm(m)?j3(l,m,p).map(eb):ce.none(),Cv=(l,m)=>Ks(m)?iE(l,m).map(eb):cm(m)?l.getRangedRect(m,0,m,Yl(m)).map(eb):ce.none(),Hg=5,W3=100,Pd=Xr.generate([{none:[]},{retry:["caret"]}]),Z3=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,lE=(l,m,p)=>s1(m,Hu).fold(Yt,y=>Cv(l,y).exists(E=>Z3(p,E))),G3=(l,m,p,y,E)=>{const D=Q1(E,Hg);return Math.abs(p.bottom-y.bottom)<1||p.top>E.bottom?Pd.retry(D):p.top===E.bottom?Pd.retry(Q1(E,1)):lE(l,m,E)?Pd.retry(xC(D,Hg,0)):Pd.none()},xv={point:J1,adjuster:(l,m,p,y,E)=>{const D=vv(E,Hg);return Math.abs(p.top-y.top)<1||p.bottom<E.top?Pd.retry(D):p.bottom===E.top?Pd.retry(vv(E,1)):lE(l,m,E)?Pd.retry(xC(D,Hg,0)):Pd.none()},move:vv,gather:hw},q3={point:SC,adjuster:G3,move:Q1,gather:ou},K3=(l,m,p)=>l.elementFromPoint(m,p).filter(y=>tr(y)==="table").isSome(),Y3=(l,m,p,y,E)=>wC(l,m,p,m.move(y,Hg),E),wC=(l,m,p,y,E)=>E===0?ce.some(y):K3(l,y.left,m.point(y))?Y3(l,m,p,y,E-1):l.situsFromPoint(y.left,m.point(y)).bind(D=>D.start.fold(ce.none,I=>Cv(l,I).bind(U=>m.adjuster(l,I,U,p,y).fold(ce.none,K=>wC(l,m,p,K,E-1))).orThunk(()=>ce.some(y)),ce.none)),X3=(l,m,p)=>l.point(m)>p.getInnerHeight()?ce.some(l.point(m)-p.getInnerHeight()):l.point(m)<0?ce.some(-l.point(m)):ce.none(),uE=(l,m,p)=>{const y=l.move(p,Hg),E=wC(m,l,p,y,W3).getOr(y);return X3(l,E,m).fold(()=>m.situsFromPoint(E.left,l.point(E)),D=>(m.scrollBy(0,D),m.situsFromPoint(E.left,l.point(E)-D)))},EC={tryUp:At(uE,xv),tryDown:At(uE,q3),getJumpSize:V(Hg)},Q3=20,J3=(l,m,p)=>l.getSelection().bind(y=>aE(m,y.finish,y.foffset,p).fold(()=>ce.some(bm(y.finish,y.foffset)),E=>{const D=l.fromSitus(E),I=lp.verify(l,y.finish,y.foffset,D.finish,D.foffset,p.failure,m);return cE(I)})),TC=(l,m,p,y,E,D)=>D===0?ce.none():tb(l,m,p,y,E).bind(I=>{const U=l.fromSitus(I),K=lp.verify(l,p,y,U.finish,U.foffset,E.failure,m);return lp.cata(K,()=>ce.none(),()=>ce.some(I),ue=>Wo(p,ue)&&y===0?dE(l,p,y,vv,E):TC(l,m,ue,0,E,D-1),ue=>Wo(p,ue)&&y===Yl(ue)?dE(l,p,y,Q1,E):TC(l,m,ue,Yl(ue),E,D-1))}),dE=(l,m,p,y,E)=>yv(l,m,p).bind(D=>mn(l,E,y(D,EC.getJumpSize()))),mn=(l,m,p)=>{const y=ii().browser;return y.isChromium()||y.isSafari()||y.isFirefox()?m.retry(l,p):ce.none()},tb=(l,m,p,y,E)=>yv(l,p,y).bind(D=>mn(l,E,D)),mE=(l,m,p)=>J3(l,m,p).bind(y=>TC(l,m,y.element,y.offset,p,Q3).map(l.fromSitus)),eA=(l,m)=>i0(l,p=>ne(p).exists(y=>Wo(y,m))),kC=(l,m,p,y,E)=>ir(y,"td,th",m).bind(D=>ir(D,"table",m).bind(I=>eA(E,I)?mE(l,m,p).bind(U=>ir(U.finish,"td,th",m).map(K=>({start:D,finish:K,range:U}))):ce.none())),nb=(l,m,p,y,E,D)=>D(y,m).orThunk(()=>kC(l,m,p,y,E).map(I=>{const U=I.range;return Fg.create(ce.some(Md(U.start,U.soffset,U.finish,U.foffset)),!0)})),Sv=(l,m)=>ir(l,"tr",m).bind(p=>ir(p,"table",m).bind(y=>{const E=Kl(y,"tr");return Wo(p,E[0])?ac(y,D=>lr(D).isSome(),m).map(D=>{const I=Yl(D);return Fg.create(ce.some(Md(D,I,D,I)),!0)}):ce.none()})),ob=(l,m)=>ir(l,"tr",m).bind(p=>ir(p,"table",m).bind(y=>{const E=Kl(y,"tr");return Wo(p,E[E.length-1])?Tl(y,D=>af(D).isSome(),m).map(D=>Fg.create(ce.some(Md(D,0,D,0)),!0)):ce.none()})),up=(l,m,p,y,E,D,I)=>kC(l,p,y,E,D).bind(U=>pv(m,p,U.start,U.finish,I)),AC=(l,m)=>ir(l,"td,th",m),_C=l=>pc(l).exists(mg),fE=(l,m,p,y)=>{const E=Mr(),D=E.clear,I=ke=>{E.on(st=>{y.clearBeforeUpdate(m),AC(ke.target,p).each(It=>{mv(st,It,p).each(Bt=>{const cn=Bt.boxes.getOr([]);if(cn.length===1){const We=cn[0],rt=fg(We)==="false",xn=Pn(rf(ke.target),We,Wo);rt&&xn&&y.selectRange(m,cn,We,We)}else cn.length>1&&(y.selectRange(m,cn,Bt.start,Bt.finish),l.selectContents(It))})})})};return{clearstate:D,mousedown:ke=>{y.clear(m),AC(ke.target,p).filter(_C).each(E.set)},mouseover:ke=>{I(ke)},mouseup:ke=>{I(ke),D()}}},OC={traverse:Jm,gather:ou,relative:ur.before,retry:EC.tryDown,failure:lp.failedDown},gE={traverse:qp,gather:hw,relative:ur.before,retry:EC.tryUp,failure:lp.failedUp},dp=l=>m=>m===l,Em=dp(38),mp=dp(40),Tm=l=>l>=37&&l<=40,km={isBackward:dp(37),isForward:dp(39)},hE={isBackward:dp(39),isForward:dp(37)},sb=l=>({elementFromPoint:(rt,xn)=>Rt.fromPoint(Rt.fromDom(l.document),rt,xn),getRect:rt=>rt.dom.getBoundingClientRect(),getRangedRect:(rt,xn,Vn,Gt)=>{const Lo=k.exact(rt,xn,Vn,Gt);return bg(l,Lo)},getSelection:()=>pg(l).map(rt=>yC(l,rt)),fromSitus:rt=>{const xn=k.relative(rt.start,rt.finish);return yC(l,xn)},situsFromPoint:(rt,xn)=>lf(l,rt,xn).map(Vn=>hv.create(Vn.start,Vn.soffset,Vn.finish,Vn.foffset)),clearSelection:()=>{Th(l)},collapseSelection:(rt=!1)=>{pg(l).each(xn=>xn.fold(Vn=>Vn.collapse(rt),(Vn,Gt)=>{const Lo=rt?Vn:Gt;Pu(l,Lo,Lo)},(Vn,Gt,Lo,Fo)=>{const Ln=rt?Vn:Lo,xr=rt?Gt:Fo;vl(l,Ln,xr,Ln,xr)}))},setSelection:rt=>{vl(l,rt.start,rt.soffset,rt.finish,rt.foffset)},setRelativeSelection:(rt,xn)=>{Pu(l,rt,xn)},selectNode:rt=>{cf(l,rt,!1)},selectContents:rt=>{cf(l,rt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>Xo(Rt.fromDom(l.document)).top,scrollBy:(rt,xn)=>{yc(rt,xn,Rt.fromDom(l.document))}}),lu=(l,m)=>({rows:l,cols:m}),pE=(l,m,p,y)=>{const E=sb(l),D=fE(E,m,p,y);return{clearstate:D.clearstate,mousedown:D.mousedown,mouseover:D.mouseover,mouseup:D.mouseup}},bE=l=>s1(l,n0).exists(mg),DC=(l,m)=>bE(l)||bE(m),RC=(l,m,p,y)=>{const E=sb(l),D=()=>(y.clear(m),ce.none());return{keydown:(K,ue,ke,st,It,Bt)=>{const cn=K.raw,We=cn.which,rt=cn.shiftKey===!0;return pC(m,y.selectedSelector).fold(()=>(Tm(We)&&!rt&&y.clearBeforeUpdate(m),Tm(We)&&rt&&!DC(ue,st)?ce.none:mp(We)&&rt?At(up,E,m,p,OC,st,ue,y.selectRange):Em(We)&&rt?At(up,E,m,p,gE,st,ue,y.selectRange):mp(We)?At(nb,E,p,OC,st,ue,ob):Em(We)?At(nb,E,p,gE,st,ue,Sv):ce.none),Vn=>{const Gt=Lo=>()=>gt(Lo,Ln=>F3(Ln.rows,Ln.cols,m,Vn,y)).fold(()=>eE(m,y.firstSelectedSelector,y.lastSelectedSelector).map(Ln=>{const xr=mp(We)||Bt.isForward(We)?ur.after:ur.before;return E.setRelativeSelection(ur.on(Ln.first,0),xr(Ln.table)),y.clear(m),Fg.create(ce.none(),!0)}),Ln=>ce.some(Fg.create(ce.none(),!0)));return Tm(We)&&rt&&!DC(ue,st)?ce.none:mp(We)&&rt?Gt([lu(1,0)]):Em(We)&&rt?Gt([lu(-1,0)]):Bt.isBackward(We)&&rt?Gt([lu(0,-1),lu(-1,0)]):Bt.isForward(We)&&rt?Gt([lu(0,1),lu(1,0)]):Tm(We)&&!rt?D:ce.none})()},keyup:(K,ue,ke,st,It)=>pC(m,y.selectedSelector).fold(()=>{const Bt=K.raw,cn=Bt.which;return Bt.shiftKey===!0&&Tm(cn)&&DC(ue,st)?rE(m,p,ue,ke,st,It,y.selectRange):ce.none()},ce.none)}},vE=(l,m,p,y)=>{const E=sb(l);return(D,I)=>{y.clearBeforeUpdate(m),mv(D,I,p).each(U=>{const K=U.boxes.getOr([]);y.selectRange(m,K,U.start,U.finish),E.selectContents(I),E.collapseSelection()})}},CE={byClass:l=>{const m=c1(l.selected),p=c0([l.selected,l.lastSelected,l.firstSelected]),y=D=>{const I=Kl(D,l.selectedSelector);ae(I,p)};return{clearBeforeUpdate:y,clear:y,selectRange:(D,I,U,K)=>{y(D),ae(I,m),hl(U,l.firstSelected),hl(K,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,p)=>{const y=K=>{Mo(K,l.selected),Mo(K,l.firstSelected),Mo(K,l.lastSelected)},E=K=>{vr(K,l.selected,"1")},D=K=>{I(K),p()},I=K=>{const ue=Kl(K,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);ae(ue,y)};return{clearBeforeUpdate:I,clear:D,selectRange:(K,ue,ke,st)=>{D(K),ae(ue,E),vr(ke,l.firstSelected,"1"),vr(st,l.lastSelected,"1"),m(ue,ke,st)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},zg="data-mce-selected",NC="td["+zg+"],th["+zg+"]",xE="["+zg+"]",MC="data-mce-first-selected",PC="td["+MC+"],th["+MC+"]",BC="data-mce-last-selected",nA="td["+BC+"],th["+BC+"]",Vg=xE,Ug={selected:zg,selectedSelector:NC,firstSelected:MC,firstSelectedSelector:PC,lastSelected:BC,lastSelectedSelector:nA},wv=(l,m,p)=>({element:p,mergable:P3(m,l,Ug),unmergable:gv(l),selection:oE(l)}),Ev=(l,m,p)=>({element:l,clipboard:m,generators:p}),SE=(l,m,p,y)=>({selection:oE(l),clipboard:p,generators:y}),oA=l=>Wi(l).bind(m=>Lg(m,Ug.firstSelectedSelector)).fold(V(l),m=>m[0]),wE=l=>(m,p)=>{const y=tr(m),E=y==="col"||y==="colgroup"?oA(m):m;return ir(E,l,p)},Bn=wE("th,td,caption"),Tv=wE("th,td"),Ki=l=>Vr(l.model.table.getSelectedCells()),rb=l=>wt(Ki(l),m=>Ca(m,Ug.selectedSelector)),sA=l=>Wi(l[0]).map(m=>{const p=k0(m,Vg);return iu(p),[p]}),kv=(l,m)=>re(m,p=>l.selection.serializer.serialize(p.dom,{})).join(""),rA=(l,m)=>{const p=l.getDoc(),y=Xp(Rt.fromDom(l.getBody())),E=Rt.fromTag("div",p);vr(E,"data-mce-bogus","all"),ps(E,{position:"fixed",left:"-9999999px",top:"0",overflow:"hidden",opacity:"0"});const D=Wl(y);Ii(E,m),Ao(D,E);const I=E.dom.innerText;return ta(E),I},$C=(l,m)=>{l.on("BeforeGetContent",p=>{const y=E=>{p.preventDefault(),sA(E).each(D=>{const I=p.format==="text"?rA(l,D):kv(l,D);p.content=I})};if(p.selection===!0){const E=rb(l);E.length>=1&&y(E)}}),l.on("BeforeSetContent",p=>{if(p.selection===!0&&p.paste===!0){const y=Ki(l);Ae(y).each(E=>{Wi(E).each(D=>{const I=wt(vh(p.content),K=>tr(K)!=="meta"),U=Hc("table");if(fC(l)&&I.length===1&&U(I[0])){p.preventDefault();const K=Rt.fromDom(l.getDoc()),ue=F2(K),ke=Ev(E,I[0],ue);m.pasteCells(D,ke).each(()=>{l.focus()})}})})}})},IC=(l,m)=>l.dispatch("NewRow",{node:m}),ab=(l,m)=>l.dispatch("NewCell",{node:m}),Wu=(l,m,p)=>{l.dispatch("TableModified",{...p,table:m})},fp=(l,m,p,y,E)=>{l.dispatch("TableSelectionChange",{cells:m,start:p,finish:y,otherCells:E})},aA=l=>{l.dispatch("TableSelectionClear")},jg=(l,m,p,y,E)=>{l.dispatch("ObjectResizeStart",{target:m,width:p,height:y,origin:E})},cb=(l,m,p,y,E)=>{l.dispatch("ObjectResized",{target:m,width:p,height:y,origin:E})},Av={structure:!1,style:!0},Kr={structure:!0,style:!1},cA={structure:!0,style:!0},LC=(l,m)=>Df(l)?Ih.percentageSize(m):Nd(l)?Ih.pixelSize(m):Ih.getTableSize(m),Nf=(l,m,p)=>{const y=Da=>tr(lv(Da))==="table",E=Da=>!y(l)||M1(Da).rows>1,D=Da=>!y(l)||M1(Da).columns>1,I=jw(l),U=iv(l)?qe:E1,K=Da=>{switch(av(l)){case"section":return mm.section();case"sectionCells":return mm.sectionCells();case"cells":return mm.cells();default:return mm.getTableSectionType(Da,"section")}},ue=(Da,Bv)=>Bv.cursor.fold(()=>{const db=mf(Da);return Ae(db).filter(Cn).map(_m=>{p.clearSelectedCells(Da.dom);const ic=l.dom.createRng();return ic.selectNode(_m.dom),l.selection.setRng(ic),vr(_m,"data-mce-selected","1"),ic})},db=>{const _m=B0(db),ic=l.dom.createRng();return ic.setStart(_m.element.dom,_m.offset),ic.setEnd(_m.element.dom,_m.offset),l.selection.setRng(ic),p.clearSelectedCells(Da.dom),ce.some(ic)}),ke=(Da,Bv,db,_m)=>(ic,fA,DE=!1)=>{iu(ic);const Xt=Rt.fromDom(l.getDoc()),Qc=Ef(db,Xt,I),gA={sizing:LC(l,ic),resize:iv(l)?_h():VS(),section:K(ic)};return Bv(ic)?Da(ic,fA,Qc,gA).bind($v=>{m.refresh(ic.dom),ae($v.newRows,Zg=>{IC(l,Zg.dom)}),ae($v.newCells,Zg=>{ab(l,Zg.dom)});const RE=ue(ic,$v);return Cn(ic)&&(iu(ic),DE||Wu(l,ic.dom,_m)),RE.map(Zg=>({rng:Zg,effect:_m}))}):ce.none()},st=ke(X2,E,qe,Kr),It=ke(au,D,qe,Kr),Bt=ke(Ig,X,qe,Kr),cn=ke(b3,X,qe,Kr),We=ke(op,X,U,Kr),rt=ke(vs,X,U,Kr),xn=ke(y3,X,qe,Kr),Vn=ke(J2,X,qe,Kr),Gt=ke(mt,X,qe,Kr),Lo=ke(eC,X,qe,Kr),Fo=ke(ha,X,qe,Kr),Ln=ke(tC,X,qe,Kr),xr=ke(kw,X,qe,cA),Al=ke(Tw,X,qe,Kr),Am=ke(v3,X,qe,Kr),Bf=ke(Af,X,qe,Kr),Wg=ke(ju,X,qe,Kr),Qo=ke(Wa,X,qe,Kr),Nc=ke(Ew,X,qe,Kr),Js=ke(Q2,X,qe,Kr);return{deleteRow:st,deleteColumn:It,insertRowsBefore:Bt,insertRowsAfter:cn,insertColumnsBefore:We,insertColumnsAfter:rt,mergeCells:xn,unmergeCells:Vn,pasteColsBefore:Gt,pasteColsAfter:Lo,pasteRowsBefore:Fo,pasteRowsAfter:Ln,pasteCells:xr,makeCellsHeader:Al,unmakeCellsHeader:Am,makeColumnsHeader:Bf,unmakeColumnsHeader:Wg,makeRowsHeader:Qo,makeRowsBody:Nc,makeRowsFooter:Js,getTableRowType:C3,getTableCellType:oC,getTableColType:nC}},Bd=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},FC=(l,m)=>{Nu(m,"td,th").each(At(Bd,l))},EE=(l,m)=>{ae(Kl(m,"tr"),p=>{IC(l,p.dom),ae(Kl(p,"th,td"),y=>{ab(l,y.dom)})})},iA=l=>Ce(l)&&l.indexOf("%")!==-1,_v=(l,m,p,y,E)=>{const D=Gw(l),I={styles:D,attributes:Zw(l),colGroups:qw(l)};return l.undoManager.ignore(()=>{const U=Rd(p,m,E,y,av(l),I);vr(U,"data-mce-id","__mce");const K=s0(U);l.insertContent(K),l.addVisual()}),Nu(lv(l),'table[data-mce-id="__mce"]').map(U=>(Nd(l)?I2(U):K1(l)?Sf(U):(Df(l)||iA(D.width))&&Dg(U),iu(U),Mo(U,"data-mce-id"),EE(l,U),FC(l,U),U.dom)).getOrNull()},ib=(l,m,p,y={})=>{const E=D=>Dt(D)&&D>0;if(E(m)&&E(p)){const D=y.headerRows||0,I=y.headerColumns||0;return _v(l,p,m,I,D)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var Mf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Ov="x-tinymce/dom-table-",Dv=Ov+"rows",Pf=Ov+"columns",lb=l=>{const m=Mf.FakeClipboardItem(l);Mf.write([m])},HC=l=>{const m=Mf.read()??[];return gt(m,p=>ce.from(p.getType(l)))},Rv=l=>{HC(l).isSome()&&Mf.clear()},Zu=l=>{l.fold($d,m=>lb({[Dv]:m}))},TE=()=>HC(Dv),$d=()=>Rv(Dv),zC=l=>{l.fold(gp,m=>lb({[Pf]:m}))},Nv=()=>HC(Pf),gp=()=>Rv(Pf),ub=l=>Bn(uv(l),Rr(l)).filter(Y1),Mv=l=>Tv(uv(l),Rr(l)).filter(Y1),lA=(l,m)=>{const p=Rr(l),y=()=>ub(l).each(rt=>{Wi(rt,p).filter(se(p)).each(xn=>{const Vn=Rt.fromText("");if(ml(xn,Vn),ta(xn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Gt=l.dom.createRng();Gt.setStart(Vn.dom,0),Gt.setEnd(Vn.dom,0),l.selection.setRng(Gt),l.nodeChanged()}})}),E=rt=>ub(l).each(xn=>{K1(l)||Nd(l)||Df(l)||Wi(xn,p).each(Gt=>{rt==="relative"&&!dw(Gt)?Dg(Gt):rt==="fixed"&&!r3(Gt)?I2(Gt):rt==="responsive"&&!a3(Gt)&&Sf(Gt),iu(Gt),Wu(l,Gt.dom,Kr)})}),D=rt=>Wi(rt,p),I=rt=>Mv(l).bind(xn=>D(xn).map(Vn=>rt(Vn,xn))),U=(rt,xn)=>{I(Vn=>{l.formatter.toggle("tableclass",{value:xn},Vn.dom),Wu(l,Vn.dom,Av)})},K=(rt,xn)=>{I(Vn=>{const Gt=Ki(l),Fo=Tt(Gt,Ln=>l.formatter.match("tablecellclass",{value:xn},Ln.dom))?l.formatter.remove:l.formatter.apply;ae(Gt,Ln=>Fo("tablecellclass",{value:xn},Ln.dom)),Wu(l,Vn.dom,Av)})},ue=()=>{ub(l).each(rt=>{Wi(rt,p).each(xn=>{Vs(xn,"caption").fold(()=>{const Vn=Rt.fromTag("caption");Ao(Vn,Rt.fromText("Caption")),Jy(xn,Vn,0),l.selection.setCursorLocation(Vn.dom,0)},Vn=>{Hc("caption")(rt)&&ll("td",xn).each(Gt=>l.selection.setCursorLocation(Gt.dom,0)),ta(Vn)}),Wu(l,xn.dom,Kr)})})},ke=rt=>{l.focus()},st=(rt,xn=!1)=>I((Vn,Gt)=>{const Lo=wv(Ki(l),Vn,Gt);rt(Vn,Lo,xn).each(ke)}),It=()=>I((rt,xn)=>{const Vn=wv(Ki(l),rt,xn),Gt=Ef(qe,Rt.fromDom(l.getDoc()),ce.none());return El(rt,Vn,Gt)}),Bt=()=>I((rt,xn)=>{const Vn=wv(Ki(l),rt,xn);return Iu(rt,Vn)}),cn=(rt,xn)=>xn().each(Vn=>{const Gt=re(Vn,Lo=>zr(Lo));I((Lo,Fo)=>{const Ln=F2(Rt.fromDom(l.getDoc())),xr=SE(Ki(l),Fo,Gt,Ln);rt(Lo,xr).each(ke)})}),We=rt=>(xn,Vn)=>Qa(Vn,"type").each(Gt=>{st(rt(Gt),Vn.no_events)});Qn({mceTableSplitCells:()=>st(m.unmergeCells),mceTableMergeCells:()=>st(m.mergeCells),mceTableInsertRowBefore:()=>st(m.insertRowsBefore),mceTableInsertRowAfter:()=>st(m.insertRowsAfter),mceTableInsertColBefore:()=>st(m.insertColumnsBefore),mceTableInsertColAfter:()=>st(m.insertColumnsAfter),mceTableDeleteCol:()=>st(m.deleteColumn),mceTableDeleteRow:()=>st(m.deleteRow),mceTableCutCol:()=>Bt().each(rt=>{zC(rt),st(m.deleteColumn)}),mceTableCutRow:()=>It().each(rt=>{Zu(rt),st(m.deleteRow)}),mceTableCopyCol:()=>Bt().each(rt=>zC(rt)),mceTableCopyRow:()=>It().each(rt=>Zu(rt)),mceTablePasteColBefore:()=>cn(m.pasteColsBefore,Nv),mceTablePasteColAfter:()=>cn(m.pasteColsAfter,Nv),mceTablePasteRowBefore:()=>cn(m.pasteRowsBefore,TE),mceTablePasteRowAfter:()=>cn(m.pasteRowsAfter,TE),mceTableDelete:y,mceTableCellToggleClass:K,mceTableToggleClass:U,mceTableToggleCaption:ue,mceTableSizingMode:(rt,xn)=>E(xn),mceTableCellType:We(rt=>rt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:We(rt=>rt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:We(rt=>{switch(rt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(rt,xn)=>l.addCommand(xn,rt)),l.addCommand("mceInsertTable",(rt,xn)=>{ib(l,xn.rows,xn.columns,xn.options)}),l.addCommand("mceTableApplyCellStyle",(rt,xn)=>{const Vn=Fo=>"tablecell"+Fo.toLowerCase().replace("-","");if(!de(xn))return;const Gt=wt(Ki(l),Y1);if(Gt.length===0)return;const Lo=Gm(xn,(Fo,Ln)=>l.formatter.has(Vn(Ln))&&Ce(Fo));Su(Lo)||(Qn(Lo,(Fo,Ln)=>{const xr=Vn(Ln);ae(Gt,Al=>{Fo===""?l.formatter.remove(xr,{value:null},Al.dom,!0):l.formatter.apply(xr,{value:Fo},Al.dom)})}),D(Gt[0]).each(Fo=>Wu(l,Fo.dom,Av)))})},kE=(l,m)=>{const p=Rr(l),y=E=>Tv(uv(l)).bind(D=>Wi(D,p).map(I=>{const U=wv(Ki(l),I,D);return E(I,U)})).getOr("");Qn({mceTableRowType:()=>y(m.getTableRowType),mceTableCellType:()=>y(m.getTableCellType),mceTableColType:()=>y(m.getTableColType)},(E,D)=>l.addQueryValueHandler(D,E))},Pv=l=>!pl(Rt.fromDom(l.target),"ephox-snooker-resizer-bar"),uA=(l,m)=>{const p=L3(()=>Rt.fromDom(l.getBody()),()=>Tv(uv(l),Rr(l)),Ug.selectedSelector),y=(K,ue,ke)=>{Wi(ue).each(It=>{const Bt=re(K,Vn=>Vn.dom),cn=jw(l),We=Ef(qe,Rt.fromDom(l.getDoc()),cn),rt=Ki(l),xn=D2(It,{selection:rt},We).map(Vn=>Ho(Vn,Gt=>re(Gt,Lo=>Lo.dom))).getOrUndefined();fp(l,Bt,ue.dom,ke.dom,xn)})},E=()=>aA(l),D=CE.byAttr(Ug,y,E);return l.on("init",K=>{const ue=l.getWin(),ke=lv(l),st=Rr(l),It=()=>{const Qo=l.selection,Nc=Rt.fromDom(Qo.getStart()),Js=Rt.fromDom(Qo.getEnd());ns(Wi,[Nc,Js]).fold(()=>D.clear(ke),qe)},Bt=pE(ue,ke,st,D),cn=RC(ue,ke,st,D),We=vE(ue,ke,st,D),rt=Qo=>Qo.raw.shiftKey===!0;l.on("TableSelectorChange",Qo=>We(Qo.start,Qo.finish));const xn=(Qo,Nc)=>{rt(Qo)&&(Nc.kill&&Qo.kill(),Nc.selection.each(Js=>{const qu=k.relative(Js.start,Js.finish),cc=ht(ue,qu);l.selection.setRng(cc)}))},Vn=Qo=>{const Nc=pr(Qo);if(Nc.raw.shiftKey&&Tm(Nc.raw.which)){const Js=l.selection.getRng(),qu=Rt.fromDom(Js.startContainer),cc=Rt.fromDom(Js.endContainer);cn.keyup(Nc,qu,Js.startOffset,cc,Js.endOffset).each(Xi=>{xn(Nc,Xi)})}},Gt=Qo=>{const Nc=pr(Qo);m.hide();const Js=l.selection.getRng(),qu=Rt.fromDom(Js.startContainer),cc=Rt.fromDom(Js.endContainer),Xi=yd(km,hE)(Rt.fromDom(l.selection.getStart()));cn.keydown(Nc,qu,Js.startOffset,cc,Js.endOffset,Xi).each(Da=>{xn(Nc,Da)}),m.show()},Lo=Qo=>Qo.button===0,Fo=Qo=>Qo.buttons===void 0?!0:(Qo.buttons&1)!==0,Ln=Qo=>{Bt.clearstate()},xr=Qo=>{Lo(Qo)&&Pv(Qo)&&Bt.mousedown(pr(Qo))},Al=Qo=>{Fo(Qo)&&Pv(Qo)&&Bt.mouseover(pr(Qo))},Am=Qo=>{Lo(Qo)&&Pv(Qo)&&Bt.mouseup(pr(Qo))},Wg=(()=>{const Qo=Gs(Rt.fromDom(ke)),Nc=Gs(0);return{touchEnd:qu=>{const cc=Rt.fromDom(qu.target);if(Hc("td")(cc)||Hc("th")(cc)){const Xi=Qo.get(),Da=Nc.get();Wo(Xi,cc)&&qu.timeStamp-Da<300&&(qu.preventDefault(),We(cc,cc))}Qo.set(cc),Nc.set(qu.timeStamp)}}})();l.on("dragstart",Ln),l.on("mousedown",xr),l.on("mouseover",Al),l.on("mouseup",Am),l.on("touchend",Wg.touchEnd),l.on("keyup",Vn),l.on("keydown",Gt),l.on("NodeChange",It)}),l.on("PreInit",()=>{l.serializer.addTempAttr(Ug.firstSelected),l.serializer.addTempAttr(Ug.lastSelected)}),{getSelectedCells:()=>bC(p.get(),V([]),K=>re(K,ue=>ue.dom),K=>[K.dom]),clearSelectedCells:K=>D.clear(Rt.fromDom(K))}},VC=(l,m)=>{const p=Rt.fromDom(l.getBody());return rw.body(p,m)},Gu=l=>Ut(l)&&l.nodeName==="TABLE",UC="bar-",dA=l=>Vc(l,"data-mce-resize")!=="false",AE=l=>{const m=Zn.fromTable(l);Zn.hasColumns(m)||ae(mf(l),p=>{const y=vd(p,"width");oa(p,"width",y),Mo(p,"width")})},_E=l=>Ll(l,"corner-"),OE=l=>tm(l,"corner-"),mA=l=>{const m=Mr(),p=Mr(),y=Mr();let E,D,I,U;const K=Gt=>LC(l,Gt),ue=()=>cv(l)?VS():_h(),ke=Gt=>M1(Gt).columns,st=Gt=>M1(Gt).rows,It=(Gt,Lo,Fo,Ln)=>{const xr=OE(Lo),Al=ud(xr,"e"),Am=Ll(xr,"n");if(D===""&&Dg(Gt),U===""&&xi(Gt),Fo!==E&&D!==""){oa(Gt,"width",D);const Bf=ue(),Wg=K(Gt),Qo=cv(l)||Al?ke(Gt)-1:0;Vh(Gt,Fo-E,Qo,Bf,Wg)}else if(Qw(D)){const Bf=parseFloat(D.replace("%","")),Wg=Fo*Bf/E;oa(Gt,"width",Wg+"%")}if(Jw(D)&&AE(Gt),Ln!==I&&U!==""){oa(Gt,"height",U);const Bf=Am?0:st(Gt)-1;S0(Gt,Ln-I,Bf)}},Bt=()=>{p.on(Gt=>{Gt.destroy()})};l.on("init",()=>{const Gt=VC(l,dA);if(y.set(Gt),rv(l)&&Ww(l)){const Lo=ue(),Fo=dC.create(Gt,Lo,K);l.mode.isReadOnly()||Fo.on(),Fo.events.startDrag.bind(Ln=>{m.set(l.selection.getRng())}),Fo.events.beforeResize.bind(Ln=>{const xr=Ln.table.dom;jg(l,xr,Kw(xr),Yw(xr),UC+Ln.type)}),Fo.events.afterResize.bind(Ln=>{const xr=Ln.table,Al=xr.dom;iu(xr),m.on(Am=>{l.selection.setRng(Am),l.focus()}),cb(l,Al,Kw(Al),Yw(Al),UC+Ln.type),l.undoManager.add()}),p.set(Fo)}}),l.on("ObjectResizeStart",Gt=>{const Lo=Gt.target;if(Gu(Lo)&&!l.mode.isReadOnly()){const Fo=Rt.fromDom(Lo);ae(l.dom.select(".mce-clonedresizable"),Ln=>{l.dom.addClass(Ln,"mce-"+q1(l)+"-columns")}),!r3(Fo)&&Nd(l)?I2(Fo):!dw(Fo)&&Df(l)&&Dg(Fo),a3(Fo)&&Ll(Gt.origin,UC)&&Dg(Fo),E=Gt.width,D=K1(l)?"":dv(l,Lo).getOr(""),I=Gt.height,U=gC(l,Lo).getOr("")}}),l.on("ObjectResized",Gt=>{const Lo=Gt.target;if(Gu(Lo)){const Fo=Rt.fromDom(Lo),Ln=Gt.origin;_E(Ln)&&It(Fo,Ln,Gt.width,Gt.height),iu(Fo),Wu(l,Fo.dom,Av)}});const cn=()=>{p.on(Gt=>{Gt.on(),Gt.showBars()})},We=()=>{p.on(Gt=>{Gt.off(),Gt.hideBars()})};return l.on("DisabledStateChange",Gt=>{Gt.state?We():cn()}),l.on("SwitchMode",()=>{l.mode.isReadOnly()?We():cn()}),l.on("dragstart dragend",Gt=>{Gt.type==="dragstart"?We():cn()}),l.on("remove",()=>{Bt()}),{refresh:Gt=>{p.on(Lo=>Lo.refreshBars(Rt.fromDom(Gt)))},hide:()=>{p.on(Gt=>Gt.hideBars())},show:()=>{p.on(Gt=>Gt.showBars())}}},Es=l=>{h5(l);const m=mA(l),p=uA(l,m),y=Nf(l,m,p);return lA(l,y),kE(l,y),$C(l,y),{getSelectedCells:p.getSelectedCells,clearSelectedCells:p.clearSelectedCells}},Yi=l=>({table:Es(l)});var hp=()=>{B.add("dom",Yi)};hp()}()),CX}var SX;function XJ(){return SX||(SX=1,YJ()),yX}XJ();var wX={},EX={},TX;function QJ(){return TX||(TX=1,function(){var B=tinymce.util.Tools.resolve("tinymce.PluginManager");const Y=nt=>({backspaceDelete:gt=>{nt.execCommand("mceListBackspaceDelete",!1,gt)}}),we=nt=>nt==null,xe=nt=>!we(nt),Ne=nt=>()=>nt,Ee=(nt,gt)=>nt===gt,Ce=Ne(!1);class de{tag;value;static singletonNone=new de(!1);constructor(gt,Xe){this.tag=gt,this.value=Xe}static some(gt){return new de(!0,gt)}static none(){return de.singletonNone}fold(gt,Xe){return this.tag?Xe(this.value):gt()}isSome(){return this.tag}isNone(){return!this.tag}map(gt){return this.tag?de.some(gt(this.value)):de.none()}bind(gt){return this.tag?gt(this.value):de.none()}exists(gt){return this.tag&&gt(this.value)}forall(gt){return!this.tag||gt(this.value)}filter(gt){return!this.tag||gt(this.value)?this:de.none()}getOr(gt){return this.tag?this.value:gt}or(gt){return this.tag?this:gt}getOrThunk(gt){return this.tag?this.value:gt()}orThunk(gt){return this.tag?this:gt()}getOrDie(gt){if(this.tag)return this.value;throw new Error(gt??"Called getOrDie on None")}static from(gt){return xe(gt)?de.some(gt):de.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(gt){this.tag&&gt(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Oe=Array.prototype.slice,Ze=(nt,gt)=>{for(let Xe=0,ao=nt.length;Xe<ao;Xe++){const Qn=nt[Xe];if(gt(Qn,Xe))return!0}return!1},Ct=(nt,gt)=>{const Xe=nt.length,ao=new Array(Xe);for(let Qn=0;Qn<Xe;Qn++){const Ho=nt[Qn];ao[Qn]=gt(Ho,Qn)}return ao},Ke=(nt,gt)=>{for(let Xe=0,ao=nt.length;Xe<ao;Xe++){const Qn=nt[Xe];gt(Qn,Xe)}},Ot=(nt,gt,Xe)=>(Ke(nt,(ao,Qn)=>{Xe=gt(Xe,ao,Qn)}),Xe),Ut=(nt,gt,Xe)=>{for(let ao=0,Qn=nt.length;ao<Qn;ao++){const Ho=nt[ao];if(gt(Ho,ao))return de.some(Ho);if(Xe(Ho,ao))break}return de.none()},jt=(nt,gt)=>Ut(nt,gt,Ce),Dt=nt=>{const gt=Oe.call(nt,0);return gt.reverse(),gt},qe=(nt,gt,Xe=Ee)=>nt.exists(ao=>Xe(ao,gt)),ft=(nt=>gt=>gt.replace(nt,""))(/^\s+|\s+$/g),V=nt=>nt.length>0,Ye=nt=>!V(nt),ut=nt=>{const gt=Dt(ft(nt).split("")),Xe=Ct(gt,(ao,Qn)=>{const Ho=ao.toUpperCase().charCodeAt(0)-65+1;return Math.pow(26,Qn)*Ho});return Ot(Xe,(ao,Qn)=>ao+Qn,0)},At=nt=>{if(nt--,nt<0)return"";{const gt=nt%26,Xe=Math.floor(nt/26),ao=At(Xe),Qn=String.fromCharCode(65+gt);return ao+Qn}},se=nt=>/^[A-Z]+$/.test(nt),nn=nt=>/^[a-z]+$/.test(nt),Wn=nt=>/^[0-9]+$/.test(nt),Yt=nt=>Wn(nt)?2:se(nt)?0:nn(nt)?1:Ye(nt)?3:4,X=nt=>{switch(Yt(nt)){case 2:return de.some({listStyleType:de.none(),start:nt});case 0:return de.some({listStyleType:de.some("upper-alpha"),start:ut(nt).toString()});case 1:return de.some({listStyleType:de.some("lower-alpha"),start:ut(nt).toString()});case 3:return de.some({listStyleType:de.none(),start:""});case 4:return de.none()}},ce=nt=>{const gt=parseInt(nt.start,10);return qe(nt.listStyleType,"upper-alpha")?At(gt):qe(nt.listStyleType,"lower-alpha")?At(gt).toLowerCase():nt.start},dn=(nt=>gt=>gt.options.get(nt))("forced_root_block"),_t=nt=>/\btox\-/.test(nt.className),A=nt=>gt=>xe(gt)&&nt.test(gt.nodeName),co=nt=>gt=>xe(gt)&&gt.nodeName.toLowerCase()===nt,it=A(/^(OL|UL|DL)$/),Ro=A(/^(TH|TD)$/),re=A(/^(LI|DT|DD)$/),ae=(nt,gt)=>Ut(nt,it,Ro).exists(Xe=>Xe.nodeName===gt&&!_t(Xe)),tt=(nt,gt)=>{const Xe=nt.selection.getNode();return gt({parents:nt.dom.getParents(Xe),element:Xe}),nt.on("NodeChange",gt),()=>nt.off("NodeChange",gt)},St=(nt,gt)=>gt!==null&&!nt.dom.isEditable(gt),wt=(nt,gt)=>{const Xe=nt.dom.getParent(gt,"ol,ul,dl");return St(nt,Xe)||!nt.selection.isEditable()},on=co("ol"),pe=["OL","UL","DL"],Te=pe.join(","),M=(nt,gt)=>{const Xe=gt||nt.selection.getStart(!0);return nt.dom.getParent(Xe,Te,wn(nt,Xe))},wn=(nt,gt)=>{const Xe=nt.dom.getParents(gt,nt.dom.isBlock),ao=Ho=>Ho.nodeName.toLowerCase()!==dn(nt);return jt(Xe,Ho=>ao(Ho)&&sn(nt.schema,Ho)).getOr(nt.getBody())},sn=(nt,gt)=>!it(gt)&&!re(gt)&&Ze(pe,Xe=>nt.isValidChild(gt.nodeName,Xe)),Un=nt=>{const gt=M(nt);!on(gt)||wt(nt,gt)||nt.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:ce({start:nt.dom.getAttrib(gt,"start","1"),listStyleType:de.from(nt.dom.getStyle(gt,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Xe=>{const ao=Xe.getData();X(ao.start).each(Qn=>{nt.execCommand("mceListUpdate",!1,{attrs:{start:Qn.start==="1"?"":Qn.start},styles:{"list-style-type":Qn.listStyleType.getOr("")}})}),Xe.close()}})},Tt=nt=>{nt.addCommand("mceListProps",()=>{Un(nt)})},rs=(nt,gt)=>Xe=>{const ao=Qn=>{Xe.setActive(ae(Qn.parents,gt)),Xe.setEnabled(!wt(nt,Qn.element)&&nt.selection.isEditable())};return Xe.setEnabled(nt.selection.isEditable()),tt(nt,ao)},Wt=nt=>{const gt=Xe=>()=>nt.execCommand(Xe);nt.hasPlugin("advlist")||(nt.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:gt("InsertOrderedList"),onSetup:rs(nt,"OL")}),nt.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:gt("InsertUnorderedList"),onSetup:rs(nt,"UL")}))},io=(nt,gt)=>Xe=>tt(nt,Qn=>Xe.setEnabled(ae(Qn.parents,gt)&&!wt(nt,Qn.element))),hn=nt=>{const gt={text:"List properties...",icon:"ordered-list",onAction:()=>nt.execCommand("mceListProps"),onSetup:io(nt,"OL")};nt.ui.registry.addMenuItem("listprops",gt),nt.ui.registry.addContextMenu("lists",{update:Xe=>{const ao=M(nt,Xe);return on(ao)?["listprops"]:[]}})};var Ae=()=>{B.add("lists",nt=>(Tt(nt),Wt(nt),hn(nt),Y(nt)))};Ae()}()),EX}var kX;function JJ(){return kX||(kX=1,QJ()),wX}JJ();var AX={},_X={},OX;function eee(){return OX||(OX=1,function(){var B=tinymce.util.Tools.resolve("tinymce.PluginManager");const Y=(L,te,he)=>he(L,te.prototype)?!0:L.constructor?.name===te.name,we=L=>{const te=typeof L;return L===null?"null":te==="object"&&Array.isArray(L)?"array":te==="object"&&Y(L,String,(he,$e)=>$e.isPrototypeOf(he))?"string":te},xe=L=>te=>we(te)===L,Ne=L=>te=>typeof te===L,Ee=L=>te=>L===te,Ce=xe("string"),de=xe("object"),Oe=xe("array"),Ze=Ee(null),Ct=Ne("boolean"),Ke=L=>L==null,Ot=L=>!Ke(L),Ut=Ne("function"),jt=(L,te)=>{if(Oe(L)){for(let he=0,$e=L.length;he<$e;++he)if(!te(L[he]))return!1;return!0}return!1},Dt=()=>{},qe=L=>()=>L,En=L=>L,ft=(L,te)=>L===te;class V{tag;value;static singletonNone=new V(!1);constructor(te,he){this.tag=te,this.value=he}static some(te){return new V(!0,te)}static none(){return V.singletonNone}fold(te,he){return this.tag?he(this.value):te()}isSome(){return this.tag}isNone(){return!this.tag}map(te){return this.tag?V.some(te(this.value)):V.none()}bind(te){return this.tag?te(this.value):V.none()}exists(te){return this.tag&&te(this.value)}forall(te){return!this.tag||te(this.value)}filter(te){return!this.tag||te(this.value)?this:V.none()}getOr(te){return this.tag?this.value:te}or(te){return this.tag?this:te}getOrThunk(te){return this.tag?this.value:te()}orThunk(te){return this.tag?this:te()}getOrDie(te){if(this.tag)return this.value;throw new Error(te??"Called getOrDie on None")}static from(te){return Ot(te)?V.some(te):V.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(te){this.tag&&te(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const Ye=Array.prototype.indexOf,ut=Array.prototype.push,At=(L,te)=>Ye.call(L,te),se=(L,te)=>At(L,te)>-1,nn=(L,te)=>{const he=L.length,$e=new Array(he);for(let bt=0;bt<he;bt++){const Kt=L[bt];$e[bt]=te(Kt,bt)}return $e},Wn=(L,te)=>{for(let he=0,$e=L.length;he<$e;he++){const bt=L[he];te(bt,he)}},Yt=(L,te,he)=>(Wn(L,($e,bt)=>{he=te(he,$e,bt)}),he),X=L=>{const te=[];for(let he=0,$e=L.length;he<$e;++he){if(!Oe(L[he]))throw new Error("Arr.flatten item "+he+" was not an array, input: "+L);ut.apply(te,L[he])}return te},ce=(L,te)=>X(nn(L,te)),Uo=(L,te)=>te>=0&&te<L.length?V.some(L[te]):V.none(),dn=L=>Uo(L,0),_t=(L,te)=>{for(let he=0;he<L.length;he++){const $e=te(L[he],he);if($e.isSome())return $e}return V.none()},A=Object.keys,co=Object.hasOwnProperty,it=(L,te)=>{const he=A(L);for(let $e=0,bt=he.length;$e<bt;$e++){const Kt=he[$e],Hn=L[Kt];te(Hn,Kt)}},Ro=L=>(te,he)=>{L[he]=te},re=(L,te,he,$e)=>{it(L,(bt,Kt)=>{(te(bt,Kt)?he:$e)(bt,Kt)})},ae=(L,te)=>{const he={};return re(L,te,Ro(he),Dt),he},tt=(L,te)=>co.call(L,te),St=(L,te)=>tt(L,te)&&L[te]!==void 0&&L[te]!==null,wt=L=>{let te=L;return{get:()=>te,set:bt=>{te=bt}}},on=(L,te,he=ft)=>L.exists($e=>he($e,te)),pe=L=>{const te=[],he=$e=>{te.push($e)};for(let $e=0;$e<L.length;$e++)L[$e].each(he);return te},Te=(L,te)=>L?V.some(te):V.none(),M=L=>{const te=wt(V.none()),he=()=>te.get().each(L);return{clear:()=>{he(),te.set(V.none())},isSet:()=>te.get().isSome(),get:()=>te.get(),set:ko=>{he(),te.set(V.some(ko))}}},wn=()=>{const L=M(Dt);return{...L,on:he=>L.get().each(he)}},sn=(L,te)=>L.substring(te),Un=(L,te,he)=>te===""||L.length>=te.length&&L.substr(he,he+te.length)===te,Tt=(L,te)=>rs(L,te)?sn(L,te.length):L,rs=(L,te)=>Un(L,te,0),Wt=L=>te=>te.options.get(L),io=L=>{const te=L.options.register;te("link_assume_external_targets",{processor:he=>{const $e=Ce(he)||Ct(he);return $e?he===!0?{value:1,valid:$e}:he==="http"||he==="https"?{value:he,valid:$e}:{value:0,valid:$e}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),te("link_context_toolbar",{processor:"boolean",default:!1}),te("link_list",{processor:he=>Ce(he)||Ut(he)||jt(he,de)}),te("link_default_target",{processor:"string"}),te("link_default_protocol",{processor:"string",default:"https"}),te("link_target_list",{processor:he=>Ct(he)||jt(he,de),default:!0}),te("link_rel_list",{processor:"object[]",default:[]}),te("link_class_list",{processor:"object[]",default:[]}),te("link_title",{processor:"boolean",default:!0}),te("allow_unsafe_link_target",{processor:"boolean",default:!1}),te("link_quicklink",{processor:"boolean",default:!1}),te("link_attributes_postprocess",{processor:"function"}),te("files_upload_handler",{processor:"function"}),te("link_uploadtab",{processor:"boolean",default:!0})},hn=Wt("link_assume_external_targets"),Ae=Wt("link_context_toolbar"),nt=Wt("link_list"),gt=Wt("link_default_target"),Xe=Wt("link_default_protocol"),ao=Wt("link_target_list"),Qn=Wt("link_rel_list"),Ho=Wt("link_class_list"),oi=Wt("link_title"),No=Wt("allow_unsafe_link_target"),nl=Wt("link_quicklink"),Gm=Wt("link_attributes_postprocess"),va=Wt("files_upload_handler"),wo=Wt("link_uploadtab"),Qa=Wt("documents_file_types"),gs=L=>Ot(L.options.get("files_upload_handler")),Ls=L=>Ot(L.options.get("documents_file_types"));var Su=tinymce.util.Tools.resolve("tinymce.util.URI"),Oi=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Xr=tinymce.util.Tools.resolve("tinymce.util.Tools");const Gs=L=>Ot(L)&&L.nodeName.toLowerCase()==="a",hr=L=>Gs(L)&&!!Ja(L),is=(L,te)=>{if(L.collapsed)return[];{const he=L.cloneContents(),$e=he.firstChild,bt=new Oi($e,he),Kt=[];let Hn=$e;do te(Hn)&&Kt.push(Hn);while(Hn=bt.next());return Kt}},dc=L=>/^\w+:/i.test(L),Ja=L=>L.getAttribute("data-mce-href")??L.getAttribute("href")??"",en=(L,te)=>{const he=["noopener"],$e=L?L.split(/\s+/):[],bt=uo=>Xr.trim(uo.sort().join(" ")),Kt=uo=>(uo=Hn(uo),uo.length>0?uo.concat(he):he),Hn=uo=>uo.filter(xa=>Xr.inArray(he,xa)===-1),ko=te?Kt($e):Hn($e);return ko.length>0?bt(ko):""},ho=L=>L.replace(/\uFEFF/g,""),qn=(L,te)=>(te=te||Zt(L.selection.getRng())[0]||L.selection.getNode(),La(te)?V.from(L.dom.select("a[href]",te)[0]):V.from(L.dom.getParent(te,"a[href]"))),mc=(L,te)=>qn(L,te).isSome(),Ia=(L,te)=>{const he=te.fold(()=>L.getContent({format:"text"}),$e=>$e.innerText||$e.textContent||"");return ho(he)},Zt=L=>is(L,hr),$l=L=>Xr.grep(L,hr),ls=L=>$l(L).length>0,Il=L=>Zt(L).length>0,fc=L=>{const te=L.schema.getTextInlineElements(),he=Kt=>Kt.nodeType===1&&!Gs(Kt)&&!tt(te,Kt.nodeName.toLowerCase());if(qn(L).exists(Kt=>Kt.hasAttribute("data-mce-block")))return!1;const bt=L.selection.getRng();return bt.collapsed?!0:is(bt,he).length===0},La=L=>Ot(L)&&L.nodeName==="FIGURE"&&/\bimage\b/i.test(L.className),qo=L=>new Promise((te,he)=>{const $e=new FileReader;$e.onload=()=>{te($e.result)},$e.onerror=()=>{he(new Error($e.error?.message??"Failed to convert blob to a data url"))},$e.readAsDataURL(L)}),Pn=L=>Yt(["title","rel","class","target"],(he,$e)=>(L[$e].each(bt=>{he[$e]=bt.length>0?bt:null}),he),{href:L.href}),Ko=(L,te)=>(te==="http"||te==="https")&&!dc(L)?te+"://"+L:L,ld=(L,te)=>{const he={...te};if(Qn(L).length===0&&!No(L)){const $e=en(he.rel,he.target==="_blank");he.rel=$e||null}return V.from(he.target).isNone()&&ao(L)===!1&&(he.target=gt(L)),he.href=Ko(he.href,hn(L)),he},wu=(L,te,he,$e)=>{he.each(Kt=>{tt(te,"innerText")?te.innerText=Kt:te.textContent=Kt}),L.dom.setAttribs(te,$e);const bt=L.dom.createRng();bt.setStartAfter(te),bt.setEndAfter(te),L.selection.setRng(bt)},si=(L,te,he,$e)=>{const bt=L.dom;La(te)?ud(bt,te,$e):he.fold(()=>{L.execCommand("mceInsertLink",!1,$e);const Kt=L.selection.getEnd(),Hn=bt.createRng();Hn.setStartAfter(Kt),Hn.setEndAfter(Kt),L.selection.setRng(Hn)},Kt=>{L.insertContent(bt.createHTML("a",$e,bt.encode(Kt)))})},rn=(L,te,he)=>{const $e=L.selection.getNode(),bt=qn(L,$e),Kt=ld(L,Pn(he)),Hn=Gm(L);Ot(Hn)&&Hn(Kt),L.undoManager.transact(()=>{he.href===te.href&&te.attach(),bt.fold(()=>{si(L,$e,he.text,Kt)},ko=>{L.focus(),wu(L,ko,he.text,Kt)})})},Fa=L=>{const te=L.dom,he=L.selection,$e=he.getBookmark(),bt=he.getRng().cloneRange(),Kt=te.getParent(bt.startContainer,"a[href]",L.getBody()),Hn=te.getParent(bt.endContainer,"a[href]",L.getBody());Kt&&bt.setStartBefore(Kt),Hn&&bt.setEndAfter(Hn),he.setRng(bt),L.execCommand("unlink"),he.moveToBookmark($e)},Mr=L=>{L.undoManager.transact(()=>{const te=L.selection.getNode();La(te)?Ll(L,te):Fa(L),L.focus()})},qm=L=>{const{class:te,href:he,rel:$e,target:bt,text:Kt,title:Hn}=L;return ae({class:te.getOrNull(),href:he,rel:$e.getOrNull(),target:bt.getOrNull(),text:Kt.getOrNull(),title:Hn.getOrNull()},(ko,uo)=>Ze(ko)===!1)},Tr=(L,te)=>{const he=L.options.get,$e={allow_html_data_urls:he("allow_html_data_urls"),allow_script_urls:he("allow_script_urls"),allow_svg_data_urls:he("allow_svg_data_urls")},bt=te.href;return{...te,href:Su.isDomSafe(bt,"a",$e)?bt:""}},tm=(L,te,he)=>{const $e=Tr(L,he);L.hasPlugin("rtc",!0)?L.execCommand("createlink",!1,qm($e)):rn(L,te,$e)},as=L=>{L.hasPlugin("rtc",!0)?L.execCommand("unlink"):Mr(L)},Ll=(L,te)=>{const he=L.dom.select("img",te)[0];if(he){const $e=L.dom.getParents(he,"a[href]",te)[0];$e&&($e.parentNode?.insertBefore(he,$e),L.dom.remove($e))}},ud=(L,te,he)=>{const $e=L.select("img",te)[0];if($e){const bt=L.create("a",he);$e.parentNode?.insertBefore(bt,$e),bt.appendChild($e)}},ol=L=>Ce(L.value)?L.value:"",$c=L=>Ce(L.text)?L.text:Ce(L.title)?L.title:"",rr=(L,te)=>{const he=[];return Xr.each(L,$e=>{const bt=$c($e);if($e.menu!==void 0){const Kt=rr($e.menu,te);he.push({text:bt,items:Kt})}else{const Kt=te($e);he.push({text:bt,value:Kt})}}),he},Fl=(L=ol)=>te=>V.from(te).map(he=>rr(he,L)),ec={sanitize:L=>Fl(ol)(L),sanitizeWith:Fl,createUi:(L,te)=>he=>({name:L,type:"listbox",label:te,items:he}),getValue:ol},Tu=L=>St(L,"items"),Di=(L,te)=>_t(te,he=>Tu(he)?Di(L,he.items):Te(he.value===L,he)),jo=(L,te,he,$e)=>{const bt=$e[te],Kt=L.length>0;return bt!==void 0?Di(bt,he).map(Hn=>({url:{value:Hn.value,meta:{text:Kt?L:Hn.text,attach:Dt}},text:Kt?L:Hn.text})):V.none()},dd=(L,te)=>te==="link"?L.link:te==="anchor"?L.anchor:V.none(),er={init:(L,te)=>{const he={text:L.text,title:L.title},$e=uo=>Te(he.title.length<=0,V.from(uo.meta?.title).getOr("")),bt=uo=>Te(he.text.length<=0,V.from(uo.meta?.text).getOr(uo.value)),Kt=uo=>{const xa=bt(uo.url),qs=$e(uo.url);return xa.isSome()||qs.isSome()?V.some({...xa.map(_u=>({text:_u})).getOr({}),...qs.map(_u=>({title:_u})).getOr({})}):V.none()},Hn=(uo,xa)=>{const qs=dd(te,xa).getOr([]);return jo(he.text,xa,qs,uo)};return{onChange:(uo,xa)=>{const qs=xa.name;return qs==="url"?Kt(uo()):se(["anchor","link"],qs)?Hn(uo(),qs):((qs==="text"||qs==="title")&&(he[qs]=uo()[qs]),V.none())}}},getDelta:jo};var Ri=tinymce.util.Tools.resolve("tinymce.util.Delay");const md=(L,te,he)=>{const $e=L.selection.getRng();Ri.setEditorTimeout(L,()=>{L.windowManager.confirm(te,bt=>{L.selection.setRng($e),he(bt)})})},Ha=L=>{const te=L.href;return te.indexOf("@")>0&&te.indexOf("/")===-1&&te.indexOf("mailto:")===-1?V.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:$e=>({...$e,href:"mailto:"+te})}):V.none()},Lr=(L,te)=>he=>{const $e=he.href;return L===1&&!dc($e)||L===0&&/^\s*www(\.|\d\.)/i.test($e)?V.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${te}:// prefix?`,preprocess:Kt=>({...Kt,href:te+"://"+$e})}):V.none()},Fr={preprocess:(L,te)=>_t([Ha,Lr(hn(L),Xe(L))],he=>he(te)).fold(()=>Promise.resolve(te),he=>new Promise($e=>{md(L,he.message,bt=>{$e(bt?he.preprocess(te):te)})}))},nm={getAnchors:L=>{const te=L.dom.select("a:not([href])"),he=ce(te,$e=>{const bt=$e.name||$e.id;return bt?[{text:bt,value:"#"+bt}]:[]});return he.length>0?V.some([{text:"None",value:""}].concat(he)):V.none()}},Ni={getClasses:L=>{const te=Ho(L);return te.length>0?ec.sanitize(te):V.none()}},sl=L=>{try{return V.some(JSON.parse(L))}catch{return V.none()}},Ds={getLinks:L=>{const te=$e=>L.convertURL($e.value||$e.url||"","href"),he=nt(L);return new Promise($e=>{Ce(he)?fetch(he).then(bt=>bt.ok?bt.text().then(sl):Promise.reject()).then($e,()=>$e(V.none())):Ut(he)?he(bt=>$e(V.some(bt))):$e(V.from(he))}).then($e=>$e.bind(ec.sanitizeWith(te)).map(bt=>bt.length>0?[{text:"None",value:""}].concat(bt):bt))}},Qr={getRels:(L,te)=>{const he=Qn(L);if(he.length>0){const $e=on(te,"_blank"),bt=No(L)===!1,Kt=ko=>en(ec.getValue(ko),$e);return(bt?ec.sanitizeWith(Kt):ec.sanitize)(he)}return V.none()}},Jr=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],om={getTargets:L=>{const te=ao(L);return Oe(te)?ec.sanitize(te).orThunk(()=>V.some(Jr)):te===!1?V.none():V.some(Jr)}},Hl=(L,te,he)=>{const $e=L.getAttrib(te,he);return $e!==null&&$e.length>0?V.some($e):V.none()},hs=(L,te)=>{const he=L.dom,bt=fc(L)?V.some(Ia(L.selection,te)):V.none(),Kt=te.bind(qs=>V.from(he.getAttrib(qs,"href"))),Hn=te.bind(qs=>V.from(he.getAttrib(qs,"target"))),ko=te.bind(qs=>Hl(he,qs,"rel")),uo=te.bind(qs=>Hl(he,qs,"class")),xa=te.bind(qs=>Hl(he,qs,"title"));return{url:Kt,text:bt,title:xa,target:Hn,rel:ko,linkClass:uo}},ai={collect:(L,te)=>Ds.getLinks(L).then(he=>{const $e=gs(L)&&Ls(L)&&wo(L),bt=hs(L,te);return{anchor:bt,catalogs:{targets:om.getTargets(L),rels:Qr.getRels(L,bt.target),classes:Ni.getClasses(L),anchor:nm.getAnchors(L),link:he},hasUploadPanel:$e,optNode:te,flags:{titleEnabled:oi(L)}}})},Rt={makeTab:L=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput",buttonLabel:"Browse for a file",dropAreaLabel:"Drop a file here",allowedFileTypes:L.map(he=>he.mimeType).join(","),allowedFileExtensions:X(L.map(he=>he.extensions))}]})},al=(L,te)=>he=>{const $e=he.getData();if(!$e.url.value){as(L),he.close();return}const bt=ko=>V.from($e[ko]).filter(uo=>!on(te.anchor[ko],uo)),Kt={href:$e.url.value,text:bt("text"),target:bt("target"),rel:bt("rel"),class:bt("linkClass"),title:bt("title")},Hn={href:$e.url.value,attach:$e.url.meta!==void 0&&$e.url.meta.attach?$e.url.meta.attach:Dt};Fr.preprocess(L,Kt).then(ko=>{tm(L,Hn,ko)}),he.close()},ya=L=>(te,he)=>va(L)(te,he),Lc=L=>V.from(L.split(",")[1]).getOr(""),Fs=(L,te)=>{const he=te.getData();te.block("Uploading file"),dn(he.fileinput).fold(()=>{te.unblock()},$e=>{const bt=URL.createObjectURL($e),Kt=({url:ko,fileName:uo})=>{te.setData({text:uo,title:uo,url:{value:ko,meta:{}}}),te.showTab("general"),te.focus("url")},Hn=()=>{te.unblock(),URL.revokeObjectURL(bt)};qo($e).then(ko=>{const uo=L.getExistingBlobInfo(Lc(ko),$e.type),xa=uo&&uo.filename()===$e.name?uo:L.createBlobCache($e,bt,ko);return L.addToBlobCache(xa),L.uploadFile(xa,En)}).then(ko=>{Kt(ko),Hn()}).catch(ko=>{Hn(),L.alertErr(ko,()=>{te.focus("fileinput")})})})},og=L=>(te,he,$e)=>L.editorUpload.blobCache.create({blob:te,blobUri:he,name:te.name?.replace(/\.[^\.]+$/,""),filename:te.name,base64:$e.split(",")[1]}),tc=L=>te=>{L.editorUpload.blobCache.add(te)},Fc=L=>(te,he)=>L.editorUpload.blobCache.getByData(te,he),Ym=L=>(te,he)=>{L.windowManager.alert(te,he)},sg=L=>{const te=qn(L);return ai.collect(L,te)},cl=(L,te)=>{const he=L.anchor,$e=he.url.getOr("");return{url:{value:$e,meta:{original:{value:$e}}},text:he.text.getOr(""),title:he.title.getOr(""),anchor:$e,link:$e,rel:he.rel.getOr(""),target:he.target.or(te).getOr(""),linkClass:he.linkClass.getOr(""),fileinput:[]}},rg=(L,te,he,$e,bt,Kt)=>{const Hn=X([L,te,he,pe([$e.anchor.map(ec.createUi("anchor","Anchors")),$e.rels.map(ec.createUi("rel","Rel")),$e.targets.map(ec.createUi("target","Open link in...")),$e.link.map(ec.createUi("link","Link list")),$e.classes.map(ec.createUi("linkClass","Class"))])]);return bt?{type:"tabpanel",tabs:X([[{title:"General",name:"general",items:Hn}],[Rt.makeTab(Kt)]])}:{type:"panel",items:Hn}},ku=(L,te,he)=>{const $e=[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],bt=L.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),Kt=L.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Hn=V.from(gt(he)),ko=cl(L,Hn),uo=L.catalogs,xa=er.init(ko,uo),qs=rg($e,bt,Kt,uo,L.hasUploadPanel,Qa(he)),_u={addToBlobCache:tc(he),createBlobCache:og(he),alertErr:Ym(he),uploadFile:ya(he),getExistingBlobInfo:Fc(he)};return{title:"Insert/Edit Link",size:"normal",body:qs,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ko,onChange:(Xm,{name:rm})=>{rm==="fileinput"?Fs(_u,Xm):xa.onChange(Xm.getData,{name:rm}).each(Pi=>{Xm.setData(Pi)})},onSubmit:te}},il=L=>{sg(L).then(he=>{const $e=al(L,he);return ku(he,$e,L)}).then(he=>{L.windowManager.open(he)})},Au=L=>{L.addCommand("mceLink",(te,he)=>{he?.dialog===!0||!nl(L)?il(L):L.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})},ht=L=>{L.addShortcut("Meta+K","",()=>{L.execCommand("mceLink")})};var zl=tinymce.util.Tools.resolve("tinymce.util.VK");const sm=(L,te)=>{document.body.appendChild(L),L.dispatchEvent(te),document.body.removeChild(L)},ci=L=>{const te=document.createElement("a");te.target="_blank",te.href=L,te.rel="noreferrer noopener";const he=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});document.dispatchEvent(he),sm(te,he)},hc=L=>L.altKey===!0&&L.shiftKey===!1&&L.ctrlKey===!1&&L.metaKey===!1,fd=(L,te)=>{if(te){const he=Ja(te);if(/^#/.test(he)){const $e=L.dom.select(`${he},[name="${Tt(he,"#")}"]`);$e.length&&L.selection.scrollIntoView($e[0],!0)}else ci(te.href)}},Ca=L=>{const te=L.selection.getRng(),he=te.startContainer;return hr(he)&&te.startContainer===te.endContainer&&L.dom.select("img",he).length===1},Mi=(L,te)=>{const he=$l(L.dom.getParents(te));return Te(he.length===1,he[0])},Vl=L=>{const te=Zt(L.selection.getRng());return Te(te.length>0,te[0]).or(Mi(L,L.selection.getNode()))},ll=L=>L.selection.isCollapsed()||Ca(L)?Mi(L,L.selection.getStart()):Vl(L),Wo=L=>{const te=wn(),he=()=>te.get().or(ll(L)),$e=()=>he().each(bt=>fd(L,bt));return L.on("contextmenu",bt=>{Mi(L,bt.target).each(te.set)}),L.on("SelectionChange",()=>{te.isSet()||ll(L).each(te.set)}),L.on("click",bt=>{te.clear();const Kt=$l(L.dom.getParents(bt.target));Kt.length===1&&zl.metaKeyPressed(bt)&&(bt.preventDefault(),fd(L,Kt[0]))}),L.on("keydown",bt=>{te.clear(),!bt.isDefaultPrevented()&&bt.keyCode===13&&hc(bt)&&he().each(Kt=>{bt.preventDefault(),fd(L,Kt)})}),{gotoSelectedLink:$e}},gd=L=>()=>{L.execCommand("mceLink",!1,{dialog:!0})},$=(L,te)=>(L.on("NodeChange",te),()=>L.off("NodeChange",te)),G=L=>te=>{const he=()=>{te.setActive(!L.mode.isReadOnly()&&mc(L,L.selection.getNode())),te.setEnabled(L.selection.isEditable())};return he(),$(L,he)},ie=L=>te=>{const he=()=>{te.setEnabled(L.selection.isEditable())};return he(),$(L,he)},ze=L=>te=>{const he=Kt=>ls(Kt)||Il(L.selection.getRng()),$e=L.dom.getParents(L.selection.getStart()),bt=Kt=>{te.setEnabled(he(Kt)&&L.selection.isEditable())};return bt($e),$(L,Kt=>bt(Kt.parents))},Qt=(L,te)=>{L.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",shortcut:"Meta+K",onAction:gd(L),onSetup:G(L)}),L.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:te.gotoSelectedLink,onSetup:ze(L)}),L.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>as(L),onSetup:ze(L)})},oo=(L,te)=>{L.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:te.gotoSelectedLink,onSetup:ze(L)}),L.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:gd(L),onSetup:ie(L)}),L.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>as(L),onSetup:ze(L)})},Zo=L=>{const te="link unlink openlink",he="link";L.ui.registry.addContextMenu("link",{update:$e=>L.dom.isEditable($e)?ls(L.dom.getParents($e,"a"))?te:he:""})},kr=(L,te)=>{const he=Kt=>{Kt.selection.collapse(!1)},$e=Kt=>{const Hn=L.selection.getNode();return Kt.setEnabled(mc(L,Hn)&&L.selection.isEditable()),Dt},bt=Kt=>{const Hn=qn(L),ko=fc(L);if(Hn.isNone()&&ko){const uo=Ia(L.selection,Hn);return Te(uo.length===0,Kt)}else return V.none()};L.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:G(L)},label:"Link",predicate:Kt=>Ae(L)&&mc(L,Kt),initValue:()=>qn(L).fold(qe(""),Ja),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Kt=>{const Hn=L.selection.getNode();return Kt.setActive(mc(L,Hn)),G(L)(Kt)},onAction:Kt=>{const Hn=Kt.getValue(),ko=bt(Hn);tm(L,{href:Hn,attach:Dt},{href:Hn,text:ko,title:V.none(),rel:V.none(),target:V.from(gt(L)),class:V.none()}),he(L),Kt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:$e,onAction:Kt=>{as(L),Kt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:$e,onAction:Kt=>{te.gotoSelectedLink(),Kt.hide()}}]})},ea=L=>{const te=Wo(L);Qt(L,te),oo(L,te),Zo(L),kr(L,te)};var nc=()=>{B.add("link",L=>{io(L),Au(L),ea(L),ht(L)})};nc()}()),_X}var DX;function tee(){return DX||(DX=1,eee()),AX}tee();var RX={},NX={},MX;function nee(){return MX||(MX=1,function(){var B=tinymce.util.Tools.resolve("tinymce.PluginManager");const Y=Object.getPrototypeOf,we=($,G,ie)=>ie($,G.prototype)?!0:$.constructor?.name===G.name,xe=$=>{const G=typeof $;return $===null?"null":G==="object"&&Array.isArray($)?"array":G==="object"&&we($,String,(ie,ze)=>ze.isPrototypeOf(ie))?"string":G},Ne=$=>G=>xe(G)===$,Ee=$=>G=>typeof G===$,Ce=$=>G=>$===G,de=($,G)=>Ze($)&&we($,G,(ie,ze)=>Y(ie)===ze),Oe=Ne("string"),Ze=Ne("object"),Ct=$=>de($,Object),Ke=Ne("array"),Ot=Ce(null),Ut=Ee("boolean"),jt=$=>$==null,Dt=$=>!jt($),qe=Ee("function"),En=Ee("number"),ft=($,G)=>{if(Ke($)){for(let ie=0,ze=$.length;ie<ze;++ie)if(!G($[ie]))return!1;return!0}return!1},V=()=>{};class Ye{tag;value;static singletonNone=new Ye(!1);constructor(G,ie){this.tag=G,this.value=ie}static some(G){return new Ye(!0,G)}static none(){return Ye.singletonNone}fold(G,ie){return this.tag?ie(this.value):G()}isSome(){return this.tag}isNone(){return!this.tag}map(G){return this.tag?Ye.some(G(this.value)):Ye.none()}bind(G){return this.tag?G(this.value):Ye.none()}exists(G){return this.tag&&G(this.value)}forall(G){return!this.tag||G(this.value)}filter(G){return!this.tag||G(this.value)?this:Ye.none()}getOr(G){return this.tag?this.value:G}or(G){return this.tag?this:G}getOrThunk(G){return this.tag?this.value:G()}orThunk(G){return this.tag?this:G()}getOrDie(G){if(this.tag)return this.value;throw new Error(G??"Called getOrDie on None")}static from(G){return Dt(G)?Ye.some(G):Ye.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(G){this.tag&&G(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const ut=Array.prototype.push,At=$=>{const G=[];for(let ie=0,ze=$.length;ie<ze;++ie){if(!Ke($[ie]))throw new Error("Arr.flatten item "+ie+" was not an array, input: "+$);ut.apply(G,$[ie])}return G},se=($,G)=>G>=0&&G<$.length?Ye.some($[G]):Ye.none(),nn=$=>se($,0),Wn=($,G)=>{for(let ie=0;ie<$.length;ie++){const ze=G($[ie],ie);if(ze.isSome())return ze}return Ye.none()},Yt=Object.keys,X=Object.hasOwnProperty,ce=($,G)=>{const ie=Yt($);for(let ze=0,Qt=ie.length;ze<Qt;ze++){const oo=ie[ze],Zo=$[oo];G(Zo,oo)}},Uo=$=>(G,ie)=>{$[ie]=G},dn=($,G,ie,ze)=>{ce($,(Qt,oo)=>{(G(Qt,oo)?ie:ze)(Qt,oo)})},_t=($,G)=>{const ie={};return dn($,G,Uo(ie),V),ie},A=($,G)=>X.call($,G),co=($,G)=>A($,G)&&$[G]!==void 0&&$[G]!==null,re=($=>(...G)=>{if(G.length===0)throw new Error("Can't merge zero objects");const ie={};for(let ze=0;ze<G.length;ze++){const Qt=G[ze];for(const oo in Qt)A(Qt,oo)&&(ie[oo]=$(ie[oo],Qt[oo]))}return ie})(($,G)=>Ct($)&&Ct(G)?re($,G):G),ae=$=>$.length>0,tt=($,G)=>{const ze=(G||document).createElement("div");if(ze.innerHTML=$,!ze.hasChildNodes()||ze.childNodes.length>1){const Qt="HTML does not have a single root node";throw console.error(Qt,$),new Error(Qt)}return on(ze.childNodes[0])},St=($,G)=>{const ze=(G||document).createElement($);return on(ze)},wt=($,G)=>{const ze=(G||document).createTextNode($);return on(ze)},on=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},Te={fromHtml:tt,fromTag:St,fromText:wt,fromDom:on,fromPoint:($,G,ie)=>Ye.from($.dom.elementFromPoint(G,ie)).map(on)},M=($,G,ie)=>{if(Oe(ie)||Ut(ie)||En(ie))$.setAttribute(G,ie+"");else throw console.error("Invalid call to Attribute.set. Key ",G,":: Value ",ie,":: Element ",$),new Error("Attribute value was not simple")},wn=($,G,ie)=>{M($.dom,G,ie)},sn=($,G)=>{$.dom.removeAttribute(G)};var Un=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Tt=tinymce.util.Tools.resolve("tinymce.util.URI");const rs=$=>G=>G.options.get($),Wt=$=>{const G=$.options.register;G("image_dimensions",{processor:"boolean",default:!0}),G("image_advtab",{processor:"boolean",default:!1}),G("image_uploadtab",{processor:"boolean",default:!0}),G("image_prepend_url",{processor:"string",default:""}),G("image_class_list",{processor:"object[]"}),G("image_description",{processor:"boolean",default:!0}),G("image_title",{processor:"boolean",default:!1}),G("image_caption",{processor:"boolean",default:!1}),G("image_list",{processor:ie=>{const ze=ie===!1||Oe(ie)||ft(ie,Ze)||qe(ie);return ze?{value:ie,valid:ze}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},io=rs("image_dimensions"),hn=rs("image_advtab"),Ae=rs("image_uploadtab"),nt=rs("image_prepend_url"),gt=rs("image_class_list"),Xe=rs("image_description"),ao=rs("image_title"),Qn=rs("image_caption"),Ho=rs("image_list"),oi=rs("a11y_advanced_options"),No=rs("automatic_uploads"),nl=$=>ae($.options.get("images_upload_url")),Gm=$=>Dt($.options.get("images_upload_handler")),va=($,G)=>Math.max(parseInt($,10),parseInt(G,10)),wo=$=>new Promise(G=>{const ie=document.createElement("img"),ze=oo=>{ie.parentNode&&ie.parentNode.removeChild(ie),G(oo)};ie.addEventListener("load",()=>{const oo=va(ie.width,ie.clientWidth),Zo=va(ie.height,ie.clientHeight),kr={width:oo,height:Zo};ze(Promise.resolve(kr))}),ie.addEventListener("error",()=>{ze(Promise.reject(`Failed to get image dimensions for: ${$}`))});const Qt=ie.style;Qt.visibility="hidden",Qt.position="fixed",Qt.bottom=Qt.left="0px",Qt.width=Qt.height="auto",document.body.appendChild(ie),ie.src=$}),Qa=$=>($&&($=$.replace(/px$/,"")),$),gs=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),Ls=$=>{if($.margin){const G=String($.margin).split(" ");switch(G.length){case 1:$["margin-top"]=$["margin-top"]||G[0],$["margin-right"]=$["margin-right"]||G[0],$["margin-bottom"]=$["margin-bottom"]||G[0],$["margin-left"]=$["margin-left"]||G[0];break;case 2:$["margin-top"]=$["margin-top"]||G[0],$["margin-right"]=$["margin-right"]||G[1],$["margin-bottom"]=$["margin-bottom"]||G[0],$["margin-left"]=$["margin-left"]||G[1];break;case 3:$["margin-top"]=$["margin-top"]||G[0],$["margin-right"]=$["margin-right"]||G[1],$["margin-bottom"]=$["margin-bottom"]||G[2],$["margin-left"]=$["margin-left"]||G[1];break;case 4:$["margin-top"]=$["margin-top"]||G[0],$["margin-right"]=$["margin-right"]||G[1],$["margin-bottom"]=$["margin-bottom"]||G[2],$["margin-left"]=$["margin-left"]||G[3]}delete $.margin}return $},Su=($,G)=>{const ie=Ho($);Oe(ie)?fetch(ie).then(ze=>{ze.ok&&ze.json().then(G)}):qe(ie)?ie(G):G(ie)},Oi=($,G,ie)=>{const ze=()=>{ie.onload=ie.onerror=null,$.selection&&($.selection.select(ie),$.nodeChanged())};ie.onload=()=>{!G.width&&!G.height&&io($)&&$.dom.setAttribs(ie,{width:String(ie.clientWidth),height:String(ie.clientHeight)}),ze()},ie.onerror=ze},Xr=$=>new Promise((G,ie)=>{const ze=new FileReader;ze.onload=()=>{G(ze.result)},ze.onerror=()=>{ie(ze.error?.message)},ze.readAsDataURL($)}),Gs=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),hr=($,G)=>{const ie=$.options.get;return Tt.isDomSafe(G,"img",{allow_html_data_urls:ie("allow_html_data_urls"),allow_script_urls:ie("allow_script_urls"),allow_svg_data_urls:ie("allow_svg_data_urls")})},is=Un.DOM,dc=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?Qa($.style.marginLeft):"",Ja=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?Qa($.style.marginTop):"",en=$=>$.style.borderWidth?Qa($.style.borderWidth):"",ho=($,G)=>$.hasAttribute(G)?$.getAttribute(G)??"":"",qn=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",mc=($,G,ie)=>{ie===""||ie===null?$.removeAttribute(G):$.setAttribute(G,ie)},Ia=$=>{const G=is.create("figure",{class:"image"});is.insertAfter(G,$),G.appendChild($),G.appendChild(is.create("figcaption",{contentEditable:"true"},"Caption")),G.contentEditable="false"},Zt=$=>{const G=$.parentNode;Dt(G)&&(is.insertAfter($,G),is.remove(G))},$l=$=>{qn($)?Zt($):Ia($)},ls=($,G)=>{const ie=$.getAttribute("style"),ze=G(ie!==null?ie:"");ze.length>0?($.setAttribute("style",ze),$.setAttribute("data-mce-style",ze)):$.removeAttribute("style")},Il=($,G)=>(ie,ze,Qt)=>{const oo=ie.style;oo[ze]?(oo[ze]=gs(Qt),ls(ie,G)):mc(ie,ze,Qt)},fc=($,G)=>$.style[G]?Qa($.style[G]):ho($,G),La=($,G)=>{const ie=gs(G);$.style.marginLeft=ie,$.style.marginRight=ie},qo=($,G)=>{const ie=gs(G);$.style.marginTop=ie,$.style.marginBottom=ie},Pn=($,G)=>{const ie=gs(G);$.style.borderWidth=ie},Ko=($,G)=>{$.style.borderStyle=G},ld=$=>$.style.borderStyle??"",wu=$=>Dt($)&&$.nodeName==="FIGURE",si=$=>$.nodeName==="IMG",rn=$=>{const G=is.getAttrib($,"alt"),ie=is.getAttrib($,"role");return $.hasAttribute("alt")&&G.length===0||ie==="presentation"||ie==="none"},Fa=$=>rn($)?"":ho($,"alt"),Mr=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),qm=($,G)=>{const ie=document.createElement("img");return mc(ie,"style",G.style),(dc(ie)||G.hspace!=="")&&La(ie,G.hspace),(Ja(ie)||G.vspace!=="")&&qo(ie,G.vspace),(en(ie)||G.border!=="")&&Pn(ie,G.border),(ld(ie)||G.borderStyle!=="")&&Ko(ie,G.borderStyle),$(ie.getAttribute("style")??"")},Tr=($,G)=>{const ie=document.createElement("img");if($c($,{...G,caption:!1},ie),Ll(ie,G.alt,G.isDecorative),G.caption){const ze=is.create("figure",{class:"image"});return ze.appendChild(ie),ze.appendChild(is.create("figcaption",{contentEditable:"true"},"Caption")),ze.contentEditable="false",ze}else return ie},tm=($,G)=>({src:ho(G,"src"),alt:Fa(G),title:ho(G,"title"),width:fc(G,"width"),height:fc(G,"height"),class:ho(G,"class"),style:$(ho(G,"style")),caption:qn(G),hspace:dc(G),vspace:Ja(G),border:en(G),borderStyle:ld(G),isDecorative:rn(G)}),as=($,G,ie,ze,Qt)=>{ie[ze]!==G[ze]&&Qt($,ze,String(ie[ze]))},Ll=($,G,ie)=>{if(ie){is.setAttrib($,"role","presentation");const ze=Te.fromDom($);wn(ze,"alt","")}else{if(Ot(G)){const ze=Te.fromDom($);sn(ze,"alt")}else{const ze=Te.fromDom($);wn(ze,"alt",G)}is.getAttrib($,"role")==="presentation"&&is.setAttrib($,"role","")}},ud=($,G,ie)=>{(ie.alt!==G.alt||ie.isDecorative!==G.isDecorative)&&Ll($,ie.alt,ie.isDecorative)},ol=($,G)=>(ie,ze,Qt)=>{$(ie,Qt),ls(ie,G)},$c=($,G,ie)=>{const ze=tm($,ie);as(ie,ze,G,"caption",(Qt,oo,Zo)=>$l(Qt)),as(ie,ze,G,"src",mc),as(ie,ze,G,"title",mc),as(ie,ze,G,"width",Il("width",$)),as(ie,ze,G,"height",Il("height",$)),as(ie,ze,G,"class",mc),as(ie,ze,G,"style",ol((Qt,oo)=>mc(Qt,"style",oo),$)),as(ie,ze,G,"hspace",ol(La,$)),as(ie,ze,G,"vspace",ol(qo,$)),as(ie,ze,G,"border",ol(Pn,$)),as(ie,ze,G,"borderStyle",ol(Ko,$)),ud(ie,ze,G)},rr=($,G)=>{const ie=$.dom.styles.parse(G),ze=Ls(ie),Qt=$.dom.styles.parse($.dom.styles.serialize(ze));return $.dom.styles.serialize(Qt)},Fl=$=>{const G=$.selection.getNode(),ie=$.dom.getParent(G,"figure.image");return ie?$.dom.select("img",ie)[0]:G&&(G.nodeName!=="IMG"||Gs(G))?null:G},Eu=($,G)=>{const ie=$.dom,ze=_t($.schema.getTextBlockElements(),(oo,Zo)=>!$.schema.isValidChild(Zo,"figure")),Qt=ie.getParent(G.parentNode,oo=>co(ze,oo.nodeName),$.getBody());return Qt?ie.split(Qt,G)??G:G},Mt=$=>{const G=Fl($);return G?tm(ie=>rr($,ie),G):Mr()},ec=($,G)=>{const ie=Tr(Qt=>rr($,Qt),G);$.dom.setAttrib(ie,"data-mce-id","__mcenew"),$.focus(),$.insertContent(ie.outerHTML);const ze=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(ze,"data-mce-id",null),wu(ze)){const Qt=Eu($,ze);$.selection.select(Qt)}else $.selection.select(ze)},Tu=($,G)=>{$.dom.setAttrib(G,"src",G.getAttribute("src"))},Di=($,G)=>{if(G){const ie=$.dom.is(G.parentNode,"figure.image")?G.parentNode:G;$.dom.remove(ie),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},jo=($,G)=>{const ie=Fl($);if(ie)if($c(ze=>rr($,ze),G,ie),Tu($,ie),wu(ie.parentNode)){$.dom.setStyle(ie,"float","");const ze=ie.parentNode;Eu($,ze),$.selection.select(ie.parentNode)}else $.selection.select(ie),Oi($,G,ie)},dd=($,G)=>{const ie=G.src;return{...G,src:hr($,ie)?ie:""}},gc=($,G)=>{const ie=Fl($);if(ie){const Qt={...tm(Zo=>rr($,Zo),ie),...G},oo=dd($,Qt);Qt.src?jo($,oo):Di($,ie)}else G.src&&ec($,{...Mr(),...G})};var er=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ri=tinymce.util.Tools.resolve("tinymce.util.Tools");const md=$=>Oe($.value)?$.value:"",Ha=$=>Oe($.text)?$.text:Oe($.title)?$.title:"",Lr=($,G)=>{const ie=[];return Ri.each($,ze=>{const Qt=Ha(ze);if(ze.menu!==void 0){const oo=Lr(ze.menu,G);ie.push({text:Qt,items:oo})}else{const oo=G(ze);ie.push({text:Qt,value:oo})}}),ie},ri=($=md)=>G=>G?Ye.from(G).map(ie=>Lr(ie,$)):Ye.none(),Fr=$=>ri(md)($),ph=$=>A($,"items"),nm=($,G)=>Wn($,ie=>ph(ie)?nm(ie.items,G):ie.value===G?Ye.some(ie):Ye.none()),Ni={sanitizer:ri,sanitize:Fr,findEntry:($,G)=>$.bind(ie=>nm(ie,G))},Km={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},Ds=$=>{const G=Ni.sanitizer(Hn=>$.convertURL(Hn.value||Hn.url||"","src")),ie=new Promise(Hn=>{Su($,ko=>{Hn(G(ko).map(uo=>At([[{text:"None",value:""}],uo])))})}),ze=Ni.sanitize(gt($)),Qt=hn($),oo=Ae($),Zo=nl($),kr=Gm($),ea=Mt($),nc=Xe($),L=ao($),te=io($),he=Qn($),$e=oi($),bt=No($),Kt=Ye.some(nt($)).filter(Hn=>Oe(Hn)&&Hn.length>0);return ie.then(Hn=>({image:ea,imageList:Hn,classList:ze,hasAdvTab:Qt,hasUploadTab:oo,hasUploadUrl:Zo,hasUploadHandler:kr,hasDescription:nc,hasImageTitle:L,hasDimensions:te,hasImageCaption:he,prependURL:Kt,hasAccessibilityOptions:$e,automaticUploads:bt}))},kn=$=>{const G={name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"},ie=$.imageList.map(L=>({name:"images",type:"listbox",label:"Image list",items:L})),ze={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},Qt={name:"title",type:"input",label:"Image title"},oo={name:"dimensions",type:"sizeinput"},Zo={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},kr=$.classList.map(L=>({name:"classes",type:"listbox",label:"Class",items:L})),ea={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},nc=L=>L?{type:"grid",columns:2}:{type:"panel"};return At([[G],ie.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Zo]:[],$.hasDescription?[ze]:[],$.hasImageTitle?[Qt]:[],$.hasDimensions?[oo]:[],[{...nc($.classList.isSome()&&$.hasImageCaption),items:At([kr.toArray(),$.hasImageCaption?[ea]:[]])}]])},Jr={makeTab:$=>({title:"General",name:"general",items:kn($)}),makeItems:kn},om={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},Hl=$=>({prevImage:Ni.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),hs=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),rl=($,G)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&G?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),ai=($,G)=>/^(?:[a-zA-Z]+:)?\/\//.test(G)?Ye.none():$.prependURL.bind(ie=>G.substring(0,ie.length)!==ie?Ye.some(ie+G):Ye.none()),ng=($,G)=>{const ie=G.getData();ai($,ie.src.value).each(ze=>{G.setData({src:{value:ze,meta:ie.src.meta}})})},Rt=($,G,ie)=>{$.hasDescription&&Oe(ie.alt)&&(G.alt=ie.alt),$.hasAccessibilityOptions&&(G.isDecorative=ie.isDecorative||G.isDecorative||!1),$.hasImageTitle&&Oe(ie.title)&&(G.title=ie.title),$.hasDimensions&&(Oe(ie.width)&&(G.dimensions.width=ie.width),Oe(ie.height)&&(G.dimensions.height=ie.height)),Oe(ie.class)&&Ni.findEntry($.classList,ie.class).each(ze=>{G.classes=ze.value}),$.hasImageCaption&&Ut(ie.caption)&&(G.caption=ie.caption),$.hasAdvTab&&(Oe(ie.style)&&(G.style=ie.style),Oe(ie.vspace)&&(G.vspace=ie.vspace),Oe(ie.border)&&(G.border=ie.border),Oe(ie.hspace)&&(G.hspace=ie.hspace),Oe(ie.borderstyle)&&(G.borderstyle=ie.borderstyle))},al=($,G)=>{const ie=G.getData(),ze=ie.src.meta;if(ze!==void 0){const Qt=re({},ie);Rt($,Qt,ze),G.setData(Qt)}},ya=($,G,ie,ze)=>{const Qt=ze.getData(),oo=Qt.src.value,Zo=Qt.src.meta||{};!Zo.width&&!Zo.height&&G.hasDimensions&&(ae(oo)?$.imageSize(oo).then(kr=>{ie.open&&ze.setData({dimensions:kr})}).catch(kr=>console.error(kr)):ze.setData({dimensions:{width:"",height:""}}))},Lc=($,G,ie)=>{const ze=ie.getData(),Qt=Ni.findEntry($.imageList,ze.src.value);G.prevImage=Qt,ie.setData({images:Qt.map(oo=>oo.value).getOr("")})},Fs=($,G,ie,ze)=>{ng(G,ze),al(G,ze),ya($,G,ie,ze),Lc(G,ie,ze)},og=($,G,ie,ze)=>{const Qt=ze.getData(),oo=Ni.findEntry(G.imageList,Qt.images);oo.each(Zo=>{Qt.alt===""||ie.prevImage.map(ea=>ea.text===Qt.alt).getOr(!1)?Zo.value===""?ze.setData({src:Zo,alt:ie.prevAlt}):ze.setData({src:Zo,alt:Zo.text}):ze.setData({src:Zo})}),ie.prevImage=oo,Fs($,G,ie,ze)},tc=($,G,ie,ze)=>{const Qt=ze.getData();ze.block("Uploading image"),nn(Qt.fileinput).fold(()=>{ze.unblock()},oo=>{const Zo=URL.createObjectURL(oo),kr=()=>{ze.unblock(),URL.revokeObjectURL(Zo)},ea=nc=>{ze.setData({src:{value:nc,meta:{}}}),ze.showTab("general"),Fs($,G,ie,ze),ze.focus("src")};Xr(oo).then(nc=>{const L=$.createBlobCache(oo,Zo,nc);G.automaticUploads?$.uploadImage(L).then(te=>{ea(te.url),kr()}).catch(te=>{kr(),$.alertErr(te,()=>{ze.focus("fileinput")})}):($.addToBlobCache(L),ea(L.blobUri()),ze.unblock())})})},Fc=($,G,ie)=>(ze,Qt)=>{Qt.name==="src"?Fs($,G,ie,ze):Qt.name==="images"?og($,G,ie,ze):Qt.name==="alt"?ie.prevAlt=ze.getData().alt:Qt.name==="fileinput"?tc($,G,ie,ze):Qt.name==="isDecorative"&&ze.setEnabled("alt",!ze.getData().isDecorative)},Ym=$=>()=>{$.open=!1},sg=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:At([[Jr.makeTab($)],$.hasAdvTab?[Km.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[om.makeTab($)]:[]])}:{type:"panel",items:Jr.makeItems($)},cl=($,G,ie)=>ze=>{const Qt=re(hs(G.image),ze.getData()),oo={...Qt,style:qm(ie.normalizeCss,rl(Qt,!1))};$.execCommand("mceUpdateImage",!1,rl(oo,G.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),ze.close()},rg=$=>G=>hr($,G)?wo($.documentBaseURI.toAbsolute(G)).then(ie=>({width:String(ie.width),height:String(ie.height)})):Promise.resolve({width:"",height:""}),ku=$=>(G,ie,ze)=>$.editorUpload.blobCache.create({blob:G,blobUri:ie,name:G.name?.replace(/\.[^\.]+$/,""),filename:G.name,base64:ze.split(",")[1]}),il=$=>G=>{$.editorUpload.blobCache.add(G)},Au=$=>(G,ie)=>{$.windowManager.alert(G,ie)},ht=$=>G=>rr($,G),zl=$=>G=>$.dom.parseStyle(G),sm=$=>(G,ie)=>$.dom.serializeStyle(G,ie),ci=$=>G=>er($).upload([G],!1).then(ie=>ie.length===0?Promise.reject("Failed to upload image"):ie[0].status===!1?Promise.reject(ie[0].error?.message):ie[0]),hc=$=>{const G={imageSize:rg($),addToBlobCache:il($),createBlobCache:ku($),alertErr:Au($),normalizeCss:ht($),parseStyle:zl($),serializeStyle:sm($),uploadImage:ci($)};return{open:()=>{Ds($).then(ze=>{const Qt=Hl(ze);return{title:"Insert/Edit Image",size:"normal",body:sg(ze),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:hs(ze.image),onSubmit:cl($,ze,G),onChange:Fc(G,ze,Qt),onClose:Ym(Qt)}}).then($.windowManager.open)}}},fd=$=>{$.addCommand("mceImage",hc($).open),$.addCommand("mceUpdateImage",(G,ie)=>{$.undoManager.transact(()=>gc($,ie))})},Ca=$=>{const G=$.attr("class");return Dt(G)&&/\bimage\b/.test(G)},Mi=$=>G=>{let ie=G.length;const ze=Qt=>{Qt.attr("contenteditable",$?"true":null)};for(;ie--;){const Qt=G[ie];Ca(Qt)&&(Qt.attr("contenteditable",$?"false":null),Ri.each(Qt.getAll("figcaption"),ze))}},Vl=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",Mi(!0)),$.serializer.addNodeFilter("figure",Mi(!1))})},ll=$=>G=>{const ie=()=>{G.setEnabled($.selection.isEditable())};return $.on("NodeChange",ie),ie(),()=>{$.off("NodeChange",ie)}},Wo=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:hc($).open,onSetup:G=>{G.setActive(Dt(Fl($)));const ie=$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",G.setActive).unbind,ze=ll($)(G);return()=>{ie(),ze()}}}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:hc($).open,onSetup:ll($)}),$.ui.registry.addContextMenu("image",{update:G=>$.selection.isEditable()&&(wu(G)||si(G)&&!Gs(G))?["image"]:[]})};var gd=()=>{B.add("image",$=>{Wt($),Vl($),Wo($),fd($)})};gd()}()),NX}var PX;function oee(){return PX||(PX=1,nee()),RX}oee();var BX={},$X={},IX;function see(){return IX||(IX=1,function(){var B=tinymce.util.Tools.resolve("tinymce.PluginManager");const Y=(w,k,F)=>F(w,k.prototype)?!0:w.constructor?.name===k.name,we=w=>{const k=typeof w;return w===null?"null":k==="object"&&Array.isArray(w)?"array":k==="object"&&Y(w,String,(F,q)=>q.isPrototypeOf(F))?"string":k},xe=w=>k=>we(k)===w,Ne=w=>k=>typeof k===w,Ee=w=>k=>w===k,Ce=xe("string"),de=xe("array"),Oe=Ne("boolean"),Ze=Ee(void 0),Ct=w=>w==null,Ke=w=>!Ct(w),Ot=Ne("function"),Ut=Ne("number"),jt=()=>{},Dt=(w,k)=>F=>w(k(F)),qe=w=>()=>w,En=w=>w,ft=(w,k)=>w===k;function V(w,...k){return(...F)=>{const q=k.concat(F);return w.apply(null,q)}}const Ye=w=>{w()},ut=qe(!1),At=qe(!0);class se{tag;value;static singletonNone=new se(!1);constructor(k,F){this.tag=k,this.value=F}static some(k){return new se(!0,k)}static none(){return se.singletonNone}fold(k,F){return this.tag?F(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?se.some(k(this.value)):se.none()}bind(k){return this.tag?k(this.value):se.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:se.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return Ke(k)?se.some(k):se.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}const nn=Array.prototype.indexOf,Wn=Array.prototype.push,Yt=(w,k)=>nn.call(w,k),X=(w,k)=>Yt(w,k)>-1,ce=(w,k)=>{for(let F=0,q=w.length;F<q;F++){const ge=w[F];if(k(ge,F))return!0}return!1},Uo=(w,k)=>{const F=[];for(let q=0;q<w;q++)F.push(k(q));return F},dn=(w,k)=>{const F=w.length,q=new Array(F);for(let ge=0;ge<F;ge++){const Fe=w[ge];q[ge]=k(Fe,ge)}return q},_t=(w,k)=>{for(let F=0,q=w.length;F<q;F++){const ge=w[F];k(ge,F)}},A=(w,k)=>{for(let F=w.length-1;F>=0;F--){const q=w[F];k(q,F)}},co=(w,k)=>{const F=[],q=[];for(let ge=0,Fe=w.length;ge<Fe;ge++){const xt=w[ge];(k(xt,ge)?F:q).push(xt)}return{pass:F,fail:q}},it=(w,k)=>{const F=[];for(let q=0,ge=w.length;q<ge;q++){const Fe=w[q];k(Fe,q)&&F.push(Fe)}return F},Ro=(w,k,F)=>(A(w,(q,ge)=>{F=k(F,q,ge)}),F),re=(w,k,F)=>(_t(w,(q,ge)=>{F=k(F,q,ge)}),F),ae=(w,k,F)=>{for(let q=0,ge=w.length;q<ge;q++){const Fe=w[q];if(k(Fe,q))return se.some(Fe);if(F(Fe,q))break}return se.none()},tt=(w,k)=>ae(w,k,ut),St=w=>{const k=[];for(let F=0,q=w.length;F<q;++F){if(!de(w[F]))throw new Error("Arr.flatten item "+F+" was not an array, input: "+w);Wn.apply(k,w[F])}return k},wt=(w,k)=>St(dn(w,k)),on=(w,k)=>{for(let F=0,q=w.length;F<q;++F){const ge=w[F];if(k(ge,F)!==!0)return!1}return!0},pe=(w,k)=>{const F={};for(let q=0,ge=w.length;q<ge;q++){const Fe=w[q];F[String(Fe)]=k(Fe,q)}return F},Te=(w,k)=>k>=0&&k<w.length?se.some(w[k]):se.none(),M=w=>Te(w,0),wn=w=>Te(w,w.length-1),sn=(w,k)=>{for(let F=0;F<w.length;F++){const q=k(w[F],F);if(q.isSome())return q}return se.none()},Un=Object.keys,Tt=Object.hasOwnProperty,rs=(w,k)=>{const F=Un(w);for(let q=0,ge=F.length;q<ge;q++){const Fe=F[q],xt=w[Fe];k(xt,Fe)}},Wt=w=>(k,F)=>{w[F]=k},io=(w,k,F,q)=>{rs(w,(ge,Fe)=>{(k(ge,Fe)?F:q)(ge,Fe)})},hn=(w,k)=>{const F={};return io(w,k,Wt(F),jt),F},Ae=(w,k)=>{const F=[];return rs(w,(q,ge)=>{F.push(k(q,ge))}),F},nt=w=>Ae(w,En),gt=w=>Un(w).length,Xe=(w,k)=>ao(w,k)?se.from(w[k]):se.none(),ao=(w,k)=>Tt.call(w,k),Qn=(w,k)=>ao(w,k)&&w[k]!==void 0&&w[k]!==null,Ho=w=>{for(const k in w)if(Tt.call(w,k))return!1;return!0},oi=w=>{let k=w;return{get:()=>k,set:ge=>{k=ge}}},No=(w,k,F=ft)=>w.exists(q=>F(q,k)),nl=w=>{const k=[],F=q=>{k.push(q)};for(let q=0;q<w.length;q++)w[q].each(F);return k},Gm=(w,k,F)=>w.isSome()&&k.isSome()?se.some(F(w.getOrDie(),k.getOrDie())):se.none(),va=w=>w.bind(En),wo=(w,k)=>w?se.some(k):se.none(),Qa=w=>{const k=oi(se.none()),F=()=>k.get().each(w);return{clear:()=>{F(),k.set(se.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:an=>{F(),k.set(se.some(an))}}},gs=()=>Qa(w=>w.unbind()),Ls=(w,k)=>w.substring(k),Su=(w,k,F)=>k===""||w.length>=k.length&&w.substr(F,F+k.length)===k,Oi=(w,k)=>Xr(w,k)?Ls(w,k.length):w,Xr=(w,k)=>Su(w,k,0),hr=(w=>k=>k.replace(w,""))(/^\s+|\s+$/g),is=w=>w.length>0,dc=w=>!is(w),Ja=(w,k=10)=>{const F=parseInt(w,k);return isNaN(F)?se.none():se.some(F)},en=w=>{const k=parseFloat(w);return isNaN(k)?se.none():se.some(k)},ho=w=>{let k=!1,F;return(...q)=>(k||(k=!0,F=w.apply(null,q)),F)},qn=(w,k)=>{const q=(k||document).createElement("div");if(q.innerHTML=w,!q.hasChildNodes()||q.childNodes.length>1){const ge="HTML does not have a single root node";throw console.error(ge,w),new Error(ge)}return Zt(q.childNodes[0])},mc=(w,k)=>{const q=(k||document).createElement(w);return Zt(q)},Ia=(w,k)=>{const q=(k||document).createTextNode(w);return Zt(q)},Zt=w=>{if(w==null)throw new Error("Node cannot be null or undefined");return{dom:w}},ls={fromHtml:qn,fromTag:mc,fromText:Ia,fromDom:Zt,fromPoint:(w,k,F)=>se.from(w.dom.elementFromPoint(k,F)).map(Zt)},Il=8,fc=9,La=11,qo=1,Pn=3,Ko=(w,k)=>{const F=w.dom;if(F.nodeType!==qo)return!1;{const q=F;if(q.matches!==void 0)return q.matches(k);if(q.msMatchesSelector!==void 0)return q.msMatchesSelector(k);if(q.webkitMatchesSelector!==void 0)return q.webkitMatchesSelector(k);if(q.mozMatchesSelector!==void 0)return q.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},ld=w=>w.nodeType!==qo&&w.nodeType!==fc&&w.nodeType!==La||w.childElementCount===0,wu=(w,k)=>{const F=k===void 0?document:k.dom;return ld(F)?[]:dn(F.querySelectorAll(w),ls.fromDom)},si=(w,k)=>{const F=k===void 0?document:k.dom;return ld(F)?se.none():se.from(F.querySelector(w)).map(ls.fromDom)},rn=(w,k)=>w.dom===k.dom,Fa=Ko,Mr=w=>w.dom.nodeName.toLowerCase(),qm=w=>w.dom.nodeType,Tr=w=>k=>qm(k)===w,tm=w=>qm(w)===Il||Mr(w)==="#comment",as=Tr(qo),Ll=Tr(Pn),ud=Tr(fc),ol=Tr(La),$c=w=>k=>as(k)&&Mr(k)===w,rr=w=>ls.fromDom(w.dom.ownerDocument),Fl=w=>ud(w)?w:rr(w),Eu=w=>se.from(w.dom.parentNode).map(ls.fromDom),Mt=(w,k)=>{const F=Ot(k)?k:ut;let q=w.dom;const ge=[];for(;q.parentNode!==null&&q.parentNode!==void 0;){const Fe=q.parentNode,xt=ls.fromDom(Fe);if(ge.push(xt),F(xt)===!0)break;q=Fe}return ge},ec=w=>se.from(w.dom.previousSibling).map(ls.fromDom),Tu=w=>se.from(w.dom.nextSibling).map(ls.fromDom),Di=w=>dn(w.dom.childNodes,ls.fromDom),jo=(w,k)=>{const F=w.dom.childNodes;return se.from(F[k]).map(ls.fromDom)},dd=w=>jo(w,0),gc=w=>ol(w)&&Ke(w.dom.host),er=w=>ls.fromDom(w.dom.getRootNode()),Ri=w=>{const k=er(w);return gc(k)?se.some(k):se.none()},md=w=>ls.fromDom(w.dom.host),Ha=(w,k)=>{Eu(w).each(q=>{q.dom.insertBefore(k.dom,w.dom)})},Lr=(w,k)=>{Tu(w).fold(()=>{Eu(w).each(ge=>{Fr(ge,k)})},q=>{Ha(q,k)})},ri=(w,k)=>{dd(w).fold(()=>{Fr(w,k)},q=>{w.dom.insertBefore(k.dom,q.dom)})},Fr=(w,k)=>{w.dom.appendChild(k.dom)},ph=(w,k)=>{Ha(w,k),Fr(k,w)},nm=(w,k)=>{_t(k,(F,q)=>{const ge=q===0?w:k[q-1];Lr(ge,F)})},Ic=(w,k)=>{_t(k,F=>{Fr(w,F)})},Ni=(w,k,F)=>{if(Ce(F)||Oe(F)||Ut(F))w.setAttribute(k,F+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",F,":: Element ",w),new Error("Attribute value was not simple")},sl=(w,k,F)=>{Ni(w.dom,k,F)},Km=(w,k)=>{const F=w.dom;rs(k,(q,ge)=>{Ni(F,ge,q)})},Ds=(w,k)=>{const F=w.dom.getAttribute(k);return F===null?void 0:F},kn=(w,k)=>se.from(Ds(w,k)),Qr=(w,k)=>{w.dom.removeAttribute(k)},Jr=w=>re(w.dom.attributes,(k,F)=>(k[F.name]=F.value,k),{}),Rs=w=>{const k=w.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},om=w=>{const k=Di(w);k.length>0&&nm(w,k),Rs(w)},Hl=w=>dn(w,ls.fromDom),hs=w=>w.style!==void 0&&Ot(w.style.getPropertyValue),rl=w=>{const k=Ll(w)?w.dom.parentNode:w.dom;if(k==null||k.ownerDocument===null)return!1;const F=k.ownerDocument;return Ri(ls.fromDom(k)).fold(()=>F.body.contains(k),Dt(rl,md))},ai=(w,k,F)=>{if(!Ce(F))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",F,":: Element ",w),new Error("CSS value must be a string: "+F);hs(w)&&w.style.setProperty(k,F)},ng=(w,k)=>{hs(w)&&w.style.removeProperty(k)},Rt=(w,k,F)=>{const q=w.dom;ai(q,k,F)},al=(w,k)=>{const F=w.dom,ge=window.getComputedStyle(F).getPropertyValue(k);return ge===""&&!rl(w)?ya(F,k):ge},ya=(w,k)=>hs(w)?w.style.getPropertyValue(k):"",Lc=(w,k)=>{const F=w.dom,q=ya(F,k);return se.from(q).filter(ge=>ge.length>0)},Fs=(w,k)=>{const F=w.dom;ng(F,k),No(kn(w,"style").map(hr),"")&&Qr(w,"style")},og=(w,k)=>en(w).getOr(k),tc=(w,k,F)=>og(al(w,k),F),Fc=(w,k,F,q)=>{const ge=tc(w,`padding-${F}`,0),Fe=tc(w,`padding-${q}`,0),xt=tc(w,`border-${F}-width`,0),an=tc(w,`border-${q}-width`,0);return k-ge-Fe-xt-an},Ym=(w,k)=>{const F=w.dom,q=F.getBoundingClientRect().width||F.offsetWidth;return Fc(w,q,"left","right")},cl=w=>Ym(w),ku=((w,k)=>{const F=Fe=>{if(!w(Fe))throw new Error("Can only get "+k+" value of a "+k+" node");return q(Fe).getOr("")},q=Fe=>w(Fe)?se.from(Fe.dom.nodeValue):se.none();return{get:F,getOption:q,set:(Fe,xt)=>{if(!w(Fe))throw new Error("Can only set raw "+k+" value of a "+k+" node");Fe.dom.nodeValue=xt}}})(Ll,"text"),il=w=>ku.get(w),Au=(w,k)=>ku.set(w,k);var ht=(w,k,F,q,ge)=>w(F,q)?se.some(F):Ot(ge)&&ge(F)?se.none():k(F,q,ge);const zl=(w,k,F)=>{let q=w.dom;const ge=Ot(F)?F:ut;for(;q.parentNode;){q=q.parentNode;const Fe=ls.fromDom(q);if(k(Fe))return se.some(Fe);if(ge(Fe))break}return se.none()},sm=(w,k,F)=>ht((ge,Fe)=>Fe(ge),zl,w,k,F),ci=(w,k)=>{const F=ge=>k(ls.fromDom(ge));return tt(w.dom.childNodes,F).map(ls.fromDom)},hc=(w,k,F)=>zl(w,q=>Ko(q,k),F),fd=(w,k)=>ci(w,F=>Ko(F,k)),Ca=(w,k)=>si(k,w),Mi=(w,k,F)=>ht((ge,Fe)=>Ko(ge,Fe),hc,w,k,F),Vl=w=>Mi(w,"[contenteditable]"),ll=(w,k=!1)=>rl(w)?w.dom.isContentEditable:Vl(w).fold(qe(k),F=>Wo(F)==="true"),Wo=w=>w.dom.contentEditable,gd=(w,k)=>it(Di(w),k),$=(w,k)=>{let F=[];return _t(Di(w),q=>{k(q)&&(F=F.concat([q])),F=F.concat($(q,k))}),F},G=(w,k)=>gd(w,F=>Ko(F,k)),ie=(w,k)=>wu(k,w),ze=(w,k)=>fd(w,k).isSome(),Qt=w=>w.nodeName.toLowerCase(),oo=w=>ls.fromDom(w.getBody()),Zo=w=>k=>rn(k,oo(w)),kr=w=>w?w.replace(/px$/,""):"",ea=w=>/^\d+(\.\d+)?$/.test(w)?w+"px":w,nc=w=>ls.fromDom(w.selection.getStart()),L=w=>ls.fromDom(w.selection.getEnd()),te=w=>sm(w,$c("table")).forall(ll),he=["tfoot","thead","tbody","colgroup"],$e=w=>X(he,w),bt=(w,k)=>({rows:w,columns:k}),Kt=(w,k,F)=>({element:w,rowspan:k,colspan:F}),Hn=(w,k,F,q,ge,Fe)=>({element:w,rowspan:k,colspan:F,row:q,column:ge,isLocked:Fe}),ko=(w,k,F)=>({element:w,cells:k,section:F}),uo=(w,k,F,q)=>({startRow:w,startCol:k,finishRow:F,finishCol:q}),xa=(w,k,F)=>({element:w,colspan:k,column:F}),qs=(w,k)=>({element:w,columns:k}),_u=(w,k,F=0)=>kn(w,k).map(q=>parseInt(q,10)).getOr(F),Xm=(w,k)=>rm(w,k,At),rm=(w,k,F)=>wt(Di(w),q=>Ko(q,k)?F(q)?[q]:[]:rm(q,k,F)),Pi=(w,k,F=ut)=>{if(F(k))return se.none();if(X(w,Mr(k)))return se.some(k);const q=ge=>Ko(ge,"table")||F(ge);return hc(k,w.join(","),q)},Qb=(w,k)=>Pi(["td","th"],w,k),Jb=w=>Xm(w,"th,td"),Vp=w=>Ko(w,"colgroup")?G(w,"col"):wt(t0(w),k=>G(k,"col")),Bi=(w,k)=>Mi(w,"table",k),e0=w=>Xm(w,"tr"),t0=w=>Bi(w).fold(qe([]),k=>G(k,"colgroup")),Zy=$c("th"),Ul=(w,k)=>w&&k?"sectionCells":w?"section":"cells",Gy=w=>{const k=w.section==="thead",F=No(qy(w.cells),"th");return w.section==="tfoot"?{type:"footer"}:k||F?{type:"header",subType:Ul(k,F)}:{type:"body"}},qy=w=>{const k=it(w,F=>Zy(F.element));return k.length===0?se.some("td"):k.length===w.length?se.some("th"):se.none()},Up=w=>{const k=dn(w,ge=>Gy(ge).type),F=X(k,"header"),q=X(k,"footer");if(!F&&!q)return se.some("body");{const ge=X(k,"body");return F&&!ge&&!q?se.some("header"):!F&&!ge&&q?se.some("footer"):se.none()}},jp=(w,k)=>dn(w,F=>{if(Mr(F)==="colgroup"){const q=dn(Vp(F),ge=>{const Fe=_u(ge,"span",1);return Kt(ge,1,Fe)});return ko(F,q,"colgroup")}else{const q=dn(Jb(F),ge=>{const Fe=_u(ge,"rowspan",1),xt=_u(ge,"colspan",1);return Kt(ge,Fe,xt)});return ko(F,q,k(F))}}),IS=w=>Eu(w).map(k=>{const F=Mr(k);return $e(F)?F:"tbody"}).getOr("tbody"),Ky=w=>{const k=e0(w),q=[...t0(w),...k];return jp(q,IS)},Wp="data-snooker-locked-cols",jl=w=>kn(w,Wp).bind(k=>se.from(k.match(/\d+/g))).map(k=>pe(k,At)),ii=(w,k)=>w+","+k,am=(w,k,F)=>se.from(w.access[ii(k,F)]),Yy=(w,k,F)=>{const q=po(w,ge=>F(k,ge.element));return q.length>0?se.some(q[0]):se.none()},po=(w,k)=>{const F=wt(w.all,q=>q.cells);return it(F,k)},Xy=w=>{const k={};let F=0;return _t(w.cells,q=>{const ge=q.colspan;Uo(ge,Fe=>{const xt=F+Fe;k[xt]=xa(q.element,ge,xt)}),F+=ge}),k},bh=w=>{const k={},F=[],ge=M(w).map(jc=>jc.element).bind(Bi).bind(jl).getOr({});let Fe=0,xt=0,an=0;const{pass:In,fail:Gn}=co(w,jc=>jc.section==="colgroup");_t(Gn,jc=>{const vl=[];_t(jc.cells,Pu=>{let ji=0;for(;k[ii(an,ji)]!==void 0;)ji++;const m1=Qn(ge,ji.toString()),cf=Hn(Pu.element,Pu.rowspan,Pu.colspan,an,ji,m1);for(let hg=0;hg<Pu.colspan;hg++)for(let pg=0;pg<Pu.rowspan;pg++){const bg=an+pg,lf=ji+hg,Th=ii(bg,lf);k[Th]=cf,xt=Math.max(xt,lf+1)}vl.push(cf)}),Fe++,F.push(ko(jc.element,vl,jc.section)),an++});const{columns:cs,colgroups:ks}=wn(In).map(jc=>{const vl=Xy(jc);return{colgroups:[qs(jc.element,nt(vl))],columns:vl}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:bt(Fe,xt),access:k,all:F,columns:cs,colgroups:ks}},Ks={fromTable:w=>{const k=Ky(w);return bh(k)},generate:bh,getAt:am,findItem:Yy,filterItems:po,justCells:w=>wt(w.all,k=>k.cells),justColumns:w=>nt(w.columns),hasColumns:w=>Un(w.columns).length>0,getColumnAt:(w,k)=>se.from(w.columns[k])},cm=(w,k)=>sn(w.all,F=>tt(F.cells,q=>rn(k,q.element))),Qy=(w,k,F)=>{const q=dn(k.selection,Fe=>Qb(Fe).bind(xt=>cm(w,xt)).filter(F)),ge=nl(q);return wo(ge.length>0,ge)},lt=(w,k)=>k.mergable,Hc=(w,k)=>k.unmergable,ag=(w,k)=>Qy(w,k,At),$i=(w,k)=>cm(w,k).exists(F=>!F.isLocked),Qm=(w,k)=>on(k,F=>$i(w,F)),Gp=(w,k)=>lt(w,k).filter(F=>Qm(w,F.cells)),ne=(w,k)=>Hc(w,k).filter(F=>Qm(w,F));var pc=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],hd=()=>{const w=Gn=>ls.fromDom(Gn.dom.cloneNode(!1)),k=Gn=>Fl(Gn).dom,F=Gn=>as(Gn)?Mr(Gn)==="body"?!0:X(pc,Mr(Gn)):!1,q=Gn=>as(Gn)?X(["br","img","hr","input"],Mr(Gn)):!1,ge=Gn=>as(Gn)&&Ds(Gn,"contenteditable")==="false",Fe=(Gn,cs)=>Gn.dom.compareDocumentPosition(cs.dom),xt=(Gn,cs)=>{const ks=Jr(Gn);Km(cs,ks)},an=Gn=>{const cs=Mr(Gn);return X(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],cs)},In=Gn=>as(Gn)?kn(Gn,"lang"):se.none();return{up:qe({selector:hc,closest:Mi,predicate:zl,all:Mt}),down:qe({selector:ie,predicate:$}),styles:qe({get:al,getRaw:Lc,set:Rt,remove:Fs}),attrs:qe({get:Ds,set:sl,remove:Qr,copyTo:xt}),insert:qe({before:Ha,after:Lr,afterAll:nm,append:Fr,appendAll:Ic,prepend:ri,wrap:ph}),remove:qe({unwrap:om,remove:Rs}),create:qe({nu:ls.fromTag,clone:w,text:ls.fromText}),query:qe({comparePosition:Fe,prevSibling:ec,nextSibling:Tu}),property:qe({children:Di,name:Mr,parent:Eu,document:k,isText:Ll,isComment:tm,isElement:as,isSpecial:an,getLanguage:In,getText:il,setText:Au,isBoundary:F,isEmptyTag:q,isNonEditable:ge}),eq:rn,is:Fa}};const qp=(w,k,F,q)=>{const ge=F[0],Fe=F.slice(1);return q(w,k,ge,Fe)},Jm=(w,k,F)=>F.length>0?qp(w,k,F,Sa):se.none(),Sa=(w,k,F,q)=>{const ge=k(w,F);return Ro(q,(Fe,xt)=>{const an=k(w,xt);return bc(w,Fe,an)},ge)},bc=(w,k,F)=>k.bind(q=>F.filter(V(w.eq,q))),Kp=Jm,Yp=hd(),cg=(w,k)=>Kp(Yp,(F,q)=>w(q),k),Xp=(w,k)=>{const F=Ks.fromTable(w);return ag(F,k).bind(ge=>{const Fe=ge[ge.length-1],xt=ge[0].row,an=Fe.row+Fe.rowspan,In=F.all.slice(xt,an);return Up(In)}).getOr("")},Wl=(w,k)=>k.column>=w.startCol&&k.column+k.colspan-1<=w.finishCol&&k.row>=w.startRow&&k.row+k.rowspan-1<=w.finishRow,ig=(w,k)=>{let F=!0;const q=V(Wl,k);for(let ge=k.startRow;ge<=k.finishRow;ge++)for(let Fe=k.startCol;Fe<=k.finishCol;Fe++)F=F&&Ks.getAt(w,ge,Fe).exists(q);return F?se.some(k):se.none()},Qp=(w,k)=>uo(Math.min(w.row,k.row),Math.min(w.column,k.column),Math.max(w.row+w.rowspan-1,k.row+k.rowspan-1),Math.max(w.column+w.colspan-1,k.column+k.colspan-1)),zc=(w,k,F)=>{const q=Ks.findItem(w,k,rn),ge=Ks.findItem(w,F,rn);return q.bind(Fe=>ge.map(xt=>Qp(Fe,xt)))},Jp=(w,k,F)=>zc(w,k,F).bind(q=>ig(w,q)),ul=(w,k,F)=>{const q=pd(w);return Jp(q,k,F)},pd=Ks.fromTable;var no=tinymce.util.Tools.resolve("tinymce.util.Tools");const oc=(w,k,F)=>{const q=w.select("td,th",k);let ge;for(let Fe=0;Fe<q.length;Fe++){const xt=w.getStyle(q[Fe],F);if(Ze(ge)&&(ge=xt),ge!==xt)return""}return ge},ef=(w,k,F)=>{no.each("left center right".split(" "),q=>{q!==F&&w.formatter.remove("align"+q,{},k)}),F&&w.formatter.apply("align"+F,{},k)},o0=(w,k,F)=>{no.each("top middle bottom".split(" "),q=>{q!==F&&w.formatter.remove("valign"+q,{},k)}),F&&w.formatter.apply("valign"+F,{},k)},jn=(w,k,F)=>{w.dispatch("TableModified",{...F,table:k})};var Ou=tinymce.util.Tools.resolve("tinymce.Env");const pr="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",dl=Uo(5,w=>{const k=`${w+1}px`;return{title:k,value:k}}),ml=dn(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],w=>({title:w,value:w.toLowerCase()})),Hs="100%",Ao=w=>{const k=w.dom,F=k.getParent(w.selection.getStart(),k.isBlock)??w.getBody();return cl(ls.fromDom(F))+"px"},Jy=(w,k)=>e1(w)||!rc(w)?k:bd(w)?{...k,width:Ao(w)}:{...k,width:Hs},e2=(w,k)=>e1(w)||rc(w)?k:bd(w)?{...k,width:Ao(w)}:{...k,width:Hs},br=w=>k=>k.options.get(w),Ii=w=>{const k=w.options.register;k("table_border_widths",{processor:"object[]",default:dl}),k("table_border_styles",{processor:"object[]",default:ml}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!Ou.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:pr}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},Li=br("table_sizing_mode"),vr=br("table_border_widths"),fl=br("table_border_styles"),sc=br("table_cell_advtab"),Vc=br("table_row_advtab"),wa=br("table_advtab"),Mo=br("table_appearance_options"),li=br("table_grid"),rc=br("table_style_by_css"),ta=br("table_cell_class_list"),Hr=br("table_row_class_list"),Ns=br("table_class_list"),Fi=br("table_toolbar"),zr=br("table_background_color_map"),ar=br("table_border_color_map"),bd=w=>Li(w)==="fixed",e1=w=>Li(w)==="responsive",vh=w=>{const k=w.options,F=k.get("table_default_styles");return k.isSet("table_default_styles")?F:Jy(w,F)},Vr=w=>{const k=w.options,F=k.get("table_default_attributes");return k.isSet("table_default_attributes")?F:e2(w,F)},t1=w=>hc(w,"table"),s0=(w,k)=>{const F=ie(w,k);return F.length>0?se.some(F):se.none()},im=(w,k,F)=>Ca(w,k).bind(q=>Ca(w,F).bind(ge=>cg(t1,[q,ge]).map(Fe=>({first:q,last:ge,table:Fe})))),Cn=(w,k)=>s0(w,k),n1=(w,k,F)=>im(w,k,F).bind(q=>{const ge=In=>rn(w,In),Fe="thead,tfoot,tbody,table",xt=hc(q.first,Fe,ge),an=hc(q.last,Fe,ge);return xt.bind(In=>an.bind(Gn=>rn(In,Gn)?ul(q.table,q.first,q.last):se.none()))}),Pr=En,na=w=>{const k=(q,ge)=>kn(q,ge).exists(Fe=>parseInt(Fe,10)>1),F=q=>k(q,"rowspan")||k(q,"colspan");return w.length>0&&on(w,F)?se.some(w):se.none()},oa=(w,k,F)=>k.length<=1?se.none():n1(w,F.firstSelectedSelector,F.lastSelectedSelector).map(q=>({bounds:q,cells:k})),ps="data-mce-selected",vd="data-mce-first-selected",yh="td["+vd+"],th["+vd+"]",ui="data-mce-last-selected",gl="td["+ui+"],th["+ui+"]",lg={selected:ps,firstSelectedSelector:yh,lastSelectedSelector:gl},Ch=w=>Bi(w).bind(k=>Cn(k,lg.firstSelectedSelector)).fold(qe(w),k=>k[0]),ug=w=>(k,F)=>{const q=Mr(k),ge=q==="col"||q==="colgroup"?Ch(k):k;return Mi(ge,w,F)},Zl=ug("th,td,caption"),Hi=ug("th,td"),o1=w=>Hl(w.model.table.getSelectedCells()),da=(w,k)=>{const F=Hi(w),q=F.bind(ge=>Bi(ge)).map(ge=>e0(ge));return Gm(F,q,(ge,Fe)=>it(Fe,xt=>ce(Hl(xt.dom.cells),an=>Ds(an,k)==="1"||rn(an,ge)))).getOr([])},di=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Gl=w=>({value:dg(w)}),yo=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Uc=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,r0=w=>yo.test(w)||Uc.test(w),dg=w=>Oi(w,"#").toUpperCase(),mi=w=>r0(w)?se.some({value:dg(w)}):se.none(),Tn=w=>{const k=w.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},Ts=w=>{const k=Tn(w.red)+Tn(w.green)+Tn(w.blue);return Gl(k)},sa=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,bs=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,fi=(w,k,F,q)=>({red:w,green:k,blue:F,alpha:q}),ws=(w,k,F,q)=>{const ge=parseInt(w,10),Fe=parseInt(k,10),xt=parseInt(F,10),an=parseFloat(q);return fi(ge,Fe,xt,an)},cr=w=>{const k=sa.exec(w);if(k!==null)return se.some(ws(k[1],k[2],k[3],"1"));const F=bs.exec(w);return F!==null?se.some(ws(F[1],F[2],F[3],F[4])):se.none()},tf=w=>mi(w).orThunk(()=>cr(w).map(Ts)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const F=k.getContext("2d");F.clearRect(0,0,k.width,k.height),F.fillStyle="#FFFFFF",F.fillStyle=w,F.fillRect(0,0,1,1);const q=F.getImageData(0,0,1,1).data,ge=q[0],Fe=q[1],xt=q[2],an=q[3];return Ts(fi(ge,Fe,xt,an))}),Jn=w=>cr(w).map(Ts).map(k=>"#"+k.value).getOr(w),zi=(w,k,F)=>q=>{const ge=gs(),Fe=dc(F),xt=()=>{const an=o1(w),In=Gn=>w.formatter.match(k,{value:F},Gn.dom,Fe);Fe?(q.setActive(!ce(an,In)),ge.set(w.formatter.formatChanged(k,Gn=>q.setActive(!Gn),!0))):(q.setActive(on(an,In)),ge.set(w.formatter.formatChanged(k,q.setActive,!1,{value:F})))};return w.initialized?xt():w.on("init",xt),ge.clear},Xo=w=>Qn(w,"menu"),yc=w=>dn(w,k=>{const F=k.text||k.title||"";return Xo(k)?{text:F,items:yc(k.menu)}:{text:F,value:k.value}}),yr=w=>w.length?se.some(yc([{text:"Select...",value:"mce-no-match"},...w])):se.none(),Cr=(w,k,F,q)=>dn(k,ge=>{const Fe=ge.text||ge.title;return Xo(ge)?{type:"nestedmenuitem",text:Fe,getSubmenuItems:()=>Cr(w,ge.menu,F,q)}:{text:Fe,type:"togglemenuitem",onAction:()=>q(ge.value),onSetup:zi(w,F,ge.value)}}),ql=(w,k)=>F=>{w.execCommand("mceTableApplyCellStyle",!1,{[k]:F})},nf=w=>wt(w,k=>Xo(k)?[{...k,menu:nf(k.menu)}]:is(k.value)?[k]:[]),Du=(w,k,F,q)=>ge=>ge(Cr(w,k,F,q)),yd=(w,k,F)=>{const q=dn(k,ge=>({text:ge.title,value:"#"+tf(ge.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:q.length>0?q:void 0,allowCustomColors:!1},onAction:ge=>{const Fe=ge.value==="remove"?"":ge.value;w.execCommand("mceTableApplyCellStyle",!1,{[F]:Fe})}}]},Cd=w=>()=>{const F=w.queryCommandValue("mceTableRowType")==="header"?"body":"header";w.execCommand("mceTableRowType",!1,{type:F})},ma=w=>()=>{const F=w.queryCommandValue("mceTableColType")==="th"?"td":"th";w.execCommand("mceTableColType",!1,{type:F})},Ru=w=>yr(ta(w)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),t2=[{name:"width",type:"input",label:"Width"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:di}],xd=w=>t2.concat(Ru(w).toArray()),$o=(w,k)=>{const q=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(yc(fl(w)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(q):q}},of={normal:(w,k)=>{const F=w.dom;return{setAttrib:(xt,an)=>{F.setAttrib(k,xt,an)},setStyle:(xt,an)=>{F.setStyle(k,xt,an)},setFormat:(xt,an)=>{an===""?w.formatter.remove(xt,{value:null},k,!0):w.formatter.apply(xt,{value:an},k)}}}},Ea=w=>Xr(w,"rgb")?Jn(w):w,Cc=w=>{const k=ls.fromDom(w);return{borderwidth:Lc(k,"border-width").getOr(""),borderstyle:Lc(k,"border-style").getOr(""),bordercolor:Lc(k,"border-color").map(Ea).getOr(""),backgroundcolor:Lc(k,"background-color").map(Ea).getOr("")}},Vs=w=>{const k=w[0],F=w.slice(1);return _t(F,q=>{_t(Un(k),ge=>{rs(q,(Fe,xt)=>{const an=k[ge];an!==""&&ge===xt&&an!==Fe&&(k[ge]=ge==="class"?"mce-no-match":"")})})}),k},Nu=(w,k,F,q)=>tt(w,ge=>!Ze(F.formatter.matchNode(q,k+ge))).getOr(""),ir=V(Nu,["left","center","right"],"align"),sf=V(Nu,["top","middle","bottom"],"valign"),xh=(w,k)=>{const F=vh(w),q=Vr(w),ge=()=>({borderstyle:Xe(F,"border-style").getOr(""),bordercolor:Ea(Xe(F,"border-color").getOr("")),backgroundcolor:Ea(Xe(F,"background-color").getOr(""))}),Fe={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},xt=()=>{const cs=F["border-width"];return rc(w)&&cs?{border:cs}:Xe(q,"border").fold(()=>({}),ks=>({border:ks}))},an=k?ge():{},In=()=>{const cs=Xe(F,"border-spacing").or(Xe(q,"cellspacing")).fold(()=>({}),dr=>({cellspacing:dr})),ks=Xe(F,"border-padding").or(Xe(q,"cellpadding")).fold(()=>({}),dr=>({cellpadding:dr}));return{...cs,...ks}};return{...Fe,...F,...q,...an,...xt(),...In()}},r1=w=>Bi(ls.fromDom(w)).map(k=>{const F={selection:Hl(w.cells)};return Xp(k,F)}).getOr(""),HS=(w,k,F)=>{const q=(an,In)=>{const Gn=Lc(ls.fromDom(In),"border-width");return rc(w)&&Gn.isSome()?Gn.getOr(""):an.getAttrib(In,"border")||oc(w.dom,In,"border-width")||oc(w.dom,In,"border")||""},ge=w.dom,Fe=rc(w)?ge.getStyle(k,"border-spacing")||ge.getAttrib(k,"cellspacing"):ge.getAttrib(k,"cellspacing")||ge.getStyle(k,"border-spacing"),xt=rc(w)?oc(ge,k,"padding")||ge.getAttrib(k,"cellpadding"):ge.getAttrib(k,"cellpadding")||oc(ge,k,"padding");return{width:ge.getStyle(k,"width")||ge.getAttrib(k,"width"),height:ge.getStyle(k,"height")||ge.getAttrib(k,"height"),cellspacing:Fe??"",cellpadding:xt??"",border:q(ge,k),caption:!!ge.select("caption",k)[0],class:ge.getAttrib(k,"class",""),align:ir(w,k),...F?Cc(k):{}}},hl=(w,k,F)=>{const q=w.dom;return{height:q.getStyle(k,"height")||q.getAttrib(k,"height"),class:q.getAttrib(k,"class",""),type:r1(k),align:ir(w,k),...F?Cc(k):{}}},n2=(w,k,F,q)=>{const ge=w.dom,Fe=q.getOr(k);return{width:((an,In)=>ge.getStyle(an,In)||ge.getAttrib(an,In))(Fe,"width"),scope:ge.getAttrib(k,"scope"),celltype:Qt(k),class:ge.getAttrib(k,"class",""),halign:ir(w,k),valign:sf(w,k),...F?Cc(k):{}}},a1=(w,k)=>{const F=Ks.fromTable(w),q=Ks.justCells(F),ge=it(q,Fe=>ce(k,xt=>rn(Fe.element,xt)));return dn(ge,Fe=>({element:Fe.element.dom,column:Ks.getColumnAt(F,Fe.column).map(xt=>xt.element.dom)}))},pl=(w,k,F,q)=>{q("scope")&&w.setAttrib("scope",F.scope),q("class")&&F.class!=="mce-no-match"&&w.setAttrib("class",F.class),q("width")&&k.setStyle("width",ea(F.width))},a0=(w,k,F)=>{F("backgroundcolor")&&w.setFormat("tablecellbackgroundcolor",k.backgroundcolor),F("bordercolor")&&w.setFormat("tablecellbordercolor",k.bordercolor),F("borderstyle")&&w.setFormat("tablecellborderstyle",k.borderstyle),F("borderwidth")&&w.setFormat("tablecellborderwidth",ea(k.borderwidth))},rf=(w,k,F,q)=>{const ge=k.length===1;_t(k,Fe=>{const xt=Fe.element,an=ge?At:q,In=of.normal(w,xt),Gn=Fe.column.map(cs=>of.normal(w,cs)).getOr(In);pl(In,Gn,F,an),sc(w)&&a0(In,F,an),q("halign")&&ef(w,xt,F.halign),q("valign")&&o0(w,xt,F.valign)})},mg=(w,k)=>{w.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},fg=(w,k,F,q)=>{const ge=hn(q,(Fe,xt)=>F[xt]!==Fe);gt(ge)>0&&k.length>=1&&Bi(k[0]).each(Fe=>{const xt=a1(Fe,k),an=gt(hn(ge,(Gn,cs)=>cs!=="scope"&&cs!=="celltype"))>0,In=ao(ge,"celltype");(an||ao(ge,"scope"))&&rf(w,xt,q,V(ao,ge)),In&&mg(w,q),jn(w,Fe.dom,{structure:In,style:an})})},c1=(w,k,F,q)=>{const ge=q.getData();q.close(),w.undoManager.transact(()=>{fg(w,k,F,ge),w.focus()})},c0=(w,k)=>{const F=Bi(k[0]).map(q=>dn(a1(q,k),ge=>n2(w,ge.element,sc(w),ge.column)));return Vs(F.getOrDie())},Vi=w=>{const k=o1(w);if(k.length===0)return;const F=c0(w,k),q={type:"tabpanel",tabs:[{title:"General",name:"general",items:xd(w)},$o(w,"cell")]},ge={type:"panel",items:[{type:"grid",columns:2,items:xd(w)}]};w.windowManager.open({title:"Cell Properties",size:"normal",body:sc(w)?q:ge,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:F,onSubmit:V(c1,w,k,F)})},o2=w=>yr(Hr(w)).map(k=>({name:"class",type:"listbox",label:"Class",items:k})),Sd=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],Io=w=>Sd.concat(o2(w).toArray()),Ta=(w,k,F)=>{F("class")&&k.class!=="mce-no-match"&&w.setAttrib("class",k.class),F("height")&&w.setStyle("height",ea(k.height))},Kl=(w,k,F)=>{F("backgroundcolor")&&w.setStyle("background-color",k.backgroundcolor),F("bordercolor")&&w.setStyle("border-color",k.bordercolor),F("borderstyle")&&w.setStyle("border-style",k.borderstyle)},i1=(w,k,F,q)=>{const Fe=k.length===1?At:q;_t(k,xt=>{const an=G(ls.fromDom(xt),"td,th"),In=of.normal(w,xt);Ta(In,F,Fe),Vc(w)&&Kl(In,F,Fe),q("height")&&_t(an,Gn=>{w.dom.setStyle(Gn.dom,"height",null)}),q("align")&&ef(w,xt,F.align)})},wd=(w,k)=>{w.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},l1=(w,k,F,q)=>{const ge=hn(q,(Fe,xt)=>F[xt]!==Fe);if(gt(ge)>0){const Fe=ao(ge,"type"),xt=Fe?gt(ge)>1:!0;xt&&i1(w,k,q,V(ao,ge)),Fe&&wd(w,q),Bi(ls.fromDom(k[0])).each(an=>jn(w,an.dom,{structure:Fe,style:xt}))}},i0=(w,k,F,q)=>{const ge=q.getData();q.close(),w.undoManager.transact(()=>{l1(w,k,F,ge),w.focus()})},Yl=w=>{const k=da(nc(w),lg.selected);if(k.length===0)return;const F=dn(k,xt=>hl(w,xt.dom,Vc(w))),q=Vs(F),ge={type:"tabpanel",tabs:[{title:"General",name:"general",items:Io(w)},$o(w,"row")]},Fe={type:"panel",items:[{type:"grid",columns:2,items:Io(w)}]};w.windowManager.open({title:"Row Properties",size:"normal",body:Vc(w)?ge:Fe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:q,onSubmit:V(i0,w,dn(k,xt=>xt.dom),q)})},Xl=(w,k,F)=>{const q=F?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],ge=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],Fe=Mo(w)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],xt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],an=k.length>0?[{name:"class",type:"listbox",label:"Class",items:k}]:[];return q.concat(ge).concat(Fe).concat(xt).concat(an)},Go=(w,k,F,q)=>{if(k.tagName==="TD"||k.tagName==="TH")Ce(F)&&Ke(q)?w.setStyle(k,F,q):w.setStyles(k,F);else if(k.children)for(let ge=0;ge<k.children.length;ge++)Go(w,k.children[ge],F,q)},l0=(w,k,F,q)=>{const ge=w.dom,Fe={},xt={},an=rc(w),In=wa(w),Gn=parseFloat(F.border)===0;if(!Ze(F.class)&&F.class!=="mce-no-match"&&(Fe.class=F.class),xt.height=ea(F.height),an?xt.width=ea(F.width):ge.getAttrib(k,"width")&&(Fe.width=kr(F.width)),an?(Gn?(Fe.border=0,xt["border-width"]=""):(xt["border-width"]=ea(F.border),Fe.border=1),xt["border-spacing"]=ea(F.cellspacing)):(Fe.border=Gn?0:F.border,Fe.cellpadding=F.cellpadding,Fe.cellspacing=F.cellspacing),an&&k.children){const cs={};if(Gn?cs["border-width"]="":q.border&&(cs["border-width"]=ea(F.border)),q.cellpadding&&(cs.padding=ea(F.cellpadding)),In&&q.bordercolor&&(cs["border-color"]=F.bordercolor),!Ho(cs))for(let ks=0;ks<k.children.length;ks++)Go(ge,k.children[ks],cs)}if(In){const cs=F;xt["background-color"]=cs.backgroundcolor,xt["border-color"]=cs.bordercolor,xt["border-style"]=cs.borderstyle}ge.setStyles(k,{...vh(w),...xt}),ge.setAttribs(k,{...Vr(w),...Fe})},Ms=(w,k,F,q)=>{const ge=w.dom,Fe=q.getData(),xt=hn(Fe,(an,In)=>F[In]!==an);q.close(),w.undoManager.transact(()=>{if(!k){const an=Ja(Fe.cols).getOr(1),In=Ja(Fe.rows).getOr(1);w.execCommand("mceInsertTable",!1,{rows:In,columns:an}),k=Hi(nc(w),Zo(w)).bind(Gn=>Bi(Gn,Zo(w))).map(Gn=>Gn.dom).getOrDie()}if(gt(xt)>0){const an={border:ao(xt,"border"),bordercolor:ao(xt,"bordercolor"),cellpadding:ao(xt,"cellpadding")};l0(w,k,Fe,an);const In=ge.select("caption",k)[0];(In&&!Fe.caption||!In&&Fe.caption)&&w.execCommand("mceTableToggleCaption"),ef(w,k,Fe.align)}if(w.focus(),w.addVisual(),gt(xt)>0){const an=ao(xt,"caption"),In=an?gt(xt)>1:!0;jn(w,k,{structure:an,style:In})}})},af=(w,k)=>{const F=w.dom;let q,ge=xh(w,wa(w));k?(ge.cols="1",ge.rows="1",wa(w)&&(ge.borderstyle="",ge.bordercolor="",ge.backgroundcolor="")):(q=F.getParent(w.selection.getStart(),"table",w.getBody()),q?ge=HS(w,q,wa(w)):wa(w)&&(ge.borderstyle="",ge.bordercolor="",ge.backgroundcolor=""));const Fe=yr(Ns(w));Fe.isSome()&&ge.class&&(ge.class=ge.class.replace(/\s*mce\-item\-table\s*/g,""));const xt={type:"grid",columns:2,items:Xl(w,Fe.getOr([]),k)},an=()=>({type:"panel",items:[xt]}),In=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[xt]},$o(w,"table")]}),Gn=wa(w)?In():an();w.windowManager.open({title:"Table Properties",size:"normal",body:Gn,onSubmit:V(Ms,w,q,ge),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ge})},lr=w=>{const k=F=>{te(nc(w))&&F()};rs({mceTableProps:V(af,w,!1),mceTableRowProps:V(Yl,w),mceTableCellProps:V(Vi,w),mceInsertTableDialog:V(af,w,!0)},(F,q)=>w.addCommand(q,()=>k(F)))},Ql=w=>({element:w,mergable:se.none(),unmergable:se.none(),selection:[w]}),fa=(w,k,F)=>({element:F,mergable:oa(k,w,lg),unmergable:na(w),selection:Pr(w)}),Mu=w=>{const k=oi(se.none()),F=oi([]);let q=se.none();const ge=$c("caption"),Fe=Co=>q.forall(Us=>!Us[Co]),xt=()=>Zl(nc(w),Zo(w)),an=()=>Zl(L(w),Zo(w)),In=()=>xt().bind(Co=>va(Gm(Bi(Co),an().bind(Bi),(Us,Ys)=>rn(Us,Ys)?ge(Co)?se.some(Ql(Co)):se.some(fa(o1(w),Us,Co)):se.none()))),Gn=Co=>Bi(Co.element).map(Ys=>{const ka=Ks.fromTable(Ys),kh=ag(ka,Co).getOr([]),vg=re(kh,(Ah,_h)=>(_h.isLocked&&(Ah.onAny=!0,_h.column===0?Ah.onFirst=!0:_h.column+_h.colspan>=ka.grid.columns&&(Ah.onLast=!0)),Ah),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:Gp(ka,Co).isSome(),unmergeable:ne(ka,Co).isSome(),locked:vg}}),cs=()=>{k.set(ho(In)()),q=k.get().bind(Gn),_t(F.get(),Ye)},ks=Co=>(Co(),F.set(F.get().concat([Co])),()=>{F.set(it(F.get(),Us=>Us!==Co))}),dr=(Co,Us)=>ks(()=>k.get().fold(()=>{Co.setEnabled(!1)},Ys=>{Co.setEnabled(!Us(Ys)&&w.selection.isEditable())})),jc=(Co,Us,Ys)=>ks(()=>k.get().fold(()=>{Co.setEnabled(!1),Co.setActive(!1)},ka=>{Co.setEnabled(!Us(ka)&&w.selection.isEditable()),Co.setActive(Ys(ka))})),vl=Co=>q.exists(Us=>Us.locked[Co]),Pu=Co=>dr(Co,Us=>!1),ji=Co=>dr(Co,Us=>ge(Us.element)),m1=Co=>Us=>dr(Us,Ys=>ge(Ys.element)||vl(Co)),cf=Co=>Us=>dr(Us,Ys=>ge(Ys.element)||Co().isNone()),hg=(Co,Us)=>Ys=>dr(Ys,ka=>ge(ka.element)||Co().isNone()||vl(Us)),pg=Co=>dr(Co,Us=>Fe("mergeable")),bg=Co=>dr(Co,Us=>Fe("unmergeable")),lf=Co=>jc(Co,ut,Us=>Bi(Us.element,Zo(w)).exists(ka=>ze(ka,"caption"))),Th=(Co,Us)=>Ys=>jc(Ys,ka=>ge(ka.element),()=>w.queryCommandValue(Co)===Us),r2=Th("mceTableRowType","header"),a2=Th("mceTableColType","th");return w.on("NodeChange ExecCommand TableSelectorChange",cs),{onSetupTable:Pu,onSetupCellOrRow:ji,onSetupColumn:m1,onSetupPasteable:cf,onSetupPasteableColumn:hg,onSetupMergeable:pg,onSetupUnmergeable:bg,resetTargets:cs,onSetupTableWithCaption:lf,onSetupTableRowHeaders:r2,onSetupTableColumnHeaders:a2,targets:k.get}};var Sh=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const u1="x-tinymce/dom-table-",d1=u1+"rows",s2=u1+"columns",xc=w=>{const k=Sh.read()??[];return sn(k,F=>se.from(F.getType(w)))},bl=()=>xc(d1),ur=()=>xc(s2),Ur=w=>k=>{const F=()=>{k.setEnabled(w.selection.isEditable())};return w.on("NodeChange",F),F(),()=>{w.off("NodeChange",F)}},wh=(w,k)=>{w.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",onSetup:Ur(w),fetch:an=>an("inserttable | cell row column | advtablesort | tableprops deletetable")});const F=an=>()=>w.execCommand(an),q=(an,In)=>{w.queryCommandSupported(In.command)&&w.ui.registry.addButton(an,{...In,onAction:Ot(In.onAction)?In.onAction:F(In.command)})},ge=(an,In)=>{w.queryCommandSupported(In.command)&&w.ui.registry.addToggleButton(an,{...In,onAction:Ot(In.onAction)?In.onAction:F(In.command)})};q("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),q("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),q("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),q("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),q("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),q("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),q("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),q("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),q("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),q("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),q("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),q("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),q("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),q("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),q("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(bl)}),q("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(bl)}),q("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),q("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),q("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(ur,"onFirst")}),q("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(ur,"onLast")}),q("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table",onSetup:Ur(w)});const Fe=nf(Ns(w));Fe.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Du(w,Fe,"tableclass",an=>w.execCommand("mceTableToggleClass",!1,an)),onSetup:k.onSetupTable});const xt=nf(ta(w));xt.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Du(w,xt,"tablecellclass",an=>w.execCommand("mceTableCellToggleClass",!1,an)),onSetup:k.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Du(w,di,"tablecellverticalalign",ql(w,"vertical-align")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Du(w,vr(w),"tablecellborderwidth",ql(w,"border-width")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Du(w,fl(w),"tablecellborderstyle",ql(w,"border-style")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:an=>an(yd(w,zr(w),"background-color")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:an=>an(yd(w,ar(w),"border-color")),onSetup:k.onSetupCellOrRow})),ge("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),ge("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Cd(w),onSetup:k.onSetupTableRowHeaders}),ge("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ma(w),onSetup:k.onSetupTableColumnHeaders})},gg=w=>{const k=q=>w.dom.is(q,"table")&&w.getBody().contains(q)&&w.dom.isEditable(q.parentNode),F=Fi(w);F.length>0&&w.ui.registry.addContextToolbar("table",{predicate:k,items:F,scope:"node",position:"node"})},Eh=w=>k=>{const F=()=>{k.setEnabled(w.selection.isEditable())};return w.on("NodeChange",F),F(),()=>{w.off("NodeChange",F)}},u0=(w,k)=>{const F=ks=>()=>w.execCommand(ks),q=(ks,dr)=>w.queryCommandSupported(dr.command)?(w.ui.registry.addMenuItem(ks,{...dr,onAction:Ot(dr.onAction)?dr.onAction:F(dr.command)}),!0):!1,ge=(ks,dr)=>{w.queryCommandSupported(dr.command)&&w.ui.registry.addToggleMenuItem(ks,{...dr,onAction:Ot(dr.onAction)?dr.onAction:F(dr.command)})},Fe=ks=>{w.execCommand("mceInsertTable",!1,{rows:ks.numRows,columns:ks.numColumns})},xt=[q("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),q("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),q("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),q("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),q("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),q("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),q("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(bl)}),q("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(bl)})],an=[q("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),q("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),q("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),q("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),q("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),q("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(ur,"onFirst")}),q("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(ur,"onLast")})],In=[q("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),q("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),q("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];li(w)?w.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:Fe}],onSetup:Eh(w)}):w.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:Eh(w)}),w.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:F("mceInsertTableDialog"),onSetup:Eh(w)}),q("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),q("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),X(xt,!0)&&w.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:qe("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),X(an,!0)&&w.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:qe("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),X(In,!0)&&w.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:qe("tablecellprops tablemergecells tablesplitcells")}),w.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(qe(""),ks=>Mr(ks.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Gn=nf(Ns(w));Gn.length!==0&&w.queryCommandSupported("mceTableToggleClass")&&w.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>Cr(w,Gn,"tableclass",ks=>w.execCommand("mceTableToggleClass",!1,ks)),onSetup:k.onSetupTable});const cs=nf(ta(w));cs.length!==0&&w.queryCommandSupported("mceTableCellToggleClass")&&w.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>Cr(w,cs,"tablecellclass",ks=>w.execCommand("mceTableCellToggleClass",!1,ks)),onSetup:k.onSetupCellOrRow}),w.queryCommandSupported("mceTableApplyCellStyle")&&(w.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>Cr(w,di,"tablecellverticalalign",ql(w,"vertical-align")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>Cr(w,vr(w),"tablecellborderwidth",ql(w,"border-width")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>Cr(w,fl(w),"tablecellborderstyle",ql(w,"border-style")),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>yd(w,zr(w),"background-color"),onSetup:k.onSetupCellOrRow}),w.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>yd(w,ar(w),"border-color"),onSetup:k.onSetupCellOrRow})),ge("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),ge("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:Cd(w),onSetup:k.onSetupTableRowHeaders}),ge("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:ma(w),onSetup:k.onSetupTableRowHeaders})},Ui=w=>{const k=Mu(w);Ii(w),lr(w),u0(w,k),wh(w,k),gg(w)};var zS=()=>{B.add("table",Ui)};zS()}()),$X}var LX;function ree(){return LX||(LX=1,see()),BX}ree();var FX={},HX={},zX;function aee(){return zX||(zX=1,function(){var B=tinymce.util.Tools.resolve("tinymce.PluginManager");const Y=(de,Oe)=>{de.focus(),de.undoManager.transact(()=>{de.setContent(Oe)}),de.selection.setCursorLocation(),de.nodeChanged()},we=de=>de.getContent({source_view:!0}),xe=de=>{const Oe=we(de);de.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code",spellcheck:!1}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Oe},onSubmit:Ze=>{Y(de,Ze.getData().code),Ze.close()}})},Ne=de=>{de.addCommand("mceCodeEditor",()=>{xe(de)})},Ee=de=>{const Oe=()=>de.execCommand("mceCodeEditor");de.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Oe}),de.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Oe})};var Ce=()=>{B.add("code",de=>(Ne(de),Ee(de),{}))};Ce()}()),HX}var VX;function cee(){return VX||(VX=1,aee()),FX}cee();const iee=To.lazy(()=>Promise.resolve().then(()=>Bee).then(B=>({default:B.Editor})));function lee({value:B,onChange:Y,disabled:we=!1}){const xe=To.useMemo(()=>({height:500,menubar:!1,statusbar:!1,branding:!1,promotion:!1,plugins:["lists","link","image","table","code"],toolbar:"undo redo | bold italic underline | bullist numlist | table | link image | code",table_toolbar:"tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",content_style:`
        body {
          font-family: Inter, system-ui, sans-serif;
          font-size: 14px;
        }
      `}),[]);return fe.jsx(To.Suspense,{fallback:fe.jsx("div",{className:"p-3 text-sm text-gray-400 border rounded-lg",children:"Loading editor…"}),children:fe.jsx(iee,{licenseKey:"gpl",value:B,disabled:we,onEditorChange:Y,init:xe})})}function Vk({field:B,formik:Y,methods:we={},sqlOpsUrls:xe,refid:Ne,module_refid:Ee="menuManager.main",optionsOverride:Ce,setFieldOptions:de}){const{setHighlightedIndex:Oe,executeFieldMethod:Ze,handleFileUpload:Ct,handleKeyDown:Ke,handleToggle:Ot,setSearch:Ut,setOpen:jt,setIsFocused:Dt,handleInputChange:qe,handleSelect:En,handlePersist:ft,optionCount:V,baseInputClasses:Ye,focusClasses:ut,labelClasses:At,search:se,highlightedIndex:nn,options:Wn,isDisabled:Yt,key:X,filteredOptions:ce,open:Uo,listRef:dn,detailsRef:_t,isFocused:A}=HJ({field:B,formik:Y,methods:we,sqlOpsUrls:xe,refid:Ne,module_refid:Ee,...Ce&&{optionsOverride:Ce},...de&&{setFieldOptions:de}}),co=it=>it.icon?fe.jsx("i",{className:it.icon}):null;switch(B.type){case"suggest":case"autosuggest":case"autocomplete":{const re=Y.values[X]??"",ae=se!==""?se:x7(Wn,re)??String(re??"");return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsx("input",{className:`${Ye} ${ut}`,value:ae,placeholder:B.placeholder||"Type to search...",onChange:qe,onBlur:()=>{setTimeout(()=>jt(!1),150)},onKeyDown:tt=>{if(tt.key==="Enter"){if(tt.preventDefault(),ce[nn]){const[St]=ce[nn];Y.setFieldValue(X,St),ft(St,B,Ee)}else se.trim()&&(Y.setFieldValue(X,se.trim()),ft(se.trim(),B,Ee));jt(!1);return}Ke(tt,!0)},disabled:Yt}),Uo&&!Yt&&fe.jsx("div",{ref:dn,className:"absolute z-20 w-full bg-white border rounded shadow max-h-52 overflow-y-auto mt-1",children:ce.length>0?ce.map(([tt,St],wt)=>fe.jsx("div",{id:`${X}-${tt}`,"data-index":wt,className:`px-3 py-2 cursor-pointer text-sm
                  ${nn===wt?"bg-gray-100":"hover:bg-gray-100"}`,onMouseDown:()=>En(tt),children:St},tt)):fe.jsx("div",{className:"px-3 py-2 text-sm text-gray-400",children:`Press "ENTER" to ADD "${ae}" `})}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]})}case"dataSelector":case"dataSelectorFromTable":case"dataSelectorFromUniques":case"dataMethod":{if(B.multiple===!0){const re=Y.values[X];return fe.jsx(iX,{field:B,isDisabled:Yt,handleToggle:Ot,detailsRef:_t,handleKeyDown:Ke,valueArray:re,labelClasses:At,listRef:dn,search:se,filteredOptions:ce,highlightedIndex:nn,setSearch:Ut,formik:Y,executeFieldMethod:Ze,setHighlightedIndex:Oe,handlePersist:ft,module_refid:Ee,options:Wn})}return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("details",{className:`relative w-full ${Yt?"opacity-70":""}`,onToggle:Ot,ref:_t,onKeyDown:re=>{Yt||Ke(re,!0)},children:[fe.jsxs("summary",{className:`
    select-none border rounded-lg px-4 py-2.5 flex justify-between items-center
    ${Yt?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 cursor-pointer"}
  `,children:[fe.jsx("span",{className:"text-sm text-gray-700",children:Y.values[X]?x7(Wn,Y.values[X])??"Select option":`Select ${B.label}`}),fe.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!Yt&&fe.jsxs("div",{ref:dn,className:"absolute mt-1 w-full border border-gray-200 rounded-lg bg-white shadow-md z-10 max-h-60 overflow-y-auto p-2",children:[B.search&&fe.jsx("div",{className:"sticky top-0 bg-white p-1",children:fe.jsx("input",{type:"text",value:se,onChange:re=>{Ut(re.target.value),Oe(0)},onKeyDown:re=>Ke(re,!0),placeholder:"Search...",className:`px-2 py-[5px] rounded w-full border border-gray-200 transition-all duration-300 
                  bg-white/80 backdrop-blur-sm text-gray-800 placeholder-gray-400
                  focus:outline-none focus:ring-0`})}),ce.length>0&&fe.jsx("div",{onClick:re=>{re.preventDefault(),re.stopPropagation(),Y.setFieldValue(X,""),ft("",B,Ee),_t.current?.removeAttribute("open"),Ut("")},className:"px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm hover:bg-gray-50",children:"Clear selection"}),ce.length>0?ce.map(([re,ae],tt)=>fe.jsx("div",{id:`${X}-${re}`,"data-index":tt,onClick:St=>{St.preventDefault(),St.stopPropagation(),Y.setFieldValue(X,re),ft(re,B,Ee),_t.current?.removeAttribute("open"),Ut(""),Oe(0),Ze("onChange",B,`${X}-${re}`)},className:`px-2 py-1 hover:bg-gray-50 rounded cursor-pointer text-sm 
                        ${Y.values[X]===re?"bg-indigo-50 text-indigo-600 font-medium":nn===tt?"bg-gray-100":"hover:bg-gray-50"}`,children:ae},re)):fe.jsx("div",{className:"px-2 py-1 text-gray-400 text-sm",children:"No results"})]})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(Y.errors[X])})]})}case"richtextarea":return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsx(lee,{value:Y.values[X]??"",disabled:Yt,onChange:re=>{Y.setFieldValue(X,re),ft(re,B,Ee),Ze("onChange",B,X)}}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]});case"textarea":return fe.jsx(fe.Fragment,{children:fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative",children:[fe.jsx("textarea",{id:X,className:`${Ye} ${ut} min-h-[120px] resize-none`,onFocus:()=>Dt(!0),name:X,value:Y.values[X],onBlur:Y.handleBlur,onChange:re=>{Y.setFieldValue(X,re.target.value),ft(re.target.value,B,Ee),Ze("onChange",B,`${X}`)},placeholder:B.placeholder,disabled:Yt}),fe.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]})});case"select":if(B.multiple===!0){const re=Y.values[X];return fe.jsx(iX,{field:B,isDisabled:Yt,handleToggle:Ot,detailsRef:_t,handleKeyDown:Ke,valueArray:re,labelClasses:At,listRef:dn,search:se,filteredOptions:ce,highlightedIndex:nn,setSearch:Ut,formik:Y,executeFieldMethod:Ze,setHighlightedIndex:Oe,handlePersist:ft,module_refid:Ee,options:Wn})}return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative",children:[fe.jsxs("select",{className:`${Ye} ${ut} appearance-none ${Yt?"":"cursor-pointer"} pr-12`,onFocus:()=>Dt(!0),name:X,id:X,value:Y.values[X],onBlur:Y.handleBlur,onChange:re=>{Y.setFieldValue(X,re.target.value),ft(re.target.value,B,Ee),Ze("onChange",B,`${X}`)},disabled:Yt,children:[fe.jsx("option",{value:"",disabled:!0,children:B?.["no-option"]||`Please select ${B.label}`}),!tX(Wn)&&Object.entries(Wn).map(([re,ae])=>fe.jsx("option",{value:re,className:"py-2",children:ae},re)),tX(Wn)&&Object.entries(Wn).map(([re,ae])=>fe.jsx("optgroup",{label:re,children:Object.entries(ae).map(([tt,St])=>fe.jsx("option",{value:tt,children:St},tt))},re))]}),fe.jsx("div",{className:"absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none",children:fe.jsx("svg",{className:"w-5 h-5 transition-colors duration-300 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]});case"radioList":case"radio":return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsx("div",{className:`flex ${V>3?"flex-col":""} gap-2 ml-1`,children:Object.entries(Wn||{}).map(([re,ae])=>fe.jsxs("label",{htmlFor:`${X}-${re}`,className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[fe.jsx("input",{id:`${X}-${re}`,type:"radio",name:X,checked:Y.values[X]===re,value:re,onChange:tt=>{Y.setFieldValue(X,tt.target.value),ft(tt.target.value,B,Ee),Ze("onChange",B,`${X}-${re}`)},onBlur:Y.handleBlur,disabled:Yt,className:`h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500
                    ${Yt?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":""}
                    `}),ae]},re))}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(Y.errors[X])})]});case"checkbox":{const re=Y.values[X];return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsx("div",{className:"flex flex-col gap-2 ml-1",children:Object.entries(Wn||{}).map(([ae,tt])=>fe.jsxs("label",{className:"flex items-center gap-x-2 text-sm font-medium text-gray-700 cursor-pointer",children:[fe.jsx("input",{id:`${X}-${ae}`,type:"checkbox",checked:re.includes(ae),onChange:St=>{const wt=St.target.checked?[...re,ae]:re.filter(on=>on!==ae);Y.setFieldValue(X,wt),ft(wt,B,Ee),Ze("onChange",B,`${X}-${ae}`)},onBlur:Y.handleBlur,disabled:Yt,className:`h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500
                    ${Yt?"bg-gray-100 border-gray-200 text-gray-500 cursor-not-allowed":""}
                    `}),tt]},ae))}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500 ml-2",children:String(Y.errors[X])})]})}case"tags":{const re=Y.values[X],ae=se.trim(),tt=Array.isArray(Wn)?Wn:Object.entries(Wn||{}).map(([pe,Te])=>({value:pe,label:Te})),St=pe=>{if(!Yt&&pe&&!re.includes(pe)){let Te=[...re,pe];Y.setFieldValue(X,Te),ft(Te,B,Ee),Ut("")}},wt=pe=>{let Te=re.filter(M=>M!==pe);Y.setFieldValue(X,Te),ft(Te,B,Ee)},on=pe=>tt.find(Te=>Te.value===pe)?.label??pe;return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:`${Ye} 
            flex flex-wrap gap-2 min-h-[42px] max-h-[120px] overflow-y-auto items-center
            ${Yt?"pointer-events-none opacity-70":""}
            `,onClick:()=>!Yt&&document.getElementById(`${X}-input`)?.focus(),children:[re.map(pe=>fe.jsxs("span",{className:"flex items-center gap-2 px-2 py-1 rounded-full text-sm bg-indigo-50 border border-indigo-100",children:[fe.jsx("span",{className:"text-indigo-700",children:on(pe)}),fe.jsx("button",{type:"button",onClick:Te=>{Te.stopPropagation(),Yt||wt(pe)},onMouseDown:Te=>Te.preventDefault(),className:"ml-1 text-indigo-500 hover:text-red-500 focus:outline-none",children:"×"})]},pe)),fe.jsx("input",{id:`${X}-input`,type:"text",value:se,onChange:pe=>Ut(pe.target.value),onKeyDown:pe=>{(pe.key==="Enter"||pe.key===",")&&(pe.preventDefault(),St(ae))},placeholder:re.length===0?B.placeholder||"Type and press Enter":"",className:"flex-1 min-w-[120px] border-none outline-none text-sm bg-transparent p-1",disabled:Yt})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]})}case"photo":case"avatar":return fe.jsx(lX,{formik:Y,field:B,sqlOpsUrls:xe,module_refid:Ee});case"attachment":case"file":const it=B.multiple===!0,Ro=Array.isArray(Y.values[X])?Y.values[X]:Y.values[X]?[Y.values[X]]:[];return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative mb-1",children:[B.icon&&fe.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:co(B)}),fe.jsx("input",{id:X,type:"file",className:`${Ye} ${ut} ${B.icon?"pl-9":""} `,onFocus:()=>Dt(!0),name:X,multiple:it,onChange:re=>{const ae=re.currentTarget.files;ae&&Ct(ae),Ze("onChange",B,`${X}`)},onBlur:Y.handleBlur,placeholder:B.placeholder,disabled:Yt}),fe.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Ro.map(re=>{const ae=re?.split("/").pop();return fe.jsx(UJ,{sqlOpsUrls:xe,filePath:re},ae)}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]});case"json":return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative",children:[fe.jsx("textarea",{id:X,name:X,value:Y.values[X],onChange:re=>{Y.setFieldValue(X,re.target.value),ft(re.target.value,B,Ee),Ze("onChange",B,`${X}`)},onBlur:Y.handleBlur,placeholder:B.placeholder||"Enter valid JSON",disabled:Yt,className:`${Ye} ${ut} min-h-[200px] font-mono text-sm resize-y`}),fe.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-emerald-400 to-cyan-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]});case"date":return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative",children:[fe.jsx("div",{className:"absolute z-10 right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:fe.jsx("i",{className:"fa-solid fa-calendar"})}),fe.jsx("input",{id:X,type:"date",name:X,min:B.min,max:B.max,value:Y.values[X],onChange:re=>{Y.setFieldValue(X,re.target.value),ft(re.target.value,B,Ee),Ze("onChange",B,`${X}`)},onBlur:Y.handleBlur,placeholder:B.placeholder,disabled:Yt,className:`${Ye} ${ut} ${B.icon?"pl-9":""}`}),fe.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]});case"number":return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative",children:[B.icon&&fe.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:co(B)}),fe.jsx("input",{id:X,type:"number",className:`${Ye} ${ut} ${B.icon?"pl-9":""} `,onFocus:()=>Dt(!0),name:X,value:Y.values[X],onBlur:Y.handleBlur,onChange:re=>{Y.setFieldValue(X,re.target.value),ft(re.target.value,B,Ee),Ze("onChange",B,`${X}`)},step:B.step,placeholder:B.placeholder,disabled:Yt,min:B.min??1,max:B.max}),fe.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]});default:return fe.jsxs("div",{className:"relative",children:[fe.jsxs("label",{className:At,children:[B.label,B.required&&fe.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),fe.jsxs("div",{className:"relative",children:[B.icon&&fe.jsx("div",{className:"absolute z-10 left-3 top-1/2 -translate-y-1/2 pointer-events-none",children:co(B)}),fe.jsx("input",{id:X,type:B.type||"text",className:`${Ye} ${ut} ${B.icon?"pl-9":""} `,onFocus:()=>Dt(!0),name:X,value:Y.values[X],onBlur:Y.handleBlur,onChange:re=>{Y.setFieldValue(X,re.target.value),ft(re.target.value,B,Ee),Ze("onChange",B,`${X}`)},step:B.step,placeholder:B.placeholder,disabled:Yt,minLength:B.minlength,maxLength:B.maxlength}),fe.jsx("div",{className:`absolute inset-0 rounded-lg bg-gradient-to-r from-purple-400 to-indigo-400 opacity-0 transition-opacity duration-300 pointer-events-none ${A?"opacity-20":""}`,style:{zIndex:-1,filter:"blur(8px)"}})]}),Y.touched[X]&&Y.errors[X]&&fe.jsx("span",{className:"text-xs text-red-500",children:String(Y.errors[X])})]})}}function UX({title:B,children:Y,isFirst:we}){const[xe,Ne]=To.useState(we);return fe.jsx("div",{className:"group relative mt-1",children:fe.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-xs hover:shadow-sm transition-all duration-300 overflow-hidden ",children:[fe.jsxs("button",{onClick:()=>Ne(!xe),className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:[fe.jsxs("div",{className:"flex items-center space-x-3",children:[fe.jsx("div",{className:`w-3 h-3 rounded-full transition-all duration-300 ${xe?"bg-action":"bg-gray-300"}`}),fe.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:B})]}),fe.jsxs("div",{className:`relative transition-all duration-300 ${xe?"rotate-180":""}`,children:[fe.jsx("div",{className:`absolute inset-0 rounded-full blur-md transition-opacity duration-300 ${xe?"bg-action opacity-30":"bg-transparent opacity-0"}`}),fe.jsx("svg",{className:"relative w-4 h-4 text-gray-500 group-hover:text-action-500 transition-colors duration-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:fe.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),fe.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden  ${xe?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:fe.jsx("div",{className:"px-6 pb-6 bg-gradient-to-br from-gray-50/50 to-white overflow-auto mb-5",children:fe.jsx("div",{className:"space-y-5 pt-4",children:Y})})})]})})}function c5({fields:B,formik:Y,methods:we={},sqlOpsUrls:xe,refid:Ne,module_refid:Ee,fieldOptions:Ce,setFieldOptions:de}){return fe.jsx("div",{className:"bg-white min-h-3/10 overflow-auto",children:fe.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[fe.jsx("div",{className:"lg:col-span-2 flex flex-col ",children:fe.jsx("div",{className:"relative w-42 h-42 ",children:B?.filter(Oe=>Oe.type==="avatar").map(Oe=>fe.jsx(lX,{formik:Y,field:Oe,sqlOpsUrls:xe,module_refid:Ee}))})}),fe.jsx("div",{className:"lg:col-span-10 min-h-0 max-h-40  overflow-y-auto custom-scrollbar",children:fe.jsx("div",{className:"grid grid-cols-12 gap-2",children:B?.map((Oe,Ze)=>Oe.type==="avatar"?null:fe.jsx("div",{className:`transition-colors duration-200 col-span-12 md:col-span-6 ${Lk[Fk(Number(Oe.width))]||"lg:col-span-4"}`,children:fe.jsx(Vk,{refid:Ne,module_refid:Ee,sqlOpsUrls:xe,field:Oe,formik:Y,methods:we,setFieldOptions:de,...Ce?.[Oe.name]?{optionsOverride:Ce[Oe.name]}:{}},Oe?.name||Ze)},Oe.name))})})]})})}function uee({title:B,groupedFields:Y,data:we,onSubmit:xe=Ct=>{},onCancel:Ne=()=>{},methods:Ee={},components:Ce={},sqlOpsUrls:de,refid:Oe,module_refid:Ze}){const{common:Ct=[],...Ke}=Y,[Ot,Ut]=To.useState({}),jt=(ft,V)=>{Ut(Ye=>({...Ye,[ft]:V}))},{initialValues:Dt,validationSchema:qe}=To.useMemo(()=>{const ft={},V={};return Object.values(Y).flat().forEach(Ye=>{Ik([Ye],ft,V,we,Ze,de?.operation)}),{initialValues:ft,validationSchema:V}},[Y,we,Ze,de?.operation]),En=n5.useFormik({initialValues:Dt,enableReinitialize:!0,validationSchema:Bl.object().shape(qe),onSubmit:ft=>{xe(ft)}});return fe.jsx("div",{className:"relative z-10 max-w-full  m-4",children:fe.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:fe.jsxs("form",{onSubmit:En.handleSubmit,className:"p-4 mx-auto",children:[fe.jsxs("div",{className:"space-y-2",children:[Ct.length>0&&fe.jsx(UX,{title:"Common",isFirst:!0,children:fe.jsx(c5,{refid:Oe,module_refid:Ze,sqlOpsUrls:de,fields:Ct,formik:En,methods:Ee,setFieldOptions:jt,fieldOptions:Ot})}),Ke&&Object.entries(Ke).map(([ft,V],Ye)=>fe.jsx(UX,{title:ft,isFirst:Ye===0&&Ct.length===0,children:fe.jsx("div",{className:"grid grid-cols-12 gap-4",children:V.map((ut,At)=>r5(ut.hidden)||ut.type==="geolocation"?null:fe.jsx("div",{className:`col-span-12 md:col-span-6 ${Lk[Fk(Number(ut.width))]||"lg:col-span-4"}`,children:fe.jsx(Vk,{refid:Oe,module_refid:Ze,sqlOpsUrls:de,components:Ce,field:ut,formik:En,methods:Ee,setFieldOptions:jt,...Ot[ut.name]?{optionsOverride:Ot[ut.name]}:{}},ut.name)},ut?.name??`field-${At}`))})},ft))]}),fe.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[fe.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),fe.jsxs("div",{className:"space-x-3",children:[fe.jsx("button",{type:"button",onClick:Ne,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),fe.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function dee({title:B,groupedFields:Y,data:we,onSubmit:xe=Ke=>{},onCancel:Ne=()=>{},methods:Ee={},components:Ce={},sqlOpsUrls:de,widget:Oe,refid:Ze,module_refid:Ct}){const{common:Ke=[],...Ot}=Y,Ut=Object.keys(Ot),[jt,Dt]=To.useState(0),[qe,En]=To.useState({}),ft=(X,ce)=>{En(Uo=>({...Uo,[X]:ce}))},{initialValues:V,validationSchema:Ye,stepperSchemas:ut}=To.useMemo(()=>{const X={},ce={},Uo={};return Oe?Object.entries(Y).forEach(([dn,_t])=>{const A={};Ik(_t,X,A,we,Ct,de?.operation),Uo[dn]=A}):Object.entries(Y).forEach(([dn,_t])=>{Ik(_t,X,ce,we,Ct,de?.operation)}),{initialValues:X,validationSchema:ce,stepperSchemas:Uo}},[Y,we,Oe,Ct,de?.operation]),At=Ut[jt]??null,se=Oe&&At?ut[At]??{}:Ye,nn=n5.useFormik({initialValues:V,enableReinitialize:!0,validationSchema:Bl.object().shape(se),onSubmit:X=>{Oe?(jt<Ut.length-1&&Dt(ce=>ce+1),jt===Ut.length-1&&xe(X)):xe(X)}}),Wn=async X=>{if(X.preventDefault(),!Oe){const ce=await nn.validateForm();if(Object.keys(ce).length>0){alert("Please fill all required fields before submitting."),nn.setTouched(Object.keys(ce).reduce((Uo,dn)=>({...Uo,[dn]:!0}),{}));return}}nn.handleSubmit(X)},Yt=()=>{Dt(X=>X>0?X-1:X)};return fe.jsx("div",{className:" max-w-full  m-4",children:fe.jsxs("form",{onSubmit:Wn,className:"w-full mx-auto",children:[fe.jsx("div",{className:"relative",children:fe.jsxs("div",{className:"relative  rounded-t-lg px-1 pt-1  shadow-inner",children:[Ke.length>0&&fe.jsx("div",{className:"p-3",children:fe.jsx(c5,{refid:Ze,module_refid:Ct,sqlOpsUrls:de,fields:Ke,formik:nn,methods:Ee,setFieldOptions:ft,fieldOptions:qe})}),fe.jsx("nav",{className:"relative flex bg-gray-100",children:Ut.map((X,ce)=>fe.jsx("button",{type:"button",onClick:()=>Dt(ce),className:`relative cursor-pointer flex-shrink-0 py-2 px-2 sm:px-4 rounded-t-lg  text-xs sm:text-sm font-semibold transition-all duration-300 ease-out focus:outline-none whitespace-nowrap ${jt===ce?"text-action bg-white":"text-gray-600 hover:text-gray-800 hover:bg-white/50"}`,children:fe.jsx("span",{className:"relative z-10 flex items-center justify-center gap-2 capitalize",children:X})},X))})]})}),fe.jsxs("div",{className:"bg-white  border border-gray-100 border-t-0 rounded-b-lg p-3 animate-in fade-in duration-300",children:[fe.jsx("div",{className:"grid grid-cols-12 gap-4",children:At&&Ot[At]?.map((X,ce)=>r5(X.hidden)||X.type==="geolocation"?null:fe.jsx("div",{className:`col-span-12  ${Lk[Fk(Number(X.width))]||"lg:col-span-4"}`,children:fe.jsx(Vk,{refid:Ze,module_refid:Ct,sqlOpsUrls:de,field:X,formik:nn,methods:Ee,components:Ce,setFieldOptions:ft,...qe[X.name]?{optionsOverride:qe[X.name]}:{}},X.name)},X?.name??`field-${ce}`))}),fe.jsxs("div",{className:`mt-8 flex ${jt>0?"justify-between":"justify-end"} space-x-3`,children:[jt>0&&fe.jsx("button",{onClick:Yt,type:"button",className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Previous"}),fe.jsxs("div",{className:"space-x-3",children:[fe.jsx("button",{onClick:Ne,type:"button",className:"px-5 cursor-pointer py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),fe.jsx("button",{type:"submit",className:"px-5 cursor-pointer py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:Oe?"Next":"Save"})]})]}),fe.jsx("div",{className:"mt-2 pt-3  border-t border-gray-100",children:fe.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[fe.jsxs("div",{className:"flex items-center",children:[fe.jsxs("span",{children:["Tab ",jt+1," of ",Ut.length]}),fe.jsx("p",{className:"text-sm text-gray-700 ml-3",children:"All fields marked (*) are required"})]}),fe.jsx("div",{className:"flex gap-1",children:Ut.map((X,ce)=>fe.jsx("div",{className:`w-2 h-2 rounded-full transition-all duration-300 ${ce===jt?"bg-action w-6":"bg-gray-300"}`},ce))})]})})]},Ut[jt])]})})}function mee({title:B,fields:Y,data:we,onSubmit:xe=Ze=>{},onCancel:Ne=()=>{},methods:Ee={},sqlOpsUrls:Ce,refid:de,module_refid:Oe}){const Ze=NJ(Y,Ce?.operation),[Ct,Ke]=To.useState({}),Ot=(ft,V)=>{Ke(Ye=>({...Ye,[ft]:V}))},{commonFields:Ut,otherFields:jt}=To.useMemo(()=>Ze.reduce((ft,V)=>(V.group==="common"?ft.commonFields.push(V):ft.otherFields.push(V),ft),{commonFields:[],otherFields:[]}),[Ze]),{initialValues:Dt,validationSchema:qe}=To.useMemo(()=>{const ft={},V={};return Ze.forEach(Ye=>{Ik([Ye],ft,V,we,Oe,Ce?.operation)}),{initialValues:ft,validationSchema:V}},[Ze,we]),En=n5.useFormik({initialValues:Dt,enableReinitialize:!0,validationSchema:Bl.object().shape(qe),onSubmit:ft=>{xe(ft)}});return fe.jsx(fe.Fragment,{children:fe.jsx("div",{className:"relative z-10 max-w-full  m-4",children:fe.jsx("div",{className:"bg-white border border-gray-100 rounded-md animate-in fade-in duration-300",children:fe.jsxs("form",{onSubmit:En.handleSubmit,className:"p-4  mx-auto",children:[Ut.length>0&&fe.jsx(c5,{refid:de,module_refid:Oe,sqlOpsUrls:Ce,fields:Ut,formik:En,methods:Ee,setFieldOptions:Ot,fieldOptions:Ct}),fe.jsx("div",{className:"grid grid-cols-12 gap-4",children:jt.map((ft,V)=>r5(ft.hidden)||ft.type==="geolocation"?null:fe.jsx("div",{className:`col-span-12 md:col-span-6 ${Lk[Fk(Number(ft.width))]||"lg:col-span-4"}`,children:fe.jsx(Vk,{refid:de,module_refid:Oe,sqlOpsUrls:Ce,field:ft,formik:En,methods:Ee,setFieldOptions:Ot,...Ct[ft.name]?{optionsOverride:Ct[ft.name]}:{}})},ft?.name??`field-${V}`))}),fe.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[fe.jsx("p",{className:"text-sm text-gray-700",children:"All fields marked (*) are required"}),fe.jsxs("div",{className:"space-x-3",children:[fe.jsx("button",{type:"button",onClick:Ne,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Cancel"}),fe.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 cursor-pointer",children:"Save"})]})]})]})})})})}function jX({title:B,children:Y}){return fe.jsx("div",{className:"group relative mt-1",children:fe.jsxs("div",{className:"relative bg-white rounded-lg border border-gray-100 shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden ",children:[fe.jsx("button",{className:"w-full bg-gray-50 flex justify-between items-center px-6 py-3 b text-left transition-all duration-300 ",children:fe.jsxs("div",{className:"flex items-center space-x-3",children:[fe.jsx("div",{className:"w-3 h-3 rounded-full transition-all duration-300 bg-action"}),fe.jsx("h3",{className:"text-md font-semibold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:B})]})}),fe.jsx("div",{className:`transition-all duration-500 ease-in-out overflow-hidden max-h-[2000px] opacity-100'
            }`,children:fe.jsx("div",{className:"px-4 pb-4 bg-gradient-to-br from-gray-50/50 to-white",children:fe.jsx("div",{className:"space-y-5 pt-4",children:Y})})})]})})}function fee({title:B,groupedFields:Y,data:we,onSubmit:xe=Ct=>{},onCancel:Ne=()=>{},methods:Ee={},components:Ce={},sqlOpsUrls:de,refid:Oe,module_refid:Ze}){const{common:Ct=[],...Ke}=Y,[Ot,Ut]=To.useState({}),jt=(ft,V)=>{Ut(Ye=>({...Ye,[ft]:V}))},{initialValues:Dt,validationSchema:qe}=To.useMemo(()=>{const ft={},V={};return Object.values(Y).flat().forEach(Ye=>{Ik([Ye],ft,V,we,Ze,de?.operation)}),{initialValues:ft,validationSchema:V}},[Y,we,Ze,de?.operation]),En=n5.useFormik({initialValues:Dt,enableReinitialize:!0,validationSchema:Bl.object().shape(qe),onSubmit:ft=>{xe(ft)}});return fe.jsx("div",{className:"relative z-10 max-w-full  m-4",children:fe.jsx("div",{className:"bg-white animate-in fade-in duration-300",children:fe.jsxs("form",{onSubmit:En.handleSubmit,className:"p-4 mx-auto",children:[fe.jsxs("div",{className:"space-y-2",children:[Ct.length>0&&fe.jsx(jX,{title:"Common",children:fe.jsx(c5,{refid:Oe,module_refid:Ze,sqlOpsUrls:de,fields:Ct,formik:En,methods:Ee,setFieldOptions:jt,fieldOptions:Ot})}),Ke&&Object.entries(Ke).map(([ft,V],Ye)=>fe.jsx(jX,{title:ft,children:fe.jsx("div",{className:"grid grid-cols-12 gap-4",children:V.map((ut,At)=>r5(ut.hidden)||ut.type==="geolocation"?null:fe.jsx("div",{className:`col-span-12 md:col-span-6 ${Lk[Fk(Number(ut.width))]||"lg:col-span-4"}`,children:fe.jsx(Vk,{refid:Oe,module_refid:Ze,sqlOpsUrls:de,components:Ce,field:ut,formik:En,methods:Ee,setFieldOptions:jt,...Ot[ut.name]?{optionsOverride:Ot[ut.name]}:{}},ut.name)},ut?.name??`field-${At}`))})},ft))]}),fe.jsxs("div",{className:"mt-8 flex justify-between space-x-3",children:[fe.jsx("p",{className:"px-4 pt-4 text-sm text-secondary",children:"All fields marked (*) are required"}),fe.jsxs("div",{className:"space-x-3",children:[fe.jsx("button",{type:"button",onClick:Ne,className:"px-5 py-2 bg-white text-gray-700 font-semibold rounded-lg border-2 border-gray-200  shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Cancel"}),fe.jsx("button",{type:"submit",className:"px-5 py-2 bg-action font-semibold rounded-lg border-2 border-gray-200 shadow-sm hover:shadow-lg transform hover:scale-105 transition-all duration-300 ",children:"Save"})]})]})]})})})}function gee({formJson:B,methods:Y={},userid:we=null,onCancel:xe=()=>{},components:Ne={},callback:Ee=()=>{},initialvalues:Ce={}}){let de=AJ(B);const Oe=B.endPoints,Ze=B?.source?.refid,Ct=_J(B?.fields??{},Oe?.operation),[Ke,Ot]=To.useState(Ce),Ut=To.useMemo(()=>RJ(B.fields),[B.fields]);To.useEffect(()=>{let qe=!0;return(async()=>{const ft=B?.source??{};if(!ft?.type){qe&&Ot({});return}if(ft.type==="method"){const V=ft.method,Ye=V?Y[V]:void 0;if(Ye)try{const ut=await Promise.resolve(Ye());qe&&Ot(ut??{})}catch(ut){console.error("Method execution failed:",ut),qe&&Ot({})}else qe&&Ot({})}if(ft.type==="api"&&Oe?.operation!=="create")try{const V=await Pl({method:ft.method||"GET",url:ft.url??"",data:ft.body??{},params:ft.params??{},headers:ft.headers??{}});qe&&Ot(V.data??{})}catch(V){console.error("API fetch failed:",V),qe&&Ot({})}if(ft.type==="sql"&&ft.refid&&ft.refid!=="0"&&Oe?.operation!=="create"||Oe?.operation!=="create"&&ft.dbopsid){if(!Oe){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const V=await FJ.fetch(Oe,{source:{...ft,table:ft.table,columns:ft.columns,where:zp(ft.where,{refid:Ze})},fields:eX(B.fields,Oe.operation)},ft?.dbopsid,B?.module_refid);qe&&Ot(V)}catch(V){console.error("API fetch failed:",V)}}})(),()=>{qe=!1}},[we,B?.source?.type||"",B?.source?.method||"",B?.source?.url||"",JSON.stringify(B?.source?.params??{}),JSON.stringify(B?.source?.body??{}),JSON.stringify(B?.source?.headers??{})]);const jt=async qe=>{const En=B?.source??{};let ft=null;if(Ut.length>0)try{ft=await DJ()}catch(Ye){console.error("catch fetchGeolocation",Ye),ft=null}const V={...qe,...Object.fromEntries(Ut.map(Ye=>[Ye,ft]))};if(En.type==="method"){const Ye=En.method,ut=Ye?Y[Ye]:void 0;if(ut)try{const At=await Promise.resolve(ut(V));if(Ee?.(At),Y?.handleActions){let se=Oe?.operation==="update"?Ze:At?.data?.refid;const nn=B?.gotolink?.replace("{hashid}",String(se));Y.handleActions(nn)}}catch(At){Ee?.(At),console.error("Method execution failed:",At)}}if(En.type==="api"){if(!Oe){console.error("SQL source requires formJson.endPoints but it is missing");return}try{const Ye=await Pl({method:En.method||"POST",url:Oe.baseURL+En.endpoint,data:V??{},headers:{Authorization:`Bearer ${Oe?.accessToken}`}});if(Ee?.(Ye),Y?.handleActions){let ut=Oe.operation==="update"?Ze:Ye?.data?.refid;const At=B?.gotolink?.replace("{hashid}",String(ut));Y.handleActions(At)}}catch(Ye){Ee?.(Ye),console.error("API fetch failed:",Ye)}}if(En.type==="sql"){const Ye=B.endPoints;if(!Ye){console.error("SQL source requires formJson.endPoints but it is missing");return}try{let ut=!1,At;En?.dbopsid&&(ut=!0,At=En?.dbopsid);const se=await Pl({method:"GET",url:Ye.baseURL+Ye.dbopsGetHash,headers:{Authorization:`Bearer ${Ye?.accessToken}`}});if(!ut){let Wn={...En};En.where&&(Wn={...En,where:zp(En.where,{refid:Ze})}),At=(await Pl({method:"POST",url:Ye.baseURL+Ye.dbopsGetRefId,data:{operation:Ye.operation,source:Wn,fields:eX(B.fields,Ye.operation),forcefill:B.forcefill,datahash:se.data.refhash,srcid:B?.module_refid},headers:{Authorization:`Bearer ${Ye?.accessToken}`}}))?.data.refid}const nn=await Pl({method:"POST",url:Ye.baseURL+Ye[Ye.operation==="update"?"dbopsUpdate":"dbopsCreate"],data:{refid:At,fields:V,datahash:se.data.refhash},headers:{Authorization:`Bearer ${Ye?.accessToken}`}});if(Ee?.(nn),Y?.handleActions){let Wn=Ye.operation==="update"?Ze:nn?.data?.refid;const Yt=B?.gotolink?.replace("{hashid}",String(Wn));Y.handleActions(Yt)}}catch(ut){Ee?.(ut),console.error("API fetch failed:",ut)}}},Dt={accordion:fe.jsx(uee,{title:B?.title??"",groupedFields:Ct,data:Ke,onSubmit:jt,onCancel:xe,methods:Y,components:Ne,sqlOpsUrls:Oe,refid:Ze,module_refid:B?.module_refid}),cards:fe.jsx(fee,{title:B?.title??"",groupedFields:Ct,data:Ke,onSubmit:jt,onCancel:xe,methods:Y,components:Ne,sqlOpsUrls:Oe,refid:Ze,module_refid:B?.module_refid}),tab:fe.jsx(dee,{title:B?.title??"",groupedFields:Ct,data:Ke,onSubmit:jt,onCancel:xe,methods:Y,components:Ne,widget:B?.widget,sqlOpsUrls:Oe,refid:Ze,module_refid:B?.module_refid}),simple:fe.jsx(mee,{title:B?.title??"",fields:B.fields,data:Ke,onSubmit:jt,onCancel:xe,methods:Y,components:Ne,sqlOpsUrls:Oe,refid:Ze,module_refid:B?.module_refid})};return fe.jsx("div",{className:"relative",children:Dt[de]})}var i5={exports:{}},l5={exports:{}},fr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WX;function hee(){if(WX)return fr;WX=1;var B=typeof Symbol=="function"&&Symbol.for,Y=B?Symbol.for("react.element"):60103,we=B?Symbol.for("react.portal"):60106,xe=B?Symbol.for("react.fragment"):60107,Ne=B?Symbol.for("react.strict_mode"):60108,Ee=B?Symbol.for("react.profiler"):60114,Ce=B?Symbol.for("react.provider"):60109,de=B?Symbol.for("react.context"):60110,Oe=B?Symbol.for("react.async_mode"):60111,Ze=B?Symbol.for("react.concurrent_mode"):60111,Ct=B?Symbol.for("react.forward_ref"):60112,Ke=B?Symbol.for("react.suspense"):60113,Ot=B?Symbol.for("react.suspense_list"):60120,Ut=B?Symbol.for("react.memo"):60115,jt=B?Symbol.for("react.lazy"):60116,Dt=B?Symbol.for("react.block"):60121,qe=B?Symbol.for("react.fundamental"):60117,En=B?Symbol.for("react.responder"):60118,ft=B?Symbol.for("react.scope"):60119;function V(ut){if(typeof ut=="object"&&ut!==null){var At=ut.$$typeof;switch(At){case Y:switch(ut=ut.type,ut){case Oe:case Ze:case xe:case Ee:case Ne:case Ke:return ut;default:switch(ut=ut&&ut.$$typeof,ut){case de:case Ct:case jt:case Ut:case Ce:return ut;default:return At}}case we:return At}}}function Ye(ut){return V(ut)===Ze}return fr.AsyncMode=Oe,fr.ConcurrentMode=Ze,fr.ContextConsumer=de,fr.ContextProvider=Ce,fr.Element=Y,fr.ForwardRef=Ct,fr.Fragment=xe,fr.Lazy=jt,fr.Memo=Ut,fr.Portal=we,fr.Profiler=Ee,fr.StrictMode=Ne,fr.Suspense=Ke,fr.isAsyncMode=function(ut){return Ye(ut)||V(ut)===Oe},fr.isConcurrentMode=Ye,fr.isContextConsumer=function(ut){return V(ut)===de},fr.isContextProvider=function(ut){return V(ut)===Ce},fr.isElement=function(ut){return typeof ut=="object"&&ut!==null&&ut.$$typeof===Y},fr.isForwardRef=function(ut){return V(ut)===Ct},fr.isFragment=function(ut){return V(ut)===xe},fr.isLazy=function(ut){return V(ut)===jt},fr.isMemo=function(ut){return V(ut)===Ut},fr.isPortal=function(ut){return V(ut)===we},fr.isProfiler=function(ut){return V(ut)===Ee},fr.isStrictMode=function(ut){return V(ut)===Ne},fr.isSuspense=function(ut){return V(ut)===Ke},fr.isValidElementType=function(ut){return typeof ut=="string"||typeof ut=="function"||ut===xe||ut===Ze||ut===Ee||ut===Ne||ut===Ke||ut===Ot||typeof ut=="object"&&ut!==null&&(ut.$$typeof===jt||ut.$$typeof===Ut||ut.$$typeof===Ce||ut.$$typeof===de||ut.$$typeof===Ct||ut.$$typeof===qe||ut.$$typeof===En||ut.$$typeof===ft||ut.$$typeof===Dt)},fr.typeOf=V,fr}var gr={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZX;function pee(){return ZX||(ZX=1,process.env.NODE_ENV!=="production"&&function(){var B=typeof Symbol=="function"&&Symbol.for,Y=B?Symbol.for("react.element"):60103,we=B?Symbol.for("react.portal"):60106,xe=B?Symbol.for("react.fragment"):60107,Ne=B?Symbol.for("react.strict_mode"):60108,Ee=B?Symbol.for("react.profiler"):60114,Ce=B?Symbol.for("react.provider"):60109,de=B?Symbol.for("react.context"):60110,Oe=B?Symbol.for("react.async_mode"):60111,Ze=B?Symbol.for("react.concurrent_mode"):60111,Ct=B?Symbol.for("react.forward_ref"):60112,Ke=B?Symbol.for("react.suspense"):60113,Ot=B?Symbol.for("react.suspense_list"):60120,Ut=B?Symbol.for("react.memo"):60115,jt=B?Symbol.for("react.lazy"):60116,Dt=B?Symbol.for("react.block"):60121,qe=B?Symbol.for("react.fundamental"):60117,En=B?Symbol.for("react.responder"):60118,ft=B?Symbol.for("react.scope"):60119;function V(Tt){return typeof Tt=="string"||typeof Tt=="function"||Tt===xe||Tt===Ze||Tt===Ee||Tt===Ne||Tt===Ke||Tt===Ot||typeof Tt=="object"&&Tt!==null&&(Tt.$$typeof===jt||Tt.$$typeof===Ut||Tt.$$typeof===Ce||Tt.$$typeof===de||Tt.$$typeof===Ct||Tt.$$typeof===qe||Tt.$$typeof===En||Tt.$$typeof===ft||Tt.$$typeof===Dt)}function Ye(Tt){if(typeof Tt=="object"&&Tt!==null){var rs=Tt.$$typeof;switch(rs){case Y:var Wt=Tt.type;switch(Wt){case Oe:case Ze:case xe:case Ee:case Ne:case Ke:return Wt;default:var io=Wt&&Wt.$$typeof;switch(io){case de:case Ct:case jt:case Ut:case Ce:return io;default:return rs}}case we:return rs}}}var ut=Oe,At=Ze,se=de,nn=Ce,Wn=Y,Yt=Ct,X=xe,ce=jt,Uo=Ut,dn=we,_t=Ee,A=Ne,co=Ke,it=!1;function Ro(Tt){return it||(it=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),re(Tt)||Ye(Tt)===Oe}function re(Tt){return Ye(Tt)===Ze}function ae(Tt){return Ye(Tt)===de}function tt(Tt){return Ye(Tt)===Ce}function St(Tt){return typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===Y}function wt(Tt){return Ye(Tt)===Ct}function on(Tt){return Ye(Tt)===xe}function pe(Tt){return Ye(Tt)===jt}function Te(Tt){return Ye(Tt)===Ut}function M(Tt){return Ye(Tt)===we}function wn(Tt){return Ye(Tt)===Ee}function sn(Tt){return Ye(Tt)===Ne}function Un(Tt){return Ye(Tt)===Ke}gr.AsyncMode=ut,gr.ConcurrentMode=At,gr.ContextConsumer=se,gr.ContextProvider=nn,gr.Element=Wn,gr.ForwardRef=Yt,gr.Fragment=X,gr.Lazy=ce,gr.Memo=Uo,gr.Portal=dn,gr.Profiler=_t,gr.StrictMode=A,gr.Suspense=co,gr.isAsyncMode=Ro,gr.isConcurrentMode=re,gr.isContextConsumer=ae,gr.isContextProvider=tt,gr.isElement=St,gr.isForwardRef=wt,gr.isFragment=on,gr.isLazy=pe,gr.isMemo=Te,gr.isPortal=M,gr.isProfiler=wn,gr.isStrictMode=sn,gr.isSuspense=Un,gr.isValidElementType=V,gr.typeOf=Ye}()),gr}var GX;function qX(){return GX||(GX=1,process.env.NODE_ENV==="production"?l5.exports=hee():l5.exports=pee()),l5.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var T7,KX;function bee(){if(KX)return T7;KX=1;var B=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;function xe(Ee){if(Ee==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(Ee)}function Ne(){try{if(!Object.assign)return!1;var Ee=new String("abc");if(Ee[5]="de",Object.getOwnPropertyNames(Ee)[0]==="5")return!1;for(var Ce={},de=0;de<10;de++)Ce["_"+String.fromCharCode(de)]=de;var Oe=Object.getOwnPropertyNames(Ce).map(function(Ct){return Ce[Ct]});if(Oe.join("")!=="0123456789")return!1;var Ze={};return"abcdefghijklmnopqrst".split("").forEach(function(Ct){Ze[Ct]=Ct}),Object.keys(Object.assign({},Ze)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return T7=Ne()?Object.assign:function(Ee,Ce){for(var de,Oe=xe(Ee),Ze,Ct=1;Ct<arguments.length;Ct++){de=Object(arguments[Ct]);for(var Ke in de)Y.call(de,Ke)&&(Oe[Ke]=de[Ke]);if(B){Ze=B(de);for(var Ot=0;Ot<Ze.length;Ot++)we.call(de,Ze[Ot])&&(Oe[Ze[Ot]]=de[Ze[Ot]])}}return Oe},T7}var k7,YX;function A7(){if(YX)return k7;YX=1;var B="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return k7=B,k7}var _7,XX;function QX(){return XX||(XX=1,_7=Function.call.bind(Object.prototype.hasOwnProperty)),_7}var O7,JX;function vee(){if(JX)return O7;JX=1;var B=function(){};if(process.env.NODE_ENV!=="production"){var Y=A7(),we={},xe=QX();B=function(Ee){var Ce="Warning: "+Ee;typeof console<"u"&&console.error(Ce);try{throw new Error(Ce)}catch{}}}function Ne(Ee,Ce,de,Oe,Ze){if(process.env.NODE_ENV!=="production"){for(var Ct in Ee)if(xe(Ee,Ct)){var Ke;try{if(typeof Ee[Ct]!="function"){var Ot=Error((Oe||"React class")+": "+de+" type `"+Ct+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof Ee[Ct]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ot.name="Invariant Violation",Ot}Ke=Ee[Ct](Ce,Ct,Oe,de,null,Y)}catch(jt){Ke=jt}if(Ke&&!(Ke instanceof Error)&&B((Oe||"React class")+": type specification of "+de+" `"+Ct+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof Ke+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),Ke instanceof Error&&!(Ke.message in we)){we[Ke.message]=!0;var Ut=Ze?Ze():"";B("Failed "+de+" type: "+Ke.message+(Ut??""))}}}}return Ne.resetWarningCache=function(){process.env.NODE_ENV!=="production"&&(we={})},O7=Ne,O7}var D7,eQ;function yee(){if(eQ)return D7;eQ=1;var B=qX(),Y=bee(),we=A7(),xe=QX(),Ne=vee(),Ee=function(){};process.env.NODE_ENV!=="production"&&(Ee=function(de){var Oe="Warning: "+de;typeof console<"u"&&console.error(Oe);try{throw new Error(Oe)}catch{}});function Ce(){return null}return D7=function(de,Oe){var Ze=typeof Symbol=="function"&&Symbol.iterator,Ct="@@iterator";function Ke(re){var ae=re&&(Ze&&re[Ze]||re[Ct]);if(typeof ae=="function")return ae}var Ot="<<anonymous>>",Ut={array:En("array"),bigint:En("bigint"),bool:En("boolean"),func:En("function"),number:En("number"),object:En("object"),string:En("string"),symbol:En("symbol"),any:ft(),arrayOf:V,element:Ye(),elementType:ut(),instanceOf:At,node:Yt(),objectOf:nn,oneOf:se,oneOfType:Wn,shape:ce,exact:Uo};function jt(re,ae){return re===ae?re!==0||1/re===1/ae:re!==re&&ae!==ae}function Dt(re,ae){this.message=re,this.data=ae&&typeof ae=="object"?ae:{},this.stack=""}Dt.prototype=Error.prototype;function qe(re){if(process.env.NODE_ENV!=="production")var ae={},tt=0;function St(on,pe,Te,M,wn,sn,Un){if(M=M||Ot,sn=sn||Te,Un!==we){if(Oe){var Tt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw Tt.name="Invariant Violation",Tt}else if(process.env.NODE_ENV!=="production"&&typeof console<"u"){var rs=M+":"+Te;!ae[rs]&&tt<3&&(Ee("You are manually calling a React.PropTypes validation function for the `"+sn+"` prop on `"+M+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),ae[rs]=!0,tt++)}}return pe[Te]==null?on?pe[Te]===null?new Dt("The "+wn+" `"+sn+"` is marked as required "+("in `"+M+"`, but its value is `null`.")):new Dt("The "+wn+" `"+sn+"` is marked as required in "+("`"+M+"`, but its value is `undefined`.")):null:re(pe,Te,M,wn,sn)}var wt=St.bind(null,!1);return wt.isRequired=St.bind(null,!0),wt}function En(re){function ae(tt,St,wt,on,pe,Te){var M=tt[St],wn=A(M);if(wn!==re){var sn=co(M);return new Dt("Invalid "+on+" `"+pe+"` of type "+("`"+sn+"` supplied to `"+wt+"`, expected ")+("`"+re+"`."),{expectedType:re})}return null}return qe(ae)}function ft(){return qe(Ce)}function V(re){function ae(tt,St,wt,on,pe){if(typeof re!="function")return new Dt("Property `"+pe+"` of component `"+wt+"` has invalid PropType notation inside arrayOf.");var Te=tt[St];if(!Array.isArray(Te)){var M=A(Te);return new Dt("Invalid "+on+" `"+pe+"` of type "+("`"+M+"` supplied to `"+wt+"`, expected an array."))}for(var wn=0;wn<Te.length;wn++){var sn=re(Te,wn,wt,on,pe+"["+wn+"]",we);if(sn instanceof Error)return sn}return null}return qe(ae)}function Ye(){function re(ae,tt,St,wt,on){var pe=ae[tt];if(!de(pe)){var Te=A(pe);return new Dt("Invalid "+wt+" `"+on+"` of type "+("`"+Te+"` supplied to `"+St+"`, expected a single ReactElement."))}return null}return qe(re)}function ut(){function re(ae,tt,St,wt,on){var pe=ae[tt];if(!B.isValidElementType(pe)){var Te=A(pe);return new Dt("Invalid "+wt+" `"+on+"` of type "+("`"+Te+"` supplied to `"+St+"`, expected a single ReactElement type."))}return null}return qe(re)}function At(re){function ae(tt,St,wt,on,pe){if(!(tt[St]instanceof re)){var Te=re.name||Ot,M=Ro(tt[St]);return new Dt("Invalid "+on+" `"+pe+"` of type "+("`"+M+"` supplied to `"+wt+"`, expected ")+("instance of `"+Te+"`."))}return null}return qe(ae)}function se(re){if(!Array.isArray(re))return process.env.NODE_ENV!=="production"&&(arguments.length>1?Ee("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):Ee("Invalid argument supplied to oneOf, expected an array.")),Ce;function ae(tt,St,wt,on,pe){for(var Te=tt[St],M=0;M<re.length;M++)if(jt(Te,re[M]))return null;var wn=JSON.stringify(re,function(Un,Tt){var rs=co(Tt);return rs==="symbol"?String(Tt):Tt});return new Dt("Invalid "+on+" `"+pe+"` of value `"+String(Te)+"` "+("supplied to `"+wt+"`, expected one of "+wn+"."))}return qe(ae)}function nn(re){function ae(tt,St,wt,on,pe){if(typeof re!="function")return new Dt("Property `"+pe+"` of component `"+wt+"` has invalid PropType notation inside objectOf.");var Te=tt[St],M=A(Te);if(M!=="object")return new Dt("Invalid "+on+" `"+pe+"` of type "+("`"+M+"` supplied to `"+wt+"`, expected an object."));for(var wn in Te)if(xe(Te,wn)){var sn=re(Te,wn,wt,on,pe+"."+wn,we);if(sn instanceof Error)return sn}return null}return qe(ae)}function Wn(re){if(!Array.isArray(re))return process.env.NODE_ENV!=="production"&&Ee("Invalid argument supplied to oneOfType, expected an instance of array."),Ce;for(var ae=0;ae<re.length;ae++){var tt=re[ae];if(typeof tt!="function")return Ee("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+it(tt)+" at index "+ae+"."),Ce}function St(wt,on,pe,Te,M){for(var wn=[],sn=0;sn<re.length;sn++){var Un=re[sn],Tt=Un(wt,on,pe,Te,M,we);if(Tt==null)return null;Tt.data&&xe(Tt.data,"expectedType")&&wn.push(Tt.data.expectedType)}var rs=wn.length>0?", expected one of type ["+wn.join(", ")+"]":"";return new Dt("Invalid "+Te+" `"+M+"` supplied to "+("`"+pe+"`"+rs+"."))}return qe(St)}function Yt(){function re(ae,tt,St,wt,on){return dn(ae[tt])?null:new Dt("Invalid "+wt+" `"+on+"` supplied to "+("`"+St+"`, expected a ReactNode."))}return qe(re)}function X(re,ae,tt,St,wt){return new Dt((re||"React class")+": "+ae+" type `"+tt+"."+St+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+wt+"`.")}function ce(re){function ae(tt,St,wt,on,pe){var Te=tt[St],M=A(Te);if(M!=="object")return new Dt("Invalid "+on+" `"+pe+"` of type `"+M+"` "+("supplied to `"+wt+"`, expected `object`."));for(var wn in re){var sn=re[wn];if(typeof sn!="function")return X(wt,on,pe,wn,co(sn));var Un=sn(Te,wn,wt,on,pe+"."+wn,we);if(Un)return Un}return null}return qe(ae)}function Uo(re){function ae(tt,St,wt,on,pe){var Te=tt[St],M=A(Te);if(M!=="object")return new Dt("Invalid "+on+" `"+pe+"` of type `"+M+"` "+("supplied to `"+wt+"`, expected `object`."));var wn=Y({},tt[St],re);for(var sn in wn){var Un=re[sn];if(xe(re,sn)&&typeof Un!="function")return X(wt,on,pe,sn,co(Un));if(!Un)return new Dt("Invalid "+on+" `"+pe+"` key `"+sn+"` supplied to `"+wt+"`.\nBad object: "+JSON.stringify(tt[St],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(re),null,"  "));var Tt=Un(Te,sn,wt,on,pe+"."+sn,we);if(Tt)return Tt}return null}return qe(ae)}function dn(re){switch(typeof re){case"number":case"string":case"undefined":return!0;case"boolean":return!re;case"object":if(Array.isArray(re))return re.every(dn);if(re===null||de(re))return!0;var ae=Ke(re);if(ae){var tt=ae.call(re),St;if(ae!==re.entries){for(;!(St=tt.next()).done;)if(!dn(St.value))return!1}else for(;!(St=tt.next()).done;){var wt=St.value;if(wt&&!dn(wt[1]))return!1}}else return!1;return!0;default:return!1}}function _t(re,ae){return re==="symbol"?!0:ae?ae["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&ae instanceof Symbol:!1}function A(re){var ae=typeof re;return Array.isArray(re)?"array":re instanceof RegExp?"object":_t(ae,re)?"symbol":ae}function co(re){if(typeof re>"u"||re===null)return""+re;var ae=A(re);if(ae==="object"){if(re instanceof Date)return"date";if(re instanceof RegExp)return"regexp"}return ae}function it(re){var ae=co(re);switch(ae){case"array":case"object":return"an "+ae;case"boolean":case"date":case"regexp":return"a "+ae;default:return ae}}function Ro(re){return!re.constructor||!re.constructor.name?Ot:re.constructor.name}return Ut.checkPropTypes=Ne,Ut.resetWarningCache=Ne.resetWarningCache,Ut.PropTypes=Ut,Ut},D7}var R7,tQ;function Cee(){if(tQ)return R7;tQ=1;var B=A7();function Y(){}function we(){}return we.resetWarningCache=Y,R7=function(){function xe(Ce,de,Oe,Ze,Ct,Ke){if(Ke!==B){var Ot=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Ot.name="Invariant Violation",Ot}}xe.isRequired=xe;function Ne(){return xe}var Ee={array:xe,bigint:xe,bool:xe,func:xe,number:xe,object:xe,string:xe,symbol:xe,any:xe,arrayOf:Ne,element:xe,elementType:xe,instanceOf:Ne,node:xe,objectOf:Ne,oneOf:Ne,oneOfType:Ne,shape:Ne,exact:Ne,checkPropTypes:we,resetWarningCache:Y};return Ee.PropTypes=Ee,Ee},R7}var nQ;function xee(){if(nQ)return i5.exports;if(nQ=1,process.env.NODE_ENV!=="production"){var B=qX(),Y=!0;i5.exports=yee()(B.isElement,Y)}else i5.exports=Cee()();return i5.exports}var Vt=xee(),N7=function(){return N7=Object.assign||function(B){for(var Y,we=1,xe=arguments.length;we<xe;we++){Y=arguments[we];for(var Ne in Y)Object.prototype.hasOwnProperty.call(Y,Ne)&&(B[Ne]=Y[Ne])}return B},N7.apply(this,arguments)},oQ={onActivate:Vt.func,onAddUndo:Vt.func,onBeforeAddUndo:Vt.func,onBeforeExecCommand:Vt.func,onBeforeGetContent:Vt.func,onBeforeRenderUI:Vt.func,onBeforeSetContent:Vt.func,onBeforePaste:Vt.func,onBlur:Vt.func,onChange:Vt.func,onClearUndos:Vt.func,onClick:Vt.func,onContextMenu:Vt.func,onCommentChange:Vt.func,onCompositionEnd:Vt.func,onCompositionStart:Vt.func,onCompositionUpdate:Vt.func,onCopy:Vt.func,onCut:Vt.func,onDblclick:Vt.func,onDeactivate:Vt.func,onDirty:Vt.func,onDrag:Vt.func,onDragDrop:Vt.func,onDragEnd:Vt.func,onDragGesture:Vt.func,onDragOver:Vt.func,onDrop:Vt.func,onExecCommand:Vt.func,onFocus:Vt.func,onFocusIn:Vt.func,onFocusOut:Vt.func,onGetContent:Vt.func,onHide:Vt.func,onInit:Vt.func,onInput:Vt.func,onKeyDown:Vt.func,onKeyPress:Vt.func,onKeyUp:Vt.func,onLoadContent:Vt.func,onMouseDown:Vt.func,onMouseEnter:Vt.func,onMouseLeave:Vt.func,onMouseMove:Vt.func,onMouseOut:Vt.func,onMouseOver:Vt.func,onMouseUp:Vt.func,onNodeChange:Vt.func,onObjectResizeStart:Vt.func,onObjectResized:Vt.func,onObjectSelected:Vt.func,onPaste:Vt.func,onPostProcess:Vt.func,onPostRender:Vt.func,onPreProcess:Vt.func,onProgressState:Vt.func,onRedo:Vt.func,onRemove:Vt.func,onReset:Vt.func,onSaveContent:Vt.func,onSelectionChange:Vt.func,onSetAttrib:Vt.func,onSetContent:Vt.func,onShow:Vt.func,onSubmit:Vt.func,onUndo:Vt.func,onVisualAid:Vt.func,onSkinLoadError:Vt.func,onThemeLoadError:Vt.func,onModelLoadError:Vt.func,onPluginLoadError:Vt.func,onIconsLoadError:Vt.func,onLanguageLoadError:Vt.func,onScriptsLoad:Vt.func,onScriptsLoadError:Vt.func},See=N7({apiKey:Vt.string,licenseKey:Vt.string,id:Vt.string,inline:Vt.bool,init:Vt.object,initialValue:Vt.string,onEditorChange:Vt.func,value:Vt.string,tagName:Vt.string,tabIndex:Vt.number,cloudChannel:Vt.string,plugins:Vt.oneOfType([Vt.string,Vt.array]),toolbar:Vt.oneOfType([Vt.string,Vt.array]),disabled:Vt.bool,readonly:Vt.bool,textareaName:Vt.string,tinymceScriptSrc:Vt.oneOfType([Vt.string,Vt.arrayOf(Vt.string),Vt.arrayOf(Vt.shape({src:Vt.string,async:Vt.bool,defer:Vt.bool}))]),rollback:Vt.oneOfType([Vt.number,Vt.oneOf([!1])]),scriptLoading:Vt.shape({async:Vt.bool,defer:Vt.bool,delay:Vt.number})},oQ),sQ=function(B){var Y=B;return Y&&Y.tinymce?Y.tinymce:null},M7=function(B){return typeof B=="function"},rQ=function(B){return B in oQ},aQ=function(B){return B.substr(2)},wee=function(B,Y,we,xe,Ne,Ee,Ce){var de=Object.keys(Ne).filter(rQ),Oe=Object.keys(Ee).filter(rQ),Ze=de.filter(function(Ke){return Ee[Ke]===void 0}),Ct=Oe.filter(function(Ke){return Ne[Ke]===void 0});Ze.forEach(function(Ke){var Ot=aQ(Ke),Ut=Ce[Ot];we(Ot,Ut),delete Ce[Ot]}),Ct.forEach(function(Ke){var Ot=xe(B,Ke),Ut=aQ(Ke);Ce[Ut]=Ot,Y(Ut,Ot)})},Eee=function(B,Y,we,xe,Ne){return wee(Ne,B.on.bind(B),B.off.bind(B),function(Ee,Ce){return function(de){var Oe;return(Oe=Ee(Ce))===null||Oe===void 0?void 0:Oe(de,B)}},Y,we,xe)},cQ=0,iQ=function(B){var Y=Date.now(),we=Math.floor(Math.random()*1e9);return cQ++,B+"_"+we+cQ+String(Y)},lQ=function(B){return B!==null&&(B.tagName.toLowerCase()==="textarea"||B.tagName.toLowerCase()==="input")},uQ=function(B){return typeof B>"u"||B===""?[]:Array.isArray(B)?B:B.split(" ")},Tee=function(B,Y){return uQ(B).concat(uQ(Y))},kee=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Aee=function(B){if(!("isConnected"in Node.prototype)){for(var Y=B,we=B.parentNode;we!=null;)Y=we,we=Y.parentNode;return Y===B.ownerDocument}return B.isConnected},dQ=function(B,Y){B!==void 0&&(B.mode!=null&&typeof B.mode=="object"&&typeof B.mode.set=="function"?B.mode.set(Y):B.setMode(Y))},_ee=function(B){var Y=sQ(B);if(!Y)throw new Error("tinymce should have been loaded into global scope");return Y},mQ=function(B){return B.options&&B.options.isRegistered("disabled")},P7=function(){return P7=Object.assign||function(B){for(var Y,we=1,xe=arguments.length;we<xe;we++){Y=arguments[we];for(var Ne in Y)Object.prototype.hasOwnProperty.call(Y,Ne)&&(B[Ne]=Y[Ne])}return B},P7.apply(this,arguments)},Oee=function(B,Y,we){var xe,Ne,Ee=B.createElement("script");Ee.referrerPolicy="origin",Ee.type="application/javascript",Ee.id=Y.id,Ee.src=Y.src,Ee.async=(xe=Y.async)!==null&&xe!==void 0?xe:!1,Ee.defer=(Ne=Y.defer)!==null&&Ne!==void 0?Ne:!1;var Ce=function(){Ee.removeEventListener("load",Ce),Ee.removeEventListener("error",de),we(Y.src)},de=function(Oe){Ee.removeEventListener("load",Ce),Ee.removeEventListener("error",de),we(Y.src,Oe)};Ee.addEventListener("load",Ce),Ee.addEventListener("error",de),B.head&&B.head.appendChild(Ee)},Dee=function(B){var Y={},we=function(Ce,de){var Oe=Y[Ce];Oe.done=!0,Oe.error=de;for(var Ze=0,Ct=Oe.handlers;Ze<Ct.length;Ze++){var Ke=Ct[Ze];Ke(Ce,de)}Oe.handlers=[]},xe=function(Ce,de,Oe){var Ze=function(ft){return Oe!==void 0?Oe(ft):console.error(ft)};if(Ce.length===0){Ze(new Error("At least one script must be provided"));return}for(var Ct=0,Ke=!1,Ot=function(ft,V){Ke||(V?(Ke=!0,Ze(V)):++Ct===Ce.length&&de())},Ut=0,jt=Ce;Ut<jt.length;Ut++){var Dt=jt[Ut],qe=Y[Dt.src];if(qe)qe.done?Ot(Dt.src,qe.error):qe.handlers.push(Ot);else{var En=iQ("tiny-");Y[Dt.src]={id:En,src:Dt.src,done:!1,error:null,handlers:[Ot]},Oee(B,P7({id:En},Dt),we)}}},Ne=function(){for(var Ce,de=0,Oe=Object.values(Y);de<Oe.length;de++){var Ze=Oe[de],Ct=B.getElementById(Ze.id);Ct!=null&&Ct.tagName==="SCRIPT"&&((Ce=Ct.parentNode)===null||Ce===void 0||Ce.removeChild(Ct))}Y={}},Ee=function(){return B};return{loadScripts:xe,deleteScripts:Ne,getDocument:Ee}},Ree=function(){var B=[],Y=function(Ne){var Ee=B.find(function(Ce){return Ce.getDocument()===Ne});return Ee===void 0&&(Ee=Dee(Ne),B.push(Ee)),Ee},we=function(Ne,Ee,Ce,de,Oe){var Ze=function(){return Y(Ne).loadScripts(Ee,de,Oe)};Ce>0?setTimeout(Ze,Ce):Ze()},xe=function(){for(var Ne=B.pop();Ne!=null;Ne=B.pop())Ne.deleteScripts()};return{loadList:we,reinitialize:xe}},Nee=Ree(),Mee=function(){var B=function(Y,we){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(xe,Ne){xe.__proto__=Ne}||function(xe,Ne){for(var Ee in Ne)Object.prototype.hasOwnProperty.call(Ne,Ee)&&(xe[Ee]=Ne[Ee])},B(Y,we)};return function(Y,we){if(typeof we!="function"&&we!==null)throw new TypeError("Class extends value "+String(we)+" is not a constructor or null");B(Y,we);function xe(){this.constructor=Y}Y.prototype=we===null?Object.create(we):(xe.prototype=we.prototype,new xe)}}(),$S=function(){return $S=Object.assign||function(B){for(var Y,we=1,xe=arguments.length;we<xe;we++){Y=arguments[we];for(var Ne in Y)Object.prototype.hasOwnProperty.call(Y,Ne)&&(B[Ne]=Y[Ne])}return B},$S.apply(this,arguments)},B7="change keyup compositionend setcontent CommentChange",Pee=function(B){Mee(Y,B);function Y(we){var xe,Ne,Ee,Ce=B.call(this,we)||this;return Ce.rollbackTimer=void 0,Ce.valueCursor=void 0,Ce.rollbackChange=function(){var de=Ce.editor,Oe=Ce.props.value;de&&Oe&&Oe!==Ce.currentContent&&de.undoManager.ignore(function(){if(de.setContent(Oe),Ce.valueCursor&&(!Ce.inline||de.hasFocus()))try{de.selection.moveToBookmark(Ce.valueCursor)}catch{}}),Ce.rollbackTimer=void 0},Ce.handleBeforeInput=function(de){if(Ce.props.value!==void 0&&Ce.props.value===Ce.currentContent&&Ce.editor&&(!Ce.inline||Ce.editor.hasFocus()))try{Ce.valueCursor=Ce.editor.selection.getBookmark(3)}catch{}},Ce.handleBeforeInputSpecial=function(de){(de.key==="Enter"||de.key==="Backspace"||de.key==="Delete")&&Ce.handleBeforeInput(de)},Ce.handleEditorChange=function(de){var Oe=Ce.editor;if(Oe&&Oe.initialized){var Ze=Oe.getContent();Ce.props.value!==void 0&&Ce.props.value!==Ze&&Ce.props.rollback!==!1&&(Ce.rollbackTimer||(Ce.rollbackTimer=window.setTimeout(Ce.rollbackChange,typeof Ce.props.rollback=="number"?Ce.props.rollback:200))),Ze!==Ce.currentContent&&(Ce.currentContent=Ze,M7(Ce.props.onEditorChange)&&Ce.props.onEditorChange(Ze,Oe))}},Ce.handleEditorChangeSpecial=function(de){(de.key==="Backspace"||de.key==="Delete")&&Ce.handleEditorChange(de)},Ce.initialise=function(de){var Oe,Ze,Ct;de===void 0&&(de=0);var Ke=Ce.elementRef.current;if(Ke){if(!Aee(Ke)){if(de===0)setTimeout(function(){return Ce.initialise(1)},1);else if(de<100)setTimeout(function(){return Ce.initialise(de+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var Ot=_ee(Ce.view),Ut=$S($S($S($S({},Ce.props.init),{selector:void 0,target:Ke,disabled:Ce.props.disabled,readonly:Ce.props.readonly,inline:Ce.inline,plugins:Tee((Oe=Ce.props.init)===null||Oe===void 0?void 0:Oe.plugins,Ce.props.plugins),toolbar:(Ze=Ce.props.toolbar)!==null&&Ze!==void 0?Ze:(Ct=Ce.props.init)===null||Ct===void 0?void 0:Ct.toolbar}),Ce.props.licenseKey?{license_key:Ce.props.licenseKey}:{}),{setup:function(jt){Ce.editor=jt,Ce.bindHandlers({}),Ce.inline&&!lQ(Ke)&&jt.once("PostRender",function(Dt){jt.setContent(Ce.getInitialValue(),{no_events:!0})}),Ce.props.init&&M7(Ce.props.init.setup)&&Ce.props.init.setup(jt),Ce.props.disabled&&(mQ(Ce.editor)?Ce.editor.options.set("disabled",Ce.props.disabled):Ce.editor.mode.set("readonly"))},init_instance_callback:function(jt){var Dt,qe=Ce.getInitialValue();Ce.currentContent=(Dt=Ce.currentContent)!==null&&Dt!==void 0?Dt:jt.getContent(),Ce.currentContent!==qe&&(Ce.currentContent=qe,jt.setContent(qe),jt.undoManager.clear(),jt.undoManager.add(),jt.setDirty(!1)),Ce.props.init&&M7(Ce.props.init.init_instance_callback)&&Ce.props.init.init_instance_callback(jt)}});Ce.inline||(Ke.style.visibility=""),lQ(Ke)&&(Ke.value=Ce.getInitialValue()),Ot.init(Ut)}},Ce.id=Ce.props.id||iQ("tiny-react"),Ce.elementRef=o5.createRef(),Ce.inline=(Ee=(xe=Ce.props.inline)!==null&&xe!==void 0?xe:(Ne=Ce.props.init)===null||Ne===void 0?void 0:Ne.inline)!==null&&Ee!==void 0?Ee:!1,Ce.boundHandlers={},Ce}return Object.defineProperty(Y.prototype,"view",{get:function(){var we,xe;return(xe=(we=this.elementRef.current)===null||we===void 0?void 0:we.ownerDocument.defaultView)!==null&&xe!==void 0?xe:window},enumerable:!1,configurable:!0}),Y.prototype.componentDidUpdate=function(we){var xe=this,Ne,Ee;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(we),this.editor.initialized)){if(this.currentContent=(Ne=this.currentContent)!==null&&Ne!==void 0?Ne:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==we.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var Ce=this.editor;Ce.undoManager.transact(function(){var Oe;if(!xe.inline||Ce.hasFocus())try{Oe=Ce.selection.getBookmark(3)}catch{}var Ze=xe.valueCursor;if(Ce.setContent(xe.props.value),!xe.inline||Ce.hasFocus())for(var Ct=0,Ke=[Oe,Ze];Ct<Ke.length;Ct++){var Ot=Ke[Ct];if(Ot)try{Ce.selection.moveToBookmark(Ot),xe.valueCursor=Ot;break}catch{}}})}if(this.props.readonly!==we.readonly){var de=(Ee=this.props.readonly)!==null&&Ee!==void 0?Ee:!1;dQ(this.editor,de?"readonly":"design")}this.props.disabled!==we.disabled&&(mQ(this.editor)?this.editor.options.set("disabled",this.props.disabled):dQ(this.editor,this.props.disabled?"readonly":"design"))}},Y.prototype.componentDidMount=function(){var we=this,xe,Ne,Ee,Ce,de;if(sQ(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(Ne=(xe=this.props).onScriptsLoadError)===null||Ne===void 0||Ne.call(xe,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((Ee=this.elementRef.current)===null||Ee===void 0)&&Ee.ownerDocument){var Oe=function(){var Ct,Ke;(Ke=(Ct=we.props).onScriptsLoad)===null||Ke===void 0||Ke.call(Ct),we.initialise()},Ze=function(Ct){var Ke,Ot;(Ot=(Ke=we.props).onScriptsLoadError)===null||Ot===void 0||Ot.call(Ke,Ct)};Nee.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(de=(Ce=this.props.scriptLoading)===null||Ce===void 0?void 0:Ce.delay)!==null&&de!==void 0?de:0,Oe,Ze)}},Y.prototype.componentWillUnmount=function(){var we=this,xe=this.editor;xe&&(xe.off(B7,this.handleEditorChange),xe.off(this.beforeInputEvent(),this.handleBeforeInput),xe.off("keypress",this.handleEditorChangeSpecial),xe.off("keydown",this.handleBeforeInputSpecial),xe.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(Ne){xe.off(Ne,we.boundHandlers[Ne])}),this.boundHandlers={},xe.remove(),this.editor=void 0)},Y.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},Y.prototype.beforeInputEvent=function(){return kee()?"beforeinput SelectionChange":"SelectionChange"},Y.prototype.renderInline=function(){var we=this.props.tagName,xe=we===void 0?"div":we;return o5.createElement(xe,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},Y.prototype.renderIframe=function(){return o5.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},Y.prototype.getScriptSources=function(){var we,xe,Ne=(we=this.props.scriptLoading)===null||we===void 0?void 0:we.async,Ee=(xe=this.props.scriptLoading)===null||xe===void 0?void 0:xe.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:Ne,defer:Ee}]:this.props.tinymceScriptSrc.map(function(Ze){return typeof Ze=="string"?{src:Ze,async:Ne,defer:Ee}:Ze});var Ce=this.props.cloudChannel,de=this.props.apiKey?this.props.apiKey:"no-api-key",Oe="https://cdn.tiny.cloud/1/".concat(de,"/tinymce/").concat(Ce,"/tinymce.min.js");return[{src:Oe,async:Ne,defer:Ee}]},Y.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},Y.prototype.bindHandlers=function(we){var xe=this;if(this.editor!==void 0){Eee(this.editor,we,this.props,this.boundHandlers,function(de){return xe.props[de]});var Ne=function(de){return de.onEditorChange!==void 0||de.value!==void 0},Ee=Ne(we),Ce=Ne(this.props);!Ee&&Ce?(this.editor.on(B7,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):Ee&&!Ce&&(this.editor.off(B7,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},Y.propTypes=See,Y.defaultProps={cloudChannel:"8"},Y}(o5.Component);const Bee=Object.freeze(Object.defineProperty({__proto__:null,Editor:Pee},Symbol.toStringTag,{value:"Module"}));hh.LogiksForm=gee,Object.defineProperty(hh,Symbol.toStringTag,{value:"Module"})});
